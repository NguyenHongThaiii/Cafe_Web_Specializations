function e5(e,t){return t.forEach(function(r){r&&typeof r!="string"&&!Array.isArray(r)&&Object.keys(r).forEach(function(s){if(s!=="default"&&!(s in e)){var u=Object.getOwnPropertyDescriptor(r,s);Object.defineProperty(e,s,u.get?u:{enumerable:!0,get:function(){return r[s]}})}})}),Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}const p8=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))s(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const x of d.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&s(x)}).observe(document,{childList:!0,subtree:!0});function r(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerpolicy&&(d.referrerPolicy=u.referrerpolicy),u.crossorigin==="use-credentials"?d.credentials="include":u.crossorigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function s(u){if(u.ep)return;u.ep=!0;const d=r(u);fetch(u.href,d)}};p8();var sa=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Ww(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var t5={exports:{}},n5={},ne={exports:{}},In={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tm=Symbol.for("react.element"),f8=Symbol.for("react.portal"),m8=Symbol.for("react.fragment"),g8=Symbol.for("react.strict_mode"),y8=Symbol.for("react.profiler"),x8=Symbol.for("react.provider"),_8=Symbol.for("react.context"),v8=Symbol.for("react.forward_ref"),b8=Symbol.for("react.suspense"),w8=Symbol.for("react.memo"),E8=Symbol.for("react.lazy"),IC=Symbol.iterator;function T8(e){return e===null||typeof e!="object"?null:(e=IC&&e[IC]||e["@@iterator"],typeof e=="function"?e:null)}var r5={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},i5=Object.assign,o5={};function bd(e,t,r){this.props=e,this.context=t,this.refs=o5,this.updater=r||r5}bd.prototype.isReactComponent={};bd.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};bd.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function s5(){}s5.prototype=bd.prototype;function Zw(e,t,r){this.props=e,this.context=t,this.refs=o5,this.updater=r||r5}var Xw=Zw.prototype=new s5;Xw.constructor=Zw;i5(Xw,bd.prototype);Xw.isPureReactComponent=!0;var DC=Array.isArray,a5=Object.prototype.hasOwnProperty,Kw={current:null},l5={key:!0,ref:!0,__self:!0,__source:!0};function c5(e,t,r){var s,u={},d=null,x=null;if(t!=null)for(s in t.ref!==void 0&&(x=t.ref),t.key!==void 0&&(d=""+t.key),t)a5.call(t,s)&&!l5.hasOwnProperty(s)&&(u[s]=t[s]);var l=arguments.length-2;if(l===1)u.children=r;else if(1<l){for(var _=Array(l),S=0;S<l;S++)_[S]=arguments[S+2];u.children=_}if(e&&e.defaultProps)for(s in l=e.defaultProps,l)u[s]===void 0&&(u[s]=l[s]);return{$$typeof:Tm,type:e,key:d,ref:x,props:u,_owner:Kw.current}}function S8(e,t){return{$$typeof:Tm,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Yw(e){return typeof e=="object"&&e!==null&&e.$$typeof===Tm}function C8(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var zC=/\/+/g;function iv(e,t){return typeof e=="object"&&e!==null&&e.key!=null?C8(""+e.key):t.toString(36)}function q0(e,t,r,s,u){var d=typeof e;(d==="undefined"||d==="boolean")&&(e=null);var x=!1;if(e===null)x=!0;else switch(d){case"string":case"number":x=!0;break;case"object":switch(e.$$typeof){case Tm:case f8:x=!0}}if(x)return x=e,u=u(x),e=s===""?"."+iv(x,0):s,DC(u)?(r="",e!=null&&(r=e.replace(zC,"$&/")+"/"),q0(u,t,r,"",function(S){return S})):u!=null&&(Yw(u)&&(u=S8(u,r+(!u.key||x&&x.key===u.key?"":(""+u.key).replace(zC,"$&/")+"/")+e)),t.push(u)),1;if(x=0,s=s===""?".":s+":",DC(e))for(var l=0;l<e.length;l++){d=e[l];var _=s+iv(d,l);x+=q0(d,t,r,_,u)}else if(_=T8(e),typeof _=="function")for(e=_.call(e),l=0;!(d=e.next()).done;)d=d.value,_=s+iv(d,l++),x+=q0(d,t,r,_,u);else if(d==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return x}function p0(e,t,r){if(e==null)return e;var s=[],u=0;return q0(e,s,"","",function(d){return t.call(r,d,u++)}),s}function A8(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ki={current:null},H0={transition:null},M8={ReactCurrentDispatcher:Ki,ReactCurrentBatchConfig:H0,ReactCurrentOwner:Kw};In.Children={map:p0,forEach:function(e,t,r){p0(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return p0(e,function(){t++}),t},toArray:function(e){return p0(e,function(t){return t})||[]},only:function(e){if(!Yw(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};In.Component=bd;In.Fragment=m8;In.Profiler=y8;In.PureComponent=Zw;In.StrictMode=g8;In.Suspense=b8;In.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M8;In.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=i5({},e.props),u=e.key,d=e.ref,x=e._owner;if(t!=null){if(t.ref!==void 0&&(d=t.ref,x=Kw.current),t.key!==void 0&&(u=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(_ in t)a5.call(t,_)&&!l5.hasOwnProperty(_)&&(s[_]=t[_]===void 0&&l!==void 0?l[_]:t[_])}var _=arguments.length-2;if(_===1)s.children=r;else if(1<_){l=Array(_);for(var S=0;S<_;S++)l[S]=arguments[S+2];s.children=l}return{$$typeof:Tm,type:e.type,key:u,ref:d,props:s,_owner:x}};In.createContext=function(e){return e={$$typeof:_8,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:x8,_context:e},e.Consumer=e};In.createElement=c5;In.createFactory=function(e){var t=c5.bind(null,e);return t.type=e,t};In.createRef=function(){return{current:null}};In.forwardRef=function(e){return{$$typeof:v8,render:e}};In.isValidElement=Yw;In.lazy=function(e){return{$$typeof:E8,_payload:{_status:-1,_result:e},_init:A8}};In.memo=function(e,t){return{$$typeof:w8,type:e,compare:t===void 0?null:t}};In.startTransition=function(e){var t=H0.transition;H0.transition={};try{e()}finally{H0.transition=t}};In.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};In.useCallback=function(e,t){return Ki.current.useCallback(e,t)};In.useContext=function(e){return Ki.current.useContext(e)};In.useDebugValue=function(){};In.useDeferredValue=function(e){return Ki.current.useDeferredValue(e)};In.useEffect=function(e,t){return Ki.current.useEffect(e,t)};In.useId=function(){return Ki.current.useId()};In.useImperativeHandle=function(e,t,r){return Ki.current.useImperativeHandle(e,t,r)};In.useInsertionEffect=function(e,t){return Ki.current.useInsertionEffect(e,t)};In.useLayoutEffect=function(e,t){return Ki.current.useLayoutEffect(e,t)};In.useMemo=function(e,t){return Ki.current.useMemo(e,t)};In.useReducer=function(e,t,r){return Ki.current.useReducer(e,t,r)};In.useRef=function(e){return Ki.current.useRef(e)};In.useState=function(e){return Ki.current.useState(e)};In.useSyncExternalStore=function(e,t,r){return Ki.current.useSyncExternalStore(e,t,r)};In.useTransition=function(){return Ki.current.useTransition()};In.version="18.2.0";ne.exports=In;var zt=ne.exports,Jw=e5({__proto__:null,default:zt},[ne.exports]);/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var td=ne.exports;function k8(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var P8=typeof Object.is=="function"?Object.is:k8,I8=td.useState,D8=td.useEffect,z8=td.useLayoutEffect,N8=td.useDebugValue;function L8(e,t){var r=t(),s=I8({inst:{value:r,getSnapshot:t}}),u=s[0].inst,d=s[1];return z8(function(){u.value=r,u.getSnapshot=t,ov(u)&&d({inst:u})},[e,r,t]),D8(function(){return ov(u)&&d({inst:u}),e(function(){ov(u)&&d({inst:u})})},[e]),N8(r),r}function ov(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!P8(e,r)}catch{return!0}}function F8(e,t){return t()}var R8=typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"?F8:L8;n5.useSyncExternalStore=td.useSyncExternalStore!==void 0?td.useSyncExternalStore:R8;t5.exports=n5;var u5={exports:{}},h5={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gy=ne.exports,O8=t5.exports;function B8(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var $8=typeof Object.is=="function"?Object.is:B8,j8=O8.useSyncExternalStore,U8=gy.useRef,V8=gy.useEffect,G8=gy.useMemo,q8=gy.useDebugValue;h5.useSyncExternalStoreWithSelector=function(e,t,r,s,u){var d=U8(null);if(d.current===null){var x={hasValue:!1,value:null};d.current=x}else x=d.current;d=G8(function(){function _(U){if(!S){if(S=!0,C=U,U=s(U),u!==void 0&&x.hasValue){var q=x.value;if(u(q,U))return k=q}return k=U}if(q=k,$8(C,U))return q;var L=s(U);return u!==void 0&&u(q,L)?q:(C=U,k=L)}var S=!1,C,k,D=r===void 0?null:r;return[function(){return _(t())},D===null?void 0:function(){return _(D())}]},[t,r,s,u]);var l=j8(e,d[0],d[1]);return V8(function(){x.hasValue=!0,x.value=l},[l]),q8(l),l};u5.exports=h5;var ri={exports:{}},Fo={},d5={exports:{}},p5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Ze,Ye){var De=Ze.length;Ze.push(Ye);e:for(;0<De;){var _t=De-1>>>1,mt=Ze[_t];if(0<u(mt,Ye))Ze[_t]=Ye,Ze[De]=mt,De=_t;else break e}}function r(Ze){return Ze.length===0?null:Ze[0]}function s(Ze){if(Ze.length===0)return null;var Ye=Ze[0],De=Ze.pop();if(De!==Ye){Ze[0]=De;e:for(var _t=0,mt=Ze.length,Et=mt>>>1;_t<Et;){var jt=2*(_t+1)-1,en=Ze[jt],nn=jt+1,vn=Ze[nn];if(0>u(en,De))nn<mt&&0>u(vn,en)?(Ze[_t]=vn,Ze[nn]=De,_t=nn):(Ze[_t]=en,Ze[jt]=De,_t=jt);else if(nn<mt&&0>u(vn,De))Ze[_t]=vn,Ze[nn]=De,_t=nn;else break e}}return Ye}function u(Ze,Ye){var De=Ze.sortIndex-Ye.sortIndex;return De!==0?De:Ze.id-Ye.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var x=Date,l=x.now();e.unstable_now=function(){return x.now()-l}}var _=[],S=[],C=1,k=null,D=3,U=!1,q=!1,L=!1,K=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function V(Ze){for(var Ye=r(S);Ye!==null;){if(Ye.callback===null)s(S);else if(Ye.startTime<=Ze)s(S),Ye.sortIndex=Ye.expirationTime,t(_,Ye);else break;Ye=r(S)}}function J(Ze){if(L=!1,V(Ze),!q)if(r(_)!==null)q=!0,Ot(re);else{var Ye=r(S);Ye!==null&&Dt(J,Ye.startTime-Ze)}}function re(Ze,Ye){q=!1,L&&(L=!1,R(ce),ce=-1),U=!0;var De=D;try{for(V(Ye),k=r(_);k!==null&&(!(k.expirationTime>Ye)||Ze&&!Le());){var _t=k.callback;if(typeof _t=="function"){k.callback=null,D=k.priorityLevel;var mt=_t(k.expirationTime<=Ye);Ye=e.unstable_now(),typeof mt=="function"?k.callback=mt:k===r(_)&&s(_),V(Ye)}else s(_);k=r(_)}if(k!==null)var Et=!0;else{var jt=r(S);jt!==null&&Dt(J,jt.startTime-Ye),Et=!1}return Et}finally{k=null,D=De,U=!1}}var fe=!1,be=null,ce=-1,ve=5,Fe=-1;function Le(){return!(e.unstable_now()-Fe<ve)}function Ie(){if(be!==null){var Ze=e.unstable_now();Fe=Ze;var Ye=!0;try{Ye=be(!0,Ze)}finally{Ye?Ke():(fe=!1,be=null)}}else fe=!1}var Ke;if(typeof F=="function")Ke=function(){F(Ie)};else if(typeof MessageChannel!="undefined"){var bt=new MessageChannel,ot=bt.port2;bt.port1.onmessage=Ie,Ke=function(){ot.postMessage(null)}}else Ke=function(){K(Ie,0)};function Ot(Ze){be=Ze,fe||(fe=!0,Ke())}function Dt(Ze,Ye){ce=K(function(){Ze(e.unstable_now())},Ye)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Ze){Ze.callback=null},e.unstable_continueExecution=function(){q||U||(q=!0,Ot(re))},e.unstable_forceFrameRate=function(Ze){0>Ze||125<Ze?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ve=0<Ze?Math.floor(1e3/Ze):5},e.unstable_getCurrentPriorityLevel=function(){return D},e.unstable_getFirstCallbackNode=function(){return r(_)},e.unstable_next=function(Ze){switch(D){case 1:case 2:case 3:var Ye=3;break;default:Ye=D}var De=D;D=Ye;try{return Ze()}finally{D=De}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Ze,Ye){switch(Ze){case 1:case 2:case 3:case 4:case 5:break;default:Ze=3}var De=D;D=Ze;try{return Ye()}finally{D=De}},e.unstable_scheduleCallback=function(Ze,Ye,De){var _t=e.unstable_now();switch(typeof De=="object"&&De!==null?(De=De.delay,De=typeof De=="number"&&0<De?_t+De:_t):De=_t,Ze){case 1:var mt=-1;break;case 2:mt=250;break;case 5:mt=1073741823;break;case 4:mt=1e4;break;default:mt=5e3}return mt=De+mt,Ze={id:C++,callback:Ye,priorityLevel:Ze,startTime:De,expirationTime:mt,sortIndex:-1},De>_t?(Ze.sortIndex=De,t(S,Ze),r(_)===null&&Ze===r(S)&&(L?(R(ce),ce=-1):L=!0,Dt(J,De-_t))):(Ze.sortIndex=mt,t(_,Ze),q||U||(q=!0,Ot(re))),Ze},e.unstable_shouldYield=Le,e.unstable_wrapCallback=function(Ze){var Ye=D;return function(){var De=D;D=Ye;try{return Ze.apply(this,arguments)}finally{D=De}}}})(p5);d5.exports=p5;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f5=ne.exports,No=d5.exports;function St(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var m5=new Set,Xf={};function _u(e,t){nd(e,t),nd(e+"Capture",t)}function nd(e,t){for(Xf[e]=t,e=0;e<t.length;e++)m5.add(t[e])}var Va=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),ob=Object.prototype.hasOwnProperty,H8=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,NC={},LC={};function W8(e){return ob.call(LC,e)?!0:ob.call(NC,e)?!1:H8.test(e)?LC[e]=!0:(NC[e]=!0,!1)}function Z8(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function X8(e,t,r,s){if(t===null||typeof t=="undefined"||Z8(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Yi(e,t,r,s,u,d,x){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=u,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=d,this.removeEmptyString=x}var wi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){wi[e]=new Yi(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];wi[t]=new Yi(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){wi[e]=new Yi(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){wi[e]=new Yi(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){wi[e]=new Yi(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){wi[e]=new Yi(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){wi[e]=new Yi(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){wi[e]=new Yi(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){wi[e]=new Yi(e,5,!1,e.toLowerCase(),null,!1,!1)});var Qw=/[\-:]([a-z])/g;function e2(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Qw,e2);wi[t]=new Yi(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Qw,e2);wi[t]=new Yi(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Qw,e2);wi[t]=new Yi(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){wi[e]=new Yi(e,1,!1,e.toLowerCase(),null,!1,!1)});wi.xlinkHref=new Yi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){wi[e]=new Yi(e,1,!1,e.toLowerCase(),null,!0,!0)});function t2(e,t,r,s){var u=wi.hasOwnProperty(t)?wi[t]:null;(u!==null?u.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(X8(t,r,u,s)&&(r=null),s||u===null?W8(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):u.mustUseProperty?e[u.propertyName]=r===null?u.type===3?!1:"":r:(t=u.attributeName,s=u.attributeNamespace,r===null?e.removeAttribute(t):(u=u.type,r=u===3||u===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var Za=f5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,f0=Symbol.for("react.element"),Dh=Symbol.for("react.portal"),zh=Symbol.for("react.fragment"),n2=Symbol.for("react.strict_mode"),sb=Symbol.for("react.profiler"),g5=Symbol.for("react.provider"),y5=Symbol.for("react.context"),r2=Symbol.for("react.forward_ref"),ab=Symbol.for("react.suspense"),lb=Symbol.for("react.suspense_list"),i2=Symbol.for("react.memo"),Il=Symbol.for("react.lazy"),x5=Symbol.for("react.offscreen"),FC=Symbol.iterator;function yf(e){return e===null||typeof e!="object"?null:(e=FC&&e[FC]||e["@@iterator"],typeof e=="function"?e:null)}var Lr=Object.assign,sv;function kf(e){if(sv===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);sv=t&&t[1]||""}return`
`+sv+e}var av=!1;function lv(e,t){if(!e||av)return"";av=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(S){var s=S}Reflect.construct(e,[],t)}else{try{t.call()}catch(S){s=S}e.call(t.prototype)}else{try{throw Error()}catch(S){s=S}e()}}catch(S){if(S&&s&&typeof S.stack=="string"){for(var u=S.stack.split(`
`),d=s.stack.split(`
`),x=u.length-1,l=d.length-1;1<=x&&0<=l&&u[x]!==d[l];)l--;for(;1<=x&&0<=l;x--,l--)if(u[x]!==d[l]){if(x!==1||l!==1)do if(x--,l--,0>l||u[x]!==d[l]){var _=`
`+u[x].replace(" at new "," at ");return e.displayName&&_.includes("<anonymous>")&&(_=_.replace("<anonymous>",e.displayName)),_}while(1<=x&&0<=l);break}}}finally{av=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?kf(e):""}function K8(e){switch(e.tag){case 5:return kf(e.type);case 16:return kf("Lazy");case 13:return kf("Suspense");case 19:return kf("SuspenseList");case 0:case 2:case 15:return e=lv(e.type,!1),e;case 11:return e=lv(e.type.render,!1),e;case 1:return e=lv(e.type,!0),e;default:return""}}function cb(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case zh:return"Fragment";case Dh:return"Portal";case sb:return"Profiler";case n2:return"StrictMode";case ab:return"Suspense";case lb:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case y5:return(e.displayName||"Context")+".Consumer";case g5:return(e._context.displayName||"Context")+".Provider";case r2:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case i2:return t=e.displayName||null,t!==null?t:cb(e.type)||"Memo";case Il:t=e._payload,e=e._init;try{return cb(e(t))}catch{}}return null}function Y8(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return cb(t);case 8:return t===n2?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function rc(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function _5(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function J8(e){var t=_5(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r!="undefined"&&typeof r.get=="function"&&typeof r.set=="function"){var u=r.get,d=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(x){s=""+x,d.call(this,x)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(x){s=""+x},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function m0(e){e._valueTracker||(e._valueTracker=J8(e))}function v5(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=_5(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function g1(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch{return e.body}}function ub(e,t){var r=t.checked;return Lr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r!=null?r:e._wrapperState.initialChecked})}function RC(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=rc(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function b5(e,t){t=t.checked,t!=null&&t2(e,"checked",t,!1)}function hb(e,t){b5(e,t);var r=rc(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?db(e,t.type,r):t.hasOwnProperty("defaultValue")&&db(e,t.type,rc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function OC(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function db(e,t,r){(t!=="number"||g1(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Pf=Array.isArray;function Hh(e,t,r,s){if(e=e.options,t){t={};for(var u=0;u<r.length;u++)t["$"+r[u]]=!0;for(r=0;r<e.length;r++)u=t.hasOwnProperty("$"+e[r].value),e[r].selected!==u&&(e[r].selected=u),u&&s&&(e[r].defaultSelected=!0)}else{for(r=""+rc(r),t=null,u=0;u<e.length;u++){if(e[u].value===r){e[u].selected=!0,s&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function pb(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(St(91));return Lr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function BC(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(St(92));if(Pf(r)){if(1<r.length)throw Error(St(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:rc(r)}}function w5(e,t){var r=rc(t.value),s=rc(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function $C(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function E5(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fb(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?E5(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var g0,T5=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,r,s,u){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,u)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(g0=g0||document.createElement("div"),g0.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=g0.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Kf(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Lf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Q8=["Webkit","ms","Moz","O"];Object.keys(Lf).forEach(function(e){Q8.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Lf[t]=Lf[e]})});function S5(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Lf.hasOwnProperty(e)&&Lf[e]?(""+t).trim():t+"px"}function C5(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,u=S5(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,u):e[r]=u}}var eL=Lr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mb(e,t){if(t){if(eL[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(St(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(St(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(St(61))}if(t.style!=null&&typeof t.style!="object")throw Error(St(62))}}function gb(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yb=null;function o2(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var xb=null,Wh=null,Zh=null;function jC(e){if(e=Am(e)){if(typeof xb!="function")throw Error(St(280));var t=e.stateNode;t&&(t=by(t),xb(e.stateNode,e.type,t))}}function A5(e){Wh?Zh?Zh.push(e):Zh=[e]:Wh=e}function M5(){if(Wh){var e=Wh,t=Zh;if(Zh=Wh=null,jC(e),t)for(e=0;e<t.length;e++)jC(t[e])}}function k5(e,t){return e(t)}function P5(){}var cv=!1;function I5(e,t,r){if(cv)return e(t,r);cv=!0;try{return k5(e,t,r)}finally{cv=!1,(Wh!==null||Zh!==null)&&(P5(),M5())}}function Yf(e,t){var r=e.stateNode;if(r===null)return null;var s=by(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(St(231,t,typeof r));return r}var _b=!1;if(Va)try{var xf={};Object.defineProperty(xf,"passive",{get:function(){_b=!0}}),window.addEventListener("test",xf,xf),window.removeEventListener("test",xf,xf)}catch{_b=!1}function tL(e,t,r,s,u,d,x,l,_){var S=Array.prototype.slice.call(arguments,3);try{t.apply(r,S)}catch(C){this.onError(C)}}var Ff=!1,y1=null,x1=!1,vb=null,nL={onError:function(e){Ff=!0,y1=e}};function rL(e,t,r,s,u,d,x,l,_){Ff=!1,y1=null,tL.apply(nL,arguments)}function iL(e,t,r,s,u,d,x,l,_){if(rL.apply(this,arguments),Ff){if(Ff){var S=y1;Ff=!1,y1=null}else throw Error(St(198));x1||(x1=!0,vb=S)}}function vu(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function D5(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function UC(e){if(vu(e)!==e)throw Error(St(188))}function oL(e){var t=e.alternate;if(!t){if(t=vu(e),t===null)throw Error(St(188));return t!==e?null:e}for(var r=e,s=t;;){var u=r.return;if(u===null)break;var d=u.alternate;if(d===null){if(s=u.return,s!==null){r=s;continue}break}if(u.child===d.child){for(d=u.child;d;){if(d===r)return UC(u),e;if(d===s)return UC(u),t;d=d.sibling}throw Error(St(188))}if(r.return!==s.return)r=u,s=d;else{for(var x=!1,l=u.child;l;){if(l===r){x=!0,r=u,s=d;break}if(l===s){x=!0,s=u,r=d;break}l=l.sibling}if(!x){for(l=d.child;l;){if(l===r){x=!0,r=d,s=u;break}if(l===s){x=!0,s=d,r=u;break}l=l.sibling}if(!x)throw Error(St(189))}}if(r.alternate!==s)throw Error(St(190))}if(r.tag!==3)throw Error(St(188));return r.stateNode.current===r?e:t}function z5(e){return e=oL(e),e!==null?N5(e):null}function N5(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=N5(e);if(t!==null)return t;e=e.sibling}return null}var L5=No.unstable_scheduleCallback,VC=No.unstable_cancelCallback,sL=No.unstable_shouldYield,aL=No.unstable_requestPaint,Vr=No.unstable_now,lL=No.unstable_getCurrentPriorityLevel,s2=No.unstable_ImmediatePriority,F5=No.unstable_UserBlockingPriority,_1=No.unstable_NormalPriority,cL=No.unstable_LowPriority,R5=No.unstable_IdlePriority,yy=null,la=null;function uL(e){if(la&&typeof la.onCommitFiberRoot=="function")try{la.onCommitFiberRoot(yy,e,void 0,(e.current.flags&128)===128)}catch{}}var js=Math.clz32?Math.clz32:pL,hL=Math.log,dL=Math.LN2;function pL(e){return e>>>=0,e===0?32:31-(hL(e)/dL|0)|0}var y0=64,x0=4194304;function If(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function v1(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,u=e.suspendedLanes,d=e.pingedLanes,x=r&268435455;if(x!==0){var l=x&~u;l!==0?s=If(l):(d&=x,d!==0&&(s=If(d)))}else x=r&~u,x!==0?s=If(x):d!==0&&(s=If(d));if(s===0)return 0;if(t!==0&&t!==s&&(t&u)===0&&(u=s&-s,d=t&-t,u>=d||u===16&&(d&4194240)!==0))return t;if((s&4)!==0&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-js(t),u=1<<r,s|=e[r],t&=~u;return s}function fL(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mL(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,u=e.expirationTimes,d=e.pendingLanes;0<d;){var x=31-js(d),l=1<<x,_=u[x];_===-1?((l&r)===0||(l&s)!==0)&&(u[x]=fL(l,t)):_<=t&&(e.expiredLanes|=l),d&=~l}}function bb(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function O5(){var e=y0;return y0<<=1,(y0&4194240)===0&&(y0=64),e}function uv(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Sm(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-js(t),e[t]=r}function gL(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var u=31-js(r),d=1<<u;t[u]=0,s[u]=-1,e[u]=-1,r&=~d}}function a2(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-js(r),u=1<<s;u&t|e[s]&t&&(e[s]|=t),r&=~u}}var Yn=0;function B5(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var $5,l2,j5,U5,V5,wb=!1,_0=[],ql=null,Hl=null,Wl=null,Jf=new Map,Qf=new Map,Ll=[],yL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function GC(e,t){switch(e){case"focusin":case"focusout":ql=null;break;case"dragenter":case"dragleave":Hl=null;break;case"mouseover":case"mouseout":Wl=null;break;case"pointerover":case"pointerout":Jf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qf.delete(t.pointerId)}}function _f(e,t,r,s,u,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:d,targetContainers:[u]},t!==null&&(t=Am(t),t!==null&&l2(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function xL(e,t,r,s,u){switch(t){case"focusin":return ql=_f(ql,e,t,r,s,u),!0;case"dragenter":return Hl=_f(Hl,e,t,r,s,u),!0;case"mouseover":return Wl=_f(Wl,e,t,r,s,u),!0;case"pointerover":var d=u.pointerId;return Jf.set(d,_f(Jf.get(d)||null,e,t,r,s,u)),!0;case"gotpointercapture":return d=u.pointerId,Qf.set(d,_f(Qf.get(d)||null,e,t,r,s,u)),!0}return!1}function G5(e){var t=ou(e.target);if(t!==null){var r=vu(t);if(r!==null){if(t=r.tag,t===13){if(t=D5(r),t!==null){e.blockedOn=t,V5(e.priority,function(){j5(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function W0(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Eb(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);yb=s,r.target.dispatchEvent(s),yb=null}else return t=Am(r),t!==null&&l2(t),e.blockedOn=r,!1;t.shift()}return!0}function qC(e,t,r){W0(e)&&r.delete(t)}function _L(){wb=!1,ql!==null&&W0(ql)&&(ql=null),Hl!==null&&W0(Hl)&&(Hl=null),Wl!==null&&W0(Wl)&&(Wl=null),Jf.forEach(qC),Qf.forEach(qC)}function vf(e,t){e.blockedOn===t&&(e.blockedOn=null,wb||(wb=!0,No.unstable_scheduleCallback(No.unstable_NormalPriority,_L)))}function em(e){function t(u){return vf(u,e)}if(0<_0.length){vf(_0[0],e);for(var r=1;r<_0.length;r++){var s=_0[r];s.blockedOn===e&&(s.blockedOn=null)}}for(ql!==null&&vf(ql,e),Hl!==null&&vf(Hl,e),Wl!==null&&vf(Wl,e),Jf.forEach(t),Qf.forEach(t),r=0;r<Ll.length;r++)s=Ll[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<Ll.length&&(r=Ll[0],r.blockedOn===null);)G5(r),r.blockedOn===null&&Ll.shift()}var Xh=Za.ReactCurrentBatchConfig,b1=!0;function vL(e,t,r,s){var u=Yn,d=Xh.transition;Xh.transition=null;try{Yn=1,c2(e,t,r,s)}finally{Yn=u,Xh.transition=d}}function bL(e,t,r,s){var u=Yn,d=Xh.transition;Xh.transition=null;try{Yn=4,c2(e,t,r,s)}finally{Yn=u,Xh.transition=d}}function c2(e,t,r,s){if(b1){var u=Eb(e,t,r,s);if(u===null)vv(e,t,s,w1,r),GC(e,s);else if(xL(u,e,t,r,s))s.stopPropagation();else if(GC(e,s),t&4&&-1<yL.indexOf(e)){for(;u!==null;){var d=Am(u);if(d!==null&&$5(d),d=Eb(e,t,r,s),d===null&&vv(e,t,s,w1,r),d===u)break;u=d}u!==null&&s.stopPropagation()}else vv(e,t,s,null,r)}}var w1=null;function Eb(e,t,r,s){if(w1=null,e=o2(s),e=ou(e),e!==null)if(t=vu(e),t===null)e=null;else if(r=t.tag,r===13){if(e=D5(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return w1=e,null}function q5(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lL()){case s2:return 1;case F5:return 4;case _1:case cL:return 16;case R5:return 536870912;default:return 16}default:return 16}}var Ol=null,u2=null,Z0=null;function H5(){if(Z0)return Z0;var e,t=u2,r=t.length,s,u="value"in Ol?Ol.value:Ol.textContent,d=u.length;for(e=0;e<r&&t[e]===u[e];e++);var x=r-e;for(s=1;s<=x&&t[r-s]===u[d-s];s++);return Z0=u.slice(e,1<s?1-s:void 0)}function X0(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function v0(){return!0}function HC(){return!1}function Ro(e){function t(r,s,u,d,x){this._reactName=r,this._targetInst=u,this.type=s,this.nativeEvent=d,this.target=x,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(d):d[l]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?v0:HC,this.isPropagationStopped=HC,this}return Lr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=v0)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=v0)},persist:function(){},isPersistent:v0}),t}var wd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},h2=Ro(wd),Cm=Lr({},wd,{view:0,detail:0}),wL=Ro(Cm),hv,dv,bf,xy=Lr({},Cm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:d2,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==bf&&(bf&&e.type==="mousemove"?(hv=e.screenX-bf.screenX,dv=e.screenY-bf.screenY):dv=hv=0,bf=e),hv)},movementY:function(e){return"movementY"in e?e.movementY:dv}}),WC=Ro(xy),EL=Lr({},xy,{dataTransfer:0}),TL=Ro(EL),SL=Lr({},Cm,{relatedTarget:0}),pv=Ro(SL),CL=Lr({},wd,{animationName:0,elapsedTime:0,pseudoElement:0}),AL=Ro(CL),ML=Lr({},wd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kL=Ro(ML),PL=Lr({},wd,{data:0}),ZC=Ro(PL),IL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},DL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function NL(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=zL[e])?!!t[e]:!1}function d2(){return NL}var LL=Lr({},Cm,{key:function(e){if(e.key){var t=IL[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=X0(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?DL[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:d2,charCode:function(e){return e.type==="keypress"?X0(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?X0(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),FL=Ro(LL),RL=Lr({},xy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),XC=Ro(RL),OL=Lr({},Cm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:d2}),BL=Ro(OL),$L=Lr({},wd,{propertyName:0,elapsedTime:0,pseudoElement:0}),jL=Ro($L),UL=Lr({},xy,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),VL=Ro(UL),GL=[9,13,27,32],p2=Va&&"CompositionEvent"in window,Rf=null;Va&&"documentMode"in document&&(Rf=document.documentMode);var qL=Va&&"TextEvent"in window&&!Rf,W5=Va&&(!p2||Rf&&8<Rf&&11>=Rf),KC=String.fromCharCode(32),YC=!1;function Z5(e,t){switch(e){case"keyup":return GL.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function X5(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Nh=!1;function HL(e,t){switch(e){case"compositionend":return X5(t);case"keypress":return t.which!==32?null:(YC=!0,KC);case"textInput":return e=t.data,e===KC&&YC?null:e;default:return null}}function WL(e,t){if(Nh)return e==="compositionend"||!p2&&Z5(e,t)?(e=H5(),Z0=u2=Ol=null,Nh=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return W5&&t.locale!=="ko"?null:t.data;default:return null}}var ZL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function JC(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ZL[e.type]:t==="textarea"}function K5(e,t,r,s){A5(s),t=E1(t,"onChange"),0<t.length&&(r=new h2("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var Of=null,tm=null;function XL(e){aM(e,0)}function _y(e){var t=Rh(e);if(v5(t))return e}function KL(e,t){if(e==="change")return t}var Y5=!1;if(Va){var fv;if(Va){var mv="oninput"in document;if(!mv){var QC=document.createElement("div");QC.setAttribute("oninput","return;"),mv=typeof QC.oninput=="function"}fv=mv}else fv=!1;Y5=fv&&(!document.documentMode||9<document.documentMode)}function e3(){Of&&(Of.detachEvent("onpropertychange",J5),tm=Of=null)}function J5(e){if(e.propertyName==="value"&&_y(tm)){var t=[];K5(t,tm,e,o2(e)),I5(XL,t)}}function YL(e,t,r){e==="focusin"?(e3(),Of=t,tm=r,Of.attachEvent("onpropertychange",J5)):e==="focusout"&&e3()}function JL(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return _y(tm)}function QL(e,t){if(e==="click")return _y(t)}function eF(e,t){if(e==="input"||e==="change")return _y(t)}function tF(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Vs=typeof Object.is=="function"?Object.is:tF;function nm(e,t){if(Vs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var u=r[s];if(!ob.call(t,u)||!Vs(e[u],t[u]))return!1}return!0}function t3(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function n3(e,t){var r=t3(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=t3(r)}}function Q5(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Q5(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function eM(){for(var e=window,t=g1();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=g1(e.document)}return t}function f2(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function nF(e){var t=eM(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Q5(r.ownerDocument.documentElement,r)){if(s!==null&&f2(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var u=r.textContent.length,d=Math.min(s.start,u);s=s.end===void 0?d:Math.min(s.end,u),!e.extend&&d>s&&(u=s,s=d,d=u),u=n3(r,d);var x=n3(r,s);u&&x&&(e.rangeCount!==1||e.anchorNode!==u.node||e.anchorOffset!==u.offset||e.focusNode!==x.node||e.focusOffset!==x.offset)&&(t=t.createRange(),t.setStart(u.node,u.offset),e.removeAllRanges(),d>s?(e.addRange(t),e.extend(x.node,x.offset)):(t.setEnd(x.node,x.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var rF=Va&&"documentMode"in document&&11>=document.documentMode,Lh=null,Tb=null,Bf=null,Sb=!1;function r3(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Sb||Lh==null||Lh!==g1(s)||(s=Lh,"selectionStart"in s&&f2(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Bf&&nm(Bf,s)||(Bf=s,s=E1(Tb,"onSelect"),0<s.length&&(t=new h2("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=Lh)))}function b0(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Fh={animationend:b0("Animation","AnimationEnd"),animationiteration:b0("Animation","AnimationIteration"),animationstart:b0("Animation","AnimationStart"),transitionend:b0("Transition","TransitionEnd")},gv={},tM={};Va&&(tM=document.createElement("div").style,"AnimationEvent"in window||(delete Fh.animationend.animation,delete Fh.animationiteration.animation,delete Fh.animationstart.animation),"TransitionEvent"in window||delete Fh.transitionend.transition);function vy(e){if(gv[e])return gv[e];if(!Fh[e])return e;var t=Fh[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in tM)return gv[e]=t[r];return e}var nM=vy("animationend"),rM=vy("animationiteration"),iM=vy("animationstart"),oM=vy("transitionend"),sM=new Map,i3="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ac(e,t){sM.set(e,t),_u(t,[e])}for(var yv=0;yv<i3.length;yv++){var xv=i3[yv],iF=xv.toLowerCase(),oF=xv[0].toUpperCase()+xv.slice(1);ac(iF,"on"+oF)}ac(nM,"onAnimationEnd");ac(rM,"onAnimationIteration");ac(iM,"onAnimationStart");ac("dblclick","onDoubleClick");ac("focusin","onFocus");ac("focusout","onBlur");ac(oM,"onTransitionEnd");nd("onMouseEnter",["mouseout","mouseover"]);nd("onMouseLeave",["mouseout","mouseover"]);nd("onPointerEnter",["pointerout","pointerover"]);nd("onPointerLeave",["pointerout","pointerover"]);_u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_u("onBeforeInput",["compositionend","keypress","textInput","paste"]);_u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Df="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sF=new Set("cancel close invalid load scroll toggle".split(" ").concat(Df));function o3(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,iL(s,t,void 0,e),e.currentTarget=null}function aM(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],u=s.event;s=s.listeners;e:{var d=void 0;if(t)for(var x=s.length-1;0<=x;x--){var l=s[x],_=l.instance,S=l.currentTarget;if(l=l.listener,_!==d&&u.isPropagationStopped())break e;o3(u,l,S),d=_}else for(x=0;x<s.length;x++){if(l=s[x],_=l.instance,S=l.currentTarget,l=l.listener,_!==d&&u.isPropagationStopped())break e;o3(u,l,S),d=_}}}if(x1)throw e=vb,x1=!1,vb=null,e}function fr(e,t){var r=t[Pb];r===void 0&&(r=t[Pb]=new Set);var s=e+"__bubble";r.has(s)||(lM(t,e,2,!1),r.add(s))}function _v(e,t,r){var s=0;t&&(s|=4),lM(r,e,s,t)}var w0="_reactListening"+Math.random().toString(36).slice(2);function rm(e){if(!e[w0]){e[w0]=!0,m5.forEach(function(r){r!=="selectionchange"&&(sF.has(r)||_v(r,!1,e),_v(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[w0]||(t[w0]=!0,_v("selectionchange",!1,t))}}function lM(e,t,r,s){switch(q5(t)){case 1:var u=vL;break;case 4:u=bL;break;default:u=c2}r=u.bind(null,t,r,e),u=void 0,!_b||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),s?u!==void 0?e.addEventListener(t,r,{capture:!0,passive:u}):e.addEventListener(t,r,!0):u!==void 0?e.addEventListener(t,r,{passive:u}):e.addEventListener(t,r,!1)}function vv(e,t,r,s,u){var d=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var x=s.tag;if(x===3||x===4){var l=s.stateNode.containerInfo;if(l===u||l.nodeType===8&&l.parentNode===u)break;if(x===4)for(x=s.return;x!==null;){var _=x.tag;if((_===3||_===4)&&(_=x.stateNode.containerInfo,_===u||_.nodeType===8&&_.parentNode===u))return;x=x.return}for(;l!==null;){if(x=ou(l),x===null)return;if(_=x.tag,_===5||_===6){s=d=x;continue e}l=l.parentNode}}s=s.return}I5(function(){var S=d,C=o2(r),k=[];e:{var D=sM.get(e);if(D!==void 0){var U=h2,q=e;switch(e){case"keypress":if(X0(r)===0)break e;case"keydown":case"keyup":U=FL;break;case"focusin":q="focus",U=pv;break;case"focusout":q="blur",U=pv;break;case"beforeblur":case"afterblur":U=pv;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":U=WC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":U=TL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":U=BL;break;case nM:case rM:case iM:U=AL;break;case oM:U=jL;break;case"scroll":U=wL;break;case"wheel":U=VL;break;case"copy":case"cut":case"paste":U=kL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":U=XC}var L=(t&4)!==0,K=!L&&e==="scroll",R=L?D!==null?D+"Capture":null:D;L=[];for(var F=S,V;F!==null;){V=F;var J=V.stateNode;if(V.tag===5&&J!==null&&(V=J,R!==null&&(J=Yf(F,R),J!=null&&L.push(im(F,J,V)))),K)break;F=F.return}0<L.length&&(D=new U(D,q,null,r,C),k.push({event:D,listeners:L}))}}if((t&7)===0){e:{if(D=e==="mouseover"||e==="pointerover",U=e==="mouseout"||e==="pointerout",D&&r!==yb&&(q=r.relatedTarget||r.fromElement)&&(ou(q)||q[Ga]))break e;if((U||D)&&(D=C.window===C?C:(D=C.ownerDocument)?D.defaultView||D.parentWindow:window,U?(q=r.relatedTarget||r.toElement,U=S,q=q?ou(q):null,q!==null&&(K=vu(q),q!==K||q.tag!==5&&q.tag!==6)&&(q=null)):(U=null,q=S),U!==q)){if(L=WC,J="onMouseLeave",R="onMouseEnter",F="mouse",(e==="pointerout"||e==="pointerover")&&(L=XC,J="onPointerLeave",R="onPointerEnter",F="pointer"),K=U==null?D:Rh(U),V=q==null?D:Rh(q),D=new L(J,F+"leave",U,r,C),D.target=K,D.relatedTarget=V,J=null,ou(C)===S&&(L=new L(R,F+"enter",q,r,C),L.target=V,L.relatedTarget=K,J=L),K=J,U&&q)t:{for(L=U,R=q,F=0,V=L;V;V=Th(V))F++;for(V=0,J=R;J;J=Th(J))V++;for(;0<F-V;)L=Th(L),F--;for(;0<V-F;)R=Th(R),V--;for(;F--;){if(L===R||R!==null&&L===R.alternate)break t;L=Th(L),R=Th(R)}L=null}else L=null;U!==null&&s3(k,D,U,L,!1),q!==null&&K!==null&&s3(k,K,q,L,!0)}}e:{if(D=S?Rh(S):window,U=D.nodeName&&D.nodeName.toLowerCase(),U==="select"||U==="input"&&D.type==="file")var re=KL;else if(JC(D))if(Y5)re=eF;else{re=JL;var fe=YL}else(U=D.nodeName)&&U.toLowerCase()==="input"&&(D.type==="checkbox"||D.type==="radio")&&(re=QL);if(re&&(re=re(e,S))){K5(k,re,r,C);break e}fe&&fe(e,D,S),e==="focusout"&&(fe=D._wrapperState)&&fe.controlled&&D.type==="number"&&db(D,"number",D.value)}switch(fe=S?Rh(S):window,e){case"focusin":(JC(fe)||fe.contentEditable==="true")&&(Lh=fe,Tb=S,Bf=null);break;case"focusout":Bf=Tb=Lh=null;break;case"mousedown":Sb=!0;break;case"contextmenu":case"mouseup":case"dragend":Sb=!1,r3(k,r,C);break;case"selectionchange":if(rF)break;case"keydown":case"keyup":r3(k,r,C)}var be;if(p2)e:{switch(e){case"compositionstart":var ce="onCompositionStart";break e;case"compositionend":ce="onCompositionEnd";break e;case"compositionupdate":ce="onCompositionUpdate";break e}ce=void 0}else Nh?Z5(e,r)&&(ce="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(ce="onCompositionStart");ce&&(W5&&r.locale!=="ko"&&(Nh||ce!=="onCompositionStart"?ce==="onCompositionEnd"&&Nh&&(be=H5()):(Ol=C,u2="value"in Ol?Ol.value:Ol.textContent,Nh=!0)),fe=E1(S,ce),0<fe.length&&(ce=new ZC(ce,e,null,r,C),k.push({event:ce,listeners:fe}),be?ce.data=be:(be=X5(r),be!==null&&(ce.data=be)))),(be=qL?HL(e,r):WL(e,r))&&(S=E1(S,"onBeforeInput"),0<S.length&&(C=new ZC("onBeforeInput","beforeinput",null,r,C),k.push({event:C,listeners:S}),C.data=be))}aM(k,t)})}function im(e,t,r){return{instance:e,listener:t,currentTarget:r}}function E1(e,t){for(var r=t+"Capture",s=[];e!==null;){var u=e,d=u.stateNode;u.tag===5&&d!==null&&(u=d,d=Yf(e,r),d!=null&&s.unshift(im(e,d,u)),d=Yf(e,t),d!=null&&s.push(im(e,d,u))),e=e.return}return s}function Th(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function s3(e,t,r,s,u){for(var d=t._reactName,x=[];r!==null&&r!==s;){var l=r,_=l.alternate,S=l.stateNode;if(_!==null&&_===s)break;l.tag===5&&S!==null&&(l=S,u?(_=Yf(r,d),_!=null&&x.unshift(im(r,_,l))):u||(_=Yf(r,d),_!=null&&x.push(im(r,_,l)))),r=r.return}x.length!==0&&e.push({event:t,listeners:x})}var aF=/\r\n?/g,lF=/\u0000|\uFFFD/g;function a3(e){return(typeof e=="string"?e:""+e).replace(aF,`
`).replace(lF,"")}function E0(e,t,r){if(t=a3(t),a3(e)!==t&&r)throw Error(St(425))}function T1(){}var Cb=null,Ab=null;function Mb(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var kb=typeof setTimeout=="function"?setTimeout:void 0,cF=typeof clearTimeout=="function"?clearTimeout:void 0,l3=typeof Promise=="function"?Promise:void 0,uF=typeof queueMicrotask=="function"?queueMicrotask:typeof l3!="undefined"?function(e){return l3.resolve(null).then(e).catch(hF)}:kb;function hF(e){setTimeout(function(){throw e})}function bv(e,t){var r=t,s=0;do{var u=r.nextSibling;if(e.removeChild(r),u&&u.nodeType===8)if(r=u.data,r==="/$"){if(s===0){e.removeChild(u),em(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=u}while(r);em(t)}function Zl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function c3(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Ed=Math.random().toString(36).slice(2),oa="__reactFiber$"+Ed,om="__reactProps$"+Ed,Ga="__reactContainer$"+Ed,Pb="__reactEvents$"+Ed,dF="__reactListeners$"+Ed,pF="__reactHandles$"+Ed;function ou(e){var t=e[oa];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ga]||r[oa]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=c3(e);e!==null;){if(r=e[oa])return r;e=c3(e)}return t}e=r,r=e.parentNode}return null}function Am(e){return e=e[oa]||e[Ga],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Rh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(St(33))}function by(e){return e[om]||null}var Ib=[],Oh=-1;function lc(e){return{current:e}}function gr(e){0>Oh||(e.current=Ib[Oh],Ib[Oh]=null,Oh--)}function ur(e,t){Oh++,Ib[Oh]=e.current,e.current=t}var ic={},Oi=lc(ic),po=lc(!1),du=ic;function rd(e,t){var r=e.type.contextTypes;if(!r)return ic;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var u={},d;for(d in r)u[d]=t[d];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=u),u}function fo(e){return e=e.childContextTypes,e!=null}function S1(){gr(po),gr(Oi)}function u3(e,t,r){if(Oi.current!==ic)throw Error(St(168));ur(Oi,t),ur(po,r)}function cM(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var u in s)if(!(u in t))throw Error(St(108,Y8(e)||"Unknown",u));return Lr({},r,s)}function C1(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ic,du=Oi.current,ur(Oi,e),ur(po,po.current),!0}function h3(e,t,r){var s=e.stateNode;if(!s)throw Error(St(169));r?(e=cM(e,t,du),s.__reactInternalMemoizedMergedChildContext=e,gr(po),gr(Oi),ur(Oi,e)):gr(po),ur(po,r)}var Oa=null,wy=!1,wv=!1;function uM(e){Oa===null?Oa=[e]:Oa.push(e)}function fF(e){wy=!0,uM(e)}function cc(){if(!wv&&Oa!==null){wv=!0;var e=0,t=Yn;try{var r=Oa;for(Yn=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}Oa=null,wy=!1}catch(u){throw Oa!==null&&(Oa=Oa.slice(e+1)),L5(s2,cc),u}finally{Yn=t,wv=!1}}return null}var Bh=[],$h=0,A1=null,M1=0,ns=[],rs=0,pu=null,Ba=1,$a="";function Qc(e,t){Bh[$h++]=M1,Bh[$h++]=A1,A1=e,M1=t}function hM(e,t,r){ns[rs++]=Ba,ns[rs++]=$a,ns[rs++]=pu,pu=e;var s=Ba;e=$a;var u=32-js(s)-1;s&=~(1<<u),r+=1;var d=32-js(t)+u;if(30<d){var x=u-u%5;d=(s&(1<<x)-1).toString(32),s>>=x,u-=x,Ba=1<<32-js(t)+u|r<<u|s,$a=d+e}else Ba=1<<d|r<<u|s,$a=e}function m2(e){e.return!==null&&(Qc(e,1),hM(e,1,0))}function g2(e){for(;e===A1;)A1=Bh[--$h],Bh[$h]=null,M1=Bh[--$h],Bh[$h]=null;for(;e===pu;)pu=ns[--rs],ns[rs]=null,$a=ns[--rs],ns[rs]=null,Ba=ns[--rs],ns[rs]=null}var Do=null,ko=null,br=!1,Rs=null;function dM(e,t){var r=is(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function d3(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Do=e,ko=Zl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Do=e,ko=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=pu!==null?{id:Ba,overflow:$a}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=is(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Do=e,ko=null,!0):!1;default:return!1}}function Db(e){return(e.mode&1)!==0&&(e.flags&128)===0}function zb(e){if(br){var t=ko;if(t){var r=t;if(!d3(e,t)){if(Db(e))throw Error(St(418));t=Zl(r.nextSibling);var s=Do;t&&d3(e,t)?dM(s,r):(e.flags=e.flags&-4097|2,br=!1,Do=e)}}else{if(Db(e))throw Error(St(418));e.flags=e.flags&-4097|2,br=!1,Do=e}}}function p3(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Do=e}function T0(e){if(e!==Do)return!1;if(!br)return p3(e),br=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Mb(e.type,e.memoizedProps)),t&&(t=ko)){if(Db(e))throw pM(),Error(St(418));for(;t;)dM(e,t),t=Zl(t.nextSibling)}if(p3(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(St(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){ko=Zl(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}ko=null}}else ko=Do?Zl(e.stateNode.nextSibling):null;return!0}function pM(){for(var e=ko;e;)e=Zl(e.nextSibling)}function id(){ko=Do=null,br=!1}function y2(e){Rs===null?Rs=[e]:Rs.push(e)}var mF=Za.ReactCurrentBatchConfig;function Ns(e,t){if(e&&e.defaultProps){t=Lr({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var k1=lc(null),P1=null,jh=null,x2=null;function _2(){x2=jh=P1=null}function v2(e){var t=k1.current;gr(k1),e._currentValue=t}function Nb(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function Kh(e,t){P1=e,x2=jh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(ho=!0),e.firstContext=null)}function ss(e){var t=e._currentValue;if(x2!==e)if(e={context:e,memoizedValue:t,next:null},jh===null){if(P1===null)throw Error(St(308));jh=e,P1.dependencies={lanes:0,firstContext:e}}else jh=jh.next=e;return t}var su=null;function b2(e){su===null?su=[e]:su.push(e)}function fM(e,t,r,s){var u=t.interleaved;return u===null?(r.next=r,b2(t)):(r.next=u.next,u.next=r),t.interleaved=r,qa(e,s)}function qa(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Dl=!1;function w2(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mM(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ja(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Xl(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(Nn&2)!==0){var u=s.pending;return u===null?t.next=t:(t.next=u.next,u.next=t),s.pending=t,qa(e,r)}return u=s.interleaved,u===null?(t.next=t,b2(s)):(t.next=u.next,u.next=t),s.interleaved=t,qa(e,r)}function K0(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,a2(e,r)}}function f3(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var u=null,d=null;if(r=r.firstBaseUpdate,r!==null){do{var x={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};d===null?u=d=x:d=d.next=x,r=r.next}while(r!==null);d===null?u=d=t:d=d.next=t}else u=d=t;r={baseState:s.baseState,firstBaseUpdate:u,lastBaseUpdate:d,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function I1(e,t,r,s){var u=e.updateQueue;Dl=!1;var d=u.firstBaseUpdate,x=u.lastBaseUpdate,l=u.shared.pending;if(l!==null){u.shared.pending=null;var _=l,S=_.next;_.next=null,x===null?d=S:x.next=S,x=_;var C=e.alternate;C!==null&&(C=C.updateQueue,l=C.lastBaseUpdate,l!==x&&(l===null?C.firstBaseUpdate=S:l.next=S,C.lastBaseUpdate=_))}if(d!==null){var k=u.baseState;x=0,C=S=_=null,l=d;do{var D=l.lane,U=l.eventTime;if((s&D)===D){C!==null&&(C=C.next={eventTime:U,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var q=e,L=l;switch(D=t,U=r,L.tag){case 1:if(q=L.payload,typeof q=="function"){k=q.call(U,k,D);break e}k=q;break e;case 3:q.flags=q.flags&-65537|128;case 0:if(q=L.payload,D=typeof q=="function"?q.call(U,k,D):q,D==null)break e;k=Lr({},k,D);break e;case 2:Dl=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,D=u.effects,D===null?u.effects=[l]:D.push(l))}else U={eventTime:U,lane:D,tag:l.tag,payload:l.payload,callback:l.callback,next:null},C===null?(S=C=U,_=k):C=C.next=U,x|=D;if(l=l.next,l===null){if(l=u.shared.pending,l===null)break;D=l,l=D.next,D.next=null,u.lastBaseUpdate=D,u.shared.pending=null}}while(1);if(C===null&&(_=k),u.baseState=_,u.firstBaseUpdate=S,u.lastBaseUpdate=C,t=u.shared.interleaved,t!==null){u=t;do x|=u.lane,u=u.next;while(u!==t)}else d===null&&(u.shared.lanes=0);mu|=x,e.lanes=x,e.memoizedState=k}}function m3(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],u=s.callback;if(u!==null){if(s.callback=null,s=r,typeof u!="function")throw Error(St(191,u));u.call(s)}}}var gM=new f5.Component().refs;function Lb(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:Lr({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Ey={isMounted:function(e){return(e=e._reactInternals)?vu(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=Wi(),u=Yl(e),d=ja(s,u);d.payload=t,r!=null&&(d.callback=r),t=Xl(e,d,u),t!==null&&(Us(t,e,u,s),K0(t,e,u))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=Wi(),u=Yl(e),d=ja(s,u);d.tag=1,d.payload=t,r!=null&&(d.callback=r),t=Xl(e,d,u),t!==null&&(Us(t,e,u,s),K0(t,e,u))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Wi(),s=Yl(e),u=ja(r,s);u.tag=2,t!=null&&(u.callback=t),t=Xl(e,u,s),t!==null&&(Us(t,e,s,r),K0(t,e,s))}};function g3(e,t,r,s,u,d,x){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,d,x):t.prototype&&t.prototype.isPureReactComponent?!nm(r,s)||!nm(u,d):!0}function yM(e,t,r){var s=!1,u=ic,d=t.contextType;return typeof d=="object"&&d!==null?d=ss(d):(u=fo(t)?du:Oi.current,s=t.contextTypes,d=(s=s!=null)?rd(e,u):ic),t=new t(r,d),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ey,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=u,e.__reactInternalMemoizedMaskedChildContext=d),t}function y3(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&Ey.enqueueReplaceState(t,t.state,null)}function Fb(e,t,r,s){var u=e.stateNode;u.props=r,u.state=e.memoizedState,u.refs=gM,w2(e);var d=t.contextType;typeof d=="object"&&d!==null?u.context=ss(d):(d=fo(t)?du:Oi.current,u.context=rd(e,d)),u.state=e.memoizedState,d=t.getDerivedStateFromProps,typeof d=="function"&&(Lb(e,t,d,r),u.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(t=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),t!==u.state&&Ey.enqueueReplaceState(u,u.state,null),I1(e,r,u,s),u.state=e.memoizedState),typeof u.componentDidMount=="function"&&(e.flags|=4194308)}function wf(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(St(309));var s=r.stateNode}if(!s)throw Error(St(147,e));var u=s,d=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===d?t.ref:(t=function(x){var l=u.refs;l===gM&&(l=u.refs={}),x===null?delete l[d]:l[d]=x},t._stringRef=d,t)}if(typeof e!="string")throw Error(St(284));if(!r._owner)throw Error(St(290,e))}return e}function S0(e,t){throw e=Object.prototype.toString.call(t),Error(St(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function x3(e){var t=e._init;return t(e._payload)}function xM(e){function t(R,F){if(e){var V=R.deletions;V===null?(R.deletions=[F],R.flags|=16):V.push(F)}}function r(R,F){if(!e)return null;for(;F!==null;)t(R,F),F=F.sibling;return null}function s(R,F){for(R=new Map;F!==null;)F.key!==null?R.set(F.key,F):R.set(F.index,F),F=F.sibling;return R}function u(R,F){return R=Jl(R,F),R.index=0,R.sibling=null,R}function d(R,F,V){return R.index=V,e?(V=R.alternate,V!==null?(V=V.index,V<F?(R.flags|=2,F):V):(R.flags|=2,F)):(R.flags|=1048576,F)}function x(R){return e&&R.alternate===null&&(R.flags|=2),R}function l(R,F,V,J){return F===null||F.tag!==6?(F=kv(V,R.mode,J),F.return=R,F):(F=u(F,V),F.return=R,F)}function _(R,F,V,J){var re=V.type;return re===zh?C(R,F,V.props.children,J,V.key):F!==null&&(F.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===Il&&x3(re)===F.type)?(J=u(F,V.props),J.ref=wf(R,F,V),J.return=R,J):(J=n1(V.type,V.key,V.props,null,R.mode,J),J.ref=wf(R,F,V),J.return=R,J)}function S(R,F,V,J){return F===null||F.tag!==4||F.stateNode.containerInfo!==V.containerInfo||F.stateNode.implementation!==V.implementation?(F=Pv(V,R.mode,J),F.return=R,F):(F=u(F,V.children||[]),F.return=R,F)}function C(R,F,V,J,re){return F===null||F.tag!==7?(F=uu(V,R.mode,J,re),F.return=R,F):(F=u(F,V),F.return=R,F)}function k(R,F,V){if(typeof F=="string"&&F!==""||typeof F=="number")return F=kv(""+F,R.mode,V),F.return=R,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case f0:return V=n1(F.type,F.key,F.props,null,R.mode,V),V.ref=wf(R,null,F),V.return=R,V;case Dh:return F=Pv(F,R.mode,V),F.return=R,F;case Il:var J=F._init;return k(R,J(F._payload),V)}if(Pf(F)||yf(F))return F=uu(F,R.mode,V,null),F.return=R,F;S0(R,F)}return null}function D(R,F,V,J){var re=F!==null?F.key:null;if(typeof V=="string"&&V!==""||typeof V=="number")return re!==null?null:l(R,F,""+V,J);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case f0:return V.key===re?_(R,F,V,J):null;case Dh:return V.key===re?S(R,F,V,J):null;case Il:return re=V._init,D(R,F,re(V._payload),J)}if(Pf(V)||yf(V))return re!==null?null:C(R,F,V,J,null);S0(R,V)}return null}function U(R,F,V,J,re){if(typeof J=="string"&&J!==""||typeof J=="number")return R=R.get(V)||null,l(F,R,""+J,re);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case f0:return R=R.get(J.key===null?V:J.key)||null,_(F,R,J,re);case Dh:return R=R.get(J.key===null?V:J.key)||null,S(F,R,J,re);case Il:var fe=J._init;return U(R,F,V,fe(J._payload),re)}if(Pf(J)||yf(J))return R=R.get(V)||null,C(F,R,J,re,null);S0(F,J)}return null}function q(R,F,V,J){for(var re=null,fe=null,be=F,ce=F=0,ve=null;be!==null&&ce<V.length;ce++){be.index>ce?(ve=be,be=null):ve=be.sibling;var Fe=D(R,be,V[ce],J);if(Fe===null){be===null&&(be=ve);break}e&&be&&Fe.alternate===null&&t(R,be),F=d(Fe,F,ce),fe===null?re=Fe:fe.sibling=Fe,fe=Fe,be=ve}if(ce===V.length)return r(R,be),br&&Qc(R,ce),re;if(be===null){for(;ce<V.length;ce++)be=k(R,V[ce],J),be!==null&&(F=d(be,F,ce),fe===null?re=be:fe.sibling=be,fe=be);return br&&Qc(R,ce),re}for(be=s(R,be);ce<V.length;ce++)ve=U(be,R,ce,V[ce],J),ve!==null&&(e&&ve.alternate!==null&&be.delete(ve.key===null?ce:ve.key),F=d(ve,F,ce),fe===null?re=ve:fe.sibling=ve,fe=ve);return e&&be.forEach(function(Le){return t(R,Le)}),br&&Qc(R,ce),re}function L(R,F,V,J){var re=yf(V);if(typeof re!="function")throw Error(St(150));if(V=re.call(V),V==null)throw Error(St(151));for(var fe=re=null,be=F,ce=F=0,ve=null,Fe=V.next();be!==null&&!Fe.done;ce++,Fe=V.next()){be.index>ce?(ve=be,be=null):ve=be.sibling;var Le=D(R,be,Fe.value,J);if(Le===null){be===null&&(be=ve);break}e&&be&&Le.alternate===null&&t(R,be),F=d(Le,F,ce),fe===null?re=Le:fe.sibling=Le,fe=Le,be=ve}if(Fe.done)return r(R,be),br&&Qc(R,ce),re;if(be===null){for(;!Fe.done;ce++,Fe=V.next())Fe=k(R,Fe.value,J),Fe!==null&&(F=d(Fe,F,ce),fe===null?re=Fe:fe.sibling=Fe,fe=Fe);return br&&Qc(R,ce),re}for(be=s(R,be);!Fe.done;ce++,Fe=V.next())Fe=U(be,R,ce,Fe.value,J),Fe!==null&&(e&&Fe.alternate!==null&&be.delete(Fe.key===null?ce:Fe.key),F=d(Fe,F,ce),fe===null?re=Fe:fe.sibling=Fe,fe=Fe);return e&&be.forEach(function(Ie){return t(R,Ie)}),br&&Qc(R,ce),re}function K(R,F,V,J){if(typeof V=="object"&&V!==null&&V.type===zh&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case f0:e:{for(var re=V.key,fe=F;fe!==null;){if(fe.key===re){if(re=V.type,re===zh){if(fe.tag===7){r(R,fe.sibling),F=u(fe,V.props.children),F.return=R,R=F;break e}}else if(fe.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===Il&&x3(re)===fe.type){r(R,fe.sibling),F=u(fe,V.props),F.ref=wf(R,fe,V),F.return=R,R=F;break e}r(R,fe);break}else t(R,fe);fe=fe.sibling}V.type===zh?(F=uu(V.props.children,R.mode,J,V.key),F.return=R,R=F):(J=n1(V.type,V.key,V.props,null,R.mode,J),J.ref=wf(R,F,V),J.return=R,R=J)}return x(R);case Dh:e:{for(fe=V.key;F!==null;){if(F.key===fe)if(F.tag===4&&F.stateNode.containerInfo===V.containerInfo&&F.stateNode.implementation===V.implementation){r(R,F.sibling),F=u(F,V.children||[]),F.return=R,R=F;break e}else{r(R,F);break}else t(R,F);F=F.sibling}F=Pv(V,R.mode,J),F.return=R,R=F}return x(R);case Il:return fe=V._init,K(R,F,fe(V._payload),J)}if(Pf(V))return q(R,F,V,J);if(yf(V))return L(R,F,V,J);S0(R,V)}return typeof V=="string"&&V!==""||typeof V=="number"?(V=""+V,F!==null&&F.tag===6?(r(R,F.sibling),F=u(F,V),F.return=R,R=F):(r(R,F),F=kv(V,R.mode,J),F.return=R,R=F),x(R)):r(R,F)}return K}var od=xM(!0),_M=xM(!1),Mm={},ca=lc(Mm),sm=lc(Mm),am=lc(Mm);function au(e){if(e===Mm)throw Error(St(174));return e}function E2(e,t){switch(ur(am,t),ur(sm,e),ur(ca,Mm),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fb(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=fb(t,e)}gr(ca),ur(ca,t)}function sd(){gr(ca),gr(sm),gr(am)}function vM(e){au(am.current);var t=au(ca.current),r=fb(t,e.type);t!==r&&(ur(sm,e),ur(ca,r))}function T2(e){sm.current===e&&(gr(ca),gr(sm))}var Dr=lc(0);function D1(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ev=[];function S2(){for(var e=0;e<Ev.length;e++)Ev[e]._workInProgressVersionPrimary=null;Ev.length=0}var Y0=Za.ReactCurrentDispatcher,Tv=Za.ReactCurrentBatchConfig,fu=0,zr=null,ti=null,hi=null,z1=!1,$f=!1,lm=0,gF=0;function zi(){throw Error(St(321))}function C2(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Vs(e[r],t[r]))return!1;return!0}function A2(e,t,r,s,u,d){if(fu=d,zr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Y0.current=e===null||e.memoizedState===null?vF:bF,e=r(s,u),$f){d=0;do{if($f=!1,lm=0,25<=d)throw Error(St(301));d+=1,hi=ti=null,t.updateQueue=null,Y0.current=wF,e=r(s,u)}while($f)}if(Y0.current=N1,t=ti!==null&&ti.next!==null,fu=0,hi=ti=zr=null,z1=!1,t)throw Error(St(300));return e}function M2(){var e=lm!==0;return lm=0,e}function ia(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hi===null?zr.memoizedState=hi=e:hi=hi.next=e,hi}function as(){if(ti===null){var e=zr.alternate;e=e!==null?e.memoizedState:null}else e=ti.next;var t=hi===null?zr.memoizedState:hi.next;if(t!==null)hi=t,ti=e;else{if(e===null)throw Error(St(310));ti=e,e={memoizedState:ti.memoizedState,baseState:ti.baseState,baseQueue:ti.baseQueue,queue:ti.queue,next:null},hi===null?zr.memoizedState=hi=e:hi=hi.next=e}return hi}function cm(e,t){return typeof t=="function"?t(e):t}function Sv(e){var t=as(),r=t.queue;if(r===null)throw Error(St(311));r.lastRenderedReducer=e;var s=ti,u=s.baseQueue,d=r.pending;if(d!==null){if(u!==null){var x=u.next;u.next=d.next,d.next=x}s.baseQueue=u=d,r.pending=null}if(u!==null){d=u.next,s=s.baseState;var l=x=null,_=null,S=d;do{var C=S.lane;if((fu&C)===C)_!==null&&(_=_.next={lane:0,action:S.action,hasEagerState:S.hasEagerState,eagerState:S.eagerState,next:null}),s=S.hasEagerState?S.eagerState:e(s,S.action);else{var k={lane:C,action:S.action,hasEagerState:S.hasEagerState,eagerState:S.eagerState,next:null};_===null?(l=_=k,x=s):_=_.next=k,zr.lanes|=C,mu|=C}S=S.next}while(S!==null&&S!==d);_===null?x=s:_.next=l,Vs(s,t.memoizedState)||(ho=!0),t.memoizedState=s,t.baseState=x,t.baseQueue=_,r.lastRenderedState=s}if(e=r.interleaved,e!==null){u=e;do d=u.lane,zr.lanes|=d,mu|=d,u=u.next;while(u!==e)}else u===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Cv(e){var t=as(),r=t.queue;if(r===null)throw Error(St(311));r.lastRenderedReducer=e;var s=r.dispatch,u=r.pending,d=t.memoizedState;if(u!==null){r.pending=null;var x=u=u.next;do d=e(d,x.action),x=x.next;while(x!==u);Vs(d,t.memoizedState)||(ho=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),r.lastRenderedState=d}return[d,s]}function bM(){}function wM(e,t){var r=zr,s=as(),u=t(),d=!Vs(s.memoizedState,u);if(d&&(s.memoizedState=u,ho=!0),s=s.queue,k2(SM.bind(null,r,s,e),[e]),s.getSnapshot!==t||d||hi!==null&&hi.memoizedState.tag&1){if(r.flags|=2048,um(9,TM.bind(null,r,s,u,t),void 0,null),pi===null)throw Error(St(349));(fu&30)!==0||EM(r,t,u)}return u}function EM(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=zr.updateQueue,t===null?(t={lastEffect:null,stores:null},zr.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function TM(e,t,r,s){t.value=r,t.getSnapshot=s,CM(t)&&AM(e)}function SM(e,t,r){return r(function(){CM(t)&&AM(e)})}function CM(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Vs(e,r)}catch{return!0}}function AM(e){var t=qa(e,1);t!==null&&Us(t,e,1,-1)}function _3(e){var t=ia();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cm,lastRenderedState:e},t.queue=e,e=e.dispatch=_F.bind(null,zr,e),[t.memoizedState,e]}function um(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=zr.updateQueue,t===null?(t={lastEffect:null,stores:null},zr.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function MM(){return as().memoizedState}function J0(e,t,r,s){var u=ia();zr.flags|=e,u.memoizedState=um(1|t,r,void 0,s===void 0?null:s)}function Ty(e,t,r,s){var u=as();s=s===void 0?null:s;var d=void 0;if(ti!==null){var x=ti.memoizedState;if(d=x.destroy,s!==null&&C2(s,x.deps)){u.memoizedState=um(t,r,d,s);return}}zr.flags|=e,u.memoizedState=um(1|t,r,d,s)}function v3(e,t){return J0(8390656,8,e,t)}function k2(e,t){return Ty(2048,8,e,t)}function kM(e,t){return Ty(4,2,e,t)}function PM(e,t){return Ty(4,4,e,t)}function IM(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function DM(e,t,r){return r=r!=null?r.concat([e]):null,Ty(4,4,IM.bind(null,t,e),r)}function P2(){}function zM(e,t){var r=as();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&C2(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function NM(e,t){var r=as();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&C2(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function LM(e,t,r){return(fu&21)===0?(e.baseState&&(e.baseState=!1,ho=!0),e.memoizedState=r):(Vs(r,t)||(r=O5(),zr.lanes|=r,mu|=r,e.baseState=!0),t)}function yF(e,t){var r=Yn;Yn=r!==0&&4>r?r:4,e(!0);var s=Tv.transition;Tv.transition={};try{e(!1),t()}finally{Yn=r,Tv.transition=s}}function FM(){return as().memoizedState}function xF(e,t,r){var s=Yl(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},RM(e))OM(t,r);else if(r=fM(e,t,r,s),r!==null){var u=Wi();Us(r,e,s,u),BM(r,t,s)}}function _F(e,t,r){var s=Yl(e),u={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(RM(e))OM(t,u);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var x=t.lastRenderedState,l=d(x,r);if(u.hasEagerState=!0,u.eagerState=l,Vs(l,x)){var _=t.interleaved;_===null?(u.next=u,b2(t)):(u.next=_.next,_.next=u),t.interleaved=u;return}}catch{}finally{}r=fM(e,t,u,s),r!==null&&(u=Wi(),Us(r,e,s,u),BM(r,t,s))}}function RM(e){var t=e.alternate;return e===zr||t!==null&&t===zr}function OM(e,t){$f=z1=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function BM(e,t,r){if((r&4194240)!==0){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,a2(e,r)}}var N1={readContext:ss,useCallback:zi,useContext:zi,useEffect:zi,useImperativeHandle:zi,useInsertionEffect:zi,useLayoutEffect:zi,useMemo:zi,useReducer:zi,useRef:zi,useState:zi,useDebugValue:zi,useDeferredValue:zi,useTransition:zi,useMutableSource:zi,useSyncExternalStore:zi,useId:zi,unstable_isNewReconciler:!1},vF={readContext:ss,useCallback:function(e,t){return ia().memoizedState=[e,t===void 0?null:t],e},useContext:ss,useEffect:v3,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,J0(4194308,4,IM.bind(null,t,e),r)},useLayoutEffect:function(e,t){return J0(4194308,4,e,t)},useInsertionEffect:function(e,t){return J0(4,2,e,t)},useMemo:function(e,t){var r=ia();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=ia();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=xF.bind(null,zr,e),[s.memoizedState,e]},useRef:function(e){var t=ia();return e={current:e},t.memoizedState=e},useState:_3,useDebugValue:P2,useDeferredValue:function(e){return ia().memoizedState=e},useTransition:function(){var e=_3(!1),t=e[0];return e=yF.bind(null,e[1]),ia().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=zr,u=ia();if(br){if(r===void 0)throw Error(St(407));r=r()}else{if(r=t(),pi===null)throw Error(St(349));(fu&30)!==0||EM(s,t,r)}u.memoizedState=r;var d={value:r,getSnapshot:t};return u.queue=d,v3(SM.bind(null,s,d,e),[e]),s.flags|=2048,um(9,TM.bind(null,s,d,r,t),void 0,null),r},useId:function(){var e=ia(),t=pi.identifierPrefix;if(br){var r=$a,s=Ba;r=(s&~(1<<32-js(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=lm++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=gF++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},bF={readContext:ss,useCallback:zM,useContext:ss,useEffect:k2,useImperativeHandle:DM,useInsertionEffect:kM,useLayoutEffect:PM,useMemo:NM,useReducer:Sv,useRef:MM,useState:function(){return Sv(cm)},useDebugValue:P2,useDeferredValue:function(e){var t=as();return LM(t,ti.memoizedState,e)},useTransition:function(){var e=Sv(cm)[0],t=as().memoizedState;return[e,t]},useMutableSource:bM,useSyncExternalStore:wM,useId:FM,unstable_isNewReconciler:!1},wF={readContext:ss,useCallback:zM,useContext:ss,useEffect:k2,useImperativeHandle:DM,useInsertionEffect:kM,useLayoutEffect:PM,useMemo:NM,useReducer:Cv,useRef:MM,useState:function(){return Cv(cm)},useDebugValue:P2,useDeferredValue:function(e){var t=as();return ti===null?t.memoizedState=e:LM(t,ti.memoizedState,e)},useTransition:function(){var e=Cv(cm)[0],t=as().memoizedState;return[e,t]},useMutableSource:bM,useSyncExternalStore:wM,useId:FM,unstable_isNewReconciler:!1};function ad(e,t){try{var r="",s=t;do r+=K8(s),s=s.return;while(s);var u=r}catch(d){u=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:t,stack:u,digest:null}}function Av(e,t,r){return{value:e,source:null,stack:r!=null?r:null,digest:t!=null?t:null}}function Rb(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var EF=typeof WeakMap=="function"?WeakMap:Map;function $M(e,t,r){r=ja(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){F1||(F1=!0,Wb=s),Rb(e,t)},r}function jM(e,t,r){r=ja(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var u=t.value;r.payload=function(){return s(u)},r.callback=function(){Rb(e,t)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(r.callback=function(){Rb(e,t),typeof s!="function"&&(Kl===null?Kl=new Set([this]):Kl.add(this));var x=t.stack;this.componentDidCatch(t.value,{componentStack:x!==null?x:""})}),r}function b3(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new EF;var u=new Set;s.set(t,u)}else u=s.get(t),u===void 0&&(u=new Set,s.set(t,u));u.has(r)||(u.add(r),e=RF.bind(null,e,t,r),t.then(e,e))}function w3(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function E3(e,t,r,s,u){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=ja(-1,1),t.tag=2,Xl(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=u,e)}var TF=Za.ReactCurrentOwner,ho=!1;function Ui(e,t,r,s){t.child=e===null?_M(t,null,r,s):od(t,e.child,r,s)}function T3(e,t,r,s,u){r=r.render;var d=t.ref;return Kh(t,u),s=A2(e,t,r,s,d,u),r=M2(),e!==null&&!ho?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,Ha(e,t,u)):(br&&r&&m2(t),t.flags|=1,Ui(e,t,s,u),t.child)}function S3(e,t,r,s,u){if(e===null){var d=r.type;return typeof d=="function"&&!O2(d)&&d.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=d,UM(e,t,d,s,u)):(e=n1(r.type,null,s,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,(e.lanes&u)===0){var x=d.memoizedProps;if(r=r.compare,r=r!==null?r:nm,r(x,s)&&e.ref===t.ref)return Ha(e,t,u)}return t.flags|=1,e=Jl(d,s),e.ref=t.ref,e.return=t,t.child=e}function UM(e,t,r,s,u){if(e!==null){var d=e.memoizedProps;if(nm(d,s)&&e.ref===t.ref)if(ho=!1,t.pendingProps=s=d,(e.lanes&u)!==0)(e.flags&131072)!==0&&(ho=!0);else return t.lanes=e.lanes,Ha(e,t,u)}return Ob(e,t,r,s,u)}function VM(e,t,r){var s=t.pendingProps,u=s.children,d=e!==null?e.memoizedState:null;if(s.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ur(Vh,Ao),Ao|=r;else{if((r&1073741824)===0)return e=d!==null?d.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ur(Vh,Ao),Ao|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=d!==null?d.baseLanes:r,ur(Vh,Ao),Ao|=s}else d!==null?(s=d.baseLanes|r,t.memoizedState=null):s=r,ur(Vh,Ao),Ao|=s;return Ui(e,t,u,r),t.child}function GM(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Ob(e,t,r,s,u){var d=fo(r)?du:Oi.current;return d=rd(t,d),Kh(t,u),r=A2(e,t,r,s,d,u),s=M2(),e!==null&&!ho?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,Ha(e,t,u)):(br&&s&&m2(t),t.flags|=1,Ui(e,t,r,u),t.child)}function C3(e,t,r,s,u){if(fo(r)){var d=!0;C1(t)}else d=!1;if(Kh(t,u),t.stateNode===null)Q0(e,t),yM(t,r,s),Fb(t,r,s,u),s=!0;else if(e===null){var x=t.stateNode,l=t.memoizedProps;x.props=l;var _=x.context,S=r.contextType;typeof S=="object"&&S!==null?S=ss(S):(S=fo(r)?du:Oi.current,S=rd(t,S));var C=r.getDerivedStateFromProps,k=typeof C=="function"||typeof x.getSnapshotBeforeUpdate=="function";k||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(l!==s||_!==S)&&y3(t,x,s,S),Dl=!1;var D=t.memoizedState;x.state=D,I1(t,s,x,u),_=t.memoizedState,l!==s||D!==_||po.current||Dl?(typeof C=="function"&&(Lb(t,r,C,s),_=t.memoizedState),(l=Dl||g3(t,r,l,s,D,_,S))?(k||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(t.flags|=4194308)):(typeof x.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=_),x.props=s,x.state=_,x.context=S,s=l):(typeof x.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{x=t.stateNode,mM(e,t),l=t.memoizedProps,S=t.type===t.elementType?l:Ns(t.type,l),x.props=S,k=t.pendingProps,D=x.context,_=r.contextType,typeof _=="object"&&_!==null?_=ss(_):(_=fo(r)?du:Oi.current,_=rd(t,_));var U=r.getDerivedStateFromProps;(C=typeof U=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(l!==k||D!==_)&&y3(t,x,s,_),Dl=!1,D=t.memoizedState,x.state=D,I1(t,s,x,u);var q=t.memoizedState;l!==k||D!==q||po.current||Dl?(typeof U=="function"&&(Lb(t,r,U,s),q=t.memoizedState),(S=Dl||g3(t,r,S,s,D,q,_)||!1)?(C||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(s,q,_),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(s,q,_)),typeof x.componentDidUpdate=="function"&&(t.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof x.componentDidUpdate!="function"||l===e.memoizedProps&&D===e.memoizedState||(t.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&D===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=q),x.props=s,x.state=q,x.context=_,s=S):(typeof x.componentDidUpdate!="function"||l===e.memoizedProps&&D===e.memoizedState||(t.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&D===e.memoizedState||(t.flags|=1024),s=!1)}return Bb(e,t,r,s,d,u)}function Bb(e,t,r,s,u,d){GM(e,t);var x=(t.flags&128)!==0;if(!s&&!x)return u&&h3(t,r,!1),Ha(e,t,d);s=t.stateNode,TF.current=t;var l=x&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&x?(t.child=od(t,e.child,null,d),t.child=od(t,null,l,d)):Ui(e,t,l,d),t.memoizedState=s.state,u&&h3(t,r,!0),t.child}function qM(e){var t=e.stateNode;t.pendingContext?u3(e,t.pendingContext,t.pendingContext!==t.context):t.context&&u3(e,t.context,!1),E2(e,t.containerInfo)}function A3(e,t,r,s,u){return id(),y2(u),t.flags|=256,Ui(e,t,r,s),t.child}var $b={dehydrated:null,treeContext:null,retryLane:0};function jb(e){return{baseLanes:e,cachePool:null,transitions:null}}function HM(e,t,r){var s=t.pendingProps,u=Dr.current,d=!1,x=(t.flags&128)!==0,l;if((l=x)||(l=e!==null&&e.memoizedState===null?!1:(u&2)!==0),l?(d=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(u|=1),ur(Dr,u&1),e===null)return zb(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(x=s.children,e=s.fallback,d?(s=t.mode,d=t.child,x={mode:"hidden",children:x},(s&1)===0&&d!==null?(d.childLanes=0,d.pendingProps=x):d=Ay(x,s,0,null),e=uu(e,s,r,null),d.return=t,e.return=t,d.sibling=e,t.child=d,t.child.memoizedState=jb(r),t.memoizedState=$b,e):I2(t,x));if(u=e.memoizedState,u!==null&&(l=u.dehydrated,l!==null))return SF(e,t,x,s,l,u,r);if(d){d=s.fallback,x=t.mode,u=e.child,l=u.sibling;var _={mode:"hidden",children:s.children};return(x&1)===0&&t.child!==u?(s=t.child,s.childLanes=0,s.pendingProps=_,t.deletions=null):(s=Jl(u,_),s.subtreeFlags=u.subtreeFlags&14680064),l!==null?d=Jl(l,d):(d=uu(d,x,r,null),d.flags|=2),d.return=t,s.return=t,s.sibling=d,t.child=s,s=d,d=t.child,x=e.child.memoizedState,x=x===null?jb(r):{baseLanes:x.baseLanes|r,cachePool:null,transitions:x.transitions},d.memoizedState=x,d.childLanes=e.childLanes&~r,t.memoizedState=$b,s}return d=e.child,e=d.sibling,s=Jl(d,{mode:"visible",children:s.children}),(t.mode&1)===0&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function I2(e,t){return t=Ay({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function C0(e,t,r,s){return s!==null&&y2(s),od(t,e.child,null,r),e=I2(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function SF(e,t,r,s,u,d,x){if(r)return t.flags&256?(t.flags&=-257,s=Av(Error(St(422))),C0(e,t,x,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(d=s.fallback,u=t.mode,s=Ay({mode:"visible",children:s.children},u,0,null),d=uu(d,u,x,null),d.flags|=2,s.return=t,d.return=t,s.sibling=d,t.child=s,(t.mode&1)!==0&&od(t,e.child,null,x),t.child.memoizedState=jb(x),t.memoizedState=$b,d);if((t.mode&1)===0)return C0(e,t,x,null);if(u.data==="$!"){if(s=u.nextSibling&&u.nextSibling.dataset,s)var l=s.dgst;return s=l,d=Error(St(419)),s=Av(d,s,void 0),C0(e,t,x,s)}if(l=(x&e.childLanes)!==0,ho||l){if(s=pi,s!==null){switch(x&-x){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}u=(u&(s.suspendedLanes|x))!==0?0:u,u!==0&&u!==d.retryLane&&(d.retryLane=u,qa(e,u),Us(s,e,u,-1))}return R2(),s=Av(Error(St(421))),C0(e,t,x,s)}return u.data==="$?"?(t.flags|=128,t.child=e.child,t=OF.bind(null,e),u._reactRetry=t,null):(e=d.treeContext,ko=Zl(u.nextSibling),Do=t,br=!0,Rs=null,e!==null&&(ns[rs++]=Ba,ns[rs++]=$a,ns[rs++]=pu,Ba=e.id,$a=e.overflow,pu=t),t=I2(t,s.children),t.flags|=4096,t)}function M3(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Nb(e.return,t,r)}function Mv(e,t,r,s,u){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:u}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=s,d.tail=r,d.tailMode=u)}function WM(e,t,r){var s=t.pendingProps,u=s.revealOrder,d=s.tail;if(Ui(e,t,s.children,r),s=Dr.current,(s&2)!==0)s=s&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&M3(e,r,t);else if(e.tag===19)M3(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(ur(Dr,s),(t.mode&1)===0)t.memoizedState=null;else switch(u){case"forwards":for(r=t.child,u=null;r!==null;)e=r.alternate,e!==null&&D1(e)===null&&(u=r),r=r.sibling;r=u,r===null?(u=t.child,t.child=null):(u=r.sibling,r.sibling=null),Mv(t,!1,u,r,d);break;case"backwards":for(r=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&D1(e)===null){t.child=u;break}e=u.sibling,u.sibling=r,r=u,u=e}Mv(t,!0,r,null,d);break;case"together":Mv(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Q0(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ha(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),mu|=t.lanes,(r&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(St(153));if(t.child!==null){for(e=t.child,r=Jl(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Jl(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function CF(e,t,r){switch(t.tag){case 3:qM(t),id();break;case 5:vM(t);break;case 1:fo(t.type)&&C1(t);break;case 4:E2(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,u=t.memoizedProps.value;ur(k1,s._currentValue),s._currentValue=u;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(ur(Dr,Dr.current&1),t.flags|=128,null):(r&t.child.childLanes)!==0?HM(e,t,r):(ur(Dr,Dr.current&1),e=Ha(e,t,r),e!==null?e.sibling:null);ur(Dr,Dr.current&1);break;case 19:if(s=(r&t.childLanes)!==0,(e.flags&128)!==0){if(s)return WM(e,t,r);t.flags|=128}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),ur(Dr,Dr.current),s)break;return null;case 22:case 23:return t.lanes=0,VM(e,t,r)}return Ha(e,t,r)}var ZM,Ub,XM,KM;ZM=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Ub=function(){};XM=function(e,t,r,s){var u=e.memoizedProps;if(u!==s){e=t.stateNode,au(ca.current);var d=null;switch(r){case"input":u=ub(e,u),s=ub(e,s),d=[];break;case"select":u=Lr({},u,{value:void 0}),s=Lr({},s,{value:void 0}),d=[];break;case"textarea":u=pb(e,u),s=pb(e,s),d=[];break;default:typeof u.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=T1)}mb(r,s);var x;r=null;for(S in u)if(!s.hasOwnProperty(S)&&u.hasOwnProperty(S)&&u[S]!=null)if(S==="style"){var l=u[S];for(x in l)l.hasOwnProperty(x)&&(r||(r={}),r[x]="")}else S!=="dangerouslySetInnerHTML"&&S!=="children"&&S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(Xf.hasOwnProperty(S)?d||(d=[]):(d=d||[]).push(S,null));for(S in s){var _=s[S];if(l=u!=null?u[S]:void 0,s.hasOwnProperty(S)&&_!==l&&(_!=null||l!=null))if(S==="style")if(l){for(x in l)!l.hasOwnProperty(x)||_&&_.hasOwnProperty(x)||(r||(r={}),r[x]="");for(x in _)_.hasOwnProperty(x)&&l[x]!==_[x]&&(r||(r={}),r[x]=_[x])}else r||(d||(d=[]),d.push(S,r)),r=_;else S==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,l=l?l.__html:void 0,_!=null&&l!==_&&(d=d||[]).push(S,_)):S==="children"?typeof _!="string"&&typeof _!="number"||(d=d||[]).push(S,""+_):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&(Xf.hasOwnProperty(S)?(_!=null&&S==="onScroll"&&fr("scroll",e),d||l===_||(d=[])):(d=d||[]).push(S,_))}r&&(d=d||[]).push("style",r);var S=d;(t.updateQueue=S)&&(t.flags|=4)}};KM=function(e,t,r,s){r!==s&&(t.flags|=4)};function Ef(e,t){if(!br)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Ni(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var u=e.child;u!==null;)r|=u.lanes|u.childLanes,s|=u.subtreeFlags&14680064,s|=u.flags&14680064,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)r|=u.lanes|u.childLanes,s|=u.subtreeFlags,s|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function AF(e,t,r){var s=t.pendingProps;switch(g2(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ni(t),null;case 1:return fo(t.type)&&S1(),Ni(t),null;case 3:return s=t.stateNode,sd(),gr(po),gr(Oi),S2(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(T0(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Rs!==null&&(Kb(Rs),Rs=null))),Ub(e,t),Ni(t),null;case 5:T2(t);var u=au(am.current);if(r=t.type,e!==null&&t.stateNode!=null)XM(e,t,r,s,u),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(St(166));return Ni(t),null}if(e=au(ca.current),T0(t)){s=t.stateNode,r=t.type;var d=t.memoizedProps;switch(s[oa]=t,s[om]=d,e=(t.mode&1)!==0,r){case"dialog":fr("cancel",s),fr("close",s);break;case"iframe":case"object":case"embed":fr("load",s);break;case"video":case"audio":for(u=0;u<Df.length;u++)fr(Df[u],s);break;case"source":fr("error",s);break;case"img":case"image":case"link":fr("error",s),fr("load",s);break;case"details":fr("toggle",s);break;case"input":RC(s,d),fr("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!d.multiple},fr("invalid",s);break;case"textarea":BC(s,d),fr("invalid",s)}mb(r,d),u=null;for(var x in d)if(d.hasOwnProperty(x)){var l=d[x];x==="children"?typeof l=="string"?s.textContent!==l&&(d.suppressHydrationWarning!==!0&&E0(s.textContent,l,e),u=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(d.suppressHydrationWarning!==!0&&E0(s.textContent,l,e),u=["children",""+l]):Xf.hasOwnProperty(x)&&l!=null&&x==="onScroll"&&fr("scroll",s)}switch(r){case"input":m0(s),OC(s,d,!0);break;case"textarea":m0(s),$C(s);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(s.onclick=T1)}s=u,t.updateQueue=s,s!==null&&(t.flags|=4)}else{x=u.nodeType===9?u:u.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=E5(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=x.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=x.createElement(r,{is:s.is}):(e=x.createElement(r),r==="select"&&(x=e,s.multiple?x.multiple=!0:s.size&&(x.size=s.size))):e=x.createElementNS(e,r),e[oa]=t,e[om]=s,ZM(e,t,!1,!1),t.stateNode=e;e:{switch(x=gb(r,s),r){case"dialog":fr("cancel",e),fr("close",e),u=s;break;case"iframe":case"object":case"embed":fr("load",e),u=s;break;case"video":case"audio":for(u=0;u<Df.length;u++)fr(Df[u],e);u=s;break;case"source":fr("error",e),u=s;break;case"img":case"image":case"link":fr("error",e),fr("load",e),u=s;break;case"details":fr("toggle",e),u=s;break;case"input":RC(e,s),u=ub(e,s),fr("invalid",e);break;case"option":u=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},u=Lr({},s,{value:void 0}),fr("invalid",e);break;case"textarea":BC(e,s),u=pb(e,s),fr("invalid",e);break;default:u=s}mb(r,u),l=u;for(d in l)if(l.hasOwnProperty(d)){var _=l[d];d==="style"?C5(e,_):d==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,_!=null&&T5(e,_)):d==="children"?typeof _=="string"?(r!=="textarea"||_!=="")&&Kf(e,_):typeof _=="number"&&Kf(e,""+_):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Xf.hasOwnProperty(d)?_!=null&&d==="onScroll"&&fr("scroll",e):_!=null&&t2(e,d,_,x))}switch(r){case"input":m0(e),OC(e,s,!1);break;case"textarea":m0(e),$C(e);break;case"option":s.value!=null&&e.setAttribute("value",""+rc(s.value));break;case"select":e.multiple=!!s.multiple,d=s.value,d!=null?Hh(e,!!s.multiple,d,!1):s.defaultValue!=null&&Hh(e,!!s.multiple,s.defaultValue,!0);break;default:typeof u.onClick=="function"&&(e.onclick=T1)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ni(t),null;case 6:if(e&&t.stateNode!=null)KM(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(St(166));if(r=au(am.current),au(ca.current),T0(t)){if(s=t.stateNode,r=t.memoizedProps,s[oa]=t,(d=s.nodeValue!==r)&&(e=Do,e!==null))switch(e.tag){case 3:E0(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&E0(s.nodeValue,r,(e.mode&1)!==0)}d&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[oa]=t,t.stateNode=s}return Ni(t),null;case 13:if(gr(Dr),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(br&&ko!==null&&(t.mode&1)!==0&&(t.flags&128)===0)pM(),id(),t.flags|=98560,d=!1;else if(d=T0(t),s!==null&&s.dehydrated!==null){if(e===null){if(!d)throw Error(St(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(St(317));d[oa]=t}else id(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ni(t),d=!1}else Rs!==null&&(Kb(Rs),Rs=null),d=!0;if(!d)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Dr.current&1)!==0?ni===0&&(ni=3):R2())),t.updateQueue!==null&&(t.flags|=4),Ni(t),null);case 4:return sd(),Ub(e,t),e===null&&rm(t.stateNode.containerInfo),Ni(t),null;case 10:return v2(t.type._context),Ni(t),null;case 17:return fo(t.type)&&S1(),Ni(t),null;case 19:if(gr(Dr),d=t.memoizedState,d===null)return Ni(t),null;if(s=(t.flags&128)!==0,x=d.rendering,x===null)if(s)Ef(d,!1);else{if(ni!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(x=D1(e),x!==null){for(t.flags|=128,Ef(d,!1),s=x.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)d=r,e=s,d.flags&=14680066,x=d.alternate,x===null?(d.childLanes=0,d.lanes=e,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=x.childLanes,d.lanes=x.lanes,d.child=x.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=x.memoizedProps,d.memoizedState=x.memoizedState,d.updateQueue=x.updateQueue,d.type=x.type,e=x.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ur(Dr,Dr.current&1|2),t.child}e=e.sibling}d.tail!==null&&Vr()>ld&&(t.flags|=128,s=!0,Ef(d,!1),t.lanes=4194304)}else{if(!s)if(e=D1(x),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Ef(d,!0),d.tail===null&&d.tailMode==="hidden"&&!x.alternate&&!br)return Ni(t),null}else 2*Vr()-d.renderingStartTime>ld&&r!==1073741824&&(t.flags|=128,s=!0,Ef(d,!1),t.lanes=4194304);d.isBackwards?(x.sibling=t.child,t.child=x):(r=d.last,r!==null?r.sibling=x:t.child=x,d.last=x)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=Vr(),t.sibling=null,r=Dr.current,ur(Dr,s?r&1|2:r&1),t):(Ni(t),null);case 22:case 23:return F2(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&(t.mode&1)!==0?(Ao&1073741824)!==0&&(Ni(t),t.subtreeFlags&6&&(t.flags|=8192)):Ni(t),null;case 24:return null;case 25:return null}throw Error(St(156,t.tag))}function MF(e,t){switch(g2(t),t.tag){case 1:return fo(t.type)&&S1(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return sd(),gr(po),gr(Oi),S2(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return T2(t),null;case 13:if(gr(Dr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(St(340));id()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return gr(Dr),null;case 4:return sd(),null;case 10:return v2(t.type._context),null;case 22:case 23:return F2(),null;case 24:return null;default:return null}}var A0=!1,Ri=!1,kF=typeof WeakSet=="function"?WeakSet:Set,Ht=null;function Uh(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){Br(e,t,s)}else r.current=null}function Vb(e,t,r){try{r()}catch(s){Br(e,t,s)}}var k3=!1;function PF(e,t){if(Cb=b1,e=eM(),f2(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var u=s.anchorOffset,d=s.focusNode;s=s.focusOffset;try{r.nodeType,d.nodeType}catch{r=null;break e}var x=0,l=-1,_=-1,S=0,C=0,k=e,D=null;t:for(;;){for(var U;k!==r||u!==0&&k.nodeType!==3||(l=x+u),k!==d||s!==0&&k.nodeType!==3||(_=x+s),k.nodeType===3&&(x+=k.nodeValue.length),(U=k.firstChild)!==null;)D=k,k=U;for(;;){if(k===e)break t;if(D===r&&++S===u&&(l=x),D===d&&++C===s&&(_=x),(U=k.nextSibling)!==null)break;k=D,D=k.parentNode}k=U}r=l===-1||_===-1?null:{start:l,end:_}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ab={focusedElem:e,selectionRange:r},b1=!1,Ht=t;Ht!==null;)if(t=Ht,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ht=e;else for(;Ht!==null;){t=Ht;try{var q=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(q!==null){var L=q.memoizedProps,K=q.memoizedState,R=t.stateNode,F=R.getSnapshotBeforeUpdate(t.elementType===t.type?L:Ns(t.type,L),K);R.__reactInternalSnapshotBeforeUpdate=F}break;case 3:var V=t.stateNode.containerInfo;V.nodeType===1?V.textContent="":V.nodeType===9&&V.documentElement&&V.removeChild(V.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(St(163))}}catch(J){Br(t,t.return,J)}if(e=t.sibling,e!==null){e.return=t.return,Ht=e;break}Ht=t.return}return q=k3,k3=!1,q}function jf(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var u=s=s.next;do{if((u.tag&e)===e){var d=u.destroy;u.destroy=void 0,d!==void 0&&Vb(t,r,d)}u=u.next}while(u!==s)}}function Sy(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function Gb(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function YM(e){var t=e.alternate;t!==null&&(e.alternate=null,YM(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[oa],delete t[om],delete t[Pb],delete t[dF],delete t[pF])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function JM(e){return e.tag===5||e.tag===3||e.tag===4}function P3(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||JM(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function qb(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=T1));else if(s!==4&&(e=e.child,e!==null))for(qb(e,t,r),e=e.sibling;e!==null;)qb(e,t,r),e=e.sibling}function Hb(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Hb(e,t,r),e=e.sibling;e!==null;)Hb(e,t,r),e=e.sibling}var _i=null,Ls=!1;function kl(e,t,r){for(r=r.child;r!==null;)QM(e,t,r),r=r.sibling}function QM(e,t,r){if(la&&typeof la.onCommitFiberUnmount=="function")try{la.onCommitFiberUnmount(yy,r)}catch{}switch(r.tag){case 5:Ri||Uh(r,t);case 6:var s=_i,u=Ls;_i=null,kl(e,t,r),_i=s,Ls=u,_i!==null&&(Ls?(e=_i,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):_i.removeChild(r.stateNode));break;case 18:_i!==null&&(Ls?(e=_i,r=r.stateNode,e.nodeType===8?bv(e.parentNode,r):e.nodeType===1&&bv(e,r),em(e)):bv(_i,r.stateNode));break;case 4:s=_i,u=Ls,_i=r.stateNode.containerInfo,Ls=!0,kl(e,t,r),_i=s,Ls=u;break;case 0:case 11:case 14:case 15:if(!Ri&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){u=s=s.next;do{var d=u,x=d.destroy;d=d.tag,x!==void 0&&((d&2)!==0||(d&4)!==0)&&Vb(r,t,x),u=u.next}while(u!==s)}kl(e,t,r);break;case 1:if(!Ri&&(Uh(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(l){Br(r,t,l)}kl(e,t,r);break;case 21:kl(e,t,r);break;case 22:r.mode&1?(Ri=(s=Ri)||r.memoizedState!==null,kl(e,t,r),Ri=s):kl(e,t,r);break;default:kl(e,t,r)}}function I3(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new kF),t.forEach(function(s){var u=BF.bind(null,e,s);r.has(s)||(r.add(s),s.then(u,u))})}}function Is(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var u=r[s];try{var d=e,x=t,l=x;e:for(;l!==null;){switch(l.tag){case 5:_i=l.stateNode,Ls=!1;break e;case 3:_i=l.stateNode.containerInfo,Ls=!0;break e;case 4:_i=l.stateNode.containerInfo,Ls=!0;break e}l=l.return}if(_i===null)throw Error(St(160));QM(d,x,u),_i=null,Ls=!1;var _=u.alternate;_!==null&&(_.return=null),u.return=null}catch(S){Br(u,t,S)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ek(t,e),t=t.sibling}function ek(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Is(t,e),ra(e),s&4){try{jf(3,e,e.return),Sy(3,e)}catch(L){Br(e,e.return,L)}try{jf(5,e,e.return)}catch(L){Br(e,e.return,L)}}break;case 1:Is(t,e),ra(e),s&512&&r!==null&&Uh(r,r.return);break;case 5:if(Is(t,e),ra(e),s&512&&r!==null&&Uh(r,r.return),e.flags&32){var u=e.stateNode;try{Kf(u,"")}catch(L){Br(e,e.return,L)}}if(s&4&&(u=e.stateNode,u!=null)){var d=e.memoizedProps,x=r!==null?r.memoizedProps:d,l=e.type,_=e.updateQueue;if(e.updateQueue=null,_!==null)try{l==="input"&&d.type==="radio"&&d.name!=null&&b5(u,d),gb(l,x);var S=gb(l,d);for(x=0;x<_.length;x+=2){var C=_[x],k=_[x+1];C==="style"?C5(u,k):C==="dangerouslySetInnerHTML"?T5(u,k):C==="children"?Kf(u,k):t2(u,C,k,S)}switch(l){case"input":hb(u,d);break;case"textarea":w5(u,d);break;case"select":var D=u._wrapperState.wasMultiple;u._wrapperState.wasMultiple=!!d.multiple;var U=d.value;U!=null?Hh(u,!!d.multiple,U,!1):D!==!!d.multiple&&(d.defaultValue!=null?Hh(u,!!d.multiple,d.defaultValue,!0):Hh(u,!!d.multiple,d.multiple?[]:"",!1))}u[om]=d}catch(L){Br(e,e.return,L)}}break;case 6:if(Is(t,e),ra(e),s&4){if(e.stateNode===null)throw Error(St(162));u=e.stateNode,d=e.memoizedProps;try{u.nodeValue=d}catch(L){Br(e,e.return,L)}}break;case 3:if(Is(t,e),ra(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{em(t.containerInfo)}catch(L){Br(e,e.return,L)}break;case 4:Is(t,e),ra(e);break;case 13:Is(t,e),ra(e),u=e.child,u.flags&8192&&(d=u.memoizedState!==null,u.stateNode.isHidden=d,!d||u.alternate!==null&&u.alternate.memoizedState!==null||(N2=Vr())),s&4&&I3(e);break;case 22:if(C=r!==null&&r.memoizedState!==null,e.mode&1?(Ri=(S=Ri)||C,Is(t,e),Ri=S):Is(t,e),ra(e),s&8192){if(S=e.memoizedState!==null,(e.stateNode.isHidden=S)&&!C&&(e.mode&1)!==0)for(Ht=e,C=e.child;C!==null;){for(k=Ht=C;Ht!==null;){switch(D=Ht,U=D.child,D.tag){case 0:case 11:case 14:case 15:jf(4,D,D.return);break;case 1:Uh(D,D.return);var q=D.stateNode;if(typeof q.componentWillUnmount=="function"){s=D,r=D.return;try{t=s,q.props=t.memoizedProps,q.state=t.memoizedState,q.componentWillUnmount()}catch(L){Br(s,r,L)}}break;case 5:Uh(D,D.return);break;case 22:if(D.memoizedState!==null){z3(k);continue}}U!==null?(U.return=D,Ht=U):z3(k)}C=C.sibling}e:for(C=null,k=e;;){if(k.tag===5){if(C===null){C=k;try{u=k.stateNode,S?(d=u.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(l=k.stateNode,_=k.memoizedProps.style,x=_!=null&&_.hasOwnProperty("display")?_.display:null,l.style.display=S5("display",x))}catch(L){Br(e,e.return,L)}}}else if(k.tag===6){if(C===null)try{k.stateNode.nodeValue=S?"":k.memoizedProps}catch(L){Br(e,e.return,L)}}else if((k.tag!==22&&k.tag!==23||k.memoizedState===null||k===e)&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===e)break e;for(;k.sibling===null;){if(k.return===null||k.return===e)break e;C===k&&(C=null),k=k.return}C===k&&(C=null),k.sibling.return=k.return,k=k.sibling}}break;case 19:Is(t,e),ra(e),s&4&&I3(e);break;case 21:break;default:Is(t,e),ra(e)}}function ra(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(JM(r)){var s=r;break e}r=r.return}throw Error(St(160))}switch(s.tag){case 5:var u=s.stateNode;s.flags&32&&(Kf(u,""),s.flags&=-33);var d=P3(e);Hb(e,d,u);break;case 3:case 4:var x=s.stateNode.containerInfo,l=P3(e);qb(e,l,x);break;default:throw Error(St(161))}}catch(_){Br(e,e.return,_)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function IF(e,t,r){Ht=e,tk(e)}function tk(e,t,r){for(var s=(e.mode&1)!==0;Ht!==null;){var u=Ht,d=u.child;if(u.tag===22&&s){var x=u.memoizedState!==null||A0;if(!x){var l=u.alternate,_=l!==null&&l.memoizedState!==null||Ri;l=A0;var S=Ri;if(A0=x,(Ri=_)&&!S)for(Ht=u;Ht!==null;)x=Ht,_=x.child,x.tag===22&&x.memoizedState!==null?N3(u):_!==null?(_.return=x,Ht=_):N3(u);for(;d!==null;)Ht=d,tk(d),d=d.sibling;Ht=u,A0=l,Ri=S}D3(e)}else(u.subtreeFlags&8772)!==0&&d!==null?(d.return=u,Ht=d):D3(e)}}function D3(e){for(;Ht!==null;){var t=Ht;if((t.flags&8772)!==0){var r=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Ri||Sy(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Ri)if(r===null)s.componentDidMount();else{var u=t.elementType===t.type?r.memoizedProps:Ns(t.type,r.memoizedProps);s.componentDidUpdate(u,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var d=t.updateQueue;d!==null&&m3(t,d,s);break;case 3:var x=t.updateQueue;if(x!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}m3(t,x,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var _=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":_.autoFocus&&r.focus();break;case"img":_.src&&(r.src=_.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var S=t.alternate;if(S!==null){var C=S.memoizedState;if(C!==null){var k=C.dehydrated;k!==null&&em(k)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(St(163))}Ri||t.flags&512&&Gb(t)}catch(D){Br(t,t.return,D)}}if(t===e){Ht=null;break}if(r=t.sibling,r!==null){r.return=t.return,Ht=r;break}Ht=t.return}}function z3(e){for(;Ht!==null;){var t=Ht;if(t===e){Ht=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Ht=r;break}Ht=t.return}}function N3(e){for(;Ht!==null;){var t=Ht;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Sy(4,t)}catch(_){Br(t,r,_)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var u=t.return;try{s.componentDidMount()}catch(_){Br(t,u,_)}}var d=t.return;try{Gb(t)}catch(_){Br(t,d,_)}break;case 5:var x=t.return;try{Gb(t)}catch(_){Br(t,x,_)}}}catch(_){Br(t,t.return,_)}if(t===e){Ht=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Ht=l;break}Ht=t.return}}var DF=Math.ceil,L1=Za.ReactCurrentDispatcher,D2=Za.ReactCurrentOwner,os=Za.ReactCurrentBatchConfig,Nn=0,pi=null,Kr=null,vi=0,Ao=0,Vh=lc(0),ni=0,hm=null,mu=0,Cy=0,z2=0,Uf=null,uo=null,N2=0,ld=1/0,Ra=null,F1=!1,Wb=null,Kl=null,M0=!1,Bl=null,R1=0,Vf=0,Zb=null,e1=-1,t1=0;function Wi(){return(Nn&6)!==0?Vr():e1!==-1?e1:e1=Vr()}function Yl(e){return(e.mode&1)===0?1:(Nn&2)!==0&&vi!==0?vi&-vi:mF.transition!==null?(t1===0&&(t1=O5()),t1):(e=Yn,e!==0||(e=window.event,e=e===void 0?16:q5(e.type)),e)}function Us(e,t,r,s){if(50<Vf)throw Vf=0,Zb=null,Error(St(185));Sm(e,r,s),((Nn&2)===0||e!==pi)&&(e===pi&&((Nn&2)===0&&(Cy|=r),ni===4&&Fl(e,vi)),mo(e,s),r===1&&Nn===0&&(t.mode&1)===0&&(ld=Vr()+500,wy&&cc()))}function mo(e,t){var r=e.callbackNode;mL(e,t);var s=v1(e,e===pi?vi:0);if(s===0)r!==null&&VC(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&VC(r),t===1)e.tag===0?fF(L3.bind(null,e)):uM(L3.bind(null,e)),uF(function(){(Nn&6)===0&&cc()}),r=null;else{switch(B5(s)){case 1:r=s2;break;case 4:r=F5;break;case 16:r=_1;break;case 536870912:r=R5;break;default:r=_1}r=ck(r,nk.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function nk(e,t){if(e1=-1,t1=0,(Nn&6)!==0)throw Error(St(327));var r=e.callbackNode;if(Yh()&&e.callbackNode!==r)return null;var s=v1(e,e===pi?vi:0);if(s===0)return null;if((s&30)!==0||(s&e.expiredLanes)!==0||t)t=O1(e,s);else{t=s;var u=Nn;Nn|=2;var d=ik();(pi!==e||vi!==t)&&(Ra=null,ld=Vr()+500,cu(e,t));do try{LF();break}catch(l){rk(e,l)}while(1);_2(),L1.current=d,Nn=u,Kr!==null?t=0:(pi=null,vi=0,t=ni)}if(t!==0){if(t===2&&(u=bb(e),u!==0&&(s=u,t=Xb(e,u))),t===1)throw r=hm,cu(e,0),Fl(e,s),mo(e,Vr()),r;if(t===6)Fl(e,s);else{if(u=e.current.alternate,(s&30)===0&&!zF(u)&&(t=O1(e,s),t===2&&(d=bb(e),d!==0&&(s=d,t=Xb(e,d))),t===1))throw r=hm,cu(e,0),Fl(e,s),mo(e,Vr()),r;switch(e.finishedWork=u,e.finishedLanes=s,t){case 0:case 1:throw Error(St(345));case 2:eu(e,uo,Ra);break;case 3:if(Fl(e,s),(s&130023424)===s&&(t=N2+500-Vr(),10<t)){if(v1(e,0)!==0)break;if(u=e.suspendedLanes,(u&s)!==s){Wi(),e.pingedLanes|=e.suspendedLanes&u;break}e.timeoutHandle=kb(eu.bind(null,e,uo,Ra),t);break}eu(e,uo,Ra);break;case 4:if(Fl(e,s),(s&4194240)===s)break;for(t=e.eventTimes,u=-1;0<s;){var x=31-js(s);d=1<<x,x=t[x],x>u&&(u=x),s&=~d}if(s=u,s=Vr()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*DF(s/1960))-s,10<s){e.timeoutHandle=kb(eu.bind(null,e,uo,Ra),s);break}eu(e,uo,Ra);break;case 5:eu(e,uo,Ra);break;default:throw Error(St(329))}}}return mo(e,Vr()),e.callbackNode===r?nk.bind(null,e):null}function Xb(e,t){var r=Uf;return e.current.memoizedState.isDehydrated&&(cu(e,t).flags|=256),e=O1(e,t),e!==2&&(t=uo,uo=r,t!==null&&Kb(t)),e}function Kb(e){uo===null?uo=e:uo.push.apply(uo,e)}function zF(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var u=r[s],d=u.getSnapshot;u=u.value;try{if(!Vs(d(),u))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Fl(e,t){for(t&=~z2,t&=~Cy,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-js(t),s=1<<r;e[r]=-1,t&=~s}}function L3(e){if((Nn&6)!==0)throw Error(St(327));Yh();var t=v1(e,0);if((t&1)===0)return mo(e,Vr()),null;var r=O1(e,t);if(e.tag!==0&&r===2){var s=bb(e);s!==0&&(t=s,r=Xb(e,s))}if(r===1)throw r=hm,cu(e,0),Fl(e,t),mo(e,Vr()),r;if(r===6)throw Error(St(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,eu(e,uo,Ra),mo(e,Vr()),null}function L2(e,t){var r=Nn;Nn|=1;try{return e(t)}finally{Nn=r,Nn===0&&(ld=Vr()+500,wy&&cc())}}function gu(e){Bl!==null&&Bl.tag===0&&(Nn&6)===0&&Yh();var t=Nn;Nn|=1;var r=os.transition,s=Yn;try{if(os.transition=null,Yn=1,e)return e()}finally{Yn=s,os.transition=r,Nn=t,(Nn&6)===0&&cc()}}function F2(){Ao=Vh.current,gr(Vh)}function cu(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,cF(r)),Kr!==null)for(r=Kr.return;r!==null;){var s=r;switch(g2(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&S1();break;case 3:sd(),gr(po),gr(Oi),S2();break;case 5:T2(s);break;case 4:sd();break;case 13:gr(Dr);break;case 19:gr(Dr);break;case 10:v2(s.type._context);break;case 22:case 23:F2()}r=r.return}if(pi=e,Kr=e=Jl(e.current,null),vi=Ao=t,ni=0,hm=null,z2=Cy=mu=0,uo=Uf=null,su!==null){for(t=0;t<su.length;t++)if(r=su[t],s=r.interleaved,s!==null){r.interleaved=null;var u=s.next,d=r.pending;if(d!==null){var x=d.next;d.next=u,s.next=x}r.pending=s}su=null}return e}function rk(e,t){do{var r=Kr;try{if(_2(),Y0.current=N1,z1){for(var s=zr.memoizedState;s!==null;){var u=s.queue;u!==null&&(u.pending=null),s=s.next}z1=!1}if(fu=0,hi=ti=zr=null,$f=!1,lm=0,D2.current=null,r===null||r.return===null){ni=1,hm=t,Kr=null;break}e:{var d=e,x=r.return,l=r,_=t;if(t=vi,l.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){var S=_,C=l,k=C.tag;if((C.mode&1)===0&&(k===0||k===11||k===15)){var D=C.alternate;D?(C.updateQueue=D.updateQueue,C.memoizedState=D.memoizedState,C.lanes=D.lanes):(C.updateQueue=null,C.memoizedState=null)}var U=w3(x);if(U!==null){U.flags&=-257,E3(U,x,l,d,t),U.mode&1&&b3(d,S,t),t=U,_=S;var q=t.updateQueue;if(q===null){var L=new Set;L.add(_),t.updateQueue=L}else q.add(_);break e}else{if((t&1)===0){b3(d,S,t),R2();break e}_=Error(St(426))}}else if(br&&l.mode&1){var K=w3(x);if(K!==null){(K.flags&65536)===0&&(K.flags|=256),E3(K,x,l,d,t),y2(ad(_,l));break e}}d=_=ad(_,l),ni!==4&&(ni=2),Uf===null?Uf=[d]:Uf.push(d),d=x;do{switch(d.tag){case 3:d.flags|=65536,t&=-t,d.lanes|=t;var R=$M(d,_,t);f3(d,R);break e;case 1:l=_;var F=d.type,V=d.stateNode;if((d.flags&128)===0&&(typeof F.getDerivedStateFromError=="function"||V!==null&&typeof V.componentDidCatch=="function"&&(Kl===null||!Kl.has(V)))){d.flags|=65536,t&=-t,d.lanes|=t;var J=jM(d,l,t);f3(d,J);break e}}d=d.return}while(d!==null)}sk(r)}catch(re){t=re,Kr===r&&r!==null&&(Kr=r=r.return);continue}break}while(1)}function ik(){var e=L1.current;return L1.current=N1,e===null?N1:e}function R2(){(ni===0||ni===3||ni===2)&&(ni=4),pi===null||(mu&268435455)===0&&(Cy&268435455)===0||Fl(pi,vi)}function O1(e,t){var r=Nn;Nn|=2;var s=ik();(pi!==e||vi!==t)&&(Ra=null,cu(e,t));do try{NF();break}catch(u){rk(e,u)}while(1);if(_2(),Nn=r,L1.current=s,Kr!==null)throw Error(St(261));return pi=null,vi=0,ni}function NF(){for(;Kr!==null;)ok(Kr)}function LF(){for(;Kr!==null&&!sL();)ok(Kr)}function ok(e){var t=lk(e.alternate,e,Ao);e.memoizedProps=e.pendingProps,t===null?sk(e):Kr=t,D2.current=null}function sk(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&32768)===0){if(r=AF(r,t,Ao),r!==null){Kr=r;return}}else{if(r=MF(r,t),r!==null){r.flags&=32767,Kr=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ni=6,Kr=null;return}}if(t=t.sibling,t!==null){Kr=t;return}Kr=t=e}while(t!==null);ni===0&&(ni=5)}function eu(e,t,r){var s=Yn,u=os.transition;try{os.transition=null,Yn=1,FF(e,t,r,s)}finally{os.transition=u,Yn=s}return null}function FF(e,t,r,s){do Yh();while(Bl!==null);if((Nn&6)!==0)throw Error(St(327));r=e.finishedWork;var u=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(St(177));e.callbackNode=null,e.callbackPriority=0;var d=r.lanes|r.childLanes;if(gL(e,d),e===pi&&(Kr=pi=null,vi=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||M0||(M0=!0,ck(_1,function(){return Yh(),null})),d=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||d){d=os.transition,os.transition=null;var x=Yn;Yn=1;var l=Nn;Nn|=4,D2.current=null,PF(e,r),ek(r,e),nF(Ab),b1=!!Cb,Ab=Cb=null,e.current=r,IF(r),aL(),Nn=l,Yn=x,os.transition=d}else e.current=r;if(M0&&(M0=!1,Bl=e,R1=u),d=e.pendingLanes,d===0&&(Kl=null),uL(r.stateNode),mo(e,Vr()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)u=t[r],s(u.value,{componentStack:u.stack,digest:u.digest});if(F1)throw F1=!1,e=Wb,Wb=null,e;return(R1&1)!==0&&e.tag!==0&&Yh(),d=e.pendingLanes,(d&1)!==0?e===Zb?Vf++:(Vf=0,Zb=e):Vf=0,cc(),null}function Yh(){if(Bl!==null){var e=B5(R1),t=os.transition,r=Yn;try{if(os.transition=null,Yn=16>e?16:e,Bl===null)var s=!1;else{if(e=Bl,Bl=null,R1=0,(Nn&6)!==0)throw Error(St(331));var u=Nn;for(Nn|=4,Ht=e.current;Ht!==null;){var d=Ht,x=d.child;if((Ht.flags&16)!==0){var l=d.deletions;if(l!==null){for(var _=0;_<l.length;_++){var S=l[_];for(Ht=S;Ht!==null;){var C=Ht;switch(C.tag){case 0:case 11:case 15:jf(8,C,d)}var k=C.child;if(k!==null)k.return=C,Ht=k;else for(;Ht!==null;){C=Ht;var D=C.sibling,U=C.return;if(YM(C),C===S){Ht=null;break}if(D!==null){D.return=U,Ht=D;break}Ht=U}}}var q=d.alternate;if(q!==null){var L=q.child;if(L!==null){q.child=null;do{var K=L.sibling;L.sibling=null,L=K}while(L!==null)}}Ht=d}}if((d.subtreeFlags&2064)!==0&&x!==null)x.return=d,Ht=x;else e:for(;Ht!==null;){if(d=Ht,(d.flags&2048)!==0)switch(d.tag){case 0:case 11:case 15:jf(9,d,d.return)}var R=d.sibling;if(R!==null){R.return=d.return,Ht=R;break e}Ht=d.return}}var F=e.current;for(Ht=F;Ht!==null;){x=Ht;var V=x.child;if((x.subtreeFlags&2064)!==0&&V!==null)V.return=x,Ht=V;else e:for(x=F;Ht!==null;){if(l=Ht,(l.flags&2048)!==0)try{switch(l.tag){case 0:case 11:case 15:Sy(9,l)}}catch(re){Br(l,l.return,re)}if(l===x){Ht=null;break e}var J=l.sibling;if(J!==null){J.return=l.return,Ht=J;break e}Ht=l.return}}if(Nn=u,cc(),la&&typeof la.onPostCommitFiberRoot=="function")try{la.onPostCommitFiberRoot(yy,e)}catch{}s=!0}return s}finally{Yn=r,os.transition=t}}return!1}function F3(e,t,r){t=ad(r,t),t=$M(e,t,1),e=Xl(e,t,1),t=Wi(),e!==null&&(Sm(e,1,t),mo(e,t))}function Br(e,t,r){if(e.tag===3)F3(e,e,r);else for(;t!==null;){if(t.tag===3){F3(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Kl===null||!Kl.has(s))){e=ad(r,e),e=jM(t,e,1),t=Xl(t,e,1),e=Wi(),t!==null&&(Sm(t,1,e),mo(t,e));break}}t=t.return}}function RF(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=Wi(),e.pingedLanes|=e.suspendedLanes&r,pi===e&&(vi&r)===r&&(ni===4||ni===3&&(vi&130023424)===vi&&500>Vr()-N2?cu(e,0):z2|=r),mo(e,t)}function ak(e,t){t===0&&((e.mode&1)===0?t=1:(t=x0,x0<<=1,(x0&130023424)===0&&(x0=4194304)));var r=Wi();e=qa(e,t),e!==null&&(Sm(e,t,r),mo(e,r))}function OF(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),ak(e,r)}function BF(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,u=e.memoizedState;u!==null&&(r=u.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(St(314))}s!==null&&s.delete(t),ak(e,r)}var lk;lk=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||po.current)ho=!0;else{if((e.lanes&r)===0&&(t.flags&128)===0)return ho=!1,CF(e,t,r);ho=(e.flags&131072)!==0}else ho=!1,br&&(t.flags&1048576)!==0&&hM(t,M1,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Q0(e,t),e=t.pendingProps;var u=rd(t,Oi.current);Kh(t,r),u=A2(null,t,s,e,u,r);var d=M2();return t.flags|=1,typeof u=="object"&&u!==null&&typeof u.render=="function"&&u.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,fo(s)?(d=!0,C1(t)):d=!1,t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,w2(t),u.updater=Ey,t.stateNode=u,u._reactInternals=t,Fb(t,s,e,r),t=Bb(null,t,s,!0,d,r)):(t.tag=0,br&&d&&m2(t),Ui(null,t,u,r),t=t.child),t;case 16:s=t.elementType;e:{switch(Q0(e,t),e=t.pendingProps,u=s._init,s=u(s._payload),t.type=s,u=t.tag=jF(s),e=Ns(s,e),u){case 0:t=Ob(null,t,s,e,r);break e;case 1:t=C3(null,t,s,e,r);break e;case 11:t=T3(null,t,s,e,r);break e;case 14:t=S3(null,t,s,Ns(s.type,e),r);break e}throw Error(St(306,s,""))}return t;case 0:return s=t.type,u=t.pendingProps,u=t.elementType===s?u:Ns(s,u),Ob(e,t,s,u,r);case 1:return s=t.type,u=t.pendingProps,u=t.elementType===s?u:Ns(s,u),C3(e,t,s,u,r);case 3:e:{if(qM(t),e===null)throw Error(St(387));s=t.pendingProps,d=t.memoizedState,u=d.element,mM(e,t),I1(t,s,null,r);var x=t.memoizedState;if(s=x.element,d.isDehydrated)if(d={element:s,isDehydrated:!1,cache:x.cache,pendingSuspenseBoundaries:x.pendingSuspenseBoundaries,transitions:x.transitions},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){u=ad(Error(St(423)),t),t=A3(e,t,s,r,u);break e}else if(s!==u){u=ad(Error(St(424)),t),t=A3(e,t,s,r,u);break e}else for(ko=Zl(t.stateNode.containerInfo.firstChild),Do=t,br=!0,Rs=null,r=_M(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(id(),s===u){t=Ha(e,t,r);break e}Ui(e,t,s,r)}t=t.child}return t;case 5:return vM(t),e===null&&zb(t),s=t.type,u=t.pendingProps,d=e!==null?e.memoizedProps:null,x=u.children,Mb(s,u)?x=null:d!==null&&Mb(s,d)&&(t.flags|=32),GM(e,t),Ui(e,t,x,r),t.child;case 6:return e===null&&zb(t),null;case 13:return HM(e,t,r);case 4:return E2(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=od(t,null,s,r):Ui(e,t,s,r),t.child;case 11:return s=t.type,u=t.pendingProps,u=t.elementType===s?u:Ns(s,u),T3(e,t,s,u,r);case 7:return Ui(e,t,t.pendingProps,r),t.child;case 8:return Ui(e,t,t.pendingProps.children,r),t.child;case 12:return Ui(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,u=t.pendingProps,d=t.memoizedProps,x=u.value,ur(k1,s._currentValue),s._currentValue=x,d!==null)if(Vs(d.value,x)){if(d.children===u.children&&!po.current){t=Ha(e,t,r);break e}}else for(d=t.child,d!==null&&(d.return=t);d!==null;){var l=d.dependencies;if(l!==null){x=d.child;for(var _=l.firstContext;_!==null;){if(_.context===s){if(d.tag===1){_=ja(-1,r&-r),_.tag=2;var S=d.updateQueue;if(S!==null){S=S.shared;var C=S.pending;C===null?_.next=_:(_.next=C.next,C.next=_),S.pending=_}}d.lanes|=r,_=d.alternate,_!==null&&(_.lanes|=r),Nb(d.return,r,t),l.lanes|=r;break}_=_.next}}else if(d.tag===10)x=d.type===t.type?null:d.child;else if(d.tag===18){if(x=d.return,x===null)throw Error(St(341));x.lanes|=r,l=x.alternate,l!==null&&(l.lanes|=r),Nb(x,r,t),x=d.sibling}else x=d.child;if(x!==null)x.return=d;else for(x=d;x!==null;){if(x===t){x=null;break}if(d=x.sibling,d!==null){d.return=x.return,x=d;break}x=x.return}d=x}Ui(e,t,u.children,r),t=t.child}return t;case 9:return u=t.type,s=t.pendingProps.children,Kh(t,r),u=ss(u),s=s(u),t.flags|=1,Ui(e,t,s,r),t.child;case 14:return s=t.type,u=Ns(s,t.pendingProps),u=Ns(s.type,u),S3(e,t,s,u,r);case 15:return UM(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,u=t.pendingProps,u=t.elementType===s?u:Ns(s,u),Q0(e,t),t.tag=1,fo(s)?(e=!0,C1(t)):e=!1,Kh(t,r),yM(t,s,u),Fb(t,s,u,r),Bb(null,t,s,!0,e,r);case 19:return WM(e,t,r);case 22:return VM(e,t,r)}throw Error(St(156,t.tag))};function ck(e,t){return L5(e,t)}function $F(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function is(e,t,r,s){return new $F(e,t,r,s)}function O2(e){return e=e.prototype,!(!e||!e.isReactComponent)}function jF(e){if(typeof e=="function")return O2(e)?1:0;if(e!=null){if(e=e.$$typeof,e===r2)return 11;if(e===i2)return 14}return 2}function Jl(e,t){var r=e.alternate;return r===null?(r=is(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function n1(e,t,r,s,u,d){var x=2;if(s=e,typeof e=="function")O2(e)&&(x=1);else if(typeof e=="string")x=5;else e:switch(e){case zh:return uu(r.children,u,d,t);case n2:x=8,u|=8;break;case sb:return e=is(12,r,t,u|2),e.elementType=sb,e.lanes=d,e;case ab:return e=is(13,r,t,u),e.elementType=ab,e.lanes=d,e;case lb:return e=is(19,r,t,u),e.elementType=lb,e.lanes=d,e;case x5:return Ay(r,u,d,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case g5:x=10;break e;case y5:x=9;break e;case r2:x=11;break e;case i2:x=14;break e;case Il:x=16,s=null;break e}throw Error(St(130,e==null?e:typeof e,""))}return t=is(x,r,t,u),t.elementType=e,t.type=s,t.lanes=d,t}function uu(e,t,r,s){return e=is(7,e,s,t),e.lanes=r,e}function Ay(e,t,r,s){return e=is(22,e,s,t),e.elementType=x5,e.lanes=r,e.stateNode={isHidden:!1},e}function kv(e,t,r){return e=is(6,e,null,t),e.lanes=r,e}function Pv(e,t,r){return t=is(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function UF(e,t,r,s,u){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=uv(0),this.expirationTimes=uv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=uv(0),this.identifierPrefix=s,this.onRecoverableError=u,this.mutableSourceEagerHydrationData=null}function B2(e,t,r,s,u,d,x,l,_){return e=new UF(e,t,r,l,_),t===1?(t=1,d===!0&&(t|=8)):t=0,d=is(3,null,null,t),e.current=d,d.stateNode=e,d.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},w2(d),e}function VF(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Dh,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function uk(e){if(!e)return ic;e=e._reactInternals;e:{if(vu(e)!==e||e.tag!==1)throw Error(St(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(fo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(St(171))}if(e.tag===1){var r=e.type;if(fo(r))return cM(e,r,t)}return t}function hk(e,t,r,s,u,d,x,l,_){return e=B2(r,s,!0,e,u,d,x,l,_),e.context=uk(null),r=e.current,s=Wi(),u=Yl(r),d=ja(s,u),d.callback=t!=null?t:null,Xl(r,d,u),e.current.lanes=u,Sm(e,u,s),mo(e,s),e}function My(e,t,r,s){var u=t.current,d=Wi(),x=Yl(u);return r=uk(r),t.context===null?t.context=r:t.pendingContext=r,t=ja(d,x),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=Xl(u,t,x),e!==null&&(Us(e,u,x,d),K0(e,u,x)),x}function B1(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function R3(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function $2(e,t){R3(e,t),(e=e.alternate)&&R3(e,t)}function GF(){return null}var dk=typeof reportError=="function"?reportError:function(e){console.error(e)};function j2(e){this._internalRoot=e}ky.prototype.render=j2.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(St(409));My(e,t,null,null)};ky.prototype.unmount=j2.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;gu(function(){My(null,e,null,null)}),t[Ga]=null}};function ky(e){this._internalRoot=e}ky.prototype.unstable_scheduleHydration=function(e){if(e){var t=U5();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Ll.length&&t!==0&&t<Ll[r].priority;r++);Ll.splice(r,0,e),r===0&&G5(e)}};function U2(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Py(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function O3(){}function qF(e,t,r,s,u){if(u){if(typeof s=="function"){var d=s;s=function(){var S=B1(x);d.call(S)}}var x=hk(t,s,e,0,null,!1,!1,"",O3);return e._reactRootContainer=x,e[Ga]=x.current,rm(e.nodeType===8?e.parentNode:e),gu(),x}for(;u=e.lastChild;)e.removeChild(u);if(typeof s=="function"){var l=s;s=function(){var S=B1(_);l.call(S)}}var _=B2(e,0,!1,null,null,!1,!1,"",O3);return e._reactRootContainer=_,e[Ga]=_.current,rm(e.nodeType===8?e.parentNode:e),gu(function(){My(t,_,r,s)}),_}function Iy(e,t,r,s,u){var d=r._reactRootContainer;if(d){var x=d;if(typeof u=="function"){var l=u;u=function(){var _=B1(x);l.call(_)}}My(t,x,e,u)}else x=qF(r,t,e,u,s);return B1(x)}$5=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=If(t.pendingLanes);r!==0&&(a2(t,r|1),mo(t,Vr()),(Nn&6)===0&&(ld=Vr()+500,cc()))}break;case 13:gu(function(){var s=qa(e,1);if(s!==null){var u=Wi();Us(s,e,1,u)}}),$2(e,1)}};l2=function(e){if(e.tag===13){var t=qa(e,134217728);if(t!==null){var r=Wi();Us(t,e,134217728,r)}$2(e,134217728)}};j5=function(e){if(e.tag===13){var t=Yl(e),r=qa(e,t);if(r!==null){var s=Wi();Us(r,e,t,s)}$2(e,t)}};U5=function(){return Yn};V5=function(e,t){var r=Yn;try{return Yn=e,t()}finally{Yn=r}};xb=function(e,t,r){switch(t){case"input":if(hb(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var u=by(s);if(!u)throw Error(St(90));v5(s),hb(s,u)}}}break;case"textarea":w5(e,r);break;case"select":t=r.value,t!=null&&Hh(e,!!r.multiple,t,!1)}};k5=L2;P5=gu;var HF={usingClientEntryPoint:!1,Events:[Am,Rh,by,A5,M5,L2]},Tf={findFiberByHostInstance:ou,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},WF={bundleType:Tf.bundleType,version:Tf.version,rendererPackageName:Tf.rendererPackageName,rendererConfig:Tf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Za.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=z5(e),e===null?null:e.stateNode},findFiberByHostInstance:Tf.findFiberByHostInstance||GF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var k0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!k0.isDisabled&&k0.supportsFiber)try{yy=k0.inject(WF),la=k0}catch{}}Fo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HF;Fo.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!U2(t))throw Error(St(200));return VF(e,t,null,r)};Fo.createRoot=function(e,t){if(!U2(e))throw Error(St(299));var r=!1,s="",u=dk;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(u=t.onRecoverableError)),t=B2(e,1,!1,null,null,r,!1,s,u),e[Ga]=t.current,rm(e.nodeType===8?e.parentNode:e),new j2(t)};Fo.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(St(188)):(e=Object.keys(e).join(","),Error(St(268,e)));return e=z5(t),e=e===null?null:e.stateNode,e};Fo.flushSync=function(e){return gu(e)};Fo.hydrate=function(e,t,r){if(!Py(t))throw Error(St(200));return Iy(null,e,t,!0,r)};Fo.hydrateRoot=function(e,t,r){if(!U2(e))throw Error(St(405));var s=r!=null&&r.hydratedSources||null,u=!1,d="",x=dk;if(r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onRecoverableError!==void 0&&(x=r.onRecoverableError)),t=hk(t,null,e,1,r!=null?r:null,u,!1,d,x),e[Ga]=t.current,rm(e),s)for(e=0;e<s.length;e++)r=s[e],u=r._getVersion,u=u(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,u]:t.mutableSourceEagerHydrationData.push(r,u);return new ky(t)};Fo.render=function(e,t,r){if(!Py(t))throw Error(St(200));return Iy(null,e,t,!1,r)};Fo.unmountComponentAtNode=function(e){if(!Py(e))throw Error(St(40));return e._reactRootContainer?(gu(function(){Iy(null,null,e,!1,function(){e._reactRootContainer=null,e[Ga]=null})}),!0):!1};Fo.unstable_batchedUpdates=L2;Fo.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!Py(r))throw Error(St(200));if(e==null||e._reactInternals===void 0)throw Error(St(38));return Iy(e,t,r,!1,s)};Fo.version="18.2.0-next-9e3b772b8-20220608";function pk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pk)}catch(e){console.error(e)}}pk(),ri.exports=Fo;var ZF=ri.exports,XF=e5({__proto__:null,default:ZF},[ri.exports]);function KF(e){e()}let fk=KF;const YF=e=>fk=e,JF=()=>fk,B3=Symbol.for("react-redux-context"),$3=typeof globalThis!="undefined"?globalThis:{};function QF(){var e;if(!ne.exports.createContext)return{};const t=(e=$3[B3])!=null?e:$3[B3]=new Map;let r=t.get(ne.exports.createContext);return r||(r=ne.exports.createContext(null),t.set(ne.exports.createContext,r)),r}const oc=QF();function V2(e=oc){return function(){return ne.exports.useContext(e)}}const mk=V2(),eR=()=>{throw new Error("uSES not initialized!")};let gk=eR;const tR=e=>{gk=e},nR=(e,t)=>e===t;function rR(e=oc){const t=e===oc?mk:V2(e);return function(s,u={}){const{equalityFn:d=nR,stabilityCheck:x=void 0,noopCheck:l=void 0}=typeof u=="function"?{equalityFn:u}:u,{store:_,subscription:S,getServerState:C,stabilityCheck:k,noopCheck:D}=t();ne.exports.useRef(!0);const U=ne.exports.useCallback({[s.name](L){return s(L)}}[s.name],[s,k,x]),q=gk(S.addNestedSub,_.getState,C||_.getState,U,d);return ne.exports.useDebugValue(q),q}}const jr=rR();var yk={exports:{}},Jn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fi=typeof Symbol=="function"&&Symbol.for,G2=fi?Symbol.for("react.element"):60103,q2=fi?Symbol.for("react.portal"):60106,Dy=fi?Symbol.for("react.fragment"):60107,zy=fi?Symbol.for("react.strict_mode"):60108,Ny=fi?Symbol.for("react.profiler"):60114,Ly=fi?Symbol.for("react.provider"):60109,Fy=fi?Symbol.for("react.context"):60110,H2=fi?Symbol.for("react.async_mode"):60111,Ry=fi?Symbol.for("react.concurrent_mode"):60111,Oy=fi?Symbol.for("react.forward_ref"):60112,By=fi?Symbol.for("react.suspense"):60113,iR=fi?Symbol.for("react.suspense_list"):60120,$y=fi?Symbol.for("react.memo"):60115,jy=fi?Symbol.for("react.lazy"):60116,oR=fi?Symbol.for("react.block"):60121,sR=fi?Symbol.for("react.fundamental"):60117,aR=fi?Symbol.for("react.responder"):60118,lR=fi?Symbol.for("react.scope"):60119;function Oo(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case G2:switch(e=e.type,e){case H2:case Ry:case Dy:case Ny:case zy:case By:return e;default:switch(e=e&&e.$$typeof,e){case Fy:case Oy:case jy:case $y:case Ly:return e;default:return t}}case q2:return t}}}function xk(e){return Oo(e)===Ry}Jn.AsyncMode=H2;Jn.ConcurrentMode=Ry;Jn.ContextConsumer=Fy;Jn.ContextProvider=Ly;Jn.Element=G2;Jn.ForwardRef=Oy;Jn.Fragment=Dy;Jn.Lazy=jy;Jn.Memo=$y;Jn.Portal=q2;Jn.Profiler=Ny;Jn.StrictMode=zy;Jn.Suspense=By;Jn.isAsyncMode=function(e){return xk(e)||Oo(e)===H2};Jn.isConcurrentMode=xk;Jn.isContextConsumer=function(e){return Oo(e)===Fy};Jn.isContextProvider=function(e){return Oo(e)===Ly};Jn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===G2};Jn.isForwardRef=function(e){return Oo(e)===Oy};Jn.isFragment=function(e){return Oo(e)===Dy};Jn.isLazy=function(e){return Oo(e)===jy};Jn.isMemo=function(e){return Oo(e)===$y};Jn.isPortal=function(e){return Oo(e)===q2};Jn.isProfiler=function(e){return Oo(e)===Ny};Jn.isStrictMode=function(e){return Oo(e)===zy};Jn.isSuspense=function(e){return Oo(e)===By};Jn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Dy||e===Ry||e===Ny||e===zy||e===By||e===iR||typeof e=="object"&&e!==null&&(e.$$typeof===jy||e.$$typeof===$y||e.$$typeof===Ly||e.$$typeof===Fy||e.$$typeof===Oy||e.$$typeof===sR||e.$$typeof===aR||e.$$typeof===lR||e.$$typeof===oR)};Jn.typeOf=Oo;yk.exports=Jn;var _k=yk.exports,cR={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},uR={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},vk={};vk[_k.ForwardRef]=cR;vk[_k.Memo]=uR;var ir={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W2=Symbol.for("react.element"),Z2=Symbol.for("react.portal"),Uy=Symbol.for("react.fragment"),Vy=Symbol.for("react.strict_mode"),Gy=Symbol.for("react.profiler"),qy=Symbol.for("react.provider"),Hy=Symbol.for("react.context"),hR=Symbol.for("react.server_context"),Wy=Symbol.for("react.forward_ref"),Zy=Symbol.for("react.suspense"),Xy=Symbol.for("react.suspense_list"),Ky=Symbol.for("react.memo"),Yy=Symbol.for("react.lazy"),dR=Symbol.for("react.offscreen"),bk;bk=Symbol.for("react.module.reference");function cs(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case W2:switch(e=e.type,e){case Uy:case Gy:case Vy:case Zy:case Xy:return e;default:switch(e=e&&e.$$typeof,e){case hR:case Hy:case Wy:case Yy:case Ky:case qy:return e;default:return t}}case Z2:return t}}}ir.ContextConsumer=Hy;ir.ContextProvider=qy;ir.Element=W2;ir.ForwardRef=Wy;ir.Fragment=Uy;ir.Lazy=Yy;ir.Memo=Ky;ir.Portal=Z2;ir.Profiler=Gy;ir.StrictMode=Vy;ir.Suspense=Zy;ir.SuspenseList=Xy;ir.isAsyncMode=function(){return!1};ir.isConcurrentMode=function(){return!1};ir.isContextConsumer=function(e){return cs(e)===Hy};ir.isContextProvider=function(e){return cs(e)===qy};ir.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===W2};ir.isForwardRef=function(e){return cs(e)===Wy};ir.isFragment=function(e){return cs(e)===Uy};ir.isLazy=function(e){return cs(e)===Yy};ir.isMemo=function(e){return cs(e)===Ky};ir.isPortal=function(e){return cs(e)===Z2};ir.isProfiler=function(e){return cs(e)===Gy};ir.isStrictMode=function(e){return cs(e)===Vy};ir.isSuspense=function(e){return cs(e)===Zy};ir.isSuspenseList=function(e){return cs(e)===Xy};ir.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Uy||e===Gy||e===Vy||e===Zy||e===Xy||e===dR||typeof e=="object"&&e!==null&&(e.$$typeof===Yy||e.$$typeof===Ky||e.$$typeof===qy||e.$$typeof===Hy||e.$$typeof===Wy||e.$$typeof===bk||e.getModuleId!==void 0)};ir.typeOf=cs;function pR(){const e=JF();let t=null,r=null;return{clear(){t=null,r=null},notify(){e(()=>{let s=t;for(;s;)s.callback(),s=s.next})},get(){let s=[],u=t;for(;u;)s.push(u),u=u.next;return s},subscribe(s){let u=!0,d=r={callback:s,next:null,prev:r};return d.prev?d.prev.next=d:t=d,function(){!u||t===null||(u=!1,d.next?d.next.prev=d.prev:r=d.prev,d.prev?d.prev.next=d.next:t=d.next)}}}}const j3={notify(){},get:()=>[]};function fR(e,t){let r,s=j3,u=0,d=!1;function x(L){C();const K=s.subscribe(L);let R=!1;return()=>{R||(R=!0,K(),k())}}function l(){s.notify()}function _(){q.onStateChange&&q.onStateChange()}function S(){return d}function C(){u++,r||(r=t?t.addNestedSub(_):e.subscribe(_),s=pR())}function k(){u--,r&&u===0&&(r(),r=void 0,s.clear(),s=j3)}function D(){d||(d=!0,C())}function U(){d&&(d=!1,k())}const q={addNestedSub:x,notifyNestedSubs:l,handleChangeWrapper:_,isSubscribed:S,trySubscribe:D,tryUnsubscribe:U,getListeners:()=>s};return q}const mR=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined",gR=mR?ne.exports.useLayoutEffect:ne.exports.useEffect;function yR({store:e,context:t,children:r,serverState:s,stabilityCheck:u="once",noopCheck:d="once"}){const x=ne.exports.useMemo(()=>{const S=fR(e);return{store:e,subscription:S,getServerState:s?()=>s:void 0,stabilityCheck:u,noopCheck:d}},[e,s,u,d]),l=ne.exports.useMemo(()=>e.getState(),[e]);gR(()=>{const{subscription:S}=x;return S.onStateChange=S.notifyNestedSubs,S.trySubscribe(),l!==e.getState()&&S.notifyNestedSubs(),()=>{S.tryUnsubscribe(),S.onStateChange=void 0}},[x,l]);const _=t||oc;return ne.exports.createElement(_.Provider,{value:x},r)}function wk(e=oc){const t=e===oc?mk:V2(e);return function(){const{store:s}=t();return s}}const xR=wk();function _R(e=oc){const t=e===oc?xR:wk(e);return function(){return t().dispatch}}const Ei=_R();tR(u5.exports.useSyncExternalStoreWithSelector);YF(ri.exports.unstable_batchedUpdates);var Yb={},U3=ri.exports;Yb.createRoot=U3.createRoot,Yb.hydrateRoot=U3.hydrateRoot;/**
 * @remix-run/router v1.15.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dm(){return dm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},dm.apply(this,arguments)}var $l;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})($l||($l={}));const V3="popstate";function vR(e){e===void 0&&(e={});function t(s,u){let{pathname:d,search:x,hash:l}=s.location;return Jb("",{pathname:d,search:x,hash:l},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function r(s,u){return typeof u=="string"?u:$1(u)}return wR(t,r,null,e)}function Nr(e,t){if(e===!1||e===null||typeof e=="undefined")throw new Error(t)}function Ek(e,t){if(!e){typeof console!="undefined"&&console.warn(t);try{throw new Error(t)}catch{}}}function bR(){return Math.random().toString(36).substr(2,8)}function G3(e,t){return{usr:e.state,key:e.key,idx:t}}function Jb(e,t,r,s){return r===void 0&&(r=null),dm({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Td(t):t,{state:r,key:t&&t.key||s||bR()})}function $1(e){let{pathname:t="/",search:r="",hash:s=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function Td(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function wR(e,t,r,s){s===void 0&&(s={});let{window:u=document.defaultView,v5Compat:d=!1}=s,x=u.history,l=$l.Pop,_=null,S=C();S==null&&(S=0,x.replaceState(dm({},x.state,{idx:S}),""));function C(){return(x.state||{idx:null}).idx}function k(){l=$l.Pop;let K=C(),R=K==null?null:K-S;S=K,_&&_({action:l,location:L.location,delta:R})}function D(K,R){l=$l.Push;let F=Jb(L.location,K,R);r&&r(F,K),S=C()+1;let V=G3(F,S),J=L.createHref(F);try{x.pushState(V,"",J)}catch(re){if(re instanceof DOMException&&re.name==="DataCloneError")throw re;u.location.assign(J)}d&&_&&_({action:l,location:L.location,delta:1})}function U(K,R){l=$l.Replace;let F=Jb(L.location,K,R);r&&r(F,K),S=C();let V=G3(F,S),J=L.createHref(F);x.replaceState(V,"",J),d&&_&&_({action:l,location:L.location,delta:0})}function q(K){let R=u.location.origin!=="null"?u.location.origin:u.location.href,F=typeof K=="string"?K:$1(K);return F=F.replace(/ $/,"%20"),Nr(R,"No window.location.(origin|href) available to create URL for href: "+F),new URL(F,R)}let L={get action(){return l},get location(){return e(u,x)},listen(K){if(_)throw new Error("A history only accepts one active listener");return u.addEventListener(V3,k),_=K,()=>{u.removeEventListener(V3,k),_=null}},createHref(K){return t(u,K)},createURL:q,encodeLocation(K){let R=q(K);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:D,replace:U,go(K){return x.go(K)}};return L}var q3;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(q3||(q3={}));function ER(e,t,r){r===void 0&&(r="/");let s=typeof t=="string"?Td(t):t,u=cd(s.pathname||"/",r);if(u==null)return null;let d=Tk(e);TR(d);let x=null;for(let l=0;x==null&&l<d.length;++l){let _=LR(u);x=zR(d[l],_)}return x}function Tk(e,t,r,s){t===void 0&&(t=[]),r===void 0&&(r=[]),s===void 0&&(s="");let u=(d,x,l)=>{let _={relativePath:l===void 0?d.path||"":l,caseSensitive:d.caseSensitive===!0,childrenIndex:x,route:d};_.relativePath.startsWith("/")&&(Nr(_.relativePath.startsWith(s),'Absolute route path "'+_.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),_.relativePath=_.relativePath.slice(s.length));let S=Ql([s,_.relativePath]),C=r.concat(_);d.children&&d.children.length>0&&(Nr(d.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+S+'".')),Tk(d.children,t,C,S)),!(d.path==null&&!d.index)&&t.push({path:S,score:IR(S,d.index),routesMeta:C})};return e.forEach((d,x)=>{var l;if(d.path===""||!((l=d.path)!=null&&l.includes("?")))u(d,x);else for(let _ of Sk(d.path))u(d,x,_)}),t}function Sk(e){let t=e.split("/");if(t.length===0)return[];let[r,...s]=t,u=r.endsWith("?"),d=r.replace(/\?$/,"");if(s.length===0)return u?[d,""]:[d];let x=Sk(s.join("/")),l=[];return l.push(...x.map(_=>_===""?d:[d,_].join("/"))),u&&l.push(...x),l.map(_=>e.startsWith("/")&&_===""?"/":_)}function TR(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:DR(t.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const SR=/^:[\w-]+$/,CR=3,AR=2,MR=1,kR=10,PR=-2,H3=e=>e==="*";function IR(e,t){let r=e.split("/"),s=r.length;return r.some(H3)&&(s+=PR),t&&(s+=AR),r.filter(u=>!H3(u)).reduce((u,d)=>u+(SR.test(d)?CR:d===""?MR:kR),s)}function DR(e,t){return e.length===t.length&&e.slice(0,-1).every((s,u)=>s===t[u])?e[e.length-1]-t[t.length-1]:0}function zR(e,t){let{routesMeta:r}=e,s={},u="/",d=[];for(let x=0;x<r.length;++x){let l=r[x],_=x===r.length-1,S=u==="/"?t:t.slice(u.length)||"/",C=Qb({path:l.relativePath,caseSensitive:l.caseSensitive,end:_},S);if(!C)return null;Object.assign(s,C.params);let k=l.route;d.push({params:s,pathname:Ql([u,C.pathname]),pathnameBase:BR(Ql([u,C.pathnameBase])),route:k}),C.pathnameBase!=="/"&&(u=Ql([u,C.pathnameBase]))}return d}function Qb(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,s]=NR(e.path,e.caseSensitive,e.end),u=t.match(r);if(!u)return null;let d=u[0],x=d.replace(/(.)\/+$/,"$1"),l=u.slice(1);return{params:s.reduce((S,C,k)=>{let{paramName:D,isOptional:U}=C;if(D==="*"){let L=l[k]||"";x=d.slice(0,d.length-L.length).replace(/(.)\/+$/,"$1")}const q=l[k];return U&&!q?S[D]=void 0:S[D]=(q||"").replace(/%2F/g,"/"),S},{}),pathname:d,pathnameBase:x,pattern:e}}function NR(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Ek(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],u="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(x,l,_)=>(s.push({paramName:l,isOptional:_!=null}),_?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),u+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?u+="\\/*$":e!==""&&e!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,t?void 0:"i"),s]}function LR(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ek(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function cd(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=e.charAt(r);return s&&s!=="/"?null:e.slice(r)||"/"}function FR(e,t){t===void 0&&(t="/");let{pathname:r,search:s="",hash:u=""}=typeof e=="string"?Td(e):e;return{pathname:r?r.startsWith("/")?r:RR(r,t):t,search:$R(s),hash:jR(u)}}function RR(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(u=>{u===".."?r.length>1&&r.pop():u!=="."&&r.push(u)}),r.length>1?r.join("/"):"/"}function Iv(e,t,r,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function OR(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function X2(e,t){let r=OR(e);return t?r.map((s,u)=>u===e.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function K2(e,t,r,s){s===void 0&&(s=!1);let u;typeof e=="string"?u=Td(e):(u=dm({},e),Nr(!u.pathname||!u.pathname.includes("?"),Iv("?","pathname","search",u)),Nr(!u.pathname||!u.pathname.includes("#"),Iv("#","pathname","hash",u)),Nr(!u.search||!u.search.includes("#"),Iv("#","search","hash",u)));let d=e===""||u.pathname==="",x=d?"/":u.pathname,l;if(x==null)l=r;else{let k=t.length-1;if(!s&&x.startsWith("..")){let D=x.split("/");for(;D[0]==="..";)D.shift(),k-=1;u.pathname=D.join("/")}l=k>=0?t[k]:"/"}let _=FR(u,l),S=x&&x!=="/"&&x.endsWith("/"),C=(d||x===".")&&r.endsWith("/");return!_.pathname.endsWith("/")&&(S||C)&&(_.pathname+="/"),_}const Ql=e=>e.join("/").replace(/\/\/+/g,"/"),BR=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),$R=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,jR=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function UR(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const VR=["post","put","patch","delete"];[...VR];/**
 * React Router v6.22.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pm(){return pm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},pm.apply(this,arguments)}const Jy=ne.exports.createContext(null),Ck=ne.exports.createContext(null),Xa=ne.exports.createContext(null),Qy=ne.exports.createContext(null),uc=ne.exports.createContext({outlet:null,matches:[],isDataRoute:!1}),Ak=ne.exports.createContext(null);function GR(e,t){let{relative:r}=t===void 0?{}:t;Sd()||Nr(!1);let{basename:s,navigator:u}=ne.exports.useContext(Xa),{hash:d,pathname:x,search:l}=ex(e,{relative:r}),_=x;return s!=="/"&&(_=x==="/"?s:Ql([s,x])),u.createHref({pathname:_,search:l,hash:d})}function Sd(){return ne.exports.useContext(Qy)!=null}function Ji(){return Sd()||Nr(!1),ne.exports.useContext(Qy).location}function Mk(e){ne.exports.useContext(Xa).static||ne.exports.useLayoutEffect(e)}function yr(){let{isDataRoute:e}=ne.exports.useContext(uc);return e?rO():qR()}function qR(){Sd()||Nr(!1);let e=ne.exports.useContext(Jy),{basename:t,future:r,navigator:s}=ne.exports.useContext(Xa),{matches:u}=ne.exports.useContext(uc),{pathname:d}=Ji(),x=JSON.stringify(X2(u,r.v7_relativeSplatPath)),l=ne.exports.useRef(!1);return Mk(()=>{l.current=!0}),ne.exports.useCallback(function(S,C){if(C===void 0&&(C={}),!l.current)return;if(typeof S=="number"){s.go(S);return}let k=K2(S,JSON.parse(x),d,C.relative==="path");e==null&&t!=="/"&&(k.pathname=k.pathname==="/"?t:Ql([t,k.pathname])),(C.replace?s.replace:s.push)(k,C.state,C)},[t,s,x,d,e])}function ex(e,t){let{relative:r}=t===void 0?{}:t,{future:s}=ne.exports.useContext(Xa),{matches:u}=ne.exports.useContext(uc),{pathname:d}=Ji(),x=JSON.stringify(X2(u,s.v7_relativeSplatPath));return ne.exports.useMemo(()=>K2(e,JSON.parse(x),d,r==="path"),[e,x,d,r])}function HR(e,t){return WR(e,t)}function WR(e,t,r,s){Sd()||Nr(!1);let{navigator:u}=ne.exports.useContext(Xa),{matches:d}=ne.exports.useContext(uc),x=d[d.length-1],l=x?x.params:{};x&&x.pathname;let _=x?x.pathnameBase:"/";x&&x.route;let S=Ji(),C;if(t){var k;let K=typeof t=="string"?Td(t):t;_==="/"||((k=K.pathname)==null?void 0:k.startsWith(_))||Nr(!1),C=K}else C=S;let D=C.pathname||"/",U=D;if(_!=="/"){let K=_.replace(/^\//,"").split("/"),R=D.replace(/^\//,"").split("/");U="/"+R.slice(K.length).join("/")}let q=ER(e,{pathname:U}),L=JR(q&&q.map(K=>Object.assign({},K,{params:Object.assign({},l,K.params),pathname:Ql([_,u.encodeLocation?u.encodeLocation(K.pathname).pathname:K.pathname]),pathnameBase:K.pathnameBase==="/"?_:Ql([_,u.encodeLocation?u.encodeLocation(K.pathnameBase).pathname:K.pathnameBase])})),d,r,s);return t&&L?ne.exports.createElement(Qy.Provider,{value:{location:pm({pathname:"/",search:"",hash:"",state:null,key:"default"},C),navigationType:$l.Pop}},L):L}function ZR(){let e=nO(),t=UR(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,u={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},d=null;return ne.exports.createElement(ne.exports.Fragment,null,ne.exports.createElement("h2",null,"Unexpected Application Error!"),ne.exports.createElement("h3",{style:{fontStyle:"italic"}},t),r?ne.exports.createElement("pre",{style:u},r):null,d)}const XR=ne.exports.createElement(ZR,null);class KR extends ne.exports.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?ne.exports.createElement(uc.Provider,{value:this.props.routeContext},ne.exports.createElement(Ak.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function YR(e){let{routeContext:t,match:r,children:s}=e,u=ne.exports.useContext(Jy);return u&&u.static&&u.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(u.staticContext._deepestRenderedBoundaryId=r.route.id),ne.exports.createElement(uc.Provider,{value:t},s)}function JR(e,t,r,s){var u;if(t===void 0&&(t=[]),r===void 0&&(r=null),s===void 0&&(s=null),e==null){var d;if((d=r)!=null&&d.errors)e=r.matches;else return null}let x=e,l=(u=r)==null?void 0:u.errors;if(l!=null){let C=x.findIndex(k=>k.route.id&&(l==null?void 0:l[k.route.id]));C>=0||Nr(!1),x=x.slice(0,Math.min(x.length,C+1))}let _=!1,S=-1;if(r&&s&&s.v7_partialHydration)for(let C=0;C<x.length;C++){let k=x[C];if((k.route.HydrateFallback||k.route.hydrateFallbackElement)&&(S=C),k.route.id){let{loaderData:D,errors:U}=r,q=k.route.loader&&D[k.route.id]===void 0&&(!U||U[k.route.id]===void 0);if(k.route.lazy||q){_=!0,S>=0?x=x.slice(0,S+1):x=[x[0]];break}}}return x.reduceRight((C,k,D)=>{let U,q=!1,L=null,K=null;r&&(U=l&&k.route.id?l[k.route.id]:void 0,L=k.route.errorElement||XR,_&&(S<0&&D===0?(iO("route-fallback",!1),q=!0,K=null):S===D&&(q=!0,K=k.route.hydrateFallbackElement||null)));let R=t.concat(x.slice(0,D+1)),F=()=>{let V;return U?V=L:q?V=K:k.route.Component?V=ne.exports.createElement(k.route.Component,null):k.route.element?V=k.route.element:V=C,ne.exports.createElement(YR,{match:k,routeContext:{outlet:C,matches:R,isDataRoute:r!=null},children:V})};return r&&(k.route.ErrorBoundary||k.route.errorElement||D===0)?ne.exports.createElement(KR,{location:r.location,revalidation:r.revalidation,component:L,error:U,children:F(),routeContext:{outlet:null,matches:R,isDataRoute:!0}}):F()},null)}var kk=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(kk||{}),j1=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(j1||{});function QR(e){let t=ne.exports.useContext(Jy);return t||Nr(!1),t}function eO(e){let t=ne.exports.useContext(Ck);return t||Nr(!1),t}function tO(e){let t=ne.exports.useContext(uc);return t||Nr(!1),t}function Pk(e){let t=tO(),r=t.matches[t.matches.length-1];return r.route.id||Nr(!1),r.route.id}function nO(){var e;let t=ne.exports.useContext(Ak),r=eO(j1.UseRouteError),s=Pk(j1.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[s]}function rO(){let{router:e}=QR(kk.UseNavigateStable),t=Pk(j1.UseNavigateStable),r=ne.exports.useRef(!1);return Mk(()=>{r.current=!0}),ne.exports.useCallback(function(u,d){d===void 0&&(d={}),r.current&&(typeof u=="number"?e.navigate(u):e.navigate(u,pm({fromRouteId:t},d)))},[e,t])}const W3={};function iO(e,t,r){!t&&!W3[e]&&(W3[e]=!0)}const oO="startTransition";Jw[oO];function sO(e){let{to:t,replace:r,state:s,relative:u}=e;Sd()||Nr(!1);let{future:d,static:x}=ne.exports.useContext(Xa),{matches:l}=ne.exports.useContext(uc),{pathname:_}=Ji(),S=yr(),C=K2(t,X2(l,d.v7_relativeSplatPath),_,u==="path"),k=JSON.stringify(C);return ne.exports.useEffect(()=>S(JSON.parse(k),{replace:r,state:s,relative:u}),[S,k,u,r,s]),null}function Co(e){Nr(!1)}function aO(e){let{basename:t="/",children:r=null,location:s,navigationType:u=$l.Pop,navigator:d,static:x=!1,future:l}=e;Sd()&&Nr(!1);let _=t.replace(/^\/*/,"/"),S=ne.exports.useMemo(()=>({basename:_,navigator:d,static:x,future:pm({v7_relativeSplatPath:!1},l)}),[_,l,d,x]);typeof s=="string"&&(s=Td(s));let{pathname:C="/",search:k="",hash:D="",state:U=null,key:q="default"}=s,L=ne.exports.useMemo(()=>{let K=cd(C,_);return K==null?null:{location:{pathname:K,search:k,hash:D,state:U,key:q},navigationType:u}},[_,C,k,D,U,q,u]);return L==null?null:ne.exports.createElement(Xa.Provider,{value:S},ne.exports.createElement(Qy.Provider,{children:r,value:L}))}function lO(e){let{children:t,location:r}=e;return HR(ew(t),r)}new Promise(()=>{});function ew(e,t){t===void 0&&(t=[]);let r=[];return ne.exports.Children.forEach(e,(s,u)=>{if(!ne.exports.isValidElement(s))return;let d=[...t,u];if(s.type===ne.exports.Fragment){r.push.apply(r,ew(s.props.children,d));return}s.type!==Co&&Nr(!1),!s.props.index||!s.props.children||Nr(!1);let x={id:s.props.id||d.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(x.children=ew(s.props.children,d)),r.push(x)}),r}/**
 * React Router DOM v6.22.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function U1(){return U1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},U1.apply(this,arguments)}function Ik(e,t){if(e==null)return{};var r={},s=Object.keys(e),u,d;for(d=0;d<s.length;d++)u=s[d],!(t.indexOf(u)>=0)&&(r[u]=e[u]);return r}function cO(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function uO(e,t){return e.button===0&&(!t||t==="_self")&&!cO(e)}const hO=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],dO=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],pO="6";try{window.__reactRouterVersion=pO}catch{}const fO=ne.exports.createContext({isTransitioning:!1}),mO="startTransition",Z3=Jw[mO],gO="flushSync";XF[gO];const yO="useId";Jw[yO];function xO(e){let{basename:t,children:r,future:s,window:u}=e,d=ne.exports.useRef();d.current==null&&(d.current=vR({window:u,v5Compat:!0}));let x=d.current,[l,_]=ne.exports.useState({action:x.action,location:x.location}),{v7_startTransition:S}=s||{},C=ne.exports.useCallback(k=>{S&&Z3?Z3(()=>_(k)):_(k)},[_,S]);return ne.exports.useLayoutEffect(()=>x.listen(C),[x,C]),ne.exports.createElement(aO,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:x,future:s})}const _O=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined",vO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Jt=ne.exports.forwardRef(function(t,r){let{onClick:s,relative:u,reloadDocument:d,replace:x,state:l,target:_,to:S,preventScrollReset:C,unstable_viewTransition:k}=t,D=Ik(t,hO),{basename:U}=ne.exports.useContext(Xa),q,L=!1;if(typeof S=="string"&&vO.test(S)&&(q=S,_O))try{let V=new URL(window.location.href),J=S.startsWith("//")?new URL(V.protocol+S):new URL(S),re=cd(J.pathname,U);J.origin===V.origin&&re!=null?S=re+J.search+J.hash:L=!0}catch{}let K=GR(S,{relative:u}),R=wO(S,{replace:x,state:l,target:_,preventScrollReset:C,relative:u,unstable_viewTransition:k});function F(V){s&&s(V),V.defaultPrevented||R(V)}return ne.exports.createElement("a",U1({},D,{href:q||K,onClick:L||d?s:F,ref:r,target:_}))}),r1=ne.exports.forwardRef(function(t,r){let{"aria-current":s="page",caseSensitive:u=!1,className:d="",end:x=!1,style:l,to:_,unstable_viewTransition:S,children:C}=t,k=Ik(t,dO),D=ex(_,{relative:k.relative}),U=Ji(),q=ne.exports.useContext(Ck),{navigator:L,basename:K}=ne.exports.useContext(Xa),R=q!=null&&EO(D)&&S===!0,F=L.encodeLocation?L.encodeLocation(D).pathname:D.pathname,V=U.pathname,J=q&&q.navigation&&q.navigation.location?q.navigation.location.pathname:null;u||(V=V.toLowerCase(),J=J?J.toLowerCase():null,F=F.toLowerCase()),J&&K&&(J=cd(J,K)||J);const re=F!=="/"&&F.endsWith("/")?F.length-1:F.length;let fe=V===F||!x&&V.startsWith(F)&&V.charAt(re)==="/",be=J!=null&&(J===F||!x&&J.startsWith(F)&&J.charAt(F.length)==="/"),ce={isActive:fe,isPending:be,isTransitioning:R},ve=fe?s:void 0,Fe;typeof d=="function"?Fe=d(ce):Fe=[d,fe?"active":null,be?"pending":null,R?"transitioning":null].filter(Boolean).join(" ");let Le=typeof l=="function"?l(ce):l;return ne.exports.createElement(Jt,U1({},k,{"aria-current":ve,className:Fe,ref:r,style:Le,to:_,unstable_viewTransition:S}),typeof C=="function"?C(ce):C)});var tw;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(tw||(tw={}));var X3;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(X3||(X3={}));function bO(e){let t=ne.exports.useContext(Jy);return t||Nr(!1),t}function wO(e,t){let{target:r,replace:s,state:u,preventScrollReset:d,relative:x,unstable_viewTransition:l}=t===void 0?{}:t,_=yr(),S=Ji(),C=ex(e,{relative:x});return ne.exports.useCallback(k=>{if(uO(k,r)){k.preventDefault();let D=s!==void 0?s:$1(S)===$1(C);_(e,{replace:D,state:u,preventScrollReset:d,relative:x,unstable_viewTransition:l})}},[S,_,C,s,u,r,e,d,x,l])}function EO(e,t){t===void 0&&(t={});let r=ne.exports.useContext(fO);r==null&&Nr(!1);let{basename:s}=bO(tw.useViewTransitionState),u=ex(e,{relative:t.relative});if(!r.isTransitioning)return!1;let d=cd(r.currentLocation.pathname,s)||r.currentLocation.pathname,x=cd(r.nextLocation.pathname,s)||r.nextLocation.pathname;return Qb(u.pathname,x)!=null||Qb(u.pathname,d)!=null}var Dk={exports:{}},TO="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",SO=TO,CO=SO;function zk(){}function Nk(){}Nk.resetWarningCache=zk;var AO=function(){function e(s,u,d,x,l,_){if(_!==CO){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Nk,resetWarningCache:zk};return r.PropTypes=r,r};Dk.exports=AO();var _e=Dk.exports,tx={exports:{}},nx={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MO=ne.exports,kO=Symbol.for("react.element"),PO=Symbol.for("react.fragment"),IO=Object.prototype.hasOwnProperty,DO=MO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zO={key:!0,ref:!0,__self:!0,__source:!0};function Lk(e,t,r){var s,u={},d=null,x=null;r!==void 0&&(d=""+r),t.key!==void 0&&(d=""+t.key),t.ref!==void 0&&(x=t.ref);for(s in t)IO.call(t,s)&&!zO.hasOwnProperty(s)&&(u[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)u[s]===void 0&&(u[s]=t[s]);return{$$typeof:kO,type:e,key:d,ref:x,props:u,_owner:DO.current}}nx.Fragment=PO;nx.jsx=Lk;nx.jsxs=Lk;tx.exports=nx;const T=tx.exports.jsx,H=tx.exports.jsxs,yn=tx.exports.Fragment,Fk=ne.exports.createContext();Y2.propTypes={};function Y2(e){const[t,r]=ne.exports.useState(!1);return T(Fk.Provider,{...e,value:[t,r]})}function Ka(e){const t=ne.exports.useContext(Fk);if(typeof t=="undefined")throw new Error("useHide must be within a GlobalProvider");return t}var Rk={};/*! For license information please see index.js.LICENSE.txt */(function(e){(()=>{var t={184:(l,_)=>{var S;(function(){var C={}.hasOwnProperty;function k(){for(var D=[],U=0;U<arguments.length;U++){var q=arguments[U];if(q){var L=typeof q;if(L==="string"||L==="number")D.push(q);else if(Array.isArray(q)){if(q.length){var K=k.apply(null,q);K&&D.push(K)}}else if(L==="object"){if(q.toString!==Object.prototype.toString&&!q.toString.toString().includes("[native code]")){D.push(q.toString());continue}for(var R in q)C.call(q,R)&&q[R]&&D.push(R)}}}return D.join(" ")}l.exports?(k.default=k,l.exports=k):(S=function(){return k}.apply(_,[]))===void 0||(l.exports=S)})()},28:(l,_,S)=>{S.d(_,{Z:()=>q});var C=S(81),k=S.n(C),D=S(645),U=S.n(D)()(k());U.push([l.id,`.vi {
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  box-sizing: border-box;
  position: absolute;
  color: transparent;
  background: transparent;
  caret-color: transparent;
  outline: none;
  border: 0 none transparent;
}

.vi::-ms-reveal,
.vi::-ms-clear {
  display: none;
}

.vi::selection {
  background: transparent;
}

/* :where() gives the styles specificity 0, which makes them overridable */
:where(.vi__container) {
  position: relative;
  display: flex;
  gap: 8px;
  height: 50px;
  width: 300px;
}

:where(.vi__character) {
  height: 100%;
  flex-grow: 1;
  flex-basis: 0;
  text-align: center;
  font-size: 36px;
  line-height: 50px;
  color: black;
  background-color: white;
  border: 1px solid black;
  cursor: default;
  user-select: none;
  box-sizing: border-box;
}

:where(.vi__character--inactive) {
  color: dimgray;
  background-color: lightgray;
}

:where(.vi__character--selected) {
  outline: 2px solid cornflowerblue;
  color: cornflowerblue;
}
`,""]);const q=U},645:l=>{l.exports=function(_){var S=[];return S.toString=function(){return this.map(function(C){var k="",D=C[5]!==void 0;return C[4]&&(k+="@supports (".concat(C[4],") {")),C[2]&&(k+="@media ".concat(C[2]," {")),D&&(k+="@layer".concat(C[5].length>0?" ".concat(C[5]):""," {")),k+=_(C),D&&(k+="}"),C[2]&&(k+="}"),C[4]&&(k+="}"),k}).join("")},S.i=function(C,k,D,U,q){typeof C=="string"&&(C=[[null,C,void 0]]);var L={};if(D)for(var K=0;K<this.length;K++){var R=this[K][0];R!=null&&(L[R]=!0)}for(var F=0;F<C.length;F++){var V=[].concat(C[F]);D&&L[V[0]]||(q!==void 0&&(V[5]===void 0||(V[1]="@layer".concat(V[5].length>0?" ".concat(V[5]):""," {").concat(V[1],"}")),V[5]=q),k&&(V[2]&&(V[1]="@media ".concat(V[2]," {").concat(V[1],"}")),V[2]=k),U&&(V[4]?(V[1]="@supports (".concat(V[4],") {").concat(V[1],"}"),V[4]=U):V[4]="".concat(U)),S.push(V))}},S}},81:l=>{l.exports=function(_){return _[1]}},703:(l,_,S)=>{var C=S(414);function k(){}function D(){}D.resetWarningCache=k,l.exports=function(){function U(K,R,F,V,J,re){if(re!==C){var fe=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw fe.name="Invariant Violation",fe}}function q(){return U}U.isRequired=U;var L={array:U,bigint:U,bool:U,func:U,number:U,object:U,string:U,symbol:U,any:U,arrayOf:q,element:U,elementType:U,instanceOf:q,node:U,objectOf:q,oneOf:q,oneOfType:q,shape:q,exact:q,checkPropTypes:D,resetWarningCache:k};return L.PropTypes=L,L}},697:(l,_,S)=>{l.exports=S(703)()},414:l=>{l.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},r={};function s(l){var _=r[l];if(_!==void 0)return _.exports;var S=r[l]={id:l,exports:{}};return t[l](S,S.exports,s),S.exports}s.n=l=>{var _=l&&l.__esModule?()=>l.default:()=>l;return s.d(_,{a:_}),_},s.d=(l,_)=>{for(var S in _)s.o(_,S)&&!s.o(l,S)&&Object.defineProperty(l,S,{enumerable:!0,get:_[S]})},s.o=(l,_)=>Object.prototype.hasOwnProperty.call(l,_),s.r=l=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})};var u={};(()=>{s.r(u),s.d(u,{default:()=>fe});const l=ne.exports;var _=s.n(l),S=s(184),C=s.n(S),k=s(697),D=s.n(k),U=s(28),q=["className","type"],L=["className"];function K(){return K=Object.assign?Object.assign.bind():function(be){for(var ce=1;ce<arguments.length;ce++){var ve=arguments[ce];for(var Fe in ve)Object.prototype.hasOwnProperty.call(ve,Fe)&&(be[Fe]=ve[Fe])}return be},K.apply(this,arguments)}function R(be,ce){if(be==null)return{};var ve,Fe,Le=function(Ke,bt){if(Ke==null)return{};var ot,Ot,Dt={},Ze=Object.keys(Ke);for(Ot=0;Ot<Ze.length;Ot++)ot=Ze[Ot],bt.indexOf(ot)>=0||(Dt[ot]=Ke[ot]);return Dt}(be,ce);if(Object.getOwnPropertySymbols){var Ie=Object.getOwnPropertySymbols(be);for(Fe=0;Fe<Ie.length;Fe++)ve=Ie[Fe],ce.indexOf(ve)>=0||Object.prototype.propertyIsEnumerable.call(be,ve)&&(Le[ve]=be[ve])}return Le}function F(be,ce){return function(ve){if(Array.isArray(ve))return ve}(be)||function(ve,Fe){var Le=ve==null?null:typeof Symbol!="undefined"&&ve[Symbol.iterator]||ve["@@iterator"];if(Le!=null){var Ie,Ke,bt,ot,Ot=[],Dt=!0,Ze=!1;try{if(bt=(Le=Le.call(ve)).next,Fe===0){if(Object(Le)!==Le)return;Dt=!1}else for(;!(Dt=(Ie=bt.call(Le)).done)&&(Ot.push(Ie.value),Ot.length!==Fe);Dt=!0);}catch(Ye){Ze=!0,Ke=Ye}finally{try{if(!Dt&&Le.return!=null&&(ot=Le.return(),Object(ot)!==ot))return}finally{if(Ze)throw Ke}}return Ot}}(be,ce)||V(be,ce)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function V(be,ce){if(be){if(typeof be=="string")return J(be,ce);var ve=Object.prototype.toString.call(be).slice(8,-1);return ve==="Object"&&be.constructor&&(ve=be.constructor.name),ve==="Map"||ve==="Set"?Array.from(be):ve==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ve)?J(be,ce):void 0}}function J(be,ce){(ce==null||ce>be.length)&&(ce=be.length);for(var ve=0,Fe=new Array(ce);ve<ce;ve++)Fe[ve]=be[ve];return Fe}var re=(0,l.forwardRef)(function(be,ce){var ve=be.value,Fe=be.length,Le=be.validChars,Ie=be.placeholder,Ke=be.autoFocus,bt=be.passwordMode,ot=be.inputProps,Ot=be.containerProps,Dt=be.classNames,Ze=be.onChange,Ye=be.onFocus,De=be.onBlur,_t=be.onComplete,mt=F((0,l.useState)(""),2),Et=mt[0],jt=mt[1],en=F((0,l.useState)(!1),2),nn=en[0],vn=en[1],Bt=(0,l.useRef)(null);(0,l.useEffect)(function(){Ke&&Bt.current.focus()},[Ke]);var xn,Xn=function(){Bt.current.focus()},Rt=function(){return ve!=null?ve:Et},Qn=function(Xe){var gt=Rt();return(gt.length===Xe||gt.length===Xe+1&&Fe===Xe+1)&&nn},zn=function(Xe){return Rt().length<Xe},Fr=function(Xe){return Rt().length>Xe},tn=ot.className,Wn=ot.type,wr=R(ot,q),Se=Ot.className,Ge=R(Ot,L);return _().createElement(_().Fragment,null,_().createElement("div",K({"data-testid":"container",className:C()("vi__container",Dt.container,Se),onClick:function(){return Bt.current.focus()}},Ge),_().createElement("input",K({"aria-label":"verification input",spellCheck:!1,value:Rt(),onChange:function(Xe){var gt=Xe.target.value.replace(/\s/g,"");RegExp("^[".concat(Le,"]{0,").concat(Fe,"}$")).test(gt)&&(Ze&&(Ze==null||Ze(gt)),jt(gt),gt.length===Fe&&(_t==null||_t(gt)))},ref:function(Xe){Bt.current=Xe,typeof ce=="function"?ce(Xe):ce&&(ce.current=Xe)},className:C()("vi",tn),onKeyDown:function(Xe){["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(Xe.key)&&Xe.preventDefault()},onFocus:function(){vn(!0),Ye==null||Ye()},onBlur:function(){vn(!1),De==null||De()},onSelect:function(Xe){var gt=Xe.target.value;Xe.target.setSelectionRange(gt.length,gt.length)},type:bt?"password":Wn},wr)),(xn=Array(Fe),function(Xe){if(Array.isArray(Xe))return J(Xe)}(xn)||function(Xe){if(typeof Symbol!="undefined"&&Xe[Symbol.iterator]!=null||Xe["@@iterator"]!=null)return Array.from(Xe)}(xn)||V(xn)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()).map(function(Xe,gt){return _().createElement("div",{className:C()("vi__character",Dt.character,{"vi__character--selected":Qn(gt),"vi__character--inactive":zn(gt),"vi__character--filled":Fr(gt)},Qn(gt)&&Dt.characterSelected,zn(gt)&&Dt.characterInactive,Fr(gt)&&Dt.characterFilled),onClick:Xn,id:"field-".concat(gt),"data-testid":"character-".concat(gt),key:gt},bt&&Rt()[gt]?"*":Rt()[gt]||Ie)})),_().createElement("style",{dangerouslySetInnerHTML:{__html:U.Z}}))});re.displayName="VerificationInput",re.propTypes={value:D().string,length:D().number,validChars:D().string,placeholder:D().string,autoFocus:D().bool,passwordMode:D().bool,inputProps:D().object,containerProps:D().object,classNames:D().shape({container:D().string,character:D().string,characterInactive:D().string,characterSelected:D().string,characterFilled:D().string}),onChange:D().func,onFocus:D().func,onBlur:D().func,onComplete:D().func},re.defaultProps={length:6,validChars:"A-Za-z0-9",placeholder:"\xB7",autoFocus:!1,inputProps:{},containerProps:{},classNames:{}};const fe=re})();var d=e;for(var x in u)d[x]=u[x];u.__esModule&&Object.defineProperty(d,"__esModule",{value:!0})})()})(Rk);var NO=Ww(Rk),J2={exports:{}},Ok=function(t,r){return function(){for(var u=new Array(arguments.length),d=0;d<u.length;d++)u[d]=arguments[d];return t.apply(r,u)}},LO=Ok,Q2=Object.prototype.toString,eE=function(e){return function(t){var r=Q2.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())}}(Object.create(null));function bu(e){return e=e.toLowerCase(),function(r){return eE(r)===e}}function tE(e){return Array.isArray(e)}function V1(e){return typeof e=="undefined"}function FO(e){return e!==null&&!V1(e)&&e.constructor!==null&&!V1(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}var Bk=bu("ArrayBuffer");function RO(e){var t;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Bk(e.buffer),t}function OO(e){return typeof e=="string"}function BO(e){return typeof e=="number"}function $k(e){return e!==null&&typeof e=="object"}function i1(e){if(eE(e)!=="object")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}var $O=bu("Date"),jO=bu("File"),UO=bu("Blob"),VO=bu("FileList");function nE(e){return Q2.call(e)==="[object Function]"}function GO(e){return $k(e)&&nE(e.pipe)}function qO(e){var t="[object FormData]";return e&&(typeof FormData=="function"&&e instanceof FormData||Q2.call(e)===t||nE(e.toString)&&e.toString()===t)}var HO=bu("URLSearchParams");function WO(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function ZO(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function rE(e,t){if(!(e===null||typeof e=="undefined"))if(typeof e!="object"&&(e=[e]),tE(e))for(var r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else for(var u in e)Object.prototype.hasOwnProperty.call(e,u)&&t.call(null,e[u],u,e)}function nw(){var e={};function t(u,d){i1(e[d])&&i1(u)?e[d]=nw(e[d],u):i1(u)?e[d]=nw({},u):tE(u)?e[d]=u.slice():e[d]=u}for(var r=0,s=arguments.length;r<s;r++)rE(arguments[r],t);return e}function XO(e,t,r){return rE(t,function(u,d){r&&typeof u=="function"?e[d]=LO(u,r):e[d]=u}),e}function KO(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}function YO(e,t,r,s){e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,r&&Object.assign(e.prototype,r)}function JO(e,t,r){var s,u,d,x={};t=t||{};do{for(s=Object.getOwnPropertyNames(e),u=s.length;u-- >0;)d=s[u],x[d]||(t[d]=e[d],x[d]=!0);e=Object.getPrototypeOf(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t}function QO(e,t,r){e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;var s=e.indexOf(t,r);return s!==-1&&s===r}function eB(e){if(!e)return null;var t=e.length;if(V1(t))return null;for(var r=new Array(t);t-- >0;)r[t]=e[t];return r}var tB=function(e){return function(t){return e&&t instanceof e}}(typeof Uint8Array!="undefined"&&Object.getPrototypeOf(Uint8Array)),Ti={isArray:tE,isArrayBuffer:Bk,isBuffer:FO,isFormData:qO,isArrayBufferView:RO,isString:OO,isNumber:BO,isObject:$k,isPlainObject:i1,isUndefined:V1,isDate:$O,isFile:jO,isBlob:UO,isFunction:nE,isStream:GO,isURLSearchParams:HO,isStandardBrowserEnv:ZO,forEach:rE,merge:nw,extend:XO,trim:WO,stripBOM:KO,inherits:YO,toFlatObject:JO,kindOf:eE,kindOfTest:bu,endsWith:QO,toArray:eB,isTypedArray:tB,isFileList:VO},Sh=Ti;function K3(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var jk=function(t,r,s){if(!r)return t;var u;if(s)u=s(r);else if(Sh.isURLSearchParams(r))u=r.toString();else{var d=[];Sh.forEach(r,function(_,S){_===null||typeof _=="undefined"||(Sh.isArray(_)?S=S+"[]":_=[_],Sh.forEach(_,function(k){Sh.isDate(k)?k=k.toISOString():Sh.isObject(k)&&(k=JSON.stringify(k)),d.push(K3(S)+"="+K3(k))}))}),u=d.join("&")}if(u){var x=t.indexOf("#");x!==-1&&(t=t.slice(0,x)),t+=(t.indexOf("?")===-1?"?":"&")+u}return t},nB=Ti;function rx(){this.handlers=[]}rx.prototype.use=function(t,r,s){return this.handlers.push({fulfilled:t,rejected:r,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1};rx.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};rx.prototype.forEach=function(t){nB.forEach(this.handlers,function(s){s!==null&&t(s)})};var rB=rx,iB=Ti,oB=function(t,r){iB.forEach(t,function(u,d){d!==r&&d.toUpperCase()===r.toUpperCase()&&(t[r]=u,delete t[d])})},Uk=Ti;function ud(e,t,r,s,u){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),s&&(this.request=s),u&&(this.response=u)}Uk.inherits(ud,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var Vk=ud.prototype,Gk={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(e){Gk[e]={value:e}});Object.defineProperties(ud,Gk);Object.defineProperty(Vk,"isAxiosError",{value:!0});ud.from=function(e,t,r,s,u,d){var x=Object.create(Vk);return Uk.toFlatObject(e,x,function(_){return _!==Error.prototype}),ud.call(x,e.message,t,r,s,u),x.name=e.name,d&&Object.assign(x,d),x};var Cd=ud,qk={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ds=Ti;function sB(e,t){t=t||new FormData;var r=[];function s(d){return d===null?"":Ds.isDate(d)?d.toISOString():Ds.isArrayBuffer(d)||Ds.isTypedArray(d)?typeof Blob=="function"?new Blob([d]):Buffer.from(d):d}function u(d,x){if(Ds.isPlainObject(d)||Ds.isArray(d)){if(r.indexOf(d)!==-1)throw Error("Circular reference detected in "+x);r.push(d),Ds.forEach(d,function(_,S){if(!Ds.isUndefined(_)){var C=x?x+"."+S:S,k;if(_&&!x&&typeof _=="object"){if(Ds.endsWith(S,"{}"))_=JSON.stringify(_);else if(Ds.endsWith(S,"[]")&&(k=Ds.toArray(_))){k.forEach(function(D){!Ds.isUndefined(D)&&t.append(C,s(D))});return}}u(_,C)}}),r.pop()}else t.append(x,s(d))}return u(e),t}var Hk=sB,Dv=Cd,aB=function(t,r,s){var u=s.config.validateStatus;!s.status||!u||u(s.status)?t(s):r(new Dv("Request failed with status code "+s.status,[Dv.ERR_BAD_REQUEST,Dv.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))},P0=Ti,lB=P0.isStandardBrowserEnv()?function(){return{write:function(r,s,u,d,x,l){var _=[];_.push(r+"="+encodeURIComponent(s)),P0.isNumber(u)&&_.push("expires="+new Date(u).toGMTString()),P0.isString(d)&&_.push("path="+d),P0.isString(x)&&_.push("domain="+x),l===!0&&_.push("secure"),document.cookie=_.join("; ")},read:function(r){var s=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),cB=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)},uB=function(t,r){return r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t},hB=cB,dB=uB,Wk=function(t,r){return t&&!hB(r)?dB(t,r):r},zv=Ti,pB=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],fB=function(t){var r={},s,u,d;return t&&zv.forEach(t.split(`
`),function(l){if(d=l.indexOf(":"),s=zv.trim(l.substr(0,d)).toLowerCase(),u=zv.trim(l.substr(d+1)),s){if(r[s]&&pB.indexOf(s)>=0)return;s==="set-cookie"?r[s]=(r[s]?r[s]:[]).concat([u]):r[s]=r[s]?r[s]+", "+u:u}}),r},Y3=Ti,mB=Y3.isStandardBrowserEnv()?function(){var t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),s;function u(d){var x=d;return t&&(r.setAttribute("href",x),x=r.href),r.setAttribute("href",x),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return s=u(window.location.href),function(x){var l=Y3.isString(x)?u(x):x;return l.protocol===s.protocol&&l.host===s.host}}():function(){return function(){return!0}}(),rw=Cd,gB=Ti;function Zk(e){rw.call(this,e==null?"canceled":e,rw.ERR_CANCELED),this.name="CanceledError"}gB.inherits(Zk,rw,{__CANCEL__:!0});var ix=Zk,yB=function(t){var r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return r&&r[1]||""},Sf=Ti,xB=aB,_B=lB,vB=jk,bB=Wk,wB=fB,EB=mB,TB=qk,za=Cd,SB=ix,CB=yB,J3=function(t){return new Promise(function(s,u){var d=t.data,x=t.headers,l=t.responseType,_;function S(){t.cancelToken&&t.cancelToken.unsubscribe(_),t.signal&&t.signal.removeEventListener("abort",_)}Sf.isFormData(d)&&Sf.isStandardBrowserEnv()&&delete x["Content-Type"];var C=new XMLHttpRequest;if(t.auth){var k=t.auth.username||"",D=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";x.Authorization="Basic "+btoa(k+":"+D)}var U=bB(t.baseURL,t.url);C.open(t.method.toUpperCase(),vB(U,t.params,t.paramsSerializer),!0),C.timeout=t.timeout;function q(){if(!!C){var R="getAllResponseHeaders"in C?wB(C.getAllResponseHeaders()):null,F=!l||l==="text"||l==="json"?C.responseText:C.response,V={data:F,status:C.status,statusText:C.statusText,headers:R,config:t,request:C};xB(function(re){s(re),S()},function(re){u(re),S()},V),C=null}}if("onloadend"in C?C.onloadend=q:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(q)},C.onabort=function(){!C||(u(new za("Request aborted",za.ECONNABORTED,t,C)),C=null)},C.onerror=function(){u(new za("Network Error",za.ERR_NETWORK,t,C,C)),C=null},C.ontimeout=function(){var F=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",V=t.transitional||TB;t.timeoutErrorMessage&&(F=t.timeoutErrorMessage),u(new za(F,V.clarifyTimeoutError?za.ETIMEDOUT:za.ECONNABORTED,t,C)),C=null},Sf.isStandardBrowserEnv()){var L=(t.withCredentials||EB(U))&&t.xsrfCookieName?_B.read(t.xsrfCookieName):void 0;L&&(x[t.xsrfHeaderName]=L)}"setRequestHeader"in C&&Sf.forEach(x,function(F,V){typeof d=="undefined"&&V.toLowerCase()==="content-type"?delete x[V]:C.setRequestHeader(V,F)}),Sf.isUndefined(t.withCredentials)||(C.withCredentials=!!t.withCredentials),l&&l!=="json"&&(C.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&C.addEventListener("progress",t.onDownloadProgress),typeof t.onUploadProgress=="function"&&C.upload&&C.upload.addEventListener("progress",t.onUploadProgress),(t.cancelToken||t.signal)&&(_=function(R){!C||(u(!R||R&&R.type?new SB:R),C.abort(),C=null)},t.cancelToken&&t.cancelToken.subscribe(_),t.signal&&(t.signal.aborted?_():t.signal.addEventListener("abort",_))),d||(d=null);var K=CB(U);if(K&&["http","https","file"].indexOf(K)===-1){u(new za("Unsupported protocol "+K+":",za.ERR_BAD_REQUEST,t));return}C.send(d)})},AB=null,ui=Ti,Q3=oB,e4=Cd,MB=qk,kB=Hk,PB={"Content-Type":"application/x-www-form-urlencoded"};function t4(e,t){!ui.isUndefined(e)&&ui.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function IB(){var e;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(e=J3),e}function DB(e,t,r){if(ui.isString(e))try{return(t||JSON.parse)(e),ui.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(r||JSON.stringify)(e)}var ox={transitional:MB,adapter:IB(),transformRequest:[function(t,r){if(Q3(r,"Accept"),Q3(r,"Content-Type"),ui.isFormData(t)||ui.isArrayBuffer(t)||ui.isBuffer(t)||ui.isStream(t)||ui.isFile(t)||ui.isBlob(t))return t;if(ui.isArrayBufferView(t))return t.buffer;if(ui.isURLSearchParams(t))return t4(r,"application/x-www-form-urlencoded;charset=utf-8"),t.toString();var s=ui.isObject(t),u=r&&r["Content-Type"],d;if((d=ui.isFileList(t))||s&&u==="multipart/form-data"){var x=this.env&&this.env.FormData;return kB(d?{"files[]":t}:t,x&&new x)}else if(s||u==="application/json")return t4(r,"application/json"),DB(t);return t}],transformResponse:[function(t){var r=this.transitional||ox.transitional,s=r&&r.silentJSONParsing,u=r&&r.forcedJSONParsing,d=!s&&this.responseType==="json";if(d||u&&ui.isString(t)&&t.length)try{return JSON.parse(t)}catch(x){if(d)throw x.name==="SyntaxError"?e4.from(x,e4.ERR_BAD_RESPONSE,this,null,this.response):x}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:AB},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};ui.forEach(["delete","get","head"],function(t){ox.headers[t]={}});ui.forEach(["post","put","patch"],function(t){ox.headers[t]=ui.merge(PB)});var iE=ox,zB=Ti,NB=iE,LB=function(t,r,s){var u=this||NB;return zB.forEach(s,function(x){t=x.call(u,t,r)}),t},Xk=function(t){return!!(t&&t.__CANCEL__)},n4=Ti,Nv=LB,FB=Xk,RB=iE,OB=ix;function Lv(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new OB}var BB=function(t){Lv(t),t.headers=t.headers||{},t.data=Nv.call(t,t.data,t.headers,t.transformRequest),t.headers=n4.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),n4.forEach(["delete","get","head","post","put","patch","common"],function(u){delete t.headers[u]});var r=t.adapter||RB.adapter;return r(t).then(function(u){return Lv(t),u.data=Nv.call(t,u.data,u.headers,t.transformResponse),u},function(u){return FB(u)||(Lv(t),u&&u.response&&(u.response.data=Nv.call(t,u.response.data,u.response.headers,t.transformResponse))),Promise.reject(u)})},So=Ti,Kk=function(t,r){r=r||{};var s={};function u(C,k){return So.isPlainObject(C)&&So.isPlainObject(k)?So.merge(C,k):So.isPlainObject(k)?So.merge({},k):So.isArray(k)?k.slice():k}function d(C){if(So.isUndefined(r[C])){if(!So.isUndefined(t[C]))return u(void 0,t[C])}else return u(t[C],r[C])}function x(C){if(!So.isUndefined(r[C]))return u(void 0,r[C])}function l(C){if(So.isUndefined(r[C])){if(!So.isUndefined(t[C]))return u(void 0,t[C])}else return u(void 0,r[C])}function _(C){if(C in r)return u(t[C],r[C]);if(C in t)return u(void 0,t[C])}var S={url:x,method:x,data:x,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:_};return So.forEach(Object.keys(t).concat(Object.keys(r)),function(k){var D=S[k]||d,U=D(k);So.isUndefined(U)&&D!==_||(s[k]=U)}),s},Yk={version:"0.27.2"},$B=Yk.version,zl=Cd,oE={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){oE[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});var r4={};oE.transitional=function(t,r,s){function u(d,x){return"[Axios v"+$B+"] Transitional option '"+d+"'"+x+(s?". "+s:"")}return function(d,x,l){if(t===!1)throw new zl(u(x," has been removed"+(r?" in "+r:"")),zl.ERR_DEPRECATED);return r&&!r4[x]&&(r4[x]=!0,console.warn(u(x," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(d,x,l):!0}};function jB(e,t,r){if(typeof e!="object")throw new zl("options must be an object",zl.ERR_BAD_OPTION_VALUE);for(var s=Object.keys(e),u=s.length;u-- >0;){var d=s[u],x=t[d];if(x){var l=e[d],_=l===void 0||x(l,d,e);if(_!==!0)throw new zl("option "+d+" must be "+_,zl.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new zl("Unknown option "+d,zl.ERR_BAD_OPTION)}}var UB={assertOptions:jB,validators:oE},Jk=Ti,VB=jk,i4=rB,o4=BB,sx=Kk,GB=Wk,Qk=UB,Ch=Qk.validators;function hd(e){this.defaults=e,this.interceptors={request:new i4,response:new i4}}hd.prototype.request=function(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=sx(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var s=r.transitional;s!==void 0&&Qk.assertOptions(s,{silentJSONParsing:Ch.transitional(Ch.boolean),forcedJSONParsing:Ch.transitional(Ch.boolean),clarifyTimeoutError:Ch.transitional(Ch.boolean)},!1);var u=[],d=!0;this.interceptors.request.forEach(function(U){typeof U.runWhen=="function"&&U.runWhen(r)===!1||(d=d&&U.synchronous,u.unshift(U.fulfilled,U.rejected))});var x=[];this.interceptors.response.forEach(function(U){x.push(U.fulfilled,U.rejected)});var l;if(!d){var _=[o4,void 0];for(Array.prototype.unshift.apply(_,u),_=_.concat(x),l=Promise.resolve(r);_.length;)l=l.then(_.shift(),_.shift());return l}for(var S=r;u.length;){var C=u.shift(),k=u.shift();try{S=C(S)}catch(D){k(D);break}}try{l=o4(S)}catch(D){return Promise.reject(D)}for(;x.length;)l=l.then(x.shift(),x.shift());return l};hd.prototype.getUri=function(t){t=sx(this.defaults,t);var r=GB(t.baseURL,t.url);return VB(r,t.params,t.paramsSerializer)};Jk.forEach(["delete","get","head","options"],function(t){hd.prototype[t]=function(r,s){return this.request(sx(s||{},{method:t,url:r,data:(s||{}).data}))}});Jk.forEach(["post","put","patch"],function(t){function r(s){return function(d,x,l){return this.request(sx(l||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:d,data:x}))}}hd.prototype[t]=r(),hd.prototype[t+"Form"]=r(!0)});var qB=hd,HB=ix;function dd(e){if(typeof e!="function")throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(u){t=u});var r=this;this.promise.then(function(s){if(!!r._listeners){var u,d=r._listeners.length;for(u=0;u<d;u++)r._listeners[u](s);r._listeners=null}}),this.promise.then=function(s){var u,d=new Promise(function(x){r.subscribe(x),u=x}).then(s);return d.cancel=function(){r.unsubscribe(u)},d},e(function(u){r.reason||(r.reason=new HB(u),t(r.reason))})}dd.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};dd.prototype.subscribe=function(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]};dd.prototype.unsubscribe=function(t){if(!!this._listeners){var r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}};dd.source=function(){var t,r=new dd(function(u){t=u});return{token:r,cancel:t}};var WB=dd,ZB=function(t){return function(s){return t.apply(null,s)}},XB=Ti,KB=function(t){return XB.isObject(t)&&t.isAxiosError===!0},s4=Ti,YB=Ok,o1=qB,JB=Kk,QB=iE;function eP(e){var t=new o1(e),r=YB(o1.prototype.request,t);return s4.extend(r,o1.prototype,t),s4.extend(r,t),r.create=function(u){return eP(JB(e,u))},r}var go=eP(QB);go.Axios=o1;go.CanceledError=ix;go.CancelToken=WB;go.isCancel=Xk;go.VERSION=Yk.version;go.toFormData=Hk;go.AxiosError=Cd;go.Cancel=go.CanceledError;go.all=function(t){return Promise.all(t)};go.spread=ZB;go.isAxiosError=KB;J2.exports=go;J2.exports.default=go;var ax=J2.exports;const Ur={TOKEN:"jwt",USER:"user"},sE=[{id:1,label:"M\u1EDF c\u1EEDa",name:"timeStatus",value:"open"},{id:2,label:"\u0110\xF3ng c\u1EEDa",name:"timeStatus",value:"close"}],e7=e=>{switch(e){case 0:return"bg-virtual-gradient-webkit bg-virtual-gradient";case 1:return"bg-date-gradient-webkit bg-date-gradient";case 2:return"bg-work-gradient-webkit bg-work-gradient";case 3:return"bg-read-gradient-webkit bg-read-gradient";case 4:return"bg-chill-gradient-webkit bg-chill-gradient"}},iw=e=>e>0&&e<768?1:e>=768&&e<998?2:3,t7=(e,t)=>t<4?t:e>0&&e<998?4:5,ow=e=>e>0&&e<768?2:e>=768&&e<998?3:4,Fs=e=>!localStorage.getItem(e)||localStorage.getItem(e)==="undefined"?null:JSON.parse(localStorage.getItem(e)),Nl=(e,t)=>localStorage.setItem(e,JSON.stringify(t)),G1=e=>localStorage.removeItem(e),q1=(e,t)=>{const r=new Date,s=r.getHours()*36e5+r.getMinutes()*6e4+r.getSeconds()*1e3,u=e*1e3,d=t*1e3;return s>=u&&s<=d},H1=e=>{const t=new Date,r=`0${t.getDate()}`.slice(-2),s=`0${t.getMonth()+1}`.slice(-2),u=`0${t.getFullYear()}`.slice(-4),d=`${s}/${r}/${u}`,x=e,l=`0${x.split("/")[0]}`.slice(-2),_=`0${x.split("/")[1]}`.slice(-2),S=`0${x.split("/")[2]}`.slice(-4),C=`${l}/${_}/${S}`,k=new Date(C),q=(new Date(d).getTime()-k.getTime())/(1e3*3600*24);return q>0?`t\u1EEB ${q} ng\xE0y tr\u01B0\u1EDBc`:"trong h\xF4m nay"};function a4(e){return new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e)}function W1(e){if(!e)return;const[t,r]=e.split(":").map(Number);return t*3600+r*60}function pd(e){let t=Math.floor(e/3600),r=Math.floor(e%3600/60);return t=t<10?"0"+t:t,r=r<10?"0"+r:r,t+":"+r}ax.defaults.withCredentials=!0;ax.defaults.xsrfHeaderName="X-CSRFTOKEN";ax.defaults.xsrfCookieName="csrftoken";const wn=ax.create({baseURL:"http://be-cafe-env-1.eba-pb8qynrr.ap-southeast-1.elasticbeanstalk.com/api/v1",headers:{"Content-type":"application/json"}});wn.interceptors.request.use(function(e){const t=Fs(Ur.TOKEN);return t&&e.headers&&(e.headers.Authorization=`Bearer ${t}`),e},function(e){return Promise.reject(e)});wn.interceptors.response.use(function(e){return e.data},function(e){var r,s,u;const t=(s=(r=e==null?void 0:e.response)==null?void 0:r.data)==null?void 0:s.message;if(e.code==="ERR_BAD_REQUEST"&&((u=e==null?void 0:e.response)==null?void 0:u.status)===401&&t==="Full authentication is required to access this resource")throw G1(Ur.USER),G1(Ur.TOKEN),window.location.href="/",new Error(t);return t&&(e.message=t),Promise.reject(e)});const Zi={login(e){const t="/auth/login";return wn.post(t,e)},signup(e){const t="/auth/signup";return wn.post(t,e)},logout(){const e="/auth/logout";return wn.get(e)},validateRegistration(e){const t="/auth/validateRegister";return wn.post(t,e)},forgotPasswords(e){const t="/auth/forgotPassword";return wn.post(t,e)},validateResetPassword(e){const t="/auth/validateReset";return wn.post(t,e)},getBySlug(e){const t=`/auth/users/profile/${e}`;return wn.get(t)},handleResetPassword(e){const t="/auth/resetPassword";return wn.post(t,e)},getAll(e){const t="/auth/users";return wn.get(t,{params:e})},uploadAvatar(e,t){const r=`/auth/avatar/${e}`;return wn.post(r,t,{headers:{"Content-Type":"multipart/form-data"}})},updateUser(e,t){const r=`/auth/update/${e}`;return wn.patch(r,t)},changePassword(e){const t="/auth/changePassword";return wn.post(t,e)}};var aE={},n7=e=>encodeURIComponent(e).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),tP="%[a-f0-9]{2}",l4=new RegExp("("+tP+")|([^%]+?)","gi"),c4=new RegExp("("+tP+")+","gi");function sw(e,t){try{return[decodeURIComponent(e.join(""))]}catch{}if(e.length===1)return e;t=t||1;var r=e.slice(0,t),s=e.slice(t);return Array.prototype.concat.call([],sw(r),sw(s))}function r7(e){try{return decodeURIComponent(e)}catch{for(var t=e.match(l4)||[],r=1;r<t.length;r++)e=sw(t,r).join(""),t=e.match(l4)||[];return e}}function i7(e){for(var t={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},r=c4.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch{var s=r7(r[0]);s!==r[0]&&(t[r[0]]=s)}r=c4.exec(e)}t["%C2"]="\uFFFD";for(var u=Object.keys(t),d=0;d<u.length;d++){var x=u[d];e=e.replace(new RegExp(x,"g"),t[x])}return e}var o7=function(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch{return i7(e)}},s7=(e,t)=>{if(!(typeof e=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t==="")return[e];const r=e.indexOf(t);return r===-1?[e]:[e.slice(0,r),e.slice(r+t.length)]},a7=function(e,t){for(var r={},s=Object.keys(e),u=Array.isArray(t),d=0;d<s.length;d++){var x=s[d],l=e[x];(u?t.indexOf(x)!==-1:t(x,l,e))&&(r[x]=l)}return r};(function(e){const t=n7,r=o7,s=s7,u=a7,d=F=>F==null,x=Symbol("encodeFragmentIdentifier");function l(F){switch(F.arrayFormat){case"index":return V=>(J,re)=>{const fe=J.length;return re===void 0||F.skipNull&&re===null||F.skipEmptyString&&re===""?J:re===null?[...J,[C(V,F),"[",fe,"]"].join("")]:[...J,[C(V,F),"[",C(fe,F),"]=",C(re,F)].join("")]};case"bracket":return V=>(J,re)=>re===void 0||F.skipNull&&re===null||F.skipEmptyString&&re===""?J:re===null?[...J,[C(V,F),"[]"].join("")]:[...J,[C(V,F),"[]=",C(re,F)].join("")];case"colon-list-separator":return V=>(J,re)=>re===void 0||F.skipNull&&re===null||F.skipEmptyString&&re===""?J:re===null?[...J,[C(V,F),":list="].join("")]:[...J,[C(V,F),":list=",C(re,F)].join("")];case"comma":case"separator":case"bracket-separator":{const V=F.arrayFormat==="bracket-separator"?"[]=":"=";return J=>(re,fe)=>fe===void 0||F.skipNull&&fe===null||F.skipEmptyString&&fe===""?re:(fe=fe===null?"":fe,re.length===0?[[C(J,F),V,C(fe,F)].join("")]:[[re,C(fe,F)].join(F.arrayFormatSeparator)])}default:return V=>(J,re)=>re===void 0||F.skipNull&&re===null||F.skipEmptyString&&re===""?J:re===null?[...J,C(V,F)]:[...J,[C(V,F),"=",C(re,F)].join("")]}}function _(F){let V;switch(F.arrayFormat){case"index":return(J,re,fe)=>{if(V=/\[(\d*)\]$/.exec(J),J=J.replace(/\[\d*\]$/,""),!V){fe[J]=re;return}fe[J]===void 0&&(fe[J]={}),fe[J][V[1]]=re};case"bracket":return(J,re,fe)=>{if(V=/(\[\])$/.exec(J),J=J.replace(/\[\]$/,""),!V){fe[J]=re;return}if(fe[J]===void 0){fe[J]=[re];return}fe[J]=[].concat(fe[J],re)};case"colon-list-separator":return(J,re,fe)=>{if(V=/(:list)$/.exec(J),J=J.replace(/:list$/,""),!V){fe[J]=re;return}if(fe[J]===void 0){fe[J]=[re];return}fe[J]=[].concat(fe[J],re)};case"comma":case"separator":return(J,re,fe)=>{const be=typeof re=="string"&&re.includes(F.arrayFormatSeparator),ce=typeof re=="string"&&!be&&k(re,F).includes(F.arrayFormatSeparator);re=ce?k(re,F):re;const ve=be||ce?re.split(F.arrayFormatSeparator).map(Fe=>k(Fe,F)):re===null?re:k(re,F);fe[J]=ve};case"bracket-separator":return(J,re,fe)=>{const be=/(\[\])$/.test(J);if(J=J.replace(/\[\]$/,""),!be){fe[J]=re&&k(re,F);return}const ce=re===null?[]:re.split(F.arrayFormatSeparator).map(ve=>k(ve,F));if(fe[J]===void 0){fe[J]=ce;return}fe[J]=[].concat(fe[J],ce)};default:return(J,re,fe)=>{if(fe[J]===void 0){fe[J]=re;return}fe[J]=[].concat(fe[J],re)}}}function S(F){if(typeof F!="string"||F.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function C(F,V){return V.encode?V.strict?t(F):encodeURIComponent(F):F}function k(F,V){return V.decode?r(F):F}function D(F){return Array.isArray(F)?F.sort():typeof F=="object"?D(Object.keys(F)).sort((V,J)=>Number(V)-Number(J)).map(V=>F[V]):F}function U(F){const V=F.indexOf("#");return V!==-1&&(F=F.slice(0,V)),F}function q(F){let V="";const J=F.indexOf("#");return J!==-1&&(V=F.slice(J)),V}function L(F){F=U(F);const V=F.indexOf("?");return V===-1?"":F.slice(V+1)}function K(F,V){return V.parseNumbers&&!Number.isNaN(Number(F))&&typeof F=="string"&&F.trim()!==""?F=Number(F):V.parseBooleans&&F!==null&&(F.toLowerCase()==="true"||F.toLowerCase()==="false")&&(F=F.toLowerCase()==="true"),F}function R(F,V){V=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},V),S(V.arrayFormatSeparator);const J=_(V),re=Object.create(null);if(typeof F!="string"||(F=F.trim().replace(/^[?#&]/,""),!F))return re;for(const fe of F.split("&")){if(fe==="")continue;let[be,ce]=s(V.decode?fe.replace(/\+/g," "):fe,"=");ce=ce===void 0?null:["comma","separator","bracket-separator"].includes(V.arrayFormat)?ce:k(ce,V),J(k(be,V),ce,re)}for(const fe of Object.keys(re)){const be=re[fe];if(typeof be=="object"&&be!==null)for(const ce of Object.keys(be))be[ce]=K(be[ce],V);else re[fe]=K(be,V)}return V.sort===!1?re:(V.sort===!0?Object.keys(re).sort():Object.keys(re).sort(V.sort)).reduce((fe,be)=>{const ce=re[be];return Boolean(ce)&&typeof ce=="object"&&!Array.isArray(ce)?fe[be]=D(ce):fe[be]=ce,fe},Object.create(null))}e.extract=L,e.parse=R,e.stringify=(F,V)=>{if(!F)return"";V=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},V),S(V.arrayFormatSeparator);const J=ce=>V.skipNull&&d(F[ce])||V.skipEmptyString&&F[ce]==="",re=l(V),fe={};for(const ce of Object.keys(F))J(ce)||(fe[ce]=F[ce]);const be=Object.keys(fe);return V.sort!==!1&&be.sort(V.sort),be.map(ce=>{const ve=F[ce];return ve===void 0?"":ve===null?C(ce,V):Array.isArray(ve)?ve.length===0&&V.arrayFormat==="bracket-separator"?C(ce,V)+"[]":ve.reduce(re(ce),[]).join("&"):C(ce,V)+"="+C(ve,V)}).filter(ce=>ce.length>0).join("&")},e.parseUrl=(F,V)=>{V=Object.assign({decode:!0},V);const[J,re]=s(F,"#");return Object.assign({url:J.split("?")[0]||"",query:R(L(F),V)},V&&V.parseFragmentIdentifier&&re?{fragmentIdentifier:k(re,V)}:{})},e.stringifyUrl=(F,V)=>{V=Object.assign({encode:!0,strict:!0,[x]:!0},V);const J=U(F.url).split("?")[0]||"",re=e.extract(F.url),fe=e.parse(re,{sort:!1}),be=Object.assign(fe,F.query);let ce=e.stringify(be,V);ce&&(ce=`?${ce}`);let ve=q(F.url);return F.fragmentIdentifier&&(ve=`#${V[x]?C(F.fragmentIdentifier,V):F.fragmentIdentifier}`),`${J}${ce}${ve}`},e.pick=(F,V,J)=>{J=Object.assign({parseFragmentIdentifier:!0,[x]:!1},J);const{url:re,query:fe,fragmentIdentifier:be}=e.parseUrl(F,J);return e.stringifyUrl({url:re,query:u(fe,V),fragmentIdentifier:be},J)},e.exclude=(F,V,J)=>{const re=Array.isArray(V)?fe=>!V.includes(fe):(fe,be)=>!V(fe,be);return e.pick(F,re,J)}})(aE);var km=e=>e.type==="checkbox",Gh=e=>e instanceof Date,Vi=e=>e==null;const nP=e=>typeof e=="object";var Yr=e=>!Vi(e)&&!Array.isArray(e)&&nP(e)&&!Gh(e),rP=e=>Yr(e)&&e.target?km(e.target)?e.target.checked:e.target.value:e,l7=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,iP=(e,t)=>e.has(l7(t)),c7=e=>{const t=e.constructor&&e.constructor.prototype;return Yr(t)&&t.hasOwnProperty("isPrototypeOf")},lE=typeof window!="undefined"&&typeof window.HTMLElement!="undefined"&&typeof document!="undefined";function co(e){let t;const r=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(lE&&(e instanceof Blob||e instanceof FileList))&&(r||Yr(e)))if(t=r?[]:{},!r&&!c7(e))t=e;else for(const s in e)e.hasOwnProperty(s)&&(t[s]=co(e[s]));else return e;return t}var Pm=e=>Array.isArray(e)?e.filter(Boolean):[],$r=e=>e===void 0,Ft=(e,t,r)=>{if(!t||!Yr(e))return r;const s=Pm(t.split(/[,[\].]+?/)).reduce((u,d)=>Vi(u)?u:u[d],e);return $r(s)||s===e?$r(e[t])?r:e[t]:s},Os=e=>typeof e=="boolean";const Z1={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Bs={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Na={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},u7=zt.createContext(null),cE=()=>zt.useContext(u7);var oP=(e,t,r,s=!0)=>{const u={defaultValues:t._defaultValues};for(const d in e)Object.defineProperty(u,d,{get:()=>{const x=d;return t._proxyFormState[x]!==Bs.all&&(t._proxyFormState[x]=!s||Bs.all),r&&(r[x]=!0),e[x]}});return u},ts=e=>Yr(e)&&!Object.keys(e).length,sP=(e,t,r,s)=>{r(e);const{name:u,...d}=e;return ts(d)||Object.keys(d).length>=Object.keys(t).length||Object.keys(d).find(x=>t[x]===(!s||Bs.all))},s1=e=>Array.isArray(e)?e:[e],aP=(e,t,r)=>!e||!t||e===t||s1(e).some(s=>s&&(r?s===t:s.startsWith(t)||t.startsWith(s)));function uE(e){const t=zt.useRef(e);t.current=e,zt.useEffect(()=>{const r=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{r&&r.unsubscribe()}},[e.disabled])}function h7(e){const t=cE(),{control:r=t.control,disabled:s,name:u,exact:d}=e||{},[x,l]=zt.useState(r._formState),_=zt.useRef(!0),S=zt.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),C=zt.useRef(u);return C.current=u,uE({disabled:s,next:k=>_.current&&aP(C.current,k.name,d)&&sP(k,S.current,r._updateFormState)&&l({...r._formState,...k}),subject:r._subjects.state}),zt.useEffect(()=>(_.current=!0,S.current.isValid&&r._updateValid(!0),()=>{_.current=!1}),[r]),oP(x,r,S.current,!1)}var aa=e=>typeof e=="string",lP=(e,t,r,s,u)=>aa(e)?(s&&t.watch.add(e),Ft(r,e,u)):Array.isArray(e)?e.map(d=>(s&&t.watch.add(d),Ft(r,d))):(s&&(t.watchAll=!0),r);function d7(e){const t=cE(),{control:r=t.control,name:s,defaultValue:u,disabled:d,exact:x}=e||{},l=zt.useRef(s);l.current=s,uE({disabled:d,subject:r._subjects.values,next:C=>{aP(l.current,C.name,x)&&S(co(lP(l.current,r._names,C.values||r._formValues,!1,u)))}});const[_,S]=zt.useState(r._getWatch(s,u));return zt.useEffect(()=>r._removeUnmounted()),_}var hE=e=>/^\w*$/.test(e),cP=e=>Pm(e.replace(/["|']|\]/g,"").split(/\.|\[/)),rr=(e,t,r)=>{let s=-1;const u=hE(t)?[t]:cP(t),d=u.length,x=d-1;for(;++s<d;){const l=u[s];let _=r;if(s!==x){const S=e[l];_=Yr(S)||Array.isArray(S)?S:isNaN(+u[s+1])?{}:[]}e[l]=_,e=e[l]}return e};function Ad(e){const t=cE(),{name:r,disabled:s,control:u=t.control,shouldUnregister:d}=e,x=iP(u._names.array,r),l=d7({control:u,name:r,defaultValue:Ft(u._formValues,r,Ft(u._defaultValues,r,e.defaultValue)),exact:!0}),_=h7({control:u,name:r}),S=zt.useRef(u.register(r,{...e.rules,value:l,...Os(e.disabled)?{disabled:e.disabled}:{}}));return zt.useEffect(()=>{const C=u._options.shouldUnregister||d,k=(D,U)=>{const q=Ft(u._fields,D);q&&(q._f.mount=U)};if(k(r,!0),C){const D=co(Ft(u._options.defaultValues,r));rr(u._defaultValues,r,D),$r(Ft(u._formValues,r))&&rr(u._formValues,r,D)}return()=>{(x?C&&!u._state.action:C)?u.unregister(r):k(r,!1)}},[r,u,x,d]),zt.useEffect(()=>{Ft(u._fields,r)&&u._updateDisabledField({disabled:s,fields:u._fields,name:r,value:Ft(u._fields,r)._f.value})},[s,r,u]),{field:{name:r,value:l,...Os(s)||_.disabled?{disabled:_.disabled||s}:{},onChange:zt.useCallback(C=>S.current.onChange({target:{value:rP(C),name:r},type:Z1.CHANGE}),[r]),onBlur:zt.useCallback(()=>S.current.onBlur({target:{value:Ft(u._formValues,r),name:r},type:Z1.BLUR}),[r,u]),ref:C=>{const k=Ft(u._fields,r);k&&C&&(k._f.ref={focus:()=>C.focus(),select:()=>C.select(),setCustomValidity:D=>C.setCustomValidity(D),reportValidity:()=>C.reportValidity()})}},formState:_,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Ft(_.errors,r)},isDirty:{enumerable:!0,get:()=>!!Ft(_.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!Ft(_.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!Ft(_.validatingFields,r)},error:{enumerable:!0,get:()=>Ft(_.errors,r)}})}}var uP=(e,t,r,s,u)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[s]:u||!0}}:{},u4=e=>({isOnSubmit:!e||e===Bs.onSubmit,isOnBlur:e===Bs.onBlur,isOnChange:e===Bs.onChange,isOnAll:e===Bs.all,isOnTouch:e===Bs.onTouched}),h4=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length))));const Gf=(e,t,r,s)=>{for(const u of r||Object.keys(e)){const d=Ft(e,u);if(d){const{_f:x,...l}=d;if(x){if(x.refs&&x.refs[0]&&t(x.refs[0],u)&&!s)break;if(x.ref&&t(x.ref,x.name)&&!s)break;Gf(l,t)}else Yr(l)&&Gf(l,t)}}};var p7=(e,t,r)=>{const s=Pm(Ft(e,r));return rr(s,"root",t[r]),rr(e,r,s),e},dE=e=>e.type==="file",jl=e=>typeof e=="function",X1=e=>{if(!lE)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},a1=e=>aa(e),pE=e=>e.type==="radio",K1=e=>e instanceof RegExp;const d4={value:!1,isValid:!1},p4={value:!0,isValid:!0};var hP=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!$r(e[0].attributes.value)?$r(e[0].value)||e[0].value===""?p4:{value:e[0].value,isValid:!0}:p4:d4}return d4};const f4={isValid:!1,value:null};var dP=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,f4):f4;function m4(e,t,r="validate"){if(a1(e)||Array.isArray(e)&&e.every(a1)||Os(e)&&!e)return{type:r,message:a1(e)?e:"",ref:t}}var Ah=e=>Yr(e)&&!K1(e)?e:{value:e,message:""},g4=async(e,t,r,s,u)=>{const{ref:d,refs:x,required:l,maxLength:_,minLength:S,min:C,max:k,pattern:D,validate:U,name:q,valueAsNumber:L,mount:K,disabled:R}=e._f,F=Ft(t,q);if(!K||R)return{};const V=x?x[0]:d,J=Ie=>{s&&V.reportValidity&&(V.setCustomValidity(Os(Ie)?"":Ie||""),V.reportValidity())},re={},fe=pE(d),be=km(d),ce=fe||be,ve=(L||dE(d))&&$r(d.value)&&$r(F)||X1(d)&&d.value===""||F===""||Array.isArray(F)&&!F.length,Fe=uP.bind(null,q,r,re),Le=(Ie,Ke,bt,ot=Na.maxLength,Ot=Na.minLength)=>{const Dt=Ie?Ke:bt;re[q]={type:Ie?ot:Ot,message:Dt,ref:d,...Fe(Ie?ot:Ot,Dt)}};if(u?!Array.isArray(F)||!F.length:l&&(!ce&&(ve||Vi(F))||Os(F)&&!F||be&&!hP(x).isValid||fe&&!dP(x).isValid)){const{value:Ie,message:Ke}=a1(l)?{value:!!l,message:l}:Ah(l);if(Ie&&(re[q]={type:Na.required,message:Ke,ref:V,...Fe(Na.required,Ke)},!r))return J(Ke),re}if(!ve&&(!Vi(C)||!Vi(k))){let Ie,Ke;const bt=Ah(k),ot=Ah(C);if(!Vi(F)&&!isNaN(F)){const Ot=d.valueAsNumber||F&&+F;Vi(bt.value)||(Ie=Ot>bt.value),Vi(ot.value)||(Ke=Ot<ot.value)}else{const Ot=d.valueAsDate||new Date(F),Dt=De=>new Date(new Date().toDateString()+" "+De),Ze=d.type=="time",Ye=d.type=="week";aa(bt.value)&&F&&(Ie=Ze?Dt(F)>Dt(bt.value):Ye?F>bt.value:Ot>new Date(bt.value)),aa(ot.value)&&F&&(Ke=Ze?Dt(F)<Dt(ot.value):Ye?F<ot.value:Ot<new Date(ot.value))}if((Ie||Ke)&&(Le(!!Ie,bt.message,ot.message,Na.max,Na.min),!r))return J(re[q].message),re}if((_||S)&&!ve&&(aa(F)||u&&Array.isArray(F))){const Ie=Ah(_),Ke=Ah(S),bt=!Vi(Ie.value)&&F.length>+Ie.value,ot=!Vi(Ke.value)&&F.length<+Ke.value;if((bt||ot)&&(Le(bt,Ie.message,Ke.message),!r))return J(re[q].message),re}if(D&&!ve&&aa(F)){const{value:Ie,message:Ke}=Ah(D);if(K1(Ie)&&!F.match(Ie)&&(re[q]={type:Na.pattern,message:Ke,ref:d,...Fe(Na.pattern,Ke)},!r))return J(Ke),re}if(U){if(jl(U)){const Ie=await U(F,t),Ke=m4(Ie,V);if(Ke&&(re[q]={...Ke,...Fe(Na.validate,Ke.message)},!r))return J(Ke.message),re}else if(Yr(U)){let Ie={};for(const Ke in U){if(!ts(Ie)&&!r)break;const bt=m4(await U[Ke](F,t),V,Ke);bt&&(Ie={...bt,...Fe(Ke,bt.message)},J(bt.message),r&&(re[q]=Ie))}if(!ts(Ie)&&(re[q]={ref:V,...Ie},!r))return re}}return J(!0),re};function f7(e,t){const r=t.slice(0,-1).length;let s=0;for(;s<r;)e=$r(e)?s++:e[t[s++]];return e}function m7(e){for(const t in e)if(e.hasOwnProperty(t)&&!$r(e[t]))return!1;return!0}function ci(e,t){const r=Array.isArray(t)?t:hE(t)?[t]:cP(t),s=r.length===1?e:f7(e,r),u=r.length-1,d=r[u];return s&&delete s[d],u!==0&&(Yr(s)&&ts(s)||Array.isArray(s)&&m7(s))&&ci(e,r.slice(0,-1)),e}var Fv=()=>{let e=[];return{get observers(){return e},next:u=>{for(const d of e)d.next&&d.next(u)},subscribe:u=>(e.push(u),{unsubscribe:()=>{e=e.filter(d=>d!==u)}}),unsubscribe:()=>{e=[]}}},Y1=e=>Vi(e)||!nP(e);function lu(e,t){if(Y1(e)||Y1(t))return e===t;if(Gh(e)&&Gh(t))return e.getTime()===t.getTime();const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(const u of r){const d=e[u];if(!s.includes(u))return!1;if(u!=="ref"){const x=t[u];if(Gh(d)&&Gh(x)||Yr(d)&&Yr(x)||Array.isArray(d)&&Array.isArray(x)?!lu(d,x):d!==x)return!1}}return!0}var pP=e=>e.type==="select-multiple",g7=e=>pE(e)||km(e),Rv=e=>X1(e)&&e.isConnected,y7=e=>Yr(e)&&Object.values(e).some(t=>t),fP=e=>{for(const t in e)if(jl(e[t]))return!0;return!1};function J1(e,t={}){const r=Array.isArray(e);if(Yr(e)||r)for(const s in e)Array.isArray(e[s])||Yr(e[s])&&!fP(e[s])?(t[s]=Array.isArray(e[s])?[]:{},J1(e[s],t[s])):Vi(e[s])||(t[s]=!0);return t}function mP(e,t,r){const s=Array.isArray(e);if(Yr(e)||s)for(const u in e)Array.isArray(e[u])||Yr(e[u])&&!fP(e[u])?$r(t)||Y1(r[u])?r[u]=Array.isArray(e[u])?J1(e[u],[]):{...J1(e[u])}:mP(e[u],Vi(t)?{}:t[u],r[u]):r[u]=!lu(e[u],t[u]);return r}var I0=(e,t)=>mP(e,t,J1(t)),gP=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:s})=>$r(e)?e:t?e===""?NaN:e&&+e:r&&aa(e)?new Date(e):s?s(e):e;function Ov(e){const t=e.ref;if(!(e.refs?e.refs.every(r=>r.disabled):t.disabled))return dE(t)?t.files:pE(t)?dP(e.refs).value:pP(t)?[...t.selectedOptions].map(({value:r})=>r):km(t)?hP(e.refs).value:gP($r(t.value)?e.ref.value:t.value,e)}var x7=(e,t,r,s)=>{const u={};for(const d of e){const x=Ft(t,d);x&&rr(u,d,x._f)}return{criteriaMode:r,names:[...e],fields:u,shouldUseNativeValidation:s}},Cf=e=>$r(e)?e:K1(e)?e.source:Yr(e)?K1(e.value)?e.value.source:e.value:e,_7=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function y4(e,t,r){const s=Ft(e,r);if(s||hE(r))return{error:s,name:r};const u=r.split(".");for(;u.length;){const d=u.join("."),x=Ft(t,d),l=Ft(e,d);if(x&&!Array.isArray(x)&&r!==d)return{name:r};if(l&&l.type)return{name:d,error:l};u.pop()}return{name:r}}var v7=(e,t,r,s,u)=>u.isOnAll?!1:!r&&u.isOnTouch?!(t||e):(r?s.isOnBlur:u.isOnBlur)?!e:(r?s.isOnChange:u.isOnChange)?e:!0,b7=(e,t)=>!Pm(Ft(e,t)).length&&ci(e,t);const w7={mode:Bs.onSubmit,reValidateMode:Bs.onChange,shouldFocusError:!0};function E7(e={}){let t={...w7,...e},r={submitCount:0,isDirty:!1,isLoading:jl(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},s={},u=Yr(t.defaultValues)||Yr(t.values)?co(t.defaultValues||t.values)||{}:{},d=t.shouldUnregister?{}:co(u),x={action:!1,mount:!1,watch:!1},l={mount:new Set,unMount:new Set,array:new Set,watch:new Set},_,S=0;const C={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},k={values:Fv(),array:Fv(),state:Fv()},D=u4(t.mode),U=u4(t.reValidateMode),q=t.criteriaMode===Bs.all,L=Se=>Ge=>{clearTimeout(S),S=setTimeout(Se,Ge)},K=async Se=>{if(C.isValid||Se){const Ge=t.resolver?ts((await ce()).errors):await Fe(s,!0);Ge!==r.isValid&&k.state.next({isValid:Ge})}},R=(Se,Ge)=>{!(C.isValidating||C.validatingFields)||(Ge.forEach(Xe=>{rr(r.validatingFields,Xe,Se)}),r.isValidating=y7(r.validatingFields),k.state.next({validatingFields:r.validatingFields,isValidating:r.isValidating}))},F=(Se,Ge=[],Xe,gt,Tt=!0,vt=!0)=>{if(gt&&Xe){if(x.action=!0,vt&&Array.isArray(Ft(s,Se))){const Gt=Xe(Ft(s,Se),gt.argA,gt.argB);Tt&&rr(s,Se,Gt)}if(vt&&Array.isArray(Ft(r.errors,Se))){const Gt=Xe(Ft(r.errors,Se),gt.argA,gt.argB);Tt&&rr(r.errors,Se,Gt),b7(r.errors,Se)}if(C.touchedFields&&vt&&Array.isArray(Ft(r.touchedFields,Se))){const Gt=Xe(Ft(r.touchedFields,Se),gt.argA,gt.argB);Tt&&rr(r.touchedFields,Se,Gt)}C.dirtyFields&&(r.dirtyFields=I0(u,d)),k.state.next({name:Se,isDirty:Ie(Se,Ge),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else rr(d,Se,Ge)},V=(Se,Ge)=>{rr(r.errors,Se,Ge),k.state.next({errors:r.errors})},J=Se=>{r.errors=Se,k.state.next({errors:r.errors,isValid:!1})},re=(Se,Ge,Xe,gt)=>{const Tt=Ft(s,Se);if(Tt){const vt=Ft(d,Se,$r(Xe)?Ft(u,Se):Xe);$r(vt)||gt&&gt.defaultChecked||Ge?rr(d,Se,Ge?vt:Ov(Tt._f)):ot(Se,vt),x.mount&&K()}},fe=(Se,Ge,Xe,gt,Tt)=>{let vt=!1,Gt=!1;const Mn={name:Se},hr=!!(Ft(s,Se)&&Ft(s,Se)._f.disabled);if(!Xe||gt){C.isDirty&&(Gt=r.isDirty,r.isDirty=Mn.isDirty=Ie(),vt=Gt!==Mn.isDirty);const er=hr||lu(Ft(u,Se),Ge);Gt=!!(!hr&&Ft(r.dirtyFields,Se)),er||hr?ci(r.dirtyFields,Se):rr(r.dirtyFields,Se,!0),Mn.dirtyFields=r.dirtyFields,vt=vt||C.dirtyFields&&Gt!==!er}if(Xe){const er=Ft(r.touchedFields,Se);er||(rr(r.touchedFields,Se,Xe),Mn.touchedFields=r.touchedFields,vt=vt||C.touchedFields&&er!==Xe)}return vt&&Tt&&k.state.next(Mn),vt?Mn:{}},be=(Se,Ge,Xe,gt)=>{const Tt=Ft(r.errors,Se),vt=C.isValid&&Os(Ge)&&r.isValid!==Ge;if(e.delayError&&Xe?(_=L(()=>V(Se,Xe)),_(e.delayError)):(clearTimeout(S),_=null,Xe?rr(r.errors,Se,Xe):ci(r.errors,Se)),(Xe?!lu(Tt,Xe):Tt)||!ts(gt)||vt){const Gt={...gt,...vt&&Os(Ge)?{isValid:Ge}:{},errors:r.errors,name:Se};r={...r,...Gt},k.state.next(Gt)}R(!1,Object.keys(r.validatingFields).filter(Gt=>Gt===Se))},ce=async Se=>t.resolver(d,t.context,x7(Se||l.mount,s,t.criteriaMode,t.shouldUseNativeValidation)),ve=async Se=>{const{errors:Ge}=await ce(Se);if(Se)for(const Xe of Se){const gt=Ft(Ge,Xe);gt?rr(r.errors,Xe,gt):ci(r.errors,Xe)}else r.errors=Ge;return Ge},Fe=async(Se,Ge,Xe={valid:!0})=>{for(const gt in Se){const Tt=Se[gt];if(Tt){const{_f:vt,...Gt}=Tt;if(vt){const Mn=l.array.has(vt.name),hr=await g4(Tt,d,q,t.shouldUseNativeValidation&&!Ge,Mn);if(hr[vt.name]&&(Xe.valid=!1,Ge))break;!Ge&&(Ft(hr,vt.name)?Mn?p7(r.errors,hr,vt.name):rr(r.errors,vt.name,hr[vt.name]):ci(r.errors,vt.name))}Gt&&await Fe(Gt,Ge,Xe)}}return Xe.valid},Le=()=>{for(const Se of l.unMount){const Ge=Ft(s,Se);Ge&&(Ge._f.refs?Ge._f.refs.every(Xe=>!Rv(Xe)):!Rv(Ge._f.ref))&&nn(Se)}l.unMount=new Set},Ie=(Se,Ge)=>(Se&&Ge&&rr(d,Se,Ge),!lu(_t(),u)),Ke=(Se,Ge,Xe)=>lP(Se,l,{...x.mount?d:$r(Ge)?u:aa(Se)?{[Se]:Ge}:Ge},Xe,Ge),bt=Se=>Pm(Ft(x.mount?d:u,Se,e.shouldUnregister?Ft(u,Se,[]):[])),ot=(Se,Ge,Xe={})=>{const gt=Ft(s,Se);let Tt=Ge;if(gt){const vt=gt._f;vt&&(!vt.disabled&&rr(d,Se,gP(Ge,vt)),Tt=X1(vt.ref)&&Vi(Ge)?"":Ge,pP(vt.ref)?[...vt.ref.options].forEach(Gt=>Gt.selected=Tt.includes(Gt.value)):vt.refs?km(vt.ref)?vt.refs.length>1?vt.refs.forEach(Gt=>(!Gt.defaultChecked||!Gt.disabled)&&(Gt.checked=Array.isArray(Tt)?!!Tt.find(Mn=>Mn===Gt.value):Tt===Gt.value)):vt.refs[0]&&(vt.refs[0].checked=!!Tt):vt.refs.forEach(Gt=>Gt.checked=Gt.value===Tt):dE(vt.ref)?vt.ref.value="":(vt.ref.value=Tt,vt.ref.type||k.values.next({name:Se,values:{...d}})))}(Xe.shouldDirty||Xe.shouldTouch)&&fe(Se,Tt,Xe.shouldTouch,Xe.shouldDirty,!0),Xe.shouldValidate&&De(Se)},Ot=(Se,Ge,Xe)=>{for(const gt in Ge){const Tt=Ge[gt],vt=`${Se}.${gt}`,Gt=Ft(s,vt);(l.array.has(Se)||!Y1(Tt)||Gt&&!Gt._f)&&!Gh(Tt)?Ot(vt,Tt,Xe):ot(vt,Tt,Xe)}},Dt=(Se,Ge,Xe={})=>{const gt=Ft(s,Se),Tt=l.array.has(Se),vt=co(Ge);rr(d,Se,vt),Tt?(k.array.next({name:Se,values:{...d}}),(C.isDirty||C.dirtyFields)&&Xe.shouldDirty&&k.state.next({name:Se,dirtyFields:I0(u,d),isDirty:Ie(Se,vt)})):gt&&!gt._f&&!Vi(vt)?Ot(Se,vt,Xe):ot(Se,vt,Xe),h4(Se,l)&&k.state.next({...r}),k.values.next({name:x.mount?Se:void 0,values:{...d}})},Ze=async Se=>{const Ge=Se.target;let Xe=Ge.name,gt=!0;const Tt=Ft(s,Xe),vt=()=>Ge.type?Ov(Tt._f):rP(Se),Gt=Mn=>{gt=Number.isNaN(Mn)||Mn===Ft(d,Xe,Mn)};if(Tt){let Mn,hr;const er=vt(),gi=Se.type===Z1.BLUR||Se.type===Z1.FOCUS_OUT,da=!_7(Tt._f)&&!t.resolver&&!Ft(r.errors,Xe)&&!Tt._f.deps||v7(gi,Ft(r.touchedFields,Xe),r.isSubmitted,U,D),xo=h4(Xe,l,gi);rr(d,Xe,er),gi?(Tt._f.onBlur&&Tt._f.onBlur(Se),_&&_(0)):Tt._f.onChange&&Tt._f.onChange(Se);const Bo=fe(Xe,er,gi,!1),pa=!ts(Bo)||xo;if(!gi&&k.values.next({name:Xe,type:Se.type,values:{...d}}),da)return C.isValid&&K(),pa&&k.state.next({name:Xe,...xo?{}:Bo});if(!gi&&xo&&k.state.next({...r}),R(!0,[Xe]),t.resolver){const{errors:$o}=await ce([Xe]);if(Gt(er),gt){const jo=y4(r.errors,s,Xe),Uo=y4($o,s,jo.name||Xe);Mn=Uo.error,Xe=Uo.name,hr=ts($o)}}else Mn=(await g4(Tt,d,q,t.shouldUseNativeValidation))[Xe],Gt(er),gt&&(Mn?hr=!1:C.isValid&&(hr=await Fe(s,!0)));gt&&(Tt._f.deps&&De(Tt._f.deps),be(Xe,hr,Mn,Bo))}},Ye=(Se,Ge)=>{if(Ft(r.errors,Ge)&&Se.focus)return Se.focus(),1},De=async(Se,Ge={})=>{let Xe,gt;const Tt=s1(Se);if(R(!0,Tt),t.resolver){const vt=await ve($r(Se)?Se:Tt);Xe=ts(vt),gt=Se?!Tt.some(Gt=>Ft(vt,Gt)):Xe}else Se?(gt=(await Promise.all(Tt.map(async vt=>{const Gt=Ft(s,vt);return await Fe(Gt&&Gt._f?{[vt]:Gt}:Gt)}))).every(Boolean),!(!gt&&!r.isValid)&&K()):gt=Xe=await Fe(s);return k.state.next({...!aa(Se)||C.isValid&&Xe!==r.isValid?{}:{name:Se},...t.resolver||!Se?{isValid:Xe}:{},errors:r.errors,isValidating:!1}),Ge.shouldFocus&&!gt&&Gf(s,Ye,Se?Tt:l.mount),gt},_t=Se=>{const Ge={...u,...x.mount?d:{}};return $r(Se)?Ge:aa(Se)?Ft(Ge,Se):Se.map(Xe=>Ft(Ge,Xe))},mt=(Se,Ge)=>({invalid:!!Ft((Ge||r).errors,Se),isDirty:!!Ft((Ge||r).dirtyFields,Se),isTouched:!!Ft((Ge||r).touchedFields,Se),isValidating:!!Ft((Ge||r).validatingFields,Se),error:Ft((Ge||r).errors,Se)}),Et=Se=>{Se&&s1(Se).forEach(Ge=>ci(r.errors,Ge)),k.state.next({errors:Se?r.errors:{}})},jt=(Se,Ge,Xe)=>{const gt=(Ft(s,Se,{_f:{}})._f||{}).ref;rr(r.errors,Se,{...Ge,ref:gt}),k.state.next({name:Se,errors:r.errors,isValid:!1}),Xe&&Xe.shouldFocus&&gt&&gt.focus&&gt.focus()},en=(Se,Ge)=>jl(Se)?k.values.subscribe({next:Xe=>Se(Ke(void 0,Ge),Xe)}):Ke(Se,Ge,!0),nn=(Se,Ge={})=>{for(const Xe of Se?s1(Se):l.mount)l.mount.delete(Xe),l.array.delete(Xe),Ge.keepValue||(ci(s,Xe),ci(d,Xe)),!Ge.keepError&&ci(r.errors,Xe),!Ge.keepDirty&&ci(r.dirtyFields,Xe),!Ge.keepTouched&&ci(r.touchedFields,Xe),!Ge.keepIsValidating&&ci(r.validatingFields,Xe),!t.shouldUnregister&&!Ge.keepDefaultValue&&ci(u,Xe);k.values.next({values:{...d}}),k.state.next({...r,...Ge.keepDirty?{isDirty:Ie()}:{}}),!Ge.keepIsValid&&K()},vn=({disabled:Se,name:Ge,field:Xe,fields:gt,value:Tt})=>{if(Os(Se)){const vt=Se?void 0:$r(Tt)?Ov(Xe?Xe._f:Ft(gt,Ge)._f):Tt;rr(d,Ge,vt),fe(Ge,vt,!1,!1,!0)}},Bt=(Se,Ge={})=>{let Xe=Ft(s,Se);const gt=Os(Ge.disabled);return rr(s,Se,{...Xe||{},_f:{...Xe&&Xe._f?Xe._f:{ref:{name:Se}},name:Se,mount:!0,...Ge}}),l.mount.add(Se),Xe?vn({field:Xe,disabled:Ge.disabled,name:Se,value:Ge.value}):re(Se,!0,Ge.value),{...gt?{disabled:Ge.disabled}:{},...t.progressive?{required:!!Ge.required,min:Cf(Ge.min),max:Cf(Ge.max),minLength:Cf(Ge.minLength),maxLength:Cf(Ge.maxLength),pattern:Cf(Ge.pattern)}:{},name:Se,onChange:Ze,onBlur:Ze,ref:Tt=>{if(Tt){Bt(Se,Ge),Xe=Ft(s,Se);const vt=$r(Tt.value)&&Tt.querySelectorAll&&Tt.querySelectorAll("input,select,textarea")[0]||Tt,Gt=g7(vt),Mn=Xe._f.refs||[];if(Gt?Mn.find(hr=>hr===vt):vt===Xe._f.ref)return;rr(s,Se,{_f:{...Xe._f,...Gt?{refs:[...Mn.filter(Rv),vt,...Array.isArray(Ft(u,Se))?[{}]:[]],ref:{type:vt.type,name:Se}}:{ref:vt}}}),re(Se,!1,void 0,vt)}else Xe=Ft(s,Se,{}),Xe._f&&(Xe._f.mount=!1),(t.shouldUnregister||Ge.shouldUnregister)&&!(iP(l.array,Se)&&x.action)&&l.unMount.add(Se)}}},xn=()=>t.shouldFocusError&&Gf(s,Ye,l.mount),Xn=Se=>{Os(Se)&&(k.state.next({disabled:Se}),Gf(s,(Ge,Xe)=>{let gt=Se;const Tt=Ft(s,Xe);Tt&&Os(Tt._f.disabled)&&(gt||(gt=Tt._f.disabled)),Ge.disabled=gt},0,!1))},Rt=(Se,Ge)=>async Xe=>{let gt;Xe&&(Xe.preventDefault&&Xe.preventDefault(),Xe.persist&&Xe.persist());let Tt=co(d);if(k.state.next({isSubmitting:!0}),t.resolver){const{errors:vt,values:Gt}=await ce();r.errors=vt,Tt=Gt}else await Fe(s);if(ci(r.errors,"root"),ts(r.errors)){k.state.next({errors:{}});try{await Se(Tt,Xe)}catch(vt){gt=vt}}else Ge&&await Ge({...r.errors},Xe),xn(),setTimeout(xn);if(k.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ts(r.errors)&&!gt,submitCount:r.submitCount+1,errors:r.errors}),gt)throw gt},Qn=(Se,Ge={})=>{Ft(s,Se)&&($r(Ge.defaultValue)?Dt(Se,co(Ft(u,Se))):(Dt(Se,Ge.defaultValue),rr(u,Se,co(Ge.defaultValue))),Ge.keepTouched||ci(r.touchedFields,Se),Ge.keepDirty||(ci(r.dirtyFields,Se),r.isDirty=Ge.defaultValue?Ie(Se,co(Ft(u,Se))):Ie()),Ge.keepError||(ci(r.errors,Se),C.isValid&&K()),k.state.next({...r}))},zn=(Se,Ge={})=>{const Xe=Se?co(Se):u,gt=co(Xe),Tt=ts(Se),vt=Tt?u:gt;if(Ge.keepDefaultValues||(u=Xe),!Ge.keepValues){if(Ge.keepDirtyValues)for(const Gt of l.mount)Ft(r.dirtyFields,Gt)?rr(vt,Gt,Ft(d,Gt)):Dt(Gt,Ft(vt,Gt));else{if(lE&&$r(Se))for(const Gt of l.mount){const Mn=Ft(s,Gt);if(Mn&&Mn._f){const hr=Array.isArray(Mn._f.refs)?Mn._f.refs[0]:Mn._f.ref;if(X1(hr)){const er=hr.closest("form");if(er){er.reset();break}}}}s={}}d=e.shouldUnregister?Ge.keepDefaultValues?co(u):{}:co(vt),k.array.next({values:{...vt}}),k.values.next({values:{...vt}})}l={mount:Ge.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},x.mount=!C.isValid||!!Ge.keepIsValid||!!Ge.keepDirtyValues,x.watch=!!e.shouldUnregister,k.state.next({submitCount:Ge.keepSubmitCount?r.submitCount:0,isDirty:Tt?!1:Ge.keepDirty?r.isDirty:!!(Ge.keepDefaultValues&&!lu(Se,u)),isSubmitted:Ge.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Tt?[]:Ge.keepDirtyValues?Ge.keepDefaultValues&&d?I0(u,d):r.dirtyFields:Ge.keepDefaultValues&&Se?I0(u,Se):{},touchedFields:Ge.keepTouched?r.touchedFields:{},errors:Ge.keepErrors?r.errors:{},isSubmitSuccessful:Ge.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},Fr=(Se,Ge)=>zn(jl(Se)?Se(d):Se,Ge);return{control:{register:Bt,unregister:nn,getFieldState:mt,handleSubmit:Rt,setError:jt,_executeSchema:ce,_getWatch:Ke,_getDirty:Ie,_updateValid:K,_removeUnmounted:Le,_updateFieldArray:F,_updateDisabledField:vn,_getFieldArray:bt,_reset:zn,_resetDefaultValues:()=>jl(t.defaultValues)&&t.defaultValues().then(Se=>{Fr(Se,t.resetOptions),k.state.next({isLoading:!1})}),_updateFormState:Se=>{r={...r,...Se}},_disableForm:Xn,_subjects:k,_proxyFormState:C,_setErrors:J,get _fields(){return s},get _formValues(){return d},get _state(){return x},set _state(Se){x=Se},get _defaultValues(){return u},get _names(){return l},set _names(Se){l=Se},get _formState(){return r},set _formState(Se){r=Se},get _options(){return t},set _options(Se){t={...t,...Se}}},trigger:De,register:Bt,handleSubmit:Rt,watch:en,setValue:Dt,getValues:_t,reset:Fr,resetField:Qn,clearErrors:Et,unregister:nn,setError:jt,setFocus:(Se,Ge={})=>{const Xe=Ft(s,Se),gt=Xe&&Xe._f;if(gt){const Tt=gt.refs?gt.refs[0]:gt.ref;Tt.focus&&(Tt.focus(),Ge.shouldSelect&&Tt.select())}},getFieldState:mt}}function us(e={}){const t=zt.useRef(),r=zt.useRef(),[s,u]=zt.useState({isDirty:!1,isValidating:!1,isLoading:jl(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:jl(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...E7(e),formState:s});const d=t.current.control;return d._options=e,uE({subject:d._subjects.state,next:x=>{sP(x,d._proxyFormState,d._updateFormState,!0)&&u({...d._formState})}}),zt.useEffect(()=>d._disableForm(e.disabled),[d,e.disabled]),zt.useEffect(()=>{if(d._proxyFormState.isDirty){const x=d._getDirty();x!==s.isDirty&&d._subjects.state.next({isDirty:x})}},[d,s.isDirty]),zt.useEffect(()=>{e.values&&!lu(e.values,r.current)?(d._reset(e.values,d._options.resetOptions),r.current=e.values,u(x=>({...x}))):d._resetDefaultValues()},[e.values,d]),zt.useEffect(()=>{e.errors&&d._setErrors(e.errors)},[e.errors,d]),zt.useEffect(()=>{d._state.mount||(d._updateValid(),d._state.mount=!0),d._state.watch&&(d._state.watch=!1,d._subjects.state.next({...d._formState})),d._removeUnmounted()}),zt.useEffect(()=>{e.shouldUnregister&&d._subjects.values.next({values:d._getWatch()})},[e.shouldUnregister,d]),t.current.formState=oP(s,d),t.current}var yP={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},x4=zt.createContext&&zt.createContext(yP),ec=globalThis&&globalThis.__assign||function(){return ec=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&(e[u]=t[u])}return e},ec.apply(this,arguments)},T7=globalThis&&globalThis.__rest||function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,s=Object.getOwnPropertySymbols(e);u<s.length;u++)t.indexOf(s[u])<0&&Object.prototype.propertyIsEnumerable.call(e,s[u])&&(r[s[u]]=e[s[u]]);return r};function xP(e){return e&&e.map(function(t,r){return zt.createElement(t.tag,ec({key:r},t.attr),xP(t.child))})}function Wt(e){return function(t){return zt.createElement(S7,ec({attr:ec({},e.attr)},t),xP(e.child))}}function S7(e){var t=function(r){var s=e.attr,u=e.size,d=e.title,x=T7(e,["attr","size","title"]),l=u||r.size||"1em",_;return r.className&&(_=r.className),e.className&&(_=(_?_+" ":"")+e.className),zt.createElement("svg",ec({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,s,x,{className:_,style:ec(ec({color:e.color||r.color},r.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),d&&zt.createElement("title",null,d),e.children)};return x4!==void 0?zt.createElement(x4.Consumer,null,function(r){return t(r)}):t(yP)}function C7(e){return Wt({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z"}},{tag:"path",attr:{d:"M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8zm8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7z"}}]})(e)}function A7(e){return Wt({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"m10.79 12.912-1.614-1.615a3.5 3.5 0 0 1-4.474-4.474l-2.06-2.06C.938 6.278 0 8 0 8s3 5.5 8 5.5a7.029 7.029 0 0 0 2.79-.588zM5.21 3.088A7.028 7.028 0 0 1 8 2.5c5 0 8 5.5 8 5.5s-.939 1.721-2.641 3.238l-2.062-2.062a3.5 3.5 0 0 0-4.474-4.474L5.21 3.089z"}},{tag:"path",attr:{d:"M5.525 7.646a2.5 2.5 0 0 0 2.829 2.829l-2.83-2.829zm4.95.708-2.829-2.83a2.5 2.5 0 0 1 2.829 2.829zm3.171 6-12-12 .708-.708 12 12-.708.708z"}}]})(e)}function M7(e){return Wt({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M3.1 11.2a.5.5 0 0 1 .4-.2H6a.5.5 0 0 1 0 1H3.75L1.5 15h13l-2.25-3H10a.5.5 0 0 1 0-1h2.5a.5.5 0 0 1 .4.2l3 4a.5.5 0 0 1-.4.8H.5a.5.5 0 0 1-.4-.8l3-4z"}},{tag:"path",attr:{fillRule:"evenodd",d:"M8 1a3 3 0 1 0 0 6 3 3 0 0 0 0-6zM4 4a4 4 0 1 1 4.5 3.969V13.5a.5.5 0 0 1-1 0V7.97A4 4 0 0 1 4 3.999z"}}]})(e)}function k7(e){return Wt({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M11.5 2a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM9.05 3a2.5 2.5 0 0 1 4.9 0H16v1h-2.05a2.5 2.5 0 0 1-4.9 0H0V3h9.05zM4.5 7a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM2.05 8a2.5 2.5 0 0 1 4.9 0H16v1H6.95a2.5 2.5 0 0 1-4.9 0H0V8h2.05zm9.45 4a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zm-2.45 1a2.5 2.5 0 0 1 4.9 0H16v1h-2.05a2.5 2.5 0 0 1-4.9 0H0v-1h9.05z"}}]})(e)}fd.propTypes={control:_e.object,name:_e.string,focus:_e.bool,setValue:_e.func};function fd({control:e,setValue:t=null,...r}){const[s,u]=ne.exports.useState(!1),{field:d}=Ad({name:r.name,control:e,defaultValue:""}),[x,l]=ne.exports.useState(d.value||"");return H("div",{className:"relative",children:[s?T(A7,{onClick:()=>u(S=>!S),className:"absolute top-0 right-[8px] text-[#c3c3c3] translate-y-[50%] text-[20px] cursor-pointer hover:text-black transition-all duration-150 "}):T(C7,{onClick:()=>u(S=>!S),className:"absolute top-0 right-[8px] text-[#c3c3c3] translate-y-[50%] text-[20px] cursor-pointer hover:text-black transition-all duration-150 "}),s?T("input",{className:"w-full text-base tracking-[0.4px] outline-none rounded-[4px] border border-[#717171] py-[6px] pl-[10px] pr-[30px] focus:border-[#fc7f9c] focus:shadow-[0_0_6px_rgb(255,123,153)] transition-all duration-300",type:"text",onChange:S=>{l(S.target.value),t(r.name,S.target.value)},value:d.value||x}):T("input",{className:"w-full text-base tracking-[0.4px] outline-none rounded-[4px] border border-[#717171] py-[6px] pl-[10px] pr-[30px] focus:border-[#fc7f9c] focus:shadow-[0_0_6px_rgb(255,123,153)] transition-all duration-300",type:"password",...d,...r,name:r==null?void 0:r.name})]})}var aw;try{aw=Map}catch{}var lw;try{lw=Set}catch{}function _P(e,t,r){if(!e||typeof e!="object"||typeof e=="function")return e;if(e.nodeType&&"cloneNode"in e)return e.cloneNode(!0);if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e);if(Array.isArray(e))return e.map(cw);if(aw&&e instanceof aw)return new Map(Array.from(e.entries()));if(lw&&e instanceof lw)return new Set(Array.from(e.values()));if(e instanceof Object){t.push(e);var s=Object.create(e);r.push(s);for(var u in e){var d=t.findIndex(function(x){return x===e[u]});s[u]=d>-1?r[d]:_P(e[u],t,r)}return s}return e}function cw(e){return _P(e,[],[])}const P7=Object.prototype.toString,I7=Error.prototype.toString,D7=RegExp.prototype.toString,z7=typeof Symbol!="undefined"?Symbol.prototype.toString:()=>"",N7=/^Symbol\((.*)\)(.*)$/;function L7(e){return e!=+e?"NaN":e===0&&1/e<0?"-0":""+e}function _4(e,t=!1){if(e==null||e===!0||e===!1)return""+e;const r=typeof e;if(r==="number")return L7(e);if(r==="string")return t?`"${e}"`:e;if(r==="function")return"[Function "+(e.name||"anonymous")+"]";if(r==="symbol")return z7.call(e).replace(N7,"Symbol($1)");const s=P7.call(e).slice(8,-1);return s==="Date"?isNaN(e.getTime())?""+e:e.toISOString(e):s==="Error"||e instanceof Error?"["+I7.call(e)+"]":s==="RegExp"?D7.call(e):null}function fm(e,t){let r=_4(e,t);return r!==null?r:JSON.stringify(e,function(s,u){let d=_4(this[s],t);return d!==null?d:u},2)}let tu={default:"${path} is invalid",required:"${path} is a required field",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:e,type:t,value:r,originalValue:s})=>{let u=s!=null&&s!==r,d=`${e} must be a \`${t}\` type, but the final value was: \`${fm(r,!0)}\``+(u?` (cast from the value \`${fm(s,!0)}\`).`:".");return r===null&&(d+='\n If "null" is intended as an empty value be sure to mark the schema as `.nullable()`'),d},defined:"${path} must be defined"},zs={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},Pl={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},uw={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},F7={isValue:"${path} field must be ${value}"},hw={noUnknown:"${path} field has unspecified keys: ${unknown}"},R7={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"};Object.assign(Object.create(null),{mixed:tu,string:zs,number:Pl,date:uw,object:hw,array:R7,boolean:F7});var O7=Object.prototype,B7=O7.hasOwnProperty;function $7(e,t){return e!=null&&B7.call(e,t)}var j7=$7,U7=Array.isArray,hc=U7,V7=typeof sa=="object"&&sa&&sa.Object===Object&&sa,vP=V7,G7=vP,q7=typeof self=="object"&&self&&self.Object===Object&&self,H7=G7||q7||Function("return this")(),Ya=H7,W7=Ya,Z7=W7.Symbol,lx=Z7,v4=lx,bP=Object.prototype,X7=bP.hasOwnProperty,K7=bP.toString,Af=v4?v4.toStringTag:void 0;function Y7(e){var t=X7.call(e,Af),r=e[Af];try{e[Af]=void 0;var s=!0}catch{}var u=K7.call(e);return s&&(t?e[Af]=r:delete e[Af]),u}var J7=Y7,Q7=Object.prototype,e9=Q7.toString;function t9(e){return e9.call(e)}var n9=t9,b4=lx,r9=J7,i9=n9,o9="[object Null]",s9="[object Undefined]",w4=b4?b4.toStringTag:void 0;function a9(e){return e==null?e===void 0?s9:o9:w4&&w4 in Object(e)?r9(e):i9(e)}var Im=a9;function l9(e){return e!=null&&typeof e=="object"}var Dm=l9,c9=Im,u9=Dm,h9="[object Symbol]";function d9(e){return typeof e=="symbol"||u9(e)&&c9(e)==h9}var fE=d9,p9=hc,f9=fE,m9=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,g9=/^\w*$/;function y9(e,t){if(p9(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||f9(e)?!0:g9.test(e)||!m9.test(e)||t!=null&&e in Object(t)}var mE=y9;function x9(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var gE=x9,_9=Im,v9=gE,b9="[object AsyncFunction]",w9="[object Function]",E9="[object GeneratorFunction]",T9="[object Proxy]";function S9(e){if(!v9(e))return!1;var t=_9(e);return t==w9||t==E9||t==b9||t==T9}var wP=S9,C9=Ya,A9=C9["__core-js_shared__"],M9=A9,Bv=M9,E4=function(){var e=/[^.]+$/.exec(Bv&&Bv.keys&&Bv.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function k9(e){return!!E4&&E4 in e}var P9=k9,I9=Function.prototype,D9=I9.toString;function z9(e){if(e!=null){try{return D9.call(e)}catch{}try{return e+""}catch{}}return""}var EP=z9,N9=wP,L9=P9,F9=gE,R9=EP,O9=/[\\^$.*+?()[\]{}|]/g,B9=/^\[object .+?Constructor\]$/,$9=Function.prototype,j9=Object.prototype,U9=$9.toString,V9=j9.hasOwnProperty,G9=RegExp("^"+U9.call(V9).replace(O9,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function q9(e){if(!F9(e)||L9(e))return!1;var t=N9(e)?G9:B9;return t.test(R9(e))}var H9=q9;function W9(e,t){return e==null?void 0:e[t]}var Z9=W9,X9=H9,K9=Z9;function Y9(e,t){var r=K9(e,t);return X9(r)?r:void 0}var wu=Y9,J9=wu,Q9=J9(Object,"create"),cx=Q9,T4=cx;function e$(){this.__data__=T4?T4(null):{},this.size=0}var t$=e$;function n$(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var r$=n$,i$=cx,o$="__lodash_hash_undefined__",s$=Object.prototype,a$=s$.hasOwnProperty;function l$(e){var t=this.__data__;if(i$){var r=t[e];return r===o$?void 0:r}return a$.call(t,e)?t[e]:void 0}var c$=l$,u$=cx,h$=Object.prototype,d$=h$.hasOwnProperty;function p$(e){var t=this.__data__;return u$?t[e]!==void 0:d$.call(t,e)}var f$=p$,m$=cx,g$="__lodash_hash_undefined__";function y$(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=m$&&t===void 0?g$:t,this}var x$=y$,_$=t$,v$=r$,b$=c$,w$=f$,E$=x$;function Md(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}Md.prototype.clear=_$;Md.prototype.delete=v$;Md.prototype.get=b$;Md.prototype.has=w$;Md.prototype.set=E$;var T$=Md;function S$(){this.__data__=[],this.size=0}var C$=S$;function A$(e,t){return e===t||e!==e&&t!==t}var TP=A$,M$=TP;function k$(e,t){for(var r=e.length;r--;)if(M$(e[r][0],t))return r;return-1}var ux=k$,P$=ux,I$=Array.prototype,D$=I$.splice;function z$(e){var t=this.__data__,r=P$(t,e);if(r<0)return!1;var s=t.length-1;return r==s?t.pop():D$.call(t,r,1),--this.size,!0}var N$=z$,L$=ux;function F$(e){var t=this.__data__,r=L$(t,e);return r<0?void 0:t[r][1]}var R$=F$,O$=ux;function B$(e){return O$(this.__data__,e)>-1}var $$=B$,j$=ux;function U$(e,t){var r=this.__data__,s=j$(r,e);return s<0?(++this.size,r.push([e,t])):r[s][1]=t,this}var V$=U$,G$=C$,q$=N$,H$=R$,W$=$$,Z$=V$;function kd(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}kd.prototype.clear=G$;kd.prototype.delete=q$;kd.prototype.get=H$;kd.prototype.has=W$;kd.prototype.set=Z$;var hx=kd,X$=wu,K$=Ya,Y$=X$(K$,"Map"),yE=Y$,S4=T$,J$=hx,Q$=yE;function ej(){this.size=0,this.__data__={hash:new S4,map:new(Q$||J$),string:new S4}}var tj=ej;function nj(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var rj=nj,ij=rj;function oj(e,t){var r=e.__data__;return ij(t)?r[typeof t=="string"?"string":"hash"]:r.map}var dx=oj,sj=dx;function aj(e){var t=sj(this,e).delete(e);return this.size-=t?1:0,t}var lj=aj,cj=dx;function uj(e){return cj(this,e).get(e)}var hj=uj,dj=dx;function pj(e){return dj(this,e).has(e)}var fj=pj,mj=dx;function gj(e,t){var r=mj(this,e),s=r.size;return r.set(e,t),this.size+=r.size==s?0:1,this}var yj=gj,xj=tj,_j=lj,vj=hj,bj=fj,wj=yj;function Pd(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}Pd.prototype.clear=xj;Pd.prototype.delete=_j;Pd.prototype.get=vj;Pd.prototype.has=bj;Pd.prototype.set=wj;var xE=Pd,SP=xE,Ej="Expected a function";function _E(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Ej);var r=function(){var s=arguments,u=t?t.apply(this,s):s[0],d=r.cache;if(d.has(u))return d.get(u);var x=e.apply(this,s);return r.cache=d.set(u,x)||d,x};return r.cache=new(_E.Cache||SP),r}_E.Cache=SP;var Tj=_E,Sj=Tj,Cj=500;function Aj(e){var t=Sj(e,function(s){return r.size===Cj&&r.clear(),s}),r=t.cache;return t}var Mj=Aj,kj=Mj,Pj=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ij=/\\(\\)?/g,Dj=kj(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Pj,function(r,s,u,d){t.push(u?d.replace(Ij,"$1"):s||r)}),t}),zj=Dj;function Nj(e,t){for(var r=-1,s=e==null?0:e.length,u=Array(s);++r<s;)u[r]=t(e[r],r,e);return u}var Lj=Nj,C4=lx,Fj=Lj,Rj=hc,Oj=fE,Bj=1/0,A4=C4?C4.prototype:void 0,M4=A4?A4.toString:void 0;function CP(e){if(typeof e=="string")return e;if(Rj(e))return Fj(e,CP)+"";if(Oj(e))return M4?M4.call(e):"";var t=e+"";return t=="0"&&1/e==-Bj?"-0":t}var $j=CP,jj=$j;function Uj(e){return e==null?"":jj(e)}var zm=Uj,Vj=hc,Gj=mE,qj=zj,Hj=zm;function Wj(e,t){return Vj(e)?e:Gj(e,t)?[e]:qj(Hj(e))}var AP=Wj,Zj=Im,Xj=Dm,Kj="[object Arguments]";function Yj(e){return Xj(e)&&Zj(e)==Kj}var Jj=Yj,k4=Jj,Qj=Dm,MP=Object.prototype,eU=MP.hasOwnProperty,tU=MP.propertyIsEnumerable,nU=k4(function(){return arguments}())?k4:function(e){return Qj(e)&&eU.call(e,"callee")&&!tU.call(e,"callee")},kP=nU,rU=9007199254740991,iU=/^(?:0|[1-9]\d*)$/;function oU(e,t){var r=typeof e;return t=t==null?rU:t,!!t&&(r=="number"||r!="symbol"&&iU.test(e))&&e>-1&&e%1==0&&e<t}var PP=oU,sU=9007199254740991;function aU(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=sU}var vE=aU,lU=fE,cU=1/0;function uU(e){if(typeof e=="string"||lU(e))return e;var t=e+"";return t=="0"&&1/e==-cU?"-0":t}var px=uU,hU=AP,dU=kP,pU=hc,fU=PP,mU=vE,gU=px;function yU(e,t,r){t=hU(t,e);for(var s=-1,u=t.length,d=!1;++s<u;){var x=gU(t[s]);if(!(d=e!=null&&r(e,x)))break;e=e[x]}return d||++s!=u?d:(u=e==null?0:e.length,!!u&&mU(u)&&fU(x,u)&&(pU(e)||dU(e)))}var IP=yU,xU=j7,_U=IP;function vU(e,t){return e!=null&&_U(e,t,xU)}var Q1=vU;const DP=e=>e&&e.__isYupSchema__;class bU{constructor(t,r){if(this.fn=void 0,this.refs=t,this.refs=t,typeof r=="function"){this.fn=r;return}if(!Q1(r,"is"))throw new TypeError("`is:` is required for `when()` conditions");if(!r.then&&!r.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:s,then:u,otherwise:d}=r,x=typeof s=="function"?s:(...l)=>l.every(_=>_===s);this.fn=function(...l){let _=l.pop(),S=l.pop(),C=x(...l)?u:d;if(!!C)return typeof C=="function"?C(S):S.concat(C.resolve(_))}}resolve(t,r){let s=this.refs.map(d=>d.getValue(r==null?void 0:r.value,r==null?void 0:r.parent,r==null?void 0:r.context)),u=this.fn.apply(t,s.concat(t,r));if(u===void 0||u===t)return t;if(!DP(u))throw new TypeError("conditions must return a schema object");return u.resolve(r)}}function zP(e){return e==null?[]:[].concat(e)}function dw(){return dw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},dw.apply(this,arguments)}let wU=/\$\{\s*(\w+)\s*\}/g;class Po extends Error{static formatError(t,r){const s=r.label||r.path||"this";return s!==r.path&&(r=dw({},r,{path:s})),typeof t=="string"?t.replace(wU,(u,d)=>fm(r[d])):typeof t=="function"?t(r):t}static isError(t){return t&&t.name==="ValidationError"}constructor(t,r,s,u){super(),this.value=void 0,this.path=void 0,this.type=void 0,this.errors=void 0,this.params=void 0,this.inner=void 0,this.name="ValidationError",this.value=r,this.path=s,this.type=u,this.errors=[],this.inner=[],zP(t).forEach(d=>{Po.isError(d)?(this.errors.push(...d.errors),this.inner=this.inner.concat(d.inner.length?d.inner:d)):this.errors.push(d)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0],Error.captureStackTrace&&Error.captureStackTrace(this,Po)}}const EU=e=>{let t=!1;return(...r)=>{t||(t=!0,e(...r))}};function pw(e,t){let{endEarly:r,tests:s,args:u,value:d,errors:x,sort:l,path:_}=e,S=EU(t),C=s.length;const k=[];if(x=x||[],!C)return x.length?S(new Po(x,d,_)):S(null,d);for(let D=0;D<s.length;D++){const U=s[D];U(u,function(L){if(L){if(!Po.isError(L))return S(L,d);if(r)return L.value=d,S(L,d);k.push(L)}if(--C<=0){if(k.length&&(l&&k.sort(l),x.length&&k.push(...x),x=k),x.length){S(new Po(x,d,_),d);return}S(null,d)}})}}var TU=wu,SU=function(){try{var e=TU(Object,"defineProperty");return e({},"",{}),e}catch{}}(),CU=SU,P4=CU;function AU(e,t,r){t=="__proto__"&&P4?P4(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var NP=AU;function MU(e){return function(t,r,s){for(var u=-1,d=Object(t),x=s(t),l=x.length;l--;){var _=x[e?l:++u];if(r(d[_],_,d)===!1)break}return t}}var kU=MU,PU=kU,IU=PU(),DU=IU;function zU(e,t){for(var r=-1,s=Array(e);++r<e;)s[r]=t(r);return s}var NU=zU,ey={exports:{}};function LU(){return!1}var FU=LU;(function(e,t){var r=Ya,s=FU,u=t&&!t.nodeType&&t,d=u&&!0&&e&&!e.nodeType&&e,x=d&&d.exports===u,l=x?r.Buffer:void 0,_=l?l.isBuffer:void 0,S=_||s;e.exports=S})(ey,ey.exports);var RU=Im,OU=vE,BU=Dm,$U="[object Arguments]",jU="[object Array]",UU="[object Boolean]",VU="[object Date]",GU="[object Error]",qU="[object Function]",HU="[object Map]",WU="[object Number]",ZU="[object Object]",XU="[object RegExp]",KU="[object Set]",YU="[object String]",JU="[object WeakMap]",QU="[object ArrayBuffer]",eV="[object DataView]",tV="[object Float32Array]",nV="[object Float64Array]",rV="[object Int8Array]",iV="[object Int16Array]",oV="[object Int32Array]",sV="[object Uint8Array]",aV="[object Uint8ClampedArray]",lV="[object Uint16Array]",cV="[object Uint32Array]",mr={};mr[tV]=mr[nV]=mr[rV]=mr[iV]=mr[oV]=mr[sV]=mr[aV]=mr[lV]=mr[cV]=!0;mr[$U]=mr[jU]=mr[QU]=mr[UU]=mr[eV]=mr[VU]=mr[GU]=mr[qU]=mr[HU]=mr[WU]=mr[ZU]=mr[XU]=mr[KU]=mr[YU]=mr[JU]=!1;function uV(e){return BU(e)&&OU(e.length)&&!!mr[RU(e)]}var hV=uV;function dV(e){return function(t){return e(t)}}var pV=dV,fw={exports:{}};(function(e,t){var r=vP,s=t&&!t.nodeType&&t,u=s&&!0&&e&&!e.nodeType&&e,d=u&&u.exports===s,x=d&&r.process,l=function(){try{var _=u&&u.require&&u.require("util").types;return _||x&&x.binding&&x.binding("util")}catch{}}();e.exports=l})(fw,fw.exports);var fV=hV,mV=pV,I4=fw.exports,D4=I4&&I4.isTypedArray,gV=D4?mV(D4):fV,LP=gV,yV=NU,xV=kP,_V=hc,vV=ey.exports,bV=PP,wV=LP,EV=Object.prototype,TV=EV.hasOwnProperty;function SV(e,t){var r=_V(e),s=!r&&xV(e),u=!r&&!s&&vV(e),d=!r&&!s&&!u&&wV(e),x=r||s||u||d,l=x?yV(e.length,String):[],_=l.length;for(var S in e)(t||TV.call(e,S))&&!(x&&(S=="length"||u&&(S=="offset"||S=="parent")||d&&(S=="buffer"||S=="byteLength"||S=="byteOffset")||bV(S,_)))&&l.push(S);return l}var CV=SV,AV=Object.prototype;function MV(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||AV;return e===r}var kV=MV;function PV(e,t){return function(r){return e(t(r))}}var IV=PV,DV=IV,zV=DV(Object.keys,Object),NV=zV,LV=kV,FV=NV,RV=Object.prototype,OV=RV.hasOwnProperty;function BV(e){if(!LV(e))return FV(e);var t=[];for(var r in Object(e))OV.call(e,r)&&r!="constructor"&&t.push(r);return t}var $V=BV,jV=wP,UV=vE;function VV(e){return e!=null&&UV(e.length)&&!jV(e)}var GV=VV,qV=CV,HV=$V,WV=GV;function ZV(e){return WV(e)?qV(e):HV(e)}var bE=ZV,XV=DU,KV=bE;function YV(e,t){return e&&XV(e,t,KV)}var FP=YV,JV=hx;function QV(){this.__data__=new JV,this.size=0}var eG=QV;function tG(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var nG=tG;function rG(e){return this.__data__.get(e)}var iG=rG;function oG(e){return this.__data__.has(e)}var sG=oG,aG=hx,lG=yE,cG=xE,uG=200;function hG(e,t){var r=this.__data__;if(r instanceof aG){var s=r.__data__;if(!lG||s.length<uG-1)return s.push([e,t]),this.size=++r.size,this;r=this.__data__=new cG(s)}return r.set(e,t),this.size=r.size,this}var dG=hG,pG=hx,fG=eG,mG=nG,gG=iG,yG=sG,xG=dG;function Id(e){var t=this.__data__=new pG(e);this.size=t.size}Id.prototype.clear=fG;Id.prototype.delete=mG;Id.prototype.get=gG;Id.prototype.has=yG;Id.prototype.set=xG;var RP=Id,_G="__lodash_hash_undefined__";function vG(e){return this.__data__.set(e,_G),this}var bG=vG;function wG(e){return this.__data__.has(e)}var EG=wG,TG=xE,SG=bG,CG=EG;function ty(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new TG;++t<r;)this.add(e[t])}ty.prototype.add=ty.prototype.push=SG;ty.prototype.has=CG;var AG=ty;function MG(e,t){for(var r=-1,s=e==null?0:e.length;++r<s;)if(t(e[r],r,e))return!0;return!1}var kG=MG;function PG(e,t){return e.has(t)}var IG=PG,DG=AG,zG=kG,NG=IG,LG=1,FG=2;function RG(e,t,r,s,u,d){var x=r&LG,l=e.length,_=t.length;if(l!=_&&!(x&&_>l))return!1;var S=d.get(e),C=d.get(t);if(S&&C)return S==t&&C==e;var k=-1,D=!0,U=r&FG?new DG:void 0;for(d.set(e,t),d.set(t,e);++k<l;){var q=e[k],L=t[k];if(s)var K=x?s(L,q,k,t,e,d):s(q,L,k,e,t,d);if(K!==void 0){if(K)continue;D=!1;break}if(U){if(!zG(t,function(R,F){if(!NG(U,F)&&(q===R||u(q,R,r,s,d)))return U.push(F)})){D=!1;break}}else if(!(q===L||u(q,L,r,s,d))){D=!1;break}}return d.delete(e),d.delete(t),D}var OP=RG,OG=Ya,BG=OG.Uint8Array,$G=BG;function jG(e){var t=-1,r=Array(e.size);return e.forEach(function(s,u){r[++t]=[u,s]}),r}var UG=jG;function VG(e){var t=-1,r=Array(e.size);return e.forEach(function(s){r[++t]=s}),r}var GG=VG,z4=lx,N4=$G,qG=TP,HG=OP,WG=UG,ZG=GG,XG=1,KG=2,YG="[object Boolean]",JG="[object Date]",QG="[object Error]",eq="[object Map]",tq="[object Number]",nq="[object RegExp]",rq="[object Set]",iq="[object String]",oq="[object Symbol]",sq="[object ArrayBuffer]",aq="[object DataView]",L4=z4?z4.prototype:void 0,$v=L4?L4.valueOf:void 0;function lq(e,t,r,s,u,d,x){switch(r){case aq:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case sq:return!(e.byteLength!=t.byteLength||!d(new N4(e),new N4(t)));case YG:case JG:case tq:return qG(+e,+t);case QG:return e.name==t.name&&e.message==t.message;case nq:case iq:return e==t+"";case eq:var l=WG;case rq:var _=s&XG;if(l||(l=ZG),e.size!=t.size&&!_)return!1;var S=x.get(e);if(S)return S==t;s|=KG,x.set(e,t);var C=HG(l(e),l(t),s,u,d,x);return x.delete(e),C;case oq:if($v)return $v.call(e)==$v.call(t)}return!1}var cq=lq;function uq(e,t){for(var r=-1,s=t.length,u=e.length;++r<s;)e[u+r]=t[r];return e}var hq=uq,dq=hq,pq=hc;function fq(e,t,r){var s=t(e);return pq(e)?s:dq(s,r(e))}var mq=fq;function gq(e,t){for(var r=-1,s=e==null?0:e.length,u=0,d=[];++r<s;){var x=e[r];t(x,r,e)&&(d[u++]=x)}return d}var yq=gq;function xq(){return[]}var _q=xq,vq=yq,bq=_q,wq=Object.prototype,Eq=wq.propertyIsEnumerable,F4=Object.getOwnPropertySymbols,Tq=F4?function(e){return e==null?[]:(e=Object(e),vq(F4(e),function(t){return Eq.call(e,t)}))}:bq,Sq=Tq,Cq=mq,Aq=Sq,Mq=bE;function kq(e){return Cq(e,Mq,Aq)}var Pq=kq,R4=Pq,Iq=1,Dq=Object.prototype,zq=Dq.hasOwnProperty;function Nq(e,t,r,s,u,d){var x=r&Iq,l=R4(e),_=l.length,S=R4(t),C=S.length;if(_!=C&&!x)return!1;for(var k=_;k--;){var D=l[k];if(!(x?D in t:zq.call(t,D)))return!1}var U=d.get(e),q=d.get(t);if(U&&q)return U==t&&q==e;var L=!0;d.set(e,t),d.set(t,e);for(var K=x;++k<_;){D=l[k];var R=e[D],F=t[D];if(s)var V=x?s(F,R,D,t,e,d):s(R,F,D,e,t,d);if(!(V===void 0?R===F||u(R,F,r,s,d):V)){L=!1;break}K||(K=D=="constructor")}if(L&&!K){var J=e.constructor,re=t.constructor;J!=re&&"constructor"in e&&"constructor"in t&&!(typeof J=="function"&&J instanceof J&&typeof re=="function"&&re instanceof re)&&(L=!1)}return d.delete(e),d.delete(t),L}var Lq=Nq,Fq=wu,Rq=Ya,Oq=Fq(Rq,"DataView"),Bq=Oq,$q=wu,jq=Ya,Uq=$q(jq,"Promise"),Vq=Uq,Gq=wu,qq=Ya,Hq=Gq(qq,"Set"),Wq=Hq,Zq=wu,Xq=Ya,Kq=Zq(Xq,"WeakMap"),Yq=Kq,mw=Bq,gw=yE,yw=Vq,xw=Wq,_w=Yq,BP=Im,Dd=EP,O4="[object Map]",Jq="[object Object]",B4="[object Promise]",$4="[object Set]",j4="[object WeakMap]",U4="[object DataView]",Qq=Dd(mw),eH=Dd(gw),tH=Dd(yw),nH=Dd(xw),rH=Dd(_w),nu=BP;(mw&&nu(new mw(new ArrayBuffer(1)))!=U4||gw&&nu(new gw)!=O4||yw&&nu(yw.resolve())!=B4||xw&&nu(new xw)!=$4||_w&&nu(new _w)!=j4)&&(nu=function(e){var t=BP(e),r=t==Jq?e.constructor:void 0,s=r?Dd(r):"";if(s)switch(s){case Qq:return U4;case eH:return O4;case tH:return B4;case nH:return $4;case rH:return j4}return t});var iH=nu,jv=RP,oH=OP,sH=cq,aH=Lq,V4=iH,G4=hc,q4=ey.exports,lH=LP,cH=1,H4="[object Arguments]",W4="[object Array]",D0="[object Object]",uH=Object.prototype,Z4=uH.hasOwnProperty;function hH(e,t,r,s,u,d){var x=G4(e),l=G4(t),_=x?W4:V4(e),S=l?W4:V4(t);_=_==H4?D0:_,S=S==H4?D0:S;var C=_==D0,k=S==D0,D=_==S;if(D&&q4(e)){if(!q4(t))return!1;x=!0,C=!1}if(D&&!C)return d||(d=new jv),x||lH(e)?oH(e,t,r,s,u,d):sH(e,t,_,r,s,u,d);if(!(r&cH)){var U=C&&Z4.call(e,"__wrapped__"),q=k&&Z4.call(t,"__wrapped__");if(U||q){var L=U?e.value():e,K=q?t.value():t;return d||(d=new jv),u(L,K,r,s,d)}}return D?(d||(d=new jv),aH(e,t,r,s,u,d)):!1}var dH=hH,pH=dH,X4=Dm;function $P(e,t,r,s,u){return e===t?!0:e==null||t==null||!X4(e)&&!X4(t)?e!==e&&t!==t:pH(e,t,r,s,$P,u)}var jP=$P,fH=RP,mH=jP,gH=1,yH=2;function xH(e,t,r,s){var u=r.length,d=u,x=!s;if(e==null)return!d;for(e=Object(e);u--;){var l=r[u];if(x&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++u<d;){l=r[u];var _=l[0],S=e[_],C=l[1];if(x&&l[2]){if(S===void 0&&!(_ in e))return!1}else{var k=new fH;if(s)var D=s(S,C,_,e,t,k);if(!(D===void 0?mH(C,S,gH|yH,s,k):D))return!1}}return!0}var _H=xH,vH=gE;function bH(e){return e===e&&!vH(e)}var UP=bH,wH=UP,EH=bE;function TH(e){for(var t=EH(e),r=t.length;r--;){var s=t[r],u=e[s];t[r]=[s,u,wH(u)]}return t}var SH=TH;function CH(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var VP=CH,AH=_H,MH=SH,kH=VP;function PH(e){var t=MH(e);return t.length==1&&t[0][2]?kH(t[0][0],t[0][1]):function(r){return r===e||AH(r,e,t)}}var IH=PH,DH=AP,zH=px;function NH(e,t){t=DH(t,e);for(var r=0,s=t.length;e!=null&&r<s;)e=e[zH(t[r++])];return r&&r==s?e:void 0}var GP=NH,LH=GP;function FH(e,t,r){var s=e==null?void 0:LH(e,t);return s===void 0?r:s}var RH=FH;function OH(e,t){return e!=null&&t in Object(e)}var BH=OH,$H=BH,jH=IP;function UH(e,t){return e!=null&&jH(e,t,$H)}var VH=UH,GH=jP,qH=RH,HH=VH,WH=mE,ZH=UP,XH=VP,KH=px,YH=1,JH=2;function QH(e,t){return WH(e)&&ZH(t)?XH(KH(e),t):function(r){var s=qH(r,e);return s===void 0&&s===t?HH(r,e):GH(t,s,YH|JH)}}var eW=QH;function tW(e){return e}var nW=tW;function rW(e){return function(t){return t==null?void 0:t[e]}}var iW=rW,oW=GP;function sW(e){return function(t){return oW(t,e)}}var aW=sW,lW=iW,cW=aW,uW=mE,hW=px;function dW(e){return uW(e)?lW(hW(e)):cW(e)}var pW=dW,fW=IH,mW=eW,gW=nW,yW=hc,xW=pW;function _W(e){return typeof e=="function"?e:e==null?gW:typeof e=="object"?yW(e)?mW(e[0],e[1]):fW(e):xW(e)}var qP=_W,vW=NP,bW=FP,wW=qP;function EW(e,t){var r={};return t=wW(t),bW(e,function(s,u,d){vW(r,u,t(s,u,d))}),r}var HP=EW;function Eu(e){this._maxSize=e,this.clear()}Eu.prototype.clear=function(){this._size=0,this._values=Object.create(null)};Eu.prototype.get=function(e){return this._values[e]};Eu.prototype.set=function(e,t){return this._size>=this._maxSize&&this.clear(),e in this._values||this._size++,this._values[e]=t};var TW=/[^.^\]^[]+|(?=\[\]|\.\.)/g,WP=/^\d+$/,SW=/^\d/,CW=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,AW=/^\s*(['"]?)(.*?)(\1)\s*$/,wE=512,K4=new Eu(wE),Y4=new Eu(wE),J4=new Eu(wE),fx={Cache:Eu,split:vw,normalizePath:Uv,setter:function(e){var t=Uv(e);return Y4.get(e)||Y4.set(e,function(s,u){for(var d=0,x=t.length,l=s;d<x-1;){var _=t[d];if(_==="__proto__"||_==="constructor"||_==="prototype")return s;l=l[t[d++]]}l[t[d]]=u})},getter:function(e,t){var r=Uv(e);return J4.get(e)||J4.set(e,function(u){for(var d=0,x=r.length;d<x;)if(u!=null||!t)u=u[r[d++]];else return;return u})},join:function(e){return e.reduce(function(t,r){return t+(EE(r)||WP.test(r)?"["+r+"]":(t?".":"")+r)},"")},forEach:function(e,t,r){MW(Array.isArray(e)?e:vw(e),t,r)}};function Uv(e){return K4.get(e)||K4.set(e,vw(e).map(function(t){return t.replace(AW,"$2")}))}function vw(e){return e.match(TW)||[""]}function MW(e,t,r){var s=e.length,u,d,x,l;for(d=0;d<s;d++)u=e[d],u&&(IW(u)&&(u='"'+u+'"'),l=EE(u),x=!l&&/^\d+$/.test(u),t.call(r,u,l,x,d,e))}function EE(e){return typeof e=="string"&&e&&["'",'"'].indexOf(e.charAt(0))!==-1}function kW(e){return e.match(SW)&&!e.match(WP)}function PW(e){return CW.test(e)}function IW(e){return!EE(e)&&(kW(e)||PW(e))}const z0={context:"$",value:"."};function mx(e,t){return new Ua(e,t)}class Ua{constructor(t,r={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,typeof t!="string")throw new TypeError("ref must be a string, got: "+t);if(this.key=t.trim(),t==="")throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===z0.context,this.isValue=this.key[0]===z0.value,this.isSibling=!this.isContext&&!this.isValue;let s=this.isContext?z0.context:this.isValue?z0.value:"";this.path=this.key.slice(s.length),this.getter=this.path&&fx.getter(this.path,!0),this.map=r.map}getValue(t,r,s){let u=this.isContext?s:this.isValue?t:r;return this.getter&&(u=this.getter(u||{})),this.map&&(u=this.map(u)),u}cast(t,r){return this.getValue(t,r==null?void 0:r.parent,r==null?void 0:r.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(t){return t&&t.__isYupRef}}Ua.prototype.__isYupRef=!0;function ny(){return ny=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},ny.apply(this,arguments)}function DW(e,t){if(e==null)return{};var r={},s=Object.keys(e),u,d;for(d=0;d<s.length;d++)u=s[d],!(t.indexOf(u)>=0)&&(r[u]=e[u]);return r}function N0(e){function t(r,s){let{value:u,path:d="",label:x,options:l,originalValue:_,sync:S}=r,C=DW(r,["value","path","label","options","originalValue","sync"]);const{name:k,test:D,params:U,message:q}=e;let{parent:L,context:K}=l;function R(fe){return Ua.isRef(fe)?fe.getValue(u,L,K):fe}function F(fe={}){const be=HP(ny({value:u,originalValue:_,label:x,path:fe.path||d},U,fe.params),R),ce=new Po(Po.formatError(fe.message||q,be),u,be.path,fe.type||k);return ce.params=be,ce}let V=ny({path:d,parent:L,type:k,createError:F,resolve:R,options:l,originalValue:_},C);if(!S){try{Promise.resolve(D.call(V,u,V)).then(fe=>{Po.isError(fe)?s(fe):fe?s(null,fe):s(F())}).catch(s)}catch(fe){s(fe)}return}let J;try{var re;if(J=D.call(V,u,V),typeof((re=J)==null?void 0:re.then)=="function")throw new Error(`Validation test of type: "${V.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`)}catch(fe){s(fe);return}Po.isError(J)?s(J):J?s(null,J):s(F())}return t.OPTIONS=e,t}let zW=e=>e.substr(0,e.length-1).substr(1);function NW(e,t,r,s=r){let u,d,x;return t?(fx.forEach(t,(l,_,S)=>{let C=_?zW(l):l;if(e=e.resolve({context:s,parent:u,value:r}),e.innerType){let k=S?parseInt(C,10):0;if(r&&k>=r.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${l}, in the path: ${t}. because there is no value at that index. `);u=r,r=r&&r[k],e=e.innerType}if(!S){if(!e.fields||!e.fields[C])throw new Error(`The schema does not contain the path: ${t}. (failed at: ${x} which is a type: "${e._type}")`);u=r,r=r&&r[C],e=e.fields[C]}d=C,x=_?"["+l+"]":"."+l}),{schema:e,parent:u,parentPath:d}):{parent:u,parentPath:t,schema:e}}class ry{constructor(){this.list=void 0,this.refs=void 0,this.list=new Set,this.refs=new Map}get size(){return this.list.size+this.refs.size}describe(){const t=[];for(const r of this.list)t.push(r);for(const[,r]of this.refs)t.push(r.describe());return t}toArray(){return Array.from(this.list).concat(Array.from(this.refs.values()))}resolveAll(t){return this.toArray().reduce((r,s)=>r.concat(Ua.isRef(s)?t(s):s),[])}add(t){Ua.isRef(t)?this.refs.set(t.key,t):this.list.add(t)}delete(t){Ua.isRef(t)?this.refs.delete(t.key):this.list.delete(t)}clone(){const t=new ry;return t.list=new Set(this.list),t.refs=new Map(this.refs),t}merge(t,r){const s=this.clone();return t.list.forEach(u=>s.add(u)),t.refs.forEach(u=>s.add(u)),r.list.forEach(u=>s.delete(u)),r.refs.forEach(u=>s.delete(u)),s}}function es(){return es=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},es.apply(this,arguments)}class Xi{constructor(t){this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this._typeError=void 0,this._whitelist=new ry,this._blacklist=new ry,this.exclusiveTests=Object.create(null),this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(tu.notType)}),this.type=(t==null?void 0:t.type)||"mixed",this.spec=es({strip:!1,strict:!1,abortEarly:!0,recursive:!0,nullable:!1,presence:"optional"},t==null?void 0:t.spec)}get _type(){return this.type}_typeCheck(t){return!0}clone(t){if(this._mutate)return t&&Object.assign(this.spec,t),this;const r=Object.create(Object.getPrototypeOf(this));return r.type=this.type,r._typeError=this._typeError,r._whitelistError=this._whitelistError,r._blacklistError=this._blacklistError,r._whitelist=this._whitelist.clone(),r._blacklist=this._blacklist.clone(),r.exclusiveTests=es({},this.exclusiveTests),r.deps=[...this.deps],r.conditions=[...this.conditions],r.tests=[...this.tests],r.transforms=[...this.transforms],r.spec=cw(es({},this.spec,t)),r}label(t){let r=this.clone();return r.spec.label=t,r}meta(...t){if(t.length===0)return this.spec.meta;let r=this.clone();return r.spec.meta=Object.assign(r.spec.meta||{},t[0]),r}withMutation(t){let r=this._mutate;this._mutate=!0;let s=t(this);return this._mutate=r,s}concat(t){if(!t||t===this)return this;if(t.type!==this.type&&this.type!=="mixed")throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${t.type}`);let r=this,s=t.clone();const u=es({},r.spec,s.spec);return s.spec=u,s._typeError||(s._typeError=r._typeError),s._whitelistError||(s._whitelistError=r._whitelistError),s._blacklistError||(s._blacklistError=r._blacklistError),s._whitelist=r._whitelist.merge(t._whitelist,t._blacklist),s._blacklist=r._blacklist.merge(t._blacklist,t._whitelist),s.tests=r.tests,s.exclusiveTests=r.exclusiveTests,s.withMutation(d=>{t.tests.forEach(x=>{d.test(x.OPTIONS)})}),s.transforms=[...r.transforms,...s.transforms],s}isType(t){return this.spec.nullable&&t===null?!0:this._typeCheck(t)}resolve(t){let r=this;if(r.conditions.length){let s=r.conditions;r=r.clone(),r.conditions=[],r=s.reduce((u,d)=>d.resolve(u,t),r),r=r.resolve(t)}return r}cast(t,r={}){let s=this.resolve(es({value:t},r)),u=s._cast(t,r);if(t!==void 0&&r.assert!==!1&&s.isType(u)!==!0){let d=fm(t),x=fm(u);throw new TypeError(`The value of ${r.path||"field"} could not be cast to a value that satisfies the schema type: "${s._type}". 

attempted value: ${d} 
`+(x!==d?`result of cast: ${x}`:""))}return u}_cast(t,r){let s=t===void 0?t:this.transforms.reduce((u,d)=>d.call(this,u,t,this),t);return s===void 0&&(s=this.getDefault()),s}_validate(t,r={},s){let{sync:u,path:d,from:x=[],originalValue:l=t,strict:_=this.spec.strict,abortEarly:S=this.spec.abortEarly}=r,C=t;_||(C=this._cast(C,es({assert:!1},r)));let k={value:C,path:d,options:r,originalValue:l,schema:this,label:this.spec.label,sync:u,from:x},D=[];this._typeError&&D.push(this._typeError);let U=[];this._whitelistError&&U.push(this._whitelistError),this._blacklistError&&U.push(this._blacklistError),pw({args:k,value:C,path:d,sync:u,tests:D,endEarly:S},q=>{if(q)return void s(q,C);pw({tests:this.tests.concat(U),args:k,path:d,sync:u,value:C,endEarly:S},s)})}validate(t,r,s){let u=this.resolve(es({},r,{value:t}));return typeof s=="function"?u._validate(t,r,s):new Promise((d,x)=>u._validate(t,r,(l,_)=>{l?x(l):d(_)}))}validateSync(t,r){let s=this.resolve(es({},r,{value:t})),u;return s._validate(t,es({},r,{sync:!0}),(d,x)=>{if(d)throw d;u=x}),u}isValid(t,r){return this.validate(t,r).then(()=>!0,s=>{if(Po.isError(s))return!1;throw s})}isValidSync(t,r){try{return this.validateSync(t,r),!0}catch(s){if(Po.isError(s))return!1;throw s}}_getDefault(){let t=this.spec.default;return t==null?t:typeof t=="function"?t.call(this):cw(t)}getDefault(t){return this.resolve(t||{})._getDefault()}default(t){return arguments.length===0?this._getDefault():this.clone({default:t})}strict(t=!0){let r=this.clone();return r.spec.strict=t,r}_isPresent(t){return t!=null}defined(t=tu.defined){return this.test({message:t,name:"defined",exclusive:!0,test(r){return r!==void 0}})}required(t=tu.required){return this.clone({presence:"required"}).withMutation(r=>r.test({message:t,name:"required",exclusive:!0,test(s){return this.schema._isPresent(s)}}))}notRequired(){let t=this.clone({presence:"optional"});return t.tests=t.tests.filter(r=>r.OPTIONS.name!=="required"),t}nullable(t=!0){return this.clone({nullable:t!==!1})}transform(t){let r=this.clone();return r.transforms.push(t),r}test(...t){let r;if(t.length===1?typeof t[0]=="function"?r={test:t[0]}:r=t[0]:t.length===2?r={name:t[0],test:t[1]}:r={name:t[0],message:t[1],test:t[2]},r.message===void 0&&(r.message=tu.default),typeof r.test!="function")throw new TypeError("`test` is a required parameters");let s=this.clone(),u=N0(r),d=r.exclusive||r.name&&s.exclusiveTests[r.name]===!0;if(r.exclusive&&!r.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return r.name&&(s.exclusiveTests[r.name]=!!r.exclusive),s.tests=s.tests.filter(x=>!(x.OPTIONS.name===r.name&&(d||x.OPTIONS.test===u.OPTIONS.test))),s.tests.push(u),s}when(t,r){!Array.isArray(t)&&typeof t!="string"&&(r=t,t=".");let s=this.clone(),u=zP(t).map(d=>new Ua(d));return u.forEach(d=>{d.isSibling&&s.deps.push(d.key)}),s.conditions.push(new bU(u,r)),s}typeError(t){let r=this.clone();return r._typeError=N0({message:t,name:"typeError",test(s){return s!==void 0&&!this.schema.isType(s)?this.createError({params:{type:this.schema._type}}):!0}}),r}oneOf(t,r=tu.oneOf){let s=this.clone();return t.forEach(u=>{s._whitelist.add(u),s._blacklist.delete(u)}),s._whitelistError=N0({message:r,name:"oneOf",test(u){if(u===void 0)return!0;let d=this.schema._whitelist,x=d.resolveAll(this.resolve);return x.includes(u)?!0:this.createError({params:{values:d.toArray().join(", "),resolved:x}})}}),s}notOneOf(t,r=tu.notOneOf){let s=this.clone();return t.forEach(u=>{s._blacklist.add(u),s._whitelist.delete(u)}),s._blacklistError=N0({message:r,name:"notOneOf",test(u){let d=this.schema._blacklist,x=d.resolveAll(this.resolve);return x.includes(u)?this.createError({params:{values:d.toArray().join(", "),resolved:x}}):!0}}),s}strip(t=!0){let r=this.clone();return r.spec.strip=t,r}describe(){const t=this.clone(),{label:r,meta:s}=t.spec;return{meta:s,label:r,type:t.type,oneOf:t._whitelist.describe(),notOneOf:t._blacklist.describe(),tests:t.tests.map(d=>({name:d.OPTIONS.name,params:d.OPTIONS.params})).filter((d,x,l)=>l.findIndex(_=>_.name===d.name)===x)}}}Xi.prototype.__isYupSchema__=!0;for(const e of["validate","validateSync"])Xi.prototype[`${e}At`]=function(t,r,s={}){const{parent:u,parentPath:d,schema:x}=NW(this,t,r,s.context);return x[e](u&&u[d],es({},s,{parent:u,path:t}))};for(const e of["equals","is"])Xi.prototype[e]=Xi.prototype.oneOf;for(const e of["not","nope"])Xi.prototype[e]=Xi.prototype.notOneOf;Xi.prototype.optional=Xi.prototype.notRequired;const LW=Xi;LW.prototype;const di=e=>e==null;let FW=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,RW=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,OW=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,BW=e=>di(e)||e===e.trim(),$W={}.toString();function cr(){return new ZP}class ZP extends Xi{constructor(){super({type:"string"}),this.withMutation(()=>{this.transform(function(t){if(this.isType(t)||Array.isArray(t))return t;const r=t!=null&&t.toString?t.toString():t;return r===$W?t:r})})}_typeCheck(t){return t instanceof String&&(t=t.valueOf()),typeof t=="string"}_isPresent(t){return super._isPresent(t)&&!!t.length}length(t,r=zs.length){return this.test({message:r,name:"length",exclusive:!0,params:{length:t},test(s){return di(s)||s.length===this.resolve(t)}})}min(t,r=zs.min){return this.test({message:r,name:"min",exclusive:!0,params:{min:t},test(s){return di(s)||s.length>=this.resolve(t)}})}max(t,r=zs.max){return this.test({name:"max",exclusive:!0,message:r,params:{max:t},test(s){return di(s)||s.length<=this.resolve(t)}})}matches(t,r){let s=!1,u,d;return r&&(typeof r=="object"?{excludeEmptyString:s=!1,message:u,name:d}=r:u=r),this.test({name:d||"matches",message:u||zs.matches,params:{regex:t},test:x=>di(x)||x===""&&s||x.search(t)!==-1})}email(t=zs.email){return this.matches(FW,{name:"email",message:t,excludeEmptyString:!0})}url(t=zs.url){return this.matches(RW,{name:"url",message:t,excludeEmptyString:!0})}uuid(t=zs.uuid){return this.matches(OW,{name:"uuid",message:t,excludeEmptyString:!1})}ensure(){return this.default("").transform(t=>t===null?"":t)}trim(t=zs.trim){return this.transform(r=>r!=null?r.trim():r).test({message:t,name:"trim",test:BW})}lowercase(t=zs.lowercase){return this.transform(r=>di(r)?r:r.toLowerCase()).test({message:t,name:"string_case",exclusive:!0,test:r=>di(r)||r===r.toLowerCase()})}uppercase(t=zs.uppercase){return this.transform(r=>di(r)?r:r.toUpperCase()).test({message:t,name:"string_case",exclusive:!0,test:r=>di(r)||r===r.toUpperCase()})}}cr.prototype=ZP.prototype;let jW=e=>e!=+e;function mm(){return new XP}class XP extends Xi{constructor(){super({type:"number"}),this.withMutation(()=>{this.transform(function(t){let r=t;if(typeof r=="string"){if(r=r.replace(/\s/g,""),r==="")return NaN;r=+r}return this.isType(r)?r:parseFloat(r)})})}_typeCheck(t){return t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&!jW(t)}min(t,r=Pl.min){return this.test({message:r,name:"min",exclusive:!0,params:{min:t},test(s){return di(s)||s>=this.resolve(t)}})}max(t,r=Pl.max){return this.test({message:r,name:"max",exclusive:!0,params:{max:t},test(s){return di(s)||s<=this.resolve(t)}})}lessThan(t,r=Pl.lessThan){return this.test({message:r,name:"max",exclusive:!0,params:{less:t},test(s){return di(s)||s<this.resolve(t)}})}moreThan(t,r=Pl.moreThan){return this.test({message:r,name:"min",exclusive:!0,params:{more:t},test(s){return di(s)||s>this.resolve(t)}})}positive(t=Pl.positive){return this.moreThan(0,t)}negative(t=Pl.negative){return this.lessThan(0,t)}integer(t=Pl.integer){return this.test({name:"integer",message:t,test:r=>di(r)||Number.isInteger(r)})}truncate(){return this.transform(t=>di(t)?t:t|0)}round(t){var r;let s=["ceil","floor","round","trunc"];if(t=((r=t)==null?void 0:r.toLowerCase())||"round",t==="trunc")return this.truncate();if(s.indexOf(t.toLowerCase())===-1)throw new TypeError("Only valid options for round() are: "+s.join(", "));return this.transform(u=>di(u)?u:Math[t](u))}}mm.prototype=XP.prototype;var UW=/^(\d{4}|[+\-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;function VW(e){var t=[1,4,5,6,7,10,11],r=0,s,u;if(u=UW.exec(e)){for(var d=0,x;x=t[d];++d)u[x]=+u[x]||0;u[2]=(+u[2]||1)-1,u[3]=+u[3]||1,u[7]=u[7]?String(u[7]).substr(0,3):0,(u[8]===void 0||u[8]==="")&&(u[9]===void 0||u[9]==="")?s=+new Date(u[1],u[2],u[3],u[4],u[5],u[6],u[7]):(u[8]!=="Z"&&u[9]!==void 0&&(r=u[10]*60+u[11],u[9]==="+"&&(r=0-r)),s=Date.UTC(u[1],u[2],u[3],u[4],u[5]+r,u[6],u[7]))}else s=Date.parse?Date.parse(e):NaN;return s}let KP=new Date(""),GW=e=>Object.prototype.toString.call(e)==="[object Date]";class YP extends Xi{constructor(){super({type:"date"}),this.withMutation(()=>{this.transform(function(t){return this.isType(t)?t:(t=VW(t),isNaN(t)?KP:new Date(t))})})}_typeCheck(t){return GW(t)&&!isNaN(t.getTime())}prepareParam(t,r){let s;if(Ua.isRef(t))s=t;else{let u=this.cast(t);if(!this._typeCheck(u))throw new TypeError(`\`${r}\` must be a Date or a value that can be \`cast()\` to a Date`);s=u}return s}min(t,r=uw.min){let s=this.prepareParam(t,"min");return this.test({message:r,name:"min",exclusive:!0,params:{min:t},test(u){return di(u)||u>=this.resolve(s)}})}max(t,r=uw.max){let s=this.prepareParam(t,"max");return this.test({message:r,name:"max",exclusive:!0,params:{max:t},test(u){return di(u)||u<=this.resolve(s)}})}}YP.INVALID_DATE=KP;YP.prototype;function qW(e,t,r,s){var u=-1,d=e==null?0:e.length;for(s&&d&&(r=e[++u]);++u<d;)r=t(r,e[u],u,e);return r}var HW=qW;function WW(e){return function(t){return e==null?void 0:e[t]}}var ZW=WW,XW=ZW,KW={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},YW=XW(KW),JW=YW,QW=JW,eZ=zm,tZ=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,nZ="\\u0300-\\u036f",rZ="\\ufe20-\\ufe2f",iZ="\\u20d0-\\u20ff",oZ=nZ+rZ+iZ,sZ="["+oZ+"]",aZ=RegExp(sZ,"g");function lZ(e){return e=eZ(e),e&&e.replace(tZ,QW).replace(aZ,"")}var cZ=lZ,uZ=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function hZ(e){return e.match(uZ)||[]}var dZ=hZ,pZ=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function fZ(e){return pZ.test(e)}var mZ=fZ,JP="\\ud800-\\udfff",gZ="\\u0300-\\u036f",yZ="\\ufe20-\\ufe2f",xZ="\\u20d0-\\u20ff",_Z=gZ+yZ+xZ,QP="\\u2700-\\u27bf",eI="a-z\\xdf-\\xf6\\xf8-\\xff",vZ="\\xac\\xb1\\xd7\\xf7",bZ="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",wZ="\\u2000-\\u206f",EZ=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",tI="A-Z\\xc0-\\xd6\\xd8-\\xde",TZ="\\ufe0e\\ufe0f",nI=vZ+bZ+wZ+EZ,rI="['\u2019]",Q4="["+nI+"]",SZ="["+_Z+"]",iI="\\d+",CZ="["+QP+"]",oI="["+eI+"]",sI="[^"+JP+nI+iI+QP+eI+tI+"]",AZ="\\ud83c[\\udffb-\\udfff]",MZ="(?:"+SZ+"|"+AZ+")",kZ="[^"+JP+"]",aI="(?:\\ud83c[\\udde6-\\uddff]){2}",lI="[\\ud800-\\udbff][\\udc00-\\udfff]",Ph="["+tI+"]",PZ="\\u200d",eA="(?:"+oI+"|"+sI+")",IZ="(?:"+Ph+"|"+sI+")",tA="(?:"+rI+"(?:d|ll|m|re|s|t|ve))?",nA="(?:"+rI+"(?:D|LL|M|RE|S|T|VE))?",cI=MZ+"?",uI="["+TZ+"]?",DZ="(?:"+PZ+"(?:"+[kZ,aI,lI].join("|")+")"+uI+cI+")*",zZ="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",NZ="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",LZ=uI+cI+DZ,FZ="(?:"+[CZ,aI,lI].join("|")+")"+LZ,RZ=RegExp([Ph+"?"+oI+"+"+tA+"(?="+[Q4,Ph,"$"].join("|")+")",IZ+"+"+nA+"(?="+[Q4,Ph+eA,"$"].join("|")+")",Ph+"?"+eA+"+"+tA,Ph+"+"+nA,NZ,zZ,iI,FZ].join("|"),"g");function OZ(e){return e.match(RZ)||[]}var BZ=OZ,$Z=dZ,jZ=mZ,UZ=zm,VZ=BZ;function GZ(e,t,r){return e=UZ(e),t=r?void 0:t,t===void 0?jZ(e)?VZ(e):$Z(e):e.match(t)||[]}var qZ=GZ,HZ=HW,WZ=cZ,ZZ=qZ,XZ="['\u2019]",KZ=RegExp(XZ,"g");function YZ(e){return function(t){return HZ(ZZ(WZ(t).replace(KZ,"")),e,"")}}var hI=YZ,JZ=hI,QZ=JZ(function(e,t,r){return e+(r?"_":"")+t.toLowerCase()}),rA=QZ;function eX(e,t,r){var s=-1,u=e.length;t<0&&(t=-t>u?0:u+t),r=r>u?u:r,r<0&&(r+=u),u=t>r?0:r-t>>>0,t>>>=0;for(var d=Array(u);++s<u;)d[s]=e[s+t];return d}var tX=eX,nX=tX;function rX(e,t,r){var s=e.length;return r=r===void 0?s:r,!t&&r>=s?e:nX(e,t,r)}var iX=rX,oX="\\ud800-\\udfff",sX="\\u0300-\\u036f",aX="\\ufe20-\\ufe2f",lX="\\u20d0-\\u20ff",cX=sX+aX+lX,uX="\\ufe0e\\ufe0f",hX="\\u200d",dX=RegExp("["+hX+oX+cX+uX+"]");function pX(e){return dX.test(e)}var dI=pX;function fX(e){return e.split("")}var mX=fX,pI="\\ud800-\\udfff",gX="\\u0300-\\u036f",yX="\\ufe20-\\ufe2f",xX="\\u20d0-\\u20ff",_X=gX+yX+xX,vX="\\ufe0e\\ufe0f",bX="["+pI+"]",bw="["+_X+"]",ww="\\ud83c[\\udffb-\\udfff]",wX="(?:"+bw+"|"+ww+")",fI="[^"+pI+"]",mI="(?:\\ud83c[\\udde6-\\uddff]){2}",gI="[\\ud800-\\udbff][\\udc00-\\udfff]",EX="\\u200d",yI=wX+"?",xI="["+vX+"]?",TX="(?:"+EX+"(?:"+[fI,mI,gI].join("|")+")"+xI+yI+")*",SX=xI+yI+TX,CX="(?:"+[fI+bw+"?",bw,mI,gI,bX].join("|")+")",AX=RegExp(ww+"(?="+ww+")|"+CX+SX,"g");function MX(e){return e.match(AX)||[]}var kX=MX,PX=mX,IX=dI,DX=kX;function zX(e){return IX(e)?DX(e):PX(e)}var NX=zX,LX=iX,FX=dI,RX=NX,OX=zm;function BX(e){return function(t){t=OX(t);var r=FX(t)?RX(t):void 0,s=r?r[0]:t.charAt(0),u=r?LX(r,1).join(""):t.slice(1);return s[e]()+u}}var $X=BX,jX=$X,UX=jX("toUpperCase"),VX=UX,GX=zm,qX=VX;function HX(e){return qX(GX(e).toLowerCase())}var WX=HX,ZX=WX,XX=hI,KX=XX(function(e,t,r){return t=t.toLowerCase(),e+(r?ZX(t):t)}),YX=KX,JX=NP,QX=FP,eK=qP;function tK(e,t){var r={};return t=eK(t),QX(e,function(s,u,d){JX(r,t(s,u,d),s)}),r}var nK=tK,TE={exports:{}};TE.exports=function(e){return _I(rK(e),e)};TE.exports.array=_I;function _I(e,t){var r=e.length,s=new Array(r),u={},d=r,x=iK(t),l=oK(e);for(t.forEach(function(S){if(!l.has(S[0])||!l.has(S[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});d--;)u[d]||_(e[d],d,new Set);return s;function _(S,C,k){if(k.has(S)){var D;try{D=", node was:"+JSON.stringify(S)}catch{D=""}throw new Error("Cyclic dependency"+D)}if(!l.has(S))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(S));if(!u[C]){u[C]=!0;var U=x.get(S)||new Set;if(U=Array.from(U),C=U.length){k.add(S);do{var q=U[--C];_(q,l.get(q),k)}while(C);k.delete(S)}s[--r]=S}}}function rK(e){for(var t=new Set,r=0,s=e.length;r<s;r++){var u=e[r];t.add(u[0]),t.add(u[1])}return Array.from(t)}function iK(e){for(var t=new Map,r=0,s=e.length;r<s;r++){var u=e[r];t.has(u[0])||t.set(u[0],new Set),t.has(u[1])||t.set(u[1],new Set),t.get(u[0]).add(u[1])}return t}function oK(e){for(var t=new Map,r=0,s=e.length;r<s;r++)t.set(e[r],r);return t}var sK=TE.exports;function aK(e,t=[]){let r=[],s=new Set,u=new Set(t.map(([x,l])=>`${x}-${l}`));function d(x,l){let _=fx.split(x)[0];s.add(_),u.has(`${l}-${_}`)||r.push([l,_])}for(const x in e)if(Q1(e,x)){let l=e[x];s.add(x),Ua.isRef(l)&&l.isSibling?d(l.path,x):DP(l)&&"deps"in l&&l.deps.forEach(_=>d(_,x))}return sK.array(Array.from(s),r).reverse()}function iA(e,t){let r=1/0;return e.some((s,u)=>{var d;if(((d=t.path)==null?void 0:d.indexOf(s))!==-1)return r=u,!0}),r}function vI(e){return(t,r)=>iA(e,t)-iA(e,r)}function qh(){return qh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},qh.apply(this,arguments)}let oA=e=>Object.prototype.toString.call(e)==="[object Object]";function lK(e,t){let r=Object.keys(e.fields);return Object.keys(t).filter(s=>r.indexOf(s)===-1)}const cK=vI([]);class bI extends Xi{constructor(t){super({type:"object"}),this.fields=Object.create(null),this._sortErrors=cK,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{this.transform(function(s){if(typeof s=="string")try{s=JSON.parse(s)}catch{s=null}return this.isType(s)?s:null}),t&&this.shape(t)})}_typeCheck(t){return oA(t)||typeof t=="function"}_cast(t,r={}){var s;let u=super._cast(t,r);if(u===void 0)return this.getDefault();if(!this._typeCheck(u))return u;let d=this.fields,x=(s=r.stripUnknown)!=null?s:this.spec.noUnknown,l=this._nodes.concat(Object.keys(u).filter(k=>this._nodes.indexOf(k)===-1)),_={},S=qh({},r,{parent:_,__validating:r.__validating||!1}),C=!1;for(const k of l){let D=d[k],U=Q1(u,k);if(D){let q,L=u[k];S.path=(r.path?`${r.path}.`:"")+k,D=D.resolve({value:L,context:r.context,parent:_});let K="spec"in D?D.spec:void 0,R=K==null?void 0:K.strict;if(K!=null&&K.strip){C=C||k in u;continue}q=!r.__validating||!R?D.cast(u[k],S):u[k],q!==void 0&&(_[k]=q)}else U&&!x&&(_[k]=u[k]);_[k]!==u[k]&&(C=!0)}return C?_:u}_validate(t,r={},s){let u=[],{sync:d,from:x=[],originalValue:l=t,abortEarly:_=this.spec.abortEarly,recursive:S=this.spec.recursive}=r;x=[{schema:this,value:l},...x],r.__validating=!0,r.originalValue=l,r.from=x,super._validate(t,r,(C,k)=>{if(C){if(!Po.isError(C)||_)return void s(C,k);u.push(C)}if(!S||!oA(k)){s(u[0]||null,k);return}l=l||k;let D=this._nodes.map(U=>(q,L)=>{let K=U.indexOf(".")===-1?(r.path?`${r.path}.`:"")+U:`${r.path||""}["${U}"]`,R=this.fields[U];if(R&&"validate"in R){R.validate(k[U],qh({},r,{path:K,from:x,strict:!0,parent:k,originalValue:l[U]}),L);return}L(null)});pw({sync:d,tests:D,value:k,errors:u,endEarly:_,sort:this._sortErrors,path:r.path},s)})}clone(t){const r=super.clone(t);return r.fields=qh({},this.fields),r._nodes=this._nodes,r._excludedEdges=this._excludedEdges,r._sortErrors=this._sortErrors,r}concat(t){let r=super.concat(t),s=r.fields;for(let[u,d]of Object.entries(this.fields)){const x=s[u];x===void 0?s[u]=d:x instanceof Xi&&d instanceof Xi&&(s[u]=d.concat(x))}return r.withMutation(()=>r.shape(s,this._excludedEdges))}getDefaultFromShape(){let t={};return this._nodes.forEach(r=>{const s=this.fields[r];t[r]="default"in s?s.getDefault():void 0}),t}_getDefault(){if("default"in this.spec)return super._getDefault();if(!!this._nodes.length)return this.getDefaultFromShape()}shape(t,r=[]){let s=this.clone(),u=Object.assign(s.fields,t);return s.fields=u,s._sortErrors=vI(Object.keys(u)),r.length&&(Array.isArray(r[0])||(r=[r]),s._excludedEdges=[...s._excludedEdges,...r]),s._nodes=aK(u,s._excludedEdges),s}pick(t){const r={};for(const s of t)this.fields[s]&&(r[s]=this.fields[s]);return this.clone().withMutation(s=>(s.fields={},s.shape(r)))}omit(t){const r=this.clone(),s=r.fields;r.fields={};for(const u of t)delete s[u];return r.withMutation(()=>r.shape(s))}from(t,r,s){let u=fx.getter(t,!0);return this.transform(d=>{if(d==null)return d;let x=d;return Q1(d,t)&&(x=qh({},d),s||delete x[t],x[r]=u(d)),x})}noUnknown(t=!0,r=hw.noUnknown){typeof t=="string"&&(r=t,t=!0);let s=this.test({name:"noUnknown",exclusive:!0,message:r,test(u){if(u==null)return!0;const d=lK(this.schema,u);return!t||d.length===0||this.createError({params:{unknown:d.join(", ")}})}});return s.spec.noUnknown=t,s}unknown(t=!0,r=hw.noUnknown){return this.noUnknown(!t,r)}transformKeys(t){return this.transform(r=>r&&nK(r,(s,u)=>t(u)))}camelCase(){return this.transformKeys(YX)}snakeCase(){return this.transformKeys(rA)}constantCase(){return this.transformKeys(t=>rA(t).toUpperCase())}describe(){let t=super.describe();return t.fields=HP(this.fields,r=>r.describe()),t}}function Tu(e){return new bI(e)}Tu.prototype=bI.prototype;var sA=function(e,t,r){if(e&&"reportValidity"in e){var s=Ft(r,t);e.setCustomValidity(s&&s.message||""),e.reportValidity()}},wI=function(e,t){var r=function(u){var d=t.fields[u];d&&d.ref&&"reportValidity"in d.ref?sA(d.ref,u,e):d.refs&&d.refs.forEach(function(x){return sA(x,u,e)})};for(var s in t.fields)r(s)},uK=function(e,t){t.shouldUseNativeValidation&&wI(e,t);var r={};for(var s in e){var u=Ft(t.fields,s);rr(r,s,Object.assign(e[s],{ref:u&&u.ref}))}return r},zd=function(e,t,r){return t===void 0&&(t={}),r===void 0&&(r={}),function(s,u,d){try{return Promise.resolve(function(x,l){try{var _=(t.context,Promise.resolve(e[r.mode==="sync"?"validateSync":"validate"](s,Object.assign({abortEarly:!1},t,{context:u}))).then(function(S){return d.shouldUseNativeValidation&&wI({},d),{values:r.rawValues?s:S,errors:{}}}))}catch(S){return l(S)}return _&&_.then?_.then(void 0,l):_}(0,function(x){if(!x.inner)throw x;return{values:{},errors:uK((l=x,_=!d.shouldUseNativeValidation&&d.criteriaMode==="all",(l.inner||[]).reduce(function(S,C){if(S[C.path]||(S[C.path]={message:C.message,type:C.type}),_){var k=S[C.path].types,D=k&&k[C.type];S[C.path]=uP(C.path,_,S,C.type,D?[].concat(D,C.message):C.message)}return S},{})),d)};var l,_}))}catch(x){return Promise.reject(x)}}};const hK="_buttonHover_139fg_1";var dK={buttonHover:hK};function EI(e){var t,r,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var u=e.length;for(t=0;t<u;t++)e[t]&&(r=EI(e[t]))&&(s&&(s+=" "),s+=r)}else for(r in e)e[r]&&(s&&(s+=" "),s+=r);return s}function Ul(){for(var e,t,r=0,s="",u=arguments.length;r<u;r++)(e=arguments[r])&&(t=EI(e))&&(s&&(s+=" "),s+=t);return s}const gm=e=>typeof e=="number"&&!isNaN(e),hu=e=>typeof e=="string",Io=e=>typeof e=="function",l1=e=>hu(e)||Io(e)?e:null,Ew=e=>ne.exports.isValidElement(e)||hu(e)||Io(e)||gm(e);function pK(e,t,r){r===void 0&&(r=300);const{scrollHeight:s,style:u}=e;requestAnimationFrame(()=>{u.minHeight="initial",u.height=s+"px",u.transition=`all ${r}ms`,requestAnimationFrame(()=>{u.height="0",u.padding="0",u.margin="0",setTimeout(t,r)})})}function gx(e){let{enter:t,exit:r,appendPosition:s=!1,collapse:u=!0,collapseDuration:d=300}=e;return function(x){let{children:l,position:_,preventExitTransition:S,done:C,nodeRef:k,isIn:D,playToast:U}=x;const q=s?`${t}--${_}`:t,L=s?`${r}--${_}`:r,K=ne.exports.useRef(0);return ne.exports.useLayoutEffect(()=>{const R=k.current,F=q.split(" "),V=J=>{J.target===k.current&&(U(),R.removeEventListener("animationend",V),R.removeEventListener("animationcancel",V),K.current===0&&J.type!=="animationcancel"&&R.classList.remove(...F))};R.classList.add(...F),R.addEventListener("animationend",V),R.addEventListener("animationcancel",V)},[]),ne.exports.useEffect(()=>{const R=k.current,F=()=>{R.removeEventListener("animationend",F),u?pK(R,C,d):C()};D||(S?F():(K.current=1,R.className+=` ${L}`,R.addEventListener("animationend",F)))},[D]),zt.createElement(zt.Fragment,null,l)}}function aA(e,t){return e!=null?{content:e.content,containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,status:t}:{}}const Hi=new Map;let ym=[];const Tw=new Set,fK=e=>Tw.forEach(t=>t(e)),TI=()=>Hi.size>0;function SI(e,t){var r;if(t)return!((r=Hi.get(t))==null||!r.isToastActive(e));let s=!1;return Hi.forEach(u=>{u.isToastActive(e)&&(s=!0)}),s}function CI(e,t){Ew(e)&&(TI()||ym.push({content:e,options:t}),Hi.forEach(r=>{r.buildToast(e,t)}))}function lA(e,t){Hi.forEach(r=>{t!=null&&t!=null&&t.containerId?(t==null?void 0:t.containerId)===r.id&&r.toggle(e,t==null?void 0:t.id):r.toggle(e,t==null?void 0:t.id)})}function mK(e){const{subscribe:t,getSnapshot:r,setProps:s}=ne.exports.useRef(function(d){const x=d.containerId||1;return{subscribe(l){const _=function(C,k,D){let U=1,q=0,L=[],K=[],R=[],F=k;const V=new Map,J=new Set,re=()=>{R=Array.from(V.values()),J.forEach(ce=>ce())},fe=ce=>{K=ce==null?[]:K.filter(ve=>ve!==ce),re()},be=ce=>{const{toastId:ve,onOpen:Fe,updateId:Le,children:Ie}=ce.props,Ke=Le==null;ce.staleId&&V.delete(ce.staleId),V.set(ve,ce),K=[...K,ce.props.toastId].filter(bt=>bt!==ce.staleId),re(),D(aA(ce,Ke?"added":"updated")),Ke&&Io(Fe)&&Fe(ne.exports.isValidElement(Ie)&&Ie.props)};return{id:C,props:F,observe:ce=>(J.add(ce),()=>J.delete(ce)),toggle:(ce,ve)=>{V.forEach(Fe=>{ve!=null&&ve!==Fe.props.toastId||Io(Fe.toggle)&&Fe.toggle(ce)})},removeToast:fe,toasts:V,clearQueue:()=>{q-=L.length,L=[]},buildToast:(ce,ve)=>{if((mt=>{let{containerId:Et,toastId:jt,updateId:en}=mt;const nn=Et?Et!==C:C!==1,vn=V.has(jt)&&en==null;return nn||vn})(ve))return;const{toastId:Fe,updateId:Le,data:Ie,staleId:Ke,delay:bt}=ve,ot=()=>{fe(Fe)},Ot=Le==null;Ot&&q++;const Dt={...F,style:F.toastStyle,key:U++,...Object.fromEntries(Object.entries(ve).filter(mt=>{let[Et,jt]=mt;return jt!=null})),toastId:Fe,updateId:Le,data:Ie,closeToast:ot,isIn:!1,className:l1(ve.className||F.toastClassName),bodyClassName:l1(ve.bodyClassName||F.bodyClassName),progressClassName:l1(ve.progressClassName||F.progressClassName),autoClose:!ve.isLoading&&(Ze=ve.autoClose,Ye=F.autoClose,Ze===!1||gm(Ze)&&Ze>0?Ze:Ye),deleteToast(){const mt=V.get(Fe),{onClose:Et,children:jt}=mt.props;Io(Et)&&Et(ne.exports.isValidElement(jt)&&jt.props),D(aA(mt,"removed")),V.delete(Fe),q--,q<0&&(q=0),L.length>0?be(L.shift()):re()}};var Ze,Ye;Dt.closeButton=F.closeButton,ve.closeButton===!1||Ew(ve.closeButton)?Dt.closeButton=ve.closeButton:ve.closeButton===!0&&(Dt.closeButton=!Ew(F.closeButton)||F.closeButton);let De=ce;ne.exports.isValidElement(ce)&&!hu(ce.type)?De=ne.exports.cloneElement(ce,{closeToast:ot,toastProps:Dt,data:Ie}):Io(ce)&&(De=ce({closeToast:ot,toastProps:Dt,data:Ie}));const _t={content:De,props:Dt,staleId:Ke};F.limit&&F.limit>0&&q>F.limit&&Ot?L.push(_t):gm(bt)?setTimeout(()=>{be(_t)},bt):be(_t)},setProps(ce){F=ce},setToggle:(ce,ve)=>{V.get(ce).toggle=ve},isToastActive:ce=>K.some(ve=>ve===ce),getSnapshot:()=>F.newestOnTop?R.reverse():R}}(x,d,fK);Hi.set(x,_);const S=_.observe(l);return ym.forEach(C=>CI(C.content,C.options)),ym=[],()=>{S(),Hi.delete(x)}},setProps(l){var _;(_=Hi.get(x))==null||_.setProps(l)},getSnapshot(){var l;return(l=Hi.get(x))==null?void 0:l.getSnapshot()}}}(e)).current;s(e);const u=ne.exports.useSyncExternalStore(t,r,r);return{getToastToRender:function(d){if(!u)return[];const x=new Map;return u.forEach(l=>{const{position:_}=l.props;x.has(_)||x.set(_,[]),x.get(_).push(l)}),Array.from(x,l=>d(l[0],l[1]))},isToastActive:SI,count:u==null?void 0:u.length}}function gK(e){const[t,r]=ne.exports.useState(!1),[s,u]=ne.exports.useState(!1),d=ne.exports.useRef(null),x=ne.exports.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:l,pauseOnHover:_,closeToast:S,onClick:C,closeOnClick:k}=e;var D,U;function q(){r(!0)}function L(){r(!1)}function K(V){const J=d.current;x.canDrag&&J&&(x.didMove=!0,t&&L(),x.delta=e.draggableDirection==="x"?V.clientX-x.start:V.clientY-x.start,x.start!==V.clientX&&(x.canCloseOnClick=!1),J.style.transform=`translate3d(${e.draggableDirection==="x"?`${x.delta}px, var(--y)`:`0, calc(${x.delta}px + var(--y))`},0)`,J.style.opacity=""+(1-Math.abs(x.delta/x.removalDistance)))}function R(){document.removeEventListener("pointermove",K),document.removeEventListener("pointerup",R);const V=d.current;if(x.canDrag&&x.didMove&&V){if(x.canDrag=!1,Math.abs(x.delta)>x.removalDistance)return u(!0),e.closeToast(),void e.collapseAll();V.style.transition="transform 0.2s, opacity 0.2s",V.style.removeProperty("transform"),V.style.removeProperty("opacity")}}(U=Hi.get((D={id:e.toastId,containerId:e.containerId,fn:r}).containerId||1))==null||U.setToggle(D.id,D.fn),ne.exports.useEffect(()=>{if(e.pauseOnFocusLoss)return document.hasFocus()||L(),window.addEventListener("focus",q),window.addEventListener("blur",L),()=>{window.removeEventListener("focus",q),window.removeEventListener("blur",L)}},[e.pauseOnFocusLoss]);const F={onPointerDown:function(V){if(e.draggable===!0||e.draggable===V.pointerType){x.didMove=!1,document.addEventListener("pointermove",K),document.addEventListener("pointerup",R);const J=d.current;x.canCloseOnClick=!0,x.canDrag=!0,J.style.transition="none",e.draggableDirection==="x"?(x.start=V.clientX,x.removalDistance=J.offsetWidth*(e.draggablePercent/100)):(x.start=V.clientY,x.removalDistance=J.offsetHeight*(e.draggablePercent===80?1.5*e.draggablePercent:e.draggablePercent)/100)}},onPointerUp:function(V){const{top:J,bottom:re,left:fe,right:be}=d.current.getBoundingClientRect();V.nativeEvent.type!=="touchend"&&e.pauseOnHover&&V.clientX>=fe&&V.clientX<=be&&V.clientY>=J&&V.clientY<=re?L():q()}};return l&&_&&(F.onMouseEnter=L,e.stacked||(F.onMouseLeave=q)),k&&(F.onClick=V=>{C&&C(V),x.canCloseOnClick&&S()}),{playToast:q,pauseToast:L,isRunning:t,preventExitTransition:s,toastRef:d,eventHandlers:F}}function yK(e){let{delay:t,isRunning:r,closeToast:s,type:u="default",hide:d,className:x,style:l,controlledProgress:_,progress:S,rtl:C,isIn:k,theme:D}=e;const U=d||_&&S===0,q={...l,animationDuration:`${t}ms`,animationPlayState:r?"running":"paused"};_&&(q.transform=`scaleX(${S})`);const L=Ul("Toastify__progress-bar",_?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${D}`,`Toastify__progress-bar--${u}`,{"Toastify__progress-bar--rtl":C}),K=Io(x)?x({rtl:C,type:u,defaultClassName:L}):Ul(L,x),R={[_&&S>=1?"onTransitionEnd":"onAnimationEnd"]:_&&S<1?null:()=>{k&&s()}};return zt.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":U},zt.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${D} Toastify__progress-bar--${u}`}),zt.createElement("div",{role:"progressbar","aria-hidden":U?"true":"false","aria-label":"notification timer",className:K,style:q,...R}))}let xK=1;const AI=()=>""+xK++;function _K(e){return e&&(hu(e.toastId)||gm(e.toastId))?e.toastId:AI()}function qf(e,t){return CI(e,t),t.toastId}function iy(e,t){return{...t,type:t&&t.type||e,toastId:_K(t)}}function L0(e){return(t,r)=>qf(t,iy(e,r))}function Yt(e,t){return qf(e,iy("default",t))}Yt.loading=(e,t)=>qf(e,iy("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t})),Yt.promise=function(e,t,r){let s,{pending:u,error:d,success:x}=t;u&&(s=hu(u)?Yt.loading(u,r):Yt.loading(u.render,{...r,...u}));const l={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},_=(C,k,D)=>{if(k==null)return void Yt.dismiss(s);const U={type:C,...l,...r,data:D},q=hu(k)?{render:k}:k;return s?Yt.update(s,{...U,...q}):Yt(q.render,{...U,...q}),D},S=Io(e)?e():e;return S.then(C=>_("success",x,C)).catch(C=>_("error",d,C)),S},Yt.success=L0("success"),Yt.info=L0("info"),Yt.error=L0("error"),Yt.warning=L0("warning"),Yt.warn=Yt.warning,Yt.dark=(e,t)=>qf(e,iy("default",{theme:"dark",...t})),Yt.dismiss=function(e){(function(t){var r;if(TI()){if(t==null||hu(r=t)||gm(r))Hi.forEach(s=>{s.removeToast(t)});else if(t&&("containerId"in t||"id"in t)){const s=Hi.get(t.containerId);s?s.removeToast(t.id):Hi.forEach(u=>{u.removeToast(t.id)})}}else ym=ym.filter(s=>t!=null&&s.options.toastId!==t)})(e)},Yt.clearWaitingQueue=function(e){e===void 0&&(e={}),Hi.forEach(t=>{!t.props.limit||e.containerId&&t.id!==e.containerId||t.clearQueue()})},Yt.isActive=SI,Yt.update=function(e,t){t===void 0&&(t={});const r=((s,u)=>{var d;let{containerId:x}=u;return(d=Hi.get(x||1))==null?void 0:d.toasts.get(s)})(e,t);if(r){const{props:s,content:u}=r,d={delay:100,...s,...t,toastId:t.toastId||e,updateId:AI()};d.toastId!==e&&(d.staleId=e);const x=d.render||u;delete d.render,qf(x,d)}},Yt.done=e=>{Yt.update(e,{progress:1})},Yt.onChange=function(e){return Tw.add(e),()=>{Tw.delete(e)}},Yt.play=e=>lA(!0,e),Yt.pause=e=>lA(!1,e);const vK=typeof window!="undefined"?ne.exports.useLayoutEffect:ne.exports.useEffect,F0=e=>{let{theme:t,type:r,isLoading:s,...u}=e;return zt.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:t==="colored"?"currentColor":`var(--toastify-icon-color-${r})`,...u})},Vv={info:function(e){return zt.createElement(F0,{...e},zt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return zt.createElement(F0,{...e},zt.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return zt.createElement(F0,{...e},zt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return zt.createElement(F0,{...e},zt.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return zt.createElement("div",{className:"Toastify__spinner"})}},bK=e=>{const{isRunning:t,preventExitTransition:r,toastRef:s,eventHandlers:u,playToast:d}=gK(e),{closeButton:x,children:l,autoClose:_,onClick:S,type:C,hideProgressBar:k,closeToast:D,transition:U,position:q,className:L,style:K,bodyClassName:R,bodyStyle:F,progressClassName:V,progressStyle:J,updateId:re,role:fe,progress:be,rtl:ce,toastId:ve,deleteToast:Fe,isIn:Le,isLoading:Ie,closeOnClick:Ke,theme:bt}=e,ot=Ul("Toastify__toast",`Toastify__toast-theme--${bt}`,`Toastify__toast--${C}`,{"Toastify__toast--rtl":ce},{"Toastify__toast--close-on-click":Ke}),Ot=Io(L)?L({rtl:ce,position:q,type:C,defaultClassName:ot}):Ul(ot,L),Dt=function(_t){let{theme:mt,type:Et,isLoading:jt,icon:en}=_t,nn=null;const vn={theme:mt,type:Et};return en===!1||(Io(en)?nn=en({...vn,isLoading:jt}):ne.exports.isValidElement(en)?nn=ne.exports.cloneElement(en,vn):jt?nn=Vv.spinner():(Bt=>Bt in Vv)(Et)&&(nn=Vv[Et](vn))),nn}(e),Ze=!!be||!_,Ye={closeToast:D,type:C,theme:bt};let De=null;return x===!1||(De=Io(x)?x(Ye):ne.exports.isValidElement(x)?ne.exports.cloneElement(x,Ye):function(_t){let{closeToast:mt,theme:Et,ariaLabel:jt="close"}=_t;return zt.createElement("button",{className:`Toastify__close-button Toastify__close-button--${Et}`,type:"button",onClick:en=>{en.stopPropagation(),mt(en)},"aria-label":jt},zt.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},zt.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(Ye)),zt.createElement(U,{isIn:Le,done:Fe,position:q,preventExitTransition:r,nodeRef:s,playToast:d},zt.createElement("div",{id:ve,onClick:S,"data-in":Le,className:Ot,...u,style:K,ref:s},zt.createElement("div",{...Le&&{role:fe},className:Io(R)?R({type:C}):Ul("Toastify__toast-body",R),style:F},Dt!=null&&zt.createElement("div",{className:Ul("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!Ie})},Dt),zt.createElement("div",null,l)),De,zt.createElement(yK,{...re&&!Ze?{key:`pb-${re}`}:{},rtl:ce,theme:bt,delay:_,isRunning:t,isIn:Le,closeToast:D,hide:k,type:C,style:J,className:V,controlledProgress:Ze,progress:be||0})))},yx=function(e,t){return t===void 0&&(t=!1),{enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}},wK=gx(yx("bounce",!0));gx(yx("slide",!0));gx(yx("zoom"));gx(yx("flip"));const EK={position:"top-right",transition:wK,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};function TK(e){let t={...EK,...e};const r=e.stacked,[s,u]=ne.exports.useState(!0),d=ne.exports.useRef(null),{getToastToRender:x,isToastActive:l,count:_}=mK(t),{className:S,style:C,rtl:k,containerId:D}=t;function U(L){const K=Ul("Toastify__toast-container",`Toastify__toast-container--${L}`,{"Toastify__toast-container--rtl":k});return Io(S)?S({position:L,rtl:k,defaultClassName:K}):Ul(K,l1(S))}function q(){r&&(u(!0),Yt.play())}return vK(()=>{if(r){var L;const K=d.current.querySelectorAll('[data-in="true"]'),R=12,F=(L=t.position)==null?void 0:L.includes("top");let V=0,J=0;Array.from(K).reverse().forEach((re,fe)=>{const be=re;be.classList.add("Toastify__toast--stacked"),fe>0&&(be.dataset.collapsed=`${s}`),be.dataset.pos||(be.dataset.pos=F?"top":"bot");const ce=V*(s?.2:1)+(s?0:R*fe);be.style.setProperty("--y",`${F?ce:-1*ce}px`),be.style.setProperty("--g",`${R}`),be.style.setProperty("--s",""+(1-(s?J:0))),V+=be.offsetHeight,J+=.025})}},[s,_,r]),zt.createElement("div",{ref:d,className:"Toastify",id:D,onMouseEnter:()=>{r&&(u(!1),Yt.pause())},onMouseLeave:q},x((L,K)=>{const R=K.length?{...C}:{...C,pointerEvents:"none"};return zt.createElement("div",{className:U(L),style:R,key:`container-${L}`},K.map(F=>{let{content:V,props:J}=F;return zt.createElement(bK,{...J,stacked:r,collapseAll:q,isIn:l(J.toastId,J.containerId),style:J.style,key:`toast-${J.key}`},V)}))}))}const SK=Tu({password:cr().trim().required("Vui l\xF2ng nh\u1EADp m\u1EADt kh\u1EA9u c\u1EE7a b\u1EA1n.").min(6,"Password \xEDt nh\u1EA5t l\xE0 6 k\xED t\u1EF1."),passwordConfirm:cr().trim().required("Vui l\xF2ng x\xE1c nh\u1EADn l\u1EA1i m\u1EADt kh\u1EA9u.").oneOf([mx("password")],"M\u1EADt kh\u1EA9u nh\u1EADp l\u1EA1i kh\xF4ng ch\xEDnh x\xE1c")});function CK(e){var J,re;const t=yr(),r=Ji(),[s,u]=ne.exports.useState(!1),[d,x]=ne.exports.useState(""),[l,_]=ne.exports.useState(!1),[S,C]=ne.exports.useState(""),{control:k,handleSubmit:D,setValue:U,formState:q}=us({mode:"onSubmit",reValidateMode:"onSubmit",resolver:zd(SK)}),L=fe=>{x(fe)},K=((J=r.state)==null?void 0:J.type)||"none",R=((re=r.state)==null?void 0:re.email)||"example@example.com";ne.exports.useEffect(()=>{if(K==="none"){t("/");return}if(R==="example@example.com"){Yt.error("C\xF3 l\u1ED7i x\u1EA3y ra vui l\xF2ng th\u1EED l\u1EA1i sau!"),t("/");return}},[]);const F=async()=>{try{_(!0),K==="forgot"?(await Zi.validateResetPassword({email:R,otp:d}),u(!0)):await Zi.validateRegistration({email:R,otp:d}),_(!1)}catch{_(!1)}},V=async fe=>{try{await Zi.handleResetPassword({email:R,password:fe==null?void 0:fe.password,retypePassword:fe==null?void 0:fe.passwordConfirm}),t("/")}catch(be){C(be==null?void 0:be.message)}};return T("div",{className:`${K!="none"?"flex":"hidden"} justify-center items-center`,children:s?H("form",{onSubmit:D(V),children:[T("h1",{className:"text-3xl font-medium text-center mb-3",children:"X\xE1c nh\u1EADn m\u1EADt kh\u1EA9u"}),H("div",{className:"py-[6px]",children:[T("label",{htmlFor:"password",className:"text-base mb-[4px] inline-block",children:"M\u1EADt kh\u1EA9u"}),T(fd,{control:k,name:"password",id:"password",setValue:U,placeholder:"123123"})]}),q.errors.password&&T("span",{className:"block font-medium text-sm text-primary transition-all duration-150",children:q.errors.password.message}),H("div",{className:"py-[6px]",children:[T("label",{htmlFor:"passwordConfirm",className:"text-base mb-[4px] inline-block",children:"Nh\u1EADp l\u1EA1i m\u1EADt kh\u1EA9u"}),T(fd,{control:k,name:"passwordConfirm",id:"passwordConfirm",setValue:U,placeholder:"123123"})]}),q.errors.passwordConfirm&&T("span",{className:"block font-medium text-sm text-primary transition-all duration-150",children:q.errors.passwordConfirm.message}),S.length>0&&T("span",{className:"block font-medium text-sm text-primary transition-all duration-150",children:S}),T("button",{formNoValidate:!0,className:`w-full my-[14px] p-2 text-[18px] font-medium tracking-[0.4px] border-none outline-none rounded-[4px] text-white bg-primary transition-all duration-300  ${dK.buttonHover} `,children:"\u0110\u1EB7t l\u1EA1i m\u1EADt kh\u1EA9u"})]}):H("div",{children:[T("h1",{className:"text-3xl font-medium text-center mb-3",children:"Enter OTP"}),T(NO,{onChange:L}),T("button",{onClick:F,disabled:l,className:` w-full my-[14px] p-2 text-[18px] font-medium tracking-[0.4px] border-none outline-none rounded-[4px] text-white ${l?"bg-gray-400":"bg-primary"} transition-all`,children:"Verify OTP"})]})})}const yo={getAll(e){const t="/products";return wn.get(t,{params:e})},getCount(e){const t="/products/count";return wn.get(t,{params:e})},getBySlug(e){const t=`/products/${e}`;return wn.get(t,{})},getBySlugAndStatus(e,t){const r=`/products/${e}/status/${t}`;return wn.get(r)},getById(e){const t=`/products/id/${e}`;return wn.get(t)},getCountByStatus(e){const t=`/products/count/${e}`;return wn.get(t)},createProduct(e){const t="/products";return wn.post(t,e,{headers:{"Content-Type":"multipart/form-data"}})},updateProduct(e,t){const r=`/products/id/${e}`;return wn.patch(r,t,{headers:{"Content-Type":"multipart/form-data"}})},getCountReviewProduct(e){}};var AK="Expected a function",cA=0/0,MK="[object Symbol]",kK=/^\s+|\s+$/g,PK=/^[-+]0x[0-9a-f]+$/i,IK=/^0b[01]+$/i,DK=/^0o[0-7]+$/i,zK=parseInt,NK=typeof sa=="object"&&sa&&sa.Object===Object&&sa,LK=typeof self=="object"&&self&&self.Object===Object&&self,FK=NK||LK||Function("return this")(),RK=Object.prototype,OK=RK.toString,BK=Math.max,$K=Math.min,Gv=function(){return FK.Date.now()};function jK(e,t,r){var s,u,d,x,l,_,S=0,C=!1,k=!1,D=!0;if(typeof e!="function")throw new TypeError(AK);t=uA(t)||0,Sw(r)&&(C=!!r.leading,k="maxWait"in r,d=k?BK(uA(r.maxWait)||0,t):d,D="trailing"in r?!!r.trailing:D);function U(fe){var be=s,ce=u;return s=u=void 0,S=fe,x=e.apply(ce,be),x}function q(fe){return S=fe,l=setTimeout(R,t),C?U(fe):x}function L(fe){var be=fe-_,ce=fe-S,ve=t-be;return k?$K(ve,d-ce):ve}function K(fe){var be=fe-_,ce=fe-S;return _===void 0||be>=t||be<0||k&&ce>=d}function R(){var fe=Gv();if(K(fe))return F(fe);l=setTimeout(R,L(fe))}function F(fe){return l=void 0,D&&s?U(fe):(s=u=void 0,x)}function V(){l!==void 0&&clearTimeout(l),S=0,s=_=u=l=void 0}function J(){return l===void 0?x:F(Gv())}function re(){var fe=Gv(),be=K(fe);if(s=arguments,u=this,_=fe,be){if(l===void 0)return q(_);if(k)return l=setTimeout(R,t),U(_)}return l===void 0&&(l=setTimeout(R,t)),x}return re.cancel=V,re.flush=J,re}function Sw(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function UK(e){return!!e&&typeof e=="object"}function VK(e){return typeof e=="symbol"||UK(e)&&OK.call(e)==MK}function uA(e){if(typeof e=="number")return e;if(VK(e))return cA;if(Sw(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Sw(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(kK,"");var r=IK.test(e);return r||DK.test(e)?zK(e.slice(2),r?2:8):PK.test(e)?cA:+e}var SE=jK;CE.propTypes={control:_e.object,name:_e.string,focus:_e.bool};function CE({control:e,focus:t,...r}){const{field:s}=Ad({name:r.name,control:e,defaultValue:""}),u=ne.exports.useRef(null);return ne.exports.useEffect(()=>{u&&u.current&&t&&u.current.focus()},[t]),H("div",{className:"px-[12px] bg-[#f0f2f5] flex items-center h-[40px] rounded-[6px] flex-1",children:[T("i",{className:"fa-solid fa-magnifying-glass w-[18px] h-[18px] text-[20ppx]"}),T("input",{className:"px-[2px] py-[1px] ml-[6px] mr-[16px] w-full text-base outline-none h-[28px] bg-[transparent] text-[#606770]",type:"text",...s,...r,name:r==null?void 0:r.name,ref:u})]})}AE.propTypes={show:_e.bool,onShow:_e.func,onSearch:_e.func};function AE({show:e,onShow:t=null,onSearch:r=null}){const[s,u]=ne.exports.useState(()=>Fs("view_history")||[]),d=yr(),[x,l]=ne.exports.useState({limit:5});if(typeof document=="undefined")return T("div",{children:"Modal"});const{control:_,handleSubmit:S}=us({defaultValues:{name:""}});ne.exports.useEffect(()=>{(async()=>{try{const D=await yo.getAll(x);u(D)}catch(D){console.log("Error \u{1F4A5}",D.message)}})()},[x]);const C=(D,U)=>{U.preventDefault(),l(q=>({...q,...D})),r!=null&&r(D)},k=D=>{d(`/place/${D.slug}`)};return H("div",{className:`absolute left-0 right-0 top-0 hidden  rounded-[10px] bg-white z-10  ${e&&"lg:block"}`,children:[H("form",{className:"p-3 flex",onChange:S(SE(C,300)),onSubmit:D=>D.preventDefault(),children:[T(CE,{control:_,name:"name",placeholder:"Nh\u1EADp t\xEAn qu\xE1n, khu v\u1EF1c, ki\u1EC3u qu\xE1n...",focus:e}),T("h3",{className:"shrink-0 text-base text-[#A0A0A0] font-semibold flex items-center justify-center pl-3 cursor-pointer",onClick:D=>t(D),children:"H\u1EE7y"})]}),H("div",{className:"px-3",children:[H(Jt,{to:"/search",className:"flex items-center py-[6px] hover:bg-[#eee] transition-all duration-200",children:[T("div",{className:" border-[3px] border-black rounded-full w-[40px] h-[40px] flex items-center justify-center mr-[10px]",children:T("i",{className:"fa-solid fa-location-arrow text-2xl"})}),T("span",{className:"text-base font-semibold text-black",children:"T\xECm quanh \u0111\xE2y"})]}),H("div",{className:"pt-[10px]",children:[T("h3",{className:"py-1 pb-1 text-base font-bold",children:"\u0110\xE3 xem g\u1EA7n \u0111\xE2y"}),s.map(D=>{var U,q;return T("div",{children:H("div",{onClick:()=>k(D),className:"px-[6px] py-[10px] flex relative hover:bg-[#eee] cursor-pointer transition-all duration-300",children:[T("img",{src:((U=D==null?void 0:D.listImage)==null?void 0:U.length)>0&&((q=D==null?void 0:D.listImage[0])==null?void 0:q.url),alt:"",className:"mr-[10px] w-[50px] h-[50px] object-cover rounded-[4px]"}),H("div",{className:"pr-3 mr-[10px] flex-1",children:[T("p",{className:"text-base text-black font-semibold mb-[2px]",children:D==null?void 0:D.name}),T("p",{className:"text-sm text-[#6b6b6b] ",children:D==null?void 0:D.description})]})]})},D==null?void 0:D.id)})]})]})]})}function hA(e){return Wt({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M279.14 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.43 0 225.36 0c-73.22 0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z"}}]})(e)}function GK(e){return Wt({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 32H48A48 48 0 0 0 0 80v352a48 48 0 0 0 48 48h137.25V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.27c-30.81 0-40.42 19.12-40.42 38.73V256h68.78l-11 71.69h-57.78V480H400a48 48 0 0 0 48-48V80a48 48 0 0 0-48-48z"}}]})(e)}function dA(e){return Wt({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"}}]})(e)}function qK(e){return Wt({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"}}]})(e)}function HK(e){return Wt({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"}}]})(e)}function WK(e){return Wt({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M192 160c44.2 0 80-35.8 80-80S236.2 0 192 0s-80 35.8-80 80 35.8 80 80 80zm-53.4 248.8l25.6-32-61.5-51.2L56.8 383c-11.4 14.2-11.7 34.4-.8 49l48 64c7.9 10.5 19.9 16 32 16 8.3 0 16.8-2.6 24-8 17.7-13.2 21.2-38.3 8-56l-29.4-39.2zm142.7-83.2l-61.5 51.2 25.6 32L216 448c-13.2 17.7-9.7 42.8 8 56 7.2 5.4 15.6 8 24 8 12.2 0 24.2-5.5 32-16l48-64c10.9-14.6 10.6-34.8-.8-49l-45.9-57.4zM376.7 145c-12.7-18.1-37.6-22.4-55.7-9.8l-40.6 28.5c-52.7 37-124.2 37-176.8 0L63 135.3C44.9 122.6 20 127 7.3 145-5.4 163.1-1 188 17 200.7l40.6 28.5c17 11.9 35.4 20.9 54.4 27.9V288h160v-30.8c19-7 37.4-16 54.4-27.9l40.6-28.5c18.1-12.8 22.4-37.7 9.7-55.8z"}}]})(e)}function ZK(e){return Wt({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M368.5 363.9l28.8-13.9c11.1 22.9 26 43.2 44.1 60.9 34-42.5 54.5-96.3 54.5-154.9 0-58.5-20.4-112.2-54.2-154.6-17.8 17.3-32.6 37.1-43.6 59.5l-28.7-14.1c12.8-26 30-49 50.8-69C375.6 34.7 315 8 248 8 181.1 8 120.5 34.6 75.9 77.7c20.7 19.9 37.9 42.9 50.7 68.8l-28.7 14.1c-11-22.3-25.7-42.1-43.5-59.4C20.4 143.7 0 197.4 0 256c0 58.6 20.4 112.3 54.4 154.7 18.2-17.7 33.2-38 44.3-61l28.8 13.9c-12.9 26.7-30.3 50.3-51.5 70.7 44.5 43.1 105.1 69.7 172 69.7 66.8 0 127.3-26.5 171.9-69.5-21.1-20.4-38.5-43.9-51.4-70.6zm-228.3-32l-30.5-9.8c14.9-46.4 12.7-93.8-.6-134l30.4-10c15 45.6 18 99.9.7 153.8zm216.3-153.4l30.4 10c-13.2 40.1-15.5 87.5-.6 134l-30.5 9.8c-17.3-54-14.3-108.3.7-153.8z"}}]})(e)}function XK(e){return Wt({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 384c-28.02 0-31.26-32-74.5-32-43.43 0-46.825 32-74.75 32-27.695 0-31.454-32-74.75-32-42.842 0-47.218 32-74.5 32-28.148 0-31.202-32-74.75-32-43.547 0-46.653 32-74.75 32v-80c0-26.5 21.5-48 48-48h16V112h64v144h64V112h64v144h64V112h64v144h16c26.5 0 48 21.5 48 48v80zm0 128H0v-96c43.356 0 46.767-32 74.75-32 27.951 0 31.253 32 74.75 32 42.843 0 47.217-32 74.5-32 28.148 0 31.201 32 74.75 32 43.357 0 46.767-32 74.75-32 27.488 0 31.252 32 74.5 32v96zM96 96c-17.75 0-32-14.25-32-32 0-31 32-23 32-64 12 0 32 29.5 32 56s-14.25 40-32 40zm128 0c-17.75 0-32-14.25-32-32 0-31 32-23 32-64 12 0 32 29.5 32 56s-14.25 40-32 40zm128 0c-17.75 0-32-14.25-32-32 0-31 32-23 32-64 12 0 32 29.5 32 56s-14.25 40-32 40z"}}]})(e)}function KK(e){return Wt({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm64-192c0-8.8 7.2-16 16-16h96c8.8 0 16 7.2 16 16v96c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16v-96zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"}}]})(e)}function md(e){return Wt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z"}}]})(e)}function YK(e){return Wt({tag:"svg",attr:{viewBox:"0 0 480 512"},child:[{tag:"path",attr:{d:"M438.66 212.33l-11.24-28.1-19.93-49.83C390.38 91.63 349.57 64 303.5 64h-127c-46.06 0-86.88 27.63-103.99 70.4l-19.93 49.83-11.24 28.1C17.22 221.5 0 244.66 0 272v48c0 16.12 6.16 30.67 16 41.93V416c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32v-32h256v32c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32v-54.07c9.84-11.25 16-25.8 16-41.93v-48c0-27.34-17.22-50.5-41.34-59.67zm-306.73-54.16c7.29-18.22 24.94-30.17 44.57-30.17h127c19.63 0 37.28 11.95 44.57 30.17L368 208H112l19.93-49.83zM80 319.8c-19.2 0-32-12.76-32-31.9S60.8 256 80 256s48 28.71 48 47.85-28.8 15.95-48 15.95zm320 0c-19.2 0-48 3.19-48-15.95S380.8 256 400 256s32 12.76 32 31.9-12.8 31.9-32 31.9z"}}]})(e)}function JK(e){return Wt({tag:"svg",attr:{viewBox:"0 0 192 512"},child:[{tag:"path",attr:{d:"M0 384.662V127.338c0-17.818 21.543-26.741 34.142-14.142l128.662 128.662c7.81 7.81 7.81 20.474 0 28.284L34.142 398.804C21.543 411.404 0 402.48 0 384.662z"}}]})(e)}function QK(e){return Wt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"}}]})(e)}function eY(e){return Wt({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M575.2 325.7c.2-1.9.8-3.7.8-5.6 0-35.3-28.7-64-64-64-12.6 0-24.2 3.8-34.1 10-17.6-38.8-56.5-66-101.9-66-61.8 0-112 50.1-112 112 0 3 .7 5.8.9 8.7-49.6 3.7-88.9 44.7-88.9 95.3 0 53 43 96 96 96h272c53 0 96-43 96-96 0-42.1-27.2-77.4-64.8-90.4zm-430.4-22.6c-43.7-43.7-43.7-114.7 0-158.3 43.7-43.7 114.7-43.7 158.4 0 9.7 9.7 16.9 20.9 22.3 32.7 9.8-3.7 20.1-6 30.7-7.5L386 81.1c4-11.9-7.3-23.1-19.2-19.2L279 91.2 237.5 8.4C232-2.8 216-2.8 210.4 8.4L169 91.2 81.1 61.9C69.3 58 58 69.3 61.9 81.1l29.3 87.8-82.8 41.5c-11.2 5.6-11.2 21.5 0 27.1l82.8 41.4-29.3 87.8c-4 11.9 7.3 23.1 19.2 19.2l76.1-25.3c6.1-12.4 14-23.7 23.6-33.5-13.1-5.4-25.4-13.4-36-24zm-4.8-79.2c0 40.8 29.3 74.8 67.9 82.3 8-4.7 16.3-8.8 25.2-11.7 5.4-44.3 31-82.5 67.4-105C287.3 160.4 258 140 224 140c-46.3 0-84 37.6-84 83.9z"}}]})(e)}function tY(e){return Wt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 32C114.6 32 0 125.1 0 240c0 49.6 21.4 95 57 130.7C44.5 421.1 2.7 466 2.2 466.5c-2.2 2.3-2.8 5.7-1.5 8.7S4.8 480 8 480c66.3 0 116-31.8 140.6-51.4 32.7 12.3 69 19.4 107.4 19.4 141.4 0 256-93.1 256-208S397.4 32 256 32zM128 272c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 0c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 0c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"}}]})(e)}function nY(e){return Wt({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M0 432c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V256H0v176zm192-68c0-6.6 5.4-12 12-12h136c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-40zm-128 0c0-6.6 5.4-12 12-12h72c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM576 80v48H0V80c0-26.5 21.5-48 48-48h480c26.5 0 48 21.5 48 48z"}}]})(e)}function rY(e){return Wt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.61 233.32L278.68 9.39c-12.52-12.52-32.83-12.52-45.36 0L9.39 233.32c-12.52 12.53-12.52 32.83 0 45.36l223.93 223.93c12.52 12.53 32.83 12.53 45.36 0l223.93-223.93c12.52-12.53 12.52-32.83 0-45.36zm-100.98 12.56l-84.21 77.73c-5.12 4.73-13.43 1.1-13.43-5.88V264h-96v64c0 4.42-3.58 8-8 8h-32c-4.42 0-8-3.58-8-8v-80c0-17.67 14.33-32 32-32h112v-53.73c0-6.97 8.3-10.61 13.43-5.88l84.21 77.73c3.43 3.17 3.43 8.59 0 11.76z"}}]})(e)}function iY(e){return Wt({tag:"svg",attr:{viewBox:"0 0 288 512"},child:[{tag:"path",attr:{d:"M209.2 233.4l-108-31.6C88.7 198.2 80 186.5 80 173.5c0-16.3 13.2-29.5 29.5-29.5h66.3c12.2 0 24.2 3.7 34.2 10.5 6.1 4.1 14.3 3.1 19.5-2l34.8-34c7.1-6.9 6.1-18.4-1.8-24.5C238 74.8 207.4 64.1 176 64V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48h-2.5C45.8 64-5.4 118.7.5 183.6c4.2 46.1 39.4 83.6 83.8 96.6l102.5 30c12.5 3.7 21.2 15.3 21.2 28.3 0 16.3-13.2 29.5-29.5 29.5h-66.3C100 368 88 364.3 78 357.5c-6.1-4.1-14.3-3.1-19.5 2l-34.8 34c-7.1 6.9-6.1 18.4 1.8 24.5 24.5 19.2 55.1 29.9 86.5 30v48c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-48.2c46.6-.9 90.3-28.6 105.7-72.7 21.5-61.6-14.6-124.8-72.5-141.7z"}}]})(e)}function oY(e){return Wt({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"}}]})(e)}function oy(e){return Wt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M328 256c0 39.8-32.2 72-72 72s-72-32.2-72-72 32.2-72 72-72 72 32.2 72 72zm104-72c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm-352 0c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72z"}}]})(e)}function MI(e){return Wt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M349.565 98.783C295.978 98.783 251.721 64 184.348 64c-24.955 0-47.309 4.384-68.045 12.013a55.947 55.947 0 0 0 3.586-23.562C118.117 24.015 94.806 1.206 66.338.048 34.345-1.254 8 24.296 8 56c0 19.026 9.497 35.825 24 45.945V488c0 13.255 10.745 24 24 24h16c13.255 0 24-10.745 24-24v-94.4c28.311-12.064 63.582-22.122 114.435-22.122 53.588 0 97.844 34.783 165.217 34.783 48.169 0 86.667-16.294 122.505-40.858C506.84 359.452 512 349.571 512 339.045v-243.1c0-23.393-24.269-38.87-45.485-29.016-34.338 15.948-76.454 31.854-116.95 31.854z"}}]})(e)}function sY(e){return Wt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.63 39L473 9.37a32 32 0 0 0-45.26 0L381.46 55.7a35.14 35.14 0 0 0-8.53 13.79L360.77 106l-76.26 76.26c-12.16-8.76-25.5-15.74-40.1-19.14-33.45-7.78-67-.88-89.88 22a82.45 82.45 0 0 0-20.24 33.47c-6 18.56-23.21 32.69-42.15 34.46-23.7 2.27-45.73 11.45-62.61 28.44C-16.11 327-7.9 409 47.58 464.45S185 528 230.56 482.52c17-16.88 26.16-38.9 28.45-62.71 1.76-18.85 15.89-36.13 34.43-42.14a82.6 82.6 0 0 0 33.48-20.25c22.87-22.88 29.74-56.36 22-89.75-3.39-14.64-10.37-28-19.16-40.2L406 151.23l36.48-12.16a35.14 35.14 0 0 0 13.79-8.53l46.33-46.32a32 32 0 0 0 .03-45.22zM208 352a48 48 0 1 1 48-48 48 48 0 0 1-48 48z"}}]})(e)}function aY(e){return Wt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 256H48a48 48 0 0 0 0 96h416a48 48 0 0 0 0-96zm16 128H32a16 16 0 0 0-16 16v16a64 64 0 0 0 64 64h352a64 64 0 0 0 64-64v-16a16 16 0 0 0-16-16zM58.64 224h394.72c34.57 0 54.62-43.9 34.82-75.88C448 83.2 359.55 32.1 256 32c-103.54.1-192 51.2-232.18 116.11C4 180.09 24.07 224 58.64 224zM384 112a16 16 0 1 1-16 16 16 16 0 0 1 16-16zM256 80a16 16 0 1 1-16 16 16 16 0 0 1 16-16zm-128 32a16 16 0 1 1-16 16 16 16 0 0 1 16-16z"}}]})(e)}function lY(e){return Wt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 199.652c0 23.625-20.65 43.826-44.8 43.826h-99.851c16.34 17.048 18.346 49.766-6.299 70.944 14.288 22.829 2.147 53.017-16.45 62.315C353.574 425.878 322.654 448 272 448c-2.746 0-13.276-.203-16-.195-61.971.168-76.894-31.065-123.731-38.315C120.596 407.683 112 397.599 112 385.786V214.261l.002-.001c.011-18.366 10.607-35.889 28.464-43.845 28.886-12.994 95.413-49.038 107.534-77.323 7.797-18.194 21.384-29.084 40-29.092 34.222-.014 57.752 35.098 44.119 66.908-3.583 8.359-8.312 16.67-14.153 24.918H467.2c23.45 0 44.8 20.543 44.8 43.826zM96 200v192c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V200c0-13.255 10.745-24 24-24h48c13.255 0 24 10.745 24 24zM68 368c0-11.046-8.954-20-20-20s-20 8.954-20 20 8.954 20 20 20 20-8.954 20-20z"}}]})(e)}function xx(e){return Wt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"}}]})(e)}function cY(e){return Wt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48zM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56zM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48z"}}]})(e)}function kI(e){return Wt({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"}}]})(e)}function uY(e){return Wt({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M512.9 192c-14.9-.1-29.1 2.3-42.4 6.9L437.6 144H520c13.3 0 24-10.7 24-24V88c0-13.3-10.7-24-24-24h-45.3c-6.8 0-13.3 2.9-17.8 7.9l-37.5 41.7-22.8-38C392.2 68.4 384.4 64 376 64h-80c-8.8 0-16 7.2-16 16v16c0 8.8 7.2 16 16 16h66.4l19.2 32H227.9c-17.7-23.1-44.9-40-99.9-40H72.5C59 104 47.7 115 48 128.5c.2 13 10.9 23.5 24 23.5h56c24.5 0 38.7 10.9 47.8 24.8l-11.3 20.5c-13-3.9-26.9-5.7-41.3-5.2C55.9 194.5 1.6 249.6 0 317c-1.6 72.1 56.3 131 128 131 59.6 0 109.7-40.8 124-96h84.2c13.7 0 24.6-11.4 24-25.1-2.1-47.1 17.5-93.7 56.2-125l12.5 20.8c-27.6 23.7-45.1 58.9-44.8 98.2.5 69.6 57.2 126.5 126.8 127.1 71.6.7 129.8-57.5 129.2-129.1-.7-69.6-57.6-126.4-127.2-126.9zM128 400c-44.1 0-80-35.9-80-80s35.9-80 80-80c4.2 0 8.4.3 12.5 1L99 316.4c-8.8 16 2.8 35.6 21 35.6h81.3c-12.4 28.2-40.6 48-73.3 48zm463.9-75.6c-2.2 40.6-35 73.4-75.5 75.5-46.1 2.5-84.4-34.3-84.4-79.9 0-21.4 8.4-40.8 22.1-55.1l49.4 82.4c4.5 7.6 14.4 10 22 5.5l13.7-8.2c7.6-4.5 10-14.4 5.5-22l-48.6-80.9c5.2-1.1 10.5-1.6 15.9-1.6 45.6-.1 82.3 38.2 79.9 84.3z"}}]})(e)}function hY(e){return Wt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 224c-79.41 0-192 122.76-192 200.25 0 34.9 26.81 55.75 71.74 55.75 48.84 0 81.09-25.08 120.26-25.08 39.51 0 71.85 25.08 120.26 25.08 44.93 0 71.74-20.85 71.74-55.75C448 346.76 335.41 224 256 224zm-147.28-12.61c-10.4-34.65-42.44-57.09-71.56-50.13-29.12 6.96-44.29 40.69-33.89 75.34 10.4 34.65 42.44 57.09 71.56 50.13 29.12-6.96 44.29-40.69 33.89-75.34zm84.72-20.78c30.94-8.14 46.42-49.94 34.58-93.36s-46.52-72.01-77.46-63.87-46.42 49.94-34.58 93.36c11.84 43.42 46.53 72.02 77.46 63.87zm281.39-29.34c-29.12-6.96-61.15 15.48-71.56 50.13-10.4 34.65 4.77 68.38 33.89 75.34 29.12 6.96 61.15-15.48 71.56-50.13 10.4-34.65-4.77-68.38-33.89-75.34zm-156.27 29.34c30.94 8.14 65.62-20.45 77.46-63.87 11.84-43.42-3.64-85.21-34.58-93.36s-65.62 20.45-77.46 63.87c-11.84 43.42 3.64 85.22 34.58 93.36z"}}]})(e)}function Cw(e){return Wt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"}}]})(e)}function dY(e){return Wt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497.39 361.8l-112-48a24 24 0 0 0-28 6.9l-49.6 60.6A370.66 370.66 0 0 1 130.6 204.11l60.6-49.6a23.94 23.94 0 0 0 6.9-28l-48-112A24.16 24.16 0 0 0 122.6.61l-104 24A24 24 0 0 0 0 48c0 256.5 207.9 464 464 464a24 24 0 0 0 23.4-18.6l24-104a24.29 24.29 0 0 0-14.01-27.6z"}}]})(e)}function pY(e){return Wt({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M136.309 189.836L312.313 37.851C327.72 24.546 352 35.348 352 56.015v82.763c129.182 10.231 224 52.212 224 183.548 0 61.441-39.582 122.309-83.333 154.132-13.653 9.931-33.111-2.533-28.077-18.631 38.512-123.162-3.922-169.482-112.59-182.015v84.175c0 20.701-24.3 31.453-39.687 18.164L136.309 226.164c-11.071-9.561-11.086-26.753 0-36.328zm-128 36.328L184.313 378.15C199.7 391.439 224 380.687 224 359.986v-15.818l-108.606-93.785A55.96 55.96 0 0 1 96 207.998a55.953 55.953 0 0 1 19.393-42.38L224 71.832V56.015c0-20.667-24.28-31.469-39.687-18.164L8.309 189.836c-11.086 9.575-11.071 26.767 0 36.328z"}}]})(e)}function Aw(e){return Wt({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M128.081 415.959c0 35.369-28.672 64.041-64.041 64.041S0 451.328 0 415.959s28.672-64.041 64.041-64.041 64.04 28.673 64.04 64.041zm175.66 47.25c-8.354-154.6-132.185-278.587-286.95-286.95C7.656 175.765 0 183.105 0 192.253v48.069c0 8.415 6.49 15.472 14.887 16.018 111.832 7.284 201.473 96.702 208.772 208.772.547 8.397 7.604 14.887 16.018 14.887h48.069c9.149.001 16.489-7.655 15.995-16.79zm144.249.288C439.596 229.677 251.465 40.445 16.503 32.01 7.473 31.686 0 38.981 0 48.016v48.068c0 8.625 6.835 15.645 15.453 15.999 191.179 7.839 344.627 161.316 352.465 352.465.353 8.618 7.373 15.453 15.999 15.453h48.068c9.034-.001 16.329-7.474 16.005-16.504z"}}]})(e)}function fY(e){return Wt({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 352h-16V243.9c0-12.7-5.1-24.9-14.1-33.9L494 110.1c-9-9-21.2-14.1-33.9-14.1H416V48c0-26.5-21.5-48-48-48H112C85.5 0 64 21.5 64 48v48H8c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h272c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H40c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h208c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H8c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h208c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H64v128c0 53 43 96 96 96s96-43 96-96h128c0 53 43 96 96 96s96-43 96-96h48c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zM160 464c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm320 0c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm80-208H416V144h44.1l99.9 99.9V256z"}}]})(e)}function mY(e){return Wt({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M632 352h-48c-4.4 0-8 3.6-8 8v144c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8zM553.3 87.1c-5.7-3.8-9.3-10-9.3-16.8V8c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v62.3c0 22 10.2 43.4 28.6 55.4 42.2 27.3 67.4 73.8 67.4 124V280c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-30.3c0-65.5-32.4-126.2-86.7-162.6zM432 352H48c-26.5 0-48 21.5-48 48v64c0 26.5 21.5 48 48 48h384c8.8 0 16-7.2 16-16V368c0-8.8-7.2-16-16-16zm-32 112H224v-64h176v64zm87.7-322.4C463.8 125 448 99.3 448 70.3V8c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v66.4c0 43.7 24.6 81.6 60.3 106.7 22.4 15.7 35.7 41.2 35.7 68.6V280c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-30.3c0-43.3-21-83.4-56.3-108.1zM536 352h-48c-4.4 0-8 3.6-8 8v144c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8z"}}]})(e)}function gY(e){return Wt({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M41 288h238c21.4 0 32.1 25.9 17 41L177 448c-9.4 9.4-24.6 9.4-33.9 0L24 329c-15.1-15.1-4.4-41 17-41zm255-105L177 64c-9.4-9.4-24.6-9.4-33.9 0L24 183c-15.1 15.1-4.4 41 17 41h238c21.4 0 32.1-25.9 17-41z"}}]})(e)}function yY(e){return Wt({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"}}]})(e)}function xY(e){return Wt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M367.9 329.76c-4.62 5.3-9.78 10.1-15.9 13.65v22.94c66.52 9.34 112 28.05 112 49.65 0 30.93-93.12 56-208 56S48 446.93 48 416c0-21.6 45.48-40.3 112-49.65v-22.94c-6.12-3.55-11.28-8.35-15.9-13.65C58.87 345.34 0 378.05 0 416c0 53.02 114.62 96 256 96s256-42.98 256-96c0-37.95-58.87-70.66-144.1-86.24zM256 128c35.35 0 64-28.65 64-64S291.35 0 256 0s-64 28.65-64 64 28.65 64 64 64zm-64 192v96c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-96c17.67 0 32-14.33 32-32v-96c0-26.51-21.49-48-48-48h-11.8c-11.07 5.03-23.26 8-36.2 8s-25.13-2.97-36.2-8H208c-26.51 0-48 21.49-48 48v96c0 17.67 14.33 32 32 32z"}}]})(e)}function _Y(e){return Wt({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"}}]})(e)}function vY(e){return Wt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"}}]})(e)}function Nd(e){return Wt({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"}}]})(e)}function bY(e){return Wt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M296 384h-80c-13.3 0-24-10.7-24-24V192h-87.7c-17.8 0-26.7-21.5-14.1-34.1L242.3 5.7c7.5-7.5 19.8-7.5 27.3 0l152.2 152.2c12.6 12.6 3.7 34.1-14.1 34.1H320v168c0 13.3-10.7 24-24 24zm216-8v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h136v8c0 30.9 25.1 56 56 56h80c30.9 0 56-25.1 56-56v-8h136c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"}}]})(e)}function wY(e){return Wt({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4zm323-128.4l-27.8-28.1c-4.6-4.7-12.1-4.7-16.8-.1l-104.8 104-45.5-45.8c-4.6-4.7-12.1-4.7-16.8-.1l-28.1 27.9c-4.7 4.6-4.7 12.1-.1 16.8l81.7 82.3c4.6 4.7 12.1 4.7 16.8.1l141.3-140.2c4.6-4.7 4.7-12.2.1-16.8z"}}]})(e)}function PI(e){return Wt({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h274.9c-2.4-6.8-3.4-14-2.6-21.3l6.8-60.9 1.2-11.1 7.9-7.9 77.3-77.3c-24.5-27.7-60-45.5-99.9-45.5zm45.3 145.3l-6.8 61c-1.1 10.2 7.5 18.8 17.6 17.6l60.9-6.8 137.9-137.9-71.7-71.7-137.9 137.8zM633 268.9L595.1 231c-9.3-9.3-24.5-9.3-33.8 0l-37.8 37.8-4.1 4.1 71.8 71.7 41.8-41.8c9.3-9.4 9.3-24.5 0-33.9z"}}]})(e)}function pA(e){return Wt({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M634.91 154.88C457.74-8.99 182.19-8.93 5.09 154.88c-6.66 6.16-6.79 16.59-.35 22.98l34.24 33.97c6.14 6.1 16.02 6.23 22.4.38 145.92-133.68 371.3-133.71 517.25 0 6.38 5.85 16.26 5.71 22.4-.38l34.24-33.97c6.43-6.39 6.3-16.82-.36-22.98zM320 352c-35.35 0-64 28.65-64 64s28.65 64 64 64 64-28.65 64-64-28.65-64-64-64zm202.67-83.59c-115.26-101.93-290.21-101.82-405.34 0-6.9 6.1-7.12 16.69-.57 23.15l34.44 33.99c6 5.92 15.66 6.32 22.05.8 83.95-72.57 209.74-72.41 293.49 0 6.39 5.52 16.05 5.13 22.05-.8l34.44-33.99c6.56-6.46 6.33-17.06-.56-23.15z"}}]})(e)}function EY(e){return Wt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M156.7 256H16c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h142.2c15.9 0 30.8 10.9 33.4 26.6 3.3 20-12.1 37.4-31.6 37.4-14.1 0-26.1-9.2-30.4-21.9-2.1-6.3-8.6-10.1-15.2-10.1H81.6c-9.8 0-17.7 8.8-15.9 18.4 8.6 44.1 47.6 77.6 94.2 77.6 57.1 0 102.7-50.1 95.2-108.6C249 291 205.4 256 156.7 256zM16 224h336c59.7 0 106.8-54.8 93.8-116.7-7.6-36.2-36.9-65.5-73.1-73.1-55.4-11.6-105.1 24.9-114.9 75.5-1.9 9.6 6.1 18.3 15.8 18.3h32.8c6.7 0 13.1-3.8 15.2-10.1C325.9 105.2 337.9 96 352 96c19.4 0 34.9 17.4 31.6 37.4-2.6 15.7-17.4 26.6-33.4 26.6H16c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16zm384 32H243.7c19.3 16.6 33.2 38.8 39.8 64H400c26.5 0 48 21.5 48 48s-21.5 48-48 48c-17.9 0-33.3-9.9-41.6-24.4-2.9-5-8.7-7.6-14.5-7.6h-33.8c-10.9 0-19 10.8-15.3 21.1 17.8 50.6 70.5 84.8 129.4 72.3 41.2-8.7 75.1-41.6 84.7-82.7C526 321.5 470.5 256 400 256z"}}]})(e)}function TY(e){return Wt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M448 0H64C28.7 0 0 28.7 0 64v288c0 35.3 28.7 64 64 64h96v84c0 7.1 5.8 12 12 12 2.4 0 4.9-.7 7.1-2.4L304 416h144c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64zm16 352c0 8.8-7.2 16-16 16H288l-12.8 9.6L208 428v-60H64c-8.8 0-16-7.2-16-16V64c0-8.8 7.2-16 16-16h384c8.8 0 16 7.2 16 16v288z"}}]})(e)}function ME(e){return Wt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M458.4 64.3C400.6 15.7 311.3 23 256 79.3 200.7 23 111.4 15.6 53.6 64.3-21.6 127.6-10.6 230.8 43 285.5l175.4 178.7c10 10.2 23.4 15.9 37.6 15.9 14.3 0 27.6-5.6 37.6-15.8L469 285.6c53.5-54.7 64.7-157.9-10.6-221.3zm-23.6 187.5L259.4 430.5c-2.4 2.4-4.4 2.4-6.8 0L77.2 251.8c-36.5-37.2-43.9-107.6 7.3-150.7 38.9-32.7 98.9-27.8 136.5 10.5l35 35.7 35-35.7c37.8-38.5 97.8-43.2 136.5-10.6 51.1 43.1 43.5 113.9 7.3 150.8z"}}]})(e)}function SY(e){return Wt({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M561.938 158.06L417.94 14.092C387.926-15.922 336 5.097 336 48.032v57.198c-42.45 1.88-84.03 6.55-120.76 17.99-35.17 10.95-63.07 27.58-82.91 49.42C108.22 199.2 96 232.6 96 271.94c0 61.697 33.178 112.455 84.87 144.76 37.546 23.508 85.248-12.651 71.02-55.74-15.515-47.119-17.156-70.923 84.11-78.76V336c0 42.993 51.968 63.913 81.94 33.94l143.998-144c18.75-18.74 18.75-49.14 0-67.88zM384 336V232.16C255.309 234.082 166.492 255.35 206.31 376 176.79 357.55 144 324.08 144 271.94c0-109.334 129.14-118.947 240-119.85V48l144 144-144 144zm24.74 84.493a82.658 82.658 0 0 0 20.974-9.303c7.976-4.952 18.286.826 18.286 10.214V464c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h132c6.627 0 12 5.373 12 12v4.486c0 4.917-2.987 9.369-7.569 11.152-13.702 5.331-26.396 11.537-38.05 18.585a12.138 12.138 0 0 1-6.28 1.777H54a6 6 0 0 0-6 6v340a6 6 0 0 0 6 6h340a6 6 0 0 0 6-6v-25.966c0-5.37 3.579-10.059 8.74-11.541z"}}]})(e)}function R0(e){return Wt({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M313.6 304c-28.7 0-42.5 16-89.6 16-47.1 0-60.8-16-89.6-16C60.2 304 0 364.2 0 438.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-25.6c0-74.2-60.2-134.4-134.4-134.4zM400 464H48v-25.6c0-47.6 38.8-86.4 86.4-86.4 14.6 0 38.3 16 89.6 16 51.7 0 74.9-16 89.6-16 47.6 0 86.4 38.8 86.4 86.4V464zM224 288c79.5 0 144-64.5 144-144S303.5 0 224 0 80 64.5 80 144s64.5 144 144 144zm0-240c52.9 0 96 43.1 96 96s-43.1 96-96 96-96-43.1-96-96 43.1-96 96-96z"}}]})(e)}function II(e){return Wt({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M13 3h-2v10h2V3zm4.83 2.17l-1.42 1.42A6.92 6.92 0 0119 12c0 3.87-3.13 7-7 7A6.995 6.995 0 017.58 6.58L6.17 5.17A8.932 8.932 0 003 12a9 9 0 0018 0c0-2.74-1.23-5.18-3.17-6.83z"}}]})(e)}function CY(e){return Wt({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}}]})(e)}function kE(e){return Wt({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V8l8 5 8-5v10zm-8-7L4 6h16l-8 5z"}}]})(e)}function AY(e){return Wt({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z"}}]})(e)}function MY(e){return Wt({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M12 2C8.13 2 5 5.13 5 9c0 1.74.5 3.37 1.41 4.84.95 1.54 2.2 2.86 3.16 4.4.47.75.81 1.45 1.17 2.26.26.55.47 1.5 1.26 1.5s1-.95 1.25-1.5c.37-.81.7-1.51 1.17-2.26.96-1.53 2.21-2.85 3.16-4.4C18.5 12.37 19 10.74 19 9c0-3.87-3.13-7-7-7zm0 9.75a2.5 2.5 0 010-5 2.5 2.5 0 010 5z"}}]})(e)}function PE(e){return Wt({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4V6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"}}]})(e)}function IE(e){return Wt({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"}}]})(e)}function DE(e){return Wt({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}}]})(e)}function kY(e){return Wt({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M17 3H5a2 2 0 00-2 2v14a2 2 0 002 2h14c1.1 0 2-.9 2-2V7l-4-4zm2 16H5V5h11.17L19 7.83V19zm-7-7c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3zM6 6h9v4H6z"}}]})(e)}function _x(e){return Wt({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}}]})(e)}const PY="_buttonHeaderHover_zr5sh_1";var qv={buttonHeaderHover:PY};function $s(e){for(var t=arguments.length,r=Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(u){return"'"+u+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function sc(e){return!!e&&!!e[vr]}function Wa(e){var t;return!!e&&(function(r){if(!r||typeof r!="object")return!1;var s=Object.getPrototypeOf(r);if(s===null)return!0;var u=Object.hasOwnProperty.call(s,"constructor")&&s.constructor;return u===Object||typeof u=="function"&&Function.toString.call(u)===BY}(e)||Array.isArray(e)||!!e[vA]||!!(!((t=e.constructor)===null||t===void 0)&&t[vA])||zE(e)||NE(e))}function yu(e,t,r){r===void 0&&(r=!1),Ld(e)===0?(r?Object.keys:Qh)(e).forEach(function(s){r&&typeof s=="symbol"||t(s,e[s],e)}):e.forEach(function(s,u){return t(u,s,e)})}function Ld(e){var t=e[vr];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:zE(e)?2:NE(e)?3:0}function Jh(e,t){return Ld(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function IY(e,t){return Ld(e)===2?e.get(t):e[t]}function DI(e,t,r){var s=Ld(e);s===2?e.set(t,r):s===3?e.add(r):e[t]=r}function zI(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function zE(e){return RY&&e instanceof Map}function NE(e){return OY&&e instanceof Set}function ru(e){return e.o||e.t}function LE(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=LI(e);delete t[vr];for(var r=Qh(t),s=0;s<r.length;s++){var u=r[s],d=t[u];d.writable===!1&&(d.writable=!0,d.configurable=!0),(d.get||d.set)&&(t[u]={configurable:!0,writable:!0,enumerable:d.enumerable,value:e[u]})}return Object.create(Object.getPrototypeOf(e),t)}function FE(e,t){return t===void 0&&(t=!1),RE(e)||sc(e)||!Wa(e)||(Ld(e)>1&&(e.set=e.add=e.clear=e.delete=DY),Object.freeze(e),t&&yu(e,function(r,s){return FE(s,!0)},!0)),e}function DY(){$s(2)}function RE(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function ua(e){var t=Iw[e];return t||$s(18,e),t}function zY(e,t){Iw[e]||(Iw[e]=t)}function Mw(){return xm}function Hv(e,t){t&&(ua("Patches"),e.u=[],e.s=[],e.v=t)}function sy(e){kw(e),e.p.forEach(NY),e.p=null}function kw(e){e===xm&&(xm=e.l)}function fA(e){return xm={p:[],l:xm,h:e,m:!0,_:0}}function NY(e){var t=e[vr];t.i===0||t.i===1?t.j():t.g=!0}function Wv(e,t){t._=t.p.length;var r=t.p[0],s=e!==void 0&&e!==r;return t.h.O||ua("ES5").S(t,e,s),s?(r[vr].P&&(sy(t),$s(4)),Wa(e)&&(e=ay(t,e),t.l||ly(t,e)),t.u&&ua("Patches").M(r[vr].t,e,t.u,t.s)):e=ay(t,r,[]),sy(t),t.u&&t.v(t.u,t.s),e!==NI?e:void 0}function ay(e,t,r){if(RE(t))return t;var s=t[vr];if(!s)return yu(t,function(l,_){return mA(e,s,t,l,_,r)},!0),t;if(s.A!==e)return t;if(!s.P)return ly(e,s.t,!0),s.t;if(!s.I){s.I=!0,s.A._--;var u=s.i===4||s.i===5?s.o=LE(s.k):s.o,d=u,x=!1;s.i===3&&(d=new Set(u),u.clear(),x=!0),yu(d,function(l,_){return mA(e,s,u,l,_,r,x)}),ly(e,u,!1),r&&e.u&&ua("Patches").N(s,r,e.u,e.s)}return s.o}function mA(e,t,r,s,u,d,x){if(sc(u)){var l=ay(e,u,d&&t&&t.i!==3&&!Jh(t.R,s)?d.concat(s):void 0);if(DI(r,s,l),!sc(l))return;e.m=!1}else x&&r.add(u);if(Wa(u)&&!RE(u)){if(!e.h.D&&e._<1)return;ay(e,u),t&&t.A.l||ly(e,u)}}function ly(e,t,r){r===void 0&&(r=!1),!e.l&&e.h.D&&e.m&&FE(t,r)}function Zv(e,t){var r=e[vr];return(r?ru(r):e)[t]}function gA(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var s=Object.getOwnPropertyDescriptor(r,t);if(s)return s;r=Object.getPrototypeOf(r)}}function Rl(e){e.P||(e.P=!0,e.l&&Rl(e.l))}function Xv(e){e.o||(e.o=LE(e.t))}function Pw(e,t,r){var s=zE(t)?ua("MapSet").F(t,r):NE(t)?ua("MapSet").T(t,r):e.O?function(u,d){var x=Array.isArray(u),l={i:x?1:0,A:d?d.A:Mw(),P:!1,I:!1,R:{},l:d,t:u,k:null,o:null,j:null,C:!1},_=l,S=_m;x&&(_=[l],S=zf);var C=Proxy.revocable(_,S),k=C.revoke,D=C.proxy;return l.k=D,l.j=k,D}(t,r):ua("ES5").J(t,r);return(r?r.A:Mw()).p.push(s),s}function LY(e){return sc(e)||$s(22,e),function t(r){if(!Wa(r))return r;var s,u=r[vr],d=Ld(r);if(u){if(!u.P&&(u.i<4||!ua("ES5").K(u)))return u.t;u.I=!0,s=yA(r,d),u.I=!1}else s=yA(r,d);return yu(s,function(x,l){u&&IY(u.t,x)===l||DI(s,x,t(l))}),d===3?new Set(s):s}(e)}function yA(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return LE(e)}function FY(){function e(d,x){var l=u[d];return l?l.enumerable=x:u[d]=l={configurable:!0,enumerable:x,get:function(){var _=this[vr];return _m.get(_,d)},set:function(_){var S=this[vr];_m.set(S,d,_)}},l}function t(d){for(var x=d.length-1;x>=0;x--){var l=d[x][vr];if(!l.P)switch(l.i){case 5:s(l)&&Rl(l);break;case 4:r(l)&&Rl(l)}}}function r(d){for(var x=d.t,l=d.k,_=Qh(l),S=_.length-1;S>=0;S--){var C=_[S];if(C!==vr){var k=x[C];if(k===void 0&&!Jh(x,C))return!0;var D=l[C],U=D&&D[vr];if(U?U.t!==k:!zI(D,k))return!0}}var q=!!x[vr];return _.length!==Qh(x).length+(q?0:1)}function s(d){var x=d.k;if(x.length!==d.t.length)return!0;var l=Object.getOwnPropertyDescriptor(x,x.length-1);if(l&&!l.get)return!0;for(var _=0;_<x.length;_++)if(!x.hasOwnProperty(_))return!0;return!1}var u={};zY("ES5",{J:function(d,x){var l=Array.isArray(d),_=function(C,k){if(C){for(var D=Array(k.length),U=0;U<k.length;U++)Object.defineProperty(D,""+U,e(U,!0));return D}var q=LI(k);delete q[vr];for(var L=Qh(q),K=0;K<L.length;K++){var R=L[K];q[R]=e(R,C||!!q[R].enumerable)}return Object.create(Object.getPrototypeOf(k),q)}(l,d),S={i:l?5:4,A:x?x.A:Mw(),P:!1,I:!1,R:{},l:x,t:d,k:_,o:null,g:!1,C:!1};return Object.defineProperty(_,vr,{value:S,writable:!0}),_},S:function(d,x,l){l?sc(x)&&x[vr].A===d&&t(d.p):(d.u&&function _(S){if(S&&typeof S=="object"){var C=S[vr];if(C){var k=C.t,D=C.k,U=C.R,q=C.i;if(q===4)yu(D,function(V){V!==vr&&(k[V]!==void 0||Jh(k,V)?U[V]||_(D[V]):(U[V]=!0,Rl(C)))}),yu(k,function(V){D[V]!==void 0||Jh(D,V)||(U[V]=!1,Rl(C))});else if(q===5){if(s(C)&&(Rl(C),U.length=!0),D.length<k.length)for(var L=D.length;L<k.length;L++)U[L]=!1;else for(var K=k.length;K<D.length;K++)U[K]=!0;for(var R=Math.min(D.length,k.length),F=0;F<R;F++)D.hasOwnProperty(F)||(U[F]=!0),U[F]===void 0&&_(D[F])}}}}(d.p[0]),t(d.p))},K:function(d){return d.i===4?r(d):s(d)}})}var xA,xm,OE=typeof Symbol!="undefined"&&typeof Symbol("x")=="symbol",RY=typeof Map!="undefined",OY=typeof Set!="undefined",_A=typeof Proxy!="undefined"&&Proxy.revocable!==void 0&&typeof Reflect!="undefined",NI=OE?Symbol.for("immer-nothing"):((xA={})["immer-nothing"]=!0,xA),vA=OE?Symbol.for("immer-draftable"):"__$immer_draftable",vr=OE?Symbol.for("immer-state"):"__$immer_state",BY=""+Object.prototype.constructor,Qh=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,LI=Object.getOwnPropertyDescriptors||function(e){var t={};return Qh(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},Iw={},_m={get:function(e,t){if(t===vr)return e;var r=ru(e);if(!Jh(r,t))return function(u,d,x){var l,_=gA(d,x);return _?"value"in _?_.value:(l=_.get)===null||l===void 0?void 0:l.call(u.k):void 0}(e,r,t);var s=r[t];return e.I||!Wa(s)?s:s===Zv(e.t,t)?(Xv(e),e.o[t]=Pw(e.A.h,s,e)):s},has:function(e,t){return t in ru(e)},ownKeys:function(e){return Reflect.ownKeys(ru(e))},set:function(e,t,r){var s=gA(ru(e),t);if(s!=null&&s.set)return s.set.call(e.k,r),!0;if(!e.P){var u=Zv(ru(e),t),d=u==null?void 0:u[vr];if(d&&d.t===r)return e.o[t]=r,e.R[t]=!1,!0;if(zI(r,u)&&(r!==void 0||Jh(e.t,t)))return!0;Xv(e),Rl(e)}return e.o[t]===r&&(r!==void 0||t in e.o)||Number.isNaN(r)&&Number.isNaN(e.o[t])||(e.o[t]=r,e.R[t]=!0),!0},deleteProperty:function(e,t){return Zv(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,Xv(e),Rl(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=ru(e),s=Reflect.getOwnPropertyDescriptor(r,t);return s&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:s.enumerable,value:r[t]}},defineProperty:function(){$s(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){$s(12)}},zf={};yu(_m,function(e,t){zf[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),zf.deleteProperty=function(e,t){return zf.set.call(this,e,t,void 0)},zf.set=function(e,t,r){return _m.set.call(this,e[0],t,r,e[0])};var $Y=function(){function e(r){var s=this;this.O=_A,this.D=!0,this.produce=function(u,d,x){if(typeof u=="function"&&typeof d!="function"){var l=d;d=u;var _=s;return function(L){var K=this;L===void 0&&(L=l);for(var R=arguments.length,F=Array(R>1?R-1:0),V=1;V<R;V++)F[V-1]=arguments[V];return _.produce(L,function(J){var re;return(re=d).call.apply(re,[K,J].concat(F))})}}var S;if(typeof d!="function"&&$s(6),x!==void 0&&typeof x!="function"&&$s(7),Wa(u)){var C=fA(s),k=Pw(s,u,void 0),D=!0;try{S=d(k),D=!1}finally{D?sy(C):kw(C)}return typeof Promise!="undefined"&&S instanceof Promise?S.then(function(L){return Hv(C,x),Wv(L,C)},function(L){throw sy(C),L}):(Hv(C,x),Wv(S,C))}if(!u||typeof u!="object"){if((S=d(u))===void 0&&(S=u),S===NI&&(S=void 0),s.D&&FE(S,!0),x){var U=[],q=[];ua("Patches").M(u,S,U,q),x(U,q)}return S}$s(21,u)},this.produceWithPatches=function(u,d){if(typeof u=="function")return function(S){for(var C=arguments.length,k=Array(C>1?C-1:0),D=1;D<C;D++)k[D-1]=arguments[D];return s.produceWithPatches(S,function(U){return u.apply(void 0,[U].concat(k))})};var x,l,_=s.produce(u,d,function(S,C){x=S,l=C});return typeof Promise!="undefined"&&_ instanceof Promise?_.then(function(S){return[S,x,l]}):[_,x,l]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var t=e.prototype;return t.createDraft=function(r){Wa(r)||$s(8),sc(r)&&(r=LY(r));var s=fA(this),u=Pw(this,r,void 0);return u[vr].C=!0,kw(s),u},t.finishDraft=function(r,s){var u=r&&r[vr],d=u.A;return Hv(d,s),Wv(void 0,d)},t.setAutoFreeze=function(r){this.D=r},t.setUseProxies=function(r){r&&!_A&&$s(20),this.O=r},t.applyPatches=function(r,s){var u;for(u=s.length-1;u>=0;u--){var d=s[u];if(d.path.length===0&&d.op==="replace"){r=d.value;break}}u>-1&&(s=s.slice(u+1));var x=ua("Patches").$;return sc(r)?x(r,s):this.produce(r,function(l){return x(l,s)})},e}(),Lo=new $Y,FI=Lo.produce;Lo.produceWithPatches.bind(Lo);Lo.setAutoFreeze.bind(Lo);Lo.setUseProxies.bind(Lo);Lo.applyPatches.bind(Lo);Lo.createDraft.bind(Lo);Lo.finishDraft.bind(Lo);function vm(e){return vm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vm(e)}function jY(e,t){if(vm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(vm(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function UY(e){var t=jY(e,"string");return vm(t)=="symbol"?t:String(t)}function VY(e,t,r){return t=UY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,s)}return r}function wA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bA(Object(r),!0).forEach(function(s){VY(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bA(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Li(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var EA=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Kv=function(){return Math.random().toString(36).substring(7).split("").join(".")},cy={INIT:"@@redux/INIT"+Kv(),REPLACE:"@@redux/REPLACE"+Kv(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Kv()}};function GY(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function RI(e,t,r){var s;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Li(0));if(typeof t=="function"&&typeof r=="undefined"&&(r=t,t=void 0),typeof r!="undefined"){if(typeof r!="function")throw new Error(Li(1));return r(RI)(e,t)}if(typeof e!="function")throw new Error(Li(2));var u=e,d=t,x=[],l=x,_=!1;function S(){l===x&&(l=x.slice())}function C(){if(_)throw new Error(Li(3));return d}function k(L){if(typeof L!="function")throw new Error(Li(4));if(_)throw new Error(Li(5));var K=!0;return S(),l.push(L),function(){if(!!K){if(_)throw new Error(Li(6));K=!1,S();var F=l.indexOf(L);l.splice(F,1),x=null}}}function D(L){if(!GY(L))throw new Error(Li(7));if(typeof L.type=="undefined")throw new Error(Li(8));if(_)throw new Error(Li(9));try{_=!0,d=u(d,L)}finally{_=!1}for(var K=x=l,R=0;R<K.length;R++){var F=K[R];F()}return L}function U(L){if(typeof L!="function")throw new Error(Li(10));u=L,D({type:cy.REPLACE})}function q(){var L,K=k;return L={subscribe:function(F){if(typeof F!="object"||F===null)throw new Error(Li(11));function V(){F.next&&F.next(C())}V();var J=K(V);return{unsubscribe:J}}},L[EA]=function(){return this},L}return D({type:cy.INIT}),s={dispatch:D,subscribe:k,getState:C,replaceReducer:U},s[EA]=q,s}function qY(e){Object.keys(e).forEach(function(t){var r=e[t],s=r(void 0,{type:cy.INIT});if(typeof s=="undefined")throw new Error(Li(12));if(typeof r(void 0,{type:cy.PROBE_UNKNOWN_ACTION()})=="undefined")throw new Error(Li(13))})}function HY(e){for(var t=Object.keys(e),r={},s=0;s<t.length;s++){var u=t[s];typeof e[u]=="function"&&(r[u]=e[u])}var d=Object.keys(r),x;try{qY(r)}catch(l){x=l}return function(_,S){if(_===void 0&&(_={}),x)throw x;for(var C=!1,k={},D=0;D<d.length;D++){var U=d[D],q=r[U],L=_[U],K=q(L,S);if(typeof K=="undefined")throw S&&S.type,new Error(Li(14));k[U]=K,C=C||K!==L}return C=C||d.length!==Object.keys(_).length,C?k:_}}function uy(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(s){return s}:t.length===1?t[0]:t.reduce(function(s,u){return function(){return s(u.apply(void 0,arguments))}})}function WY(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(s){return function(){var u=s.apply(void 0,arguments),d=function(){throw new Error(Li(15))},x={getState:u.getState,dispatch:function(){return d.apply(void 0,arguments)}},l=t.map(function(_){return _(x)});return d=uy.apply(void 0,l)(u.dispatch),wA(wA({},u),{},{dispatch:d})}}}function OI(e){var t=function(s){var u=s.dispatch,d=s.getState;return function(x){return function(l){return typeof l=="function"?l(u,d,e):x(l)}}};return t}var BI=OI();BI.withExtraArgument=OI;var TA=BI,$I=globalThis&&globalThis.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,u){s.__proto__=u}||function(s,u){for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(s[d]=u[d])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}(),ZY=globalThis&&globalThis.__generator||function(e,t){var r={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},s,u,d,x;return x={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function l(S){return function(C){return _([S,C])}}function _(S){if(s)throw new TypeError("Generator is already executing.");for(;r;)try{if(s=1,u&&(d=S[0]&2?u.return:S[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,S[1])).done)return d;switch(u=0,d&&(S=[S[0]&2,d.value]),S[0]){case 0:case 1:d=S;break;case 4:return r.label++,{value:S[1],done:!1};case 5:r.label++,u=S[1],S=[0];continue;case 7:S=r.ops.pop(),r.trys.pop();continue;default:if(d=r.trys,!(d=d.length>0&&d[d.length-1])&&(S[0]===6||S[0]===2)){r=0;continue}if(S[0]===3&&(!d||S[1]>d[0]&&S[1]<d[3])){r.label=S[1];break}if(S[0]===6&&r.label<d[1]){r.label=d[1],d=S;break}if(d&&r.label<d[2]){r.label=d[2],r.ops.push(S);break}d[2]&&r.ops.pop(),r.trys.pop();continue}S=t.call(e,r)}catch(C){S=[6,C],u=0}finally{s=d=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}},gd=globalThis&&globalThis.__spreadArray||function(e,t){for(var r=0,s=t.length,u=e.length;r<s;r++,u++)e[u]=t[r];return e},XY=Object.defineProperty,KY=Object.defineProperties,YY=Object.getOwnPropertyDescriptors,SA=Object.getOwnPropertySymbols,JY=Object.prototype.hasOwnProperty,QY=Object.prototype.propertyIsEnumerable,CA=function(e,t,r){return t in e?XY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},tc=function(e,t){for(var r in t||(t={}))JY.call(t,r)&&CA(e,r,t[r]);if(SA)for(var s=0,u=SA(t);s<u.length;s++){var r=u[s];QY.call(t,r)&&CA(e,r,t[r])}return e},Yv=function(e,t){return KY(e,YY(t))},eJ=function(e,t,r){return new Promise(function(s,u){var d=function(_){try{l(r.next(_))}catch(S){u(S)}},x=function(_){try{l(r.throw(_))}catch(S){u(S)}},l=function(_){return _.done?s(_.value):Promise.resolve(_.value).then(d,x)};l((r=r.apply(e,t)).next())})},tJ=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?uy:uy.apply(null,arguments)};function nJ(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var r=t;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return t===r}function nc(e,t){function r(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];if(t){var d=t.apply(void 0,s);if(!d)throw new Error("prepareAction did not return an object");return tc(tc({type:e,payload:d.payload},"meta"in d&&{meta:d.meta}),"error"in d&&{error:d.error})}return{type:e,payload:s[0]}}return r.toString=function(){return""+e},r.type=e,r.match=function(s){return s.type===e},r}var rJ=function(e){$I(t,e);function t(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];var u=e.apply(this,r)||this;return Object.setPrototypeOf(u,t.prototype),u}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];return e.prototype.concat.apply(this,r)},t.prototype.prepend=function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];return r.length===1&&Array.isArray(r[0])?new(t.bind.apply(t,gd([void 0],r[0].concat(this)))):new(t.bind.apply(t,gd([void 0],r.concat(this))))},t}(Array),iJ=function(e){$I(t,e);function t(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];var u=e.apply(this,r)||this;return Object.setPrototypeOf(u,t.prototype),u}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];return e.prototype.concat.apply(this,r)},t.prototype.prepend=function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];return r.length===1&&Array.isArray(r[0])?new(t.bind.apply(t,gd([void 0],r[0].concat(this)))):new(t.bind.apply(t,gd([void 0],r.concat(this))))},t}(Array);function Dw(e){return Wa(e)?FI(e,function(){}):e}function oJ(e){return typeof e=="boolean"}function sJ(){return function(t){return aJ(t)}}function aJ(e){e===void 0&&(e={});var t=e.thunk,r=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var s=new rJ;return r&&(oJ(r)?s.push(TA):s.push(TA.withExtraArgument(r.extraArgument))),s}var lJ=!0;function cJ(e){var t=sJ(),r=e||{},s=r.reducer,u=s===void 0?void 0:s,d=r.middleware,x=d===void 0?t():d,l=r.devTools,_=l===void 0?!0:l,S=r.preloadedState,C=S===void 0?void 0:S,k=r.enhancers,D=k===void 0?void 0:k,U;if(typeof u=="function")U=u;else if(nJ(u))U=HY(u);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var q=x;typeof q=="function"&&(q=q(t));var L=WY.apply(void 0,q),K=uy;_&&(K=tJ(tc({trace:!lJ},typeof _=="object"&&_)));var R=new iJ(L),F=R;Array.isArray(D)?F=gd([L],D):typeof D=="function"&&(F=D(R));var V=K.apply(void 0,F);return RI(U,C,V)}function jI(e){var t={},r=[],s,u={addCase:function(d,x){var l=typeof d=="string"?d:d.type;if(!l)throw new Error("`builder.addCase` cannot be called with an empty action type");if(l in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[l]=x,u},addMatcher:function(d,x){return r.push({matcher:d,reducer:x}),u},addDefaultCase:function(d){return s=d,u}};return e(u),[t,r,s]}function uJ(e){return typeof e=="function"}function hJ(e,t,r,s){r===void 0&&(r=[]);var u=typeof t=="function"?jI(t):[t,r,s],d=u[0],x=u[1],l=u[2],_;if(uJ(e))_=function(){return Dw(e())};else{var S=Dw(e);_=function(){return S}}function C(k,D){k===void 0&&(k=_());var U=gd([d[D.type]],x.filter(function(q){var L=q.matcher;return L(D)}).map(function(q){var L=q.reducer;return L}));return U.filter(function(q){return!!q}).length===0&&(U=[l]),U.reduce(function(q,L){if(L)if(sc(q)){var K=q,R=L(K,D);return R===void 0?q:R}else{if(Wa(q))return FI(q,function(F){return L(F,D)});var R=L(q,D);if(R===void 0){if(q===null)return q;throw Error("A case reducer on a non-draftable value must not return undefined")}return R}return q},k)}return C.getInitialState=_,C}function dJ(e,t){return e+"/"+t}function pJ(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var r=typeof e.initialState=="function"?e.initialState:Dw(e.initialState),s=e.reducers||{},u=Object.keys(s),d={},x={},l={};u.forEach(function(C){var k=s[C],D=dJ(t,C),U,q;"reducer"in k?(U=k.reducer,q=k.prepare):U=k,d[C]=U,x[D]=U,l[C]=q?nc(D,q):nc(D)});function _(){var C=typeof e.extraReducers=="function"?jI(e.extraReducers):[e.extraReducers],k=C[0],D=k===void 0?{}:k,U=C[1],q=U===void 0?[]:U,L=C[2],K=L===void 0?void 0:L,R=tc(tc({},D),x);return hJ(r,function(F){for(var V in R)F.addCase(V,R[V]);for(var J=0,re=q;J<re.length;J++){var fe=re[J];F.addMatcher(fe.matcher,fe.reducer)}K&&F.addDefaultCase(K)})}var S;return{name:t,reducer:function(C,k){return S||(S=_()),S(C,k)},actions:l,caseReducers:d,getInitialState:function(){return S||(S=_()),S.getInitialState()}}}var fJ="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",mJ=function(e){e===void 0&&(e=21);for(var t="",r=e;r--;)t+=fJ[Math.random()*64|0];return t},gJ=["name","message","stack","code"],Jv=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),AA=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),yJ=function(e){if(typeof e=="object"&&e!==null){for(var t={},r=0,s=gJ;r<s.length;r++){var u=s[r];typeof e[u]=="string"&&(t[u]=e[u])}return t}return{message:String(e)}},BE=function(){function e(t,r,s){var u=nc(t+"/fulfilled",function(S,C,k,D){return{payload:S,meta:Yv(tc({},D||{}),{arg:k,requestId:C,requestStatus:"fulfilled"})}}),d=nc(t+"/pending",function(S,C,k){return{payload:void 0,meta:Yv(tc({},k||{}),{arg:C,requestId:S,requestStatus:"pending"})}}),x=nc(t+"/rejected",function(S,C,k,D,U){return{payload:D,error:(s&&s.serializeError||yJ)(S||"Rejected"),meta:Yv(tc({},U||{}),{arg:k,requestId:C,rejectedWithValue:!!D,requestStatus:"rejected",aborted:(S==null?void 0:S.name)==="AbortError",condition:(S==null?void 0:S.name)==="ConditionError"})}}),l=typeof AbortController!="undefined"?AbortController:function(){function S(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return S.prototype.abort=function(){},S}();function _(S){return function(C,k,D){var U=s!=null&&s.idGenerator?s.idGenerator(S):mJ(),q=new l,L;function K(F){L=F,q.abort()}var R=function(){return eJ(this,null,function(){var F,V,J,re,fe,be,ce;return ZY(this,function(ve){switch(ve.label){case 0:return ve.trys.push([0,4,,5]),re=(F=s==null?void 0:s.condition)==null?void 0:F.call(s,S,{getState:k,extra:D}),xJ(re)?[4,re]:[3,2];case 1:re=ve.sent(),ve.label=2;case 2:if(re===!1||q.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return fe=new Promise(function(Fe,Le){return q.signal.addEventListener("abort",function(){return Le({name:"AbortError",message:L||"Aborted"})})}),C(d(U,S,(V=s==null?void 0:s.getPendingMeta)==null?void 0:V.call(s,{requestId:U,arg:S},{getState:k,extra:D}))),[4,Promise.race([fe,Promise.resolve(r(S,{dispatch:C,getState:k,extra:D,requestId:U,signal:q.signal,abort:K,rejectWithValue:function(Fe,Le){return new Jv(Fe,Le)},fulfillWithValue:function(Fe,Le){return new AA(Fe,Le)}})).then(function(Fe){if(Fe instanceof Jv)throw Fe;return Fe instanceof AA?u(Fe.payload,U,S,Fe.meta):u(Fe,U,S)})])];case 3:return J=ve.sent(),[3,5];case 4:return be=ve.sent(),J=be instanceof Jv?x(null,U,S,be.payload,be.meta):x(be,U,S),[3,5];case 5:return ce=s&&!s.dispatchConditionRejection&&x.match(J)&&J.meta.condition,ce||C(J),[2,J]}})})}();return Object.assign(R,{abort:K,requestId:U,arg:S,unwrap:function(){return R.then(c1)}})}}return Object.assign(_,{pending:d,rejected:x,fulfilled:u,typePrefix:t})}return e.withTypes=function(){return e},e}();function c1(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function xJ(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var $E="listenerMiddleware";nc($E+"/add");nc($E+"/removeAll");nc($E+"/remove");var MA;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window!="undefined"?window:typeof global!="undefined"?global:globalThis);FY();const UI=BE("users/login",async(e,t)=>{if(!e.email||!e.password)throw new Error("Email & Password must be provided");const r=await Zi.login(e);return Nl(Ur.TOKEN,r.token),Nl(Ur.USER,JSON.stringify(r)),r}),VI=BE("users/signup",async(e,t)=>(await Zi.signup(e),null)),_J=BE("users/signup",async(e,t)=>(await Zi.forgotPasswords(e),null)),GI=pJ({name:"auth",initialState:{isShowLoginPage:!1,current:JSON.parse(Fs(Ur.USER))||null},reducers:{showLoginPage:e=>{e.isShowLoginPage=!0},hideLoginPage:e=>{e.isShowLoginPage=!1},logout:e=>{G1(Ur.USER),G1(Ur.TOKEN),e.current=null},createSaveBlog:(e,t)=>{const r=JSON.parse(Fs(Ur.USER));r.blogSaved.includes(t.payload)||(r.blogSaved=[...r.blogSaved,t.payload],e.current={...r},Nl(Ur.USER,JSON.stringify({...r})))},removeSaveBlog:(e,t)=>{const r=JSON.parse(Fs(Ur.USER));!r.blogSaved.includes(t.payload)||(r.blogSaved=r.blogSaved.filter(s=>s!==t.payload),e.current={...r},Nl(Ur.USER,JSON.stringify({...r})))},createReview:(e,t)=>{const r=JSON.parse(Fs(Ur.USER));r.listReviews=[...r==null?void 0:r.listReviews,t.payload],e.current={...r},Nl(Ur.USER,JSON.stringify({...r}))},toggleFollower:(e,t)=>{var s,u;const r=JSON.parse(Fs(Ur.USER));if((s=r==null?void 0:r.listFollowing)!=null&&s.includes(t.payload.id)){const d=(u=r==null?void 0:r.listFollowing)==null?void 0:u.filter(x=>x!==t.payload.id);r.listFollowing=d}else r.listFollowing=[...r==null?void 0:r.listFollowing,t.payload.id];e.current={...r},Nl(Ur.USER,JSON.stringify({...r}))},updateUser:(e,t)=>{const r=JSON.parse(Fs(Ur.USER));r.image=t.payload.avatar,e.current={...r},Nl(Ur.USER,JSON.stringify({...r}))},updateUserNotImage:(e,t)=>{const r=JSON.parse(Fs(Ur.USER));r[t.payload.field]=t.payload[t.payload.field],e.current={...r},Nl(Ur.USER,JSON.stringify({...r}))}},extraReducers:e=>{e.addCase(UI.fulfilled,(t,r)=>{t.current=r.payload,t.isShowLoginPage=!1}),e.addCase(VI.fulfilled,(t,r)=>{t.current=r.payload,t.isShowLoginPage=!1})}}),{showLoginPage:zo,hideLoginPage:vJ,logout:jE,createSaveBlog:Qte,removeSaveBlog:ene,createReview:tne,toggleFollower:nne,updateUser:bJ,updateUserNotImage:kA}=GI.actions;var wJ=GI.reducer;qI.propTypes={user:_e.object};function qI({user:e={}}){var x,l;const[t,r]=ne.exports.useState(!1),s=Ei(),u=yr(),d=async()=>{try{await Zi.logout();const _=jE();s(_),u("/")}catch(_){console.log("Error",_)}};return H(yn,{children:[T(Jt,{to:"/saved",className:`  cursor-pointer w-[40px] h-[40px] rounded-full overflow-hidden flex items-center justify-center bg-[#f0f2f5] ${qv.buttonHeaderHover}`,children:T("img",{src:"/img/saved.svg",alt:"saved",className:"w-1/2 h-1/2 object-cover"})}),T("div",{className:`cursor-pointer w-[40px] h-[40px] rounded-full overflow-hidden flex items-center justify-center bg-[#f0f2f5] ${qv.buttonHeaderHover}`,children:T("img",{src:"/img/notice.svg",alt:e.name,className:"w-1/2 h-1/2 object-cover"})}),H("div",{onClick:()=>r(_=>!_),className:`relative cursor-pointer w-[40px] h-[40px] rounded-full ${qv.buttonHeaderHover}`,children:[T("img",{src:`${e.image!=null?(x=e==null?void 0:e.image)==null?void 0:x.url:"/img/user-default.jpg"}`,alt:e.name,className:"w-full h-full object-cover rounded-full "}),H("div",{className:` absolute  z-[1002] top-full right-0 w-[200px] bg-white rounded-[6px] overflow-hidden  ${t?" opacity-100 visible":"opacity-0 invisible"} transition-all duration-200`,children:[H(Jt,{to:`/profile/${(e==null?void 0:e.slug)||"thainguyen"}`,className:"flex gap-x-2 py-2 px-[14px] border-b-[#eee] border-b-[1px] text-black hover:bg-[#f6f6f6] hover:text-primary transition-all duration-150",children:[T("div",{className:"relative cursor-pointer w-[40px] h-[40px] rounded-full overflow-hidden  ",children:T("img",{src:`${e.image!=null?(l=e==null?void 0:e.image)==null?void 0:l.url:"/img/user-default.jpg"}`,alt:e.name,className:"w-full h-full object-cover"})}),H("div",{children:[T("p",{className:"capitalize text-base  font-semibold overflow-ellipsis whitespace-normal overflow-hidden mb-2",children:e.name}),T("div",{children:T("img",{src:"/img/ranked.png",alt:"ranked",className:"w-[40px] h-[16px] mt-[-8px]"})})]})]}),H(Jt,{to:"/setting",className:"flex items-center gap-x-[6px] py-2 px-[14px] border-b-[#eee] border-b-[1px] text-black hover:bg-[#f6f6f6] hover:text-primary transition-all duration-150",children:[T(PI,{className:"w-[28px] text-base"}),T("p",{className:" text-base  font-semibold overflow-ellipsis whitespace-normal overflow-hidden ",children:"Ch\u1EC9nh s\u1EEDa h\u1ED3 s\u01A1"})]}),H(Jt,{to:"/",className:"flex items-center gap-x-[6px] py-2 px-[14px] border-b-[#eee] border-b-[1px] text-black hover:bg-[#f6f6f6] hover:text-primary transition-all duration-150",children:[T(kE,{className:"w-[28px] text-base"}),T("p",{className:" text-base  font-semibold overflow-ellipsis whitespace-normal overflow-hidden ",children:"Li\xEAn h\u1EC7 - g\xF3p \xFD"})]}),H("div",{onClick:d,className:"flex items-center gap-x-[6px] py-2 px-[14px] border-b-[#eee] border-b-[1px] text-black hover:bg-[#f6f6f6] hover:text-primary transition-all duration-150",children:[T(II,{className:"w-[28px] text-base"}),T("p",{className:" text-base  font-semibold overflow-ellipsis whitespace-normal overflow-hidden ",children:"\u0110\u0103ng xu\u1EA5t"})]})]})]})]})}HI.propTypes={};function HI({}){const[e,t]=ne.exports.useState(!1);return H("div",{onClick:s=>{t(u=>!u)},className:" xl:hidden w-[40px] h-[40px] flex items-center justify-center bg-[#f0f2f5] rounded-full cursor-pointer relative",children:[T("img",{src:"/img/wrap-icon.svg",alt:"wrap-icon",className:" w-1/2 h-1/2"}),e&&H("div",{className:"absolute z-[100] top-full left-0 w-[180px] bg-white rounded-[6px] shadow-2xl",children:[H(Jt,{to:"/explore",className:"px-4 py-2 block hover:text-primary hover:bg-[#f6f6f6] transition-all duration-300",children:[T("i",{className:"fa-regular fa-hashtag "}),T("span",{className:"ml-1 text-[18px] font-medium  ",children:"Kh\xE1m ph\xE1"})]}),H(Jt,{to:"/",className:"px-4 py-2 block hover:text-primary hover:bg-[#f6f6f6] transition-all duration-300",children:[T("i",{className:"fa-solid fa-certificate"}),T("span",{className:"ml-1 text-[18px] font-medium  ",children:"Khuy\u1EBFn m\xE3i"})]})]})]})}UE.propTypes={show:_e.bool,onShow:_e.func};function UE({show:e,onShow:t}){const r=yr(),[s,u]=ne.exports.useState(()=>Fs("view_history")||[]),[d,x]=ne.exports.useState({limit:5});if(typeof document=="undefined")return T("div",{children:"Modal"});const{control:l,handleSubmit:_}=us({defaultValues:{name:""}});ne.exports.useEffect(()=>{(async()=>{try{const k=await yo.getAll(d);u(k)}catch(k){console.log("Error \u{1F4A5}",k.message)}})()},[d]);const S=k=>{x(D=>({...D,...k}))},C=k=>{r(`/place/${k.slug}`)};return ri.exports.createPortal(H("div",{className:`fixed inset-0 z-[10000]  ${e?"translate-x-0 opacity-100":"translate-x-full opacity-0"} transition-all duration-300 lg:hidden`,children:[T("div",{className:"absolute inset-0 bg-[rgba(0,0,0,.45)]"}),H("div",{className:"absolute inset-0 bg-white z-10 lg:hidden",children:[H("form",{className:"p-3 flex",onChange:_(SE(S,300)),children:[T(CE,{control:l,name:"name",placeholder:"Nh\u1EADp t\xEAn qu\xE1n, khu v\u1EF1c, ki\u1EC3u qu\xE1n...",focus:e}),T("h3",{className:"shrink-0 text-base text-[#A0A0A0] font-semibold flex items-center justify-center pl-3 cursor-pointer",onClick:t,children:"H\u1EE7y"})]}),H("div",{className:"px-3",children:[H(Jt,{to:"/search",className:"flex items-center py-[6px] hover:bg-[#eee] transition-all duration-200",children:[T("div",{className:" border-[3px] border-black rounded-full w-[40px] h-[40px] flex items-center justify-center mr-[10px]",children:T("i",{className:"fa-solid fa-location-arrow text-2xl"})}),T("span",{className:"text-base font-semibold text-black",children:"T\xECm quanh \u0111\xE2y"})]}),H("div",{className:"pt-[10px]",children:[T("h3",{className:"py-1 pb-1 text-base font-bold",children:"\u0110\xE3 xem g\u1EA7n \u0111\xE2y"}),s.map(k=>{var D,U;return T("div",{onClick:()=>C(k),children:H("div",{className:"px-[6px] py-[10px] flex relative hover:bg-[#eee] cursor-pointer transition-all duration-300",children:[T("img",{src:((D=k==null?void 0:k.listImage)==null?void 0:D.length)>0?(U=k==null?void 0:k.listImage[0])==null?void 0:U.url:"",alt:"",className:"mr-[10px] w-[50px] h-[50px] object-cover rounded-[4px]"}),H("div",{className:"pr-3 mr-[10px] flex-1",children:[T("p",{className:"lg:text-base text-sm text-black font-semibold mb-[2px]",children:k==null?void 0:k.name}),T("p",{className:"lg:text-sm text-xs text-[#6b6b6b] truncate",children:k==null?void 0:k.location})]})]})},k==null?void 0:k.id)})]})]})]})]}),document.querySelector("body"))}WI.propTypes={onClick:_e.func};function WI({onClick:e=null}){const[t,r]=ne.exports.useState(!1),s=Ji();return H("div",{className:"gap-x-4 flex lg:hidden",children:[s.pathname!=="/search"?H("div",{className:"relative bg-[#f0f2f5] text-primary w-10 h-10 rounded-full flex items-center justify-center",children:[T(Jt,{to:"",className:"z-10 relative",children:T("i",{className:"fa-solid fa-location-dot text-[20px]"})}),T("div",{className:"absolute inset-0 flex items-center justify-center ",children:T("div",{className:"w-[20px] h-[20px] bg-primary rounded-full animate-ping"})})]}):T("div",{onClick:()=>{r(!0)},className:"relative bg-[#f0f2f5] text-primary w-10 h-10 rounded-full flex items-center justify-center cursor-pointer",children:T("div",{className:"z-10 relative w-full flex items-center justify-center",children:T(CY,{className:"m-0 text-[26px]"})})}),T("div",{className:"bg-[#f0f2f5] w-10 h-10 rounded-full flex items-center justify-center  cursor-pointer",onClick:e,children:T("span",{children:H("svg",{viewBox:"0 0 120 100",width:"20",height:"18",className:"fill-primary",children:[T("rect",{width:"120",height:"18",rx:"14"}),T("rect",{y:"40",x:"30",width:"90",height:"20",rx:"14"}),T("rect",{y:"80",width:"120",height:"20",rx:"14"})]})})}),T(UE,{show:t,onShow:()=>r(!1)})]})}const EJ=[{title:"T\xF4i \u0110i Cafe",elementList:[{pathname:"/",element:H(yn,{children:[T("i",{className:"fa-solid fa-house-chimney text-[18px]  pr-3 "}),T("span",{className:"text-[16px] capitalize  font-medium",children:"Trang ch\u1EE7"})]})},{pathname:"/explore",element:H(yn,{children:[T("i",{className:"fa-solid fa-fire-flame-curved  text-[18px]  pr-3"}),T("span",{className:"text-[16px] capitalize  font-medium",children:"Kh\xE1m ph\xE1"})]})},{pathname:"",element:H(yn,{children:[T("i",{className:"fa-solid fa-certificate text-[18px]  pr-3"}),T("span",{className:"text-[16px] capitalize  font-medium",children:"Khuy\u1EBFn m\xE3i"})]})},{pathname:"",element:H(yn,{children:[T("i",{className:"fa-solid fa-location-dot text-[18px]  pr-3"}),T("span",{className:"text-[16px] capitalize  font-medium",children:"\u0110\u1ECBa \u0111i\u1EC3m m\u1EDBi"})]})}]},{title:"Th\xF4ng Tin",elementList:[{pathname:"",element:H(yn,{children:[T("i",{className:"fa-solid fa-circle-info text-[18px]  pr-3"}),T("span",{className:"text-[16px] capitalize  font-medium",children:"Gi\u1EDBi thi\u1EC7u"})]})},{pathname:"",element:H(yn,{children:[T("i",{className:"fa-solid fa-user-shield text-[18px]  pr-3"}),T("span",{className:"text-[16px] capitalize  font-medium",children:"\u0110i\u1EC1u kho\u1EA3n & Ch\xEDnh s\xE1ch"})]})},{pathname:"",element:H(yn,{children:[T("i",{className:"fa-solid fa-envelope text-[18px]  pr-3"}),T("span",{className:"text-[16px] capitalize  font-medium",children:"Li\xEAn h\u1EC7 - G\xF3p \xFD"})]})}]},{title:"Theo d\xF5i ch\xFAng t\xF4i",elementList:[{pathname:"",element:H(yn,{children:[T("i",{className:"fa-brands fa-facebook-f facebook text-[18px]  pr-3"}),T("span",{className:"facebook text-[16px] capitalize  font-medium",children:"Facebook"})]})},{pathname:"",element:H(yn,{children:[T("i",{className:"fa-brands fa-instagram instagram text-[18px]  pr-3"})," ",T("span",{className:"instagram text-[16px] capitalize  font-medium ml-[-6px]",children:"Instagram"})]})},{pathname:"",element:H(yn,{children:[T("i",{className:"fa-brands fa-tiktok tiktok text-[18px]  pr-3"}),T("span",{className:"tiktok text-[16px] capitalize  font-medium",children:"Tiktok"})]})}]}];ZI.propTypes={show:_e.bool,onClick:_e.func,onShow:_e.func};function ZI({show:e,onClick:t=null,onShow:r=null}){var _;if(typeof document=="undefined")return T("div",{className:"modal",children:"Modal"});const s=jr(S=>S.auth.current),u=Ei(),d=yr(),x=()=>{if(!t||!r)return null;t(),r()},l=async()=>{try{await Zi.logout();const S=jE();u(S),d("/")}catch(S){console.log("Error",S)}};return ri.exports.createPortal(H("div",{className:`lg:hidden fixed inset-0 z-[10000] ${e?" visible":" invisible"} transition-all duration-500 `,children:[T("div",{className:"absolute inset-0 bg-[rgba(0,0,0,.45)] cursor-pointer",onClick:t}),H("div",{className:` overflow-y-scroll absolute inset-y-0 right-0 z-10 bg-white  w-[280px]  transition-all duration-500 ${e?"translate-x-0":"translate-x-[100%]"}`,children:[s?H("div",{children:[H(Jt,{to:`/profile/${s==null?void 0:s.slug}`,className:"flex gap-x-4 w-full px-5 pt-5 pb-4 bg-[linear-gradient(270deg,#ef5d7c,#e03)]  rounded-br-[60px] ",children:[T("img",{src:((_=s==null?void 0:s.image)==null?void 0:_.url)||"/img/user-default.jpg",alt:s.photo,className:"w-[60px] h-[60px] object-cover rounded-full "}),H("div",{children:[T("p",{className:"text-lg font-bold text-white mb-1 truncate-text",children:s.name}),T("img",{src:"/img/ranked.png",alt:"ranked",className:"w-[44px] object-cover"})]})]}),H(Jt,{to:"/setting",className:"animation-origin block py-[10px] px-5",children:[T("i",{className:"fa-solid fa-house-chimney text-[18px]  pr-3 "}),T("span",{className:"text-[16px] capitalize  font-medium",children:"Ch\u1EC9nh s\u1EEDa h\u1ED3 s\u01A1"})]}),H(Jt,{to:"/saved",className:"animation-origin flex items-center gap-x-3 py-[10px] px-5",children:[T(kY,{className:"text-[20px] object-cover"}),T("span",{className:"text-[16px] capitalize  font-medium",children:"Danh s\xE1ch \u0111\xE3 l\u01B0u"})]})]}):T("div",{className:"p-5 pb-4",children:T("button",{onClick:x,className:"bg-primary rounded-[6px] text-base font-medium text-white px-4 w-full h-[40px] leading-10 hover:bg-[#be0129] transition-all duration-300",children:"\u0110\u0103ng nh\u1EADp / \u0110\u0103ng k\xFD"})}),T("div",{className:"mt-[10px]",children:EJ.map((S,C)=>H(zt.Fragment,{children:[T("h3",{className:"capitalize mt-[10px] mb-1 py-[6px] px-5 bg-[#f0f2f5] text-sm font-medium",children:S.title}),S.elementList.map((k,D)=>T(Jt,{to:k==null?void 0:k.pathname,className:"animation-origin block py-[10px] px-5",children:k.element},D))]},C))}),s&&T("div",{className:"py-[10px] px-5 flex items-center justify-center",children:T("button",{onClick:l,className:"text-base font-normal text-primary rounded-[4px] outline-none border-primary border-[1px] w-full p-1 hover:bg-primary hover:text-white transition-all duration-300",children:"\u0110\u0103ng xu\u1EA5t"})})]})]}),document.querySelector("body"))}function TJ(e){return Wt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{d:"M16.3394 9.32245C16.7434 8.94589 16.7657 8.31312 16.3891 7.90911C16.0126 7.50509 15.3798 7.48283 14.9758 7.85938L12.0497 10.5866L9.32245 7.66048C8.94589 7.25647 8.31312 7.23421 7.90911 7.61076C7.50509 7.98731 7.48283 8.62008 7.85938 9.0241L10.5866 11.9502L7.66048 14.6775C7.25647 15.054 7.23421 15.6868 7.61076 16.0908C7.98731 16.4948 8.62008 16.5171 9.0241 16.1405L11.9502 13.4133L14.6775 16.3394C15.054 16.7434 15.6868 16.7657 16.0908 16.3891C16.4948 16.0126 16.5171 15.3798 16.1405 14.9758L13.4133 12.0497L16.3394 9.32245Z",fill:"currentColor"}},{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M1 12C1 5.92487 5.92487 1 12 1C18.0751 1 23 5.92487 23 12C23 18.0751 18.0751 23 12 23C5.92487 23 1 18.0751 1 12ZM12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21Z",fill:"currentColor"}}]})(e)}bm.propTypes={control:_e.object,name:_e.string,focus:_e.bool};function bm({control:e,focus:t=!1,...r}){const{field:s,fieldState:u}=Ad({name:r.name,control:e,defaultValue:""}),d=ne.exports.useRef(null);return ne.exports.useEffect(()=>{d&&d.current&&t&&d.current.focus()},[t]),H("div",{className:"relative w-full",children:[T(kE,{className:"absolute top-0 right-[8px] text-[#c3c3c3] translate-y-[50%] text-[20px] "}),T("input",{className:"w-full text-base tracking-[0.4px] outline-none rounded-[4px] border border-[#717171] py-[6px] pl-[10px] pr-[30px] focus:border-[#fc7f9c] focus:shadow-[0_0_6px_rgb(255,123,153)] transition-all duration-300",...s,...r,name:r==null?void 0:r.name,ref:d})]})}XI.propTypes={onSubmit:_e.func};const SJ=Tu({email:cr().trim().email("Email kh\xF4ng h\u1EE3p l\u1EC7").required("Vui l\xF2ng nh\u1EADp email c\u1EE7a b\u1EA1n"),password:cr().trim().required("Vui l\xF2ng nh\u1EADp m\u1EADt kh\u1EA9u c\u1EE7a b\u1EA1n.").min(6,"Password \xEDt nh\u1EA5t l\xE0 6 k\xED t\u1EF1.")});function XI({onSubmit:e=null}){var _,S;const[t,r]=ne.exports.useState(""),{control:s,handleSubmit:u,setValue:d,formState:x}=us({mode:"onSubmit",reValidateMode:"onSubmit",resolver:zd(SJ)});return H("form",{onSubmit:u(async C=>{if(!e)return null;try{await e(C)}catch(k){console.log(k),r(k==null?void 0:k.message)}}),children:[H("div",{className:"py-[6px]",children:[T("label",{htmlFor:"email",className:"text-base mb-[4px] inline-block",children:"Email"}),T(bm,{control:s,name:"email",focus:!0,id:"email",type:"email",placeholder:"example@gmail.com"})]}),(x==null?void 0:x.errors.email)&&T("span",{className:"block font-medium text-sm text-primary transition-all duration-150",children:(_=x.errors.email)==null?void 0:_.message}),H("div",{className:"py-[6px]",children:[T("label",{htmlFor:"password",className:"text-base mb-[4px] inline-block",children:"M\u1EADt kh\u1EA9u"}),T(fd,{control:s,name:"password",id:"password",setValue:d,placeholder:"********"})]}),(x==null?void 0:x.errors.password)&&T("span",{className:"block font-medium text-sm text-primary transition-all duration-150",children:(S=x.errors.password)==null?void 0:S.message}),t.length>0&&T("span",{className:"block font-medium text-sm text-primary transition-all duration-150",children:t}),T("button",{formNoValidate:!0,className:` w-full my-[14px] p-2 text-[18px] font-medium tracking-[0.4px] border-none outline-none rounded-[4px] text-white ${x.isSubmitting?"bg-gray-400":"bg-primary"} transition-all`,disabled:x.isSubmitting,children:"\u0110\u0103ng nh\u1EADp"}),H("div",{className:"relative text-center overflow-hidden p-2",children:[T("div",{className:" absolute top-[50%] left-0 w-1/2 border-t-[1px] border-t-[#717171] translate-x-[-50%] ml-4 "}),T("span",{className:" text-base px-[6px]",children:"ho\u1EB7c ti\u1EBFp t\xFAc v\u1EDBi"}),T("div",{className:" absolute top-[50%] right-0 w-1/2 border-t-[1px] border-t-[#717171] translate-x-[50%] mr-4"})]})]})}KI.propTypes={onSubmit:_e.func};const CJ=Tu({name:cr().trim().required("Vui l\xF2ng \u0111i\u1EC1n t\xEAn c\u1EE7a b\u1EA1n.").min(3,"T\xEAn ng\u01B0\u1EDDi d\xF9ng \xEDt nh\u1EA5t l\xE0 6 k\xED t\u1EF1."),email:cr().trim().email("Email kh\xF4ng h\u1EE3p l\u1EC7").required("Vui l\xF2ng nh\u1EADp email c\u1EE7a b\u1EA1n"),password:cr().trim().required("Vui l\xF2ng nh\u1EADp m\u1EADt kh\u1EA9u c\u1EE7a b\u1EA1n.").min(6,"Password \xEDt nh\u1EA5t l\xE0 6 k\xED t\u1EF1."),passwordConfirm:cr().trim().required("Vui l\xF2ng x\xE1c nh\u1EADn l\u1EA1i m\u1EADt kh\u1EA9u.").oneOf([mx("password")],"M\u1EADt kh\u1EA9u nh\u1EADp l\u1EA1i kh\xF4ng ch\xEDnh x\xE1c")});function KI({onSubmit:e=null}){const[t,r]=ne.exports.useState(""),{control:s,handleSubmit:u,setValue:d,formState:x}=us({mode:"onSubmit",reValidateMode:"onSubmit",resolver:zd(CJ)});return H("form",{onSubmit:u(async _=>{if(!e)return null;try{await e(_)}catch(S){r(S==null?void 0:S.message)}}),children:[H("div",{className:"py-[6px]",children:[T("label",{htmlFor:"email",className:"text-base mb-[4px] inline-block",children:"T\xEAn hi\u1EC3n th\u1ECB"}),T(bm,{control:s,name:"name",focus:!0,id:"name",type:"text",placeholder:"123123"})]}),x.errors.name&&T("span",{className:"block font-medium text-sm text-primary transition-all duration-150",children:x.errors.name.message}),H("div",{className:"py-[6px]",children:[T("label",{htmlFor:"email",className:"text-base mb-[4px] inline-block",children:"Email"}),T(bm,{control:s,name:"email",id:"email",type:"email",placeholder:"example@gmail.com"})]}),x.errors.email&&T("span",{className:"block font-medium text-sm text-primary transition-all duration-150",children:x.errors.email.message}),H("div",{className:"py-[6px]",children:[T("label",{htmlFor:"password",className:"text-base mb-[4px] inline-block",children:"M\u1EADt kh\u1EA9u"}),T(fd,{control:s,name:"password",id:"password",setValue:d,placeholder:"123123"})]}),x.errors.password&&T("span",{className:"block font-medium text-sm text-primary transition-all duration-150",children:x.errors.password.message}),H("div",{className:"py-[6px]",children:[T("label",{htmlFor:"passwordConfirm",className:"text-base mb-[4px] inline-block",children:"Nh\u1EADp l\u1EA1i m\u1EADt kh\u1EA9u"}),T(fd,{control:s,name:"passwordConfirm",id:"passwordConfirm",setValue:d,placeholder:"123123"})]}),x.errors.passwordConfirm&&T("span",{className:"block font-medium text-sm text-primary transition-all duration-150",children:x.errors.passwordConfirm.message}),t.length>0&&T("span",{className:"block font-medium text-sm text-primary transition-all duration-150",children:t}),T("button",{formNoValidate:!0,className:` w-full my-[14px] p-2 text-[18px] font-medium tracking-[0.4px] border-none outline-none rounded-[4px] text-white ${x.isSubmitting?"bg-gray-400":"bg-primary"} transition-all`,disabled:x.isSubmitting,children:"T\u1EA1o t\xE0i kho\u1EA3n"}),H("div",{className:"relative text-center overflow-hidden p-2",children:[T("div",{className:" absolute top-[50%] left-0 w-1/2 border-t-[1px] border-t-[#717171] translate-x-[-50%] ml-4 "}),T("span",{className:" text-base px-[6px]",children:"ho\u1EB7c ti\u1EBFp t\xFAc v\u1EDBi"}),T("div",{className:" absolute top-[50%] right-0 w-1/2 border-t-[1px] border-t-[#717171] translate-x-[50%] mr-4"})]})]})}YI.propTypes={onSubmit:_e.func};const AJ=Tu({email:cr().trim().email("Email kh\xF4ng h\u1EE3p l\u1EC7").required("Vui l\xF2ng nh\u1EADp email c\u1EE7a b\u1EA1n")});function YI({onSubmit:e=null}){var _;const[t,r]=ne.exports.useState(""),{control:s,handleSubmit:u,setValue:d,formState:x}=us({mode:"onSubmit",reValidateMode:"onSubmit",resolver:zd(AJ)});return H("form",{onSubmit:u(async S=>{if(!e)return null;try{await e(S)}catch(C){console.log(C),r(C==null?void 0:C.message)}}),children:[H("div",{className:"py-[6px]",children:[T("label",{htmlFor:"email",className:"text-base mb-[4px] inline-block",children:"Email"}),T(bm,{control:s,name:"email",focus:!0,id:"email",type:"email",placeholder:"example@gmail.com"})]}),(x==null?void 0:x.errors.email)&&T("span",{className:"block font-medium text-sm text-primary transition-all duration-150",children:(_=x.errors.email)==null?void 0:_.message}),t.length>0&&T("span",{className:"block font-medium text-sm text-primary transition-all duration-150",children:t}),T("button",{formNoValidate:!0,className:` w-full my-[14px] p-2 text-[18px] font-medium tracking-[0.4px] border-none outline-none rounded-[4px] text-white ${x.isSubmitting?"bg-gray-400":"bg-primary"} transition-all`,disabled:x.isSubmitting,children:"Qu\xEAn m\u1EADt kh\u1EA9u"}),H("div",{className:"relative text-center overflow-hidden p-2",children:[T("div",{className:" absolute top-[50%] left-0 w-1/2 border-t-[1px] border-t-[#717171] translate-x-[-50%] ml-4 "}),T("span",{className:" text-base px-[6px]",children:"ho\u1EB7c ti\u1EBFp t\xFAc v\u1EDBi"}),T("div",{className:" absolute top-[50%] right-0 w-1/2 border-t-[1px] border-t-[#717171] translate-x-[50%] mr-4"})]})]})}JI.propTypes={onClick:_e.func.isRequired};function JI({onClick:e}){const t=yr();if(typeof document=="undefined")return T("div",{children:"Login Page"});const[r,s]=ne.exports.useState(!0),[u,d]=ne.exports.useState(!1),x=Ei(),l=async C=>{if(r&&!u){const k=UI(C),D=await x(k);c1(D),Yt("Login successfully")}else if(!r&&!u){const k=VI(C),D=await x(k);c1(D),Yt("Register successfully")}else{const k=_J(C),D=await x(k);c1(D),t("/verify",{state:{email:C==null?void 0:C.email,type:"forgot"}})}},_=()=>{d(!0),s(!1)},S=()=>{s(C=>!C),d(!1)};return ri.exports.createPortal(T("div",{className:"fixed inset-0 w-[100vw] h-[100vh] z-[10000] flex items-center justify-center bg-[rgba(0,0,0,.65)] ",children:H("div",{className:"relative overflow-hidden flex  rounded-[10px] bg-white w-full h-full lg:h-auto lg:w-auto",children:[T(TJ,{onClick:e,className:"absolute top-0 lg:right-0 right-[16px]  text-[26px] m-[6px] text-[#717171] cursor-pointer hover:scale-125 hover:text-black transition-all duration-300"}),H("div",{className:"lg:w-[400px] p-6 lg:h-[600px] w-full h-full ",children:[T("h2",{className:"mb-[10px] text-[21px] font-medium",children:r?"\u0110\u0103ng nh\u1EADp t\xE0i kho\u1EA3n":!r&&!u?"T\u1EA1o t\xE0i kho\u1EA3n":"Qu\xEAn m\u1EADt kh\u1EA9u"}),r&&!u?T(XI,{onSubmit:l}):!r&&u?T(YI,{onSubmit:l}):T(KI,{onSubmit:l}),r&&T("div",{onClick:_,className:"block text-base text-center pt-5 text-primary font-bold cursor-pointer hover:underline transition-all duration-300",children:"Qu\xEAn m\u1EADt kh\u1EA9u?"}),H("div",{className:"texxt-base pt-[10px] text-center",children:[r?"B\u1EA1n ch\u01B0a c\xF3 t\xE0i kho\u1EA3n?":"B\u1EA1n \u0111\xE3 c\xF3 t\xE0i kho\u1EA3n",T("span",{onClick:S,className:"text-primary font-bold ml-1 cursor-pointer hover:underline transition-all duration-300",children:r?" T\u1EA1o t\xE0i kho\u1EA3n":"\u0110\u0103ng nh\u1EADp"})]})]}),T("div",{className:"w-[400px] bg-[#fdebef] hidden lg:block",children:T("img",{src:"/img/login-image.svg",alt:"login-image",className:"w-full h-full object-contain"})})]})}),document.querySelector("body"))}function MJ(){const[e,t]=ne.exports.useState(!1),[r,s]=ne.exports.useState(!1),[u,d]=Ka(),x=jr(q=>q.auth.isShowLoginPage),l=jr(q=>q.auth.current),_=Ei(),S=Ji();ne.exports.useEffect(()=>()=>{d(!1),U()},[]);const C=()=>{t(q=>!q),d(q=>!q)},k=q=>{s(L=>!L),q.stopPropagation()},D=q=>{const L=zo();_(L)},U=q=>{const L=vJ();_(L)};return H("header",{className:"flex items-center justify-between h-[54px] px-[6px] pb-[2px] lg:px-10 lg:pb-0  lg:h-[60px] shadow-lg",children:[H("div",{className:"flex items-center gap-x-6 ",children:[T(Jt,{to:"/",className:" h-[44px]  lg:h-[60px] ",children:T("img",{src:"/img/logo.svg",alt:"",className:"w-full h-full"})}),S.pathname!=="/"&&H("div",{onClick:()=>s(!0),className:`hidden lg:flex items-center relative ${r?"  w-[500px]":"w-[300px]"}  h-[40px] px-[14px] mr-[14px] rounded-full bg-[#f0f2f5] transition-all duration-300 `,children:[T("i",{className:"fa-solid fa-magnifying-glass"}),T("input",{type:"text",placeholder:"T\xECm ki\u1EBFm qu\xE1n cafe",className:"bg-transparent cursor-text outline-none border-none w-full h-full text-[#606770] font-normal px-[2px] py-[1px] ml-[6px] text-base leading-[28px]"}),T(AE,{show:r,onShow:k})]}),T(HI,{}),r||H(yn,{children:[H(Jt,{to:"/explore",className:"py-[10px] text-[18px] mr-3 hidden xl:block lg:hover:text-primary transition-all duration-300 cursor-pointer ",children:[T("i",{className:"fa-regular fa-hashtag "}),T("span",{className:" ml-1 font-medium ",children:"Kh\xE1m ph\xE1"})]}),H("div",{className:"py-[10px] text-[18px] hidden xl:block lg:hover:text-primary transition-all duration-300 cursor-pointer",children:[T("i",{className:"fa-solid fa-certificate"}),T("span",{className:" ml-1 font-medium",children:"Khuy\u1EBFn m\xE3i"})]})]})]}),T("div",{className:" gap-x-[14px] hidden lg:flex",children:l?T(qI,{user:l}):T("button",{onClick:D,className:"rounded-full text-primary\r h-10 text-[16px] leading-[30px] font-semibold px-[14px] border border-primary lg:hover:bg-[#be0129] lg:hover:text-white transition-all duration-300",children:"\u0110\u0103ng nh\u1EADp"})}),T(WI,{onClick:C}),T(ZI,{show:e,onClick:C,onShow:D}),x&&T(JI,{onClick:U})]})}function kJ(){return H("footer",{className:"text-white relative hidden lg:block",children:[T("div",{className:"absolute inset-0 z-[-1]",children:T("img",{src:"/img/background-footer.jpg",alt:"background-footer",className:"w-full h-full object-cover"})}),H("div",{className:"max-w-[1200px] mx-auto pt-[30px] pb-[20px] px-[20px] relative border-b-2 border-white ",children:[H("div",{className:"flex  item-center",children:[H("div",{className:"w-[33.33%]",children:[T("div",{children:T("img",{src:"/img/logo.svg",alt:"logo-footer",className:"h-[60px] object-cover cursor-pointer"})}),H("div",{className:"w-[230px] mt-5 border-2 border-white rounded-md flex p-[6px] items-center justify-center hover:border-primary duration-300 cursor-pointer",children:[T("img",{src:"/img/cooperate.webp",alt:"logo-cooperate",className:"h-[48px] w-[48px] object-cover mr-1"}),T("span",{className:"text-[14px] text-white",children:"H\u1EE3p t\xE1c v\u1EDBi ch\xFAng t\xF4i"})]})]}),H("div",{className:"w-[33.33%]",children:[T("h4",{className:"text-base font-bold uppercase mb-[14px]",children:"V\u1EC1 ch\xFAng t\xF4i"}),T("div",{className:"mb-[6px] text-sm leading-6   ",children:T(Jt,{to:"",className:"animation-origin",children:"Gi\u1EDBi thi\u1EC7u"})}),T("div",{className:"mb-[6px] text-sm leading-6  ",children:T(Jt,{to:"",className:"animation-origin",children:"Gi\u1EA3i \u0111\xE1p th\u1EAFc m\u1EAFc"})}),T("div",{className:"mb-[6px] text-sm leading-6  ",children:T(Jt,{to:"",className:"animation-origin",children:"Li\u1EC7n h\u1EC7 - g\xF3p \xFD"})}),T("div",{className:"mb-[6px] text-sm leading-6  ",children:T(Jt,{to:"",className:"animation-origin",children:"\u0110i\u1EC1u kho\u1EA3n s\u1EED d\u1EE5ng"})})]}),H("div",{className:"w-[33.33%]",children:[T("h4",{className:"text-base font-bold uppercase mb-[14px]",children:"Theo d\xF5i ch\xFAng t\xF4i tr\xEAn"}),T("div",{children:H("div",{className:"mb-[6px] text-sm leading-6 animation-origin inline-block  ",children:[T("i",{className:"fa-brands fa-facebook-f mb-[5px] mr-[5px] facebook text-[16px]"}),T(Jt,{to:"",className:"",children:"Facebook"})]})}),T("div",{children:H("div",{className:"mb-[6px] text-sm leading-6 animation-origin inline-block  ",children:[T("i",{className:"fa-brands fa-instagram mb-[5px] mr-[5px] instagram text-[16px]"}),T(Jt,{to:"",className:"",children:"Instagram"})]})}),T("div",{children:H("div",{className:"mb-[6px] text-sm leading-6 animation-origin inline-block  ",children:[T("i",{className:"fa-brands fa-tiktok mb-[5px] mr-[5px] tiktok text-[16px]"}),T(Jt,{to:"",className:"",children:"Tiktok"})]})})]})]}),T("img",{src:"/img/sticker-footer.png",alt:"sticker-footer",className:"absolute w-[52px] h-[120px] top-0 right-4 bottom-auto left-auto   origin-top   transition all .1s cubic-bezier(.17,.67,.5,.71) hover:rotate-[-6deg]"})]}),H("div",{className:"text-center text-base py-[10px] px-4",children:["B\u1EA3n quy\u1EC1n \xA9 2022",T(Jt,{to:"",className:"uppercase text-primary font-bold cursor-pointer ml-1",children:"TOIDICAFE.VN"})]})]})}var QA;const PJ=[{pathname:"/",element:H(yn,{children:[T("i",{className:"fa-solid fa-house-chimney   text-[20px] pt-[10px] "}),T("span",{className:"block text-[10px] capitalize mt-[2px]  font-medium",children:"Trang ch\u1EE7"})]})},{pathname:"/explore",element:H(yn,{children:[T("i",{className:"fa-solid fa-fire-flame-curved  text-[20px] pt-[10px]"}),T("span",{className:"block text-[10px] capitalize mt-[2px]  font-medium",children:"Kh\xE1m ph\xE1"})]})},{pathname:"",element:H(yn,{children:[T("i",{className:"fa-solid fa-certificate  text-[20px] pt-[10px]"}),T("span",{className:"block text-[10px] capitalize mt-[2px]  font-medium",children:"Khuy\u1EBFn m\xE3i"})]})},{pathname:"/saved",element:H(yn,{children:[T("i",{className:"fa-solid fa-bookmark  text-[20px] pt-[10px]"}),T("span",{className:"block text-[10px] capitalize mt-[2px]  font-medium",children:"\u0110\xE3 l\u01B0u"})]})},{pathname:`/profile/${(QA=JSON.parse(Fs(Ur.USER)))==null?void 0:QA.slug}`,element:H(yn,{children:[T("i",{className:"fa-solid fa-user-astronaut  text-[20px] pt-[10px]"}),T("span",{className:"block text-[10px] capitalize mt-[2px]  font-medium",children:"T\xE0i kho\u1EA3n"})]})}];function IJ(){return T("nav",{className:"fixed inset-x-0 bottom-0 h-[60px] bg-white border-t border-[#ddd] z-[1000] block lg:hidden",children:T("div",{className:"max-w-[400px]  min-h-[60px] mx-auto grid grid-cols-5",children:PJ.map((e,t)=>T(zt.Fragment,{children:T(r1,{to:e.pathname,href:"#",className:"h-full block text-center ",style:({isActive:r})=>({color:r&&"#e03"}),children:e.element})},t))})})}function DJ(){const e=ne.exports.useRef(null),t=screen.height/2;return ne.exports.useEffect(()=>{const s=()=>{window.scrollY>t&&typeof document!="undefined"&&e&&e.current?(e.current.style.opacity=iw(window.innerWidth)<3?.6:1,e.current.style.visibility="visible"):window.scrollY<t&&typeof document!="undefined"&&e&&e.current&&(e.current.style.opacity=0,e.current.style.visibility="hidden")};return e&&e.current&&window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]),T("div",{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},ref:e,className:` 
      animate-bounce lg:opacity-0 invisible z-50  fixed  z-1  cursor-pointer bg-primary  flex items-center justify-center text-white hover:bg-[#be0129] transition-all duration-300
      rounded-[6px]
      right-[20px] bottom-[120px]
      opacity-60
      w-[30px] h-[30px]
      lg:right-[40px] lg:bottom-[50px]
      lg:w-[40px] lg:h-[40px]
      lg:rounded-full
      `,children:T("svg",{className:"text-2xl",viewBox:"64 64 896 896",focusable:"false","data-icon":"vertical-align-top",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:T("path",{d:"M859.9 168H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zM518.3 355a8 8 0 00-12.6 0l-112 141.7a7.98 7.98 0 006.3 12.9h73.9V848c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V509.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 355z"})})})}function qs({children:e}){return H(yn,{children:[T(MJ,{}),T("div",{className:"min-h-screen",children:e}),T(IJ,{}),T(DJ,{}),T(kJ,{})]})}var QI={exports:{}};(function(e,t){(function(r,s){e.exports=s(ne.exports)})(sa,r=>(()=>{var s={703:(l,_,S)=>{var C=S(414);function k(){}function D(){}D.resetWarningCache=k,l.exports=function(){function U(K,R,F,V,J,re){if(re!==C){var fe=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw fe.name="Invariant Violation",fe}}function q(){return U}U.isRequired=U;var L={array:U,bigint:U,bool:U,func:U,number:U,object:U,string:U,symbol:U,any:U,arrayOf:q,element:U,elementType:U,instanceOf:q,node:U,objectOf:q,oneOf:q,oneOfType:q,shape:q,exact:q,checkPropTypes:D,resetWarningCache:k};return L.PropTypes=L,L}},697:(l,_,S)=>{l.exports=S(703)()},414:l=>{l.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},98:l=>{l.exports=r}},u={};function d(l){var _=u[l];if(_!==void 0)return _.exports;var S=u[l]={exports:{}};return s[l](S,S.exports,d),S.exports}d.n=l=>{var _=l&&l.__esModule?()=>l.default:()=>l;return d.d(_,{a:_}),_},d.d=(l,_)=>{for(var S in _)d.o(_,S)&&!d.o(l,S)&&Object.defineProperty(l,S,{enumerable:!0,get:_[S]})},d.o=(l,_)=>Object.prototype.hasOwnProperty.call(l,_),d.r=l=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})};var x={};return(()=>{d.r(x),d.d(x,{default:()=>Le});var l=d(98),_=d.n(l),S=d(697),C=d.n(S);function k(){return k=Object.assign?Object.assign.bind():function(Ie){for(var Ke=1;Ke<arguments.length;Ke++){var bt=arguments[Ke];for(var ot in bt)Object.prototype.hasOwnProperty.call(bt,ot)&&(Ie[ot]=bt[ot])}return Ie},k.apply(this,arguments)}var D=function(Ie){var Ke=Ie.pageClassName,bt=Ie.pageLinkClassName,ot=Ie.page,Ot=Ie.selected,Dt=Ie.activeClassName,Ze=Ie.activeLinkClassName,Ye=Ie.getEventListener,De=Ie.pageSelectedHandler,_t=Ie.href,mt=Ie.extraAriaContext,Et=Ie.pageLabelBuilder,jt=Ie.rel,en=Ie.ariaLabel||"Page "+ot+(mt?" "+mt:""),nn=null;return Ot&&(nn="page",en=Ie.ariaLabel||"Page "+ot+" is your current page",Ke=Ke!==void 0?Ke+" "+Dt:Dt,bt!==void 0?Ze!==void 0&&(bt=bt+" "+Ze):bt=Ze),_().createElement("li",{className:Ke},_().createElement("a",k({rel:jt,role:_t?void 0:"button",className:bt,href:_t,tabIndex:Ot?"-1":"0","aria-label":en,"aria-current":nn,onKeyPress:De},Ye(De)),Et(ot)))};D.propTypes={pageSelectedHandler:C().func.isRequired,selected:C().bool.isRequired,pageClassName:C().string,pageLinkClassName:C().string,activeClassName:C().string,activeLinkClassName:C().string,extraAriaContext:C().string,href:C().string,ariaLabel:C().string,page:C().number.isRequired,getEventListener:C().func.isRequired,pageLabelBuilder:C().func.isRequired,rel:C().string};const U=D;function q(){return q=Object.assign?Object.assign.bind():function(Ie){for(var Ke=1;Ke<arguments.length;Ke++){var bt=arguments[Ke];for(var ot in bt)Object.prototype.hasOwnProperty.call(bt,ot)&&(Ie[ot]=bt[ot])}return Ie},q.apply(this,arguments)}var L=function(Ie){var Ke=Ie.breakLabel,bt=Ie.breakAriaLabel,ot=Ie.breakClassName,Ot=Ie.breakLinkClassName,Dt=Ie.breakHandler,Ze=Ie.getEventListener,Ye=ot||"break";return _().createElement("li",{className:Ye},_().createElement("a",q({className:Ot,role:"button",tabIndex:"0","aria-label":bt,onKeyPress:Dt},Ze(Dt)),Ke))};L.propTypes={breakLabel:C().oneOfType([C().string,C().node]),breakAriaLabel:C().string,breakClassName:C().string,breakLinkClassName:C().string,breakHandler:C().func.isRequired,getEventListener:C().func.isRequired};const K=L;function R(Ie){var Ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return Ie!=null?Ie:Ke}function F(Ie){return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ke){return typeof Ke}:function(Ke){return Ke&&typeof Symbol=="function"&&Ke.constructor===Symbol&&Ke!==Symbol.prototype?"symbol":typeof Ke},F(Ie)}function V(){return V=Object.assign?Object.assign.bind():function(Ie){for(var Ke=1;Ke<arguments.length;Ke++){var bt=arguments[Ke];for(var ot in bt)Object.prototype.hasOwnProperty.call(bt,ot)&&(Ie[ot]=bt[ot])}return Ie},V.apply(this,arguments)}function J(Ie,Ke){for(var bt=0;bt<Ke.length;bt++){var ot=Ke[bt];ot.enumerable=ot.enumerable||!1,ot.configurable=!0,"value"in ot&&(ot.writable=!0),Object.defineProperty(Ie,ot.key,ot)}}function re(Ie,Ke){return re=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(bt,ot){return bt.__proto__=ot,bt},re(Ie,Ke)}function fe(Ie,Ke){if(Ke&&(F(Ke)==="object"||typeof Ke=="function"))return Ke;if(Ke!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return be(Ie)}function be(Ie){if(Ie===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ie}function ce(Ie){return ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Ke){return Ke.__proto__||Object.getPrototypeOf(Ke)},ce(Ie)}function ve(Ie,Ke,bt){return Ke in Ie?Object.defineProperty(Ie,Ke,{value:bt,enumerable:!0,configurable:!0,writable:!0}):Ie[Ke]=bt,Ie}var Fe=function(Ie){(function(Ye,De){if(typeof De!="function"&&De!==null)throw new TypeError("Super expression must either be null or a function");Ye.prototype=Object.create(De&&De.prototype,{constructor:{value:Ye,writable:!0,configurable:!0}}),Object.defineProperty(Ye,"prototype",{writable:!1}),De&&re(Ye,De)})(Ze,Ie);var Ke,bt,ot,Ot,Dt=(ot=Ze,Ot=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ye,De=ce(ot);if(Ot){var _t=ce(this).constructor;Ye=Reflect.construct(De,arguments,_t)}else Ye=De.apply(this,arguments);return fe(this,Ye)});function Ze(Ye){var De,_t;return function(mt,Et){if(!(mt instanceof Et))throw new TypeError("Cannot call a class as a function")}(this,Ze),ve(be(De=Dt.call(this,Ye)),"handlePreviousPage",function(mt){var Et=De.state.selected;De.handleClick(mt,null,Et>0?Et-1:void 0,{isPrevious:!0})}),ve(be(De),"handleNextPage",function(mt){var Et=De.state.selected,jt=De.props.pageCount;De.handleClick(mt,null,Et<jt-1?Et+1:void 0,{isNext:!0})}),ve(be(De),"handlePageSelected",function(mt,Et){if(De.state.selected===mt)return De.callActiveCallback(mt),void De.handleClick(Et,null,void 0,{isActive:!0});De.handleClick(Et,null,mt)}),ve(be(De),"handlePageChange",function(mt){De.state.selected!==mt&&(De.setState({selected:mt}),De.callCallback(mt))}),ve(be(De),"getEventListener",function(mt){return ve({},De.props.eventListener,mt)}),ve(be(De),"handleClick",function(mt,Et,jt){var en=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},nn=en.isPrevious,vn=nn!==void 0&&nn,Bt=en.isNext,xn=Bt!==void 0&&Bt,Xn=en.isBreak,Rt=Xn!==void 0&&Xn,Qn=en.isActive,zn=Qn!==void 0&&Qn;mt.preventDefault?mt.preventDefault():mt.returnValue=!1;var Fr=De.state.selected,tn=De.props.onClick,Wn=jt;if(tn){var wr=tn({index:Et,selected:Fr,nextSelectedPage:jt,event:mt,isPrevious:vn,isNext:xn,isBreak:Rt,isActive:zn});if(wr===!1)return;Number.isInteger(wr)&&(Wn=wr)}Wn!==void 0&&De.handlePageChange(Wn)}),ve(be(De),"handleBreakClick",function(mt,Et){var jt=De.state.selected;De.handleClick(Et,mt,jt<mt?De.getForwardJump():De.getBackwardJump(),{isBreak:!0})}),ve(be(De),"callCallback",function(mt){De.props.onPageChange!==void 0&&typeof De.props.onPageChange=="function"&&De.props.onPageChange({selected:mt})}),ve(be(De),"callActiveCallback",function(mt){De.props.onPageActive!==void 0&&typeof De.props.onPageActive=="function"&&De.props.onPageActive({selected:mt})}),ve(be(De),"getElementPageRel",function(mt){var Et=De.state.selected,jt=De.props,en=jt.nextPageRel,nn=jt.prevPageRel,vn=jt.selectedPageRel;return Et-1===mt?nn:Et===mt?vn:Et+1===mt?en:void 0}),ve(be(De),"pagination",function(){var mt=[],Et=De.props,jt=Et.pageRangeDisplayed,en=Et.pageCount,nn=Et.marginPagesDisplayed,vn=Et.breakLabel,Bt=Et.breakClassName,xn=Et.breakLinkClassName,Xn=Et.breakAriaLabels,Rt=De.state.selected;if(en<=jt)for(var Qn=0;Qn<en;Qn++)mt.push(De.getPageElement(Qn));else{var zn=jt/2,Fr=jt-zn;Rt>en-jt/2?zn=jt-(Fr=en-Rt):Rt<jt/2&&(Fr=jt-(zn=Rt));var tn,Wn,wr=function(gt){return De.getPageElement(gt)},Se=[];for(tn=0;tn<en;tn++){var Ge=tn+1;if(Ge<=nn)Se.push({type:"page",index:tn,display:wr(tn)});else if(Ge>en-nn)Se.push({type:"page",index:tn,display:wr(tn)});else if(tn>=Rt-zn&&tn<=Rt+(Rt===0&&jt>1?Fr-1:Fr))Se.push({type:"page",index:tn,display:wr(tn)});else if(vn&&Se.length>0&&Se[Se.length-1].display!==Wn&&(jt>0||nn>0)){var Xe=tn<Rt?Xn.backward:Xn.forward;Wn=_().createElement(K,{key:tn,breakAriaLabel:Xe,breakLabel:vn,breakClassName:Bt,breakLinkClassName:xn,breakHandler:De.handleBreakClick.bind(null,tn),getEventListener:De.getEventListener}),Se.push({type:"break",index:tn,display:Wn})}}Se.forEach(function(gt,Tt){var vt=gt;gt.type==="break"&&Se[Tt-1]&&Se[Tt-1].type==="page"&&Se[Tt+1]&&Se[Tt+1].type==="page"&&Se[Tt+1].index-Se[Tt-1].index<=2&&(vt={type:"page",index:gt.index,display:wr(gt.index)}),mt.push(vt.display)})}return mt}),Ye.initialPage!==void 0&&Ye.forcePage!==void 0&&console.warn("(react-paginate): Both initialPage (".concat(Ye.initialPage,") and forcePage (").concat(Ye.forcePage,") props are provided, which is discouraged.")+` Use exclusively forcePage prop for a controlled component.
See https://reactjs.org/docs/forms.html#controlled-components`),_t=Ye.initialPage?Ye.initialPage:Ye.forcePage?Ye.forcePage:0,De.state={selected:_t},De}return Ke=Ze,(bt=[{key:"componentDidMount",value:function(){var Ye=this.props,De=Ye.initialPage,_t=Ye.disableInitialCallback,mt=Ye.extraAriaContext,Et=Ye.pageCount,jt=Ye.forcePage;De===void 0||_t||this.callCallback(De),mt&&console.warn("DEPRECATED (react-paginate): The extraAriaContext prop is deprecated. You should now use the ariaLabelBuilder instead."),Number.isInteger(Et)||console.warn("(react-paginate): The pageCount prop value provided is not an integer (".concat(Et,"). Did you forget a Math.ceil()?")),De!==void 0&&De>Et-1&&console.warn("(react-paginate): The initialPage prop provided is greater than the maximum page index from pageCount prop (".concat(De," > ").concat(Et-1,").")),jt!==void 0&&jt>Et-1&&console.warn("(react-paginate): The forcePage prop provided is greater than the maximum page index from pageCount prop (".concat(jt," > ").concat(Et-1,")."))}},{key:"componentDidUpdate",value:function(Ye){this.props.forcePage!==void 0&&this.props.forcePage!==Ye.forcePage&&(this.props.forcePage>this.props.pageCount-1&&console.warn("(react-paginate): The forcePage prop provided is greater than the maximum page index from pageCount prop (".concat(this.props.forcePage," > ").concat(this.props.pageCount-1,").")),this.setState({selected:this.props.forcePage})),Number.isInteger(Ye.pageCount)&&!Number.isInteger(this.props.pageCount)&&console.warn("(react-paginate): The pageCount prop value provided is not an integer (".concat(this.props.pageCount,"). Did you forget a Math.ceil()?"))}},{key:"getForwardJump",value:function(){var Ye=this.state.selected,De=this.props,_t=De.pageCount,mt=Ye+De.pageRangeDisplayed;return mt>=_t?_t-1:mt}},{key:"getBackwardJump",value:function(){var Ye=this.state.selected-this.props.pageRangeDisplayed;return Ye<0?0:Ye}},{key:"getElementHref",value:function(Ye){var De=this.props,_t=De.hrefBuilder,mt=De.pageCount,Et=De.hrefAllControls;if(_t)return Et||Ye>=0&&Ye<mt?_t(Ye+1,mt,this.state.selected):void 0}},{key:"ariaLabelBuilder",value:function(Ye){var De=Ye===this.state.selected;if(this.props.ariaLabelBuilder&&Ye>=0&&Ye<this.props.pageCount){var _t=this.props.ariaLabelBuilder(Ye+1,De);return this.props.extraAriaContext&&!De&&(_t=_t+" "+this.props.extraAriaContext),_t}}},{key:"getPageElement",value:function(Ye){var De=this.state.selected,_t=this.props,mt=_t.pageClassName,Et=_t.pageLinkClassName,jt=_t.activeClassName,en=_t.activeLinkClassName,nn=_t.extraAriaContext,vn=_t.pageLabelBuilder;return _().createElement(U,{key:Ye,pageSelectedHandler:this.handlePageSelected.bind(null,Ye),selected:De===Ye,rel:this.getElementPageRel(Ye),pageClassName:mt,pageLinkClassName:Et,activeClassName:jt,activeLinkClassName:en,extraAriaContext:nn,href:this.getElementHref(Ye),ariaLabel:this.ariaLabelBuilder(Ye),page:Ye+1,pageLabelBuilder:vn,getEventListener:this.getEventListener})}},{key:"render",value:function(){var Ye=this.props.renderOnZeroPageCount;if(this.props.pageCount===0&&Ye!==void 0)return Ye&&Ye(this.props);var De=this.props,_t=De.disabledClassName,mt=De.disabledLinkClassName,Et=De.pageCount,jt=De.className,en=De.containerClassName,nn=De.previousLabel,vn=De.previousClassName,Bt=De.previousLinkClassName,xn=De.previousAriaLabel,Xn=De.prevRel,Rt=De.nextLabel,Qn=De.nextClassName,zn=De.nextLinkClassName,Fr=De.nextAriaLabel,tn=De.nextRel,Wn=this.state.selected,wr=Wn===0,Se=Wn===Et-1,Ge="".concat(R(vn)).concat(wr?" ".concat(R(_t)):""),Xe="".concat(R(Qn)).concat(Se?" ".concat(R(_t)):""),gt="".concat(R(Bt)).concat(wr?" ".concat(R(mt)):""),Tt="".concat(R(zn)).concat(Se?" ".concat(R(mt)):""),vt=wr?"true":"false",Gt=Se?"true":"false";return _().createElement("ul",{className:jt||en,role:"navigation","aria-label":"Pagination"},_().createElement("li",{className:Ge},_().createElement("a",V({className:gt,href:this.getElementHref(Wn-1),tabIndex:wr?"-1":"0",role:"button",onKeyPress:this.handlePreviousPage,"aria-disabled":vt,"aria-label":xn,rel:Xn},this.getEventListener(this.handlePreviousPage)),nn)),this.pagination(),_().createElement("li",{className:Xe},_().createElement("a",V({className:Tt,href:this.getElementHref(Wn+1),tabIndex:Se?"-1":"0",role:"button",onKeyPress:this.handleNextPage,"aria-disabled":Gt,"aria-label":Fr,rel:tn},this.getEventListener(this.handleNextPage)),Rt)))}}])&&J(Ke.prototype,bt),Object.defineProperty(Ke,"prototype",{writable:!1}),Ze}(l.Component);ve(Fe,"propTypes",{pageCount:C().number.isRequired,pageRangeDisplayed:C().number,marginPagesDisplayed:C().number,previousLabel:C().node,previousAriaLabel:C().string,prevPageRel:C().string,prevRel:C().string,nextLabel:C().node,nextAriaLabel:C().string,nextPageRel:C().string,nextRel:C().string,breakLabel:C().oneOfType([C().string,C().node]),breakAriaLabels:C().shape({forward:C().string,backward:C().string}),hrefBuilder:C().func,hrefAllControls:C().bool,onPageChange:C().func,onPageActive:C().func,onClick:C().func,initialPage:C().number,forcePage:C().number,disableInitialCallback:C().bool,containerClassName:C().string,className:C().string,pageClassName:C().string,pageLinkClassName:C().string,pageLabelBuilder:C().func,activeClassName:C().string,activeLinkClassName:C().string,previousClassName:C().string,nextClassName:C().string,previousLinkClassName:C().string,nextLinkClassName:C().string,disabledClassName:C().string,disabledLinkClassName:C().string,breakClassName:C().string,breakLinkClassName:C().string,extraAriaContext:C().string,ariaLabelBuilder:C().func,eventListener:C().string,renderOnZeroPageCount:C().func,selectedPageRel:C().string}),ve(Fe,"defaultProps",{pageRangeDisplayed:2,marginPagesDisplayed:3,activeClassName:"selected",previousLabel:"Previous",previousClassName:"previous",previousAriaLabel:"Previous page",prevPageRel:"prev",prevRel:"prev",nextLabel:"Next",nextClassName:"next",nextAriaLabel:"Next page",nextPageRel:"next",nextRel:"next",breakLabel:"...",breakAriaLabels:{forward:"Jump forward",backward:"Jump backward"},disabledClassName:"disabled",disableInitialCallback:!1,pageLabelBuilder:function(Ie){return Ie},eventListener:"onClick",renderOnZeroPageCount:void 0,selectedPageRel:"canonical",hrefAllControls:!1});const Le=Fe})(),x})())})(QI);var zJ=Ww(QI.exports);Fd.propTypes={itemsPerPage:_e.number,total_pages:_e.number,onChange:_e.func,page:_e.number};function Fd({itemsPerPage:e,data:t,onChange:r,count:s,page:u=1}){const[d,x]=ne.exports.useState(0);ne.exports.useEffect(()=>{x(()=>Math.ceil(s/e))},[t]);const l=_=>{!r||r(1+_.selected)};return T(zJ,{forcePage:u-1,className:"pagination",breakLabel:"...",nextLabel:">",onPageChange:l,pageRangeDisplayed:5,pageCount:d,previousLabel:"<",renderOnZeroPageCount:null,activeClassName:"active"})}ha.propTypes={control:_e.object,name:_e.string,label:_e.string,id:_e.string,options:_e.array,defaultValue:_e.number};function ha({control:e,options:t=[],defaultValue:r=0,...s}){const{field:u}=Ad({defaultValue:"",name:s.name,control:e});return H("select",{...u,...s,className:`custom-select ${s==null?void 0:s.className}`,children:[!r&&T("option",{value:0,children:"None"}),t.map((d,x)=>x===0?T("option",{value:d.value,defaultValue:d.value===r?d.value:"0",children:d.label},d.id):T("option",{value:d.value,defaultValue:d.value===r?d.value:"0",children:d.label},d.id))]})}function Mf(e){return Wt({tag:"svg",attr:{viewBox:"0 0 1024 1024",fill:"currentColor",fillRule:"evenodd"},child:[{tag:"path",attr:{d:"M799.855 166.312c.023.007.043.018.084.059l57.69 57.69c.041.041.052.06.059.084a.118.118 0 0 1 0 .069c-.007.023-.018.042-.059.083L569.926 512l287.703 287.703c.041.04.052.06.059.083a.118.118 0 0 1 0 .07c-.007.022-.018.042-.059.083l-57.69 57.69c-.041.041-.06.052-.084.059a.118.118 0 0 1-.069 0c-.023-.007-.042-.018-.083-.059L512 569.926 224.297 857.629c-.04.041-.06.052-.083.059a.118.118 0 0 1-.07 0c-.022-.007-.042-.018-.083-.059l-57.69-57.69c-.041-.041-.052-.06-.059-.084a.118.118 0 0 1 0-.069c.007-.023.018-.042.059-.083L454.073 512 166.371 224.297c-.041-.04-.052-.06-.059-.083a.118.118 0 0 1 0-.07c.007-.022.018-.042.059-.083l57.69-57.69c.041-.041.06-.052.084-.059a.118.118 0 0 1 .069 0c.023.007.042.018.083.059L512 454.073l287.703-287.702c.04-.041.06-.052.083-.059a.118.118 0 0 1 .07 0Z"}}]})(e)}e6.propTypes={};const Mh=["slugPurpose","slugArea","slugConvenience","slugKind","timeStatus"];function e6(e){var d,x,l,_,S,C,k,D,U,q,L;const[t,r]=ne.exports.useContext(ZE),s=Mh.map(K=>{if(t&&t[K])return{[K]:t[K]}}),u=K=>{switch(K){case"slugPurpose":{r(R=>({...R,slugPurpose:null}));break}case"slugArea":{r(R=>({...R,slugArea:null}));break}case"slugConvenience":{r(R=>({...R,slugConvenience:null}));break}case"slugKind":{r(R=>({...R,slugKind:null}));break}case"timeStatus":{r(R=>({...R,timeStatus:null,page:1}));break}}};return H("div",{className:"mb-3  grid-cols-3 gap-3 hidden lg:grid",children:[((d=s[0])==null?void 0:d.slugPurpose)&&H("div",{className:"text-primary relative flex items-center justify-center bg-white border text-center font-bold border-primary rounded-full py-1 px-2 text-base",children:[T("span",{className:"grow",children:(x=s[0])==null?void 0:x.slugPurpose}),T(Mf,{onClick:()=>u(Mh[0]),className:"ml-2 text-[rgba(0,0,0,.25)] text-xl cursor-pointer"})]}),((l=s[1])==null?void 0:l.slugArea)&&H("div",{className:"text-primary relative flex items-center justify-center bg-white border text-center font-bold border-primary rounded-full py-1 px-2 text-base",children:[T("span",{className:"grow",children:(_=s[1])==null?void 0:_.slugArea}),T(Mf,{onClick:()=>u(Mh[1]),className:"ml-2 text-[rgba(0,0,0,.25)] text-xl cursor-pointer"})]},(S=s[1])==null?void 0:S.slugArea),((C=s[2])==null?void 0:C.slugConvenience)&&H("div",{className:"text-primary relative flex items-center justify-center bg-white border text-center font-bold border-primary rounded-full py-1 px-2 text-base",children:[T("span",{className:"grow",children:(k=s[2])==null?void 0:k.slugConvenience}),T(Mf,{onClick:()=>u(Mh[2]),className:"ml-2 text-[rgba(0,0,0,.25)] text-xl cursor-pointer"})]}),((D=s[3])==null?void 0:D.slugKind)&&H("div",{className:"text-primary relative flex items-center justify-center bg-white border text-center font-bold border-primary rounded-full py-1 px-2 text-base",children:[T("span",{className:"grow",children:(U=s[3])==null?void 0:U.slugKind}),T(Mf,{onClick:()=>u(Mh[3]),className:"ml-2 text-[rgba(0,0,0,.25)] text-xl cursor-pointer"})]}),((q=s[4])==null?void 0:q.timeStatus)&&H("div",{className:"text-primary relative flex items-center justify-center bg-white border text-center font-bold border-primary rounded-full py-1 px-2 text-base",children:[T("span",{className:"grow",children:((L=s[4])==null?void 0:L.timeStatus)==="close"?"\u0110\xF3ng c\u1EEDa":"M\u1EDF c\u1EEDa"}),T(Mf,{onClick:()=>u(Mh[4]),className:"ml-2 text-[rgba(0,0,0,.25)] text-xl cursor-pointer"})]})]})}const Gs={getAll(e){const t="/reviews";return wn.get(t,{params:e})},getCountReviewByProduct(e){const t="/reviews";return wn.get(t,{params:e})},createReview(e){const t="/reviews";return wn.post(t,e,{headers:{"Content-Type":"multipart/form-data"}})},deleteReview(e){const t=`/reviews/id/${e}`;return wn.delete(t)}},yd={getAll(e){const t="/productSaved";return wn.get(t,{params:e})},toggleBlogSaved(e){const t="/productSaved/toggle";return wn.post(t,e)},checkBlogIsSavedByUserId(e){const t=`/productSaved/userId/${e.userId}/productId/${e.productId}`;return wn.get(t)}};VE.propTypes={data:_e.object};function VE({data:e={}}){var U,q,L,K,R,F,V,J;const[t,r]=ne.exports.useState(0),[s,u]=ne.exports.useState(!1),d=(e==null?void 0:e.avgRating)||0,x=(e==null?void 0:e.schedules)&&(e==null?void 0:e.schedules.length)>0&&((U=e==null?void 0:e.schedules[0])==null?void 0:U.startTime),l=(e==null?void 0:e.schedules)&&(e==null?void 0:e.schedules.length)>0&&((q=e==null?void 0:e.schedules[0])==null?void 0:q.endTime),_=jr(re=>re.auth.current),[S,C]=ne.exports.useState({userId:_==null?void 0:_.id,productId:e==null?void 0:e.id});ne.exports.useEffect(()=>{(async()=>{const re=await Gs.getCountReviewByProduct({status:1,productId:e==null?void 0:e.id,page:0});r((re==null?void 0:re.length)||0)})()},[e]),ne.exports.useEffect(()=>{(async()=>{if(_!=null&&_.id){const re=await yd.checkBlogIsSavedByUserId({...S,userId:_==null?void 0:_.id,productId:e==null?void 0:e.id});u(re)}})()},[e,S]);const k=Ei(),D=async()=>{try{if(!(_!=null&&_.id)){k(zo());return}await yd.toggleBlogSaved({productId:e==null?void 0:e.id,userId:_==null?void 0:_.id}),C(re=>({...S})),Yt(s?`\u0110\xE3 h\u1EE7y l\u01B0u th\xE0nh c\xF4ng cafe ${e==null?void 0:e.name}`:`\u0110\xE3 l\u01B0u th\xE0nh c\xF4ng cafe ${e==null?void 0:e.name}`)}catch{Yt(s?`C\xF3 l\u1ED7i h\u1EE7y l\u01B0u cafe ${e==null?void 0:e.name}`:`C\xF3 l\u1ED7i l\u01B0u cafe ${e==null?void 0:e.name}`)}};return H("div",{className:"relative hover-scale lg:mb-5 mb-[6px] flex bg-white rounded-[10px] shadow-xl hover:shadow-2xl cursor-pointer transition-all duration-300",children:[T(Jt,{to:`/place/${e==null?void 0:e.slug}`,className:"lg:py-2 lg:pl-2 py-[6px] pl-[6px] block ",children:T("div",{className:" lg:w-[270px] lg:h-[210px]  w-[120px] h-[110px]  overflow-hidden ",children:T("img",{src:(e==null?void 0:e.listImage)&&((L=e==null?void 0:e.listImage)==null?void 0:L.length)>0?(K=e==null?void 0:e.listImage[0])==null?void 0:K.url:"",alt:e==null?void 0:e.name,className:"w-full h-full object-cover rounded-[6px] "})})}),H("div",{className:"lg:p-6 lg:pt-[6px] px-[10px] pt-[2px] pb-[6px] w-full",children:[T("h4",{className:"",children:T(Jt,{to:`/place/${e==null?void 0:e.slug}`,className:"block lg:pt-[6px] lg:pb-1 font-bold lg:text-[20px] p-0 text-base hover:underline",children:e==null?void 0:e.name})}),H("div",{className:"pt-[2px] flex items-center text-[14px]",children:[(e==null?void 0:e.ratingsQuantity)>0&&T("span",{className:"mr-[6px\u01B0",children:e==null?void 0:e.ratingsQuantity}),Array.from(new Array(5)).map((re,fe)=>d>=fe+1?T(DE,{className:"lg:text-[20px] text-[18px] text-primary"},fe):d>=fe+.5?T(PE,{className:"lg:text-[20px] text-[18px] text-primary"},fe):T(IE,{className:"lg:text-[20px] text-[18px]"},fe)),t>0?`- ${t} \u0111\xE1nh gi\xE1`:"- Ch\u01B0a c\xF3 \u0111\xE1nh gi\xE1"]}),H("div",{className:"pt-[6px] text-base hidden lg:block",children:[T("i",{className:"fa-solid fa-dollar-sign w-[18px]"}),e==null?void 0:e.priceMin," - ",e==null?void 0:e.priceMax]}),H("div",{className:"lg:pt-[6px] lg:text-base text-sm",children:[T("i",{className:"fa-solid fa-location-dot w-[18px]"}),e==null?void 0:e.location]}),H("div",{className:"lg:pt-[6px] lg:text-base text-sm flex items-center gap-3",children:[T("i",{className:"fa-solid fa-clock w-[18px] pr-[18px] lg:block hidden pt-1"}),T("span",{className:`${q1(x,l)?"text-[#00b707]":"text-primary"} font-semibold ml-[2px] mr-2`,children:q1(x,l)?"\u0110ang m\u1EDF c\u1EEDa":"\u0110ang \u0111\xF3ng c\u1EEDa"}),((R=e==null?void 0:e.schedules)==null?void 0:R.length)>0&&pd((F=e==null?void 0:e.schedules[0])==null?void 0:F.startTime)," "," - ",((V=e==null?void 0:e.schedules)==null?void 0:V.length)>0&&pd((J=e==null?void 0:e.schedules[0])==null?void 0:J.endTime)]})]}),H("div",{onClick:D,className:"group absolute top-[8px] right-[10px] bg-white hover:text-primary transition-all duration-300 shadow-2xl",children:[T("div",{className:"w-[36px] h-[36px] rounded-full shadow-xl flex items-center justify-center hover:opacity-80 ",children:T("i",{className:`fa-solid fa-bookmark transition-all  ${s?"text-primary":"text-secondary"}`})}),T("div",{className:"lg:block hidden  invisible opacity-0 group-hover:visible group-hover:opacity-100 transition-all duration-300 bg-black text-white absolute text-center w-[120px] py-1 rounded-full bottom-[-35px] right-[-40px] text-sm before:absolute before:top-[-5px]  before:right-[52px] before:border-b-[5px] before:border-b-black before:border-r-transparent before:border-r-[5px] before:border-l-transparent before:border-l-[5px] ",children:s?"\u0110\xE3 l\u01B0u":"L\u01B0u \u0111\u1ECBa \u0111i\u1EC3m n\xE0y"})]})]})}t6.propTypes={keyParams:_e.string};function t6({keyParams:e=""}){return T("div",{className:"flex items-center justify-center mt-4",children:H("div",{className:"flex items-center justify-center flex-col",children:[T("img",{src:"/img/empty_menu.svg",alt:"empty-item",className:"w-[180px]"}),H("p",{className:"md:text-[16px] text-[10px] mt-4",children:["R\u1EA5t ti\u1EBFc, ch\xFAng t\xF4i kh\xF4ng t\xECm th\u1EA5y k\u1EBFt qu\u1EA3 v\u1EDBi t\u1EEB kh\xF3a ",e]}),H("p",{className:"md:text-[16px] text-[10px] mt-1",children:["Li\u1EC7u Toidicafe.vn c\xF3 \u0111ang b\u1ECF l\u1EE1 qu\xE1n cafe n\xE0o kh\xF4ng?",T(Jt,{to:"/add-place",className:"text-primary ml-1 font-semibold hover:underline cursor-pointer ",children:"H\xE3y cho ch\xFAng t\xF4i bi\u1EBFt"})]})]})})}n6.propTypes={};function n6(e){return T("div",{className:"relative hover-scale lg:mb-5 mb-[6px]  bg-white rounded-[10px] shadow-xl hover:shadow-2xl cursor-pointer transition-all duration-300",children:H("div",{className:"animate-pulse flex space-x-4 p-2",children:[T("div",{className:" bg-slate-200 lg:w-[270px] lg:h-[210px]  w-[120px] h-[110px] rounded-md "}),T("div",{className:" flex-1",children:H("div",{className:"mt-2 flex flex-col lg:gap-6 gap-3",children:[T("div",{className:"lg:h-4 h-2 bg-slate-200 rounded"}),T("div",{className:"lg:h-4 h-2 bg-slate-200 rounded"}),T("div",{className:"lg:h-4 h-2 bg-slate-200 rounded"}),T("div",{className:"lg:h-4 h-2 bg-slate-200 rounded"}),T("div",{className:"lg:h-4 h-2 bg-slate-200 rounded"})]})})]})})}r6.propTypes={data:_e.array,onChange:_e.func,count:_e.number,isLoading:_e.bool};const NJ=5,LJ=[{id:1,label:"\u0110\xE1nh gi\xE1 cao nh\u1EA5t",value:"desc"},{id:2,label:"\u0110\xE1nh gi\xE1 th\u1EA5p nh\u1EA5t",value:"asc"}];function r6({data:e=[],onChange:t=null,count:r=1,isLoading:s=!1}){var U,q;const{handleSubmit:u,control:d}=us({}),x=yr(),l=Ji(),[_,S]=ne.exports.useContext(ZE),C=L=>{if(!t)return null;t(L)},k=L=>{if(!t)return null;S(K=>({...K,page:L}))},D=()=>{if(!t)return null;t({name:"",slugArea:null,slugPurpose:null,slugKind:null,slugConvenience:null,timeStatus:null}),x("/search")};return H("div",{className:"",children:[H("div",{className:"lg:mb-[22px] mb-[6px] flex items-center justify-between lg:px-0 px-[6px]",children:[H("span",{className:"lg:text-[18px] text-base  ",children:[T("strong",{className:"mr-1",children:r}),"\u0111\u1ECBa \u0111i\u1EC3m kh\u1EDBp v\u1EDBi t\xECm ki\u1EBFm c\u1EE7a b\u1EA1n:",((_==null?void 0:_.slugArea)||(_==null?void 0:_.slugPurpose)||(_==null?void 0:_.slugConvenience)||(_==null?void 0:_.slugKind)||(_==null?void 0:_.timeStatus)||((q=(U=aE.parse(l.search))==null?void 0:U.name)==null?void 0:q.length)>0)&&T("span",{onClick:D,className:"mx-2 font-bold text-sm text-black cursor-pointer hover:underline",children:"X\xF3a t\u1EA5t c\u1EA3 b\u1ED9 loc"})]}),H("form",{onChange:u(C),className:"items-center gap-x-1 hidden lg:flex",children:[T("span",{className:"text-base min-w-[107px]",children:"S\u1EAFp x\u1EBFp theo:"}),T(ha,{control:d,options:LJ,name:"rating"})]})]}),T(e6,{}),T("div",{children:s?Array.from({length:5}).map((L,K)=>T(n6,{},K)):e&&e.length>0?e.map(L=>T(VE,{data:L},L.id)):T(t6,{keyParams:_==null?void 0:_.name})}),T("div",{children:T(Fd,{data:e,onChange:L=>k(L),itemsPerPage:NJ,count:r,page:_==null?void 0:_.page})})]})}var Nm={};function u1(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?u1=function(r){return typeof r}:u1=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},u1(e)}Object.defineProperty(Nm,"__esModule",{value:!0});Nm.Collapse=void 0;var Qv=FJ(ne.exports);function FJ(e){return e&&e.__esModule?e:{default:e}}function RJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PA(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function OJ(e,t,r){return t&&PA(e.prototype,t),r&&PA(e,r),e}function BJ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zw(e,t)}function zw(e,t){return zw=Object.setPrototypeOf||function(s,u){return s.__proto__=u,s},zw(e,t)}function $J(e){var t=UJ();return function(){var s=hy(e),u;if(t){var d=hy(this).constructor;u=Reflect.construct(s,arguments,d)}else u=s.apply(this,arguments);return jJ(this,u)}}function jJ(e,t){if(t&&(u1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return La(e)}function La(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UJ(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function hy(e){return hy=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},hy(e)}function Fa(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i6=function(e){BJ(r,e);var t=$J(r);function r(s){var u;return RJ(this,r),u=t.call(this,s),Fa(La(u),"timeout",void 0),Fa(La(u),"container",void 0),Fa(La(u),"content",void 0),Fa(La(u),"onResize",function(){if(clearTimeout(u.timeout),!(!u.container||!u.content)){var d=u.props,x=d.isOpened,l=d.checkTimeout,_=Math.floor(u.container.clientHeight),S=Math.floor(u.content.clientHeight),C=x&&Math.abs(S-_)<=1,k=!x&&Math.abs(_)<=1;C||k?u.onRest({isFullyOpened:C,isFullyClosed:k,isOpened:x,containerHeight:_,contentHeight:S}):(u.onWork({isFullyOpened:C,isFullyClosed:k,isOpened:x,containerHeight:_,contentHeight:S}),u.timeout=setTimeout(function(){return u.onResize()},l))}}),Fa(La(u),"onRest",function(d){var x=d.isFullyOpened,l=d.isFullyClosed,_=d.isOpened,S=d.containerHeight,C=d.contentHeight;if(!(!u.container||!u.content)){var k=_&&u.container.style.height==="".concat(C,"px"),D=!_&&u.container.style.height==="0px";if(k||D){u.container.style.overflow=_?"initial":"hidden",u.container.style.height=_?"auto":"0px";var U=u.props.onRest;U&&U({isFullyOpened:x,isFullyClosed:l,isOpened:_,containerHeight:S,contentHeight:C})}}}),Fa(La(u),"onWork",function(d){var x=d.isFullyOpened,l=d.isFullyClosed,_=d.isOpened,S=d.containerHeight,C=d.contentHeight;if(!(!u.container||!u.content)){var k=_&&u.container.style.height==="".concat(C,"px"),D=!_&&u.container.style.height==="0px";if(!(k||D)){u.container.style.overflow="hidden",u.container.style.height=_?"".concat(C,"px"):"0px";var U=u.props.onWork;U&&U({isFullyOpened:x,isFullyClosed:l,isOpened:_,containerHeight:S,contentHeight:C})}}}),Fa(La(u),"onRefContainer",function(d){u.container=d}),Fa(La(u),"onRefContent",function(d){u.content=d}),s.initialStyle?u.initialStyle=s.initialStyle:u.initialStyle=s.isOpened?{height:"auto",overflow:"initial"}:{height:"0px",overflow:"hidden"},u}return OJ(r,[{key:"componentDidMount",value:function(){this.onResize()}},{key:"shouldComponentUpdate",value:function(u){var d=this.props,x=d.theme,l=d.isOpened,_=d.children;return _!==u.children||l!==u.isOpened||Object.keys(x).some(function(S){return x[S]!==u.theme[S]})}},{key:"getSnapshotBeforeUpdate",value:function(){if(!this.container||!this.content)return null;if(this.container.style.height==="auto"){var u=this.content.clientHeight;this.container.style.height="".concat(u,"px")}return null}},{key:"componentDidUpdate",value:function(){this.onResize()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"render",value:function(){var u=this.props,d=u.theme,x=u.children,l=u.isOpened;return Qv.default.createElement("div",{ref:this.onRefContainer,className:d.collapse,style:this.initialStyle,"aria-hidden":!l},Qv.default.createElement("div",{ref:this.onRefContent,className:d.content},x))}}]),r}(Qv.default.Component);Nm.Collapse=i6;Fa(i6,"defaultProps",{theme:{collapse:"ReactCollapse--collapse",content:"ReactCollapse--content"},initialStyle:void 0,onRest:void 0,onWork:void 0,checkTimeout:50});var vx={};function h1(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?h1=function(r){return typeof r}:h1=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},h1(e)}Object.defineProperty(vx,"__esModule",{value:!0});vx.UnmountClosed=void 0;var IA=HJ(ne.exports),VJ=Nm,GJ=["isOpened"],qJ=["isOpened"];function HJ(e){return e&&e.__esModule?e:{default:e}}function Nw(){return Nw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Nw.apply(this,arguments)}function DA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,s)}return r}function zA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DA(Object(r),!0).forEach(function(s){Hf(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DA(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function NA(e,t){if(e==null)return{};var r=WJ(e,t),s,u;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(u=0;u<d.length;u++)s=d[u],!(t.indexOf(s)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,s)||(r[s]=e[s]))}return r}function WJ(e,t){if(e==null)return{};var r={},s=Object.keys(e),u,d;for(d=0;d<s.length;d++)u=s[d],!(t.indexOf(u)>=0)&&(r[u]=e[u]);return r}function ZJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function LA(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function XJ(e,t,r){return t&&LA(e.prototype,t),r&&LA(e,r),e}function KJ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lw(e,t)}function Lw(e,t){return Lw=Object.setPrototypeOf||function(s,u){return s.__proto__=u,s},Lw(e,t)}function YJ(e){var t=QJ();return function(){var s=dy(e),u;if(t){var d=dy(this).constructor;u=Reflect.construct(s,arguments,d)}else u=s.apply(this,arguments);return JJ(this,u)}}function JJ(e,t){if(t&&(h1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d1(e)}function d1(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QJ(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function dy(e){return dy=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},dy(e)}function Hf(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o6=function(e){KJ(r,e);var t=YJ(r);function r(s){var u;return ZJ(this,r),u=t.call(this,s),Hf(d1(u),"onWork",function(d){var x=d.isOpened,l=NA(d,GJ);u.setState({isResting:!1,isOpened:x});var _=u.props.onWork;_&&_(zA({isOpened:x},l))}),Hf(d1(u),"onRest",function(d){var x=d.isOpened,l=NA(d,qJ);u.setState({isResting:!0,isOpened:x,isInitialRender:!1});var _=u.props.onRest;_&&_(zA({isOpened:x},l))}),Hf(d1(u),"getInitialStyle",function(){var d=u.state,x=d.isOpened,l=d.isInitialRender;return l?x?{height:"auto",overflow:"initial"}:{height:"0px",overflow:"hidden"}:{height:"0px",overflow:"hidden"}}),u.state={isResting:!0,isOpened:s.isOpened,isInitialRender:!0},u}return XJ(r,[{key:"componentDidUpdate",value:function(u){var d=this.props.isOpened;u.isOpened!==d&&this.setState({isResting:!1,isOpened:d,isInitialRender:!1})}},{key:"render",value:function(){var u=this.state,d=u.isResting,x=u.isOpened;return d&&!x?null:IA.default.createElement(VJ.Collapse,Nw({},this.props,{initialStyle:this.getInitialStyle(),onWork:this.onWork,onRest:this.onRest}))}}]),r}(IA.default.PureComponent);vx.UnmountClosed=o6;Hf(o6,"defaultProps",{onWork:void 0,onRest:void 0});var eQ=Nm,tQ=eQ.Collapse,nQ=vx,py=nQ.UnmountClosed,ls=py;py.Collapse=tQ;py.UnmountClosed=py;_e.string,_e.string,_e.string,_e.func;_e.string,_e.string,_e.string,_e.func;Rd.propTypes={name:_e.string,label:_e.string,id:_e.string,onChange:_e.func};function Rd({onChange:e=null,...t}){return H("div",{className:"flex items-center",children:[T("input",{type:"radio",className:"h-5 w-5 cursor-pointer checked:bg-primary accent-primary rounded-full",...t,onChange:s=>{if(!e)return null;const{name:u,value:d}=s.target,x={[u]:d};e(x)}}),T("label",{htmlFor:t.id,className:"text-sm  text-black px-2 block cursor-pointer",children:t.label})]})}Lm.propTypes={title:_e.string.isRequired,data:_e.array.isRequired,name:_e.string,onChange:_e.func,mobile:_e.bool,type:_e.string,filters:_e.object};function Lm({title:e="",data:t=[],name:r="",onChange:s=null,mobile:u=!1,type:d="radio",filters:x={}}){const[l,_]=ne.exports.useState(!0),S=(C,k)=>{if(!s)return null;s(C)};return H(yn,{children:[T(ls.Collapse,{isOpened:!0,children:H("div",{className:"flex items-center cursor-pointer",onClick:()=>{_(C=>!C)},children:[T("h4",{className:"py-3 pl-2 pr-10 text-[rgba(0,0,0,.85)] font-semibold  grow ",children:e}),T("i",{className:"fa-solid fa-angle-down "})]})}),T(ls.UnmountClosed,{isOpened:l,children:T("form",{className:`scroll-bar ${t.length>0&&`${u?"p-[10px] grid grid-cols-2 overflow-y-auto gap-y-3 ":"p-[10px] flex overflow-y-auto flex-col gap-y-[10px] max-h-[242px] "}`}`,children:t.map((C,k)=>T(Rd,{label:C==null?void 0:C.name,name:"slugArea",id:C==null?void 0:C.name,value:C==null?void 0:C.slug,type:d,checked:(C==null?void 0:C.slug)===(x==null?void 0:x.slugArea),onChange:S},k))})})]})}GE.propTypes={title:_e.string.isRequired,data:_e.array.isRequired,name:_e.string,onChange:_e.func,mobile:_e.bool,filters:_e.object,type:_e.string};function GE({title:e="",data:t=[],name:r="",onChange:s=null,mobile:u=!1,filters:d={},type:x="radio"}){const[l,_]=ne.exports.useState(!0),S=(C,k)=>{if(!s)return null;s(C)};return H(yn,{children:[T(ls.Collapse,{isOpened:!0,children:H("div",{className:"flex items-center cursor-pointer",onClick:()=>{_(C=>!C)},children:[T("h4",{className:"py-3 pl-2 pr-10 text-[rgba(0,0,0,.85)] font-semibold  grow ",children:e}),T("i",{className:"fa-solid fa-angle-down "})]})}),T(ls.UnmountClosed,{isOpened:l,children:T("form",{className:`scroll-bar ${t.length>0&&`${u?"p-[10px] grid grid-cols-2 overflow-y-auto gap-y-3 ":"p-[10px] flex overflow-y-auto flex-col gap-y-[10px] max-h-[242px]"}`}`,children:t.map((C,k)=>T(Rd,{label:C==null?void 0:C.name,name:"slugConvenience",id:C==null?void 0:C.name,value:C==null?void 0:C.slug,type:x,checked:(C==null?void 0:C.slug)===(d==null?void 0:d.slugConvenience),onChange:S},k))})})]})}s6.propTypes={control:_e.object,name:_e.string,label:_e.string,id:_e.string};function s6({control:e,...t}){const{field:r}=Ad({defaultValue:0,name:t.name,control:e});return H("div",{className:"pl-2 custom-input ",children:[H("div",{className:"text-[18px] text-center text-primary font-semibold",children:["0 ~"," ",H("span",{children:[new Intl.NumberFormat({maximumSignificantDigits:3}).format(r.value),T("span",{className:"ml-1 ",children:"VN\u0110"})]})]}),T("input",{type:"range",...r,...t,className:"w-full"})]})}a6.propTypes={title:_e.string.isRequired,data:_e.array.isRequired,name:_e.string,onChange:_e.func};function a6({title:e="",data:t=[],name:r="",onChange:s=null}){const[u,d]=ne.exports.useState(!0),{control:x,handleSubmit:l,reset:_}=us({}),[S,C]=ne.exports.useContext(XE);ne.exports.useEffect(()=>{S&&(_(),C(!1))},[S]);const k=(D,U)=>{if(!s)return null;s(D)};return H(yn,{children:[T(ls.Collapse,{isOpened:!0,children:H("div",{className:"flex items-center cursor-pointer",onClick:()=>{d(D=>!D)},children:[T("h4",{className:"py-3 pl-2 pr-10 text-[rgba(0,0,0,.85)] font-semibold  grow ",children:e}),T("i",{className:"fa-solid fa-angle-down "})]})}),T(ls.UnmountClosed,{isOpened:u,children:T("form",{onInput:SE(l(k),300),className:`scroll-bar ${t.length>0&&"p-[10px] flex overflow-y-auto flex-col gap-y-[10px] max-h-[242px] "}`,children:T(s6,{control:x,min:0,max:1e6,name:r,id:"price-range"})})})]})}qE.propTypes={title:_e.string.isRequired,data:_e.array.isRequired,name:_e.string,onChange:_e.func,mobile:_e.bool,filters:_e.object,type:_e.string};function qE({mobile:e=!1,title:t="",data:r=[],name:s="",filters:u={},type:d="radio",onChange:x=null}){const[l,_]=ne.exports.useState(!0),S=(C,k)=>{if(!x)return null;x(C)};return H(yn,{children:[T(ls.Collapse,{isOpened:!0,children:H("div",{className:"flex items-center cursor-pointer",onClick:()=>{_(C=>!C)},children:[T("h4",{className:"py-3 pl-2 pr-10 text-[rgba(0,0,0,.85)] font-semibold  grow ",children:t}),T("i",{className:"fa-solid fa-angle-down "})]})}),T(ls.UnmountClosed,{isOpened:l,children:T("form",{className:`scroll-bar ${r.length>0&&`${e?"p-[10px] grid grid-cols-2 overflow-y-auto gap-y-3 ":"p-[10px] flex overflow-y-auto flex-col gap-y-[10px] max-h-[242px] "}`}`,children:r.map((C,k)=>T(Rd,{label:C==null?void 0:C.name,name:"slugPurpose",id:C==null?void 0:C.name,value:C==null?void 0:C.slug,type:d,checked:(C==null?void 0:C.slug)===(u==null?void 0:u.slugPurpose),onChange:S},k))})})]})}HE.propTypes={title:_e.string.isRequired,data:_e.array.isRequired,name:_e.string,onChange:_e.func,mobile:_e.bool,filters:_e.object,type:_e.string};function HE({mobile:e=!1,title:t="",data:r=[],name:s="",onChange:u=null,filters:d={},type:x="radio"}){const[l,_]=ne.exports.useState(!0),S=(C,k)=>{if(!u)return null;u(C)};return H(yn,{children:[T(ls.Collapse,{isOpened:!0,children:H("div",{className:"flex items-center cursor-pointer",onClick:()=>{_(C=>!C)},children:[T("h4",{className:"py-3 pl-2 pr-10 text-[rgba(0,0,0,.85)] font-semibold  grow ",children:t}),T("i",{className:"fa-solid fa-angle-down "})]})}),T(ls.UnmountClosed,{isOpened:l,children:T("form",{className:`scroll-bar ${r.length>0&&`${e?"p-[10px] grid grid-cols-2 overflow-y-auto gap-3 ":"p-[10px] flex overflow-y-auto flex-col gap-y-[10px] max-h-[242px]  "}`}`,children:r.map((C,k)=>T(Rd,{label:C==null?void 0:C.name,name:"slugKind",id:C==null?void 0:C.name,value:C==null?void 0:C.slug,type:x,checked:(C==null?void 0:C.slug)===(d==null?void 0:d.slugKind),onChange:S},k))})})]})}Fm.propTypes={type:_e.string.isRequired,title:_e.string.isRequired,data:_e.array.isRequired,name:_e.string,col:_e.bool,onChange:_e.func,filters:_e.object};function Fm({type:e="checkbox",title:t="",data:r=[],name:s="",col:u=!1,onChange:d=null,filters:x={}}){const[l,_]=ne.exports.useState(!0),{control:S,handleSubmit:C,reset:k}=us({}),[D,U]=ne.exports.useContext(XE);ne.exports.useEffect(()=>{D&&(k(),U(!1))},[D]);const q=(L,K)=>{if(!d)return null;d(L)};return H(yn,{children:[T(ls.Collapse,{isOpened:!0,children:H("div",{className:"flex items-center cursor-pointer",onClick:()=>{_(L=>!L)},children:[T("h4",{className:"py-3 pl-2 pr-10 text-[rgba(0,0,0,.85)] font-semibold  grow ",children:t}),T("i",{className:"fa-solid fa-angle-down "})]})}),T(ls.UnmountClosed,{isOpened:l,children:T("form",{onInput:C(q),className:`scroll-bar   ${r.length>0&&`p-[10px] flex  overflow-y-auto ${u?"flex-col":"flex-row"}  gap-y-[10px] max-h-[242px] `}`,children:r.map((L,K)=>T(Rd,{label:L==null?void 0:L.label,name:L==null?void 0:L.name,value:L==null?void 0:L.value,type:e,id:L==null?void 0:L.label,checked:(L==null?void 0:L.value)===(x==null?void 0:x.timeStatus),onChange:q},K))})})]})}var l6={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(sa,function(){var r,s,u;function d(l,_){if(!r)r=_;else if(!s)s=_;else{var S="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+r+")(sharedChunk); ("+s+")(sharedChunk); self.onerror = null;",C={};r(C),u=_(C),typeof window!="undefined"&&window&&window.URL&&window.URL.createObjectURL&&(u.workerUrl=window.URL.createObjectURL(new Blob([S],{type:"text/javascript"})))}}d(["exports"],function(l){var _=typeof self!="undefined"?self:{},S="2.15.0";let C;const k={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(C==null){const i=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{C={}.API_URL_REGEX!=null?new RegExp({}.API_URL_REGEX):i}catch{C=i}}return C},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!k.API_URL)return null;try{const i=new URL(k.API_URL);return i.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":i.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},D={supported:!1,testSupport:function(i){!L&&q&&(K?R(i):U=i)}};let U,q,L=!1,K=!1;function R(i){const n=i.createTexture();i.bindTexture(i.TEXTURE_2D,n);try{if(i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,q),i.isContextLost())return;D.supported=!0}catch{}i.deleteTexture(n),L=!0}_.document&&(q=_.document.createElement("img"),q.onload=function(){U&&R(U),U=null,K=!0},q.onerror=function(){L=!0,U=null},q.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const F="01";function V(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var J=re;function re(i,n,o,c){this.cx=3*i,this.bx=3*(o-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(c-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=n,this.p2x=o,this.p2y=c}re.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,n){if(n===void 0&&(n=1e-6),i<0)return 0;if(i>1)return 1;for(var o=i,c=0;c<8;c++){var p=this.sampleCurveX(o)-i;if(Math.abs(p)<n)return o;var m=this.sampleCurveDerivativeX(o);if(Math.abs(m)<1e-6)break;o-=p/m}var y=0,b=1;for(o=i,c=0;c<20&&(p=this.sampleCurveX(o),!(Math.abs(p-i)<n));c++)i>p?y=o:b=o,o=.5*(b-y)+y;return o},solve:function(i,n){return this.sampleCurveY(this.solveCurveX(i,n))}};var fe=V(J),be=ce;function ce(i,n){this.x=i,this.y=n}ce.prototype={clone:function(){return new ce(this.x,this.y)},add:function(i){return this.clone()._add(i)},sub:function(i){return this.clone()._sub(i)},multByPoint:function(i){return this.clone()._multByPoint(i)},divByPoint:function(i){return this.clone()._divByPoint(i)},mult:function(i){return this.clone()._mult(i)},div:function(i){return this.clone()._div(i)},rotate:function(i){return this.clone()._rotate(i)},rotateAround:function(i,n){return this.clone()._rotateAround(i,n)},matMult:function(i){return this.clone()._matMult(i)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(i){return this.x===i.x&&this.y===i.y},dist:function(i){return Math.sqrt(this.distSqr(i))},distSqr:function(i){var n=i.x-this.x,o=i.y-this.y;return n*n+o*o},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(i){return Math.atan2(this.y-i.y,this.x-i.x)},angleWith:function(i){return this.angleWithSep(i.x,i.y)},angleWithSep:function(i,n){return Math.atan2(this.x*n-this.y*i,this.x*i+this.y*n)},_matMult:function(i){var n=i[2]*this.x+i[3]*this.y;return this.x=i[0]*this.x+i[1]*this.y,this.y=n,this},_add:function(i){return this.x+=i.x,this.y+=i.y,this},_sub:function(i){return this.x-=i.x,this.y-=i.y,this},_mult:function(i){return this.x*=i,this.y*=i,this},_div:function(i){return this.x/=i,this.y/=i,this},_multByPoint:function(i){return this.x*=i.x,this.y*=i.y,this},_divByPoint:function(i){return this.x/=i.x,this.y/=i.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var i=this.y;return this.y=this.x,this.x=-i,this},_rotate:function(i){var n=Math.cos(i),o=Math.sin(i),c=o*this.x+n*this.y;return this.x=n*this.x-o*this.y,this.y=c,this},_rotateAround:function(i,n){var o=Math.cos(i),c=Math.sin(i),p=n.y+c*(this.x-n.x)+o*(this.y-n.y);return this.x=n.x+o*(this.x-n.x)-c*(this.y-n.y),this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},ce.convert=function(i){return i instanceof ce?i:Array.isArray(i)?new ce(i[0],i[1]):i};var ve=V(be);const Fe=Math.PI/180,Le=180/Math.PI;function Ie(i){return i*Fe}function Ke(i){return i*Le}const bt=[[0,0],[1,0],[1,1],[0,1]];function ot(i){if(i<=0)return 0;if(i>=1)return 1;const n=i*i,o=n*i;return 4*(i<.5?o:3*(i-n)+o-.75)}function Ot(i,n,o,c){const p=new fe(i,n,o,c);return function(m){return p.solve(m)}}const Dt=Ot(.25,.1,.25,1);function Ze(i,n,o){return Math.min(o,Math.max(n,i))}function Ye(i,n,o){return(o=Ze((o-i)/(n-i),0,1))*o*(3-2*o)}function De(i,n,o){const c=o-n,p=((i-n)%c+c)%c+n;return p===n?o:p}function _t(i,n,o){if(!i.length)return o(null,[]);let c=i.length;const p=new Array(i.length);let m=null;i.forEach((y,b)=>{n(y,(E,A)=>{E&&(m=E),p[b]=A,--c==0&&o(m,p)})})}function mt(i){const n=[];for(const o in i)n.push(i[o]);return n}function Et(i,...n){for(const o of n)for(const c in o)i[c]=o[c];return i}let jt=1;function en(){return jt++}function nn(){return function i(n){return n?(n^Math.random()*(16>>n/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,i)}()}function vn(i){return i<=1?1:Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function Bt(i){return!!i&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(i)}function xn(i,n){i.forEach(o=>{n[o]&&(n[o]=n[o].bind(n))})}function Xn(i,n){return i.indexOf(n,i.length-n.length)!==-1}function Rt(i,n,o){const c={};for(const p in i)c[p]=n.call(o||this,i[p],p,i);return c}function Qn(i,n,o){const c={};for(const p in i)n.call(o||this,i[p],p,i)&&(c[p]=i[p]);return c}function zn(i){return Array.isArray(i)?i.map(zn):typeof i=="object"&&i?Rt(i,zn):i}const Fr={};function tn(i){Fr[i]||(typeof console!="undefined"&&console.warn(i),Fr[i]=!0)}function Wn(i,n,o){return(o.y-i.y)*(n.x-i.x)>(n.y-i.y)*(o.x-i.x)}function wr(i){let n=0;for(let o,c,p=0,m=i.length,y=m-1;p<m;y=p++)o=i[p],c=i[y],n+=(c.x-o.x)*(o.y+c.y);return n}function Se(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function Ge(i){const n={};if(i.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(o,c,p,m)=>{const y=p||m;return n[c]=!y||y.toLowerCase(),""}),n["max-age"]){const o=parseInt(n["max-age"],10);isNaN(o)?delete n["max-age"]:n["max-age"]=o}return n}let Xe=null;function gt(i){if(Xe==null){const n=i.navigator?i.navigator.userAgent:null;Xe=!!i.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return Xe}function Tt(i){try{const n=_[i];return n.setItem("_mapbox_test_",1),n.removeItem("_mapbox_test_"),!0}catch{return!1}}function vt(i,n){return[i[4*n],i[4*n+1],i[4*n+2],i[4*n+3]]}const Gt="mapbox-tiles";let Mn=500,hr=50,er,gi;function da(){try{return _.caches}catch{}}function xo(){da()&&!er&&(er=_.caches.open(Gt))}function Bo(i){const n=i.indexOf("?");if(n<0)return i;const o=function(p){const m=p.indexOf("?");return m>0?p.slice(m+1).split("&"):[]}(i),c=o.filter(p=>{const m=p.split("=");return m[0]==="language"||m[0]==="worldview"});return c.length?`${i.slice(0,n)}?${c.join("&")}`:i.slice(0,n)}let pa=1/0;const $o={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze($o);class jo extends Error{constructor(n,o,c){o===401&&Oe(c)&&(n+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(n),this.status=o,this.url=c}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Uo=Se()?()=>self.worker&&self.worker.referrer:()=>(_.location.protocol==="blob:"?_.parent:_).location.href,fa=function(i,n){if(!(/^file:/.test(o=i.url)||/^file:/.test(Uo())&&!/^\w+:/.test(o))){if(_.fetch&&_.Request&&_.AbortController&&_.Request.prototype.hasOwnProperty("signal"))return function(c,p){const m=new _.AbortController,y=new _.Request(c.url,{method:c.method||"GET",body:c.body,credentials:c.credentials,headers:c.headers,referrer:Uo(),referrerPolicy:c.referrerPolicy,signal:m.signal});let b=!1,E=!1;const A=(I=y.url).indexOf("sku=")>0&&Oe(I);var I;c.type==="json"&&y.headers.set("Accept","application/json");const N=(j,G,X)=>{if(E)return;if(j&&j.message!=="SecurityError"&&tn(j.toString()),G&&X)return O(G);const te=Date.now();_.fetch(y).then(ue=>{if(ue.ok){const xe=A?ue.clone():null;return O(ue,xe,te)}return p(new jo(ue.statusText,ue.status,c.url))}).catch(ue=>{ue.name!=="AbortError"&&p(new Error(`${ue.message} ${c.url}`))})},O=(j,G,X)=>{(c.type==="arrayBuffer"?j.arrayBuffer():c.type==="json"?j.json():j.text()).then(te=>{E||(G&&X&&function(ue,xe,he){if(xo(),!er)return;const ge={status:xe.status,statusText:xe.statusText,headers:new _.Headers};xe.headers.forEach((Ve,$e)=>ge.headers.set($e,Ve));const Ee=Ge(xe.headers.get("Cache-Control")||"");if(Ee["no-store"])return;Ee["max-age"]&&ge.headers.set("Expires",new Date(he+1e3*Ee["max-age"]).toUTCString());const we=ge.headers.get("Expires");we&&(new Date(we).getTime()-he<42e4||function(Ve,$e){if(gi===void 0)try{new Response(new ReadableStream),gi=!0}catch{gi=!1}gi?$e(Ve.body):Ve.blob().then($e)}(xe,Ve=>{const $e=new _.Response(Ve,ge);xo(),er&&er.then(et=>et.put(Bo(ue.url),$e)).catch(et=>tn(et.message))}))}(y,G,X),b=!0,p(null,te,j.headers.get("Cache-Control"),j.headers.get("Expires")))}).catch(te=>{E||p(new Error(te.message))})};return A?function(j,G){if(xo(),!er)return G(null);const X=Bo(j.url);er.then(te=>{te.match(X).then(ue=>{const xe=function(he){if(!he)return!1;const ge=new Date(he.headers.get("Expires")||0),Ee=Ge(he.headers.get("Cache-Control")||"");return ge>Date.now()&&!Ee["no-cache"]}(ue);te.delete(X),xe&&te.put(X,ue.clone()),G(null,ue,xe)}).catch(G)}).catch(G)}(y,N):N(null,null),{cancel:()=>{E=!0,b||m.abort()}}}(i,n);if(Se()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",i,n,void 0,!0)}var o;return function(c,p){const m=new _.XMLHttpRequest;m.open(c.method||"GET",c.url,!0),c.type==="arrayBuffer"&&(m.responseType="arraybuffer");for(const y in c.headers)m.setRequestHeader(y,c.headers[y]);return c.type==="json"&&(m.responseType="text",m.setRequestHeader("Accept","application/json")),m.withCredentials=c.credentials==="include",m.onerror=()=>{p(new Error(m.statusText))},m.onload=()=>{if((m.status>=200&&m.status<300||m.status===0)&&m.response!==null){let y=m.response;if(c.type==="json")try{y=JSON.parse(m.response)}catch(b){return p(b)}p(null,y,m.getResponseHeader("Cache-Control"),m.getResponseHeader("Expires"))}else p(new jo(m.statusText,m.status,c.url))},m.send(c.body),{cancel:()=>m.abort()}}(i,n)},Ja=function(i,n){return fa(Et(i,{type:"arrayBuffer"}),n)};function Cu(i){const n=_.document.createElement("a");return n.href=i,n.protocol===_.document.location.protocol&&n.host===_.document.location.host}const ye="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Y,Q;Y=[],Q=0;const me=function(i,n){if(D.supported&&(i.headers||(i.headers={}),i.headers.accept="image/webp,*/*"),Q>=k.MAX_PARALLEL_IMAGE_REQUESTS){const m={requestParameters:i,callback:n,cancelled:!1,cancel(){this.cancelled=!0}};return Y.push(m),m}Q++;let o=!1;const c=()=>{if(!o)for(o=!0,Q--;Y.length&&Q<k.MAX_PARALLEL_IMAGE_REQUESTS;){const m=Y.shift(),{requestParameters:y,callback:b,cancelled:E}=m;E||(m.cancel=me(y,b).cancel)}},p=Ja(i,(m,y,b,E)=>{c(),m?n(m):y&&(_.createImageBitmap?function(A,I){const N=new _.Blob([new Uint8Array(A)],{type:"image/png"});_.createImageBitmap(N).then(O=>{I(null,O)}).catch(O=>{I(new Error(`Could not load image because of ${O.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(y,(A,I)=>n(A,I,b,E)):function(A,I){const N=new _.Image,O=_.URL;N.onload=()=>{I(null,N),O.revokeObjectURL(N.src),N.onload=null,_.requestAnimationFrame(()=>{N.src=ye})},N.onerror=()=>I(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const j=new _.Blob([new Uint8Array(A)],{type:"image/png"});N.src=A.byteLength?O.createObjectURL(j):ye}(y,(A,I)=>n(A,I,b,E)))});return{cancel:()=>{p.cancel(),c()}}},Te="NO_ACCESS_TOKEN";function Pe(i){return i.indexOf("mapbox:")===0}function Oe(i){return k.API_URL_REGEX.test(i)}function Re(i){return k.API_CDN_URL_REGEX.test(i)}function ke(i){return k.API_STYLE_REGEX.test(i)&&!qe(i)}function qe(i){return k.API_SPRITE_REGEX.test(i)}const xt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function wt(i){const n=i.match(xt);if(!n)throw new Error("Unable to parse URL object");return{protocol:n[1],authority:n[2],path:n[3]||"/",params:n[4]?n[4].split("&"):[]}}function pt(i){const n=i.params.length?`?${i.params.join("&")}`:"";return`${i.protocol}://${i.authority}${i.path}${n}`}const an="mapbox.eventData";function hn(i){if(!i)return null;const n=i.split(".");if(!n||n.length!==3)return null;try{return JSON.parse(decodeURIComponent(_.atob(n[1]).split("").map(o=>"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class ln{constructor(n){this.type=n,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(n){const o=hn(k.ACCESS_TOKEN);let c="";return c=o&&o.u?_.btoa(encodeURIComponent(o.u).replace(/%([0-9A-F]{2})/g,(p,m)=>String.fromCharCode(Number("0x"+m)))):k.ACCESS_TOKEN||"",n?`${an}.${n}:${c}`:`${an}:${c}`}fetchEventData(){const n=Tt("localStorage"),o=this.getStorageKey(),c=this.getStorageKey("uuid");if(n)try{const p=_.localStorage.getItem(o);p&&(this.eventData=JSON.parse(p));const m=_.localStorage.getItem(c);m&&(this.anonId=m)}catch{tn("Unable to read from LocalStorage")}}saveEventData(){const n=Tt("localStorage"),o=this.getStorageKey(),c=this.getStorageKey("uuid");if(n)try{_.localStorage.setItem(c,this.anonId),Object.keys(this.eventData).length>=1&&_.localStorage.setItem(o,JSON.stringify(this.eventData))}catch{tn("Unable to write to LocalStorage")}}processRequests(n){}postEvent(n,o,c,p){if(!k.EVENTS_URL)return;const m=wt(k.EVENTS_URL);m.params.push(`access_token=${p||k.ACCESS_TOKEN||""}`);const y={event:this.type,created:new Date(n).toISOString()},b=o?Et(y,o):y,E={url:pt(m),headers:{"Content-Type":"text/plain"},body:JSON.stringify([b])};this.pendingRequest=function(A,I){return fa(Et(A,{method:"POST"}),I)}(E,A=>{this.pendingRequest=null,c(A),this.saveEventData(),this.processRequests(p)})}queueRequest(n,o){this.queue.push(n),this.processRequests(o)}}const dn=new class extends ln{constructor(i){super("appUserTurnstile"),this._customAccessToken=i}postTurnstileEvent(i,n){k.EVENTS_URL&&k.ACCESS_TOKEN&&Array.isArray(i)&&i.some(o=>Pe(o)||Oe(o))&&this.queueRequest(Date.now(),n)}processRequests(i){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const n=hn(k.ACCESS_TOKEN),o=n?n.u:k.ACCESS_TOKEN;let c=o!==this.eventData.tokenU;Bt(this.anonId)||(this.anonId=nn(),c=!0);const p=this.queue.shift();if(this.eventData.lastSuccess){const m=new Date(this.eventData.lastSuccess),y=new Date(p),b=(p-this.eventData.lastSuccess)/864e5;c=c||b>=1||b<-1||m.getDate()!==y.getDate()}else c=!0;c?this.postEvent(p,{sdkIdentifier:"mapbox-gl-js",sdkVersion:S,skuId:F,"enabled.telemetry":!1,userId:this.anonId},m=>{m||(this.eventData.lastSuccess=p,this.eventData.tokenU=o)},i):this.processRequests()}},bn=dn.postTurnstileEvent.bind(dn),or=new class extends ln{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(i,n,o,c){this.skuToken=n,this.errorCb=c,k.EVENTS_URL&&(o||k.ACCESS_TOKEN?this.queueRequest({id:i,timestamp:Date.now()},o):this.errorCb(new Error(Te)))}processRequests(i){if(this.pendingRequest||this.queue.length===0)return;const{id:n,timestamp:o}=this.queue.shift();n&&this.success[n]||(this.anonId||this.fetchEventData(),Bt(this.anonId)||(this.anonId=nn()),this.postEvent(o,{sdkIdentifier:"mapbox-gl-js",sdkVersion:S,skuId:F,skuToken:this.skuToken,userId:this.anonId},c=>{c?this.errorCb(c):n&&(this.success[n]=!0)},i))}},Er=or.postMapLoadEvent.bind(or),ii=new class extends ln{constructor(){super("gljs.performance")}postPerformanceEvent(i,n){k.EVENTS_URL&&(i||k.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:n},i)}processRequests(i){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:n,performanceData:o}=this.queue.shift(),c=function(p){const m=_.performance.getEntriesByType("resource"),y=_.performance.getEntriesByType("mark"),b=function(O){const j={};if(O){for(const G in O)if(G!=="other")for(const X of O[G]){const te=`${G}ResolveRangeMin`,ue=`${G}ResolveRangeMax`,xe=`${G}RequestCount`,he=`${G}RequestCachedCount`;j[te]=Math.min(j[te]||1/0,X.startTime),j[ue]=Math.max(j[ue]||-1/0,X.responseEnd);const ge=Ee=>{j[Ee]===void 0&&(j[Ee]=0),++j[Ee]};X.transferSize!==void 0&&X.transferSize===0&&ge(he),ge(xe)}}return j}(function(O,j){const G={};if(O)for(const X of O){const te=j(X);G[te]===void 0&&(G[te]=[]),G[te].push(X)}return G}(m,Um)),E=_.devicePixelRatio,A=_.navigator.connection||_.navigator.mozConnection||_.navigator.webkitConnection,I={counters:[],metadata:[],attributes:[]},N=(O,j,G)=>{G!=null&&O.push({name:j,value:G.toString()})};for(const O in b)N(I.counters,O,b[O]);if(p.interactionRange[0]!==1/0&&p.interactionRange[1]!==-1/0&&(N(I.counters,"interactionRangeMin",p.interactionRange[0]),N(I.counters,"interactionRangeMax",p.interactionRange[1])),y)for(const O of Object.keys(Qa)){const j=Qa[O],G=y.find(X=>X.name===j);G&&N(I.counters,j,G.startTime)}return N(I.counters,"visibilityHidden",p.visibilityHidden),N(I.attributes,"style",function(O){if(O)for(const j of O){const G=j.name.split("?")[0];if(ke(G)){const X=G.split("/").slice(-2);if(X.length===2)return`mapbox://styles/${X[0]}/${X[1]}`}}}(m)),N(I.attributes,"terrainEnabled",p.terrainEnabled?"true":"false"),N(I.attributes,"fogEnabled",p.fogEnabled?"true":"false"),N(I.attributes,"projection",p.projection),N(I.attributes,"zoom",p.zoom),N(I.metadata,"devicePixelRatio",E),N(I.metadata,"connectionEffectiveType",A?A.effectiveType:void 0),N(I.metadata,"navigatorUserAgent",_.navigator.userAgent),N(I.metadata,"screenWidth",_.screen.width),N(I.metadata,"screenHeight",_.screen.height),N(I.metadata,"windowWidth",_.innerWidth),N(I.metadata,"windowHeight",_.innerHeight),N(I.metadata,"mapWidth",p.width/E),N(I.metadata,"mapHeight",p.height/E),N(I.metadata,"webglRenderer",p.renderer),N(I.metadata,"webglVendor",p.vendor),N(I.metadata,"sdkVersion",S),N(I.metadata,"sdkIdentifier","mapbox-gl-js"),I}(o);for(const p of c.metadata);for(const p of c.counters);for(const p of c.attributes);this.postEvent(n,c,()=>{},i)}},Rr=ii.postPerformanceEvent.bind(ii),Vo=new class extends ln{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(i,n,o,c){if(!k.API_URL||!k.SESSION_PATH)return;const p=wt(k.API_URL+k.SESSION_PATH);p.params.push(`sku=${n||""}`),p.params.push(`access_token=${c||k.ACCESS_TOKEN||""}`);const m={url:pt(p),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(y,b){return fa(Et(y,{method:"GET"}),b)}(m,y=>{this.pendingRequest=null,o(y),this.saveEventData(),this.processRequests(c)})}getSessionAPI(i,n,o,c){this.skuToken=n,this.errorCb=c,k.SESSION_PATH&&k.API_URL&&(o||k.ACCESS_TOKEN?this.queueRequest({id:i,timestamp:Date.now()},o):this.errorCb(new Error(Te)))}processRequests(i){if(this.pendingRequest||this.queue.length===0)return;const{id:n,timestamp:o}=this.queue.shift();n&&this.success[n]||this.getSession(o,this.skuToken,c=>{c?this.errorCb(c):n&&(this.success[n]=!0)},i)}},Gr=Vo.getSessionAPI.bind(Vo),yi=new Set,Qa={create:"create",load:"load",fullLoad:"fullLoad"},Sx={mark(i){_.performance.mark(i)},measure(i,n,o){_.performance.measure(i,n,o)}};function Um(i){const n=i.name.split("?")[0];return Re(n)&&n.includes("mapbox-gl.js")?"javascript":Re(n)&&n.includes("mapbox-gl.css")?"css":function(o){return k.API_FONTS_REGEX.test(o)}(n)?"fontRange":qe(n)?"sprite":ke(n)?"style":function(o){return k.API_TILEJSON_REGEX.test(o)}(n)?"tilejson":"other"}const kn=_.performance;function Bd(i){const n=i?i.url.toString():void 0;return kn.getEntriesByName(n)}let dc,$d,Au,Go;const hs={now:()=>Au!==void 0?Au:_.performance.now(),setNow(i){Au=i},restoreNow(){Au=void 0},frame(i){const n=_.requestAnimationFrame(i);return{cancel:()=>_.cancelAnimationFrame(n)}},getImageData(i,n=0){const{width:o,height:c}=i;Go||(Go=_.document.createElement("canvas"));const p=Go.getContext("2d",{willReadFrequently:!0});if(!p)throw new Error("failed to create canvas 2d context");return(o>Go.width||c>Go.height)&&(Go.width=o,Go.height=c),p.clearRect(-n,-n,o+2*n,c+2*n),p.drawImage(i,0,0,o,c),p.getImageData(-n,-n,o+2*n,c+2*n)},resolveURL:i=>(dc||(dc=_.document.createElement("a")),dc.href=i,dc.href),get devicePixelRatio(){return _.devicePixelRatio},get prefersReducedMotion(){return!!_.matchMedia&&($d==null&&($d=_.matchMedia("(prefers-reduced-motion: reduce)")),$d.matches)}};function jd(i,n,o){o[i]&&o[i].indexOf(n)!==-1||(o[i]=o[i]||[],o[i].push(n))}function Ud(i,n,o){if(o&&o[i]){const c=o[i].indexOf(n);c!==-1&&o[i].splice(c,1)}}class ma{constructor(n,o={}){Et(this,o),this.type=n}}class ds extends ma{constructor(n,o={}){super("error",Et({error:n},o))}}class pc{on(n,o){return this._listeners=this._listeners||{},jd(n,o,this._listeners),this}off(n,o){return Ud(n,o,this._listeners),Ud(n,o,this._oneTimeListeners),this}once(n,o){return o?(this._oneTimeListeners=this._oneTimeListeners||{},jd(n,o,this._oneTimeListeners),this):new Promise(c=>this.once(n,c))}fire(n,o){typeof n=="string"&&(n=new ma(n,o||{}));const c=n.type;if(this.listens(c)){n.target=this;const p=this._listeners&&this._listeners[c]?this._listeners[c].slice():[];for(const b of p)b.call(this,n);const m=this._oneTimeListeners&&this._oneTimeListeners[c]?this._oneTimeListeners[c].slice():[];for(const b of m)Ud(c,b,this._oneTimeListeners),b.call(this,n);const y=this._eventedParent;y&&(Et(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),y.fire(n))}else n instanceof ds&&console.error(n.error);return this}listens(n){return!!(this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n))}setEventedParent(n,o){return this._eventedParent=n,this._eventedParentData=o,this}}var Qe=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function ps(i,...n){for(const o of n)for(const c in o)i[c]=o[c];return i}function Tr(i){return i instanceof Number||i instanceof String||i instanceof Boolean?i.valueOf():i}function qr(i){if(Array.isArray(i))return i.map(qr);if(i instanceof Object&&!(i instanceof Number||i instanceof String||i instanceof Boolean)){const n={};for(const o in i)n[o]=qr(i[o]);return n}return Tr(i)}class Vm extends Error{constructor(n,o){super(o),this.message=o,this.key=n}}var qo=Vm;class Vd{constructor(n,o=[]){this.parent=n,this.bindings={};for(const[c,p]of o)this.bindings[c]=p}concat(n){return new Vd(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}var Gm=Vd;const el={kind:"null"},kt={kind:"number"},_n={kind:"string"},fn={kind:"boolean"},Bi={kind:"color"},_o={kind:"object"},mn={kind:"value"},$i={kind:"collator"},fc={kind:"formatted"},ga={kind:"resolvedImage"};function Qi(i,n){return{kind:"array",itemType:i,N:n}}function tr(i){if(i.kind==="array"){const n=tr(i.itemType);return typeof i.N=="number"?`array<${n}, ${i.N}>`:i.itemType.kind==="value"?"array":`array<${n}>`}return i.kind}const qm=[el,kt,_n,fn,Bi,fc,_o,Qi(mn),ga];function fs(i,n){if(n.kind==="error")return null;if(i.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!fs(i.itemType,n.itemType))&&(typeof i.N!="number"||i.N===n.N))return null}else{if(i.kind===n.kind)return null;if(i.kind==="value"){for(const o of qm)if(!fs(o,n))return null}}return`Expected ${tr(i)} but found ${tr(n)} instead.`}function mc(i,n){return n.some(o=>o.kind===i.kind)}function gc(i,n){return n.some(o=>o==="null"?i===null:o==="array"?Array.isArray(i):o==="object"?i&&!Array.isArray(i)&&typeof i=="object":o===typeof i)}var Gd,Hm={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function yc(i){return(i=Math.round(i))<0?0:i>255?255:i}function xc(i){return yc(i[i.length-1]==="%"?parseFloat(i)/100*255:parseInt(i))}function Mu(i){return(n=i[i.length-1]==="%"?parseFloat(i)/100:parseFloat(i))<0?0:n>1?1:n;var n}function tl(i,n,o){return o<0?o+=1:o>1&&(o-=1),6*o<1?i+(n-i)*o*6:2*o<1?n:3*o<2?i+(n-i)*(2/3-o)*6:i}try{Gd={}.parseCSSColor=function(i){var n,o=i.replace(/ /g,"").toLowerCase();if(o in Hm)return Hm[o].slice();if(o[0]==="#")return o.length===4?(n=parseInt(o.substr(1),16))>=0&&n<=4095?[(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1]:null:o.length===7&&(n=parseInt(o.substr(1),16))>=0&&n<=16777215?[(16711680&n)>>16,(65280&n)>>8,255&n,1]:null;var c=o.indexOf("("),p=o.indexOf(")");if(c!==-1&&p+1===o.length){var m=o.substr(0,c),y=o.substr(c+1,p-(c+1)).split(","),b=1;switch(m){case"rgba":if(y.length!==4)return null;b=Mu(y.pop());case"rgb":return y.length!==3?null:[xc(y[0]),xc(y[1]),xc(y[2]),b];case"hsla":if(y.length!==4)return null;b=Mu(y.pop());case"hsl":if(y.length!==3)return null;var E=(parseFloat(y[0])%360+360)%360/360,A=Mu(y[1]),I=Mu(y[2]),N=I<=.5?I*(A+1):I+A-I*A,O=2*I-N;return[yc(255*tl(O,N,E+1/3)),yc(255*tl(O,N,E)),yc(255*tl(O,N,E-1/3)),b];default:return null}}return null}}catch{}class Si{constructor(n,o,c,p=1){this.r=n,this.g=o,this.b=c,this.a=p}static parse(n){if(!n)return;if(n instanceof Si)return n;if(typeof n!="string")return;const o=Gd(n);return o?new Si(o[0]/255*o[3],o[1]/255*o[3],o[2]/255*o[3],o[3]):void 0}toString(){const[n,o,c,p]=this.toArray();return`rgba(${Math.round(n)},${Math.round(o)},${Math.round(c)},${p})`}toArray(){const{r:n,g:o,b:c,a:p}=this;return p===0?[0,0,0,0]:[255*n/p,255*o/p,255*c/p,p]}toArray01(){const{r:n,g:o,b:c,a:p}=this;return p===0?[0,0,0,0]:[n/p,o/p,c/p,p]}toArray01PremultipliedAlpha(){const{r:n,g:o,b:c,a:p}=this;return[n,o,c,p]}}Si.black=new Si(0,0,0,1),Si.white=new Si(1,1,1,1),Si.transparent=new Si(0,0,0,0),Si.red=new Si(1,0,0,1),Si.blue=new Si(0,0,1,1);var xr=Si;class qd{constructor(n,o,c){this.sensitivity=n?o?"variant":"case":o?"accent":"base",this.locale=c,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,o){return this.collator.compare(n,o)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Hd{constructor(n,o,c,p,m){this.text=n.normalize?n.normalize():n,this.image=o,this.scale=c,this.fontStack=p,this.textColor=m}}class Ci{constructor(n){this.sections=n}static fromString(n){return new Ci([new Hd(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof Ci?n:Ci.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}serialize(){const n=["format"];for(const o of this.sections){if(o.image){n.push(["image",o.image.name]);continue}n.push(o.text);const c={};o.fontStack&&(c["text-font"]=["literal",o.fontStack.split(",")]),o.scale&&(c["font-scale"]=o.scale),o.textColor&&(c["text-color"]=["rgba"].concat(o.textColor.toArray())),n.push(c)}return n}}class eo{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new eo({name:n,available:!1}):null}serialize(){return["image",this.name]}}function Wm(i,n,o,c){return typeof i=="number"&&i>=0&&i<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof o=="number"&&o>=0&&o<=255?c===void 0||typeof c=="number"&&c>=0&&c<=1?null:`Invalid rgba value [${[i,n,o,c].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof c=="number"?[i,n,o,c]:[i,n,o]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function _c(i){if(i===null||typeof i=="string"||typeof i=="boolean"||typeof i=="number"||i instanceof xr||i instanceof qd||i instanceof Ci||i instanceof eo)return!0;if(Array.isArray(i)){for(const n of i)if(!_c(n))return!1;return!0}if(typeof i=="object"){for(const n in i)if(!_c(i[n]))return!1;return!0}return!1}function dr(i){if(i===null)return el;if(typeof i=="string")return _n;if(typeof i=="boolean")return fn;if(typeof i=="number")return kt;if(i instanceof xr)return Bi;if(i instanceof qd)return $i;if(i instanceof Ci)return fc;if(i instanceof eo)return ga;if(Array.isArray(i)){const n=i.length;let o;for(const c of i){const p=dr(c);if(o){if(o===p)continue;o=mn;break}o=p}return Qi(o||mn,n)}return _o}function vc(i){const n=typeof i;return i===null?"":n==="string"||n==="number"||n==="boolean"?String(i):i instanceof xr||i instanceof Ci||i instanceof eo?i.toString():JSON.stringify(i)}class Wd{constructor(n,o){this.type=n,this.value=o}static parse(n,o){if(n.length!==2)return o.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!_c(n[1]))return o.error("invalid value");const c=n[1];let p=dr(c);const m=o.expectedType;return p.kind!=="array"||p.N!==0||!m||m.kind!=="array"||typeof m.N=="number"&&m.N!==0||(p=m),new Wd(p,c)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof xr?["rgba"].concat(this.value.toArray()):this.value instanceof Ci?this.value.serialize():this.value}}var ya=Wd,Jr=class{constructor(i){this.name="ExpressionEvaluationError",this.message=i}toJSON(){return this.message}};const Zd={string:_n,number:kt,boolean:fn,object:_o};class Xd{constructor(n,o){this.type=n,this.args=o}static parse(n,o){if(n.length<2)return o.error("Expected at least one argument.");let c,p=1;const m=n[0];if(m==="array"){let b,E;if(n.length>2){const A=n[1];if(typeof A!="string"||!(A in Zd)||A==="object")return o.error('The item type argument of "array" must be one of string, number, boolean',1);b=Zd[A],p++}else b=mn;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return o.error('The length argument to "array" must be a positive integer literal',2);E=n[2],p++}c=Qi(b,E)}else c=Zd[m];const y=[];for(;p<n.length;p++){const b=o.parse(n[p],p,mn);if(!b)return null;y.push(b)}return new Xd(c,y)}evaluate(n){for(let o=0;o<this.args.length;o++){const c=this.args[o].evaluate(n);if(!fs(this.type,dr(c)))return c;if(o===this.args.length-1)throw new Jr(`Expected value to be of type ${tr(this.type)}, but found ${tr(dr(c))} instead.`)}return null}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){const n=this.type,o=[n.kind];if(n.kind==="array"){const c=n.itemType;if(c.kind==="string"||c.kind==="number"||c.kind==="boolean"){o.push(c.kind);const p=n.N;(typeof p=="number"||this.args.length>1)&&o.push(p)}}return o.concat(this.args.map(c=>c.serialize()))}}var ms=Xd;class Hs{constructor(n){this.type=fc,this.sections=n}static parse(n,o){if(n.length<2)return o.error("Expected at least one argument.");const c=n[1];if(!Array.isArray(c)&&typeof c=="object")return o.error("First argument must be an image or text section.");const p=[];let m=!1;for(let y=1;y<=n.length-1;++y){const b=n[y];if(m&&typeof b=="object"&&!Array.isArray(b)){m=!1;let E=null;if(b["font-scale"]&&(E=o.parse(b["font-scale"],1,kt),!E))return null;let A=null;if(b["text-font"]&&(A=o.parse(b["text-font"],1,Qi(_n)),!A))return null;let I=null;if(b["text-color"]&&(I=o.parse(b["text-color"],1,Bi),!I))return null;const N=p[p.length-1];N.scale=E,N.font=A,N.textColor=I}else{const E=o.parse(n[y],1,mn);if(!E)return null;const A=E.type.kind;if(A!=="string"&&A!=="value"&&A!=="null"&&A!=="resolvedImage")return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");m=!0,p.push({content:E,scale:null,font:null,textColor:null})}}return new Hs(p)}evaluate(n){return new Ci(this.sections.map(o=>{const c=o.content.evaluate(n);return dr(c)===ga?new Hd("",c,null,null,null):new Hd(vc(c),null,o.scale?o.scale.evaluate(n):null,o.font?o.font.evaluate(n).join(","):null,o.textColor?o.textColor.evaluate(n):null)}))}eachChild(n){for(const o of this.sections)n(o.content),o.scale&&n(o.scale),o.font&&n(o.font),o.textColor&&n(o.textColor)}outputDefined(){return!1}serialize(){const n=["format"];for(const o of this.sections){n.push(o.content.serialize());const c={};o.scale&&(c["font-scale"]=o.scale.serialize()),o.font&&(c["text-font"]=o.font.serialize()),o.textColor&&(c["text-color"]=o.textColor.serialize()),n.push(c)}return n}}class ku{constructor(n){this.type=ga,this.input=n}static parse(n,o){if(n.length!==2)return o.error("Expected two arguments.");const c=o.parse(n[1],1,_n);return c?new ku(c):o.error("No image name provided.")}evaluate(n){const o=this.input.evaluate(n),c=eo.fromString(o);return c&&n.availableImages&&(c.available=n.availableImages.indexOf(o)>-1),c}eachChild(n){n(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Cx={"to-boolean":fn,"to-color":Bi,"to-number":kt,"to-string":_n};class Kd{constructor(n,o){this.type=n,this.args=o}static parse(n,o){if(n.length<2)return o.error("Expected at least one argument.");const c=n[0];if((c==="to-boolean"||c==="to-string")&&n.length!==2)return o.error("Expected one argument.");const p=Cx[c],m=[];for(let y=1;y<n.length;y++){const b=o.parse(n[y],y,mn);if(!b)return null;m.push(b)}return new Kd(p,m)}evaluate(n){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(n));if(this.type.kind==="color"){let o,c;for(const p of this.args){if(o=p.evaluate(n),c=null,o instanceof xr)return o;if(typeof o=="string"){const m=n.parseColor(o);if(m)return m}else if(Array.isArray(o)&&(c=o.length<3||o.length>4?`Invalid rbga value ${JSON.stringify(o)}: expected an array containing either three or four numeric values.`:Wm(o[0],o[1],o[2],o[3]),!c))return new xr(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new Jr(c||`Could not parse color from value '${typeof o=="string"?o:String(JSON.stringify(o))}'`)}if(this.type.kind==="number"){let o=null;for(const c of this.args){if(o=c.evaluate(n),o===null)return 0;const p=Number(o);if(!isNaN(p))return p}throw new Jr(`Could not convert ${JSON.stringify(o)} to number.`)}return this.type.kind==="formatted"?Ci.fromString(vc(this.args[0].evaluate(n))):this.type.kind==="resolvedImage"?eo.fromString(vc(this.args[0].evaluate(n))):vc(this.args[0].evaluate(n))}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Hs([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new ku(this.args[0]).serialize();const n=[`to-${this.type.kind}`];return this.eachChild(o=>{n.push(o.serialize())}),n}}var nl=Kd;const Ho=["Unknown","Point","LineString","Polygon"];var Yd=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Ho[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const i=this.featureDistanceData.center,n=this.featureDistanceData.scale,{x:o,y:c}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(o*n-i[0])+this.featureDistanceData.bearing[1]*(c*n-i[1])}return 0}parseColor(i){let n=this._parseColorCache[i];return n||(n=this._parseColorCache[i]=xr.parse(i)),n}};class xa{constructor(n,o,c,p){this.name=n,this.type=o,this._evaluate=c,this.args=p}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(n=>n.serialize()))}static parse(n,o){const c=n[0],p=xa.definitions[c];if(!p)return o.error(`Unknown expression "${c}". If you wanted a literal array, use ["literal", [...]].`,0);const m=Array.isArray(p)?p[0]:p.type,y=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,b=y.filter(([A])=>!Array.isArray(A)||A.length===n.length-1);let E=null;for(const[A,I]of b){E=new rp(o.registry,o.path,null,o.scope);const N=[];let O=!1;for(let j=1;j<n.length;j++){const G=n[j],X=Array.isArray(A)?A[j-1]:A.type,te=E.parse(G,1+N.length,X);if(!te){O=!0;break}N.push(te)}if(!O)if(Array.isArray(A)&&A.length!==N.length)E.error(`Expected ${A.length} arguments, but found ${N.length} instead.`);else{for(let j=0;j<N.length;j++){const G=Array.isArray(A)?A[j]:A.type,X=N[j];E.concat(j+1).checkSubtype(G,X.type)}if(E.errors.length===0)return new xa(c,m,I,N)}}if(b.length===1)o.errors.push(...E.errors);else{const A=(b.length?b:y).map(([N])=>{return O=N,Array.isArray(O)?`(${O.map(tr).join(", ")})`:`(${tr(O.type)}...)`;var O}).join(" | "),I=[];for(let N=1;N<n.length;N++){const O=o.parse(n[N],1+I.length);if(!O)return null;I.push(tr(O.type))}o.error(`Expected arguments of type ${A}, but found (${I.join(", ")}) instead.`)}return null}static register(n,o){xa.definitions=o;for(const c in o)n[c]=xa}}var gs=xa;class bc{constructor(n,o,c){this.type=$i,this.locale=c,this.caseSensitive=n,this.diacriticSensitive=o}static parse(n,o){if(n.length!==2)return o.error("Expected one argument.");const c=n[1];if(typeof c!="object"||Array.isArray(c))return o.error("Collator options argument must be an object.");const p=o.parse(c["case-sensitive"]!==void 0&&c["case-sensitive"],1,fn);if(!p)return null;const m=o.parse(c["diacritic-sensitive"]!==void 0&&c["diacritic-sensitive"],1,fn);if(!m)return null;let y=null;return c.locale&&(y=o.parse(c.locale,1,_n),!y)?null:new bc(p,m,y)}evaluate(n){return new qd(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}serialize(){const n={};return n["case-sensitive"]=this.caseSensitive.serialize(),n["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(n.locale=this.locale.serialize()),["collator",n]}}const ys=8192;function Pu(i,n){i[0]=Math.min(i[0],n[0]),i[1]=Math.min(i[1],n[1]),i[2]=Math.max(i[2],n[0]),i[3]=Math.max(i[3],n[1])}function rl(i,n){return!(i[0]<=n[0]||i[2]>=n[2]||i[1]<=n[1]||i[3]>=n[3])}function wc(i,n){const o=(180+i[0])/360,c=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i[1]*Math.PI/360)))/360,p=Math.pow(2,n.z);return[Math.round(o*p*ys),Math.round(c*p*ys)]}function Zm(i,n,o){const c=i[0]-n[0],p=i[1]-n[1],m=i[0]-o[0],y=i[1]-o[1];return c*y-m*p==0&&c*m<=0&&p*y<=0}function Iu(i,n){let o=!1;for(let y=0,b=n.length;y<b;y++){const E=n[y];for(let A=0,I=E.length;A<I-1;A++){if(Zm(i,E[A],E[A+1]))return!1;(p=E[A])[1]>(c=i)[1]!=(m=E[A+1])[1]>c[1]&&c[0]<(m[0]-p[0])*(c[1]-p[1])/(m[1]-p[1])+p[0]&&(o=!o)}}var c,p,m;return o}function Jd(i,n){for(let o=0;o<n.length;o++)if(Iu(i,n[o]))return!0;return!1}function Qd(i,n,o,c){const p=c[0]-o[0],m=c[1]-o[1],y=(i[0]-o[0])*m-p*(i[1]-o[1]),b=(n[0]-o[0])*m-p*(n[1]-o[1]);return y>0&&b<0||y<0&&b>0}function il(i,n,o){for(const A of o)for(let I=0;I<A.length-1;++I)if((b=[(y=A[I+1])[0]-(m=A[I])[0],y[1]-m[1]])[0]*(E=[(p=n)[0]-(c=i)[0],p[1]-c[1]])[1]-b[1]*E[0]!=0&&Qd(c,p,m,y)&&Qd(m,y,c,p))return!0;var c,p,m,y,b,E;return!1}function Pn(i,n){for(let o=0;o<i.length;++o)if(!Iu(i[o],n))return!1;for(let o=0;o<i.length-1;++o)if(il(i[o],i[o+1],n))return!1;return!0}function Ax(i,n){for(let o=0;o<n.length;o++)if(Pn(i,n[o]))return!0;return!1}function ep(i,n,o){const c=[];for(let p=0;p<i.length;p++){const m=[];for(let y=0;y<i[p].length;y++){const b=wc(i[p][y],o);Pu(n,b),m.push(b)}c.push(m)}return c}function Xm(i,n,o){const c=[];for(let p=0;p<i.length;p++){const m=ep(i[p],n,o);c.push(m)}return c}function tp(i,n,o,c){if(i[0]<o[0]||i[0]>o[2]){const p=.5*c;let m=i[0]-o[0]>p?-c:o[0]-i[0]>p?c:0;m===0&&(m=i[0]-o[2]>p?-c:o[2]-i[0]>p?c:0),i[0]+=m}Pu(n,i)}function Km(i,n,o,c){const p=Math.pow(2,c.z)*ys,m=[c.x*ys,c.y*ys],y=[];if(!i)return y;for(const b of i)for(const E of b){const A=[E.x+m[0],E.y+m[1]];tp(A,n,o,p),y.push(A)}return y}function np(i,n,o,c){const p=Math.pow(2,c.z)*ys,m=[c.x*ys,c.y*ys],y=[];if(!i)return y;for(const E of i){const A=[];for(const I of E){const N=[I.x+m[0],I.y+m[1]];Pu(n,N),A.push(N)}y.push(A)}if(n[2]-n[0]<=p/2){(b=n)[0]=b[1]=1/0,b[2]=b[3]=-1/0;for(const E of y)for(const A of E)tp(A,n,o,p)}var b;return y}class ol{constructor(n,o){this.type=fn,this.geojson=n,this.geometries=o}static parse(n,o){if(n.length!==2)return o.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(_c(n[1])){const c=n[1];if(c.type==="FeatureCollection")for(let p=0;p<c.features.length;++p){const m=c.features[p].geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new ol(c,c.features[p].geometry)}else if(c.type==="Feature"){const p=c.geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new ol(c,c.geometry)}else if(c.type==="Polygon"||c.type==="MultiPolygon")return new ol(c,c)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(o,c){const p=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],y=o.canonicalID();if(!y)return!1;if(c.type==="Polygon"){const b=ep(c.coordinates,m,y),E=Km(o.geometry(),p,m,y);if(!rl(p,m))return!1;for(const A of E)if(!Iu(A,b))return!1}if(c.type==="MultiPolygon"){const b=Xm(c.coordinates,m,y),E=Km(o.geometry(),p,m,y);if(!rl(p,m))return!1;for(const A of E)if(!Jd(A,b))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(o,c){const p=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],y=o.canonicalID();if(!y)return!1;if(c.type==="Polygon"){const b=ep(c.coordinates,m,y),E=np(o.geometry(),p,m,y);if(!rl(p,m))return!1;for(const A of E)if(!Pn(A,b))return!1}if(c.type==="MultiPolygon"){const b=Xm(c.coordinates,m,y),E=np(o.geometry(),p,m,y);if(!rl(p,m))return!1;for(const A of E)if(!Ax(A,b))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Du=ol;function sl(i){if(i instanceof gs&&(i.name==="get"&&i.args.length===1||i.name==="feature-state"||i.name==="has"&&i.args.length===1||i.name==="properties"||i.name==="geometry-type"||i.name==="id"||/^filter-/.test(i.name))||i instanceof Du)return!1;let n=!0;return i.eachChild(o=>{n&&!sl(o)&&(n=!1)}),n}function xs(i){if(i instanceof gs&&i.name==="feature-state")return!1;let n=!0;return i.eachChild(o=>{n&&!xs(o)&&(n=!1)}),n}function _a(i,n){if(i instanceof gs&&n.indexOf(i.name)>=0)return!1;let o=!0;return i.eachChild(c=>{o&&!_a(c,n)&&(o=!1)}),o}class zu{constructor(n,o){this.type=o.type,this.name=n,this.boundExpression=o}static parse(n,o){if(n.length!==2||typeof n[1]!="string")return o.error("'var' expression requires exactly one string literal argument.");const c=n[1];return o.scope.has(c)?new zu(c,o.scope.get(c)):o.error(`Unknown variable "${c}". Make sure "${c}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Ym=zu;class Ec{constructor(n,o=[],c,p=new Gm,m=[]){this.registry=n,this.path=o,this.key=o.map(y=>`[${y}]`).join(""),this.scope=p,this.errors=m,this.expectedType=c}parse(n,o,c,p,m={}){return o?this.concat(o,c,p)._parse(n,m):this._parse(n,m)}_parse(n,o){function c(p,m,y){return y==="assert"?new ms(m,[p]):y==="coerce"?new nl(m,[p]):p}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const p=n[0];if(typeof p!="string")return this.error(`Expression name must be a string, but found ${typeof p} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const m=this.registry[p];if(m){let y=m.parse(n,this);if(!y)return null;if(this.expectedType){const b=this.expectedType,E=y.type;if(b.kind!=="string"&&b.kind!=="number"&&b.kind!=="boolean"&&b.kind!=="object"&&b.kind!=="array"||E.kind!=="value")if(b.kind!=="color"&&b.kind!=="formatted"&&b.kind!=="resolvedImage"||E.kind!=="value"&&E.kind!=="string"){if(this.checkSubtype(b,E))return null}else y=c(y,b,o.typeAnnotation||"coerce");else y=c(y,b,o.typeAnnotation||"assert")}if(!(y instanceof ya)&&y.type.kind!=="resolvedImage"&&ip(y)){const b=new Yd;try{y=new ya(y.type,y.evaluate(b))}catch(E){return this.error(E.message),null}}return y}return this.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,o,c){const p=typeof n=="number"?this.path.concat(n):this.path,m=c?this.scope.concat(c):this.scope;return new Ec(this.registry,p,o||null,m,this.errors)}error(n,...o){const c=`${this.key}${o.map(p=>`[${p}]`).join("")}`;this.errors.push(new qo(c,n))}checkSubtype(n,o){const c=fs(n,o);return c&&this.error(c),c}}var rp=Ec;function ip(i){if(i instanceof Ym)return ip(i.boundExpression);if(i instanceof gs&&i.name==="error"||i instanceof bc||i instanceof Du)return!1;const n=i instanceof nl||i instanceof ms;let o=!0;return i.eachChild(c=>{o=n?o&&ip(c):o&&c instanceof ya}),!!o&&sl(i)&&_a(i,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Nu(i,n){const o=i.length-1;let c,p,m=0,y=o,b=0;for(;m<=y;)if(b=Math.floor((m+y)/2),c=i[b],p=i[b+1],c<=n){if(b===o||n<p)return b;m=b+1}else{if(!(c>n))throw new Jr("Input is not a number.");y=b-1}return 0}class Lu{constructor(n,o,c){this.type=n,this.input=o,this.labels=[],this.outputs=[];for(const[p,m]of c)this.labels.push(p),this.outputs.push(m)}static parse(n,o){if(n.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return o.error("Expected an even number of arguments.");const c=o.parse(n[1],1,kt);if(!c)return null;const p=[];let m=null;o.expectedType&&o.expectedType.kind!=="value"&&(m=o.expectedType);for(let y=1;y<n.length;y+=2){const b=y===1?-1/0:n[y],E=n[y+1],A=y,I=y+1;if(typeof b!="number")return o.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',A);if(p.length&&p[p.length-1][0]>=b)return o.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',A);const N=o.parse(E,I,m);if(!N)return null;m=m||N.type,p.push([b,N])}return new Lu(m,c,p)}evaluate(n){const o=this.labels,c=this.outputs;if(o.length===1)return c[0].evaluate(n);const p=this.input.evaluate(n);if(p<=o[0])return c[0].evaluate(n);const m=o.length;return p>=o[m-1]?c[m-1].evaluate(n):c[Nu(o,p)].evaluate(n)}eachChild(n){n(this.input);for(const o of this.outputs)n(o)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}serialize(){const n=["step",this.input.serialize()];for(let o=0;o<this.labels.length;o++)o>0&&n.push(this.labels[o]),n.push(this.outputs[o].serialize());return n}}var op=Lu;function En(i,n,o){return i*(1-o)+n*o}var Tc=Object.freeze({__proto__:null,array:function(i,n,o){return i.map((c,p)=>En(c,n[p],o))},color:function(i,n,o){return new xr(En(i.r,n.r,o),En(i.g,n.g,o),En(i.b,n.b,o),En(i.a,n.a,o))},number:En});const Jm=.95047,sp=1.08883,Qm=4/29,va=6/29,ap=3*va*va,Mx=va*va*va,kx=Math.PI/180,Px=180/Math.PI;function lp(i){return i>Mx?Math.pow(i,1/3):i/ap+Qm}function cp(i){return i>va?i*i*i:ap*(i-Qm)}function up(i){return 255*(i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055)}function Fu(i){return(i/=255)<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function eg(i){const n=Fu(i.r),o=Fu(i.g),c=Fu(i.b),p=lp((.4124564*n+.3575761*o+.1804375*c)/Jm),m=lp((.2126729*n+.7151522*o+.072175*c)/1);return{l:116*m-16,a:500*(p-m),b:200*(m-lp((.0193339*n+.119192*o+.9503041*c)/sp)),alpha:i.a}}function tg(i){let n=(i.l+16)/116,o=isNaN(i.a)?n:n+i.a/500,c=isNaN(i.b)?n:n-i.b/200;return n=1*cp(n),o=Jm*cp(o),c=sp*cp(c),new xr(up(3.2404542*o-1.5371385*n-.4985314*c),up(-.969266*o+1.8760108*n+.041556*c),up(.0556434*o-.2040259*n+1.0572252*c),i.alpha)}function Ix(i,n,o){const c=n-i;return i+o*(c>180||c<-180?c-360*Math.round(c/360):c)}const Sc={forward:eg,reverse:tg,interpolate:function(i,n,o){return{l:En(i.l,n.l,o),a:En(i.a,n.a,o),b:En(i.b,n.b,o),alpha:En(i.alpha,n.alpha,o)}}},al={forward:function(i){const{l:n,a:o,b:c}=eg(i),p=Math.atan2(c,o)*Px;return{h:p<0?p+360:p,c:Math.sqrt(o*o+c*c),l:n,alpha:i.a}},reverse:function(i){const n=i.h*kx,o=i.c;return tg({l:i.l,a:Math.cos(n)*o,b:Math.sin(n)*o,alpha:i.alpha})},interpolate:function(i,n,o){return{h:Ix(i.h,n.h,o),c:En(i.c,n.c,o),l:En(i.l,n.l,o),alpha:En(i.alpha,n.alpha,o)}}};var hp=Object.freeze({__proto__:null,hcl:al,lab:Sc});class Cc{constructor(n,o,c,p,m){this.type=n,this.operator=o,this.interpolation=c,this.input=p,this.labels=[],this.outputs=[];for(const[y,b]of m)this.labels.push(y),this.outputs.push(b)}static interpolationFactor(n,o,c,p){let m=0;if(n.name==="exponential")m=dp(o,n.base,c,p);else if(n.name==="linear")m=dp(o,1,c,p);else if(n.name==="cubic-bezier"){const y=n.controlPoints;m=new fe(y[0],y[1],y[2],y[3]).solve(dp(o,1,c,p))}return m}static parse(n,o){let[c,p,m,...y]=n;if(!Array.isArray(p)||p.length===0)return o.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){const A=p[1];if(typeof A!="number")return o.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:A}}else{if(p[0]!=="cubic-bezier")return o.error(`Unknown interpolation type ${String(p[0])}`,1,0);{const A=p.slice(1);if(A.length!==4||A.some(I=>typeof I!="number"||I<0||I>1))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:A}}}if(n.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(m=o.parse(m,2,kt),!m)return null;const b=[];let E=null;c==="interpolate-hcl"||c==="interpolate-lab"?E=Bi:o.expectedType&&o.expectedType.kind!=="value"&&(E=o.expectedType);for(let A=0;A<y.length;A+=2){const I=y[A],N=y[A+1],O=A+3,j=A+4;if(typeof I!="number")return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',O);if(b.length&&b[b.length-1][0]>=I)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',O);const G=o.parse(N,j,E);if(!G)return null;E=E||G.type,b.push([I,G])}return E.kind==="number"||E.kind==="color"||E.kind==="array"&&E.itemType.kind==="number"&&typeof E.N=="number"?new Cc(E,c,p,m,b):o.error(`Type ${tr(E)} is not interpolatable.`)}evaluate(n){const o=this.labels,c=this.outputs;if(o.length===1)return c[0].evaluate(n);const p=this.input.evaluate(n);if(p<=o[0])return c[0].evaluate(n);const m=o.length;if(p>=o[m-1])return c[m-1].evaluate(n);const y=Nu(o,p),b=Cc.interpolationFactor(this.interpolation,p,o[y],o[y+1]),E=c[y].evaluate(n),A=c[y+1].evaluate(n);return this.operator==="interpolate"?Tc[this.type.kind.toLowerCase()](E,A,b):this.operator==="interpolate-hcl"?al.reverse(al.interpolate(al.forward(E),al.forward(A),b)):Sc.reverse(Sc.interpolate(Sc.forward(E),Sc.forward(A),b))}eachChild(n){n(this.input);for(const o of this.outputs)n(o)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}serialize(){let n;n=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const o=[this.operator,n,this.input.serialize()];for(let c=0;c<this.labels.length;c++)o.push(this.labels[c],this.outputs[c].serialize());return o}}function dp(i,n,o,c){const p=c-o,m=i-o;return p===0?0:n===1?m/p:(Math.pow(n,m)-1)/(Math.pow(n,p)-1)}var Wo=Cc;class Ru{constructor(n,o){this.type=n,this.args=o}static parse(n,o){if(n.length<2)return o.error("Expectected at least one argument.");let c=null;const p=o.expectedType;p&&p.kind!=="value"&&(c=p);const m=[];for(const b of n.slice(1)){const E=o.parse(b,1+m.length,c,void 0,{typeAnnotation:"omit"});if(!E)return null;c=c||E.type,m.push(E)}const y=p&&m.some(b=>fs(p,b.type));return new Ru(y?mn:c,m)}evaluate(n){let o,c=null,p=0;for(const m of this.args){if(p++,c=m.evaluate(n),c&&c instanceof eo&&!c.available&&(o||(o=c),c=null,p===this.args.length))return o;if(c!==null)break}return c}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){const n=["coalesce"];return this.eachChild(o=>{n.push(o.serialize())}),n}}var pp=Ru;class Ou{constructor(n,o){this.type=o.type,this.bindings=[].concat(n),this.result=o}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const o of this.bindings)n(o[1]);n(this.result)}static parse(n,o){if(n.length<4)return o.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const c=[];for(let m=1;m<n.length-1;m+=2){const y=n[m];if(typeof y!="string")return o.error(`Expected string, but found ${typeof y} instead.`,m);if(/[^a-zA-Z0-9_]/.test(y))return o.error("Variable names must contain only alphanumeric characters or '_'.",m);const b=o.parse(n[m+1],m+1);if(!b)return null;c.push([y,b])}const p=o.parse(n[n.length-1],n.length-1,o.expectedType,c);return p?new Ou(c,p):null}outputDefined(){return this.result.outputDefined()}serialize(){const n=["let"];for(const[o,c]of this.bindings)n.push(o,c.serialize());return n.push(this.result.serialize()),n}}var ng=Ou;class fp{constructor(n,o,c){this.type=n,this.index=o,this.input=c}static parse(n,o){if(n.length!==3)return o.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const c=o.parse(n[1],1,kt),p=o.parse(n[2],2,Qi(o.expectedType||mn));return c&&p?new fp(p.type.itemType,c,p):null}evaluate(n){const o=this.index.evaluate(n),c=this.input.evaluate(n);if(o<0)throw new Jr(`Array index out of bounds: ${o} < 0.`);if(o>=c.length)throw new Jr(`Array index out of bounds: ${o} > ${c.length-1}.`);if(o!==Math.floor(o))throw new Jr(`Array index must be an integer, but found ${o} instead.`);return c[o]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var Dx=fp;class mp{constructor(n,o){this.type=fn,this.needle=n,this.haystack=o}static parse(n,o){if(n.length!==3)return o.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const c=o.parse(n[1],1,mn),p=o.parse(n[2],2,mn);return c&&p?mc(c.type,[fn,_n,kt,el,mn])?new mp(c,p):o.error(`Expected first argument to be of type boolean, string, number or null, but found ${tr(c.type)} instead`):null}evaluate(n){const o=this.needle.evaluate(n),c=this.haystack.evaluate(n);if(c==null)return!1;if(!gc(o,["boolean","string","number","null"]))throw new Jr(`Expected first argument to be of type boolean, string, number or null, but found ${tr(dr(o))} instead.`);if(!gc(c,["string","array"]))throw new Jr(`Expected second argument to be of type array or string, but found ${tr(dr(c))} instead.`);return c.indexOf(o)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var Bu=mp;class Ac{constructor(n,o,c){this.type=kt,this.needle=n,this.haystack=o,this.fromIndex=c}static parse(n,o){if(n.length<=2||n.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const c=o.parse(n[1],1,mn),p=o.parse(n[2],2,mn);if(!c||!p)return null;if(!mc(c.type,[fn,_n,kt,el,mn]))return o.error(`Expected first argument to be of type boolean, string, number or null, but found ${tr(c.type)} instead`);if(n.length===4){const m=o.parse(n[3],3,kt);return m?new Ac(c,p,m):null}return new Ac(c,p)}evaluate(n){const o=this.needle.evaluate(n),c=this.haystack.evaluate(n);if(!gc(o,["boolean","string","number","null"]))throw new Jr(`Expected first argument to be of type boolean, string, number or null, but found ${tr(dr(o))} instead.`);if(!gc(c,["string","array"]))throw new Jr(`Expected second argument to be of type array or string, but found ${tr(dr(c))} instead.`);if(this.fromIndex){const p=this.fromIndex.evaluate(n);return c.indexOf(o,p)}return c.indexOf(o)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const n=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),n]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var rg=Ac;class gp{constructor(n,o,c,p,m,y){this.inputType=n,this.type=o,this.input=c,this.cases=p,this.outputs=m,this.otherwise=y}static parse(n,o){if(n.length<5)return o.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return o.error("Expected an even number of arguments.");let c,p;o.expectedType&&o.expectedType.kind!=="value"&&(p=o.expectedType);const m={},y=[];for(let A=2;A<n.length-1;A+=2){let I=n[A];const N=n[A+1];Array.isArray(I)||(I=[I]);const O=o.concat(A);if(I.length===0)return O.error("Expected at least one branch label.");for(const G of I){if(typeof G!="number"&&typeof G!="string")return O.error("Branch labels must be numbers or strings.");if(typeof G=="number"&&Math.abs(G)>Number.MAX_SAFE_INTEGER)return O.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof G=="number"&&Math.floor(G)!==G)return O.error("Numeric branch labels must be integer values.");if(c){if(O.checkSubtype(c,dr(G)))return null}else c=dr(G);if(m[String(G)]!==void 0)return O.error("Branch labels must be unique.");m[String(G)]=y.length}const j=o.parse(N,A,p);if(!j)return null;p=p||j.type,y.push(j)}const b=o.parse(n[1],1,mn);if(!b)return null;const E=o.parse(n[n.length-1],n.length-1,p);return E?b.type.kind!=="value"&&o.concat(1).checkSubtype(c,b.type)?null:new gp(c,p,b,m,y,E):null}evaluate(n){const o=this.input.evaluate(n);return(dr(o)===this.inputType&&this.outputs[this.cases[o]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}serialize(){const n=["match",this.input.serialize()],o=Object.keys(this.cases).sort(),c=[],p={};for(const y of o){const b=p[this.cases[y]];b===void 0?(p[this.cases[y]]=c.length,c.push([this.cases[y],[y]])):c[b][1].push(y)}const m=y=>this.inputType.kind==="number"?Number(y):y;for(const[y,b]of c)n.push(b.length===1?m(b[0]):b.map(m)),n.push(this.outputs[y].serialize());return n.push(this.otherwise.serialize()),n}}var zx=gp;class yp{constructor(n,o,c){this.type=n,this.branches=o,this.otherwise=c}static parse(n,o){if(n.length<4)return o.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return o.error("Expected an odd number of arguments.");let c;o.expectedType&&o.expectedType.kind!=="value"&&(c=o.expectedType);const p=[];for(let y=1;y<n.length-1;y+=2){const b=o.parse(n[y],y,fn);if(!b)return null;const E=o.parse(n[y+1],y+1,c);if(!E)return null;p.push([b,E]),c=c||E.type}const m=o.parse(n[n.length-1],n.length-1,c);return m?new yp(c,p,m):null}evaluate(n){for(const[o,c]of this.branches)if(o.evaluate(n))return c.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[o,c]of this.branches)n(o),n(c);n(this.otherwise)}outputDefined(){return this.branches.every(([n,o])=>o.outputDefined())&&this.otherwise.outputDefined()}serialize(){const n=["case"];return this.eachChild(o=>{n.push(o.serialize())}),n}}var ig=yp;class Mc{constructor(n,o,c,p){this.type=n,this.input=o,this.beginIndex=c,this.endIndex=p}static parse(n,o){if(n.length<=2||n.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const c=o.parse(n[1],1,mn),p=o.parse(n[2],2,kt);if(!c||!p)return null;if(!mc(c.type,[Qi(mn),_n,mn]))return o.error(`Expected first argument to be of type array or string, but found ${tr(c.type)} instead`);if(n.length===4){const m=o.parse(n[3],3,kt);return m?new Mc(c.type,c,p,m):null}return new Mc(c.type,c,p)}evaluate(n){const o=this.input.evaluate(n),c=this.beginIndex.evaluate(n);if(!gc(o,["string","array"]))throw new Jr(`Expected first argument to be of type array or string, but found ${tr(dr(o))} instead.`);if(this.endIndex){const p=this.endIndex.evaluate(n);return o.slice(c,p)}return o.slice(c)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const n=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),n]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var og=Mc;function $u(i,n){return i==="=="||i==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function sg(i,n,o,c){return c.compare(n,o)===0}function ll(i,n,o){const c=i!=="=="&&i!=="!=";return class c6{constructor(m,y,b){this.type=fn,this.lhs=m,this.rhs=y,this.collator=b,this.hasUntypedArgument=m.type.kind==="value"||y.type.kind==="value"}static parse(m,y){if(m.length!==3&&m.length!==4)return y.error("Expected two or three arguments.");const b=m[0];let E=y.parse(m[1],1,mn);if(!E)return null;if(!$u(b,E.type))return y.concat(1).error(`"${b}" comparisons are not supported for type '${tr(E.type)}'.`);let A=y.parse(m[2],2,mn);if(!A)return null;if(!$u(b,A.type))return y.concat(2).error(`"${b}" comparisons are not supported for type '${tr(A.type)}'.`);if(E.type.kind!==A.type.kind&&E.type.kind!=="value"&&A.type.kind!=="value")return y.error(`Cannot compare types '${tr(E.type)}' and '${tr(A.type)}'.`);c&&(E.type.kind==="value"&&A.type.kind!=="value"?E=new ms(A.type,[E]):E.type.kind!=="value"&&A.type.kind==="value"&&(A=new ms(E.type,[A])));let I=null;if(m.length===4){if(E.type.kind!=="string"&&A.type.kind!=="string"&&E.type.kind!=="value"&&A.type.kind!=="value")return y.error("Cannot use collator to compare non-string types.");if(I=y.parse(m[3],3,$i),!I)return null}return new c6(E,A,I)}evaluate(m){const y=this.lhs.evaluate(m),b=this.rhs.evaluate(m);if(c&&this.hasUntypedArgument){const E=dr(y),A=dr(b);if(E.kind!==A.kind||E.kind!=="string"&&E.kind!=="number")throw new Jr(`Expected arguments for "${i}" to be (string, string) or (number, number), but found (${E.kind}, ${A.kind}) instead.`)}if(this.collator&&!c&&this.hasUntypedArgument){const E=dr(y),A=dr(b);if(E.kind!=="string"||A.kind!=="string")return n(m,y,b)}return this.collator?o(m,y,b,this.collator.evaluate(m)):n(m,y,b)}eachChild(m){m(this.lhs),m(this.rhs),this.collator&&m(this.collator)}outputDefined(){return!0}serialize(){const m=[i];return this.eachChild(y=>{m.push(y.serialize())}),m}}}const Nx=ll("==",function(i,n,o){return n===o},sg),Lx=ll("!=",function(i,n,o){return n!==o},function(i,n,o,c){return!sg(0,n,o,c)}),Fx=ll("<",function(i,n,o){return n<o},function(i,n,o,c){return c.compare(n,o)<0}),Rx=ll(">",function(i,n,o){return n>o},function(i,n,o,c){return c.compare(n,o)>0}),Ox=ll("<=",function(i,n,o){return n<=o},function(i,n,o,c){return c.compare(n,o)<=0}),ag=ll(">=",function(i,n,o){return n>=o},function(i,n,o,c){return c.compare(n,o)>=0});class ju{constructor(n,o,c,p,m,y){this.type=_n,this.number=n,this.locale=o,this.currency=c,this.unit=p,this.minFractionDigits=m,this.maxFractionDigits=y}static parse(n,o){if(n.length!==3)return o.error("Expected two arguments.");const c=o.parse(n[1],1,kt);if(!c)return null;const p=n[2];if(typeof p!="object"||Array.isArray(p))return o.error("NumberFormat options argument must be an object.");let m=null;if(p.locale&&(m=o.parse(p.locale,1,_n),!m))return null;let y=null;if(p.currency&&(y=o.parse(p.currency,1,_n),!y))return null;let b=null;if(p.unit&&(b=o.parse(p.unit,1,_n),!b))return null;let E=null;if(p["min-fraction-digits"]&&(E=o.parse(p["min-fraction-digits"],1,kt),!E))return null;let A=null;return p["max-fraction-digits"]&&(A=o.parse(p["max-fraction-digits"],1,kt),!A)?null:new ju(c,m,y,b,E,A)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(n):void 0,unit:this.unit?this.unit.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.unit&&n(this.unit),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const n={};return this.locale&&(n.locale=this.locale.serialize()),this.currency&&(n.currency=this.currency.serialize()),this.unit&&(n.unit=this.unit.serialize()),this.minFractionDigits&&(n["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(n["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),n]}}class cl{constructor(n){this.type=kt,this.input=n}static parse(n,o){if(n.length!==2)return o.error(`Expected 1 argument, but found ${n.length-1} instead.`);const c=o.parse(n[1],1);return c?c.type.kind!=="array"&&c.type.kind!=="string"&&c.type.kind!=="value"?o.error(`Expected argument of type string or array, but found ${tr(c.type)} instead.`):new cl(c):null}evaluate(n){const o=this.input.evaluate(n);if(typeof o=="string"||Array.isArray(o))return o.length;throw new Jr(`Expected value to be of type string or array, but found ${tr(dr(o))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}serialize(){const n=["length"];return this.eachChild(o=>{n.push(o.serialize())}),n}}const lg={"==":Nx,"!=":Lx,">":Rx,"<":Fx,">=":ag,"<=":Ox,array:ms,at:Dx,boolean:ms,case:ig,coalesce:pp,collator:bc,format:Hs,image:ku,in:Bu,"index-of":rg,interpolate:Wo,"interpolate-hcl":Wo,"interpolate-lab":Wo,length:cl,let:ng,literal:ya,match:zx,number:ms,"number-format":ju,object:ms,slice:og,step:op,string:ms,"to-boolean":nl,"to-color":nl,"to-number":nl,"to-string":nl,var:Ym,within:Du};function cg(i,[n,o,c,p]){n=n.evaluate(i),o=o.evaluate(i),c=c.evaluate(i);const m=p?p.evaluate(i):1,y=Wm(n,o,c,m);if(y)throw new Jr(y);return new xr(n/255*m,o/255*m,c/255*m,m)}function _s(i,n){return i in n}function Uu(i,n){const o=n[i];return o===void 0?null:o}function to(i){return{type:i}}gs.register(lg,{error:[{kind:"error"},[_n],(i,[n])=>{throw new Jr(n.evaluate(i))}],typeof:[_n,[mn],(i,[n])=>tr(dr(n.evaluate(i)))],"to-rgba":[Qi(kt,4),[Bi],(i,[n])=>n.evaluate(i).toArray()],rgb:[Bi,[kt,kt,kt],cg],rgba:[Bi,[kt,kt,kt,kt],cg],has:{type:fn,overloads:[[[_n],(i,[n])=>_s(n.evaluate(i),i.properties())],[[_n,_o],(i,[n,o])=>_s(n.evaluate(i),o.evaluate(i))]]},get:{type:mn,overloads:[[[_n],(i,[n])=>Uu(n.evaluate(i),i.properties())],[[_n,_o],(i,[n,o])=>Uu(n.evaluate(i),o.evaluate(i))]]},"feature-state":[mn,[_n],(i,[n])=>Uu(n.evaluate(i),i.featureState||{})],properties:[_o,[],i=>i.properties()],"geometry-type":[_n,[],i=>i.geometryType()],id:[mn,[],i=>i.id()],zoom:[kt,[],i=>i.globals.zoom],pitch:[kt,[],i=>i.globals.pitch||0],"distance-from-center":[kt,[],i=>i.distanceFromCenter()],"heatmap-density":[kt,[],i=>i.globals.heatmapDensity||0],"line-progress":[kt,[],i=>i.globals.lineProgress||0],"sky-radial-progress":[kt,[],i=>i.globals.skyRadialProgress||0],accumulated:[mn,[],i=>i.globals.accumulated===void 0?null:i.globals.accumulated],"+":[kt,to(kt),(i,n)=>{let o=0;for(const c of n)o+=c.evaluate(i);return o}],"*":[kt,to(kt),(i,n)=>{let o=1;for(const c of n)o*=c.evaluate(i);return o}],"-":{type:kt,overloads:[[[kt,kt],(i,[n,o])=>n.evaluate(i)-o.evaluate(i)],[[kt],(i,[n])=>-n.evaluate(i)]]},"/":[kt,[kt,kt],(i,[n,o])=>n.evaluate(i)/o.evaluate(i)],"%":[kt,[kt,kt],(i,[n,o])=>n.evaluate(i)%o.evaluate(i)],ln2:[kt,[],()=>Math.LN2],pi:[kt,[],()=>Math.PI],e:[kt,[],()=>Math.E],"^":[kt,[kt,kt],(i,[n,o])=>Math.pow(n.evaluate(i),o.evaluate(i))],sqrt:[kt,[kt],(i,[n])=>Math.sqrt(n.evaluate(i))],log10:[kt,[kt],(i,[n])=>Math.log(n.evaluate(i))/Math.LN10],ln:[kt,[kt],(i,[n])=>Math.log(n.evaluate(i))],log2:[kt,[kt],(i,[n])=>Math.log(n.evaluate(i))/Math.LN2],sin:[kt,[kt],(i,[n])=>Math.sin(n.evaluate(i))],cos:[kt,[kt],(i,[n])=>Math.cos(n.evaluate(i))],tan:[kt,[kt],(i,[n])=>Math.tan(n.evaluate(i))],asin:[kt,[kt],(i,[n])=>Math.asin(n.evaluate(i))],acos:[kt,[kt],(i,[n])=>Math.acos(n.evaluate(i))],atan:[kt,[kt],(i,[n])=>Math.atan(n.evaluate(i))],min:[kt,to(kt),(i,n)=>Math.min(...n.map(o=>o.evaluate(i)))],max:[kt,to(kt),(i,n)=>Math.max(...n.map(o=>o.evaluate(i)))],abs:[kt,[kt],(i,[n])=>Math.abs(n.evaluate(i))],round:[kt,[kt],(i,[n])=>{const o=n.evaluate(i);return o<0?-Math.round(-o):Math.round(o)}],floor:[kt,[kt],(i,[n])=>Math.floor(n.evaluate(i))],ceil:[kt,[kt],(i,[n])=>Math.ceil(n.evaluate(i))],"filter-==":[fn,[_n,mn],(i,[n,o])=>i.properties()[n.value]===o.value],"filter-id-==":[fn,[mn],(i,[n])=>i.id()===n.value],"filter-type-==":[fn,[_n],(i,[n])=>i.geometryType()===n.value],"filter-<":[fn,[_n,mn],(i,[n,o])=>{const c=i.properties()[n.value],p=o.value;return typeof c==typeof p&&c<p}],"filter-id-<":[fn,[mn],(i,[n])=>{const o=i.id(),c=n.value;return typeof o==typeof c&&o<c}],"filter->":[fn,[_n,mn],(i,[n,o])=>{const c=i.properties()[n.value],p=o.value;return typeof c==typeof p&&c>p}],"filter-id->":[fn,[mn],(i,[n])=>{const o=i.id(),c=n.value;return typeof o==typeof c&&o>c}],"filter-<=":[fn,[_n,mn],(i,[n,o])=>{const c=i.properties()[n.value],p=o.value;return typeof c==typeof p&&c<=p}],"filter-id-<=":[fn,[mn],(i,[n])=>{const o=i.id(),c=n.value;return typeof o==typeof c&&o<=c}],"filter->=":[fn,[_n,mn],(i,[n,o])=>{const c=i.properties()[n.value],p=o.value;return typeof c==typeof p&&c>=p}],"filter-id->=":[fn,[mn],(i,[n])=>{const o=i.id(),c=n.value;return typeof o==typeof c&&o>=c}],"filter-has":[fn,[mn],(i,[n])=>n.value in i.properties()],"filter-has-id":[fn,[],i=>i.id()!==null&&i.id()!==void 0],"filter-type-in":[fn,[Qi(_n)],(i,[n])=>n.value.indexOf(i.geometryType())>=0],"filter-id-in":[fn,[Qi(mn)],(i,[n])=>n.value.indexOf(i.id())>=0],"filter-in-small":[fn,[_n,Qi(mn)],(i,[n,o])=>o.value.indexOf(i.properties()[n.value])>=0],"filter-in-large":[fn,[_n,Qi(mn)],(i,[n,o])=>function(c,p,m,y){for(;m<=y;){const b=m+y>>1;if(p[b]===c)return!0;p[b]>c?y=b-1:m=b+1}return!1}(i.properties()[n.value],o.value,0,o.value.length-1)],all:{type:fn,overloads:[[[fn,fn],(i,[n,o])=>n.evaluate(i)&&o.evaluate(i)],[to(fn),(i,n)=>{for(const o of n)if(!o.evaluate(i))return!1;return!0}]]},any:{type:fn,overloads:[[[fn,fn],(i,[n,o])=>n.evaluate(i)||o.evaluate(i)],[to(fn),(i,n)=>{for(const o of n)if(o.evaluate(i))return!0;return!1}]]},"!":[fn,[fn],(i,[n])=>!n.evaluate(i)],"is-supported-script":[fn,[_n],(i,[n])=>{const o=i.globals&&i.globals.isSupportedScript;return!o||o(n.evaluate(i))}],upcase:[_n,[_n],(i,[n])=>n.evaluate(i).toUpperCase()],downcase:[_n,[_n],(i,[n])=>n.evaluate(i).toLowerCase()],concat:[_n,to(mn),(i,n)=>n.map(o=>vc(o.evaluate(i))).join("")],"resolved-locale":[_n,[$i],(i,[n])=>n.evaluate(i).resolvedLocale()]});var kc=lg;function ug(i){return{result:"success",value:i}}function ba(i){return{result:"error",value:i}}function ul(i){return i["property-type"]==="data-driven"}function Vu(i){return!!i.expression&&i.expression.parameters.indexOf("zoom")>-1}function Gu(i){return!!i.expression&&i.expression.interpolated}function Tn(i){return i instanceof Number?"number":i instanceof String?"string":i instanceof Boolean?"boolean":Array.isArray(i)?"array":i===null?"null":typeof i}function Pc(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)}function hg(i){return i}function qu(i,n){const o=n.type==="color",c=i.stops&&typeof i.stops[0][0]=="object",p=c||!(c||i.property!==void 0),m=i.type||(Gu(n)?"exponential":"interval");if(o&&((i=ps({},i)).stops&&(i.stops=i.stops.map(A=>[A[0],xr.parse(A[1])])),i.default=xr.parse(i.default?i.default:n.default)),i.colorSpace&&i.colorSpace!=="rgb"&&!hp[i.colorSpace])throw new Error(`Unknown color space: ${i.colorSpace}`);let y,b,E;if(m==="exponential")y=vs;else if(m==="interval")y=Hu;else if(m==="categorical"){y=dg,b=Object.create(null);for(const A of i.stops)b[A[0]]=A[1];E=typeof i.stops[0][0]}else{if(m!=="identity")throw new Error(`Unknown function type "${m}"`);y=pg}if(c){const A={},I=[];for(let j=0;j<i.stops.length;j++){const G=i.stops[j],X=G[0].zoom;A[X]===void 0&&(A[X]={zoom:X,type:i.type,property:i.property,default:i.default,stops:[]},I.push(X)),A[X].stops.push([G[0].value,G[1]])}const N=[];for(const j of I)N.push([A[j].zoom,qu(A[j],n)]);const O={name:"linear"};return{kind:"composite",interpolationType:O,interpolationFactor:Wo.interpolationFactor.bind(void 0,O),zoomStops:N.map(j=>j[0]),evaluate:({zoom:j},G)=>vs({stops:N,base:i.base},n,j).evaluate(j,G)}}if(p){const A=m==="exponential"?{name:"exponential",base:i.base!==void 0?i.base:1}:null;return{kind:"camera",interpolationType:A,interpolationFactor:Wo.interpolationFactor.bind(void 0,A),zoomStops:i.stops.map(I=>I[0]),evaluate:({zoom:I})=>y(i,n,I,b,E)}}return{kind:"source",evaluate(A,I){const N=I&&I.properties?I.properties[i.property]:void 0;return N===void 0?hl(i.default,n.default):y(i,n,N,b,E)}}}function hl(i,n,o){return i!==void 0?i:n!==void 0?n:o!==void 0?o:void 0}function dg(i,n,o,c,p){return hl(typeof o===p?c[o]:void 0,i.default,n.default)}function Hu(i,n,o){if(Tn(o)!=="number")return hl(i.default,n.default);const c=i.stops.length;if(c===1||o<=i.stops[0][0])return i.stops[0][1];if(o>=i.stops[c-1][0])return i.stops[c-1][1];const p=Nu(i.stops.map(m=>m[0]),o);return i.stops[p][1]}function vs(i,n,o){const c=i.base!==void 0?i.base:1;if(Tn(o)!=="number")return hl(i.default,n.default);const p=i.stops.length;if(p===1||o<=i.stops[0][0])return i.stops[0][1];if(o>=i.stops[p-1][0])return i.stops[p-1][1];const m=Nu(i.stops.map(I=>I[0]),o),y=function(I,N,O,j){const G=j-O,X=I-O;return G===0?0:N===1?X/G:(Math.pow(N,X)-1)/(Math.pow(N,G)-1)}(o,c,i.stops[m][0],i.stops[m+1][0]),b=i.stops[m][1],E=i.stops[m+1][1];let A=Tc[n.type]||hg;if(i.colorSpace&&i.colorSpace!=="rgb"){const I=hp[i.colorSpace];A=(N,O)=>I.reverse(I.interpolate(I.forward(N),I.forward(O),y))}return typeof b.evaluate=="function"?{evaluate(...I){const N=b.evaluate.apply(void 0,I),O=E.evaluate.apply(void 0,I);if(N!==void 0&&O!==void 0)return A(N,O,y)}}:A(b,E,y)}function pg(i,n,o){return n.type==="color"?o=xr.parse(o):n.type==="formatted"?o=Ci.fromString(o.toString()):n.type==="resolvedImage"?o=eo.fromString(o.toString()):Tn(o)===n.type||n.type==="enum"&&n.values[o]||(o=void 0),hl(o,i.default,n.default)}class Wu{constructor(n,o){this.expression=n,this._warningHistory={},this._evaluator=new Yd,this._defaultValue=o?function(c){return c.type==="color"&&(Pc(c.default)||Array.isArray(c.default))?new xr(0,0,0,0):c.type==="color"?xr.parse(c.default)||null:c.default===void 0?null:c.default}(o):null,this._enumValues=o&&o.type==="enum"?o.values:null}evaluateWithoutErrorHandling(n,o,c,p,m,y,b,E){return this._evaluator.globals=n,this._evaluator.feature=o,this._evaluator.featureState=c,this._evaluator.canonical=p||null,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=y,this._evaluator.featureTileCoord=b||null,this._evaluator.featureDistanceData=E||null,this.expression.evaluate(this._evaluator)}evaluate(n,o,c,p,m,y,b,E){this._evaluator.globals=n,this._evaluator.feature=o||null,this._evaluator.featureState=c||null,this._evaluator.canonical=p||null,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=y||null,this._evaluator.featureTileCoord=b||null,this._evaluator.featureDistanceData=E||null;try{const A=this.expression.evaluate(this._evaluator);if(A==null||typeof A=="number"&&A!=A)return this._defaultValue;if(this._enumValues&&!(A in this._enumValues))throw new Jr(`Expected value to be one of ${Object.keys(this._enumValues).map(I=>JSON.stringify(I)).join(", ")}, but found ${JSON.stringify(A)} instead.`);return A}catch(A){return this._warningHistory[A.message]||(this._warningHistory[A.message]=!0,typeof console!="undefined"&&console.warn(A.message)),this._defaultValue}}}function dl(i){return Array.isArray(i)&&i.length>0&&typeof i[0]=="string"&&i[0]in kc}function pl(i,n){const o=new rp(kc,[],n?function(p){const m={color:Bi,string:_n,number:kt,enum:_n,boolean:fn,formatted:fc,resolvedImage:ga};return p.type==="array"?Qi(m[p.value]||mn,p.length):m[p.type]}(n):void 0),c=o.parse(i,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return c?ug(new Wu(c,n)):ba(o.errors)}class xp{constructor(n,o){this.kind=n,this._styleExpression=o,this.isStateDependent=n!=="constant"&&!xs(o.expression)}evaluateWithoutErrorHandling(n,o,c,p,m,y){return this._styleExpression.evaluateWithoutErrorHandling(n,o,c,p,m,y)}evaluate(n,o,c,p,m,y){return this._styleExpression.evaluate(n,o,c,p,m,y)}}class Ic{constructor(n,o,c,p){this.kind=n,this.zoomStops=c,this._styleExpression=o,this.isStateDependent=n!=="camera"&&!xs(o.expression),this.interpolationType=p}evaluateWithoutErrorHandling(n,o,c,p,m,y){return this._styleExpression.evaluateWithoutErrorHandling(n,o,c,p,m,y)}evaluate(n,o,c,p,m,y){return this._styleExpression.evaluate(n,o,c,p,m,y)}interpolationFactor(n,o,c){return this.interpolationType?Wo.interpolationFactor(this.interpolationType,n,o,c):0}}function Dc(i,n){if((i=pl(i,n)).result==="error")return i;const o=i.value.expression,c=sl(o);if(!c&&!ul(n))return ba([new qo("","data expressions not supported")]);const p=_a(o,["zoom","pitch","distance-from-center"]);if(!p&&!Vu(n))return ba([new qo("","zoom expressions not supported")]);const m=Xu(o);return m||p?m instanceof qo?ba([m]):m instanceof Wo&&!Gu(n)?ba([new qo("",'"interpolate" expressions cannot be used with this property')]):ug(m?new Ic(c?"camera":"composite",i.value,m.labels,m instanceof Wo?m.interpolation:void 0):new xp(c?"constant":"source",i.value)):ba([new qo("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Zu{constructor(n,o){this._parameters=n,this._specification=o,ps(this,qu(this._parameters,this._specification))}static deserialize(n){return new Zu(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function Xu(i){let n=null;if(i instanceof ng)n=Xu(i.result);else if(i instanceof pp){for(const o of i.args)if(n=Xu(o),n)break}else(i instanceof op||i instanceof Wo)&&i.input instanceof gs&&i.input.name==="zoom"&&(n=i);return n instanceof qo||i.eachChild(o=>{const c=Xu(o);c instanceof qo?n=c:!n&&c?n=new qo("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&c&&n!==c&&(n=new qo("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}class Pt{constructor(n,o,c,p){this.message=(n?`${n}: `:"")+c,p&&(this.identifier=p),o!=null&&o.__line__&&(this.line=o.__line__)}}function vo(i){const n=i.key,o=i.value,c=i.valueSpec||{},p=i.objectElementValidators||{},m=i.style,y=i.styleSpec;let b=[];const E=Tn(o);if(E!=="object")return[new Pt(n,o,`object expected, ${E} found`)];for(const A in o){const I=A.split(".")[0];let N;p[I]?N=p[I]:c[I]?N=oi:p["*"]?N=p["*"]:c["*"]&&(N=oi),N?b=b.concat(N({key:(n&&`${n}.`)+A,value:o[A],valueSpec:c[I]||c["*"],style:m,styleSpec:y,object:o,objectKey:A},o)):b.push(new Pt(n,o[A],`unknown property "${A}"`))}for(const A in c)p[A]||c[A].required&&c[A].default===void 0&&o[A]===void 0&&b.push(new Pt(n,o,`missing required property "${A}"`));return b}function fg(i){const n=i.value,o=i.valueSpec,c=i.style,p=i.styleSpec,m=i.key,y=i.arrayElementValidator||oi;if(Tn(n)!=="array")return[new Pt(m,n,`array expected, ${Tn(n)} found`)];if(o.length&&n.length!==o.length)return[new Pt(m,n,`array length ${o.length} expected, length ${n.length} found`)];if(o["min-length"]&&n.length<o["min-length"])return[new Pt(m,n,`array length at least ${o["min-length"]} expected, length ${n.length} found`)];let b={type:o.value,values:o.values,minimum:o.minimum,maximum:o.maximum,function:void 0};p.$version<7&&(b.function=o.function),Tn(o.value)==="object"&&(b=o.value);let E=[];for(let A=0;A<n.length;A++)E=E.concat(y({array:n,arrayIndex:A,value:n[A],valueSpec:b,style:c,styleSpec:p,key:`${m}[${A}]`}));return E}function zc(i){const n=i.key,o=i.value,c=i.valueSpec;let p=Tn(o);if(p==="number"&&o!=o&&(p="NaN"),p!=="number")return[new Pt(n,o,`number expected, ${p} found`)];if("minimum"in c){let m=c.minimum;if(Tn(c.minimum)==="array"&&(m=c.minimum[i.arrayIndex]),o<m)return[new Pt(n,o,`${o} is less than the minimum value ${m}`)]}if("maximum"in c){let m=c.maximum;if(Tn(c.maximum)==="array"&&(m=c.maximum[i.arrayIndex]),o>m)return[new Pt(n,o,`${o} is greater than the maximum value ${m}`)]}return[]}function Nc(i){const n=i.valueSpec,o=Tr(i.value.type);let c,p,m,y={};const b=o!=="categorical"&&i.value.property===void 0,E=!b,A=Tn(i.value.stops)==="array"&&Tn(i.value.stops[0])==="array"&&Tn(i.value.stops[0][0])==="object",I=vo({key:i.key,value:i.value,valueSpec:i.styleSpec.function,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{stops:function(j){if(o==="identity")return[new Pt(j.key,j.value,'identity function may not have a "stops" property')];let G=[];const X=j.value;return G=G.concat(fg({key:j.key,value:X,valueSpec:j.valueSpec,style:j.style,styleSpec:j.styleSpec,arrayElementValidator:N})),Tn(X)==="array"&&X.length===0&&G.push(new Pt(j.key,X,"array must have at least one stop")),G},default:function(j){return oi({key:j.key,value:j.value,valueSpec:n,style:j.style,styleSpec:j.styleSpec})}}});return o==="identity"&&b&&I.push(new Pt(i.key,i.value,'missing required property "property"')),o==="identity"||i.value.stops||I.push(new Pt(i.key,i.value,'missing required property "stops"')),o==="exponential"&&i.valueSpec.expression&&!Gu(i.valueSpec)&&I.push(new Pt(i.key,i.value,"exponential functions not supported")),i.styleSpec.$version>=8&&(E&&!ul(i.valueSpec)?I.push(new Pt(i.key,i.value,"property functions not supported")):b&&!Vu(i.valueSpec)&&I.push(new Pt(i.key,i.value,"zoom functions not supported"))),o!=="categorical"&&!A||i.value.property!==void 0||I.push(new Pt(i.key,i.value,'"property" property is required')),I;function N(j){let G=[];const X=j.value,te=j.key;if(Tn(X)!=="array")return[new Pt(te,X,`array expected, ${Tn(X)} found`)];if(X.length!==2)return[new Pt(te,X,`array length 2 expected, length ${X.length} found`)];if(A){if(Tn(X[0])!=="object")return[new Pt(te,X,`object expected, ${Tn(X[0])} found`)];if(X[0].zoom===void 0)return[new Pt(te,X,"object stop key must have zoom")];if(X[0].value===void 0)return[new Pt(te,X,"object stop key must have value")];const ue=Tr(X[0].zoom);if(typeof ue!="number")return[new Pt(te,X[0].zoom,"stop zoom values must be numbers")];if(m&&m>ue)return[new Pt(te,X[0].zoom,"stop zoom values must appear in ascending order")];ue!==m&&(m=ue,p=void 0,y={}),G=G.concat(vo({key:`${te}[0]`,value:X[0],valueSpec:{zoom:{}},style:j.style,styleSpec:j.styleSpec,objectElementValidators:{zoom:zc,value:O}}))}else G=G.concat(O({key:`${te}[0]`,value:X[0],valueSpec:{},style:j.style,styleSpec:j.styleSpec},X));return dl(qr(X[1]))?G.concat([new Pt(`${te}[1]`,X[1],"expressions are not allowed in function stops.")]):G.concat(oi({key:`${te}[1]`,value:X[1],valueSpec:n,style:j.style,styleSpec:j.styleSpec}))}function O(j,G){const X=Tn(j.value),te=Tr(j.value),ue=j.value!==null?j.value:G;if(c){if(X!==c)return[new Pt(j.key,ue,`${X} stop domain type must match previous stop domain type ${c}`)]}else c=X;if(X!=="number"&&X!=="string"&&X!=="boolean"&&typeof te!="number"&&typeof te!="string"&&typeof te!="boolean")return[new Pt(j.key,ue,"stop domain value must be a number, string, or boolean")];if(X!=="number"&&o!=="categorical"){let xe=`number expected, ${X} found`;return ul(n)&&o===void 0&&(xe+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Pt(j.key,ue,xe)]}return o!=="categorical"||X!=="number"||typeof te=="number"&&isFinite(te)&&Math.floor(te)===te?o!=="categorical"&&X==="number"&&typeof te=="number"&&typeof p=="number"&&p!==void 0&&te<p?[new Pt(j.key,ue,"stop domain values must appear in ascending order")]:(p=te,o==="categorical"&&te in y?[new Pt(j.key,ue,"stop domain values must be unique")]:(y[te]=!0,[])):[new Pt(j.key,ue,`integer expected, found ${String(te)}`)]}}function Hr(i){const n=(i.expressionContext==="property"?Dc:pl)(qr(i.value),i.valueSpec);if(n.result==="error")return n.value.map(c=>new Pt(`${i.key}${c.key}`,i.value,c.message));const o=n.value.expression||n.value._styleExpression.expression;if(i.expressionContext==="property"&&i.propertyKey==="text-font"&&!o.outputDefined())return[new Pt(i.key,i.value,`Invalid data expression for "${i.propertyKey}". Output values must be contained as literals within the expression.`)];if(i.expressionContext==="property"&&i.propertyType==="layout"&&!xs(o))return[new Pt(i.key,i.value,'"feature-state" data expressions are not supported with layout properties.')];if(i.expressionContext==="filter")return Lc(o,i);if(i.expressionContext&&i.expressionContext.indexOf("cluster")===0){if(!_a(o,["zoom","feature-state"]))return[new Pt(i.key,i.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(i.expressionContext==="cluster-initial"&&!sl(o))return[new Pt(i.key,i.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Lc(i,n){const o=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(n.valueSpec&&n.valueSpec.expression)for(const p of n.valueSpec.expression.parameters)o.delete(p);if(o.size===0)return[];const c=[];return i instanceof gs&&o.has(i.name)?[new Pt(n.key,n.value,`["${i.name}"] expression is not supported in a filter for a ${n.object.type} layer with id: ${n.object.id}`)]:(i.eachChild(p=>{c.push(...Lc(p,n))}),c)}function Ku(i){const n=i.key,o=i.value,c=i.valueSpec,p=[];return Array.isArray(c.values)?c.values.indexOf(Tr(o))===-1&&p.push(new Pt(n,o,`expected one of [${c.values.join(", ")}], ${JSON.stringify(o)} found`)):Object.keys(c.values).indexOf(Tr(o))===-1&&p.push(new Pt(n,o,`expected one of [${Object.keys(c.values).join(", ")}], ${JSON.stringify(o)} found`)),p}function _p(i){if(i===!0||i===!1)return!0;if(!Array.isArray(i)||i.length===0)return!1;switch(i[0]){case"has":return i.length>=2&&i[1]!=="$id"&&i[1]!=="$type";case"in":return i.length>=3&&(typeof i[1]!="string"||Array.isArray(i[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return i.length!==3||Array.isArray(i[1])||Array.isArray(i[2]);case"any":case"all":for(const n of i.slice(1))if(!_p(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}function Yu(i,n="fill"){if(i==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};_p(i)||(i=ml(i));const o=i;let c=!0;try{c=function(A){if(!fl(A))return A;let I=qr(A);return Ju(I),I=mg(I),I}(o)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(o,null,2)}
        `)}const p=Qe[`filter_${n}`],m=pl(c,p);let y=null;if(m.result==="error")throw new Error(m.value.map(A=>`${A.key}: ${A.message}`).join(", "));y=(A,I,N)=>m.value.evaluate(A,I,{},N);let b=null,E=null;if(c!==o){const A=pl(o,p);if(A.result==="error")throw new Error(A.value.map(I=>`${I.key}: ${I.message}`).join(", "));b=(I,N,O,j,G)=>A.value.evaluate(I,N,{},O,void 0,void 0,j,G),E=!sl(A.value.expression)}return{filter:y,dynamicFilter:b||void 0,needGeometry:gg(c),needFeature:!!E}}function mg(i){if(!Array.isArray(i))return i;const n=function(o){if(vp.has(o[0])){for(let c=1;c<o.length;c++)if(fl(o[c]))return!0}return o}(i);return n===!0?n:n.map(o=>mg(o))}function Ju(i){let n=!1;const o=[];if(i[0]==="case"){for(let c=1;c<i.length-1;c+=2)n=n||fl(i[c]),o.push(i[c+1]);o.push(i[i.length-1])}else if(i[0]==="match"){n=n||fl(i[1]);for(let c=2;c<i.length-1;c+=2)o.push(i[c+1]);o.push(i[i.length-1])}else if(i[0]==="step"){n=n||fl(i[1]);for(let c=1;c<i.length-1;c+=2)o.push(i[c+1])}n&&(i.length=0,i.push("any",...o));for(let c=1;c<i.length;c++)Ju(i[c])}function fl(i){if(!Array.isArray(i))return!1;if((n=i[0])==="pitch"||n==="distance-from-center")return!0;var n;for(let o=1;o<i.length;o++)if(fl(i[o]))return!0;return!1}const vp=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Bx(i,n){return i<n?-1:i>n?1:0}function gg(i){if(!Array.isArray(i))return!1;if(i[0]==="within")return!0;for(let n=1;n<i.length;n++)if(gg(i[n]))return!0;return!1}function ml(i){if(!i)return!0;const n=i[0];return i.length<=1?n!=="any":n==="=="?bp(i[1],i[2],"=="):n==="!="?Qu(bp(i[1],i[2],"==")):n==="<"||n===">"||n==="<="||n===">="?bp(i[1],i[2],n):n==="any"?(o=i.slice(1),["any"].concat(o.map(ml))):n==="all"?["all"].concat(i.slice(1).map(ml)):n==="none"?["all"].concat(i.slice(1).map(ml).map(Qu)):n==="in"?wp(i[1],i.slice(2)):n==="!in"?Qu(wp(i[1],i.slice(2))):n==="has"?Ep(i[1]):n==="!has"?Qu(Ep(i[1])):n!=="within"||i;var o}function bp(i,n,o){switch(i){case"$type":return[`filter-type-${o}`,n];case"$id":return[`filter-id-${o}`,n];default:return[`filter-${o}`,i,n]}}function wp(i,n){if(n.length===0)return!1;switch(i){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(o=>typeof o!=typeof n[0])?["filter-in-large",i,["literal",n.sort(Bx)]]:["filter-in-small",i,["literal",n]]}}function Ep(i){switch(i){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",i]}}function Qu(i){return["!",i]}function Fc(i){return _p(qr(i.value))?Hr(ps({},i,{expressionContext:"filter",valueSpec:i.styleSpec[`filter_${i.layerType||"fill"}`]})):Rc(i)}function Rc(i){const n=i.value,o=i.key;if(Tn(n)!=="array")return[new Pt(o,n,`array expected, ${Tn(n)} found`)];const c=i.styleSpec;let p,m=[];if(n.length<1)return[new Pt(o,n,"filter array must have at least 1 element")];switch(m=m.concat(Ku({key:`${o}[0]`,value:n[0],valueSpec:c.filter_operator,style:i.style,styleSpec:i.styleSpec})),Tr(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&Tr(n[1])==="$type"&&m.push(new Pt(o,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&m.push(new Pt(o,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(p=Tn(n[1]),p!=="string"&&m.push(new Pt(`${o}[1]`,n[1],`string expected, ${p} found`)));for(let y=2;y<n.length;y++)p=Tn(n[y]),Tr(n[1])==="$type"?m=m.concat(Ku({key:`${o}[${y}]`,value:n[y],valueSpec:c.geometry_type,style:i.style,styleSpec:i.styleSpec})):p!=="string"&&p!=="number"&&p!=="boolean"&&m.push(new Pt(`${o}[${y}]`,n[y],`string, number, or boolean expected, ${p} found`));break;case"any":case"all":case"none":for(let y=1;y<n.length;y++)m=m.concat(Rc({key:`${o}[${y}]`,value:n[y],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":p=Tn(n[1]),n.length!==2?m.push(new Pt(o,n,`filter array for "${n[0]}" operator must have 2 elements`)):p!=="string"&&m.push(new Pt(`${o}[1]`,n[1],`string expected, ${p} found`));break;case"within":p=Tn(n[1]),n.length!==2?m.push(new Pt(o,n,`filter array for "${n[0]}" operator must have 2 elements`)):p!=="object"&&m.push(new Pt(`${o}[1]`,n[1],`object expected, ${p} found`))}return m}function Tp(i,n){const o=i.key,c=i.style,p=i.styleSpec,m=i.value,y=i.objectKey,b=p[`${n}_${i.layerType}`];if(!b)return[];const E=y.match(/^(.*)-transition$/);if(n==="paint"&&E&&b[E[1]]&&b[E[1]].transition)return oi({key:o,value:m,valueSpec:p.transition,style:c,styleSpec:p});const A=i.valueSpec||b[y];if(!A)return[new Pt(o,m,`unknown property "${y}"`)];let I;if(Tn(m)==="string"&&ul(A)&&!A.tokens&&(I=/^{([^}]+)}$/.exec(m))){const O=`\`{ "type": "identity", "property": ${I?JSON.stringify(I[1]):'"_"'} }\``;return[new Pt(o,m,`"${y}" does not support interpolation syntax
Use an identity property function instead: ${O}.`)]}const N=[];return i.layerType==="symbol"&&(y==="text-field"&&c&&!c.glyphs&&N.push(new Pt(o,m,'use of "text-field" requires a style "glyphs" property')),y==="text-font"&&Pc(qr(m))&&Tr(m.type)==="identity"&&N.push(new Pt(o,m,'"text-font" does not support identity functions'))),N.concat(oi({key:i.key,value:m,valueSpec:A,style:c,styleSpec:p,expressionContext:"property",propertyType:n,propertyKey:y}))}function yg(i){return Tp(i,"paint")}function Sp(i){return Tp(i,"layout")}function xg(i){let n=[];const o=i.value,c=i.key,p=i.style,m=i.styleSpec;o.type||o.ref||n.push(new Pt(c,o,'either "type" or "ref" is required'));let y=Tr(o.type);const b=Tr(o.ref);if(o.id){const E=Tr(o.id);for(let A=0;A<i.arrayIndex;A++){const I=p.layers[A];Tr(I.id)===E&&n.push(new Pt(c,o.id,`duplicate layer id "${o.id}", previously used at line ${I.id.__line__}`))}}if("ref"in o){let E;["type","source","source-layer","filter","layout"].forEach(A=>{A in o&&n.push(new Pt(c,o[A],`"${A}" is prohibited for ref layers`))}),p.layers.forEach(A=>{Tr(A.id)===b&&(E=A)}),E?E.ref?n.push(new Pt(c,o.ref,"ref cannot reference another ref layer")):y=Tr(E.type):typeof b=="string"&&n.push(new Pt(c,o.ref,`ref layer "${b}" not found`))}else if(y!=="background"&&y!=="sky")if(o.source){const E=p.sources&&p.sources[o.source],A=E&&Tr(E.type);E?A==="vector"&&y==="raster"?n.push(new Pt(c,o.source,`layer "${o.id}" requires a raster source`)):A==="raster"&&y!=="raster"?n.push(new Pt(c,o.source,`layer "${o.id}" requires a vector source`)):A!=="vector"||o["source-layer"]?A==="raster-dem"&&y!=="hillshade"?n.push(new Pt(c,o.source,"raster-dem source can only be used with layer type 'hillshade'.")):y!=="line"||!o.paint||!o.paint["line-gradient"]&&!o.paint["line-trim-offset"]||A==="geojson"&&E.lineMetrics||n.push(new Pt(c,o,`layer "${o.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new Pt(c,o,`layer "${o.id}" must specify a "source-layer"`)):n.push(new Pt(c,o.source,`source "${o.source}" not found`))}else n.push(new Pt(c,o,'missing required property "source"'));return n=n.concat(vo({key:c,value:o,valueSpec:m.layer,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{"*":()=>[],type:()=>oi({key:`${c}.type`,value:o.type,valueSpec:m.layer.type,style:i.style,styleSpec:i.styleSpec,object:o,objectKey:"type"}),filter:E=>Fc(ps({layerType:y},E)),layout:E=>vo({layer:o,key:E.key,value:E.value,valueSpec:{},style:E.style,styleSpec:E.styleSpec,objectElementValidators:{"*":A=>Sp(ps({layerType:y},A))}}),paint:E=>vo({layer:o,key:E.key,value:E.value,valueSpec:{},style:E.style,styleSpec:E.styleSpec,objectElementValidators:{"*":A=>yg(ps({layerType:y},A))}})}})),n}function Ws(i){const n=i.value,o=i.key,c=Tn(n);return c!=="string"?[new Pt(o,n,`string expected, ${c} found`)]:[]}const _g={promoteId:function({key:i,value:n}){if(Tn(n)==="string")return Ws({key:i,value:n});{const o=[];for(const c in n)o.push(...Ws({key:`${i}.${c}`,value:n[c]}));return o}}};function vg(i){const n=i.value,o=i.key,c=i.styleSpec,p=i.style;if(!n.type)return[new Pt(o,n,'"type" is required')];const m=Tr(n.type);let y;switch(m){case"vector":case"raster":case"raster-dem":return y=vo({key:o,value:n,valueSpec:c[`source_${m.replace("-","_")}`],style:i.style,styleSpec:c,objectElementValidators:_g}),y;case"geojson":if(y=vo({key:o,value:n,valueSpec:c.source_geojson,style:p,styleSpec:c,objectElementValidators:_g}),n.cluster)for(const b in n.clusterProperties){const[E,A]=n.clusterProperties[b],I=typeof E=="string"?[E,["accumulated"],["get",b]]:E;y.push(...Hr({key:`${o}.${b}.map`,value:A,expressionContext:"cluster-map"})),y.push(...Hr({key:`${o}.${b}.reduce`,value:I,expressionContext:"cluster-reduce"}))}return y;case"video":return vo({key:o,value:n,valueSpec:c.source_video,style:p,styleSpec:c});case"image":return vo({key:o,value:n,valueSpec:c.source_image,style:p,styleSpec:c});case"canvas":return[new Pt(o,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ku({key:`${o}.type`,value:n.type,valueSpec:{values:$x(c)},style:p,styleSpec:c})}}function $x(i){return i.source.reduce((n,o)=>{const c=i[o];return c.type.type==="enum"&&(n=n.concat(Object.keys(c.type.values))),n},[])}function bg(i){const n=i.value,o=i.styleSpec,c=o.light,p=i.style;let m=[];const y=Tn(n);if(n===void 0)return m;if(y!=="object")return m=m.concat([new Pt("light",n,`object expected, ${y} found`)]),m;for(const b in n){const E=b.match(/^(.*)-transition$/);m=m.concat(E&&c[E[1]]&&c[E[1]].transition?oi({key:b,value:n[b],valueSpec:o.transition,style:p,styleSpec:o}):c[b]?oi({key:b,value:n[b],valueSpec:c[b],style:p,styleSpec:o}):[new Pt(b,n[b],`unknown property "${b}"`)])}return m}function Cp(i){const n=i.value,o=i.key,c=i.style,p=i.styleSpec,m=p.terrain;let y=[];const b=Tn(n);if(n===void 0)return y;if(b!=="object")return y=y.concat([new Pt("terrain",n,`object expected, ${b} found`)]),y;for(const E in n){const A=E.match(/^(.*)-transition$/);y=y.concat(A&&m[A[1]]&&m[A[1]].transition?oi({key:E,value:n[E],valueSpec:p.transition,style:c,styleSpec:p}):m[E]?oi({key:E,value:n[E],valueSpec:m[E],style:c,styleSpec:p}):[new Pt(E,n[E],`unknown property "${E}"`)])}if(n.source){const E=c.sources&&c.sources[n.source],A=E&&Tr(E.type);E?A!=="raster-dem"&&y.push(new Pt(o,n.source,`terrain cannot be used with a source of type ${String(A)}, it only be used with a "raster-dem" source type`)):y.push(new Pt(o,n.source,`source "${n.source}" not found`))}else y.push(new Pt(o,n,'terrain is missing required property "source"'));return y}function wg(i){const n=i.value,o=i.style,c=i.styleSpec,p=c.fog;let m=[];const y=Tn(n);if(n===void 0)return m;if(y!=="object")return m=m.concat([new Pt("fog",n,`object expected, ${y} found`)]),m;for(const b in n){const E=b.match(/^(.*)-transition$/);m=m.concat(E&&p[E[1]]&&p[E[1]].transition?oi({key:b,value:n[b],valueSpec:c.transition,style:o,styleSpec:c}):p[b]?oi({key:b,value:n[b],valueSpec:p[b],style:o,styleSpec:c}):[new Pt(b,n[b],`unknown property "${b}"`)])}return m}const Eg={"*":()=>[],array:fg,boolean:function(i){const n=i.value,o=i.key,c=Tn(n);return c!=="boolean"?[new Pt(o,n,`boolean expected, ${c} found`)]:[]},number:zc,color:function(i){const n=i.key,o=i.value,c=Tn(o);return c!=="string"?[new Pt(n,o,`color expected, ${c} found`)]:Gd(o)===null?[new Pt(n,o,`color expected, "${o}" found`)]:[]},enum:Ku,filter:Fc,function:Nc,layer:xg,object:vo,source:vg,light:bg,terrain:Cp,fog:wg,string:Ws,formatted:function(i){return Ws(i).length===0?[]:Hr(i)},resolvedImage:function(i){return Ws(i).length===0?[]:Hr(i)},projection:function(i){const n=i.value,o=i.styleSpec,c=o.projection,p=i.style;let m=[];const y=Tn(n);if(y==="object")for(const b in n)m=m.concat(oi({key:b,value:n[b],valueSpec:c[b],style:p,styleSpec:o}));else y!=="string"&&(m=m.concat([new Pt("projection",n,`object or string expected, ${y} found`)]));return m}};function oi(i){const n=i.value,o=i.valueSpec,c=i.styleSpec;return o.expression&&Pc(Tr(n))?Nc(i):o.expression&&dl(qr(n))?Hr(i):o.type&&Eg[o.type]?Eg[o.type](i):vo(ps({},i,{valueSpec:o.type?c[o.type]:o}))}function jx(i){const n=i.value,o=i.key,c=Ws(i);return c.length||(n.indexOf("{fontstack}")===-1&&c.push(new Pt(o,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&c.push(new Pt(o,n,'"glyphs" url must include a "{range}" token'))),c}function Tg(i,n=Qe){return no(oi({key:"",value:i,valueSpec:n.$root,styleSpec:n,style:i,objectElementValidators:{glyphs:jx,"*":()=>[]}}))}const Ux=i=>no(yg(i)),Vx=i=>no(Sp(i));function no(i){return i.slice().sort((n,o)=>n.line&&o.line?n.line-o.line:0)}function Sg(i,n){let o=!1;if(n&&n.length)for(const c of n)i.fire(new ds(new Error(c.message))),o=!0;return o}var Gx=Zo,bo=3;function Zo(i,n,o){var c=this.cells=[];if(i instanceof ArrayBuffer){this.arrayBuffer=i;var p=new Int32Array(this.arrayBuffer);i=p[0],this.d=(n=p[1])+2*(o=p[2]);for(var m=0;m<this.d*this.d;m++){var y=p[bo+m],b=p[bo+m+1];c.push(y===b?null:p.subarray(y,b))}var E=p[bo+c.length+1];this.keys=p.subarray(p[bo+c.length],E),this.bboxes=p.subarray(E),this.insert=this._insertReadonly}else{this.d=n+2*o;for(var A=0;A<this.d*this.d;A++)c.push([]);this.keys=[],this.bboxes=[]}this.n=n,this.extent=i,this.padding=o,this.scale=n/i,this.uid=0;var I=o/n*i;this.min=-I,this.max=i+I}Zo.prototype.insert=function(i,n,o,c,p){this._forEachCell(n,o,c,p,this._insertCell,this.uid++),this.keys.push(i),this.bboxes.push(n),this.bboxes.push(o),this.bboxes.push(c),this.bboxes.push(p)},Zo.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Zo.prototype._insertCell=function(i,n,o,c,p,m){this.cells[p].push(m)},Zo.prototype.query=function(i,n,o,c,p){var m=this.min,y=this.max;if(i<=m&&n<=m&&y<=o&&y<=c&&!p)return Array.prototype.slice.call(this.keys);var b=[];return this._forEachCell(i,n,o,c,this._queryCell,b,{},p),b},Zo.prototype._queryCell=function(i,n,o,c,p,m,y,b){var E=this.cells[p];if(E!==null)for(var A=this.keys,I=this.bboxes,N=0;N<E.length;N++){var O=E[N];if(y[O]===void 0){var j=4*O;(b?b(I[j+0],I[j+1],I[j+2],I[j+3]):i<=I[j+2]&&n<=I[j+3]&&o>=I[j+0]&&c>=I[j+1])?(y[O]=!0,m.push(A[O])):y[O]=!1}}},Zo.prototype._forEachCell=function(i,n,o,c,p,m,y,b){for(var E=this._convertToCellCoord(i),A=this._convertToCellCoord(n),I=this._convertToCellCoord(o),N=this._convertToCellCoord(c),O=E;O<=I;O++)for(var j=A;j<=N;j++){var G=this.d*j+O;if((!b||b(this._convertFromCellCoord(O),this._convertFromCellCoord(j),this._convertFromCellCoord(O+1),this._convertFromCellCoord(j+1)))&&p.call(this,i,n,o,c,G,m,y,b))return}},Zo.prototype._convertFromCellCoord=function(i){return(i-this.padding)/this.scale},Zo.prototype._convertToCellCoord=function(i){return Math.max(0,Math.min(this.d-1,Math.floor(i*this.scale)+this.padding))},Zo.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var i=this.cells,n=bo+this.cells.length+1+1,o=0,c=0;c<this.cells.length;c++)o+=this.cells[c].length;var p=new Int32Array(n+o+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;for(var m=n,y=0;y<i.length;y++){var b=i[y];p[bo+y]=m,p.set(b,m),m+=b.length}return p[bo+i.length]=m,p.set(this.keys,m),p[bo+i.length+1]=m+=this.keys.length,p.set(this.bboxes,m),m+=this.bboxes.length,p.buffer};var wa=V(Gx);const eh={};function It(i,n,o={}){Object.defineProperty(i,"_classRegistryKey",{value:n,writeable:!1}),eh[n]={klass:i,omit:o.omit||[]}}It(Object,"Object"),wa.serialize=function(i,n){const o=i.toArrayBuffer();return n&&n.push(o),{buffer:o}},wa.deserialize=function(i){return new wa(i.buffer)},Object.defineProperty(wa,"name",{value:"Grid"}),It(wa,"Grid"),It(xr,"Color"),It(Error,"Error"),It(jo,"AJAXError"),It(eo,"ResolvedImage"),It(Zu,"StylePropertyFunction"),It(Wu,"StyleExpression",{omit:["_evaluator"]}),It(Ic,"ZoomDependentExpression"),It(xp,"ZoomConstantExpression"),It(gs,"CompoundExpression",{omit:["_evaluate"]});for(const i in kc)eh[kc[i]._classRegistryKey]||It(kc[i],`Expression${i}`);function Ap(i){return i&&typeof ArrayBuffer!="undefined"&&(i instanceof ArrayBuffer||i.constructor&&i.constructor.name==="ArrayBuffer")}function Mp(i){return _.ImageBitmap&&i instanceof _.ImageBitmap}function gl(i,n){if(i==null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp)return i;if(Ap(i)||Mp(i))return n&&n.push(i),i;if(ArrayBuffer.isView(i)){const o=i;return n&&n.push(o.buffer),o}if(i instanceof _.ImageData)return n&&n.push(i.data.buffer),i;if(Array.isArray(i)){const o=[];for(const c of i)o.push(gl(c,n));return o}if(typeof i=="object"){const o=i.constructor,c=o._classRegistryKey;if(!c)throw new Error(`can't serialize object of unregistered class ${c}`);const p=o.serialize?o.serialize(i,n):{};if(!o.serialize){for(const m in i)i.hasOwnProperty(m)&&(eh[c].omit.indexOf(m)>=0||(p[m]=gl(i[m],n)));i instanceof Error&&(p.message=i.message)}if(p.$name)throw new Error("$name property is reserved for worker serialization logic.");return c!=="Object"&&(p.$name=c),p}throw new Error("can't serialize object of type "+typeof i)}function Ea(i){if(i==null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp||Ap(i)||Mp(i)||ArrayBuffer.isView(i)||i instanceof _.ImageData)return i;if(Array.isArray(i))return i.map(Ea);if(typeof i=="object"){const n=i.$name||"Object",{klass:o}=eh[n];if(!o)throw new Error(`can't deserialize unregistered class ${n}`);if(o.deserialize)return o.deserialize(i);const c=Object.create(o.prototype);for(const p of Object.keys(i))p!=="$name"&&(c[p]=Ea(i[p]));return c}throw new Error("can't deserialize object of type "+typeof i)}const Mt={"Latin-1 Supplement":i=>i>=128&&i<=255,Arabic:i=>i>=1536&&i<=1791,"Arabic Supplement":i=>i>=1872&&i<=1919,"Arabic Extended-A":i=>i>=2208&&i<=2303,"Hangul Jamo":i=>i>=4352&&i<=4607,"Unified Canadian Aboriginal Syllabics":i=>i>=5120&&i<=5759,Khmer:i=>i>=6016&&i<=6143,"Unified Canadian Aboriginal Syllabics Extended":i=>i>=6320&&i<=6399,"General Punctuation":i=>i>=8192&&i<=8303,"Letterlike Symbols":i=>i>=8448&&i<=8527,"Number Forms":i=>i>=8528&&i<=8591,"Miscellaneous Technical":i=>i>=8960&&i<=9215,"Control Pictures":i=>i>=9216&&i<=9279,"Optical Character Recognition":i=>i>=9280&&i<=9311,"Enclosed Alphanumerics":i=>i>=9312&&i<=9471,"Geometric Shapes":i=>i>=9632&&i<=9727,"Miscellaneous Symbols":i=>i>=9728&&i<=9983,"Miscellaneous Symbols and Arrows":i=>i>=11008&&i<=11263,"CJK Radicals Supplement":i=>i>=11904&&i<=12031,"Kangxi Radicals":i=>i>=12032&&i<=12255,"Ideographic Description Characters":i=>i>=12272&&i<=12287,"CJK Symbols and Punctuation":i=>i>=12288&&i<=12351,Hiragana:i=>i>=12352&&i<=12447,Katakana:i=>i>=12448&&i<=12543,Bopomofo:i=>i>=12544&&i<=12591,"Hangul Compatibility Jamo":i=>i>=12592&&i<=12687,Kanbun:i=>i>=12688&&i<=12703,"Bopomofo Extended":i=>i>=12704&&i<=12735,"CJK Strokes":i=>i>=12736&&i<=12783,"Katakana Phonetic Extensions":i=>i>=12784&&i<=12799,"Enclosed CJK Letters and Months":i=>i>=12800&&i<=13055,"CJK Compatibility":i=>i>=13056&&i<=13311,"CJK Unified Ideographs Extension A":i=>i>=13312&&i<=19903,"Yijing Hexagram Symbols":i=>i>=19904&&i<=19967,"CJK Unified Ideographs":i=>i>=19968&&i<=40959,"Yi Syllables":i=>i>=40960&&i<=42127,"Yi Radicals":i=>i>=42128&&i<=42191,"Hangul Jamo Extended-A":i=>i>=43360&&i<=43391,"Hangul Syllables":i=>i>=44032&&i<=55215,"Hangul Jamo Extended-B":i=>i>=55216&&i<=55295,"Private Use Area":i=>i>=57344&&i<=63743,"CJK Compatibility Ideographs":i=>i>=63744&&i<=64255,"Arabic Presentation Forms-A":i=>i>=64336&&i<=65023,"Vertical Forms":i=>i>=65040&&i<=65055,"CJK Compatibility Forms":i=>i>=65072&&i<=65103,"Small Form Variants":i=>i>=65104&&i<=65135,"Arabic Presentation Forms-B":i=>i>=65136&&i<=65279,"Halfwidth and Fullwidth Forms":i=>i>=65280&&i<=65519};function kp(i){for(const n of i)if(Pp(n.charCodeAt(0)))return!0;return!1}function qx(i){for(const n of i)if(!Cg(n.charCodeAt(0)))return!1;return!0}function Cg(i){return!(Mt.Arabic(i)||Mt["Arabic Supplement"](i)||Mt["Arabic Extended-A"](i)||Mt["Arabic Presentation Forms-A"](i)||Mt["Arabic Presentation Forms-B"](i))}function Pp(i){return!(i!==746&&i!==747&&(i<4352||!(Mt["Bopomofo Extended"](i)||Mt.Bopomofo(i)||Mt["CJK Compatibility Forms"](i)&&!(i>=65097&&i<=65103)||Mt["CJK Compatibility Ideographs"](i)||Mt["CJK Compatibility"](i)||Mt["CJK Radicals Supplement"](i)||Mt["CJK Strokes"](i)||!(!Mt["CJK Symbols and Punctuation"](i)||i>=12296&&i<=12305||i>=12308&&i<=12319||i===12336)||Mt["CJK Unified Ideographs Extension A"](i)||Mt["CJK Unified Ideographs"](i)||Mt["Enclosed CJK Letters and Months"](i)||Mt["Hangul Compatibility Jamo"](i)||Mt["Hangul Jamo Extended-A"](i)||Mt["Hangul Jamo Extended-B"](i)||Mt["Hangul Jamo"](i)||Mt["Hangul Syllables"](i)||Mt.Hiragana(i)||Mt["Ideographic Description Characters"](i)||Mt.Kanbun(i)||Mt["Kangxi Radicals"](i)||Mt["Katakana Phonetic Extensions"](i)||Mt.Katakana(i)&&i!==12540||!(!Mt["Halfwidth and Fullwidth Forms"](i)||i===65288||i===65289||i===65293||i>=65306&&i<=65310||i===65339||i===65341||i===65343||i>=65371&&i<=65503||i===65507||i>=65512&&i<=65519)||!(!Mt["Small Form Variants"](i)||i>=65112&&i<=65118||i>=65123&&i<=65126)||Mt["Unified Canadian Aboriginal Syllabics"](i)||Mt["Unified Canadian Aboriginal Syllabics Extended"](i)||Mt["Vertical Forms"](i)||Mt["Yijing Hexagram Symbols"](i)||Mt["Yi Syllables"](i)||Mt["Yi Radicals"](i))))}function Ag(i){return!(Pp(i)||function(n){return!!(Mt["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||Mt["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||Mt["Letterlike Symbols"](n)||Mt["Number Forms"](n)||Mt["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||Mt["Control Pictures"](n)&&n!==9251||Mt["Optical Character Recognition"](n)||Mt["Enclosed Alphanumerics"](n)||Mt["Geometric Shapes"](n)||Mt["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||Mt["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||Mt["CJK Symbols and Punctuation"](n)||Mt.Katakana(n)||Mt["Private Use Area"](n)||Mt["CJK Compatibility Forms"](n)||Mt["Small Form Variants"](n)||Mt["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(i))}function Mg(i){return i>=1424&&i<=2303||Mt["Arabic Presentation Forms-A"](i)||Mt["Arabic Presentation Forms-B"](i)}function Hx(i,n){return!(!n&&Mg(i)||i>=2304&&i<=3583||i>=3840&&i<=4255||Mt.Khmer(i))}function Wx(i){for(const n of i)if(Mg(n.charCodeAt(0)))return!0;return!1}const Ip="deferred",Dp="loading",zp="loaded";let yl=null,f="unavailable",a=null;const h=function(i){i&&typeof i=="string"&&i.indexOf("NetworkError")>-1&&(f="error"),yl&&yl(i)};function g(){v.fire(new ma("pluginStateChange",{pluginStatus:f,pluginURL:a}))}const v=new pc,w=function(){return f},M=function(){if(f!==Ip||!a)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");f=Dp,g(),a&&Ja({url:a},i=>{i?h(i):(f=zp,g())})},P={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>f===zp||P.applyArabicShaping!=null,isLoading:()=>f===Dp,setState(i){f=i.pluginStatus,a=i.pluginURL},isParsed:()=>P.applyArabicShaping!=null&&P.processBidirectionalText!=null&&P.processStyledBidirectionalText!=null,getPluginURL:()=>a};class z{constructor(n,o){this.zoom=n,o?(this.now=o.now,this.fadeDuration=o.fadeDuration,this.transition=o.transition,this.pitch=o.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(n){return function(o,c){for(const p of o)if(!Hx(p.charCodeAt(0),c))return!1;return!0}(n,P.isLoaded())}}class ${constructor(n,o){this.property=n,this.value=o,this.expression=function(c,p){if(Pc(c))return new Zu(c,p);if(dl(c)){const m=Dc(c,p);if(m.result==="error")throw new Error(m.value.map(y=>`${y.key}: ${y.message}`).join(", "));return m.value}{let m=c;return typeof c=="string"&&p.type==="color"&&(m=xr.parse(c)),{kind:"constant",evaluate:()=>m}}}(o===void 0?n.specification.default:o,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,o,c){return this.property.possiblyEvaluate(this,n,o,c)}}class B{constructor(n){this.property=n,this.value=new $(n,void 0)}transitioned(n,o){return new ee(this.property,this.value,o,Et({},n.transition,this.transition),n.now)}untransitioned(){return new ee(this.property,this.value,null,{},0)}}class W{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return zn(this._values[n].value.value)}setValue(n,o){this._values.hasOwnProperty(n)||(this._values[n]=new B(this._values[n].property)),this._values[n].value=new $(this._values[n].property,o===null?void 0:zn(o))}getTransition(n){return zn(this._values[n].transition)}setTransition(n,o){this._values.hasOwnProperty(n)||(this._values[n]=new B(this._values[n].property)),this._values[n].transition=zn(o)||void 0}serialize(){const n={};for(const o of Object.keys(this._values)){const c=this.getValue(o);c!==void 0&&(n[o]=c);const p=this.getTransition(o);p!==void 0&&(n[`${o}-transition`]=p)}return n}transitioned(n,o){const c=new oe(this._properties);for(const p of Object.keys(this._values))c._values[p]=this._values[p].transitioned(n,o._values[p]);return c}untransitioned(){const n=new oe(this._properties);for(const o of Object.keys(this._values))n._values[o]=this._values[o].untransitioned();return n}}class ee{constructor(n,o,c,p,m){const y=p.delay||0,b=p.duration||0;m=m||0,this.property=n,this.value=o,this.begin=m+y,this.end=this.begin+b,n.specification.transition&&(p.delay||p.duration)&&(this.prior=c)}possiblyEvaluate(n,o,c){const p=n.now||0,m=this.value.possiblyEvaluate(n,o,c),y=this.prior;if(y){if(p>this.end)return this.prior=null,m;if(this.value.isDataDriven())return this.prior=null,m;if(p<this.begin)return y.possiblyEvaluate(n,o,c);{const b=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(y.possiblyEvaluate(n,o,c),m,ot(b))}}return m}}class oe{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,o,c){const p=new le(this._properties);for(const m of Object.keys(this._values))p._values[m]=this._values[m].possiblyEvaluate(n,o,c);return p}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class ae{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}getValue(n){return zn(this._values[n].value)}setValue(n,o){this._values[n]=new $(this._values[n].property,o===null?void 0:zn(o))}serialize(){const n={};for(const o of Object.keys(this._values)){const c=this.getValue(o);c!==void 0&&(n[o]=c)}return n}possiblyEvaluate(n,o,c){const p=new le(this._properties);for(const m of Object.keys(this._values))p._values[m]=this._values[m].possiblyEvaluate(n,o,c);return p}}class se{constructor(n,o,c){this.property=n,this.value=o,this.parameters=c}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,o,c,p){return this.property.evaluate(this.value,this.parameters,n,o,c,p)}}class le{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class Z{constructor(n){this.specification=n}possiblyEvaluate(n,o){return n.expression.evaluate(o)}interpolate(n,o,c){const p=Tc[this.specification.type];return p?p(n,o,c):n}}class ie{constructor(n,o){this.specification=n,this.overrides=o}possiblyEvaluate(n,o,c,p){return new se(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(o,null,{},c,p)}:n.expression,o)}interpolate(n,o,c){if(n.value.kind!=="constant"||o.value.kind!=="constant")return n;if(n.value.value===void 0||o.value.value===void 0)return new se(this,{kind:"constant",value:void 0},n.parameters);const p=Tc[this.specification.type];return p?new se(this,{kind:"constant",value:p(n.value.value,o.value.value,c)},n.parameters):n}evaluate(n,o,c,p,m,y){return n.kind==="constant"?n.value:n.evaluate(o,c,p,m,y)}}class de{constructor(n){this.specification=n}possiblyEvaluate(n,o,c,p){return!!n.expression.evaluate(o,null,{},c,p)}interpolate(){return!1}}class pe{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const o=new z(0,{});for(const c in n){const p=n[c];p.specification.overridable&&this.overridableProperties.push(c);const m=this.defaultPropertyValues[c]=new $(p,void 0),y=this.defaultTransitionablePropertyValues[c]=new B(p);this.defaultTransitioningPropertyValues[c]=y.untransitioned(),this.defaultPossiblyEvaluatedValues[c]=m.possiblyEvaluate(o)}}}function Ce(i,n){return 256*(i=Ze(Math.floor(i),0,255))+Ze(Math.floor(n),0,255)}It(ie,"DataDrivenProperty"),It(Z,"DataConstantProperty"),It(de,"ColorRampProperty");const Me={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ae{constructor(n,o){this._structArray=n,this._pos1=o*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Ne{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,o){return n._trim(),o&&(n.isTransferred=!0,o.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const o=Object.create(this.prototype);return o.arrayBuffer=n.arrayBuffer,o.length=n.length,o.capacity=n.arrayBuffer.byteLength/o.bytesPerElement,o._refreshViews(),o}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const o=this.uint8;this._refreshViews(),o&&this.uint8.set(o)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function ze(i,n=1){let o=0,c=0;return{members:i.map(p=>{const m=Me[p.type].BYTES_PER_ELEMENT,y=o=Ue(o,Math.max(n,m)),b=p.components||1;return c=Math.max(c,m),o+=m*b,{name:p.name,type:p.type,components:b,offset:y}}),size:Ue(o,Math.max(c,n)),alignment:n}}function Ue(i,n){return Math.ceil(i/n)*n}class ct extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o){const c=this.length;return this.resize(c+1),this.emplace(c,n,o)}emplace(n,o,c){const p=2*n;return this.int16[p+0]=o,this.int16[p+1]=c,n}}ct.prototype.bytesPerElement=4,It(ct,"StructArrayLayout2i4");class Be extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,c){const p=this.length;return this.resize(p+1),this.emplace(p,n,o,c)}emplace(n,o,c,p){const m=3*n;return this.int16[m+0]=o,this.int16[m+1]=c,this.int16[m+2]=p,n}}Be.prototype.bytesPerElement=6,It(Be,"StructArrayLayout3i6");class nt extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,c,p){const m=this.length;return this.resize(m+1),this.emplace(m,n,o,c,p)}emplace(n,o,c,p,m){const y=4*n;return this.int16[y+0]=o,this.int16[y+1]=c,this.int16[y+2]=p,this.int16[y+3]=m,n}}nt.prototype.bytesPerElement=8,It(nt,"StructArrayLayout4i8");class He extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,c,p,m,y,b){const E=this.length;return this.resize(E+1),this.emplace(E,n,o,c,p,m,y,b)}emplace(n,o,c,p,m,y,b,E){const A=6*n,I=12*n,N=3*n;return this.int16[A+0]=o,this.int16[A+1]=c,this.uint8[I+4]=p,this.uint8[I+5]=m,this.uint8[I+6]=y,this.uint8[I+7]=b,this.float32[N+2]=E,n}}He.prototype.bytesPerElement=12,It(He,"StructArrayLayout2i4ub1f12");class lt extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,c,p){const m=this.length;return this.resize(m+1),this.emplace(m,n,o,c,p)}emplace(n,o,c,p,m){const y=4*n;return this.float32[y+0]=o,this.float32[y+1]=c,this.float32[y+2]=p,this.float32[y+3]=m,n}}lt.prototype.bytesPerElement=16,It(lt,"StructArrayLayout4f16");class je extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,c,p,m){const y=this.length;return this.resize(y+1),this.emplace(y,n,o,c,p,m)}emplace(n,o,c,p,m,y){const b=6*n,E=3*n;return this.uint16[b+0]=o,this.uint16[b+1]=c,this.uint16[b+2]=p,this.uint16[b+3]=m,this.float32[E+2]=y,n}}je.prototype.bytesPerElement=12,It(je,"StructArrayLayout4ui1f12");class tt extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,c,p){const m=this.length;return this.resize(m+1),this.emplace(m,n,o,c,p)}emplace(n,o,c,p,m){const y=4*n;return this.uint16[y+0]=o,this.uint16[y+1]=c,this.uint16[y+2]=p,this.uint16[y+3]=m,n}}tt.prototype.bytesPerElement=8,It(tt,"StructArrayLayout4ui8");class ht extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,c,p,m,y){const b=this.length;return this.resize(b+1),this.emplace(b,n,o,c,p,m,y)}emplace(n,o,c,p,m,y,b){const E=6*n;return this.int16[E+0]=o,this.int16[E+1]=c,this.int16[E+2]=p,this.int16[E+3]=m,this.int16[E+4]=y,this.int16[E+5]=b,n}}ht.prototype.bytesPerElement=12,It(ht,"StructArrayLayout6i12");class st extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,c,p,m,y,b,E,A,I,N,O){const j=this.length;return this.resize(j+1),this.emplace(j,n,o,c,p,m,y,b,E,A,I,N,O)}emplace(n,o,c,p,m,y,b,E,A,I,N,O,j){const G=12*n;return this.int16[G+0]=o,this.int16[G+1]=c,this.int16[G+2]=p,this.int16[G+3]=m,this.uint16[G+4]=y,this.uint16[G+5]=b,this.uint16[G+6]=E,this.uint16[G+7]=A,this.int16[G+8]=I,this.int16[G+9]=N,this.int16[G+10]=O,this.int16[G+11]=j,n}}st.prototype.bytesPerElement=24,It(st,"StructArrayLayout4i4ui4i24");class dt extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,c,p,m,y){const b=this.length;return this.resize(b+1),this.emplace(b,n,o,c,p,m,y)}emplace(n,o,c,p,m,y,b){const E=10*n,A=5*n;return this.int16[E+0]=o,this.int16[E+1]=c,this.int16[E+2]=p,this.float32[A+2]=m,this.float32[A+3]=y,this.float32[A+4]=b,n}}dt.prototype.bytesPerElement=20,It(dt,"StructArrayLayout3i3f20");class Vt extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const o=this.length;return this.resize(o+1),this.emplace(o,n)}emplace(n,o){return this.uint32[1*n+0]=o,n}}Vt.prototype.bytesPerElement=4,It(Vt,"StructArrayLayout1ul4");class Qt extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,c,p,m,y,b,E,A,I,N,O,j){const G=this.length;return this.resize(G+1),this.emplace(G,n,o,c,p,m,y,b,E,A,I,N,O,j)}emplace(n,o,c,p,m,y,b,E,A,I,N,O,j,G){const X=20*n,te=10*n;return this.int16[X+0]=o,this.int16[X+1]=c,this.int16[X+2]=p,this.int16[X+3]=m,this.int16[X+4]=y,this.float32[te+3]=b,this.float32[te+4]=E,this.float32[te+5]=A,this.float32[te+6]=I,this.int16[X+14]=N,this.uint32[te+8]=O,this.uint16[X+18]=j,this.uint16[X+19]=G,n}}Qt.prototype.bytesPerElement=40,It(Qt,"StructArrayLayout5i4f1i1ul2ui40");class Nt extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,c,p,m,y,b){const E=this.length;return this.resize(E+1),this.emplace(E,n,o,c,p,m,y,b)}emplace(n,o,c,p,m,y,b,E){const A=8*n;return this.int16[A+0]=o,this.int16[A+1]=c,this.int16[A+2]=p,this.int16[A+4]=m,this.int16[A+5]=y,this.int16[A+6]=b,this.int16[A+7]=E,n}}Nt.prototype.bytesPerElement=16,It(Nt,"StructArrayLayout3i2i2i16");class Xt extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,o,c,p,m){const y=this.length;return this.resize(y+1),this.emplace(y,n,o,c,p,m)}emplace(n,o,c,p,m,y){const b=4*n,E=8*n;return this.float32[b+0]=o,this.float32[b+1]=c,this.float32[b+2]=p,this.int16[E+6]=m,this.int16[E+7]=y,n}}Xt.prototype.bytesPerElement=16,It(Xt,"StructArrayLayout2f1f2i16");class gn extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,c,p){const m=this.length;return this.resize(m+1),this.emplace(m,n,o,c,p)}emplace(n,o,c,p,m){const y=12*n,b=3*n;return this.uint8[y+0]=o,this.uint8[y+1]=c,this.float32[b+1]=p,this.float32[b+2]=m,n}}gn.prototype.bytesPerElement=12,It(gn,"StructArrayLayout2ub2f12");class pn extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,c){const p=this.length;return this.resize(p+1),this.emplace(p,n,o,c)}emplace(n,o,c,p){const m=3*n;return this.float32[m+0]=o,this.float32[m+1]=c,this.float32[m+2]=p,n}}pn.prototype.bytesPerElement=12,It(pn,"StructArrayLayout3f12");class $t extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,c){const p=this.length;return this.resize(p+1),this.emplace(p,n,o,c)}emplace(n,o,c,p){const m=3*n;return this.uint16[m+0]=o,this.uint16[m+1]=c,this.uint16[m+2]=p,n}}$t.prototype.bytesPerElement=6,It($t,"StructArrayLayout3ui6");class Dn extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n,o,c,p,m,y,b,E,A,I,N,O,j,G,X,te,ue,xe,he,ge,Ee){const we=this.length;return this.resize(we+1),this.emplace(we,n,o,c,p,m,y,b,E,A,I,N,O,j,G,X,te,ue,xe,he,ge,Ee)}emplace(n,o,c,p,m,y,b,E,A,I,N,O,j,G,X,te,ue,xe,he,ge,Ee,we){const Ve=30*n,$e=15*n,et=60*n;return this.int16[Ve+0]=o,this.int16[Ve+1]=c,this.int16[Ve+2]=p,this.float32[$e+2]=m,this.float32[$e+3]=y,this.uint16[Ve+8]=b,this.uint16[Ve+9]=E,this.uint32[$e+5]=A,this.uint32[$e+6]=I,this.uint32[$e+7]=N,this.uint16[Ve+16]=O,this.uint16[Ve+17]=j,this.uint16[Ve+18]=G,this.float32[$e+10]=X,this.float32[$e+11]=te,this.uint8[et+48]=ue,this.uint8[et+49]=xe,this.uint8[et+50]=he,this.uint32[$e+13]=ge,this.int16[Ve+28]=Ee,this.uint8[et+58]=we,n}}Dn.prototype.bytesPerElement=60,It(Dn,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Ln extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n,o,c,p,m,y,b,E,A,I,N,O,j,G,X,te,ue,xe,he,ge,Ee,we,Ve,$e,et,ut,We,rt,it,at){const ft=this.length;return this.resize(ft+1),this.emplace(ft,n,o,c,p,m,y,b,E,A,I,N,O,j,G,X,te,ue,xe,he,ge,Ee,we,Ve,$e,et,ut,We,rt,it,at)}emplace(n,o,c,p,m,y,b,E,A,I,N,O,j,G,X,te,ue,xe,he,ge,Ee,we,Ve,$e,et,ut,We,rt,it,at,ft){const Je=38*n,Ct=19*n;return this.int16[Je+0]=o,this.int16[Je+1]=c,this.int16[Je+2]=p,this.float32[Ct+2]=m,this.float32[Ct+3]=y,this.int16[Je+8]=b,this.int16[Je+9]=E,this.int16[Je+10]=A,this.int16[Je+11]=I,this.int16[Je+12]=N,this.int16[Je+13]=O,this.uint16[Je+14]=j,this.uint16[Je+15]=G,this.uint16[Je+16]=X,this.uint16[Je+17]=te,this.uint16[Je+18]=ue,this.uint16[Je+19]=xe,this.uint16[Je+20]=he,this.uint16[Je+21]=ge,this.uint16[Je+22]=Ee,this.uint16[Je+23]=we,this.uint16[Je+24]=Ve,this.uint16[Je+25]=$e,this.uint16[Je+26]=et,this.uint16[Je+27]=ut,this.uint16[Je+28]=We,this.uint32[Ct+15]=rt,this.float32[Ct+16]=it,this.float32[Ct+17]=at,this.float32[Ct+18]=ft,n}}Ln.prototype.bytesPerElement=76,It(Ln,"StructArrayLayout3i2f6i15ui1ul3f76");class Fn extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const o=this.length;return this.resize(o+1),this.emplace(o,n)}emplace(n,o){return this.float32[1*n+0]=o,n}}Fn.prototype.bytesPerElement=4,It(Fn,"StructArrayLayout1f4");class Rn extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o,c,p,m){const y=this.length;return this.resize(y+1),this.emplace(y,n,o,c,p,m)}emplace(n,o,c,p,m,y){const b=5*n;return this.float32[b+0]=o,this.float32[b+1]=c,this.float32[b+2]=p,this.float32[b+3]=m,this.float32[b+4]=y,n}}Rn.prototype.bytesPerElement=20,It(Rn,"StructArrayLayout5f20");class si extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o,c,p){const m=this.length;return this.resize(m+1),this.emplace(m,n,o,c,p)}emplace(n,o,c,p,m){const y=6*n;return this.uint32[3*n+0]=o,this.uint16[y+2]=c,this.uint16[y+3]=p,this.uint16[y+4]=m,n}}si.prototype.bytesPerElement=12,It(si,"StructArrayLayout1ul3ui12");class Wr extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,o){const c=this.length;return this.resize(c+1),this.emplace(c,n,o)}emplace(n,o,c){const p=2*n;return this.uint16[p+0]=o,this.uint16[p+1]=c,n}}Wr.prototype.bytesPerElement=4,It(Wr,"StructArrayLayout2ui4");class ro extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const o=this.length;return this.resize(o+1),this.emplace(o,n)}emplace(n,o){return this.uint16[1*n+0]=o,n}}ro.prototype.bytesPerElement=2,It(ro,"StructArrayLayout1ui2");class Xo extends Ne{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,o){const c=this.length;return this.resize(c+1),this.emplace(c,n,o)}emplace(n,o,c){const p=2*n;return this.float32[p+0]=o,this.float32[p+1]=c,n}}Xo.prototype.bytesPerElement=8,It(Xo,"StructArrayLayout2f8");class nr extends Ae{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}nr.prototype.size=40;class On extends Qt{get(n){return new nr(this,n)}}It(On,"CollisionBoxArray");class Cn extends Ae{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(n){this._structArray.uint8[this._pos1+49]=n}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(n){this._structArray.uint8[this._pos1+50]=n}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(n){this._structArray.uint32[this._pos4+13]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(n){this._structArray.uint8[this._pos1+58]=n}}Cn.prototype.size=60;class Sr extends Dn{get(n){return new Cn(this,n)}}It(Sr,"PlacedSymbolArray");class xi extends Ae{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(n){this._structArray.uint32[this._pos4+15]=n}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}xi.prototype.size=76;class Kn extends Ln{get(n){return new xi(this,n)}}It(Kn,"SymbolInstanceArray");class Ai extends Fn{getoffsetX(n){return this.float32[1*n+0]}}It(Ai,"GlyphOffsetArray");class th extends ct{getx(n){return this.int16[2*n+0]}gety(n){return this.int16[2*n+1]}}It(th,"SymbolLineVertexArray");class Ta extends Ae{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Ta.prototype.size=12;class Oc extends si{get(n){return new Ta(this,n)}}It(Oc,"FeatureIndexArray");class bs extends Wr{geta_centroid_pos0(n){return this.uint16[2*n+0]}geta_centroid_pos1(n){return this.uint16[2*n+1]}}It(bs,"FillExtrusionCentroidArray");const Zs=ze([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Sa=ze([{name:"a_dash",components:4,type:"Uint16"}]);var nh={exports:{}},Bc={exports:{}};Bc.exports=function(i,n){var o,c,p,m,y,b,E,A;for(c=i.length-(o=3&i.length),p=n,y=3432918353,b=461845907,A=0;A<c;)E=255&i.charCodeAt(A)|(255&i.charCodeAt(++A))<<8|(255&i.charCodeAt(++A))<<16|(255&i.charCodeAt(++A))<<24,++A,p=27492+(65535&(m=5*(65535&(p=(p^=E=(65535&(E=(E=(65535&E)*y+(((E>>>16)*y&65535)<<16)&4294967295)<<15|E>>>17))*b+(((E>>>16)*b&65535)<<16)&4294967295)<<13|p>>>19))+((5*(p>>>16)&65535)<<16)&4294967295))+((58964+(m>>>16)&65535)<<16);switch(E=0,o){case 3:E^=(255&i.charCodeAt(A+2))<<16;case 2:E^=(255&i.charCodeAt(A+1))<<8;case 1:p^=E=(65535&(E=(E=(65535&(E^=255&i.charCodeAt(A)))*y+(((E>>>16)*y&65535)<<16)&4294967295)<<15|E>>>17))*b+(((E>>>16)*b&65535)<<16)&4294967295}return p^=i.length,p=2246822507*(65535&(p^=p>>>16))+((2246822507*(p>>>16)&65535)<<16)&4294967295,p=3266489909*(65535&(p^=p>>>13))+((3266489909*(p>>>16)&65535)<<16)&4294967295,(p^=p>>>16)>>>0};var Np=Bc.exports,tT={exports:{}};tT.exports=function(i,n){for(var o,c=i.length,p=n^c,m=0;c>=4;)o=1540483477*(65535&(o=255&i.charCodeAt(m)|(255&i.charCodeAt(++m))<<8|(255&i.charCodeAt(++m))<<16|(255&i.charCodeAt(++m))<<24))+((1540483477*(o>>>16)&65535)<<16),p=1540483477*(65535&p)+((1540483477*(p>>>16)&65535)<<16)^(o=1540483477*(65535&(o^=o>>>24))+((1540483477*(o>>>16)&65535)<<16)),c-=4,++m;switch(c){case 3:p^=(255&i.charCodeAt(m+2))<<16;case 2:p^=(255&i.charCodeAt(m+1))<<8;case 1:p=1540483477*(65535&(p^=255&i.charCodeAt(m)))+((1540483477*(p>>>16)&65535)<<16)}return p=1540483477*(65535&(p^=p>>>13))+((1540483477*(p>>>16)&65535)<<16),(p^=p>>>15)>>>0};var nT=Np,BD=tT.exports;nh.exports=nT,nh.exports.murmur3=nT,nh.exports.murmur2=BD;var Zx=V(nh.exports);class kg{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,o,c,p){this.ids.push(rT(n)),this.positions.push(o,c,p)}getPositions(n){const o=rT(n);let c=0,p=this.ids.length-1;for(;c<p;){const y=c+p>>1;this.ids[y]>=o?p=y:c=y+1}const m=[];for(;this.ids[c]===o;)m.push({index:this.positions[3*c],start:this.positions[3*c+1],end:this.positions[3*c+2]}),c++;return m}static serialize(n,o){const c=new Float64Array(n.ids),p=new Uint32Array(n.positions);return Xx(c,p,0,c.length-1),o&&o.push(c.buffer,p.buffer),{ids:c,positions:p}}static deserialize(n){const o=new kg;return o.ids=n.ids,o.positions=n.positions,o.indexed=!0,o}}function rT(i){const n=+i;return!isNaN(n)&&Number.MIN_SAFE_INTEGER<=n&&n<=Number.MAX_SAFE_INTEGER?n:Zx(String(i))}function Xx(i,n,o,c){for(;o<c;){const p=i[o+c>>1];let m=o-1,y=c+1;for(;;){do m++;while(i[m]<p);do y--;while(i[y]>p);if(m>=y)break;Pg(i,m,y),Pg(n,3*m,3*y),Pg(n,3*m+1,3*y+1),Pg(n,3*m+2,3*y+2)}y-o<c-y?(Xx(i,n,o,y),o=y+1):(Xx(i,n,y+1,c),c=y)}}function Pg(i,n,o){const c=i[n];i[n]=i[o],i[o]=c}It(kg,"FeaturePositionMap");class Ca{constructor(n){this.gl=n.gl,this.initialized=!1}fetchUniformLocation(n,o){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(n,o),this.initialized=!0),!!this.location}}class Ig extends Ca{constructor(n){super(n),this.current=0}set(n,o,c){this.fetchUniformLocation(n,o)&&this.current!==c&&(this.current=c,this.gl.uniform1f(this.location,c))}}class iT extends Ca{constructor(n){super(n),this.current=[0,0,0,0]}set(n,o,c){this.fetchUniformLocation(n,o)&&(c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]&&c[3]===this.current[3]||(this.current=c,this.gl.uniform4f(this.location,c[0],c[1],c[2],c[3])))}}class oT extends Ca{constructor(n){super(n),this.current=xr.transparent}set(n,o,c){this.fetchUniformLocation(n,o)&&(c.r===this.current.r&&c.g===this.current.g&&c.b===this.current.b&&c.a===this.current.a||(this.current=c,this.gl.uniform4f(this.location,c.r,c.g,c.b,c.a)))}}const $D=new Float32Array(16),jD=new Float32Array(9),UD=new Float32Array(4);function Kx(i){return[Ce(255*i.r,255*i.g),Ce(255*i.b,255*i.a)]}class Lp{constructor(n,o,c){this.value=n,this.uniformNames=o.map(p=>`u_${p}`),this.type=c}setUniform(n,o,c,p,m){o.set(n,m,p.constantOr(this.value))}getBinding(n,o){return this.type==="color"?new oT(n):new Ig(n)}}class rh{constructor(n,o){this.uniformNames=o.map(c=>`u_${c}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(n){this.pixelRatio=n.pixelRatio||1,this.pattern=n.tl.concat(n.br)}setUniform(n,o,c,p,m){const y=m==="u_pattern"||m==="u_dash"?this.pattern:m==="u_pixel_ratio"?this.pixelRatio:null;y&&o.set(n,m,y)}getBinding(n,o){return o==="u_pattern"||o==="u_dash"?new iT(n):new Ig(n)}}class Aa{constructor(n,o,c,p){this.expression=n,this.type=c,this.maxValue=0,this.paintVertexAttributes=o.map(m=>({name:`a_${m}`,type:"Float32",components:c==="color"?2:1,offset:0})),this.paintVertexArray=new p}populatePaintArray(n,o,c,p,m,y){const b=this.paintVertexArray.length,E=this.expression.evaluate(new z(0),o,{},m,p,y);this.paintVertexArray.resize(n),this._setPaintValue(b,n,E)}updatePaintArray(n,o,c,p,m){const y=this.expression.evaluate({zoom:0},c,p,void 0,m);this._setPaintValue(n,o,y)}_setPaintValue(n,o,c){if(this.type==="color"){const p=Kx(c);for(let m=n;m<o;m++)this.paintVertexArray.emplace(m,p[0],p[1])}else{for(let p=n;p<o;p++)this.paintVertexArray.emplace(p,c);this.maxValue=Math.max(this.maxValue,Math.abs(c))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ws{constructor(n,o,c,p,m,y){this.expression=n,this.uniformNames=o.map(b=>`u_${b}_t`),this.type=c,this.useIntegerZoom=p,this.zoom=m,this.maxValue=0,this.paintVertexAttributes=o.map(b=>({name:`a_${b}`,type:"Float32",components:c==="color"?4:2,offset:0})),this.paintVertexArray=new y}populatePaintArray(n,o,c,p,m,y){const b=this.expression.evaluate(new z(this.zoom),o,{},m,p,y),E=this.expression.evaluate(new z(this.zoom+1),o,{},m,p,y),A=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(A,n,b,E)}updatePaintArray(n,o,c,p,m){const y=this.expression.evaluate({zoom:this.zoom},c,p,void 0,m),b=this.expression.evaluate({zoom:this.zoom+1},c,p,void 0,m);this._setPaintValue(n,o,y,b)}_setPaintValue(n,o,c,p){if(this.type==="color"){const m=Kx(c),y=Kx(p);for(let b=n;b<o;b++)this.paintVertexArray.emplace(b,m[0],m[1],y[0],y[1])}else{for(let m=n;m<o;m++)this.paintVertexArray.emplace(m,c,p);this.maxValue=Math.max(this.maxValue,Math.abs(c),Math.abs(p))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,o,c,p,m){const y=this.useIntegerZoom?Math.floor(c.zoom):c.zoom,b=Ze(this.expression.interpolationFactor(y,this.zoom,this.zoom+1),0,1);o.set(n,m,b)}getBinding(n,o){return new Ig(n)}}class xl{constructor(n,o,c,p,m){this.expression=n,this.layerId=m,this.paintVertexAttributes=(c==="array"?Sa:Zs).members;for(let y=0;y<o.length;++y);this.paintVertexArray=new p}populatePaintArray(n,o,c){const p=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValues(p,n,o.patterns&&o.patterns[this.layerId],c)}updatePaintArray(n,o,c,p,m,y){this._setPaintValues(n,o,c.patterns&&c.patterns[this.layerId],y)}_setPaintValues(n,o,c,p){if(!p||!c)return;const m=p[c];if(!m)return;const{tl:y,br:b,pixelRatio:E}=m;for(let A=n;A<o;A++)this.paintVertexArray.emplace(A,y[0],y[1],b[0],b[1],E)}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class _l{constructor(n,o,c=()=>!0){this.binders={},this._buffers=[];const p=[];for(const m in n.paint._values){if(!c(m))continue;const y=n.paint.get(m);if(!(y instanceof se&&ul(y.property.specification)))continue;const b=GD(m,n.type),E=y.value,A=y.property.specification.type,I=!!y.property.useIntegerZoom,N=m==="line-dasharray"||m.endsWith("pattern"),O=m==="line-dasharray"&&n.layout.get("line-cap").value.kind!=="constant";if(E.kind!=="constant"||O)if(E.kind==="source"||O||N){const j=sT(m,A,"source");this.binders[m]=N?new xl(E,b,A,j,n.id):new Aa(E,b,A,j),p.push(`/a_${m}`)}else{const j=sT(m,A,"composite");this.binders[m]=new ws(E,b,A,I,o,j),p.push(`/z_${m}`)}else this.binders[m]=N?new rh(E.value,b):new Lp(E.value,b,A),p.push(`/u_${m}`)}this.cacheKey=p.sort().join("")}getMaxValue(n){const o=this.binders[n];return o instanceof Aa||o instanceof ws?o.maxValue:0}populatePaintArrays(n,o,c,p,m,y){for(const b in this.binders){const E=this.binders[b];(E instanceof Aa||E instanceof ws||E instanceof xl)&&E.populatePaintArray(n,o,c,p,m,y)}}setConstantPatternPositions(n){for(const o in this.binders){const c=this.binders[o];c instanceof rh&&c.setConstantPatternPositions(n)}}updatePaintArrays(n,o,c,p,m,y){let b=!1;for(const E in n){const A=o.getPositions(E);for(const I of A){const N=c.feature(I.index);for(const O in this.binders){const j=this.binders[O];if((j instanceof Aa||j instanceof ws||j instanceof xl)&&j.expression.isStateDependent===!0){const G=p.paint.get(O);j.expression=G.value,j.updatePaintArray(I.start,I.end,N,n[E],m,y),b=!0}}}}return b}defines(){const n=[];for(const o in this.binders){const c=this.binders[o];(c instanceof Lp||c instanceof rh)&&n.push(...c.uniformNames.map(p=>`#define HAS_UNIFORM_${p}`))}return n}getBinderAttributes(){const n=[];for(const o in this.binders){const c=this.binders[o];if(c instanceof Aa||c instanceof ws||c instanceof xl)for(let p=0;p<c.paintVertexAttributes.length;p++)n.push(c.paintVertexAttributes[p].name)}return n}getBinderUniforms(){const n=[];for(const o in this.binders){const c=this.binders[o];if(c instanceof Lp||c instanceof rh||c instanceof ws)for(const p of c.uniformNames)n.push(p)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n){const o=[];for(const c in this.binders){const p=this.binders[c];if(p instanceof Lp||p instanceof rh||p instanceof ws)for(const m of p.uniformNames)o.push({name:m,property:c,binding:p.getBinding(n,m)})}return o}setUniforms(n,o,c,p,m){for(const{name:y,property:b,binding:E}of c)this.binders[b].setUniform(n,E,m,p.get(b),y)}updatePaintBuffers(){this._buffers=[];for(const n in this.binders){const o=this.binders[n];(o instanceof Aa||o instanceof ws||o instanceof xl)&&o.paintVertexBuffer&&this._buffers.push(o.paintVertexBuffer)}}upload(n){for(const o in this.binders){const c=this.binders[o];(c instanceof Aa||c instanceof ws||c instanceof xl)&&c.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const o=this.binders[n];(o instanceof Aa||o instanceof ws||o instanceof xl)&&o.destroy()}}}class $c{constructor(n,o,c=()=>!0){this.programConfigurations={};for(const p of n)this.programConfigurations[p.id]=new _l(p,o,c);this.needsUpload=!1,this._featureMap=new kg,this._bufferOffset=0}populatePaintArrays(n,o,c,p,m,y,b){for(const E in this.programConfigurations)this.programConfigurations[E].populatePaintArrays(n,o,p,m,y,b);o.id!==void 0&&this._featureMap.add(o.id,c,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,o,c,p,m){for(const y of c)this.needsUpload=this.programConfigurations[y.id].updatePaintArrays(n,this._featureMap,o,y,p,m)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const o in this.programConfigurations)this.programConfigurations[o].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}const VD={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function GD(i,n){return VD[i]||[i.replace(`${n}-`,"").replace(/-/g,"_")]}const qD={"line-pattern":{source:je,composite:je},"fill-pattern":{source:je,composite:je},"fill-extrusion-pattern":{source:je,composite:je},"line-dasharray":{source:tt,composite:tt}},HD={color:{source:Xo,composite:lt},number:{source:Fn,composite:Xo}};function sT(i,n,o){const c=qD[i];return c&&c[o]||HD[n][o]}It(Lp,"ConstantBinder"),It(rh,"PatternConstantBinder"),It(Aa,"SourceExpressionBinder"),It(xl,"PatternCompositeBinder"),It(ws,"CompositeExpressionBinder"),It(_l,"ProgramConfiguration",{omit:["_buffers"]}),It($c,"ProgramConfigurationSet");const aT="-transition";class Es extends pc{constructor(n,o){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&n.type!=="sky"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),o.layout&&(this._unevaluatedLayout=new ae(o.layout)),o.paint)){this._transitionablePaint=new W(o.paint);for(const c in n.paint)this.setPaintProperty(c,n.paint[c],{validate:!1});for(const c in n.layout)this.setLayoutProperty(c,n.layout[c],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new le(o.paint)}}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,o,c={}){o!=null&&this._validate(Vx,`layers.${this.id}.layout.${n}`,n,o,c)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,o):this.visibility=o)}getPaintProperty(n){return Xn(n,aT)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,o,c={}){if(o!=null&&this._validate(Ux,`layers.${this.id}.paint.${n}`,n,o,c))return!1;if(Xn(n,aT))return this._transitionablePaint.setTransition(n.slice(0,-11),o||void 0),!1;{const p=this._transitionablePaint._values[n],m=p.value.isDataDriven(),y=p.value;this._transitionablePaint.setValue(n,o),this._handleSpecialPaintPropertyUpdate(n);const b=this._transitionablePaint._values[n].value,E=b.isDataDriven(),A=Xn(n,"pattern")||n==="line-dasharray";return E||m||A||this._handleOverridablePaintPropertyUpdate(n,y,b)}}_handleSpecialPaintPropertyUpdate(n){}getProgramIds(){return null}getProgramConfiguration(n){return null}_handleOverridablePaintPropertyUpdate(n,o,c){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,o){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,o)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,o)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),Qn(n,(o,c)=>!(o===void 0||c==="layout"&&!Object.keys(o).length||c==="paint"&&!Object.keys(o).length))}_validate(n,o,c,p,m={}){return(!m||m.validate!==!1)&&Sg(this,n.call(Tg,{key:o,layerType:this.type,objectKey:c,value:p,styleSpec:Qe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const o=this.paint.get(n);if(o instanceof se&&ul(o.property.specification)&&(o.value.kind==="source"||o.value.kind==="composite")&&o.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=Yu(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const WD=ze([{name:"a_pos",components:2,type:"Int16"}],4),ZD=ze([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Cr{constructor(n=[]){this.segments=n}prepareSegment(n,o,c,p){let m=this.segments[this.segments.length-1];return n>Cr.MAX_VERTEX_ARRAY_LENGTH&&tn(`Max vertices per segment is ${Cr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!m||m.vertexLength+n>Cr.MAX_VERTEX_ARRAY_LENGTH||m.sortKey!==p)&&(m={vertexOffset:o.length,primitiveOffset:c.length,vertexLength:0,primitiveLength:0},p!==void 0&&(m.sortKey=p),this.segments.push(m)),m}get(){return this.segments}destroy(){for(const n of this.segments)for(const o in n.vaos)n.vaos[o].destroy()}static simpleSegment(n,o,c,p){return new Cr([{vertexOffset:n,primitiveOffset:o,vertexLength:c,primitiveLength:p,vaos:{},sortKey:0}])}}Cr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,It(Cr,"SegmentVector");var Zt=8192;class vl{constructor(n,o){n&&(o?this.setSouthWest(n).setNorthEast(o):n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1]))}setNorthEast(n){return this._ne=n instanceof Bn?new Bn(n.lng,n.lat):Bn.convert(n),this}setSouthWest(n){return this._sw=n instanceof Bn?new Bn(n.lng,n.lat):Bn.convert(n),this}extend(n){const o=this._sw,c=this._ne;let p,m;if(n instanceof Bn)p=n,m=n;else{if(!(n instanceof vl))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(vl.convert(n)):this.extend(Bn.convert(n)):typeof n=="object"&&n!==null&&n.hasOwnProperty("lat")&&(n.hasOwnProperty("lon")||n.hasOwnProperty("lng"))?this.extend(Bn.convert(n)):this;if(p=n._sw,m=n._ne,!p||!m)return this}return o||c?(o.lng=Math.min(p.lng,o.lng),o.lat=Math.min(p.lat,o.lat),c.lng=Math.max(m.lng,c.lng),c.lat=Math.max(m.lat,c.lat)):(this._sw=new Bn(p.lng,p.lat),this._ne=new Bn(m.lng,m.lat)),this}getCenter(){return new Bn((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Bn(this.getWest(),this.getNorth())}getSouthEast(){return new Bn(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:o,lat:c}=Bn.convert(n);let p=this._sw.lng<=o&&o<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=o&&o>=this._ne.lng),this._sw.lat<=c&&c<=this._ne.lat&&p}static convert(n){return!n||n instanceof vl?n:new vl(n)}}var Dg=1e-6,io=typeof Float32Array!="undefined"?Float32Array:Array;function lT(){var i=new io(9);return io!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[5]=0,i[6]=0,i[7]=0),i[0]=1,i[4]=1,i[8]=1,i}function cT(i,n,o){var c=n[0],p=n[1],m=n[2],y=n[3],b=n[4],E=n[5],A=n[6],I=n[7],N=n[8],O=o[0],j=o[1],G=o[2],X=o[3],te=o[4],ue=o[5],xe=o[6],he=o[7],ge=o[8];return i[0]=O*c+j*y+G*A,i[1]=O*p+j*b+G*I,i[2]=O*m+j*E+G*N,i[3]=X*c+te*y+ue*A,i[4]=X*p+te*b+ue*I,i[5]=X*m+te*E+ue*N,i[6]=xe*c+he*y+ge*A,i[7]=xe*p+he*b+ge*I,i[8]=xe*m+he*E+ge*N,i}function Ts(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function Yx(i,n){var o=n[0],c=n[1],p=n[2],m=n[3],y=n[4],b=n[5],E=n[6],A=n[7],I=n[8],N=n[9],O=n[10],j=n[11],G=n[12],X=n[13],te=n[14],ue=n[15],xe=o*b-c*y,he=o*E-p*y,ge=o*A-m*y,Ee=c*E-p*b,we=c*A-m*b,Ve=p*A-m*E,$e=I*X-N*G,et=I*te-O*G,ut=I*ue-j*G,We=N*te-O*X,rt=N*ue-j*X,it=O*ue-j*te,at=xe*it-he*rt+ge*We+Ee*ut-we*et+Ve*$e;return at?(i[0]=(b*it-E*rt+A*We)*(at=1/at),i[1]=(p*rt-c*it-m*We)*at,i[2]=(X*Ve-te*we+ue*Ee)*at,i[3]=(O*we-N*Ve-j*Ee)*at,i[4]=(E*ut-y*it-A*et)*at,i[5]=(o*it-p*ut+m*et)*at,i[6]=(te*ge-G*Ve-ue*he)*at,i[7]=(I*Ve-O*ge+j*he)*at,i[8]=(y*rt-b*ut+A*$e)*at,i[9]=(c*ut-o*rt-m*$e)*at,i[10]=(G*we-X*ge+ue*xe)*at,i[11]=(N*ge-I*we-j*xe)*at,i[12]=(b*et-y*We-E*$e)*at,i[13]=(o*We-c*et+p*$e)*at,i[14]=(X*he-G*Ee-te*xe)*at,i[15]=(I*Ee-N*he+O*xe)*at,i):null}function jc(i,n,o){var c=n[0],p=n[1],m=n[2],y=n[3],b=n[4],E=n[5],A=n[6],I=n[7],N=n[8],O=n[9],j=n[10],G=n[11],X=n[12],te=n[13],ue=n[14],xe=n[15],he=o[0],ge=o[1],Ee=o[2],we=o[3];return i[0]=he*c+ge*b+Ee*N+we*X,i[1]=he*p+ge*E+Ee*O+we*te,i[2]=he*m+ge*A+Ee*j+we*ue,i[3]=he*y+ge*I+Ee*G+we*xe,i[4]=(he=o[4])*c+(ge=o[5])*b+(Ee=o[6])*N+(we=o[7])*X,i[5]=he*p+ge*E+Ee*O+we*te,i[6]=he*m+ge*A+Ee*j+we*ue,i[7]=he*y+ge*I+Ee*G+we*xe,i[8]=(he=o[8])*c+(ge=o[9])*b+(Ee=o[10])*N+(we=o[11])*X,i[9]=he*p+ge*E+Ee*O+we*te,i[10]=he*m+ge*A+Ee*j+we*ue,i[11]=he*y+ge*I+Ee*G+we*xe,i[12]=(he=o[12])*c+(ge=o[13])*b+(Ee=o[14])*N+(we=o[15])*X,i[13]=he*p+ge*E+Ee*O+we*te,i[14]=he*m+ge*A+Ee*j+we*ue,i[15]=he*y+ge*I+Ee*G+we*xe,i}function Fp(i,n,o){var c,p,m,y,b,E,A,I,N,O,j,G,X=o[0],te=o[1],ue=o[2];return n===i?(i[12]=n[0]*X+n[4]*te+n[8]*ue+n[12],i[13]=n[1]*X+n[5]*te+n[9]*ue+n[13],i[14]=n[2]*X+n[6]*te+n[10]*ue+n[14],i[15]=n[3]*X+n[7]*te+n[11]*ue+n[15]):(p=n[1],m=n[2],y=n[3],b=n[4],E=n[5],A=n[6],I=n[7],N=n[8],O=n[9],j=n[10],G=n[11],i[0]=c=n[0],i[1]=p,i[2]=m,i[3]=y,i[4]=b,i[5]=E,i[6]=A,i[7]=I,i[8]=N,i[9]=O,i[10]=j,i[11]=G,i[12]=c*X+b*te+N*ue+n[12],i[13]=p*X+E*te+O*ue+n[13],i[14]=m*X+A*te+j*ue+n[14],i[15]=y*X+I*te+G*ue+n[15]),i}function Uc(i,n,o){var c=o[0],p=o[1],m=o[2];return i[0]=n[0]*c,i[1]=n[1]*c,i[2]=n[2]*c,i[3]=n[3]*c,i[4]=n[4]*p,i[5]=n[5]*p,i[6]=n[6]*p,i[7]=n[7]*p,i[8]=n[8]*m,i[9]=n[9]*m,i[10]=n[10]*m,i[11]=n[11]*m,i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15],i}function Jx(i,n,o){var c=Math.sin(o),p=Math.cos(o),m=n[4],y=n[5],b=n[6],E=n[7],A=n[8],I=n[9],N=n[10],O=n[11];return n!==i&&(i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15]),i[4]=m*p+A*c,i[5]=y*p+I*c,i[6]=b*p+N*c,i[7]=E*p+O*c,i[8]=A*p-m*c,i[9]=I*p-y*c,i[10]=N*p-b*c,i[11]=O*p-E*c,i}function zg(i,n,o){var c=Math.sin(o),p=Math.cos(o),m=n[0],y=n[1],b=n[2],E=n[3],A=n[8],I=n[9],N=n[10],O=n[11];return n!==i&&(i[4]=n[4],i[5]=n[5],i[6]=n[6],i[7]=n[7],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15]),i[0]=m*p-A*c,i[1]=y*p-I*c,i[2]=b*p-N*c,i[3]=E*p-O*c,i[8]=m*c+A*p,i[9]=y*c+I*p,i[10]=b*c+N*p,i[11]=E*c+O*p,i}function uT(i,n){return i[0]=n[0],i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=n[1],i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=n[2],i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function hT(i,n,o){var c,p,m,y=o[0],b=o[1],E=o[2],A=Math.hypot(y,b,E);return A<Dg?null:(y*=A=1/A,b*=A,E*=A,c=Math.sin(n),p=Math.cos(n),i[0]=y*y*(m=1-p)+p,i[1]=b*y*m+E*c,i[2]=E*y*m-b*c,i[3]=0,i[4]=y*b*m-E*c,i[5]=b*b*m+p,i[6]=E*b*m+y*c,i[7]=0,i[8]=y*E*m+b*c,i[9]=b*E*m-y*c,i[10]=E*E*m+p,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i)}Math.hypot||(Math.hypot=function(){for(var i=0,n=arguments.length;n--;)i+=arguments[n]*arguments[n];return Math.sqrt(i)});var XD=jc;function Qx(){var i=new io(3);return io!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0),i}function dT(i){var n=new io(3);return n[0]=i[0],n[1]=i[1],n[2]=i[2],n}function Rp(i){return Math.hypot(i[0],i[1],i[2])}function ih(i,n,o){var c=new io(3);return c[0]=i,c[1]=n,c[2]=o,c}function Ma(i,n,o){return i[0]=n[0]+o[0],i[1]=n[1]+o[1],i[2]=n[2]+o[2],i}function e_(i,n,o){return i[0]=n[0]-o[0],i[1]=n[1]-o[1],i[2]=n[2]-o[2],i}function pT(i,n,o){return i[0]=n[0]*o[0],i[1]=n[1]*o[1],i[2]=n[2]*o[2],i}function Op(i,n,o){return i[0]=Math.min(n[0],o[0]),i[1]=Math.min(n[1],o[1]),i[2]=Math.min(n[2],o[2]),i}function Bp(i,n,o){return i[0]=Math.max(n[0],o[0]),i[1]=Math.max(n[1],o[1]),i[2]=Math.max(n[2],o[2]),i}function wo(i,n,o){return i[0]=n[0]*o,i[1]=n[1]*o,i[2]=n[2]*o,i}function $p(i,n,o,c){return i[0]=n[0]+o[0]*c,i[1]=n[1]+o[1]*c,i[2]=n[2]+o[2]*c,i}function Mi(i,n){var o=n[0],c=n[1],p=n[2],m=o*o+c*c+p*p;return m>0&&(m=1/Math.sqrt(m)),i[0]=n[0]*m,i[1]=n[1]*m,i[2]=n[2]*m,i}function Ko(i,n){return i[0]*n[0]+i[1]*n[1]+i[2]*n[2]}function t_(i,n,o){var c=n[0],p=n[1],m=n[2],y=o[0],b=o[1],E=o[2];return i[0]=p*E-m*b,i[1]=m*y-c*E,i[2]=c*b-p*y,i}function _r(i,n,o){var c=n[0],p=n[1],m=n[2],y=o[3]*c+o[7]*p+o[11]*m+o[15];return i[0]=(o[0]*c+o[4]*p+o[8]*m+o[12])/(y=y||1),i[1]=(o[1]*c+o[5]*p+o[9]*m+o[13])/y,i[2]=(o[2]*c+o[6]*p+o[10]*m+o[14])/y,i}function fT(i,n,o){var c=o[0],p=o[1],m=o[2],y=n[0],b=n[1],E=n[2],A=p*E-m*b,I=m*y-c*E,N=c*b-p*y,O=p*N-m*I,j=m*A-c*N,G=c*I-p*A,X=2*o[3];return I*=X,N*=X,j*=2,G*=2,i[0]=y+(A*=X)+(O*=2),i[1]=b+I+j,i[2]=E+N+G,i}var jp,Ss=e_,KD=pT,YD=Rp;function mT(i,n,o){return i[0]=n[0]*o,i[1]=n[1]*o,i[2]=n[2]*o,i[3]=n[3]*o,i}function gT(i,n){var o=n[0],c=n[1],p=n[2],m=n[3],y=o*o+c*c+p*p+m*m;return y>0&&(y=1/Math.sqrt(y)),i[0]=o*y,i[1]=c*y,i[2]=p*y,i[3]=m*y,i}function Vc(i,n,o){var c=n[0],p=n[1],m=n[2],y=n[3];return i[0]=o[0]*c+o[4]*p+o[8]*m+o[12]*y,i[1]=o[1]*c+o[5]*p+o[9]*m+o[13]*y,i[2]=o[2]*c+o[6]*p+o[10]*m+o[14]*y,i[3]=o[3]*c+o[7]*p+o[11]*m+o[15]*y,i}function yT(){var i=new io(4);return io!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0),i[3]=1,i}function xT(i){return i[0]=0,i[1]=0,i[2]=0,i[3]=1,i}function _T(i,n,o){o*=.5;var c=n[0],p=n[1],m=n[2],y=n[3],b=Math.sin(o),E=Math.cos(o);return i[0]=c*E+y*b,i[1]=p*E+m*b,i[2]=m*E-p*b,i[3]=y*E-c*b,i}function vT(i,n,o){o*=.5;var c=n[0],p=n[1],m=n[2],y=n[3],b=Math.sin(o),E=Math.cos(o);return i[0]=c*E-m*b,i[1]=p*E+y*b,i[2]=m*E+c*b,i[3]=y*E-p*b,i}Qx(),jp=new io(4),io!=Float32Array&&(jp[0]=0,jp[1]=0,jp[2]=0,jp[3]=0);var JD=gT;Qx(),ih(1,0,0),ih(0,1,0),yT(),yT(),lT();const QD=ze([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:bT}=QD,wT=ze([{name:"a_pos_3",components:3,type:"Int16"}]);var Up=ze([{name:"a_pos",type:"Int16",components:2}]);class n_{constructor(n,o){this.pos=n,this.dir=o}intersectsPlane(n,o,c){const p=Ko(o,this.dir);if(Math.abs(p)<1e-6)return!1;const m=((n[0]-this.pos[0])*o[0]+(n[1]-this.pos[1])*o[1]+(n[2]-this.pos[2])*o[2])/p;return c[0]=this.pos[0]+this.dir[0]*m,c[1]=this.pos[1]+this.dir[1]*m,c[2]=this.pos[2]+this.dir[2]*m,!0}closestPointOnSphere(n,o,c){if(function(j,G){var X=j[0],te=j[1],ue=j[2],xe=G[0],he=G[1],ge=G[2];return Math.abs(X-xe)<=Dg*Math.max(1,Math.abs(X),Math.abs(xe))&&Math.abs(te-he)<=Dg*Math.max(1,Math.abs(te),Math.abs(he))&&Math.abs(ue-ge)<=Dg*Math.max(1,Math.abs(ue),Math.abs(ge))}(this.pos,n)||o===0)return c[0]=c[1]=c[2]=0,!1;const[p,m,y]=this.dir,b=this.pos[0]-n[0],E=this.pos[1]-n[1],A=this.pos[2]-n[2],I=p*p+m*m+y*y,N=2*(b*p+E*m+A*y),O=N*N-4*I*(b*b+E*E+A*A-o*o);if(O<0){const j=Math.max(-N/2,0),G=b+p*j,X=E+m*j,te=A+y*j,ue=Math.hypot(G,X,te);return c[0]=G*o/ue,c[1]=X*o/ue,c[2]=te*o/ue,!1}{const j=(-N-Math.sqrt(O))/(2*I);if(j<0){const G=Math.hypot(b,E,A);return c[0]=b*o/G,c[1]=E*o/G,c[2]=A*o/G,!1}return c[0]=b+p*j,c[1]=E+m*j,c[2]=A+y*j,!0}}}class r_{constructor(n,o,c,p,m){this.TL=n,this.TR=o,this.BR=c,this.BL=p,this.horizon=m}static fromInvProjectionMatrix(n,o,c){const p=[-1,1,1],m=[1,1,1],y=[1,-1,1],b=[-1,-1,1],E=_r(p,p,n),A=_r(m,m,n),I=_r(y,y,n),N=_r(b,b,n);return new r_(E,A,I,N,o/c)}}class i_{constructor(n,o){this.points=n,this.planes=o}static fromInvProjectionMatrix(n,o,c,p){const m=Math.pow(2,c),y=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(E=>{const A=Vc([],E,n),I=1/A[3]/o*m;return function(N,O,j){return N[0]=O[0]*j[0],N[1]=O[1]*j[1],N[2]=O[2]*j[2],N[3]=O[3]*j[3],N}(A,A,[I,I,p?1/A[3]:I,I])}),b=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(E=>{const A=Mi([],t_([],Ss([],y[E[0]],y[E[1]]),Ss([],y[E[2]],y[E[1]]))),I=-Ko(A,y[E[1]]);return A.concat(I)});return new i_(y,b)}}class ki{static fromPoints(n){const o=[1/0,1/0,1/0],c=[-1/0,-1/0,-1/0];for(const p of n)Op(o,o,p),Bp(c,c,p);return new ki(o,c)}static applyTransform(n,o){const c=n.getCorners();for(let p=0;p<c.length;++p)_r(c[p],c[p],o);return ki.fromPoints(c)}constructor(n,o){this.min=n,this.max=o,this.center=wo([],Ma([],this.min,this.max),.5)}quadrant(n){const o=[n%2==0,n<2],c=dT(this.min),p=dT(this.max);for(let m=0;m<o.length;m++)c[m]=o[m]?this.min[m]:this.center[m],p[m]=o[m]?this.center[m]:this.max[m];return p[2]=this.max[2],new ki(c,p)}distanceX(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]}distanceY(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]}distanceZ(n){return Math.max(Math.min(this.max[2],n[2]),this.min[2])-n[2]}getCorners(){const n=this.min,o=this.max;return[[n[0],n[1],n[2]],[o[0],n[1],n[2]],[o[0],o[1],n[2]],[n[0],o[1],n[2]],[n[0],n[1],o[2]],[o[0],n[1],o[2]],[o[0],o[1],o[2]],[n[0],o[1],o[2]]]}intersects(n){const o=this.getCorners();let c=!0;for(let p=0;p<n.planes.length;p++){const m=n.planes[p];let y=0;for(let b=0;b<o.length;b++)y+=Ko(m,o[b])+m[3]>=0;if(y===0)return 0;y!==o.length&&(c=!1)}if(c)return 2;for(let p=0;p<3;p++){let m=Number.MAX_VALUE,y=-Number.MAX_VALUE;for(let b=0;b<n.points.length;b++){const E=n.points[b][p]-this.min[p];m=Math.min(m,E),y=Math.max(y,E)}if(y<0||m>this.max[p]-this.min[p])return 0}return 1}}const o_=5,ET=6,Xs=Zt/Math.PI/2,ez=16383,Gc=64,Vp=[Gc,32,16],Yo=-Xs,Jo=Xs,tz=[new ki([Yo,Yo,Yo],[Jo,Jo,Jo]),new ki([Yo,Yo,Yo],[0,0,Jo]),new ki([0,Yo,Yo],[Jo,0,Jo]),new ki([Yo,0,Yo],[0,Jo,Jo]),new ki([0,0,Yo],[Jo,Jo,Jo])];function Ng(i){return i*Xs/Hp}function TT(i,n,o,c=!0){const p=wo([],i._camera.position,i.worldSize),m=[n,o,1,1];Vc(m,m,i.pixelMatrixInverse),mT(m,m,1/m[3]);const y=Mi([],Ss([],m,p)),b=i.globeMatrix,E=[b[12],b[13],b[14]],A=Ss([],E,p),I=Rp(A),N=Mi([],A),O=i.worldSize/(2*Math.PI),j=Ko(N,y),G=Math.asin(O/I);if(G<Math.acos(j)){if(!c)return null;const ut=[],We=[];wo(ut,y,I/j),Mi(We,Ss(We,ut,A)),Mi(y,Ma(y,A,wo(y,We,Math.tan(G)*I)))}const X=[];new n_(p,y).closestPointOnSphere(E,O,X);const te=Mi([],vt(b,0)),ue=Mi([],vt(b,1)),xe=Mi([],vt(b,2)),he=Ko(te,X),ge=Ko(ue,X),Ee=Ko(xe,X),we=Ke(Math.asin(-ge/O));let Ve=Ke(Math.atan2(he,Ee));Ve=i.center.lng+function(ut,We){const rt=(We-ut+180)%360-180;return rt<-180?rt+360:rt}(i.center.lng,Ve);const $e=Ys(Ve),et=Ze(Js(we),0,1);return new lh($e,et)}class nz{constructor(n,o,c){this.a=Ss([],n,c),this.b=Ss([],o,c),this.center=c;const p=Mi([],this.a),m=Mi([],this.b);this.angle=Math.acos(Ko(p,m))}}function s_(i,n){if(i.angle===0)return null;let o;return o=i.a[n]===0?1/i.angle*.5*Math.PI:1/i.angle*Math.atan(i.b[n]/i.a[n]/Math.sin(i.angle)-1/Math.tan(i.angle)),o<0||o>1?null:function(c,p,m,y){const b=Math.sin(m);return c*(Math.sin((1-y)*m)/b)+p*(Math.sin(y*m)/b)}(i.a[n],i.b[n],i.angle,Ze(o,0,1))+i.center[n]}function Ks(i){if(i.z<=1)return tz[i.z+2*i.y+i.x];const n=a_(Lg(i));return ki.fromPoints(n)}function qc(i,n,o){return wo(i,i,1-o),$p(i,i,n,o)}function ST(i,n){const o=ah(n.zoom);if(o===0)return Ks(i);const c=Lg(i),p=a_(c),m=Ys(c.getWest())*n.worldSize,y=Ys(c.getEast())*n.worldSize,b=Js(c.getNorth())*n.worldSize,E=Js(c.getSouth())*n.worldSize,A=[m,b,0],I=[y,b,0],N=[m,E,0],O=[y,E,0],j=Yx([],n.globeMatrix);return _r(A,A,j),_r(I,I,j),_r(N,N,j),_r(O,O,j),p[0]=qc(p[0],N,o),p[1]=qc(p[1],O,o),p[2]=qc(p[2],I,o),p[3]=qc(p[3],A,o),ki.fromPoints(p)}function CT(i,n,o){for(const c of i)_r(c,c,n),wo(c,c,o)}function rz(i,n,o){const c=n/i.worldSize,p=i.globeMatrix;if(o.z<=1){const $e=Ks(o).getCorners();return CT($e,p,c),ki.fromPoints($e)}const m=Lg(o),y=a_(m);CT(y,p,c);const b=Number.MAX_VALUE,E=[-b,-b,-b],A=[b,b,b];if(m.contains(i.center)){for(const ut of y)Op(A,A,ut),Bp(E,E,ut);E[2]=0;const $e=i.point,et=[$e.x*c,$e.y*c,0];return Op(A,A,et),Bp(E,E,et),new ki(A,E)}const I=[p[12]*c,p[13]*c,p[14]*c],N=m.getCenter(),O=Ze(i.center.lat,-li,li),j=Ze(N.lat,-li,li),G=Ys(i.center.lng),X=Js(O);let te=G-Ys(N.lng);const ue=X-Js(j);te>.5?te-=1:te<-.5&&(te+=1);let xe=0;Math.abs(te)>Math.abs(ue)?xe=te>=0?1:3:(xe=ue>=0?0:2,$p(I,I,[p[4]*c,p[5]*c,p[6]*c],-Math.sin(Ie(ue>=0?m.getSouth():m.getNorth()))*Xs));const he=y[xe],ge=y[(xe+1)%4],Ee=new nz(he,ge,I),we=[s_(Ee,0)||he[0],s_(Ee,1)||he[1],s_(Ee,2)||he[2]],Ve=ah(i.zoom);if(Ve>0){const $e=function({x:ut,y:We,z:rt},it,at,ft,Je){const Ct=1/(1<<rt);let Lt=ut*Ct,At=Lt+Ct,rn=We*Ct,yt=rn+Ct,qt=0;const on=(Lt+At)/2-ft;return on>.5?qt=-1:on<-.5&&(qt=1),Lt=((Lt+qt)*it-(ft*=it))*at+ft,At=((At+qt)*it-ft)*at+ft,rn=(rn*it-(Je*=it))*at+Je,yt=(yt*it-Je)*at+Je,[[Lt,yt,0],[At,yt,0],[At,rn,0],[Lt,rn,0]]}(o,n,i._pixelsPerMercatorPixel,G,X);for(let ut=0;ut<y.length;ut++)qc(y[ut],$e[ut],Ve);const et=Ma([],$e[xe],$e[(xe+1)%4]);wo(et,et,.5),qc(we,et,Ve)}for(const $e of y)Op(A,A,$e),Bp(E,E,$e);return A[2]=Math.min(he[2],ge[2]),Op(A,A,we),Bp(E,E,we),new ki(A,E)}function Lg({x:i,y:n,z:o}){const c=1/(1<<o),p=new Bn(Eo(i*c),ai((n+1)*c)),m=new Bn(Eo((i+1)*c),ai(n*c));return new vl(p,m)}function a_(i){const n=Ie(i.getNorth()),o=Ie(i.getSouth()),c=Math.cos(n),p=Math.cos(o),m=Math.sin(n),y=Math.sin(o),b=i.getWest(),E=i.getEast();return[oh(p,y,b),oh(p,y,E),oh(c,m,E),oh(c,m,b)]}function oh(i,n,o,c=Xs){return o=Ie(o),[i*Math.sin(o)*c,-n*c,i*Math.cos(o)*c]}function sh(i,n,o){return oh(Math.cos(Ie(i)),Math.sin(Ie(i)),n,o)}function Gp(i,n,o,c){const p=1<<o.z,m=(i/Zt+o.x)/p;return sh(ai((n/Zt+o.y)/p),Eo(m),c)}function Fg({min:i,max:n}){return ez/Math.max(n[0]-i[0],n[1]-i[1],n[2]-i[2])}const AT=new Float64Array(16);function qp(i){const n=Fg(i),o=uT(AT,[n,n,n]);return Fp(o,o,((c=[])[0]=-(p=i.min)[0],c[1]=-p[1],c[2]=-p[2],c));var c,p}function l_(i){const n=(c=i.min,(o=AT)[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=c[0],o[13]=c[1],o[14]=c[2],o[15]=1,o);var o,c;const p=1/Fg(i);return Uc(n,n,[p,p,p])}function MT(i,n,o,c,p){const m=function(E){const A=Zt/(2*Math.PI);return E/(2*Math.PI)/A}(o),y=[i,n,-o/(2*Math.PI)],b=Ts(new Float64Array(16));return Fp(b,b,y),Uc(b,b,[m,m,m]),Jx(b,b,Ie(-p)),zg(b,b,Ie(-c)),b}function ah(i){return Ye(o_,ET,i)}function kT(i,n){const o=sh(n.lat,n.lng),c=function(G){const X=sh(G._center.lat,G._center.lng);let te=t_([],ih(0,1,0),X);const ue=hT([],-G.angle,X);te=_r(te,te,ue),hT(ue,-G._pitch,te);const xe=Mi([],X);return wo(xe,xe,Ng(G.cameraToCenterDistance/G.pixelsPerMeter)),_r(xe,xe,ue),Ma([],X,xe)}(i);return y=(p=e_([],c,o))[0],b=p[1],E=p[2],A=(m=o)[0],I=m[1],N=m[2],j=(O=Math.sqrt(y*y+b*b+E*E)*Math.sqrt(A*A+I*I+N*N))&&Ko(p,m)/O,Math.acos(Math.min(Math.max(j,-1),1));var p,m,y,b,E,A,I,N,O,j}function c_(i,n){return kT(i,n)>Math.PI/2*1.01}const PT=Ie(85),iz=Math.cos(PT),oz=Math.sin(PT),Hp=63710088e-1,IT=2*Math.PI*Hp;class bl{constructor(n,o){if(isNaN(n)||isNaN(o))throw new Error(`Invalid LngLat object: (${n}, ${o})`);if(this.lng=+n,this.lat=+o,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new bl(De(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const o=Math.PI/180,c=this.lat*o,p=n.lat*o,m=Math.sin(c)*Math.sin(p)+Math.cos(c)*Math.cos(p)*Math.cos((n.lng-this.lng)*o);return Hp*Math.acos(Math.min(m,1))}toBounds(n=0){const o=360*n/40075017,c=o/Math.cos(Math.PI/180*this.lat);return new vl(new bl(this.lng-c,this.lat-o),new bl(this.lng+c,this.lat+o))}toEcef(n){const o=Ng(n);return sh(this.lat,this.lng,Xs+o)}static convert(n){if(n instanceof bl)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new bl(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new bl(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var Bn=bl;function u_(i){return IT*Math.cos(i*Math.PI/180)}function Ys(i){return(180+i)/360}function Js(i){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360}function Cs(i,n){return i/u_(n)}function Eo(i){return 360*i-180}function ai(i){return 360/Math.PI*Math.atan(Math.exp((180-360*i)*Math.PI/180))-90}function DT(i,n){return i*u_(ai(n))}const li=85.051129;function zT(i){return 1/Math.cos(i*Math.PI/180)}class lh{constructor(n,o,c=0){this.x=+n,this.y=+o,this.z=+c}static fromLngLat(n,o=0){const c=Bn.convert(n);return new lh(Ys(c.lng),Js(c.lat),Cs(o,c.lat))}toLngLat(){return new Bn(Eo(this.x),ai(this.y))}toAltitude(){return DT(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/IT*zT(ai(this.y))}}function h_(i,n,o,c,p,m,y,b,E){const A=(n+c)/2,I=(o+p)/2,N=new ve(A,I);b(N),function(O,j,G,X,te,ue){const xe=G-te,he=X-ue;return Math.abs((X-j)*xe-(G-O)*he)/Math.hypot(xe,he)}(N.x,N.y,m.x,m.y,y.x,y.y)>=E?(h_(i,n,o,A,I,m,N,b,E),h_(i,A,I,c,p,N,y,b,E)):i.push(y)}function NT(i,n,o){let c=i[0],p=c.x,m=c.y;n(c);const y=[c];for(let b=1;b<i.length;b++){const E=i[b],{x:A,y:I}=E;n(E),h_(y,p,m,A,I,c,E,n,o),p=A,m=I,c=E}return y}function d_(i,n,o,c){if(c(n,o)){const p=n.add(o)._mult(.5);d_(i,n,p,c),d_(i,p,o,c)}else i.push(o)}function sz(i,n){let o=i[0];const c=[o];for(let p=1;p<i.length;p++){const m=i[p];d_(c,o,m,n),o=m}return c}const p_=Math.pow(2,14)-1,LT=-p_-1;function az(i,n){const o=Math.round(i.x*n),c=Math.round(i.y*n);return i.x=Ze(o,LT,p_),i.y=Ze(c,LT,p_),(o<i.x||o>i.x+1||c<i.y||c>i.y+1)&&tn("Geometry exceeds allowed extent, reduce your vector tile buffer size"),i}function ka(i,n,o){const c=i.loadGeometry(),p=i.extent,m=Zt/p;if(n&&o&&o.projection.isReprojectedInTileSpace){const y=1<<n.z,{scale:b,x:E,y:A,projection:I}=o,N=O=>{const j=Eo((n.x+O.x/p)/y),G=ai((n.y+O.y/p)/y),X=I.project(j,G);O.x=(X.x*b-E)*p,O.y=(X.y*b-A)*p};for(let O=0;O<c.length;O++)if(i.type!==1)c[O]=NT(c[O],N,1);else{const j=[];for(const G of c[O])G.x<0||G.x>=p||G.y<0||G.y>=p||(N(G),j.push(G));c[O]=j}}for(const y of c)for(const b of y)az(b,m);return c}function Hc(i,n){return{type:i.type,id:i.id,properties:i.properties,geometry:n?ka(i):[]}}function Rg(i,n,o,c,p){i.emplaceBack(2*n+(c+1)/2,2*o+(p+1)/2)}function Og(i,n,o){i.emplaceBack(n.x,n.y,n.z,o[0]*16384,o[1]*16384,o[2]*16384)}class f_{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(o=>o.id),this.index=n.index,this.hasPattern=!1,this.projection=n.projection,this.layoutVertexArray=new ct,this.indexArray=new $t,this.segments=new Cr,this.programConfigurations=new $c(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(n,o,c,p){const m=this.layers[0],y=[];let b=null;m.type==="circle"&&(b=m.layout.get("circle-sort-key"));for(const{feature:A,id:I,index:N,sourceLayerIndex:O}of n){const j=this.layers[0]._featureFilter.needGeometry,G=Hc(A,j);if(!this.layers[0]._featureFilter.filter(new z(this.zoom),G,c))continue;const X=b?b.evaluate(G,{},c):void 0,te={id:I,properties:A.properties,type:A.type,sourceLayerIndex:O,index:N,geometry:j?G.geometry:ka(A,c,p),patterns:{},sortKey:X};y.push(te)}b&&y.sort((A,I)=>A.sortKey-I.sortKey);let E=null;p.projection.name==="globe"&&(this.globeExtVertexArray=new ht,E=p.projection);for(const A of y){const{geometry:I,index:N,sourceLayerIndex:O}=A,j=n[N].feature;this.addFeature(A,I,N,o.availableImages,c,E),o.featureIndex.insert(j,I,N,O,this.index)}}update(n,o,c,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,o,this.stateDependentLayers,c,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,WD.members),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=n.createVertexBuffer(this.globeExtVertexArray,ZD.members))),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(n,o,c,p,m,y){for(const b of o)for(const E of b){const A=E.x,I=E.y;if(A<0||A>=Zt||I<0||I>=Zt)continue;if(y){const j=y.projectTilePoint(A,I,m),G=y.upVector(m,A,I),X=this.globeExtVertexArray;Og(X,j,G),Og(X,j,G),Og(X,j,G),Og(X,j,G)}const N=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),O=N.vertexLength;Rg(this.layoutVertexArray,A,I,-1,-1),Rg(this.layoutVertexArray,A,I,1,-1),Rg(this.layoutVertexArray,A,I,1,1),Rg(this.layoutVertexArray,A,I,-1,1),this.indexArray.emplaceBack(O,O+1,O+2),this.indexArray.emplaceBack(O,O+2,O+3),N.vertexLength+=4,N.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,c,{},p,m)}}function FT(i,n){for(let o=0;o<i.length;o++)if(Wc(n,i[o]))return!0;for(let o=0;o<n.length;o++)if(Wc(i,n[o]))return!0;return!!m_(i,n)}function lz(i,n,o){return!!Wc(i,n)||!!g_(n,i,o)}function RT(i,n){if(i.length===1)return BT(n,i[0]);for(let o=0;o<n.length;o++){const c=n[o];for(let p=0;p<c.length;p++)if(Wc(i,c[p]))return!0}for(let o=0;o<i.length;o++)if(BT(n,i[o]))return!0;for(let o=0;o<n.length;o++)if(m_(i,n[o]))return!0;return!1}function cz(i,n,o){if(i.length>1){if(m_(i,n))return!0;for(let c=0;c<n.length;c++)if(g_(n[c],i,o))return!0}for(let c=0;c<i.length;c++)if(g_(i[c],n,o))return!0;return!1}function m_(i,n){if(i.length===0||n.length===0)return!1;for(let o=0;o<i.length-1;o++){const c=i[o],p=i[o+1];for(let m=0;m<n.length-1;m++)if(uz(c,p,n[m],n[m+1]))return!0}return!1}function uz(i,n,o,c){return Wn(i,o,c)!==Wn(n,o,c)&&Wn(i,n,o)!==Wn(i,n,c)}function g_(i,n,o){const c=o*o;if(n.length===1)return i.distSqr(n[0])<c;for(let p=1;p<n.length;p++)if(OT(i,n[p-1],n[p])<c)return!0;return!1}function OT(i,n,o){const c=n.distSqr(o);if(c===0)return i.distSqr(n);const p=((i.x-n.x)*(o.x-n.x)+(i.y-n.y)*(o.y-n.y))/c;return i.distSqr(p<0?n:p>1?o:o.sub(n)._mult(p)._add(n))}function BT(i,n){let o,c,p,m=!1;for(let y=0;y<i.length;y++){o=i[y];for(let b=0,E=o.length-1;b<o.length;E=b++)c=o[b],p=o[E],c.y>n.y!=p.y>n.y&&n.x<(p.x-c.x)*(n.y-c.y)/(p.y-c.y)+c.x&&(m=!m)}return m}function Wc(i,n){let o=!1;for(let c=0,p=i.length-1;c<i.length;p=c++){const m=i[c],y=i[p];m.y>n.y!=y.y>n.y&&n.x<(y.x-m.x)*(n.y-m.y)/(y.y-m.y)+m.x&&(o=!o)}return o}function $T(i,n,o,c,p){for(const y of i)if(n<=y.x&&o<=y.y&&c>=y.x&&p>=y.y)return!0;const m=[new ve(n,o),new ve(n,p),new ve(c,p),new ve(c,o)];if(i.length>2){for(const y of m)if(Wc(i,y))return!0}for(let y=0;y<i.length-1;y++)if(hz(i[y],i[y+1],m))return!0;return!1}function hz(i,n,o){const c=o[0],p=o[2];if(i.x<c.x&&n.x<c.x||i.x>p.x&&n.x>p.x||i.y<c.y&&n.y<c.y||i.y>p.y&&n.y>p.y)return!1;const m=Wn(i,n,o[0]);return m!==Wn(i,n,o[1])||m!==Wn(i,n,o[2])||m!==Wn(i,n,o[3])}function ch(i,n,o){const c=n.paint.get(i).value;return c.kind==="constant"?c.value:o.programConfigurations.get(n.id).getMaxValue(i)}function Bg(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function jT(i,n,o,c,p){if(!n[0]&&!n[1])return i;const m=ve.convert(n)._mult(p);o==="viewport"&&m._rotate(-c);const y=[];for(let b=0;b<i.length;b++)y.push(i[b].sub(m));return y}function UT(i,n,o,c){const p=ve.convert(i)._mult(c);return n==="viewport"&&p._rotate(-o),p}It(f_,"CircleBucket",{omit:["layers"]});const dz=new pe({"circle-sort-key":new ie(Qe.layout_circle["circle-sort-key"])});var pz={paint:new pe({"circle-radius":new ie(Qe.paint_circle["circle-radius"]),"circle-color":new ie(Qe.paint_circle["circle-color"]),"circle-blur":new ie(Qe.paint_circle["circle-blur"]),"circle-opacity":new ie(Qe.paint_circle["circle-opacity"]),"circle-translate":new Z(Qe.paint_circle["circle-translate"]),"circle-translate-anchor":new Z(Qe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Z(Qe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Z(Qe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ie(Qe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ie(Qe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ie(Qe.paint_circle["circle-stroke-opacity"])}),layout:dz};function VT(i,n,o,c,p,m,y,b,E){if(m&&i.queryGeometry.isAboveHorizon)return!1;m&&(E*=i.pixelToTileUnitsFactor);const A=i.tileID.canonical,I=o.projection.upVectorScale(A,o.center.lat,o.worldSize).metersToTile;for(const N of n)for(const O of N){const j=O.add(b),G=p&&o.elevation?o.elevation.exaggeration()*p.getElevationAt(j.x,j.y,!0):0,X=o.projection.projectTilePoint(j.x,j.y,A);if(G>0){const he=o.projection.upVector(A,j.x,j.y);X.x+=he[0]*I*G,X.y+=he[1]*I*G,X.z+=he[2]*I*G}const te=m?j:fz(X.x,X.y,X.z,c),ue=m?i.tilespaceRays.map(he=>gz(he,G)):i.queryGeometry.screenGeometry,xe=Vc([],[X.x,X.y,X.z,1],c);if(!y&&m?E*=xe[3]/o.cameraToCenterDistance:y&&!m&&(E*=o.cameraToCenterDistance/xe[3]),m){const he=ai((O.y/Zt+A.y)/(1<<A.z));E/=o.projection.pixelsPerMeter(he,1)/Cs(1,he)}if(lz(ue,te,E))return!0}return!1}function fz(i,n,o,c){const p=Vc([],[i,n,o,1],c);return new ve(p[0]/p[3],p[1]/p[3])}const GT=ih(0,0,0),mz=ih(0,0,1);function gz(i,n){const o=Qx();return GT[2]=n,i.intersectsPlane(GT,mz,o),new ve(o[0],o[1])}class qT extends f_{}function HT(i,{width:n,height:o},c,p){if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==n*o*c)throw new RangeError("mismatched image size")}else p=new Uint8Array(n*o*c);return i.width=n,i.height=o,i.data=p,i}function WT(i,n,o){const{width:c,height:p}=n;c===i.width&&p===i.height||(y_(i,n,{x:0,y:0},{x:0,y:0},{width:Math.min(i.width,c),height:Math.min(i.height,p)},o),i.width=c,i.height=p,i.data=n.data)}function y_(i,n,o,c,p,m){if(p.width===0||p.height===0)return n;if(p.width>i.width||p.height>i.height||o.x>i.width-p.width||o.y>i.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>n.width||p.height>n.height||c.x>n.width-p.width||c.y>n.height-p.height)throw new RangeError("out of range destination coordinates for image copy");const y=i.data,b=n.data;for(let E=0;E<p.height;E++){const A=((o.y+E)*i.width+o.x)*m,I=((c.y+E)*n.width+c.x)*m;for(let N=0;N<p.width*m;N++)b[I+N]=y[A+N]}return n}It(qT,"HeatmapBucket",{omit:["layers"]});class Pa{constructor(n,o){HT(this,n,1,o)}resize(n){WT(this,new Pa(n),1)}clone(){return new Pa({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,o,c,p,m){y_(n,o,c,p,m,1)}}class oo{constructor(n,o){HT(this,n,4,o)}resize(n){WT(this,new oo(n),4)}replace(n,o){o?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new oo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,o,c,p,m){y_(n,o,c,p,m,4)}}It(Pa,"AlphaImage"),It(oo,"RGBAImage");var yz={paint:new pe({"heatmap-radius":new ie(Qe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ie(Qe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Z(Qe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new de(Qe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Z(Qe.paint_heatmap["heatmap-opacity"])})};function x_(i){const n={},o=i.resolution||256,c=i.clips?i.clips.length:1,p=i.image||new oo({width:o,height:c}),m=(y,b,E)=>{n[i.evaluationKey]=E;const A=i.expression.evaluate(n);p.data[y+b+0]=Math.floor(255*A.r/A.a),p.data[y+b+1]=Math.floor(255*A.g/A.a),p.data[y+b+2]=Math.floor(255*A.b/A.a),p.data[y+b+3]=Math.floor(255*A.a)};if(i.clips)for(let y=0,b=0;y<c;++y,b+=4*o)for(let E=0,A=0;E<o;E++,A+=4){const I=E/(o-1),{start:N,end:O}=i.clips[y];m(b,A,N*(1-I)+O*I)}else for(let y=0,b=0;y<o;y++,b+=4)m(0,b,y/(o-1));return p}var xz={paint:new pe({"hillshade-illumination-direction":new Z(Qe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Z(Qe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Z(Qe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Z(Qe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Z(Qe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Z(Qe.paint_hillshade["hillshade-accent-color"])})};const _z=ze([{name:"a_pos",components:2,type:"Int16"}],4),{members:vz}=_z;var __={exports:{}};function $g(i,n,o){o=o||2;var c,p,m,y,b,E,A,I=n&&n.length,N=I?n[0]*o:i.length,O=ZT(i,0,N,o,!0),j=[];if(!O||O.next===O.prev)return j;if(I&&(O=function(X,te,ue,xe){var he,ge,Ee,we=[];for(he=0,ge=te.length;he<ge;he++)(Ee=ZT(X,te[he]*xe,he<ge-1?te[he+1]*xe:X.length,xe,!1))===Ee.next&&(Ee.steiner=!0),we.push(Mz(Ee));for(we.sort(Sz),he=0;he<we.length;he++)ue=Cz(we[he],ue);return ue}(i,n,O,o)),i.length>80*o){c=m=i[0],p=y=i[1];for(var G=o;G<N;G+=o)(b=i[G])<c&&(c=b),(E=i[G+1])<p&&(p=E),b>m&&(m=b),E>y&&(y=E);A=(A=Math.max(m-c,y-p))!==0?32767/A:0}return Wp(O,j,o,c,p,A,0),j}function ZT(i,n,o,c,p){var m,y;if(p===w_(i,n,o,c)>0)for(m=n;m<o;m+=c)y=YT(m,i[m],i[m+1],y);else for(m=o-c;m>=n;m-=c)y=YT(m,i[m],i[m+1],y);return y&&jg(y,y.next)&&(Xp(y),y=y.next),y}function Zc(i,n){if(!i)return i;n||(n=i);var o,c=i;do if(o=!1,c.steiner||!jg(c,c.next)&&Ar(c.prev,c,c.next)!==0)c=c.next;else{if(Xp(c),(c=n=c.prev)===c.next)break;o=!0}while(o||c!==n);return n}function Wp(i,n,o,c,p,m,y){if(i){!y&&m&&function(I,N,O,j){var G=I;do G.z===0&&(G.z=v_(G.x,G.y,N,O,j)),G.prevZ=G.prev,G.nextZ=G.next,G=G.next;while(G!==I);G.prevZ.nextZ=null,G.prevZ=null,function(X){var te,ue,xe,he,ge,Ee,we,Ve,$e=1;do{for(ue=X,X=null,ge=null,Ee=0;ue;){for(Ee++,xe=ue,we=0,te=0;te<$e&&(we++,xe=xe.nextZ);te++);for(Ve=$e;we>0||Ve>0&&xe;)we!==0&&(Ve===0||!xe||ue.z<=xe.z)?(he=ue,ue=ue.nextZ,we--):(he=xe,xe=xe.nextZ,Ve--),ge?ge.nextZ=he:X=he,he.prevZ=ge,ge=he;ue=xe}ge.nextZ=null,$e*=2}while(Ee>1)}(G)}(i,c,p,m);for(var b,E,A=i;i.prev!==i.next;)if(b=i.prev,E=i.next,m?wz(i,c,p,m):bz(i))n.push(b.i/o|0),n.push(i.i/o|0),n.push(E.i/o|0),Xp(i),i=E.next,A=E.next;else if((i=E)===A){y?y===1?Wp(i=Ez(Zc(i),n,o),n,o,c,p,m,2):y===2&&Tz(i,n,o,c,p,m):Wp(Zc(i),n,o,c,p,m,1);break}}}function bz(i){var n=i.prev,o=i,c=i.next;if(Ar(n,o,c)>=0)return!1;for(var p=n.x,m=o.x,y=c.x,b=n.y,E=o.y,A=c.y,I=p<m?p<y?p:y:m<y?m:y,N=b<E?b<A?b:A:E<A?E:A,O=p>m?p>y?p:y:m>y?m:y,j=b>E?b>A?b:A:E>A?E:A,G=c.next;G!==n;){if(G.x>=I&&G.x<=O&&G.y>=N&&G.y<=j&&uh(p,b,m,E,y,A,G.x,G.y)&&Ar(G.prev,G,G.next)>=0)return!1;G=G.next}return!0}function wz(i,n,o,c){var p=i.prev,m=i,y=i.next;if(Ar(p,m,y)>=0)return!1;for(var b=p.x,E=m.x,A=y.x,I=p.y,N=m.y,O=y.y,j=b<E?b<A?b:A:E<A?E:A,G=I<N?I<O?I:O:N<O?N:O,X=b>E?b>A?b:A:E>A?E:A,te=I>N?I>O?I:O:N>O?N:O,ue=v_(j,G,n,o,c),xe=v_(X,te,n,o,c),he=i.prevZ,ge=i.nextZ;he&&he.z>=ue&&ge&&ge.z<=xe;){if(he.x>=j&&he.x<=X&&he.y>=G&&he.y<=te&&he!==p&&he!==y&&uh(b,I,E,N,A,O,he.x,he.y)&&Ar(he.prev,he,he.next)>=0||(he=he.prevZ,ge.x>=j&&ge.x<=X&&ge.y>=G&&ge.y<=te&&ge!==p&&ge!==y&&uh(b,I,E,N,A,O,ge.x,ge.y)&&Ar(ge.prev,ge,ge.next)>=0))return!1;ge=ge.nextZ}for(;he&&he.z>=ue;){if(he.x>=j&&he.x<=X&&he.y>=G&&he.y<=te&&he!==p&&he!==y&&uh(b,I,E,N,A,O,he.x,he.y)&&Ar(he.prev,he,he.next)>=0)return!1;he=he.prevZ}for(;ge&&ge.z<=xe;){if(ge.x>=j&&ge.x<=X&&ge.y>=G&&ge.y<=te&&ge!==p&&ge!==y&&uh(b,I,E,N,A,O,ge.x,ge.y)&&Ar(ge.prev,ge,ge.next)>=0)return!1;ge=ge.nextZ}return!0}function Ez(i,n,o){var c=i;do{var p=c.prev,m=c.next.next;!jg(p,m)&&XT(p,c,c.next,m)&&Zp(p,m)&&Zp(m,p)&&(n.push(p.i/o|0),n.push(c.i/o|0),n.push(m.i/o|0),Xp(c),Xp(c.next),c=i=m),c=c.next}while(c!==i);return Zc(c)}function Tz(i,n,o,c,p,m){var y=i;do{for(var b=y.next.next;b!==y.prev;){if(y.i!==b.i&&kz(y,b)){var E=KT(y,b);return y=Zc(y,y.next),E=Zc(E,E.next),Wp(y,n,o,c,p,m,0),void Wp(E,n,o,c,p,m,0)}b=b.next}y=y.next}while(y!==i)}function Sz(i,n){return i.x-n.x}function Cz(i,n){var o=function(p,m){var y,b=m,E=p.x,A=p.y,I=-1/0;do{if(A<=b.y&&A>=b.next.y&&b.next.y!==b.y){var N=b.x+(A-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(N<=E&&N>I&&(I=N,y=b.x<b.next.x?b:b.next,N===E))return y}b=b.next}while(b!==m);if(!y)return null;var O,j=y,G=y.x,X=y.y,te=1/0;b=y;do E>=b.x&&b.x>=G&&E!==b.x&&uh(A<X?E:I,A,G,X,A<X?I:E,A,b.x,b.y)&&(O=Math.abs(A-b.y)/(E-b.x),Zp(b,p)&&(O<te||O===te&&(b.x>y.x||b.x===y.x&&Az(y,b)))&&(y=b,te=O)),b=b.next;while(b!==j);return y}(i,n);if(!o)return n;var c=KT(o,i);return Zc(c,c.next),Zc(o,o.next)}function Az(i,n){return Ar(i.prev,i,n.prev)<0&&Ar(n.next,i,i.next)<0}function v_(i,n,o,c,p){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-o)*p|0)|i<<8))|i<<4))|i<<2))|i<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-c)*p|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function Mz(i){var n=i,o=i;do(n.x<o.x||n.x===o.x&&n.y<o.y)&&(o=n),n=n.next;while(n!==i);return o}function uh(i,n,o,c,p,m,y,b){return(p-y)*(n-b)>=(i-y)*(m-b)&&(i-y)*(c-b)>=(o-y)*(n-b)&&(o-y)*(m-b)>=(p-y)*(c-b)}function kz(i,n){return i.next.i!==n.i&&i.prev.i!==n.i&&!function(o,c){var p=o;do{if(p.i!==o.i&&p.next.i!==o.i&&p.i!==c.i&&p.next.i!==c.i&&XT(p,p.next,o,c))return!0;p=p.next}while(p!==o);return!1}(i,n)&&(Zp(i,n)&&Zp(n,i)&&function(o,c){var p=o,m=!1,y=(o.x+c.x)/2,b=(o.y+c.y)/2;do p.y>b!=p.next.y>b&&p.next.y!==p.y&&y<(p.next.x-p.x)*(b-p.y)/(p.next.y-p.y)+p.x&&(m=!m),p=p.next;while(p!==o);return m}(i,n)&&(Ar(i.prev,i,n.prev)||Ar(i,n.prev,n))||jg(i,n)&&Ar(i.prev,i,i.next)>0&&Ar(n.prev,n,n.next)>0)}function Ar(i,n,o){return(n.y-i.y)*(o.x-n.x)-(n.x-i.x)*(o.y-n.y)}function jg(i,n){return i.x===n.x&&i.y===n.y}function XT(i,n,o,c){var p=Vg(Ar(i,n,o)),m=Vg(Ar(i,n,c)),y=Vg(Ar(o,c,i)),b=Vg(Ar(o,c,n));return p!==m&&y!==b||!(p!==0||!Ug(i,o,n))||!(m!==0||!Ug(i,c,n))||!(y!==0||!Ug(o,i,c))||!(b!==0||!Ug(o,n,c))}function Ug(i,n,o){return n.x<=Math.max(i.x,o.x)&&n.x>=Math.min(i.x,o.x)&&n.y<=Math.max(i.y,o.y)&&n.y>=Math.min(i.y,o.y)}function Vg(i){return i>0?1:i<0?-1:0}function Zp(i,n){return Ar(i.prev,i,i.next)<0?Ar(i,n,i.next)>=0&&Ar(i,i.prev,n)>=0:Ar(i,n,i.prev)<0||Ar(i,i.next,n)<0}function KT(i,n){var o=new b_(i.i,i.x,i.y),c=new b_(n.i,n.x,n.y),p=i.next,m=n.prev;return i.next=n,n.prev=i,o.next=p,p.prev=o,c.next=o,o.prev=c,m.next=c,c.prev=m,c}function YT(i,n,o,c){var p=new b_(i,n,o);return c?(p.next=c.next,p.prev=c,c.next.prev=p,c.next=p):(p.prev=p,p.next=p),p}function Xp(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function b_(i,n,o){this.i=i,this.x=n,this.y=o,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function w_(i,n,o,c){for(var p=0,m=n,y=o-c;m<o;m+=c)p+=(i[y]-i[m])*(i[m+1]+i[y+1]),y=m;return p}__.exports=$g,__.exports.default=$g,$g.deviation=function(i,n,o,c){var p=n&&n.length,m=Math.abs(w_(i,0,p?n[0]*o:i.length,o));if(p)for(var y=0,b=n.length;y<b;y++)m-=Math.abs(w_(i,n[y]*o,y<b-1?n[y+1]*o:i.length,o));var E=0;for(y=0;y<c.length;y+=3){var A=c[y]*o,I=c[y+1]*o,N=c[y+2]*o;E+=Math.abs((i[A]-i[N])*(i[I+1]-i[A+1])-(i[A]-i[I])*(i[N+1]-i[A+1]))}return m===0&&E===0?0:Math.abs((E-m)/m)},$g.flatten=function(i){for(var n=i[0][0].length,o={vertices:[],holes:[],dimensions:n},c=0,p=0;p<i.length;p++){for(var m=0;m<i[p].length;m++)for(var y=0;y<n;y++)o.vertices.push(i[p][m][y]);p>0&&o.holes.push(c+=i[p-1].length)}return o};var E_=V(__.exports);function Pz(i,n,o,c,p){JT(i,n,o||0,c||i.length-1,p||Iz)}function JT(i,n,o,c,p){for(;c>o;){if(c-o>600){var m=c-o+1,y=n-o+1,b=Math.log(m),E=.5*Math.exp(2*b/3),A=.5*Math.sqrt(b*E*(m-E)/m)*(y-m/2<0?-1:1);JT(i,n,Math.max(o,Math.floor(n-y*E/m+A)),Math.min(c,Math.floor(n+(m-y)*E/m+A)),p)}var I=i[n],N=o,O=c;for(Kp(i,o,n),p(i[c],I)>0&&Kp(i,o,c);N<O;){for(Kp(i,N,O),N++,O--;p(i[N],I)<0;)N++;for(;p(i[O],I)>0;)O--}p(i[o],I)===0?Kp(i,o,O):Kp(i,++O,c),O<=n&&(o=O+1),n<=O&&(c=O-1)}}function Kp(i,n,o){var c=i[n];i[n]=i[o],i[o]=c}function Iz(i,n){return i<n?-1:i>n?1:0}function T_(i,n){const o=i.length;if(o<=1)return[i];const c=[];let p,m;for(let y=0;y<o;y++){const b=wr(i[y]);b!==0&&(i[y].area=Math.abs(b),m===void 0&&(m=b<0),m===b<0?(p&&c.push(p),p=[i[y]]):p.push(i[y]))}if(p&&c.push(p),n>1)for(let y=0;y<c.length;y++)c[y].length<=n||(Pz(c[y],n,1,c[y].length-1,Dz),c[y]=c[y].slice(0,n));return c}function Dz(i,n){return n.area-i.area}function S_(i,n,o){const c=o.patternDependencies;let p=!1;for(const m of n){const y=m.paint.get(`${i}-pattern`);y.isConstant()||(p=!0);const b=y.constantOr(null);b&&(p=!0,c[b]=!0)}return p}function C_(i,n,o,c,p){const m=p.patternDependencies;for(const y of n){const b=y.paint.get(`${i}-pattern`).value;if(b.kind!=="constant"){let E=b.evaluate({zoom:c},o,{},p.availableImages);E=E&&E.name?E.name:E,m[E]=!0,o.patterns[y.id]=E}}return o}class Gg{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(o=>o.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ct,this.indexArray=new $t,this.indexArray2=new Wr,this.programConfigurations=new $c(n.layers,n.zoom),this.segments=new Cr,this.segments2=new Cr,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id),this.projection=n.projection}populate(n,o,c,p){this.hasPattern=S_("fill",this.layers,o);const m=this.layers[0].layout.get("fill-sort-key"),y=[];for(const{feature:b,id:E,index:A,sourceLayerIndex:I}of n){const N=this.layers[0]._featureFilter.needGeometry,O=Hc(b,N);if(!this.layers[0]._featureFilter.filter(new z(this.zoom),O,c))continue;const j=m?m.evaluate(O,{},c,o.availableImages):void 0,G={id:E,properties:b.properties,type:b.type,sourceLayerIndex:I,index:A,geometry:N?O.geometry:ka(b,c,p),patterns:{},sortKey:j};y.push(G)}m&&y.sort((b,E)=>b.sortKey-E.sortKey);for(const b of y){const{geometry:E,index:A,sourceLayerIndex:I}=b;if(this.hasPattern){const N=C_("fill",this.layers,b,this.zoom,o);this.patternFeatures.push(N)}else this.addFeature(b,E,A,c,{},o.availableImages);o.featureIndex.insert(n[A].feature,E,A,I,this.index)}}update(n,o,c,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,o,this.stateDependentLayers,c,p)}addFeatures(n,o,c,p,m){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,o,c,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,vz),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,o,c,p,m,y=[]){for(const b of T_(o,500)){let E=0;for(const G of b)E+=G.length;const A=this.segments.prepareSegment(E,this.layoutVertexArray,this.indexArray),I=A.vertexLength,N=[],O=[];for(const G of b){if(G.length===0)continue;G!==b[0]&&O.push(N.length/2);const X=this.segments2.prepareSegment(G.length,this.layoutVertexArray,this.indexArray2),te=X.vertexLength;this.layoutVertexArray.emplaceBack(G[0].x,G[0].y),this.indexArray2.emplaceBack(te+G.length-1,te),N.push(G[0].x),N.push(G[0].y);for(let ue=1;ue<G.length;ue++)this.layoutVertexArray.emplaceBack(G[ue].x,G[ue].y),this.indexArray2.emplaceBack(te+ue-1,te+ue),N.push(G[ue].x),N.push(G[ue].y);X.vertexLength+=G.length,X.primitiveLength+=G.length}const j=E_(N,O);for(let G=0;G<j.length;G+=3)this.indexArray.emplaceBack(I+j[G],I+j[G+1],I+j[G+2]);A.vertexLength+=E,A.primitiveLength+=j.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,c,m,y,p)}}It(Gg,"FillBucket",{omit:["layers","patternFeatures"]});const zz=new pe({"fill-sort-key":new ie(Qe.layout_fill["fill-sort-key"])});var Nz={paint:new pe({"fill-antialias":new Z(Qe.paint_fill["fill-antialias"]),"fill-opacity":new ie(Qe.paint_fill["fill-opacity"]),"fill-color":new ie(Qe.paint_fill["fill-color"]),"fill-outline-color":new ie(Qe.paint_fill["fill-outline-color"]),"fill-translate":new Z(Qe.paint_fill["fill-translate"]),"fill-translate-anchor":new Z(Qe.paint_fill["fill-translate-anchor"]),"fill-pattern":new ie(Qe.paint_fill["fill-pattern"])}),layout:zz};const Lz=ze([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Fz=ze([{name:"a_centroid_pos",components:2,type:"Uint16"}]),Rz=ze([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:Oz}=Lz;var qg={},Bz=be,QT=hh;function hh(i,n,o,c,p){this.properties={},this.extent=o,this.type=0,this._pbf=i,this._geometry=-1,this._keys=c,this._values=p,i.readFields($z,this,n)}function $z(i,n,o){i==1?n.id=o.readVarint():i==2?function(c,p){for(var m=c.readVarint()+c.pos;c.pos<m;){var y=p._keys[c.readVarint()],b=p._values[c.readVarint()];p.properties[y]=b}}(o,n):i==3?n.type=o.readVarint():i==4&&(n._geometry=o.pos)}function jz(i){for(var n,o,c=0,p=0,m=i.length,y=m-1;p<m;y=p++)c+=((o=i[y]).x-(n=i[p]).x)*(n.y+o.y);return c}hh.types=["Unknown","Point","LineString","Polygon"],hh.prototype.loadGeometry=function(){var i=this._pbf;i.pos=this._geometry;for(var n,o=i.readVarint()+i.pos,c=1,p=0,m=0,y=0,b=[];i.pos<o;){if(p<=0){var E=i.readVarint();c=7&E,p=E>>3}if(p--,c===1||c===2)m+=i.readSVarint(),y+=i.readSVarint(),c===1&&(n&&b.push(n),n=[]),n.push(new Bz(m,y));else{if(c!==7)throw new Error("unknown command "+c);n&&n.push(n[0].clone())}}return n&&b.push(n),b},hh.prototype.bbox=function(){var i=this._pbf;i.pos=this._geometry;for(var n=i.readVarint()+i.pos,o=1,c=0,p=0,m=0,y=1/0,b=-1/0,E=1/0,A=-1/0;i.pos<n;){if(c<=0){var I=i.readVarint();o=7&I,c=I>>3}if(c--,o===1||o===2)(p+=i.readSVarint())<y&&(y=p),p>b&&(b=p),(m+=i.readSVarint())<E&&(E=m),m>A&&(A=m);else if(o!==7)throw new Error("unknown command "+o)}return[y,E,b,A]},hh.prototype.toGeoJSON=function(i,n,o){var c,p,m=this.extent*Math.pow(2,o),y=this.extent*i,b=this.extent*n,E=this.loadGeometry(),A=hh.types[this.type];function I(j){for(var G=0;G<j.length;G++){var X=j[G];j[G]=[360*(X.x+y)/m-180,360/Math.PI*Math.atan(Math.exp((180-360*(X.y+b)/m)*Math.PI/180))-90]}}switch(this.type){case 1:var N=[];for(c=0;c<E.length;c++)N[c]=E[c][0];I(E=N);break;case 2:for(c=0;c<E.length;c++)I(E[c]);break;case 3:for(E=function(j){var G=j.length;if(G<=1)return[j];for(var X,te,ue=[],xe=0;xe<G;xe++){var he=jz(j[xe]);he!==0&&(te===void 0&&(te=he<0),te===he<0?(X&&ue.push(X),X=[j[xe]]):X.push(j[xe]))}return X&&ue.push(X),ue}(E),c=0;c<E.length;c++)for(p=0;p<E[c].length;p++)I(E[c][p])}E.length===1?E=E[0]:A="Multi"+A;var O={type:"Feature",geometry:{type:A,coordinates:E},properties:this.properties};return"id"in this&&(O.id=this.id),O};var Uz=QT,eS=tS;function tS(i,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=i,this._keys=[],this._values=[],this._features=[],i.readFields(Vz,this,n),this.length=this._features.length}function Vz(i,n,o){i===15?n.version=o.readVarint():i===1?n.name=o.readString():i===5?n.extent=o.readVarint():i===2?n._features.push(o.pos):i===3?n._keys.push(o.readString()):i===4&&n._values.push(function(c){for(var p=null,m=c.readVarint()+c.pos;c.pos<m;){var y=c.readVarint()>>3;p=y===1?c.readString():y===2?c.readFloat():y===3?c.readDouble():y===4?c.readVarint64():y===5?c.readVarint():y===6?c.readSVarint():y===7?c.readBoolean():null}return p}(o))}tS.prototype.feature=function(i){if(i<0||i>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[i];var n=this._pbf.readVarint()+this._pbf.pos;return new Uz(this._pbf,n,this.extent,this._keys,this._values)};var Gz=eS;function qz(i,n,o){if(i===3){var c=new Gz(o,o.readVarint()+o.pos);c.length&&(n[c.name]=c)}}var A_=qg.VectorTile=function(i,n){this.layers=i.readFields(qz,{},n)},Hg=qg.VectorTileFeature=QT;function Wg(i,n,o,c){const p=[],m=c===0?(y,b,E,A,I,N)=>{y.push(new ve(N,E+(N-b)/(A-b)*(I-E)))}:(y,b,E,A,I,N)=>{y.push(new ve(b+(N-E)/(I-E)*(A-b),N))};for(const y of i){const b=[];for(const E of y){if(E.length<=2)continue;const A=[];for(let O=0;O<E.length-1;O++){const j=E[O].x,G=E[O].y,X=E[O+1].x,te=E[O+1].y,ue=c===0?j:G,xe=c===0?X:te;ue<n?xe>n&&m(A,j,G,X,te,n):ue>o?xe<o&&m(A,j,G,X,te,o):A.push(E[O]),xe<n&&ue>=n&&m(A,j,G,X,te,n),xe>o&&ue<=o&&m(A,j,G,X,te,o)}let I=E[E.length-1];const N=c===0?I.x:I.y;N>=n&&N<=o&&A.push(I),A.length&&(I=A[A.length-1],A[0].x===I.x&&A[0].y===I.y||A.push(A[0]),b.push(A))}b.length&&p.push(b)}return p}qg.VectorTileLayer=eS;const Hz=Hg.types,Wz=Math.pow(2,13);function Yp(i,n,o,c,p,m,y,b){i.emplaceBack((n<<1)+y,(o<<1)+m,(Math.floor(c*Wz)<<1)+p,Math.round(b))}function Jp(i,n,o){i.emplaceBack(n.x,n.y,n.z,o[0]*16384,o[1]*16384,o[2]*16384)}class nS{constructor(){this.acc=new ve(0,0),this.polyCount=[]}startRing(n){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new ve(n.x,n.y),this.max=new ve(n.x,n.y))}append(n,o){this.currentPolyCount.edges++,this.acc._add(n);const c=this.min,p=this.max;n.x<c.x?c.x=n.x:n.x>p.x&&(p.x=n.x),n.y<c.y?c.y=n.y:n.y>p.y&&(p.y=n.y),((n.x===0||n.x===Zt)&&n.x===o.x)!=((n.y===0||n.y===Zt)&&n.y===o.y)&&this.processBorderOverlap(n,o),o.x<0!=n.x<0&&this.addBorderIntersection(0,En(o.y,n.y,(0-o.x)/(n.x-o.x))),o.x>Zt!=n.x>Zt&&this.addBorderIntersection(1,En(o.y,n.y,(Zt-o.x)/(n.x-o.x))),o.y<0!=n.y<0&&this.addBorderIntersection(2,En(o.x,n.x,(0-o.y)/(n.y-o.y))),o.y>Zt!=n.y>Zt&&this.addBorderIntersection(3,En(o.x,n.x,(Zt-o.y)/(n.y-o.y)))}addBorderIntersection(n,o){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const c=this.borders[n];o<c[0]&&(c[0]=o),o>c[1]&&(c[1]=o)}processBorderOverlap(n,o){if(n.x===o.x){if(n.y===o.y)return;const c=n.x===0?0:1;this.addBorderIntersection(c,o.y),this.addBorderIntersection(c,n.y)}else{const c=n.y===0?2:3;this.addBorderIntersection(c,o.x),this.addBorderIntersection(c,n.x)}}centroid(){const n=this.polyCount.reduce((o,c)=>o+c.edges,0);return n!==0?this.acc.div(n)._round():new ve(0,0)}span(){return new ve(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((n,o)=>n+ +(o[0]!==Number.MAX_VALUE),0)}}class Qp{constructor(n){this.zoom=n.zoom,this.canonical=n.canonical,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(o=>o.id),this.index=n.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=n.projection,this.layoutVertexArray=new nt,this.centroidVertexArray=new bs,this.indexArray=new $t,this.programConfigurations=new $c(n.layers,n.zoom),this.segments=new Cr,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id),this.enableTerrain=n.enableTerrain}populate(n,o,c,p){this.features=[],this.hasPattern=S_("fill-extrusion",this.layers,o),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(m){const y=Math.exp(Math.PI*(1-m.y/(1<<m.z)*2));return 80150034*y/(y*y+1)/Zt/(1<<m.z)}(c),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:m,id:y,index:b,sourceLayerIndex:E}of n){const A=this.layers[0]._featureFilter.needGeometry,I=Hc(m,A);if(!this.layers[0]._featureFilter.filter(new z(this.zoom),I,c))continue;const N={id:y,sourceLayerIndex:E,index:b,geometry:A?I.geometry:ka(m,c,p),properties:m.properties,type:m.type,patterns:{}},O=this.layoutVertexArray.length;this.hasPattern?this.features.push(C_("fill-extrusion",this.layers,N,this.zoom,o)):this.addFeature(N,N.geometry,b,c,{},o.availableImages,p),o.featureIndex.insert(m,N.geometry,b,E,this.index,O)}this.sortBorders()}addFeatures(n,o,c,p,m){for(const y of this.features){const{geometry:b}=y;this.addFeature(y,b,y.index,o,c,p,m)}this.sortBorders()}update(n,o,c,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,o,this.stateDependentLayers,c,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Oz),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=n.createVertexBuffer(this.layoutVertexExtArray,Rz.members,!0))),this.programConfigurations.upload(n),this.uploaded=!0}uploadCentroid(n){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,Fz.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,o,c,p,m,y,b){const E=[new ve(0,0),new ve(Zt,Zt)],A=b.projection,I=A.name==="globe",N=this.enableTerrain&&!I?new nS:null,O=Hz[n.type]==="Polygon";I&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new ht);const j=T_(o,500);for(let ue=j.length-1;ue>=0;ue--){const xe=j[ue];(xe.length===0||(G=xe[0]).every(he=>he.x<=0)||G.every(he=>he.x>=Zt)||G.every(he=>he.y<=0)||G.every(he=>he.y>=Zt))&&j.splice(ue,1)}var G;let X;if(I)X=cS(j,E,p);else{X=[];for(const ue of j)X.push({polygon:ue,bounds:E})}const te=O?this.edgeRadius:0;for(const{polygon:ue,bounds:xe}of X){let he=0,ge=0;for(const we of ue)O&&!we[0].equals(we[we.length-1])&&we.push(we[0]),ge+=O?we.length-1:we.length;const Ee=this.segments.prepareSegment((O?5:4)*ge,this.layoutVertexArray,this.indexArray);if(O){const we=[],Ve=[];he=Ee.vertexLength;for(const et of ue){let ut,We;et.length&&et!==ue[0]&&Ve.push(we.length/2),ut=et[1].sub(et[0])._perp()._unit();for(let rt=1;rt<et.length;rt++){const it=et[rt],at=et[rt===et.length-1?1:rt+1];let{x:ft,y:Je}=it;if(te){We=at.sub(it)._perp()._unit();const Ct=ut.add(We)._unit(),Lt=te*Math.min(4,1/(ut.x*Ct.x+ut.y*Ct.y));ft+=Lt*Ct.x,Je+=Lt*Ct.y,ut=We}Yp(this.layoutVertexArray,ft,Je,0,0,1,1,0),Ee.vertexLength++,we.push(it.x,it.y),I&&Jp(this.layoutVertexExtArray,A.projectTilePoint(ft,Je,p),A.upVector(p,ft,Je))}}const $e=E_(we,Ve);for(let et=0;et<$e.length;et+=3)this.indexArray.emplaceBack(he+$e[et],he+$e[et+2],he+$e[et+1]),Ee.primitiveLength++}for(const we of ue){N&&we.length&&N.startRing(we[0]);let Ve,$e,et,ut=we.length>4&&sS(we[we.length-2],we[0],we[1]),We=te?Zz(we[we.length-2],we[0],we[1],te):0;$e=we[1].sub(we[0])._perp()._unit();let rt=!0;for(let it=1,at=0;it<we.length;it++){let ft=we[it-1],Je=we[it];const Ct=we[it===we.length-1?1:it+1];if(N&&O&&N.currentPolyCount.top++,oS(Je,ft,xe)){te&&($e=Ct.sub(Je)._perp()._unit(),rt=!rt);continue}N&&N.append(Je,ft);const Lt=Je.sub(ft)._perp(),At=Lt.x/(Math.abs(Lt.x)+Math.abs(Lt.y)),rn=Lt.y>0?1:0,yt=ft.dist(Je);if(at+yt>32768&&(at=0),te){et=Ct.sub(Je)._perp()._unit();let sn=iS(ft,Je,Ct,rS($e,et),te);isNaN(sn)&&(sn=0);const Kt=Je.sub(ft)._unit();ft=ft.add(Kt.mult(We))._round(),Je=Je.add(Kt.mult(-sn))._round(),We=sn,$e=et}const qt=Ee.vertexLength,on=we.length>4&&sS(ft,Je,Ct);let Sn=aS(at,ut,rt);if(Yp(this.layoutVertexArray,ft.x,ft.y,At,rn,0,0,Sn),Yp(this.layoutVertexArray,ft.x,ft.y,At,rn,0,1,Sn),at+=yt,Sn=aS(at,on,!rt),ut=on,Yp(this.layoutVertexArray,Je.x,Je.y,At,rn,0,0,Sn),Yp(this.layoutVertexArray,Je.x,Je.y,At,rn,0,1,Sn),Ee.vertexLength+=4,this.indexArray.emplaceBack(qt+0,qt+1,qt+2),this.indexArray.emplaceBack(qt+1,qt+3,qt+2),Ee.primitiveLength+=2,te){const sn=he+(it===1?we.length-2:it-2),Kt=it===1?he:sn+1;if(this.indexArray.emplaceBack(qt+1,sn,qt+3),this.indexArray.emplaceBack(sn,Kt,qt+3),Ee.primitiveLength+=2,Ve===void 0&&(Ve=qt),!oS(Ct,we[it],xe)){const Zn=it===we.length-1?Ve:Ee.vertexLength;this.indexArray.emplaceBack(qt+2,qt+3,Zn),this.indexArray.emplaceBack(qt+3,Zn+1,Zn),this.indexArray.emplaceBack(qt+3,Kt,Zn+1),Ee.primitiveLength+=3}rt=!rt}if(I){const sn=this.layoutVertexExtArray,Kt=A.projectTilePoint(ft.x,ft.y,p),Zn=A.projectTilePoint(Je.x,Je.y,p),cn=A.upVector(p,ft.x,ft.y),un=A.upVector(p,Je.x,Je.y);Jp(sn,Kt,cn),Jp(sn,Kt,cn),Jp(sn,Zn,un),Jp(sn,Zn,un)}}O&&(he+=we.length-1)}}if(N&&N.polyCount.length>0){if(N.borders){N.vertexArrayOffset=this.centroidVertexArray.length;const ue=N.borders,xe=this.featuresOnBorder.push(N)-1;for(let he=0;he<4;he++)ue[he][0]!==Number.MAX_VALUE&&this.borders[he].push(xe)}this.encodeCentroid(N.borders?void 0:N.centroid(),N)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,c,m,y,p)}sortBorders(){for(let n=0;n<4;n++)this.borders[n].sort((o,c)=>this.featuresOnBorder[o].borders[n][0]-this.featuresOnBorder[c].borders[n][0])}encodeCentroid(n,o,c=!0){let p,m;if(n)if(n.y!==0){const b=o.span()._mult(this.tileToMeter);p=(Math.max(n.x,1)<<3)+Math.min(7,Math.round(b.x/10)),m=(Math.max(n.y,1)<<3)+Math.min(7,Math.round(b.y/10))}else p=Math.ceil(7*(n.x+450)),m=0;else p=0,m=+c;let y=c?this.centroidVertexArray.length:o.vertexArrayOffset;for(const b of o.polyCount){c&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*b.edges+b.top);for(let E=0;E<b.top;E++)this.centroidVertexArray.emplace(y++,p,m);for(let E=0;E<2*b.edges;E++)this.centroidVertexArray.emplace(y++,0,m),this.centroidVertexArray.emplace(y++,p,m)}}}function rS(i,n){const o=i.add(n)._unit();return i.x*o.x+i.y*o.y}function Zz(i,n,o,c){const p=n.sub(i)._perp()._unit(),m=o.sub(n)._perp()._unit();return iS(i,n,o,rS(p,m),c)}function iS(i,n,o,c,p){const m=Math.sqrt(1-c*c);return Math.min(i.dist(n)/3,n.dist(o)/3,p*m/c)}function oS(i,n,o){return i.x<o[0].x&&n.x<o[0].x||i.x>o[1].x&&n.x>o[1].x||i.y<o[0].y&&n.y<o[0].y||i.y>o[1].y&&n.y>o[1].y}function sS(i,n,o){if(i.x<0||i.x>=Zt||n.x<0||n.x>=Zt||o.x<0||o.x>=Zt)return!1;const c=o.sub(n),p=c.perp(),m=i.sub(n);return(c.x*m.x+c.y*m.y)/Math.sqrt((c.x*c.x+c.y*c.y)*(m.x*m.x+m.y*m.y))>-.866&&p.x*m.x+p.y*m.y<0}function aS(i,n,o){const c=n?2|i:-3&i;return o?1|c:-2&c}function lS(){const i=Math.PI/32,n=Math.tan(i),o=Hp;return o*Math.sqrt(1+2*n*n)-o}function cS(i,n,o){const c=1<<o.z,p=Eo(o.x/c),m=Eo((o.x+1)/c),y=ai(o.y/c),b=ai((o.y+1)/c);return function(E,A,I,N,O=0,j){const G=[];if(!E.length||!I||!N)return G;const X=(we,Ve)=>{for(const $e of we)G.push({polygon:$e,bounds:Ve})},te=Math.ceil(Math.log2(I)),ue=Math.ceil(Math.log2(N)),xe=te-ue,he=[];for(let we=0;we<Math.abs(xe);we++)he.push(xe>0?0:1);for(let we=0;we<Math.min(te,ue);we++)he.push(0),he.push(1);let ge=E;if(ge=Wg(ge,A[0].y-O,A[1].y+O,1),ge=Wg(ge,A[0].x-O,A[1].x+O,0),!ge.length)return G;const Ee=[];for(he.length?Ee.push({polygons:ge,bounds:A,depth:0}):X(ge,A);Ee.length;){const we=Ee.pop(),Ve=we.depth,$e=he[Ve],et=we.bounds[0],ut=we.bounds[1],We=$e===0?et.x:et.y,rt=$e===0?ut.x:ut.y,it=j?j($e,We,rt):.5*(We+rt),at=Wg(we.polygons,We-O,it+O,$e),ft=Wg(we.polygons,it-O,rt+O,$e);if(at.length){const Je=[et,new ve($e===0?it:ut.x,$e===1?it:ut.y)];he.length>Ve+1?Ee.push({polygons:at,bounds:Je,depth:Ve+1}):X(at,Je)}if(ft.length){const Je=[new ve($e===0?it:et.x,$e===1?it:et.y),ut];he.length>Ve+1?Ee.push({polygons:ft,bounds:Je,depth:Ve+1}):X(ft,Je)}}return G}(i,n,Math.ceil((m-p)/11.25),Math.ceil((y-b)/11.25),1,(E,A,I)=>{if(E===0)return .5*(A+I);{const N=ai((o.y+A/Zt)/c);return(Js(.5*(ai((o.y+I/Zt)/c)+N))*c-o.y)*Zt}})}It(Qp,"FillExtrusionBucket",{omit:["layers","features"]}),It(nS,"PartMetadata");const Xz=new pe({"fill-extrusion-edge-radius":new Z(Qe["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var Kz={paint:new pe({"fill-extrusion-opacity":new Z(Qe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ie(Qe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Z(Qe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Z(Qe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ie(Qe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ie(Qe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ie(Qe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Z(Qe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Z(Qe["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Z(Qe["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new Z(Qe["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:Xz};function uS(i,n,o){var c=2*Math.PI*6378137/256/Math.pow(2,o);return[i*c-2*Math.PI*6378137/2,n*c-2*Math.PI*6378137/2]}class Zg{constructor(n,o,c){this.z=n,this.x=o,this.y=c,this.key=ef(0,n,n,o,c)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,o){const c=function(m,y,b){var E=uS(256*m,256*(y=Math.pow(2,b)-y-1),b),A=uS(256*(m+1),256*(y+1),b);return E[0]+","+E[1]+","+A[0]+","+A[1]}(this.x,this.y,this.z),p=function(m,y,b){let E,A="";for(let I=m;I>0;I--)E=1<<I-1,A+=(y&E?1:0)+(b&E?2:0);return A}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(o==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",p).replace("{bbox-epsg-3857}",c)}toString(){return`${this.z}/${this.x}/${this.y}`}}class hS{constructor(n,o){this.wrap=n,this.canonical=o,this.key=ef(n,o.z,o.z,o.x,o.y)}}class Pi{constructor(n,o,c,p,m){this.overscaledZ=n,this.wrap=o,this.canonical=new Zg(c,+p,+m),this.key=o===0&&n===c?this.canonical.key:ef(o,n,c,p,m)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){const o=this.canonical.z-n;return n>this.canonical.z?new Pi(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Pi(n,this.wrap,n,this.canonical.x>>o,this.canonical.y>>o)}calculateScaledKey(n,o=!0){if(this.overscaledZ===n&&o)return this.key;if(n>this.canonical.z)return ef(this.wrap*+o,n,this.canonical.z,this.canonical.x,this.canonical.y);{const c=this.canonical.z-n;return ef(this.wrap*+o,n,n,this.canonical.x>>c,this.canonical.y>>c)}}isChildOf(n){if(n.wrap!==this.wrap)return!1;const o=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>o&&n.canonical.y===this.canonical.y>>o}children(n){if(this.overscaledZ>=n)return[new Pi(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const o=this.canonical.z+1,c=2*this.canonical.x,p=2*this.canonical.y;return[new Pi(o,this.wrap,o,c,p),new Pi(o,this.wrap,o,c+1,p),new Pi(o,this.wrap,o,c,p+1),new Pi(o,this.wrap,o,c+1,p+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new Pi(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new Pi(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new hS(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function ef(i,n,o,c,p){const m=1<<Math.min(o,22);let y=m*(p%m)+c%m;return i&&o<22&&(y+=m*m*((i<0?-2*i-1:2*i)%(1<<2*(22-o)))),16*(32*y+o)+(n-o)}It(Zg,"CanonicalTileID"),It(Pi,"OverscaledTileID",{omit:["projMatrix"]});class dh extends ve{constructor(n,o,c){super(n,o),this.z=c}}function tf(i,n){return i.x*n.x+i.y*n.y}function dS(i,n){if(i.length===1){let o=0;const c=n[o++];let p;for(;!p||c.equals(p);)if(p=n[o++],!p)return 1/0;for(;o<n.length;o++){const m=n[o],y=i[0],b=p.sub(c),E=m.sub(c),A=y.sub(c),I=tf(b,b),N=tf(b,E),O=tf(E,E),j=tf(A,b),G=tf(A,E),X=I*O-N*N,te=(O*j-N*G)/X,ue=(I*G-N*j)/X,xe=c.z*(1-te-ue)+p.z*te+m.z*ue;if(isFinite(xe))return xe}return 1/0}{let o=1/0;for(const c of n)o=Math.min(o,c.z);return o}}function pS(i,n,o,c,p,m,y,b){const E=y*p.getElevationAt(i,n,!0,!0),A=m[0]!==0,I=A?m[1]===0?y*(m[0]/7-450):y*function(N,O,j){const G=Math.floor(O[0]/8),X=Math.floor(O[1]/8),te=10*(O[0]-8*G),ue=10*(O[1]-8*X),xe=N.getElevationAt(G,X,!0,!0),he=N.getMeterToDEM(j),ge=Math.floor(.5*(te*he-1)),Ee=Math.floor(.5*(ue*he-1)),we=N.tileCoordToPixel(G,X),Ve=2*ge+1,$e=2*Ee+1,et=function(ft,Je,Ct,Lt,At){return[ft.getElevationAtPixel(Je,Ct,!0),ft.getElevationAtPixel(Je+At,Ct,!0),ft.getElevationAtPixel(Je,Ct+At,!0),ft.getElevationAtPixel(Je+Lt,Ct+At,!0)]}(N,we.x-ge,we.y-Ee,Ve,$e),ut=Math.abs(et[0]-et[1]),We=Math.abs(et[2]-et[3]),rt=Math.abs(et[0]-et[2])+Math.abs(et[1]-et[3]),it=Math.min(.25,.5*he*(ut+We)/Ve),at=Math.min(.25,.5*he*rt/$e);return xe+Math.max(it*te,at*ue)}(p,m,b):E;return{base:E+(o===0)?-1:o,top:A?Math.max(I+c,E+o+2):E+c}}const Yz=ze([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:Jz}=Yz,Qz=ze([{name:"a_packed",components:4,type:"Float32"}]),{members:eN}=Qz,tN=Hg.types,nN=Math.cos(Math.PI/180*37.5);class Xg{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(o=>o.id),this.index=n.index,this.projection=n.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(o=>{this.gradients[o.id]={}}),this.layoutVertexArray=new He,this.layoutVertexArray2=new lt,this.indexArray=new $t,this.programConfigurations=new $c(n.layers,n.zoom),this.segments=new Cr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(n,o,c,p){this.hasPattern=S_("line",this.layers,o);const m=this.layers[0].layout.get("line-sort-key"),y=[];for(const{feature:I,id:N,index:O,sourceLayerIndex:j}of n){const G=this.layers[0]._featureFilter.needGeometry,X=Hc(I,G);if(!this.layers[0]._featureFilter.filter(new z(this.zoom),X,c))continue;const te=m?m.evaluate(X,{},c):void 0,ue={id:N,properties:I.properties,type:I.type,sourceLayerIndex:j,index:O,geometry:G?X.geometry:ka(I,c,p),patterns:{},sortKey:te};y.push(ue)}m&&y.sort((I,N)=>I.sortKey-N.sortKey);const{lineAtlas:b,featureIndex:E}=o,A=this.addConstantDashes(b);for(const I of y){const{geometry:N,index:O,sourceLayerIndex:j}=I;if(A&&this.addFeatureDashes(I,b),this.hasPattern){const G=C_("line",this.layers,I,this.zoom,o);this.patternFeatures.push(G)}else this.addFeature(I,N,O,c,b.positions,o.availableImages);E.insert(n[O].feature,N,O,j,this.index)}}addConstantDashes(n){let o=!1;for(const c of this.layers){const p=c.paint.get("line-dasharray").value,m=c.layout.get("line-cap").value;if(p.kind!=="constant"||m.kind!=="constant")o=!0;else{const y=m.value,b=p.value;if(!b)continue;n.addDash(b,y)}}return o}addFeatureDashes(n,o){const c=this.zoom;for(const p of this.layers){const m=p.paint.get("line-dasharray").value,y=p.layout.get("line-cap").value;if(m.kind==="constant"&&y.kind==="constant")continue;let b,E;if(m.kind==="constant"){if(b=m.value,!b)continue}else b=m.evaluate({zoom:c},n);E=y.kind==="constant"?y.value:y.evaluate({zoom:c},n),o.addDash(b,E),n.patterns[p.id]=o.getKey(b,E)}}update(n,o,c,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,o,this.stateDependentLayers,c,p)}addFeatures(n,o,c,p,m){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,o,c,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,eN)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Jz),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&n.properties.hasOwnProperty("mapbox_clip_start")&&n.properties.hasOwnProperty("mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,o,c,p,m,y){const b=this.layers[0].layout,E=b.get("line-join").evaluate(n,{}),A=b.get("line-cap").evaluate(n,{}),I=b.get("line-miter-limit"),N=b.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const O of o)this.addLine(O,n,E,A,I,N);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,c,m,y,p)}addLine(n,o,c,p,m,y){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ue=0;ue<n.length-1;ue++)this.totalDistance+=n[ue].dist(n[ue+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const b=tN[o.type]==="Polygon";let E=n.length;for(;E>=2&&n[E-1].equals(n[E-2]);)E--;let A=0;for(;A<E-1&&n[A].equals(n[A+1]);)A++;if(E<(b?3:2))return;c==="bevel"&&(m=1.05);const I=this.overscaling<=16?15*Zt/(512*this.overscaling):0,N=this.segments.prepareSegment(10*E,this.layoutVertexArray,this.indexArray);let O,j,G,X,te;this.e1=this.e2=-1,b&&(O=n[E-2],te=n[A].sub(O)._unit()._perp());for(let ue=A;ue<E;ue++){if(G=ue===E-1?b?n[A+1]:void 0:n[ue+1],G&&n[ue].equals(G))continue;te&&(X=te),O&&(j=O),O=n[ue],te=G?G.sub(O)._unit()._perp():X,X=X||te;let xe=X.add(te);xe.x===0&&xe.y===0||xe._unit();const he=X.x*te.x+X.y*te.y,ge=xe.x*te.x+xe.y*te.y,Ee=ge!==0?1/ge:1/0,we=2*Math.sqrt(2-2*ge),Ve=ge<nN&&j&&G,$e=X.x*te.y-X.y*te.x>0;if(Ve&&ue>A){const We=O.dist(j);if(We>2*I){const rt=O.sub(O.sub(j)._mult(I/We)._round());this.updateDistance(j,rt),this.addCurrentVertex(rt,X,0,0,N),j=rt}}const et=j&&G;let ut=et?c:b?"butt":p;if(et&&ut==="round"&&(Ee<y?ut="miter":Ee<=2&&(ut="fakeround")),ut==="miter"&&Ee>m&&(ut="bevel"),ut==="bevel"&&(Ee>2&&(ut="flipbevel"),Ee<m&&(ut="miter")),j&&this.updateDistance(j,O),ut==="miter")xe._mult(Ee),this.addCurrentVertex(O,xe,0,0,N);else if(ut==="flipbevel"){if(Ee>100)xe=te.mult(-1);else{const We=Ee*X.add(te).mag()/X.sub(te).mag();xe._perp()._mult(We*($e?-1:1))}this.addCurrentVertex(O,xe,0,0,N),this.addCurrentVertex(O,xe.mult(-1),0,0,N)}else if(ut==="bevel"||ut==="fakeround"){const We=-Math.sqrt(Ee*Ee-1),rt=$e?We:0,it=$e?0:We;if(j&&this.addCurrentVertex(O,X,rt,it,N),ut==="fakeround"){const at=Math.round(180*we/Math.PI/20);for(let ft=1;ft<at;ft++){let Je=ft/at;if(Je!==.5){const Lt=Je-.5;Je+=Je*Lt*(Je-1)*((1.0904+he*(he*(3.55645-1.43519*he)-3.2452))*Lt*Lt+(.848013+he*(.215638*he-1.06021)))}const Ct=te.sub(X)._mult(Je)._add(X)._unit()._mult($e?-1:1);this.addHalfVertex(O,Ct.x,Ct.y,!1,$e,0,N)}}G&&this.addCurrentVertex(O,te,-rt,-it,N)}else if(ut==="butt")this.addCurrentVertex(O,xe,0,0,N);else if(ut==="square"){const We=j?1:-1;j||this.addCurrentVertex(O,xe,We,We,N),this.addCurrentVertex(O,xe,0,0,N),j&&this.addCurrentVertex(O,xe,We,We,N)}else ut==="round"&&(j&&(this.addCurrentVertex(O,X,0,0,N),this.addCurrentVertex(O,X,1,1,N,!0)),G&&(this.addCurrentVertex(O,te,-1,-1,N,!0),this.addCurrentVertex(O,te,0,0,N)));if(Ve&&ue<E-1){const We=O.dist(G);if(We>2*I){const rt=O.add(G.sub(O)._mult(I/We)._round());this.updateDistance(O,rt),this.addCurrentVertex(rt,te,0,0,N),O=rt}}}}addCurrentVertex(n,o,c,p,m,y=!1){const b=o.y*p-o.x,E=-o.y-o.x*p;this.addHalfVertex(n,o.x+o.y*c,o.y-o.x*c,y,!1,c,m),this.addHalfVertex(n,b,E,y,!0,-p,m)}addHalfVertex({x:n,y:o},c,p,m,y,b,E){this.layoutVertexArray.emplaceBack((n<<1)+(m?1:0),(o<<1)+(y?1:0),Math.round(63*c)+128,Math.round(63*p)+128,1+(b===0?0:b<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const A=E.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,A),E.primitiveLength++),y?this.e2=A:this.e1=A}updateScaledDistance(){if(this.lineClips){const n=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=n*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(n,o){this.distance+=n.dist(o),this.updateScaledDistance()}}It(Xg,"LineBucket",{omit:["layers","patternFeatures"]});const rN=new pe({"line-cap":new ie(Qe.layout_line["line-cap"]),"line-join":new ie(Qe.layout_line["line-join"]),"line-miter-limit":new Z(Qe.layout_line["line-miter-limit"]),"line-round-limit":new Z(Qe.layout_line["line-round-limit"]),"line-sort-key":new ie(Qe.layout_line["line-sort-key"])});var fS={paint:new pe({"line-opacity":new ie(Qe.paint_line["line-opacity"]),"line-color":new ie(Qe.paint_line["line-color"]),"line-translate":new Z(Qe.paint_line["line-translate"]),"line-translate-anchor":new Z(Qe.paint_line["line-translate-anchor"]),"line-width":new ie(Qe.paint_line["line-width"]),"line-gap-width":new ie(Qe.paint_line["line-gap-width"]),"line-offset":new ie(Qe.paint_line["line-offset"]),"line-blur":new ie(Qe.paint_line["line-blur"]),"line-dasharray":new ie(Qe.paint_line["line-dasharray"]),"line-pattern":new ie(Qe.paint_line["line-pattern"]),"line-gradient":new de(Qe.paint_line["line-gradient"]),"line-trim-offset":new Z(Qe.paint_line["line-trim-offset"])}),layout:rN};const mS=new class extends ie{possiblyEvaluate(i,n){return n=new z(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,transition:n.transition}),super.possiblyEvaluate(i,n)}evaluate(i,n,o,c){return n=Et({},n,{zoom:Math.floor(n.zoom)}),super.evaluate(i,n,o,c)}}(fS.paint.properties["line-width"].specification);function gS(i,n){return n>0?n+2*i:i}mS.useIntegerZoom=!0;const iN=ze([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),oN=ze([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),sN=ze([{name:"a_projected_pos",components:4,type:"Float32"}],4);ze([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const aN=ze([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),lN=ze([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);ze([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const yS=ze([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),cN=ze([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);ze([{name:"triangle",components:3,type:"Uint16"}]),ze([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),ze([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),ze([{type:"Float32",name:"offsetX"}]),ze([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Qr=24;const As=128;function M_(i,n){const{expression:o}=n;if(o.kind==="constant")return{kind:"constant",layoutSize:o.evaluate(new z(i+1))};if(o.kind==="source")return{kind:"source"};{const{zoomStops:c,interpolationType:p}=o;let m=0;for(;m<c.length&&c[m]<=i;)m++;m=Math.max(0,m-1);let y=m;for(;y<c.length&&c[y]<i+1;)y++;y=Math.min(c.length-1,y);const b=c[m],E=c[y];return o.kind==="composite"?{kind:"composite",minZoom:b,maxZoom:E,interpolationType:p}:{kind:"camera",minZoom:b,maxZoom:E,minSize:o.evaluate(new z(b)),maxSize:o.evaluate(new z(E)),interpolationType:p}}}function Kg(i,{uSize:n,uSizeT:o},{lowerSize:c,upperSize:p}){return i.kind==="source"?c/As:i.kind==="composite"?En(c/As,p/As,o):n}function ph(i,n){let o=0,c=0;if(i.kind==="constant")c=i.layoutSize;else if(i.kind!=="source"){const{interpolationType:p,minZoom:m,maxZoom:y}=i,b=p?Ze(Wo.interpolationFactor(p,n,m,y),0,1):0;i.kind==="camera"?c=En(i.minSize,i.maxSize,b):o=b}return{uSizeT:o,uSize:c}}var uN=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:As,evaluateSizeForFeature:Kg,evaluateSizeForZoom:ph,getSizeData:M_});function hN(i,n,o){return i.sections.forEach(c=>{c.text=function(p,m,y){const b=m.layout.get("text-transform").evaluate(y,{});return b==="uppercase"?p=p.toLocaleUpperCase():b==="lowercase"&&(p=p.toLocaleLowerCase()),P.applyArabicShaping&&(p=P.applyArabicShaping(p)),p}(c.text,n,o)}),i}const nf={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42","\u2190":"\u2191","\u2192":"\u2193"};function dN(i){return i==="\uFE36"||i==="\uFE48"||i==="\uFE38"||i==="\uFE44"||i==="\uFE42"||i==="\uFE3E"||i==="\uFE3C"||i==="\uFE3A"||i==="\uFE18"||i==="\uFE40"||i==="\uFE10"||i==="\uFE13"||i==="\uFE14"||i==="\uFF40"||i==="\uFFE3"||i==="\uFE11"||i==="\uFE12"}function pN(i){return i==="\uFE35"||i==="\uFE47"||i==="\uFE37"||i==="\uFE43"||i==="\uFE41"||i==="\uFE3D"||i==="\uFE3B"||i==="\uFE39"||i==="\uFE17"||i==="\uFE3F"}var xS=Vn,_S=function(i,n,o,c,p){var m,y,b=8*p-c-1,E=(1<<b)-1,A=E>>1,I=-7,N=o?p-1:0,O=o?-1:1,j=i[n+N];for(N+=O,m=j&(1<<-I)-1,j>>=-I,I+=b;I>0;m=256*m+i[n+N],N+=O,I-=8);for(y=m&(1<<-I)-1,m>>=-I,I+=c;I>0;y=256*y+i[n+N],N+=O,I-=8);if(m===0)m=1-A;else{if(m===E)return y?NaN:1/0*(j?-1:1);y+=Math.pow(2,c),m-=A}return(j?-1:1)*y*Math.pow(2,m-c)},vS=function(i,n,o,c,p,m){var y,b,E,A=8*m-p-1,I=(1<<A)-1,N=I>>1,O=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,j=c?0:m-1,G=c?1:-1,X=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(b=isNaN(n)?1:0,y=I):(y=Math.floor(Math.log(n)/Math.LN2),n*(E=Math.pow(2,-y))<1&&(y--,E*=2),(n+=y+N>=1?O/E:O*Math.pow(2,1-N))*E>=2&&(y++,E/=2),y+N>=I?(b=0,y=I):y+N>=1?(b=(n*E-1)*Math.pow(2,p),y+=N):(b=n*Math.pow(2,N-1)*Math.pow(2,p),y=0));p>=8;i[o+j]=255&b,j+=G,b/=256,p-=8);for(y=y<<p|b,A+=p;A>0;i[o+j]=255&y,j+=G,y/=256,A-=8);i[o+j-G]|=128*X};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function Vn(i){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(i)?i:new Uint8Array(i||0),this.pos=0,this.type=0,this.length=this.buf.length}Vn.Varint=0,Vn.Fixed64=1,Vn.Bytes=2,Vn.Fixed32=5;var k_=4294967296,bS=1/k_,wS=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function Ia(i){return i.type===Vn.Bytes?i.readVarint()+i.pos:i.pos+1}function fh(i,n,o){return o?4294967296*n+(i>>>0):4294967296*(n>>>0)+(i>>>0)}function ES(i,n,o){var c=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));o.realloc(c);for(var p=o.pos-1;p>=i;p--)o.buf[p+c]=o.buf[p]}function fN(i,n){for(var o=0;o<i.length;o++)n.writeVarint(i[o])}function mN(i,n){for(var o=0;o<i.length;o++)n.writeSVarint(i[o])}function gN(i,n){for(var o=0;o<i.length;o++)n.writeFloat(i[o])}function yN(i,n){for(var o=0;o<i.length;o++)n.writeDouble(i[o])}function xN(i,n){for(var o=0;o<i.length;o++)n.writeBoolean(i[o])}function _N(i,n){for(var o=0;o<i.length;o++)n.writeFixed32(i[o])}function vN(i,n){for(var o=0;o<i.length;o++)n.writeSFixed32(i[o])}function bN(i,n){for(var o=0;o<i.length;o++)n.writeFixed64(i[o])}function wN(i,n){for(var o=0;o<i.length;o++)n.writeSFixed64(i[o])}function Yg(i,n){return(i[n]|i[n+1]<<8|i[n+2]<<16)+16777216*i[n+3]}function mh(i,n,o){i[o]=n,i[o+1]=n>>>8,i[o+2]=n>>>16,i[o+3]=n>>>24}function TS(i,n){return(i[n]|i[n+1]<<8|i[n+2]<<16)+(i[n+3]<<24)}Vn.prototype={destroy:function(){this.buf=null},readFields:function(i,n,o){for(o=o||this.length;this.pos<o;){var c=this.readVarint(),p=c>>3,m=this.pos;this.type=7&c,i(p,n,this),this.pos===m&&this.skip(c)}return n},readMessage:function(i,n){return this.readFields(i,n,this.readVarint()+this.pos)},readFixed32:function(){var i=Yg(this.buf,this.pos);return this.pos+=4,i},readSFixed32:function(){var i=TS(this.buf,this.pos);return this.pos+=4,i},readFixed64:function(){var i=Yg(this.buf,this.pos)+Yg(this.buf,this.pos+4)*k_;return this.pos+=8,i},readSFixed64:function(){var i=Yg(this.buf,this.pos)+TS(this.buf,this.pos+4)*k_;return this.pos+=8,i},readFloat:function(){var i=_S(this.buf,this.pos,!0,23,4);return this.pos+=4,i},readDouble:function(){var i=_S(this.buf,this.pos,!0,52,8);return this.pos+=8,i},readVarint:function(i){var n,o,c=this.buf;return n=127&(o=c[this.pos++]),o<128?n:(n|=(127&(o=c[this.pos++]))<<7,o<128?n:(n|=(127&(o=c[this.pos++]))<<14,o<128?n:(n|=(127&(o=c[this.pos++]))<<21,o<128?n:function(p,m,y){var b,E,A=y.buf;if(b=(112&(E=A[y.pos++]))>>4,E<128||(b|=(127&(E=A[y.pos++]))<<3,E<128)||(b|=(127&(E=A[y.pos++]))<<10,E<128)||(b|=(127&(E=A[y.pos++]))<<17,E<128)||(b|=(127&(E=A[y.pos++]))<<24,E<128)||(b|=(1&(E=A[y.pos++]))<<31,E<128))return fh(p,b,m);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(o=c[this.pos]))<<28,i,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var i=this.readVarint();return i%2==1?(i+1)/-2:i/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var i=this.readVarint()+this.pos,n=this.pos;return this.pos=i,i-n>=12&&wS?function(o,c,p){return wS.decode(o.subarray(c,p))}(this.buf,n,i):function(o,c,p){for(var m="",y=c;y<p;){var b,E,A,I=o[y],N=null,O=I>239?4:I>223?3:I>191?2:1;if(y+O>p)break;O===1?I<128&&(N=I):O===2?(192&(b=o[y+1]))==128&&(N=(31&I)<<6|63&b)<=127&&(N=null):O===3?(E=o[y+2],(192&(b=o[y+1]))==128&&(192&E)==128&&((N=(15&I)<<12|(63&b)<<6|63&E)<=2047||N>=55296&&N<=57343)&&(N=null)):O===4&&(E=o[y+2],A=o[y+3],(192&(b=o[y+1]))==128&&(192&E)==128&&(192&A)==128&&((N=(15&I)<<18|(63&b)<<12|(63&E)<<6|63&A)<=65535||N>=1114112)&&(N=null)),N===null?(N=65533,O=1):N>65535&&(N-=65536,m+=String.fromCharCode(N>>>10&1023|55296),N=56320|1023&N),m+=String.fromCharCode(N),y+=O}return m}(this.buf,n,i)},readBytes:function(){var i=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,i);return this.pos=i,n},readPackedVarint:function(i,n){if(this.type!==Vn.Bytes)return i.push(this.readVarint(n));var o=Ia(this);for(i=i||[];this.pos<o;)i.push(this.readVarint(n));return i},readPackedSVarint:function(i){if(this.type!==Vn.Bytes)return i.push(this.readSVarint());var n=Ia(this);for(i=i||[];this.pos<n;)i.push(this.readSVarint());return i},readPackedBoolean:function(i){if(this.type!==Vn.Bytes)return i.push(this.readBoolean());var n=Ia(this);for(i=i||[];this.pos<n;)i.push(this.readBoolean());return i},readPackedFloat:function(i){if(this.type!==Vn.Bytes)return i.push(this.readFloat());var n=Ia(this);for(i=i||[];this.pos<n;)i.push(this.readFloat());return i},readPackedDouble:function(i){if(this.type!==Vn.Bytes)return i.push(this.readDouble());var n=Ia(this);for(i=i||[];this.pos<n;)i.push(this.readDouble());return i},readPackedFixed32:function(i){if(this.type!==Vn.Bytes)return i.push(this.readFixed32());var n=Ia(this);for(i=i||[];this.pos<n;)i.push(this.readFixed32());return i},readPackedSFixed32:function(i){if(this.type!==Vn.Bytes)return i.push(this.readSFixed32());var n=Ia(this);for(i=i||[];this.pos<n;)i.push(this.readSFixed32());return i},readPackedFixed64:function(i){if(this.type!==Vn.Bytes)return i.push(this.readFixed64());var n=Ia(this);for(i=i||[];this.pos<n;)i.push(this.readFixed64());return i},readPackedSFixed64:function(i){if(this.type!==Vn.Bytes)return i.push(this.readSFixed64());var n=Ia(this);for(i=i||[];this.pos<n;)i.push(this.readSFixed64());return i},skip:function(i){var n=7&i;if(n===Vn.Varint)for(;this.buf[this.pos++]>127;);else if(n===Vn.Bytes)this.pos=this.readVarint()+this.pos;else if(n===Vn.Fixed32)this.pos+=4;else{if(n!==Vn.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(i,n){this.writeVarint(i<<3|n)},realloc:function(i){for(var n=this.length||16;n<this.pos+i;)n*=2;if(n!==this.length){var o=new Uint8Array(n);o.set(this.buf),this.buf=o,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(i){this.realloc(4),mh(this.buf,i,this.pos),this.pos+=4},writeSFixed32:function(i){this.realloc(4),mh(this.buf,i,this.pos),this.pos+=4},writeFixed64:function(i){this.realloc(8),mh(this.buf,-1&i,this.pos),mh(this.buf,Math.floor(i*bS),this.pos+4),this.pos+=8},writeSFixed64:function(i){this.realloc(8),mh(this.buf,-1&i,this.pos),mh(this.buf,Math.floor(i*bS),this.pos+4),this.pos+=8},writeVarint:function(i){(i=+i||0)>268435455||i<0?function(n,o){var c,p;if(n>=0?(c=n%4294967296|0,p=n/4294967296|0):(p=~(-n/4294967296),4294967295^(c=~(-n%4294967296))?c=c+1|0:(c=0,p=p+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");o.realloc(10),function(m,y,b){b.buf[b.pos++]=127&m|128,m>>>=7,b.buf[b.pos++]=127&m|128,m>>>=7,b.buf[b.pos++]=127&m|128,m>>>=7,b.buf[b.pos++]=127&m|128,b.buf[b.pos]=127&(m>>>=7)}(c,0,o),function(m,y){var b=(7&m)<<4;y.buf[y.pos++]|=b|((m>>>=3)?128:0),m&&(y.buf[y.pos++]=127&m|((m>>>=7)?128:0),m&&(y.buf[y.pos++]=127&m|((m>>>=7)?128:0),m&&(y.buf[y.pos++]=127&m|((m>>>=7)?128:0),m&&(y.buf[y.pos++]=127&m|((m>>>=7)?128:0),m&&(y.buf[y.pos++]=127&m)))))}(p,o)}(i,this):(this.realloc(4),this.buf[this.pos++]=127&i|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=i>>>7&127))))},writeSVarint:function(i){this.writeVarint(i<0?2*-i-1:2*i)},writeBoolean:function(i){this.writeVarint(Boolean(i))},writeString:function(i){i=String(i),this.realloc(4*i.length),this.pos++;var n=this.pos;this.pos=function(c,p,m){for(var y,b,E=0;E<p.length;E++){if((y=p.charCodeAt(E))>55295&&y<57344){if(!b){y>56319||E+1===p.length?(c[m++]=239,c[m++]=191,c[m++]=189):b=y;continue}if(y<56320){c[m++]=239,c[m++]=191,c[m++]=189,b=y;continue}y=b-55296<<10|y-56320|65536,b=null}else b&&(c[m++]=239,c[m++]=191,c[m++]=189,b=null);y<128?c[m++]=y:(y<2048?c[m++]=y>>6|192:(y<65536?c[m++]=y>>12|224:(c[m++]=y>>18|240,c[m++]=y>>12&63|128),c[m++]=y>>6&63|128),c[m++]=63&y|128)}return m}(this.buf,i,this.pos);var o=this.pos-n;o>=128&&ES(n,o,this),this.pos=n-1,this.writeVarint(o),this.pos+=o},writeFloat:function(i){this.realloc(4),vS(this.buf,i,this.pos,!0,23,4),this.pos+=4},writeDouble:function(i){this.realloc(8),vS(this.buf,i,this.pos,!0,52,8),this.pos+=8},writeBytes:function(i){var n=i.length;this.writeVarint(n),this.realloc(n);for(var o=0;o<n;o++)this.buf[this.pos++]=i[o]},writeRawMessage:function(i,n){this.pos++;var o=this.pos;i(n,this);var c=this.pos-o;c>=128&&ES(o,c,this),this.pos=o-1,this.writeVarint(c),this.pos+=c},writeMessage:function(i,n,o){this.writeTag(i,Vn.Bytes),this.writeRawMessage(n,o)},writePackedVarint:function(i,n){n.length&&this.writeMessage(i,fN,n)},writePackedSVarint:function(i,n){n.length&&this.writeMessage(i,mN,n)},writePackedBoolean:function(i,n){n.length&&this.writeMessage(i,xN,n)},writePackedFloat:function(i,n){n.length&&this.writeMessage(i,gN,n)},writePackedDouble:function(i,n){n.length&&this.writeMessage(i,yN,n)},writePackedFixed32:function(i,n){n.length&&this.writeMessage(i,_N,n)},writePackedSFixed32:function(i,n){n.length&&this.writeMessage(i,vN,n)},writePackedFixed64:function(i,n){n.length&&this.writeMessage(i,bN,n)},writePackedSFixed64:function(i,n){n.length&&this.writeMessage(i,wN,n)},writeBytesField:function(i,n){this.writeTag(i,Vn.Bytes),this.writeBytes(n)},writeFixed32Field:function(i,n){this.writeTag(i,Vn.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(i,n){this.writeTag(i,Vn.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(i,n){this.writeTag(i,Vn.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(i,n){this.writeTag(i,Vn.Fixed64),this.writeSFixed64(n)},writeVarintField:function(i,n){this.writeTag(i,Vn.Varint),this.writeVarint(n)},writeSVarintField:function(i,n){this.writeTag(i,Vn.Varint),this.writeSVarint(n)},writeStringField:function(i,n){this.writeTag(i,Vn.Bytes),this.writeString(n)},writeFloatField:function(i,n){this.writeTag(i,Vn.Fixed32),this.writeFloat(n)},writeDoubleField:function(i,n){this.writeTag(i,Vn.Fixed64),this.writeDouble(n)},writeBooleanField:function(i,n){this.writeVarintField(i,Boolean(n))}};var Jg=V(xS);const P_=3;function EN(i,n,o){n.glyphs=[],i===1&&o.readMessage(TN,n)}function TN(i,n,o){if(i===3){const{id:c,bitmap:p,width:m,height:y,left:b,top:E,advance:A}=o.readMessage(SN,{});n.glyphs.push({id:c,bitmap:new Pa({width:m+2*P_,height:y+2*P_},p),metrics:{width:m,height:y,left:b,top:E,advance:A}})}else i===4?n.ascender=o.readSVarint():i===5&&(n.descender=o.readSVarint())}function SN(i,n,o){i===1?n.id=o.readVarint():i===2?n.bitmap=o.readBytes():i===3?n.width=o.readVarint():i===4?n.height=o.readVarint():i===5?n.left=o.readSVarint():i===6?n.top=o.readSVarint():i===7&&(n.advance=o.readVarint())}const SS=P_;function I_(i){let n=0,o=0;for(const y of i)n+=y.w*y.h,o=Math.max(o,y.w);i.sort((y,b)=>b.h-y.h);const c=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),o),h:1/0}];let p=0,m=0;for(const y of i)for(let b=c.length-1;b>=0;b--){const E=c[b];if(!(y.w>E.w||y.h>E.h)){if(y.x=E.x,y.y=E.y,m=Math.max(m,y.y+y.h),p=Math.max(p,y.x+y.w),y.w===E.w&&y.h===E.h){const A=c.pop();b<c.length&&(c[b]=A)}else y.h===E.h?(E.x+=y.w,E.w-=y.w):y.w===E.w?(E.y+=y.h,E.h-=y.h):(c.push({x:E.x+y.w,y:E.y,w:E.w-y.w,h:y.h}),E.y+=y.h,E.h-=y.h);break}}return{w:p,h:m,fill:n/(p*m)||0}}const ji=1;class D_{constructor(n,{pixelRatio:o,version:c,stretchX:p,stretchY:m,content:y}){this.paddedRect=n,this.pixelRatio=o,this.stretchX=p,this.stretchY=m,this.content=y,this.version=c}get tl(){return[this.paddedRect.x+ji,this.paddedRect.y+ji]}get br(){return[this.paddedRect.x+this.paddedRect.w-ji,this.paddedRect.y+this.paddedRect.h-ji]}get displaySize(){return[(this.paddedRect.w-2*ji)/this.pixelRatio,(this.paddedRect.h-2*ji)/this.pixelRatio]}}class CS{constructor(n,o){const c={},p={};this.haveRenderCallbacks=[];const m=[];this.addImages(n,c,m),this.addImages(o,p,m);const{w:y,h:b}=I_(m),E=new oo({width:y||1,height:b||1});for(const A in n){const I=n[A],N=c[A].paddedRect;oo.copy(I.data,E,{x:0,y:0},{x:N.x+ji,y:N.y+ji},I.data)}for(const A in o){const I=o[A],N=p[A].paddedRect,O=N.x+ji,j=N.y+ji,G=I.data.width,X=I.data.height;oo.copy(I.data,E,{x:0,y:0},{x:O,y:j},I.data),oo.copy(I.data,E,{x:0,y:X-1},{x:O,y:j-1},{width:G,height:1}),oo.copy(I.data,E,{x:0,y:0},{x:O,y:j+X},{width:G,height:1}),oo.copy(I.data,E,{x:G-1,y:0},{x:O-1,y:j},{width:1,height:X}),oo.copy(I.data,E,{x:0,y:0},{x:O+G,y:j},{width:1,height:X})}this.image=E,this.iconPositions=c,this.patternPositions=p}addImages(n,o,c){for(const p in n){const m=n[p],y={x:0,y:0,w:m.data.width+2*ji,h:m.data.height+2*ji};c.push(y),o[p]=new D_(y,m),m.hasRenderCallback&&this.haveRenderCallbacks.push(p)}}patchUpdatedImages(n,o){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(c=>n.hasImage(c)),n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const c in n.updatedImages)this.patchUpdatedImage(this.iconPositions[c],n.getImage(c),o),this.patchUpdatedImage(this.patternPositions[c],n.getImage(c),o)}patchUpdatedImage(n,o,c){if(!n||!o||n.version===o.version)return;n.version=o.version;const[p,m]=n.tl;c.update(o.data,void 0,{x:p,y:m})}}It(D_,"ImagePosition"),It(CS,"ImageAtlas");const To={horizontal:1,vertical:2,horizontalOnly:3},AS=-17;class rf{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,o){const c=new rf;return c.scale=n||1,c.fontStack=o,c}static forImage(n){const o=new rf;return o.imageName=n,o}}class gh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,o){const c=new gh;for(let p=0;p<n.sections.length;p++){const m=n.sections[p];m.image?c.addImageSection(m):c.addTextSection(m,o)}return c}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSections(){return this.sections}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(n){this.text=function(o,c){let p="";for(let m=0;m<o.length;m++){const y=o.charCodeAt(m+1)||null,b=o.charCodeAt(m-1)||null;p+=!c&&(y&&Ag(y)&&!nf[o[m+1]]||b&&Ag(b)&&!nf[o[m-1]])||!nf[o[m]]?o[m]:nf[o[m]]}return p}(this.text,n)}trim(){let n=0;for(let c=0;c<this.text.length&&Qg[this.text.charCodeAt(c)];c++)n++;let o=this.text.length;for(let c=this.text.length-1;c>=0&&c>=n&&Qg[this.text.charCodeAt(c)];c--)o--;this.text=this.text.substring(n,o),this.sectionIndex=this.sectionIndex.slice(n,o)}substring(n,o){const c=new gh;return c.text=this.text.substring(n,o),c.sectionIndex=this.sectionIndex.slice(n,o),c.sections=this.sections,c}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,o)=>Math.max(n,this.sections[o].scale),0)}addTextSection(n,o){this.text+=n.text,this.sections.push(rf.forText(n.scale,n.fontStack||o));const c=this.sections.length-1;for(let p=0;p<n.text.length;++p)this.sectionIndex.push(c)}addImageSection(n){const o=n.image?n.image.name:"";if(o.length===0)return void tn("Can't add FormattedSection with an empty image.");const c=this.getNextImageSectionCharCode();c?(this.text+=String.fromCharCode(c),this.sections.push(rf.forImage(o)),this.sectionIndex.push(this.sections.length-1)):tn("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function z_(i,n,o,c,p,m,y,b,E,A,I,N,O,j,G){const X=gh.fromFeature(i,p);N===To.vertical&&X.verticalizePunctuation(O);let te=[];const ue=function(we,Ve,$e,et,ut,We){if(!we)return[];const rt=[],it=function(Ct,Lt,At,rn,yt,qt){let on=0;for(let Sn=0;Sn<Ct.length();Sn++){const sn=Ct.getSection(Sn);on+=MS(Ct.getCharCode(Sn),sn,rn,yt,Lt,qt)}return on/Math.max(1,Math.ceil(on/At))}(we,Ve,$e,et,ut,We),at=we.text.indexOf("\u200B")>=0;let ft=0;for(let Ct=0;Ct<we.length();Ct++){const Lt=we.getSection(Ct),At=we.getCharCode(Ct);if(Qg[At]||(ft+=MS(At,Lt,et,ut,Ve,We)),Ct<we.length()-1){const rn=!((Je=At)<11904||!(Mt["Bopomofo Extended"](Je)||Mt.Bopomofo(Je)||Mt["CJK Compatibility Forms"](Je)||Mt["CJK Compatibility Ideographs"](Je)||Mt["CJK Compatibility"](Je)||Mt["CJK Radicals Supplement"](Je)||Mt["CJK Strokes"](Je)||Mt["CJK Symbols and Punctuation"](Je)||Mt["CJK Unified Ideographs Extension A"](Je)||Mt["CJK Unified Ideographs"](Je)||Mt["Enclosed CJK Letters and Months"](Je)||Mt["Halfwidth and Fullwidth Forms"](Je)||Mt.Hiragana(Je)||Mt["Ideographic Description Characters"](Je)||Mt["Kangxi Radicals"](Je)||Mt["Katakana Phonetic Extensions"](Je)||Mt.Katakana(Je)||Mt["Vertical Forms"](Je)||Mt["Yi Radicals"](Je)||Mt["Yi Syllables"](Je)));(CN[At]||rn||Lt.imageName)&&rt.push(PS(Ct+1,ft,it,rt,AN(At,we.getCharCode(Ct+1),rn&&at),!1))}}var Je;return IS(PS(we.length(),ft,it,rt,0,!0))}(X,A,m,n,c,j),{processBidirectionalText:xe,processStyledBidirectionalText:he}=P;if(xe&&X.sections.length===1){const we=xe(X.toString(),ue);for(const Ve of we){const $e=new gh;$e.text=Ve,$e.sections=X.sections;for(let et=0;et<Ve.length;et++)$e.sectionIndex.push(0);te.push($e)}}else if(he){const we=he(X.text,X.sectionIndex,ue);for(const Ve of we){const $e=new gh;$e.text=Ve[0],$e.sectionIndex=Ve[1],$e.sections=X.sections,te.push($e)}}else te=function(we,Ve){const $e=[],et=we.text;let ut=0;for(const We of Ve)$e.push(we.substring(ut,We)),ut=We;return ut<et.length&&$e.push(we.substring(ut,et.length)),$e}(X,ue);const ge=[],Ee={positionedLines:ge,text:X.toString(),top:I[1],bottom:I[1],left:I[0],right:I[0],writingMode:N,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(we,Ve,$e,et,ut,We,rt,it,at,ft,Je,Ct){let Lt=0,At=0,rn=0;const yt=it==="right"?1:it==="left"?0:.5;let qt=!1;for(const cn of ut){const un=cn.getSections();for(const $n of un){if($n.imageName)continue;const Gn=Ve[$n.fontStack];if(Gn&&(qt=Gn.ascender!==void 0&&Gn.descender!==void 0,!qt))break}if(!qt)break}let on=0;for(const cn of ut){cn.trim();const un=cn.getMaxScale(),$n=(un-1)*Qr,Gn={positionedGlyphs:[],lineOffset:0};we.positionedLines[on]=Gn;const qn=Gn.positionedGlyphs;let jn=0;if(!cn.length()){At+=We,++on;continue}let sr=0,pr=0;for(let Un=0;Un<cn.length();Un++){const Or=cn.getSection(Un),kr=cn.getSectionIndex(Un),lr=cn.getCharCode(Un);let An=Or.scale,Pr=null,Hn=null,Ii=null,Ir=Qr,ei=0;const Zr=!(at===To.horizontal||!Je&&!Pp(lr)||Je&&(Qg[lr]||(Sn=lr,Mt.Arabic(Sn)||Mt["Arabic Supplement"](Sn)||Mt["Arabic Extended-A"](Sn)||Mt["Arabic Presentation Forms-A"](Sn)||Mt["Arabic Presentation Forms-B"](Sn))));if(Or.imageName){const Di=et[Or.imageName];if(!Di)continue;Ii=Or.imageName,we.iconsInText=we.iconsInText||!0,Hn=Di.paddedRect;const Xr=Di.displaySize;An=An*Qr/Ct,Pr={width:Xr[0],height:Xr[1],left:ji,top:-SS,advance:Zr?Xr[1]:Xr[0],localGlyph:!1},ei=qt?-Pr.height*An:AS+un*Qr-Xr[1]*An,Ir=Pr.advance;const Ps=(Zr?Xr[0]:Xr[1])*An-Qr*un;Ps>0&&Ps>jn&&(jn=Ps)}else{const Di=$e[Or.fontStack];if(!Di)continue;Di[lr]&&(Hn=Di[lr]);const Xr=Ve[Or.fontStack];if(!Xr)continue;const Ps=Xr.glyphs[lr];if(!Ps)continue;if(Pr=Ps.metrics,Ir=lr!==8203?Qr:0,qt){const Eh=Xr.ascender!==void 0?Math.abs(Xr.ascender):0,ff=Xr.descender!==void 0?Math.abs(Xr.descender):0,mf=(Eh+ff)*An;sr<mf&&(sr=mf,pr=(Eh-ff)/2*An),ei=-Eh*An}else ei=AS+(un-An)*Qr}Zr?(we.verticalizable=!0,qn.push({glyph:lr,imageName:Ii,x:Lt,y:At+ei,vertical:Zr,scale:An,localGlyph:Pr.localGlyph,fontStack:Or.fontStack,sectionIndex:kr,metrics:Pr,rect:Hn}),Lt+=Ir*An+ft):(qn.push({glyph:lr,imageName:Ii,x:Lt,y:At+ei,vertical:Zr,scale:An,localGlyph:Pr.localGlyph,fontStack:Or.fontStack,sectionIndex:kr,metrics:Pr,rect:Hn}),Lt+=Pr.advance*An+ft)}qn.length!==0&&(rn=Math.max(Lt-ft,rn),qt?DS(qn,yt,jn,pr,We*un/2):DS(qn,yt,jn,0,We/2)),Lt=0;const Mr=We*un+jn;Gn.lineOffset=Math.max(jn,$n),At+=Mr,++on}var Sn;const sn=At,{horizontalAlign:Kt,verticalAlign:Zn}=N_(rt);(function(cn,un,$n,Gn,qn,jn){const sr=(un-$n)*qn,pr=-jn*Gn;for(const Mr of cn)for(const Un of Mr.positionedGlyphs)Un.x+=sr,Un.y+=pr})(we.positionedLines,yt,Kt,Zn,rn,sn),we.top+=-Zn*sn,we.bottom=we.top+sn,we.left+=-Kt*rn,we.right=we.left+rn,we.hasBaseline=qt}(Ee,n,o,c,te,y,b,E,N,A,O,G),!function(we){for(const Ve of we)if(Ve.positionedGlyphs.length!==0)return!1;return!0}(ge)&&Ee}const Qg={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},CN={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function MS(i,n,o,c,p,m){if(n.imageName){const y=c[n.imageName];return y?y.displaySize[0]*n.scale*Qr/m+p:0}{const y=o[n.fontStack],b=y&&y.glyphs[i];return b?b.metrics.advance*n.scale+p:0}}function kS(i,n,o,c){const p=Math.pow(i-n,2);return c?i<n?p/2:2*p:p+Math.abs(o)*o}function AN(i,n,o){let c=0;return i===10&&(c-=1e4),o&&(c+=150),i!==40&&i!==65288||(c+=50),n!==41&&n!==65289||(c+=50),c}function PS(i,n,o,c,p,m){let y=null,b=kS(n,o,p,m);for(const E of c){const A=kS(n-E.x,o,p,m)+E.badness;A<=b&&(y=E,b=A)}return{index:i,x:n,priorBreak:y,badness:b}}function IS(i){return i?IS(i.priorBreak).concat(i.index):[]}function N_(i){let n=.5,o=.5;switch(i){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(i){case"bottom":case"bottom-right":case"bottom-left":o=1;break;case"top":case"top-right":case"top-left":o=0}return{horizontalAlign:n,verticalAlign:o}}function DS(i,n,o,c,p){if(!(n||o||c||p))return;const m=i.length-1,y=i[m],b=(y.x+y.metrics.advance*y.scale)*n;for(let E=0;E<=m;E++)i[E].x-=b,i[E].y+=o+c+p}function MN(i,n,o){const{horizontalAlign:c,verticalAlign:p}=N_(o),m=n[0]-i.displaySize[0]*c,y=n[1]-i.displaySize[1]*p;return{image:i,top:y,bottom:y+i.displaySize[1],left:m,right:m+i.displaySize[0]}}function zS(i,n,o,c,p,m){const y=i.image;let b;if(y.content){const te=y.content,ue=y.pixelRatio||1;b=[te[0]/ue,te[1]/ue,y.displaySize[0]-te[2]/ue,y.displaySize[1]-te[3]/ue]}const E=n.left*m,A=n.right*m;let I,N,O,j;o==="width"||o==="both"?(j=p[0]+E-c[3],N=p[0]+A+c[1]):(j=p[0]+(E+A-y.displaySize[0])/2,N=j+y.displaySize[0]);const G=n.top*m,X=n.bottom*m;return o==="height"||o==="both"?(I=p[1]+G-c[0],O=p[1]+X+c[2]):(I=p[1]+(G+X-y.displaySize[1])/2,O=I+y.displaySize[1]),{image:y,top:I,right:N,bottom:O,left:j,collisionPadding:b}}class Da extends ve{constructor(n,o,c,p,m){super(n,o),this.angle=p,this.z=c,m!==void 0&&(this.segment=m)}clone(){return new Da(this.x,this.y,this.z,this.angle,this.segment)}}function NS(i,n,o,c,p){if(n.segment===void 0)return!0;let m=n,y=n.segment+1,b=0;for(;b>-o/2;){if(y--,y<0)return!1;b-=i[y].dist(m),m=i[y]}b+=i[y].dist(i[y+1]),y++;const E=[];let A=0;for(;b<o/2;){const I=i[y],N=i[y+1];if(!N)return!1;let O=i[y-1].angleTo(I)-I.angleTo(N);for(O=Math.abs((O+3*Math.PI)%(2*Math.PI)-Math.PI),E.push({distance:b,angleDelta:O}),A+=O;b-E[0].distance>c;)A-=E.shift().angleDelta;if(A>p)return!1;y++,b+=I.dist(N)}return!0}function LS(i){let n=0;for(let o=0;o<i.length-1;o++)n+=i[o].dist(i[o+1]);return n}function FS(i,n,o){return i?.6*n*o:0}function RS(i,n){return Math.max(i?i.right-i.left:0,n?n.right-n.left:0)}function kN(i,n,o,c,p,m){const y=FS(o,p,m),b=RS(o,c)*m;let E=0;const A=LS(i)/2;for(let I=0;I<i.length-1;I++){const N=i[I],O=i[I+1],j=N.dist(O);if(E+j>A){const G=(A-E)/j,X=En(N.x,O.x,G),te=En(N.y,O.y,G),ue=new Da(X,te,0,O.angleTo(N),I);return!y||NS(i,ue,b,y,n)?ue:void 0}E+=j}}function PN(i,n,o,c,p,m,y,b,E){const A=FS(c,m,y),I=RS(c,p),N=I*y,O=i[0].x===0||i[0].x===E||i[0].y===0||i[0].y===E;return n-N<n/4&&(n=N+n/4),OS(i,O?n/2*b%n:(I/2+2*m)*y*b%n,n,A,o,N,O,!1,E)}function OS(i,n,o,c,p,m,y,b,E){const A=m/2,I=LS(i);let N=0,O=n-o,j=[];for(let G=0;G<i.length-1;G++){const X=i[G],te=i[G+1],ue=X.dist(te),xe=te.angleTo(X);for(;O+o<N+ue;){O+=o;const he=(O-N)/ue,ge=En(X.x,te.x,he),Ee=En(X.y,te.y,he);if(ge>=0&&ge<E&&Ee>=0&&Ee<E&&O-A>=0&&O+A<=I){const we=new Da(ge,Ee,0,xe,G);we._round(),c&&!NS(i,we,m,c,p)||j.push(we)}}N+=ue}return b||j.length||y||(j=OS(i,N/2,o,c,p,m,y,!0,E)),j}function BS(i,n,o,c,p){const m=[];for(let y=0;y<i.length;y++){const b=i[y];let E;for(let A=0;A<b.length-1;A++){let I=b[A],N=b[A+1];I.x<n&&N.x<n||(I.x<n?I=new ve(n,I.y+(n-I.x)/(N.x-I.x)*(N.y-I.y))._round():N.x<n&&(N=new ve(n,I.y+(n-I.x)/(N.x-I.x)*(N.y-I.y))._round()),I.y<o&&N.y<o||(I.y<o?I=new ve(I.x+(o-I.y)/(N.y-I.y)*(N.x-I.x),o)._round():N.y<o&&(N=new ve(I.x+(o-I.y)/(N.y-I.y)*(N.x-I.x),o)._round()),I.x>=c&&N.x>=c||(I.x>=c?I=new ve(c,I.y+(c-I.x)/(N.x-I.x)*(N.y-I.y))._round():N.x>=c&&(N=new ve(c,I.y+(c-I.x)/(N.x-I.x)*(N.y-I.y))._round()),I.y>=p&&N.y>=p||(I.y>=p?I=new ve(I.x+(p-I.y)/(N.y-I.y)*(N.x-I.x),p)._round():N.y>=p&&(N=new ve(I.x+(p-I.y)/(N.y-I.y)*(N.x-I.x),p)._round()),E&&I.equals(E[E.length-1])||(E=[I],m.push(E)),E.push(N)))))}}return m}It(Da,"Anchor");const of=1e20;function $S(i,n,o,c,p,m,y,b,E){for(let A=n;A<n+c;A++)jS(i,o*m+A,m,p,y,b,E);for(let A=o;A<o+p;A++)jS(i,A*m+n,1,c,y,b,E)}function jS(i,n,o,c,p,m,y){m[0]=0,y[0]=-of,y[1]=of,p[0]=i[n];for(let b=1,E=0,A=0;b<c;b++){p[b]=i[n+b*o];const I=b*b;do{const N=m[E];A=(p[b]-p[N]+I-N*N)/(b-N)/2}while(A<=y[E]&&--E>-1);E++,m[E]=b,y[E]=A,y[E+1]=of}for(let b=0,E=0;b<c;b++){for(;y[E+1]<b;)E++;const A=m[E],I=b-A;i[n+b*o]=p[A]+I*I}}const Ms=2,L_={none:0,ideographs:1,all:2};class yh{constructor(n,o,c){this.requestManager=n,this.localGlyphMode=o,this.localFontFamily=c,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(n){this.url=n}getGlyphs(n,o){const c=[];for(const p in n)for(const m of n[p])c.push({stack:p,id:m});_t(c,({stack:p,id:m},y)=>{let b=this.entries[p];b||(b=this.entries[p]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let E=b.glyphs[m];if(E!==void 0)return void y(null,{stack:p,id:m,glyph:E});if(E=this._tinySDF(b,p,m),E)return b.glyphs[m]=E,void y(null,{stack:p,id:m,glyph:E});const A=Math.floor(m/256);if(256*A>65535)return void y(new Error("glyphs > 65535 not supported"));if(b.ranges[A])return void y(null,{stack:p,id:m,glyph:E});let I=b.requests[A];I||(I=b.requests[A]=[],yh.loadGlyphRange(p,A,this.url,this.requestManager,(N,O)=>{if(O){b.ascender=O.ascender,b.descender=O.descender;for(const j in O.glyphs)this._doesCharSupportLocalGlyph(+j)||(b.glyphs[+j]=O.glyphs[+j]);b.ranges[A]=!0}for(const j of I)j(N,O);delete b.requests[A]})),I.push((N,O)=>{N?y(N):O&&y(null,{stack:p,id:m,glyph:O.glyphs[m]||null})})},(p,m)=>{if(p)o(p);else if(m){const y={};for(const{stack:b,id:E,glyph:A}of m)y[b]===void 0&&(y[b]={}),y[b].glyphs===void 0&&(y[b].glyphs={}),y[b].glyphs[E]=A&&{id:A.id,bitmap:A.bitmap.clone(),metrics:A.metrics},y[b].ascender=this.entries[b].ascender,y[b].descender=this.entries[b].descender;o(null,y)}})}_doesCharSupportLocalGlyph(n){return this.localGlyphMode!==L_.none&&(this.localGlyphMode===L_.all?!!this.localFontFamily:!!this.localFontFamily&&(Mt["CJK Unified Ideographs"](n)||Mt["Hangul Syllables"](n)||Mt.Hiragana(n)||Mt.Katakana(n)||Mt["CJK Symbols and Punctuation"](n)))}_tinySDF(n,o,c){const p=this.localFontFamily;if(!p||!this._doesCharSupportLocalGlyph(c))return;let m=n.tinySDF;if(!m){let X="400";/bold/i.test(o)?X="900":/medium/i.test(o)?X="500":/light/i.test(o)&&(X="200"),m=n.tinySDF=new yh.TinySDF({fontFamily:p,fontWeight:X,fontSize:24*Ms,buffer:3*Ms,radius:8*Ms}),m.fontWeight=X}if(this.localGlyphs[m.fontWeight][c])return this.localGlyphs[m.fontWeight][c];const y=String.fromCharCode(c),{data:b,width:E,height:A,glyphWidth:I,glyphHeight:N,glyphLeft:O,glyphTop:j,glyphAdvance:G}=m.draw(y);return this.localGlyphs[m.fontWeight][c]={id:c,bitmap:new Pa({width:E,height:A},b),metrics:{width:I/Ms,height:N/Ms,left:O/Ms,top:j/Ms-27,advance:G/Ms,localGlyph:!0}}}}yh.loadGlyphRange=function(i,n,o,c,p){const m=256*n,y=m+255,b=c.transformRequest(c.normalizeGlyphsURL(o).replace("{fontstack}",i).replace("{range}",`${m}-${y}`),$o.Glyphs);Ja(b,(E,A)=>{if(E)p(E);else if(A){const I={},N=function(O){return new Jg(O).readFields(EN,{})}(A);for(const O of N.glyphs)I[O.id]=O;p(null,{glyphs:I,ascender:N.ascender,descender:N.descender})}})},yh.TinySDF=class{constructor({fontSize:i=24,buffer:n=3,radius:o=8,cutoff:c=.25,fontFamily:p="sans-serif",fontWeight:m="normal",fontStyle:y="normal"}={}){this.buffer=n,this.cutoff=c,this.radius=o;const b=this.size=i+4*n,E=this._createCanvas(b),A=this.ctx=E.getContext("2d",{willReadFrequently:!0});A.font=`${y} ${m} ${i}px ${p}`,A.textBaseline="alphabetic",A.textAlign="left",A.fillStyle="black",this.gridOuter=new Float64Array(b*b),this.gridInner=new Float64Array(b*b),this.f=new Float64Array(b),this.z=new Float64Array(b+1),this.v=new Uint16Array(b)}_createCanvas(i){const n=document.createElement("canvas");return n.width=n.height=i,n}draw(i){const{width:n,actualBoundingBoxAscent:o,actualBoundingBoxDescent:c,actualBoundingBoxLeft:p,actualBoundingBoxRight:m}=this.ctx.measureText(i),y=Math.ceil(o),b=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(m-p))),E=Math.min(this.size-this.buffer,y+Math.ceil(c)),A=b+2*this.buffer,I=E+2*this.buffer,N=Math.max(A*I,0),O=new Uint8ClampedArray(N),j={data:O,width:A,height:I,glyphWidth:b,glyphHeight:E,glyphTop:y,glyphLeft:0,glyphAdvance:n};if(b===0||E===0)return j;const{ctx:G,buffer:X,gridInner:te,gridOuter:ue}=this;G.clearRect(X,X,b,E),G.fillText(i,X,X+y);const xe=G.getImageData(X,X,b,E);ue.fill(of,0,N),te.fill(0,0,N);for(let he=0;he<E;he++)for(let ge=0;ge<b;ge++){const Ee=xe.data[4*(he*b+ge)+3]/255;if(Ee===0)continue;const we=(he+X)*A+ge+X;if(Ee===1)ue[we]=0,te[we]=of;else{const Ve=.5-Ee;ue[we]=Ve>0?Ve*Ve:0,te[we]=Ve<0?Ve*Ve:0}}$S(ue,0,0,A,I,A,this.f,this.v,this.z),$S(te,X,X,b,E,A,this.f,this.v,this.z);for(let he=0;he<N;he++){const ge=Math.sqrt(ue[he])-Math.sqrt(te[he]);O[he]=Math.round(255-255*(ge/this.radius+this.cutoff))}return j}};const xh=ji;function US(i,n,o,c){const p=[],m=i.image,y=m.pixelRatio,b=m.paddedRect.w-2*xh,E=m.paddedRect.h-2*xh,A=i.right-i.left,I=i.bottom-i.top,N=m.stretchX||[[0,b]],O=m.stretchY||[[0,E]],j=(We,rt)=>We+rt[1]-rt[0],G=N.reduce(j,0),X=O.reduce(j,0),te=b-G,ue=E-X;let xe=0,he=G,ge=0,Ee=X,we=0,Ve=te,$e=0,et=ue;if(m.content&&c){const We=m.content;xe=e0(N,0,We[0]),ge=e0(O,0,We[1]),he=e0(N,We[0],We[2]),Ee=e0(O,We[1],We[3]),we=We[0]-xe,$e=We[1]-ge,Ve=We[2]-We[0]-he,et=We[3]-We[1]-Ee}const ut=(We,rt,it,at)=>{const ft=t0(We.stretch-xe,he,A,i.left),Je=n0(We.fixed-we,Ve,We.stretch,G),Ct=t0(rt.stretch-ge,Ee,I,i.top),Lt=n0(rt.fixed-$e,et,rt.stretch,X),At=t0(it.stretch-xe,he,A,i.left),rn=n0(it.fixed-we,Ve,it.stretch,G),yt=t0(at.stretch-ge,Ee,I,i.top),qt=n0(at.fixed-$e,et,at.stretch,X),on=new ve(ft,Ct),Sn=new ve(At,Ct),sn=new ve(At,yt),Kt=new ve(ft,yt),Zn=new ve(Je/y,Lt/y),cn=new ve(rn/y,qt/y),un=n*Math.PI/180;if(un){const qn=Math.sin(un),jn=Math.cos(un),sr=[jn,-qn,qn,jn];on._matMult(sr),Sn._matMult(sr),Kt._matMult(sr),sn._matMult(sr)}const $n=We.stretch+We.fixed,Gn=rt.stretch+rt.fixed;return{tl:on,tr:Sn,bl:Kt,br:sn,tex:{x:m.paddedRect.x+xh+$n,y:m.paddedRect.y+xh+Gn,w:it.stretch+it.fixed-$n,h:at.stretch+at.fixed-Gn},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Zn,pixelOffsetBR:cn,minFontScaleX:Ve/y/A,minFontScaleY:et/y/I,isSDF:o}};if(c&&(m.stretchX||m.stretchY)){const We=VS(N,te,G),rt=VS(O,ue,X);for(let it=0;it<We.length-1;it++){const at=We[it],ft=We[it+1];for(let Je=0;Je<rt.length-1;Je++)p.push(ut(at,rt[Je],ft,rt[Je+1]))}}else p.push(ut({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:b+1},{fixed:0,stretch:E+1}));return p}function e0(i,n,o){let c=0;for(const p of i)c+=Math.max(n,Math.min(o,p[1]))-Math.max(n,Math.min(o,p[0]));return c}function VS(i,n,o){const c=[{fixed:-xh,stretch:0}];for(const[p,m]of i){const y=c[c.length-1];c.push({fixed:p-y.stretch,stretch:y.stretch}),c.push({fixed:p-y.stretch,stretch:y.stretch+(m-p)})}return c.push({fixed:n+xh,stretch:o}),c}function t0(i,n,o,c){return i/n*o+c}function n0(i,n,o,c){return i-n*o/c}function IN(i,n,o,c){const p=n+i.positionedLines[c].lineOffset;return c===0?o+p/2:o+(p+(n+i.positionedLines[c-1].lineOffset))/2}class DN{constructor(n=[],o=zN){if(this.data=n,this.length=this.data.length,this.compare=o,this.length>0)for(let c=(this.length>>1)-1;c>=0;c--)this._down(c)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],o=this.data.pop();return this.length--,this.length>0&&(this.data[0]=o,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:o,compare:c}=this,p=o[n];for(;n>0;){const m=n-1>>1,y=o[m];if(c(p,y)>=0)break;o[n]=y,n=m}o[n]=p}_down(n){const{data:o,compare:c}=this,p=this.length>>1,m=o[n];for(;n<p;){let y=1+(n<<1),b=o[y];const E=y+1;if(E<this.length&&c(o[E],b)<0&&(y=E,b=o[E]),c(b,m)>=0)break;o[n]=b,n=y}o[n]=m}}function zN(i,n){return i<n?-1:i>n?1:0}function NN(i,n=1,o=!1){let c=1/0,p=1/0,m=-1/0,y=-1/0;const b=i[0];for(let j=0;j<b.length;j++){const G=b[j];(!j||G.x<c)&&(c=G.x),(!j||G.y<p)&&(p=G.y),(!j||G.x>m)&&(m=G.x),(!j||G.y>y)&&(y=G.y)}const E=Math.min(m-c,y-p);let A=E/2;const I=new DN([],LN);if(E===0)return new ve(c,p);for(let j=c;j<m;j+=E)for(let G=p;G<y;G+=E)I.push(new _h(j+A,G+A,A,i));let N=function(j){let G=0,X=0,te=0;const ue=j[0];for(let xe=0,he=ue.length,ge=he-1;xe<he;ge=xe++){const Ee=ue[xe],we=ue[ge],Ve=Ee.x*we.y-we.x*Ee.y;X+=(Ee.x+we.x)*Ve,te+=(Ee.y+we.y)*Ve,G+=3*Ve}return new _h(X/G,te/G,0,j)}(i),O=I.length;for(;I.length;){const j=I.pop();(j.d>N.d||!N.d)&&(N=j,o&&console.log("found best %d after %d probes",Math.round(1e4*j.d)/1e4,O)),j.max-N.d<=n||(A=j.h/2,I.push(new _h(j.p.x-A,j.p.y-A,A,i)),I.push(new _h(j.p.x+A,j.p.y-A,A,i)),I.push(new _h(j.p.x-A,j.p.y+A,A,i)),I.push(new _h(j.p.x+A,j.p.y+A,A,i)),O+=4)}return o&&(console.log(`num probes: ${O}`),console.log(`best distance: ${N.d}`)),N.p}function LN(i,n){return n.max-i.max}class _h{constructor(n,o,c,p){this.p=new ve(n,o),this.h=c,this.d=function(m,y){let b=!1,E=1/0;for(let A=0;A<y.length;A++){const I=y[A];for(let N=0,O=I.length,j=O-1;N<O;j=N++){const G=I[N],X=I[j];G.y>m.y!=X.y>m.y&&m.x<(X.x-G.x)*(m.y-G.y)/(X.y-G.y)+G.x&&(b=!b),E=Math.min(E,OT(m,G,X))}}return(b?1:-1)*Math.sqrt(E)}(this.p,p),this.max=this.d+this.h*Math.SQRT2}}const vh=7,F_=Number.POSITIVE_INFINITY,FN=Math.sqrt(2);function GS(i,[n,o]){let c=0,p=0;if(o===F_){n<0&&(n=0);const m=n/FN;switch(i){case"top-right":case"top-left":p=m-vh;break;case"bottom-right":case"bottom-left":p=-m+vh;break;case"bottom":p=-n+vh;break;case"top":p=n-vh}switch(i){case"top-right":case"bottom-right":c=-m;break;case"top-left":case"bottom-left":c=m;break;case"left":c=n;break;case"right":c=-n}}else{switch(n=Math.abs(n),o=Math.abs(o),i){case"top-right":case"top-left":case"top":p=o-vh;break;case"bottom-right":case"bottom-left":case"bottom":p=-o+vh}switch(i){case"top-right":case"bottom-right":case"right":c=-n;break;case"top-left":case"bottom-left":case"left":c=n}}return[c,p]}function RN(i,n,o,c,p,m,y,b,E,A){i.createArrays(),i.tilePixelRatio=Zt/(512*i.overscaling),i.compareText={},i.iconsNeedLinear=!1;const I=i.layers[0].layout,N=i.layers[0]._unevaluatedLayout._values,O={};if(i.textSizeData.kind==="composite"){const{minZoom:X,maxZoom:te}=i.textSizeData;O.compositeTextSizes=[N["text-size"].possiblyEvaluate(new z(X),b),N["text-size"].possiblyEvaluate(new z(te),b)]}if(i.iconSizeData.kind==="composite"){const{minZoom:X,maxZoom:te}=i.iconSizeData;O.compositeIconSizes=[N["icon-size"].possiblyEvaluate(new z(X),b),N["icon-size"].possiblyEvaluate(new z(te),b)]}O.layoutTextSize=N["text-size"].possiblyEvaluate(new z(E+1),b),O.layoutIconSize=N["icon-size"].possiblyEvaluate(new z(E+1),b),O.textMaxSize=N["text-size"].possiblyEvaluate(new z(18),b);const j=I.get("text-rotation-alignment")==="map"&&I.get("symbol-placement")!=="point",G=I.get("text-size");for(const X of i.features){const te=I.get("text-font").evaluate(X,{},b).join(","),ue=G.evaluate(X,{},b),xe=O.layoutTextSize.evaluate(X,{},b),he=(O.layoutIconSize.evaluate(X,{},b),{horizontal:{},vertical:void 0}),ge=X.text;let Ee,we=[0,0];if(ge){const et=ge.toString(),ut=I.get("text-letter-spacing").evaluate(X,{},b)*Qr,We=I.get("text-line-height").evaluate(X,{},b)*Qr,rt=qx(et)?ut:0,it=I.get("text-anchor").evaluate(X,{},b),at=I.get("text-variable-anchor");if(!at){const At=I.get("text-radial-offset").evaluate(X,{},b);we=At?GS(it,[At*Qr,F_]):I.get("text-offset").evaluate(X,{},b).map(rn=>rn*Qr)}let ft=j?"center":I.get("text-justify").evaluate(X,{},b);const Je=I.get("symbol-placement")==="point",Ct=Je?I.get("text-max-width").evaluate(X,{},b)*Qr:1/0,Lt=At=>{i.allowVerticalPlacement&&kp(et)&&(he.vertical=z_(ge,n,o,p,te,Ct,We,it,At,rt,we,To.vertical,!0,xe,ue))};if(!j&&at){const At=ft==="auto"?at.map(yt=>R_(yt)):[ft];let rn=!1;for(let yt=0;yt<At.length;yt++){const qt=At[yt];if(!he.horizontal[qt])if(rn)he.horizontal[qt]=he.horizontal[0];else{const on=z_(ge,n,o,p,te,Ct,We,"center",qt,rt,we,To.horizontal,!1,xe,ue);on&&(he.horizontal[qt]=on,rn=on.positionedLines.length===1)}}Lt("left")}else{if(ft==="auto"&&(ft=R_(it)),Je||I.get("text-writing-mode").indexOf("horizontal")>=0||!kp(et)){const At=z_(ge,n,o,p,te,Ct,We,it,ft,rt,we,To.horizontal,!1,xe,ue);At&&(he.horizontal[ft]=At)}Lt(Je?"left":ft)}}let Ve=!1;if(X.icon&&X.icon.name){const et=c[X.icon.name];et&&(Ee=MN(p[X.icon.name],I.get("icon-offset").evaluate(X,{},b),I.get("icon-anchor").evaluate(X,{},b)),Ve=et.sdf,i.sdfIcons===void 0?i.sdfIcons=et.sdf:i.sdfIcons!==et.sdf&&tn("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(et.pixelRatio!==i.pixelRatio||I.get("icon-rotate").constantOr(1)!==0)&&(i.iconsNeedLinear=!0))}const $e=HS(he.horizontal)||he.vertical;i.iconsInText||(i.iconsInText=!!$e&&$e.iconsInText),($e||Ee)&&ON(i,X,he,Ee,c,O,xe,0,we,Ve,y,b,A)}m&&i.generateCollisionDebugBuffers(E,i.collisionBoxArray)}function R_(i){switch(i){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function ON(i,n,o,c,p,m,y,b,E,A,I,N,O){let j=m.textMaxSize.evaluate(n,{},N);j===void 0&&(j=y);const G=i.layers[0].layout,X=G.get("icon-offset").evaluate(n,{},N),te=HS(o.horizontal)||o.vertical,ue=O.name==="globe",xe=Qr,he=y/xe,ge=i.tilePixelRatio*j/xe,Ee=(it=i.overscaling,i.zoom>18&&it>2&&(it>>=1),Math.max(Zt/(512*it),1)*G.get("symbol-spacing")),we=G.get("text-padding")*i.tilePixelRatio,Ve=G.get("icon-padding")*i.tilePixelRatio,$e=Ie(G.get("text-max-angle")),et=G.get("text-rotation-alignment")==="map"&&G.get("symbol-placement")!=="point",ut=G.get("icon-rotation-alignment")==="map"&&G.get("symbol-placement")!=="point",We=G.get("symbol-placement"),rt=Ee/2;var it;const at=G.get("icon-text-fit");let ft;c&&at!=="none"&&(i.allowVerticalPlacement&&o.vertical&&(ft=zS(c,o.vertical,at,G.get("icon-text-fit-padding"),X,he)),te&&(c=zS(c,te,at,G.get("icon-text-fit-padding"),X,he)));const Je=(Ct,Lt,At)=>{if(Lt.x<0||Lt.x>=Zt||Lt.y<0||Lt.y>=Zt)return;let rn=null;if(ue){const{x:yt,y:qt,z:on}=O.projectTilePoint(Lt.x,Lt.y,At);rn={anchor:new Da(yt,qt,on,0,void 0),up:O.upVector(At,Lt.x,Lt.y)}}(function(yt,qt,on,Sn,sn,Kt,Zn,cn,un,$n,Gn,qn,jn,sr,pr,Mr,Un,Or,kr,lr,An,Pr,Hn,Ii,Ir){const ei=yt.addToLineVertexArray(qt,Sn);let Zr,Di,Xr,Ps,Eh,ff,mf,SC=0,CC=0,AC=0,MC=0,J_=-1,Q_=-1;const na={};let kC=Zx("");const Yc=on?on.anchor:qt;let ev=0,tv=0;if(un._unevaluatedLayout.getValue("text-radial-offset")===void 0?[ev,tv]=un.layout.get("text-offset").evaluate(An,{},Ir).map(so=>so*Qr):(ev=un.layout.get("text-radial-offset").evaluate(An,{},Ir)*Qr,tv=F_),yt.allowVerticalPlacement&&sn.vertical){const so=sn.vertical;if(pr)ff=O_(so),cn&&(mf=O_(cn));else{const ao=un.layout.get("text-rotate").evaluate(An,{},Ir)+90;Xr=r0($n,Yc,qt,Gn,qn,jn,so,sr,ao,Mr),cn&&(Ps=r0($n,Yc,qt,Gn,qn,jn,cn,Or,ao))}}if(Kt){const so=un.layout.get("icon-rotate").evaluate(An,{},Ir),ao=un.layout.get("icon-text-fit")!=="none",gf=US(Kt,so,Hn,ao),rv=cn?US(cn,so,Hn,ao):void 0;Di=r0($n,Yc,qt,Gn,qn,jn,Kt,Or,so),SC=4*gf.length;const PC=yt.iconSizeData;let Jc=null;PC.kind==="source"?(Jc=[As*un.layout.get("icon-size").evaluate(An,{},Ir)],Jc[0]>wl&&tn(`${yt.layerIds[0]}: Value for "icon-size" is >= ${sf}. Reduce your "icon-size".`)):PC.kind==="composite"&&(Jc=[As*Pr.compositeIconSizes[0].evaluate(An,{},Ir),As*Pr.compositeIconSizes[1].evaluate(An,{},Ir)],(Jc[0]>wl||Jc[1]>wl)&&tn(`${yt.layerIds[0]}: Value for "icon-size" is >= ${sf}. Reduce your "icon-size".`)),yt.addSymbols(yt.icon,gf,Jc,lr,kr,An,!1,on,qt,ei.lineStartIndex,ei.lineLength,-1,Ii,Ir),J_=yt.icon.placedSymbolArray.length-1,rv&&(CC=4*rv.length,yt.addSymbols(yt.icon,rv,Jc,lr,kr,An,To.vertical,on,qt,ei.lineStartIndex,ei.lineLength,-1,Ii,Ir),Q_=yt.icon.placedSymbolArray.length-1)}for(const so in sn.horizontal){const ao=sn.horizontal[so];Zr||(kC=Zx(ao.text),pr?Eh=O_(ao):Zr=r0($n,Yc,qt,Gn,qn,jn,ao,sr,un.layout.get("text-rotate").evaluate(An,{},Ir),Mr));const gf=ao.positionedLines.length===1;if(AC+=qS(yt,on,qt,ao,Zn,un,pr,An,Mr,ei,sn.vertical?To.horizontal:To.horizontalOnly,gf?Object.keys(sn.horizontal):[so],na,J_,Pr,Ii,Ir),gf)break}sn.vertical&&(MC+=qS(yt,on,qt,sn.vertical,Zn,un,pr,An,Mr,ei,To.vertical,["vertical"],na,Q_,Pr,Ii,Ir));let Ml=-1;const nv=(so,ao)=>so?Math.max(so,ao):ao;Ml=nv(Eh,Ml),Ml=nv(ff,Ml),Ml=nv(mf,Ml);const d8=Ml>-1?1:0;yt.glyphOffsetArray.length>=Tl.MAX_GLYPHS&&tn("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),An.sortKey!==void 0&&yt.addToSortKeyRanges(yt.symbolInstances.length,An.sortKey),yt.symbolInstances.emplaceBack(Yc.x,Yc.y,Yc.z,qt.x,qt.y,na.right>=0?na.right:-1,na.center>=0?na.center:-1,na.left>=0?na.left:-1,na.vertical>=0?na.vertical:-1,J_,Q_,kC,Zr!==void 0?Zr:yt.collisionBoxArray.length,Zr!==void 0?Zr+1:yt.collisionBoxArray.length,Xr!==void 0?Xr:yt.collisionBoxArray.length,Xr!==void 0?Xr+1:yt.collisionBoxArray.length,Di!==void 0?Di:yt.collisionBoxArray.length,Di!==void 0?Di+1:yt.collisionBoxArray.length,Ps||yt.collisionBoxArray.length,Ps?Ps+1:yt.collisionBoxArray.length,Gn,AC,MC,SC,CC,d8,0,ev,tv,Ml)})(i,Lt,rn,Ct,o,c,p,ft,i.layers[0],i.collisionBoxArray,n.index,n.sourceLayerIndex,i.index,we,et,E,0,Ve,ut,X,n,m,A,I,N)};if(We==="line")for(const Ct of BS(n.geometry,0,0,Zt,Zt)){const Lt=PN(Ct,Ee,$e,o.vertical||te,c,xe,ge,i.overscaling,Zt);for(const At of Lt)te&&BN(i,te.text,rt,At)||Je(Ct,At,N)}else if(We==="line-center"){for(const Ct of n.geometry)if(Ct.length>1){const Lt=kN(Ct,$e,o.vertical||te,c,xe,ge);Lt&&Je(Ct,Lt,N)}}else if(n.type==="Polygon")for(const Ct of T_(n.geometry,0)){const Lt=NN(Ct,16);Je(Ct[0],new Da(Lt.x,Lt.y,0,0,void 0),N)}else if(n.type==="LineString")for(const Ct of n.geometry)Je(Ct,new Da(Ct[0].x,Ct[0].y,0,0,void 0),N);else if(n.type==="Point")for(const Ct of n.geometry)for(const Lt of Ct)Je([Lt],new Da(Lt.x,Lt.y,0,0,void 0),N)}const sf=255,wl=sf*As;function qS(i,n,o,c,p,m,y,b,E,A,I,N,O,j,G,X,te){const ue=function(ge,Ee,we,Ve,$e,et,ut,We){const rt=[];if(Ee.positionedLines.length===0)return rt;const it=Ve.layout.get("text-rotate").evaluate(et,{})*Math.PI/180,at=function(At){const rn=At[0],yt=At[1],qt=rn*yt;return qt>0?[rn,-yt]:qt<0?[-rn,yt]:rn===0?[yt,rn]:[yt,-rn]}(we);let ft=Math.abs(Ee.top-Ee.bottom);for(const At of Ee.positionedLines)ft-=At.lineOffset;const Je=Ee.positionedLines.length,Ct=ft/Je;let Lt=Ee.top-we[1];for(let At=0;At<Je;++At){const rn=Ee.positionedLines[At];Lt=IN(Ee,Ct,Lt,At);for(const yt of rn.positionedGlyphs){if(!yt.rect)continue;const qt=yt.rect||{};let on=SS+1,Sn=!0,sn=1,Kt=0;if(yt.imageName){const Hn=ut[yt.imageName];if(!Hn)continue;if(Hn.sdf){tn("SDF images are not supported in formatted text and will be ignored.");continue}Sn=!1,sn=Hn.pixelRatio,on=ji/sn}const Zn=($e||We)&&yt.vertical,cn=yt.metrics.advance*yt.scale/2,un=yt.metrics,$n=yt.rect;if($n===null)continue;We&&Ee.verticalizable&&(Kt=yt.imageName?cn-yt.metrics.width*yt.scale/2:0);const Gn=$e?[yt.x+cn,yt.y]:[0,0];let qn=[0,0],jn=[0,0],sr=!1;$e||(Zn?(jn=[yt.x+cn+at[0],yt.y+at[1]-Kt],sr=!0):qn=[yt.x+cn+we[0],yt.y+we[1]-Kt]);const pr=$n.w*yt.scale/(sn*(yt.localGlyph?Ms:1)),Mr=$n.h*yt.scale/(sn*(yt.localGlyph?Ms:1));let Un,Or,kr,lr;if(Zn){const Hn=yt.y-Lt,Ii=new ve(-cn,cn-Hn),Ir=-Math.PI/2,ei=new ve(...jn);Un=new ve(-cn+qn[0],qn[1]),Un._rotateAround(Ir,Ii)._add(ei),Un.x+=-Hn+cn,Un.y-=(un.left-on)*yt.scale;const Zr=yt.imageName?un.advance*yt.scale:Qr*yt.scale,Di=String.fromCharCode(yt.glyph);dN(Di)?Un.x+=(1-on)*yt.scale:pN(Di)?Un.x+=Zr-un.height*yt.scale+(-on-1)*yt.scale:Un.x+=yt.imageName||un.width+2*on===$n.w&&un.height+2*on===$n.h?(Zr-Mr)/2:(Zr-(un.height+2*on)*yt.scale)/2,Or=new ve(Un.x,Un.y-pr),kr=new ve(Un.x+Mr,Un.y),lr=new ve(Un.x+Mr,Un.y-pr)}else{const Hn=(un.left-on)*yt.scale-cn+qn[0],Ii=(-un.top-on)*yt.scale+qn[1],Ir=Hn+pr,ei=Ii+Mr;Un=new ve(Hn,Ii),Or=new ve(Ir,Ii),kr=new ve(Hn,ei),lr=new ve(Ir,ei)}if(it){let Hn;Hn=$e?new ve(0,0):sr?new ve(at[0],at[1]):new ve(we[0],we[1]),Un._rotateAround(it,Hn),Or._rotateAround(it,Hn),kr._rotateAround(it,Hn),lr._rotateAround(it,Hn)}const An=new ve(0,0),Pr=new ve(0,0);rt.push({tl:Un,tr:Or,bl:kr,br:lr,tex:qt,writingMode:Ee.writingMode,glyphOffset:Gn,sectionIndex:yt.sectionIndex,isSDF:Sn,pixelOffsetTL:An,pixelOffsetBR:Pr,minFontScaleX:0,minFontScaleY:0})}}return rt}(0,c,E,m,y,b,p,i.allowVerticalPlacement),xe=i.textSizeData;let he=null;xe.kind==="source"?(he=[As*m.layout.get("text-size").evaluate(b,{},te)],he[0]>wl&&tn(`${i.layerIds[0]}: Value for "text-size" is >= ${sf}. Reduce your "text-size".`)):xe.kind==="composite"&&(he=[As*G.compositeTextSizes[0].evaluate(b,{},te),As*G.compositeTextSizes[1].evaluate(b,{},te)],(he[0]>wl||he[1]>wl)&&tn(`${i.layerIds[0]}: Value for "text-size" is >= ${sf}. Reduce your "text-size".`)),i.addSymbols(i.text,ue,he,E,y,b,I,n,o,A.lineStartIndex,A.lineLength,j,X,te);for(const ge of N)O[ge]=i.text.placedSymbolArray.length-1;return 4*ue.length}function HS(i){for(const n in i)return i[n];return null}function r0(i,n,o,c,p,m,y,b,E,A){let I=y.top,N=y.bottom,O=y.left,j=y.right;const G=y.collisionPadding;if(G&&(O-=G[0],I-=G[1],j+=G[2],N+=G[3]),E){const X=new ve(O,I),te=new ve(j,I),ue=new ve(O,N),xe=new ve(j,N),he=Ie(E);let ge=new ve(0,0);A&&(ge=new ve(A[0],A[1])),X._rotateAround(he,ge),te._rotateAround(he,ge),ue._rotateAround(he,ge),xe._rotateAround(he,ge),O=Math.min(X.x,te.x,ue.x,xe.x),j=Math.max(X.x,te.x,ue.x,xe.x),I=Math.min(X.y,te.y,ue.y,xe.y),N=Math.max(X.y,te.y,ue.y,xe.y)}return i.emplaceBack(n.x,n.y,n.z,o.x,o.y,O,I,j,N,b,c,p,m),i.length-1}function O_(i){i.collisionPadding&&(i.top-=i.collisionPadding[1],i.bottom+=i.collisionPadding[3]);const n=i.bottom-i.top;return n>0?Math.max(10,n):null}function BN(i,n,o,c){const p=i.compareText;if(n in p){const m=p[n];for(let y=m.length-1;y>=0;y--)if(c.dist(m[y])<o)return!0}else p[n]=[];return p[n].push(c),!1}function WS(i,n){const o=i.fovAboveCenter,c=i.elevation?i.elevation.getMinElevationBelowMSL()*n:0,p=(i._camera.position[2]*i.worldSize-c)/Math.cos(i._pitch),m=Math.sin(o)*p/Math.sin(Math.max(Math.PI/2-i._pitch-o,.01)),y=Math.sin(i._pitch)*m+p;return Math.min(1.01*y,p*(1/i._horizonShift))}function Xc(i,n){if(!n.isReprojectedInTileSpace)return{scale:1<<i.z,x:i.x,y:i.y,x2:i.x+1,y2:i.y+1,projection:n};const o=Math.pow(2,-i.z),c=i.x*o,p=(i.x+1)*o,m=i.y*o,y=(i.y+1)*o,b=Eo(c),E=Eo(p),A=ai(m),I=ai(y),N=n.project(b,A),O=n.project(E,A),j=n.project(E,I),G=n.project(b,I);let X=Math.min(N.x,O.x,j.x,G.x),te=Math.min(N.y,O.y,j.y,G.y),ue=Math.max(N.x,O.x,j.x,G.x),xe=Math.max(N.y,O.y,j.y,G.y);const he=o/16;function ge(we,Ve,$e,et,ut,We){const rt=($e+ut)/2,it=(et+We)/2,at=n.project(Eo(rt),ai(it)),ft=Math.max(0,X-at.x,te-at.y,at.x-ue,at.y-xe);X=Math.min(X,at.x),ue=Math.max(ue,at.x),te=Math.min(te,at.y),xe=Math.max(xe,at.y),ft>he&&(ge(we,at,$e,et,rt,it),ge(at,Ve,rt,it,ut,We))}ge(N,O,c,m,p,m),ge(O,j,p,m,p,y),ge(j,G,p,y,c,y),ge(G,N,c,y,c,m),X-=he,te-=he,ue+=he,xe+=he;const Ee=1/Math.max(ue-X,xe-te);return{scale:Ee,x:X*Ee,y:te*Ee,x2:ue*Ee,y2:xe*Ee,projection:n}}const $N=Ts(new Float32Array(16));class El{constructor(n){this.spec=n,this.name=n.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(n,o){return{x:0,y:0,z:0}}unproject(n,o){return new Bn(0,0)}projectTilePoint(n,o,c){return{x:n,y:o,z:0}}locationPoint(n,o,c=!0){return n._coordinatePoint(n.locationCoordinate(o),c)}pixelsPerMeter(n,o){return Cs(1,n)*o}pixelSpaceConversion(n,o,c){return 1}farthestPixelDistance(n){return WS(n,n.pixelsPerMeter)}pointCoordinate(n,o,c,p){const m=n.horizonLineFromTop(!1),y=new ve(o,Math.max(m,c));return n.rayIntersectionCoordinate(n.pointRayIntersection(y,p))}pointCoordinate3D(n,o,c){const p=new ve(o,c);if(n.elevation)return n.elevation.pointCoordinate(p);{const m=this.pointCoordinate(n,p.x,p.y,0);return[m.x,m.y,m.z]}}isPointAboveHorizon(n,o){if(n.elevation)return!this.pointCoordinate3D(n,o.x,o.y);const c=n.horizonLineFromTop();return o.y<c}createInversionMatrix(n,o){return $N}createTileMatrix(n,o,c){let p,m,y;const b=c.canonical,E=Ts(new Float64Array(16));if(this.isReprojectedInTileSpace){const A=Xc(b,this);p=1,m=A.x+c.wrap*A.scale,y=A.y,Uc(E,E,[p/A.scale,p/A.scale,n.pixelsPerMeter/o])}else p=o/n.zoomScale(b.z),m=(b.x+Math.pow(2,b.z)*c.wrap)*p,y=b.y*p;return Fp(E,E,[m,y,0]),Uc(E,E,[p/Zt,p/Zt,1]),E}upVector(n,o,c){return[0,0,1]}upVectorScale(n,o,c){return{metersToTile:1}}}class jN extends El{constructor(n){super(n),this.range=[4,7],this.center=n.center||[-96,37.5];const[o,c]=this.parallels=n.parallels||[29.5,45.5],p=Math.sin(Ie(o));this.n=(p+Math.sin(Ie(c)))/2,this.c=1+p*(2*this.n-p),this.r0=Math.sqrt(this.c)/this.n}project(n,o){const{n:c,c:p,r0:m}=this,y=Ie(n-this.center[0]),b=Ie(o),E=Math.sqrt(p-2*c*Math.sin(b))/c;return{x:E*Math.sin(y*c),y:E*Math.cos(y*c)-m,z:0}}unproject(n,o){const{n:c,c:p,r0:m}=this,y=m+o;let b=Math.atan2(n,Math.abs(y))*Math.sign(y);y*c<0&&(b-=Math.PI*Math.sign(n)*Math.sign(y));const E=Ie(this.center[0])*c;b=De(b,-Math.PI-E,Math.PI-E);const A=Ze(Ke(b/c)+this.center[0],-180,180),I=Math.asin(Ze((p-(n*n+y*y)*c*c)/(2*c),-1,1)),N=Ze(Ke(I),-li,li);return new Bn(A,N)}}const af=1.340264,lf=-.081106,cf=893e-6,uf=.003796,i0=Math.sqrt(3)/2;class UN extends El{project(n,o){o=o/180*Math.PI,n=n/180*Math.PI;const c=Math.asin(i0*Math.sin(o)),p=c*c,m=p*p*p;return{x:.5*(n*Math.cos(c)/(i0*(af+3*lf*p+m*(7*cf+9*uf*p)))/Math.PI+.5),y:1-.5*(c*(af+lf*p+m*(cf+uf*p))/Math.PI+1),z:0}}unproject(n,o){n=(2*n-.5)*Math.PI;let c=o=(2*(1-o)-1)*Math.PI,p=c*c,m=p*p*p;for(let I,N,O,j=0;j<12&&(N=c*(af+lf*p+m*(cf+uf*p))-o,O=af+3*lf*p+m*(7*cf+9*uf*p),I=N/O,c=Ze(c-I,-Math.PI/3,Math.PI/3),p=c*c,m=p*p*p,!(Math.abs(I)<1e-12));++j);const y=i0*n*(af+3*lf*p+m*(7*cf+9*uf*p))/Math.cos(c),b=Math.asin(Math.sin(c)/i0),E=Ze(180*y/Math.PI,-180,180),A=Ze(180*b/Math.PI,-li,li);return new Bn(E,A)}}class VN extends El{constructor(n){super(n),this.wrap=!0,this.supportsWorldCopies=!0}project(n,o){return{x:.5+n/360,y:.5-o/360,z:0}}unproject(n,o){const c=360*(n-.5),p=Ze(360*(.5-o),-li,li);return new Bn(c,p)}}const bh=Math.PI/2;function o0(i){return Math.tan((bh+i)/2)}class GN extends El{constructor(n){super(n),this.center=n.center||[0,30];const[o,c]=this.parallels=n.parallels||[30,30];let p=Ie(o),m=Ie(c);this.southernCenter=p+m<0,this.southernCenter&&(p=-p,m=-m);const y=Math.cos(p),b=o0(p);this.n=p===m?Math.sin(p):Math.log(y/Math.cos(m))/Math.log(o0(m)/b),this.f=y*Math.pow(o0(p),this.n)/this.n}project(n,o){o=Ie(o),this.southernCenter&&(o=-o),n=Ie(n-this.center[0]);const c=1e-6,{n:p,f:m}=this;m>0?o<-bh+c&&(o=-bh+c):o>bh-c&&(o=bh-c);const y=m/Math.pow(o0(o),p);let b=y*Math.sin(p*n),E=m-y*Math.cos(p*n);return b=.5*(b/Math.PI+.5),E=.5*(E/Math.PI+.5),{x:b,y:this.southernCenter?E:1-E,z:0}}unproject(n,o){n=(2*n-.5)*Math.PI,this.southernCenter&&(o=1-o),o=(2*(1-o)-.5)*Math.PI;const{n:c,f:p}=this,m=p-o,y=Math.sign(m),b=Math.sign(c)*Math.sqrt(n*n+m*m);let E=Math.atan2(n,Math.abs(m))*y;m*c<0&&(E-=Math.PI*Math.sign(n)*y);const A=Ze(Ke(E/c)+this.center[0],-180,180),I=Ze(Ke(2*Math.atan(Math.pow(p/b,1/c))-bh),-li,li);return new Bn(A,this.southernCenter?-I:I)}}class ZS extends El{constructor(n){super(n),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(n,o){return{x:Ys(n),y:Js(o),z:0}}unproject(n,o){const c=Eo(n),p=ai(o);return new Bn(c,p)}}const XS=Ie(li);class qN extends El{project(n,o){const c=(o=Ie(o))*o,p=c*c;return{x:.5*((n=Ie(n))*(.8707-.131979*c+p*(p*(.003971*c-.001529*p)-.013791))/Math.PI+.5),y:1-.5*(o*(1.007226+c*(.015085+p*(.028874*c-.044475-.005916*p)))/Math.PI+1),z:0}}unproject(n,o){n=(2*n-.5)*Math.PI;let c=o=(2*(1-o)-1)*Math.PI,p=25,m=0,y=c*c;do{y=c*c;const A=y*y;m=(c*(1.007226+y*(.015085+A*(.028874*y-.044475-.005916*A)))-o)/(1.007226+y*(.045255+A*(.259866*y-.311325-.005916*11*A))),c=Ze(c-m,-XS,XS)}while(Math.abs(m)>1e-6&&--p>0);y=c*c;const b=Ze(Ke(n/(.8707+y*(y*(y*y*y*(.003971-.001529*y)-.013791)-.131979))),-180,180),E=Ke(c);return new Bn(b,E)}}const KS=Ie(li);class HN extends El{project(n,o){o=Ie(o),n=Ie(n);const c=Math.cos(o),p=2/Math.PI,m=Math.acos(c*Math.cos(n/2)),y=Math.sin(m)/m,b=.5*(n*p+2*c*Math.sin(n/2)/y)||0,E=.5*(o+Math.sin(o)/y)||0;return{x:.5*(b/Math.PI+.5),y:1-.5*(E/Math.PI+1),z:0}}unproject(n,o){let c=n=(2*n-.5)*Math.PI,p=o=(2*(1-o)-1)*Math.PI,m=25;const y=1e-6;let b=0,E=0;do{const A=Math.cos(p),I=Math.sin(p),N=2*I*A,O=I*I,j=A*A,G=Math.cos(c/2),X=Math.sin(c/2),te=2*G*X,ue=X*X,xe=1-j*G*G,he=xe?1/xe:0,ge=xe?Math.acos(A*G)*Math.sqrt(1/xe):0,Ee=.5*(2*ge*A*X+2*c/Math.PI)-n,we=.5*(ge*I+p)-o,Ve=.5*he*(j*ue+ge*A*G*O)+1/Math.PI,$e=he*(te*N/4-ge*I*X),et=.125*he*(N*X-ge*I*j*te),ut=.5*he*(O*G+ge*ue*A)+.5,We=$e*et-ut*Ve;b=(we*$e-Ee*ut)/We,E=(Ee*et-we*Ve)/We,c=Ze(c-b,-Math.PI,Math.PI),p=Ze(p-E,-KS,KS)}while((Math.abs(b)>y||Math.abs(E)>y)&&--m>0);return new Bn(Ke(c),Ke(p))}}class YS extends El{constructor(n){super(n),this.center=n.center||[0,0],this.parallels=n.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(Ie(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(n,o){const{scale:c,cosPhi:p}=this;return{x:Ie(n)*p*c+.5,y:-Math.sin(Ie(o))/p*c+.5,z:0}}unproject(n,o){const{scale:c,cosPhi:p}=this,m=-(o-.5)/c,y=Ze(Ke((n-.5)/c)/p,-180,180),b=Math.asin(Ze(m*p,-1,1)),E=Ze(Ke(b),-li,li);return new Bn(y,E)}}class WN extends ZS{constructor(n){super(n),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(n,o,c){const p=Gp(n,o,c);return _r(p,p,qp(Ks(c))),{x:p[0],y:p[1],z:p[2]}}locationPoint(n,o){const c=sh(o.lat,o.lng),p=Mi([],c),m=n.elevation?n.elevation.getAtPointOrZero(n.locationCoordinate(o),n._centerAltitude):n._centerAltitude;$p(c,c,p,Cs(1,0)*Zt*m);const y=Ts(new Float64Array(16));return jc(y,n.pixelMatrix,n.globeMatrix),_r(c,c,y),new ve(c[0],c[1])}pixelsPerMeter(n,o){return Cs(1,0)*o}pixelSpaceConversion(n,o,c){const p=Cs(1,n)*o,m=En(Cs(1,45)*o,p,c);return this.pixelsPerMeter(n,o)/m}createTileMatrix(n,o,c){const p=l_(Ks(c.canonical));return jc(new Float64Array(16),n.globeMatrix,p)}createInversionMatrix(n,o){const{center:c}=n,p=qp(Ks(o));return zg(p,p,Ie(c.lng)),Jx(p,p,Ie(c.lat)),Uc(p,p,[n._pixelsPerMercatorPixel,n._pixelsPerMercatorPixel,1]),Float32Array.from(p)}pointCoordinate(n,o,c,p){return TT(n,o,c,!0)||new lh(0,0)}pointCoordinate3D(n,o,c){const p=this.pointCoordinate(n,o,c,0);return[p.x,p.y,p.z]}isPointAboveHorizon(n,o){return!TT(n,o.x,o.y,!1)}farthestPixelDistance(n){const o=function(p,m){const y=p.cameraToCenterDistance,b=p._centerAltitude*m,E=p._camera,A=p._camera.forward(),I=Ma([],wo([],A,-y),[0,0,b]),N=p.worldSize/(2*Math.PI),O=[0,0,-N],j=p.width/p.height,G=Math.tan(p.fovAboveCenter),X=wo([],E.up(),G),te=wo([],E.right(),G*j),ue=Mi([],Ma([],Ma([],A,X),te)),xe=[];let he;if(new n_(I,ue).closestPointOnSphere(O,N,xe)){const ge=Ma([],xe,O),Ee=Ss([],ge,I);he=Math.cos(p.fovAboveCenter)*Rp(Ee)}else{const ge=Ss([],I,O),Ee=Ss([],O,I);Mi(Ee,Ee);const we=Rp(ge)-N;he=Math.sqrt(we*(we+2*N));const Ve=Math.acos(he/(N+we))-Math.acos(Ko(A,Ee));he*=Math.cos(Ve)}return 1.01*he}(n,this.pixelsPerMeter(n.center.lat,n.worldSize)),c=ah(n.zoom);if(c>0){const p=WS(n,Cs(1,n.center.lat)*n.worldSize),m=n.worldSize/(2*Math.PI),y=Math.max(n.width,n.height)/n.worldSize*Math.PI;return En(o,p+m*(1-Math.cos(y)),Math.pow(c,10))}return o}upVector(n,o,c){return Gp(o,c,n,1)}upVectorScale(n){return{metersToTile:Ng(Fg(Ks(n)))}}}function JS(i){const n=i.parallels,o=!!n&&Math.abs(n[0]+n[1])<.01;switch(i.name){case"mercator":return new ZS(i);case"equirectangular":return new VN(i);case"naturalEarth":return new qN(i);case"equalEarth":return new UN(i);case"winkelTripel":return new HN(i);case"albers":return o?new YS(i):new jN(i);case"lambertConformalConic":return o?new YS(i):new GN(i);case"globe":return new WN(i)}throw new Error(`Invalid projection name: ${i.name}`)}const ZN=Hg.types,XN=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function s0(i,n,o,c,p,m,y,b,E,A,I,N,O){const j=b?Math.min(wl,Math.round(b[0])):0,G=b?Math.min(wl,Math.round(b[1])):0;i.emplaceBack(n,o,Math.round(32*c),Math.round(32*p),m,y,(j<<1)+(E?1:0),G,16*A,16*I,256*N,256*O)}function a0(i,n,o,c,p,m,y){i.emplaceBack(n,o,c,p,m,y)}function l0(i,n,o,c,p){i.emplaceBack(n,o,c,p),i.emplaceBack(n,o,c,p),i.emplaceBack(n,o,c,p),i.emplaceBack(n,o,c,p)}function KN(i){for(const n of i.sections)if(Wx(n.text))return!0;return!1}class B_{constructor(n){this.layoutVertexArray=new st,this.indexArray=new $t,this.programConfigurations=n,this.segments=new Cr,this.dynamicLayoutVertexArray=new lt,this.opacityVertexArray=new Vt,this.placedSymbolArray=new Sr,this.globeExtVertexArray=new dt}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,o,c,p){this.isEmpty()||(c&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,iN.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,o),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,sN.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,XN,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=n.createVertexBuffer(this.globeExtVertexArray,oN.members,!0)),this.opacityVertexBuffer.itemSize=1),(c||p)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}It(B_,"SymbolBuffers");class $_{constructor(n,o,c){this.layoutVertexArray=new n,this.layoutAttributes=o,this.indexArray=new c,this.segments=new Cr,this.collisionVertexArray=new gn,this.collisionVertexArrayExt=new pn}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,aN.members,!0),this.collisionVertexBufferExt=n.createVertexBuffer(this.collisionVertexArrayExt,lN.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}It($_,"CollisionBuffers");class Tl{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(y=>y.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ts([]),this.placementViewportMatrix=Ts([]);const o=this.layers[0]._unevaluatedLayout._values;this.textSizeData=M_(this.zoom,o["text-size"]),this.iconSizeData=M_(this.zoom,o["icon-size"]);const c=this.layers[0].layout,p=c.get("symbol-sort-key"),m=c.get("symbol-z-order");this.canOverlap=c.get("text-allow-overlap")||c.get("icon-allow-overlap")||c.get("text-ignore-placement")||c.get("icon-ignore-placement"),this.sortFeaturesByKey=m!=="viewport-y"&&p.constantOr(1)!==void 0,this.sortFeaturesByY=(m==="viewport-y"||m==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=c.get("text-writing-mode").map(y=>To[y]),this.stateDependentLayerIds=this.layers.filter(y=>y.isStateDependent()).map(y=>y.id),this.sourceID=n.sourceID,this.projection=n.projection}createArrays(){this.text=new B_(new $c(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new B_(new $c(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new Ai,this.lineVertexArray=new th,this.symbolInstances=new Kn}calculateGlyphDependencies(n,o,c,p,m){for(let y=0;y<n.length;y++)if(o[n.charCodeAt(y)]=!0,p&&m){const b=nf[n.charAt(y)];b&&(o[b.charCodeAt(0)]=!0)}}populate(n,o,c,p){const m=this.layers[0],y=m.layout,b=this.projection.name==="globe",E=y.get("text-font"),A=y.get("text-field"),I=y.get("icon-image"),N=(A.value.kind!=="constant"||A.value.value instanceof Ci&&!A.value.value.isEmpty()||A.value.value.toString().length>0)&&(E.value.kind!=="constant"||E.value.value.length>0),O=I.value.kind!=="constant"||!!I.value.value||Object.keys(I.parameters).length>0,j=y.get("symbol-sort-key");if(this.features=[],!N&&!O)return;const G=o.iconDependencies,X=o.glyphDependencies,te=o.availableImages,ue=new z(this.zoom);for(const{feature:xe,id:he,index:ge,sourceLayerIndex:Ee}of n){const we=m._featureFilter.needGeometry,Ve=Hc(xe,we);if(!m._featureFilter.filter(ue,Ve,c))continue;if(we||(Ve.geometry=ka(xe,c,p)),b&&xe.type!==1&&c.z<=5){const We=Ve.geometry,rt=.98078528056,it=(at,ft)=>Ko(Gp(at.x,at.y,c,1),Gp(ft.x,ft.y,c,1))<rt;for(let at=0;at<We.length;at++)We[at]=sz(We[at],it)}let $e,et;if(N){const We=m.getValueAndResolveTokens("text-field",Ve,c,te),rt=Ci.factory(We);KN(rt)&&(this.hasRTLText=!0),(!this.hasRTLText||w()==="unavailable"||this.hasRTLText&&P.isParsed())&&($e=hN(rt,m,Ve))}if(O){const We=m.getValueAndResolveTokens("icon-image",Ve,c,te);et=We instanceof eo?We:eo.fromString(We)}if(!$e&&!et)continue;const ut=this.sortFeaturesByKey?j.evaluate(Ve,{},c):void 0;if(this.features.push({id:he,text:$e,icon:et,index:ge,sourceLayerIndex:Ee,geometry:Ve.geometry,properties:xe.properties,type:ZN[xe.type],sortKey:ut}),et&&(G[et.name]=!0),$e){const We=E.evaluate(Ve,{},c).join(","),rt=y.get("text-rotation-alignment")==="map"&&y.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(To.vertical)>=0;for(const it of $e.sections)if(it.image)G[it.image.name]=!0;else{const at=kp($e.toString()),ft=it.fontStack||We,Je=X[ft]=X[ft]||{};this.calculateGlyphDependencies(it.text,Je,rt,this.allowVerticalPlacement,at)}}}y.get("symbol-placement")==="line"&&(this.features=function(xe){const he={},ge={},Ee=[];let we=0;function Ve(We){Ee.push(xe[We]),we++}function $e(We,rt,it){const at=ge[We];return delete ge[We],ge[rt]=at,Ee[at].geometry[0].pop(),Ee[at].geometry[0]=Ee[at].geometry[0].concat(it[0]),at}function et(We,rt,it){const at=he[rt];return delete he[rt],he[We]=at,Ee[at].geometry[0].shift(),Ee[at].geometry[0]=it[0].concat(Ee[at].geometry[0]),at}function ut(We,rt,it){const at=it?rt[0][rt[0].length-1]:rt[0][0];return`${We}:${at.x}:${at.y}`}for(let We=0;We<xe.length;We++){const rt=xe[We],it=rt.geometry,at=rt.text?rt.text.toString():null;if(!at){Ve(We);continue}const ft=ut(at,it),Je=ut(at,it,!0);if(ft in ge&&Je in he&&ge[ft]!==he[Je]){const Ct=et(ft,Je,it),Lt=$e(ft,Je,Ee[Ct].geometry);delete he[ft],delete ge[Je],ge[ut(at,Ee[Lt].geometry,!0)]=Lt,Ee[Ct].geometry=null}else ft in ge?$e(ft,Je,it):Je in he?et(ft,Je,it):(Ve(We),he[ft]=we-1,ge[Je]=we-1)}return Ee.filter(We=>We.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((xe,he)=>xe.sortKey-he.sortKey)}update(n,o,c,p){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,o,this.layers,c,p),this.icon.programConfigurations.updatePaintArrays(n,o,this.layers,c,p))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=JS(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,o){const c=this.lineVertexArray.length;if(n.segment!==void 0)for(const{x:p,y:m}of o)this.lineVertexArray.emplaceBack(p,m);return{lineStartIndex:c,lineLength:this.lineVertexArray.length-c}}addSymbols(n,o,c,p,m,y,b,E,A,I,N,O,j,G){const X=n.indexArray,te=n.layoutVertexArray,ue=n.globeExtVertexArray,xe=n.segments.prepareSegment(4*o.length,te,X,this.canOverlap?y.sortKey:void 0),he=this.glyphOffsetArray.length,ge=xe.vertexLength,Ee=this.allowVerticalPlacement&&b===To.vertical?Math.PI/2:0,we=y.text&&y.text.sections;for(let $e=0;$e<o.length;$e++){const{tl:et,tr:ut,bl:We,br:rt,tex:it,pixelOffsetTL:at,pixelOffsetBR:ft,minFontScaleX:Je,minFontScaleY:Ct,glyphOffset:Lt,isSDF:At,sectionIndex:rn}=o[$e],yt=xe.vertexLength,qt=Lt[1];if(s0(te,A.x,A.y,et.x,qt+et.y,it.x,it.y,c,At,at.x,at.y,Je,Ct),s0(te,A.x,A.y,ut.x,qt+ut.y,it.x+it.w,it.y,c,At,ft.x,at.y,Je,Ct),s0(te,A.x,A.y,We.x,qt+We.y,it.x,it.y+it.h,c,At,at.x,ft.y,Je,Ct),s0(te,A.x,A.y,rt.x,qt+rt.y,it.x+it.w,it.y+it.h,c,At,ft.x,ft.y,Je,Ct),E){const{x:on,y:Sn,z:sn}=E.anchor,[Kt,Zn,cn]=E.up;a0(ue,on,Sn,sn,Kt,Zn,cn),a0(ue,on,Sn,sn,Kt,Zn,cn),a0(ue,on,Sn,sn,Kt,Zn,cn),a0(ue,on,Sn,sn,Kt,Zn,cn),l0(n.dynamicLayoutVertexArray,on,Sn,sn,Ee)}else l0(n.dynamicLayoutVertexArray,A.x,A.y,A.z,Ee);X.emplaceBack(yt,yt+1,yt+2),X.emplaceBack(yt+1,yt+2,yt+3),xe.vertexLength+=4,xe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Lt[0]),$e!==o.length-1&&rn===o[$e+1].sectionIndex||n.programConfigurations.populatePaintArrays(te.length,y,y.index,{},j,G,we&&we[rn])}const Ve=E?E.anchor:A;n.placedSymbolArray.emplaceBack(Ve.x,Ve.y,Ve.z,A.x,A.y,he,this.glyphOffsetArray.length-he,ge,I,N,A.segment,c?c[0]:0,c?c[1]:0,p[0],p[1],b,0,!1,0,O,0)}_commitLayoutVertex(n,o,c,p,m,y,b){n.emplaceBack(o,c,p,m,y,Math.round(b.x),Math.round(b.y))}_addCollisionDebugVertices(n,o,c,p,m,y,b){const E=c.segments.prepareSegment(4,c.layoutVertexArray,c.indexArray),A=E.vertexLength,I=b.tileAnchorX,N=b.tileAnchorY;for(let j=0;j<4;j++)c.collisionVertexArray.emplaceBack(0,0,0,0);c.collisionVertexArrayExt.emplaceBack(o,-n.padding,-n.padding),c.collisionVertexArrayExt.emplaceBack(o,n.padding,-n.padding),c.collisionVertexArrayExt.emplaceBack(o,n.padding,n.padding),c.collisionVertexArrayExt.emplaceBack(o,-n.padding,n.padding),this._commitLayoutVertex(c.layoutVertexArray,p,m,y,I,N,new ve(n.x1,n.y1)),this._commitLayoutVertex(c.layoutVertexArray,p,m,y,I,N,new ve(n.x2,n.y1)),this._commitLayoutVertex(c.layoutVertexArray,p,m,y,I,N,new ve(n.x2,n.y2)),this._commitLayoutVertex(c.layoutVertexArray,p,m,y,I,N,new ve(n.x1,n.y2)),E.vertexLength+=4;const O=c.indexArray;O.emplaceBack(A,A+1),O.emplaceBack(A+1,A+2),O.emplaceBack(A+2,A+3),O.emplaceBack(A+3,A),E.primitiveLength+=4}_addTextDebugCollisionBoxes(n,o,c,p,m,y){for(let b=p;b<m;b++){const E=c.get(b),A=this.getSymbolInstanceTextSize(n,y,o,b);this._addCollisionDebugVertices(E,A,this.textCollisionBox,E.projectedAnchorX,E.projectedAnchorY,E.projectedAnchorZ,y)}}_addIconDebugCollisionBoxes(n,o,c,p,m,y){for(let b=p;b<m;b++){const E=c.get(b),A=this.getSymbolInstanceIconSize(n,o,y.placedIconSymbolIndex);this._addCollisionDebugVertices(E,A,this.iconCollisionBox,E.projectedAnchorX,E.projectedAnchorY,E.projectedAnchorZ,y)}}generateCollisionDebugBuffers(n,o){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new $_(Nt,yS.members,Wr),this.iconCollisionBox=new $_(Nt,yS.members,Wr);const c=ph(this.iconSizeData,n),p=ph(this.textSizeData,n);for(let m=0;m<this.symbolInstances.length;m++){const y=this.symbolInstances.get(m);this._addTextDebugCollisionBoxes(p,n,o,y.textBoxStartIndex,y.textBoxEndIndex,y),this._addTextDebugCollisionBoxes(p,n,o,y.verticalTextBoxStartIndex,y.verticalTextBoxEndIndex,y),this._addIconDebugCollisionBoxes(c,n,o,y.iconBoxStartIndex,y.iconBoxEndIndex,y),this._addIconDebugCollisionBoxes(c,n,o,y.verticalIconBoxStartIndex,y.verticalIconBoxEndIndex,y)}}getSymbolInstanceTextSize(n,o,c,p){const m=this.text.placedSymbolArray.get(o.rightJustifiedTextSymbolIndex>=0?o.rightJustifiedTextSymbolIndex:o.centerJustifiedTextSymbolIndex>=0?o.centerJustifiedTextSymbolIndex:o.leftJustifiedTextSymbolIndex>=0?o.leftJustifiedTextSymbolIndex:o.verticalPlacedTextSymbolIndex>=0?o.verticalPlacedTextSymbolIndex:p),y=Kg(this.textSizeData,n,m)/Qr;return this.tilePixelRatio*y}getSymbolInstanceIconSize(n,o,c){const p=this.icon.placedSymbolArray.get(c),m=Kg(this.iconSizeData,n,p);return this.tilePixelRatio*m}_commitDebugCollisionVertexUpdate(n,o,c){n.emplaceBack(o,-c,-c),n.emplaceBack(o,c,-c),n.emplaceBack(o,c,c),n.emplaceBack(o,-c,c)}_updateTextDebugCollisionBoxes(n,o,c,p,m,y){for(let b=p;b<m;b++){const E=c.get(b),A=this.getSymbolInstanceTextSize(n,y,o,b);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,A,E.padding)}}_updateIconDebugCollisionBoxes(n,o,c,p,m,y){for(let b=p;b<m;b++){const E=c.get(b),A=this.getSymbolInstanceIconSize(n,o,y);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,A,E.padding)}}updateCollisionDebugBuffers(n,o){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const c=ph(this.iconSizeData,n),p=ph(this.textSizeData,n);for(let m=0;m<this.symbolInstances.length;m++){const y=this.symbolInstances.get(m);this._updateTextDebugCollisionBoxes(p,n,o,y.textBoxStartIndex,y.textBoxEndIndex,y),this._updateTextDebugCollisionBoxes(p,n,o,y.verticalTextBoxStartIndex,y.verticalTextBoxEndIndex,y),this._updateIconDebugCollisionBoxes(c,n,o,y.iconBoxStartIndex,y.iconBoxEndIndex,y.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(c,n,o,y.verticalIconBoxStartIndex,y.verticalIconBoxEndIndex,y.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(n,o,c,p,m,y,b,E,A){const I={};if(o<c){const{x1:N,y1:O,x2:j,y2:G,padding:X,projectedAnchorX:te,projectedAnchorY:ue,projectedAnchorZ:xe,tileAnchorX:he,tileAnchorY:ge,featureIndex:Ee}=n.get(o);I.textBox={x1:N,y1:O,x2:j,y2:G,padding:X,projectedAnchorX:te,projectedAnchorY:ue,projectedAnchorZ:xe,tileAnchorX:he,tileAnchorY:ge},I.textFeatureIndex=Ee}if(p<m){const{x1:N,y1:O,x2:j,y2:G,padding:X,projectedAnchorX:te,projectedAnchorY:ue,projectedAnchorZ:xe,tileAnchorX:he,tileAnchorY:ge,featureIndex:Ee}=n.get(p);I.verticalTextBox={x1:N,y1:O,x2:j,y2:G,padding:X,projectedAnchorX:te,projectedAnchorY:ue,projectedAnchorZ:xe,tileAnchorX:he,tileAnchorY:ge},I.verticalTextFeatureIndex=Ee}if(y<b){const{x1:N,y1:O,x2:j,y2:G,padding:X,projectedAnchorX:te,projectedAnchorY:ue,projectedAnchorZ:xe,tileAnchorX:he,tileAnchorY:ge,featureIndex:Ee}=n.get(y);I.iconBox={x1:N,y1:O,x2:j,y2:G,padding:X,projectedAnchorX:te,projectedAnchorY:ue,projectedAnchorZ:xe,tileAnchorX:he,tileAnchorY:ge},I.iconFeatureIndex=Ee}if(E<A){const{x1:N,y1:O,x2:j,y2:G,padding:X,projectedAnchorX:te,projectedAnchorY:ue,projectedAnchorZ:xe,tileAnchorX:he,tileAnchorY:ge,featureIndex:Ee}=n.get(E);I.verticalIconBox={x1:N,y1:O,x2:j,y2:G,padding:X,projectedAnchorX:te,projectedAnchorY:ue,projectedAnchorZ:xe,tileAnchorX:he,tileAnchorY:ge},I.verticalIconFeatureIndex=Ee}return I}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let o=0;o<this.symbolInstances.length;o++){const c=this.symbolInstances.get(o);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,c.textBoxStartIndex,c.textBoxEndIndex,c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c.iconBoxStartIndex,c.iconBoxEndIndex,c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,o){const c=n.placedSymbolArray.get(o),p=c.vertexStartIndex+4*c.numGlyphs;for(let m=c.vertexStartIndex;m<p;m+=4)n.indexArray.emplaceBack(m,m+1,m+2),n.indexArray.emplaceBack(m+1,m+2,m+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const o=Math.sin(n),c=Math.cos(n),p=[],m=[],y=[];for(let b=0;b<this.symbolInstances.length;++b){y.push(b);const E=this.symbolInstances.get(b);p.push(0|Math.round(o*E.tileAnchorX+c*E.tileAnchorY)),m.push(E.featureIndex)}return y.sort((b,E)=>p[b]-p[E]||m[E]-m[b]),y}addToSortKeyRanges(n,o){const c=this.sortKeyRanges[this.sortKeyRanges.length-1];c&&c.sortKey===o?c.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:o,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const o of this.symbolInstanceIndexes){const c=this.symbolInstances.get(o);this.featureSortOrder.push(c.featureIndex);const{rightJustifiedTextSymbolIndex:p,centerJustifiedTextSymbolIndex:m,leftJustifiedTextSymbolIndex:y,verticalPlacedTextSymbolIndex:b,placedIconSymbolIndex:E,verticalPlacedIconSymbolIndex:A}=c;p>=0&&this.addIndicesForPlacedSymbol(this.text,p),m>=0&&m!==p&&this.addIndicesForPlacedSymbol(this.text,m),y>=0&&y!==m&&y!==p&&this.addIndicesForPlacedSymbol(this.text,y),b>=0&&this.addIndicesForPlacedSymbol(this.text,b),E>=0&&this.addIndicesForPlacedSymbol(this.icon,E),A>=0&&this.addIndicesForPlacedSymbol(this.icon,A)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}It(Tl,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),Tl.MAX_GLYPHS=65535,Tl.addDynamicAttributes=l0;const YN=new pe({"symbol-placement":new Z(Qe.layout_symbol["symbol-placement"]),"symbol-spacing":new Z(Qe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Z(Qe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ie(Qe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Z(Qe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Z(Qe.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Z(Qe.layout_symbol["icon-ignore-placement"]),"icon-optional":new Z(Qe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Z(Qe.layout_symbol["icon-rotation-alignment"]),"icon-size":new ie(Qe.layout_symbol["icon-size"]),"icon-text-fit":new Z(Qe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Z(Qe.layout_symbol["icon-text-fit-padding"]),"icon-image":new ie(Qe.layout_symbol["icon-image"]),"icon-rotate":new ie(Qe.layout_symbol["icon-rotate"]),"icon-padding":new Z(Qe.layout_symbol["icon-padding"]),"icon-keep-upright":new Z(Qe.layout_symbol["icon-keep-upright"]),"icon-offset":new ie(Qe.layout_symbol["icon-offset"]),"icon-anchor":new ie(Qe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Z(Qe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Z(Qe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Z(Qe.layout_symbol["text-rotation-alignment"]),"text-field":new ie(Qe.layout_symbol["text-field"]),"text-font":new ie(Qe.layout_symbol["text-font"]),"text-size":new ie(Qe.layout_symbol["text-size"]),"text-max-width":new ie(Qe.layout_symbol["text-max-width"]),"text-line-height":new ie(Qe.layout_symbol["text-line-height"]),"text-letter-spacing":new ie(Qe.layout_symbol["text-letter-spacing"]),"text-justify":new ie(Qe.layout_symbol["text-justify"]),"text-radial-offset":new ie(Qe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Z(Qe.layout_symbol["text-variable-anchor"]),"text-anchor":new ie(Qe.layout_symbol["text-anchor"]),"text-max-angle":new Z(Qe.layout_symbol["text-max-angle"]),"text-writing-mode":new Z(Qe.layout_symbol["text-writing-mode"]),"text-rotate":new ie(Qe.layout_symbol["text-rotate"]),"text-padding":new Z(Qe.layout_symbol["text-padding"]),"text-keep-upright":new Z(Qe.layout_symbol["text-keep-upright"]),"text-transform":new ie(Qe.layout_symbol["text-transform"]),"text-offset":new ie(Qe.layout_symbol["text-offset"]),"text-allow-overlap":new Z(Qe.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Z(Qe.layout_symbol["text-ignore-placement"]),"text-optional":new Z(Qe.layout_symbol["text-optional"])});var j_={paint:new pe({"icon-opacity":new ie(Qe.paint_symbol["icon-opacity"]),"icon-color":new ie(Qe.paint_symbol["icon-color"]),"icon-halo-color":new ie(Qe.paint_symbol["icon-halo-color"]),"icon-halo-width":new ie(Qe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ie(Qe.paint_symbol["icon-halo-blur"]),"icon-translate":new Z(Qe.paint_symbol["icon-translate"]),"icon-translate-anchor":new Z(Qe.paint_symbol["icon-translate-anchor"]),"text-opacity":new ie(Qe.paint_symbol["text-opacity"]),"text-color":new ie(Qe.paint_symbol["text-color"],{runtimeType:Bi,getOverride:i=>i.textColor,hasOverride:i=>!!i.textColor}),"text-halo-color":new ie(Qe.paint_symbol["text-halo-color"]),"text-halo-width":new ie(Qe.paint_symbol["text-halo-width"]),"text-halo-blur":new ie(Qe.paint_symbol["text-halo-blur"]),"text-translate":new Z(Qe.paint_symbol["text-translate"]),"text-translate-anchor":new Z(Qe.paint_symbol["text-translate-anchor"])}),layout:YN};class QS{constructor(n){this.type=n.property.overrides?n.property.overrides.runtimeType:el,this.defaultValue=n}evaluate(n){if(n.formattedSection){const o=this.defaultValue.property.overrides;if(o&&o.hasOverride(n.formattedSection))return o.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}It(QS,"FormatSectionOverride",{omit:["defaultValue"]});class c0 extends Es{constructor(n){super(n,j_)}recalculate(n,o){super.recalculate(n,o),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const c=this.layout.get("text-writing-mode");if(c){const p=[];for(const m of c)p.indexOf(m)<0&&p.push(m);this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(n,o,c,p){const m=this.layout.get(n).evaluate(o,{},c,p),y=this._unevaluatedLayout._values[n];return y.isDataDriven()||dl(y.value)||!m?m:function(b,E){return E.replace(/{([^{}]+)}/g,(A,I)=>I in b?String(b[I]):"")}(o.properties,m)}createBucket(n){return new Tl(n)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const n of j_.paint.overridableProperties){if(!c0.hasPaintOverride(this.layout,n))continue;const o=this.paint.get(n),c=new QS(o),p=new Wu(c,o.property.specification);let m=null;m=o.value.kind==="constant"||o.value.kind==="source"?new xp("source",p):new Ic("composite",p,o.value.zoomStops,o.value._interpolationType),this.paint._values[n]=new se(o.property,m,o.parameters)}}_handleOverridablePaintPropertyUpdate(n,o,c){return!(!this.layout||o.isDataDriven()||c.isDataDriven())&&c0.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,o){const c=n.get("text-field"),p=j_.paint.properties[o];let m=!1;const y=b=>{for(const E of b)if(p.overrides&&p.overrides.hasOverride(E))return void(m=!0)};if(c.value.kind==="constant"&&c.value.value instanceof Ci)y(c.value.value.sections);else if(c.value.kind==="source"){const b=A=>{m||(A instanceof ya&&dr(A.value)===fc?y(A.value.sections):A instanceof Hs?y(A.sections):A.eachChild(b))},E=c.value;E._styleExpression&&b(E._styleExpression.expression)}return m}getProgramConfiguration(n){return new _l(this,n)}}var JN={paint:new pe({"background-color":new Z(Qe.paint_background["background-color"]),"background-pattern":new Z(Qe.paint_background["background-pattern"]),"background-opacity":new Z(Qe.paint_background["background-opacity"])})},QN={paint:new pe({"raster-opacity":new Z(Qe.paint_raster["raster-opacity"]),"raster-hue-rotate":new Z(Qe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Z(Qe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Z(Qe.paint_raster["raster-brightness-max"]),"raster-saturation":new Z(Qe.paint_raster["raster-saturation"]),"raster-contrast":new Z(Qe.paint_raster["raster-contrast"]),"raster-resampling":new Z(Qe.paint_raster["raster-resampling"]),"raster-fade-duration":new Z(Qe.paint_raster["raster-fade-duration"])})};class e8 extends Es{constructor(n){super(n,{}),this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isLayerDraped(){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(n){this.implementation.onAdd&&this.implementation.onAdd(n,n.painter.context.gl)}onRemove(n){this.implementation.onRemove&&this.implementation.onRemove(n,n.painter.context.gl)}}var t8={paint:new pe({"sky-type":new Z(Qe.paint_sky["sky-type"]),"sky-atmosphere-sun":new Z(Qe.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Z(Qe.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Z(Qe.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Z(Qe.paint_sky["sky-gradient-radius"]),"sky-gradient":new de(Qe.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Z(Qe.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Z(Qe.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Z(Qe.paint_sky["sky-opacity"])})};function U_(i,n,o){const c=[0,0,1],p=xT([]);return vT(p,p,o?-Ie(i)+Math.PI:Ie(i)),_T(p,p,-Ie(n)),fT(c,c,p),Mi(c,c)}const n8={circle:class extends Es{constructor(i){super(i,pz)}createBucket(i){return new f_(i)}queryRadius(i){const n=i;return ch("circle-radius",this,n)+ch("circle-stroke-width",this,n)+Bg(this.paint.get("circle-translate"))}queryIntersectsFeature(i,n,o,c,p,m,y,b){const E=UT(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),m.angle,i.pixelToTileUnitsFactor),A=this.paint.get("circle-radius").evaluate(n,o)+this.paint.get("circle-stroke-width").evaluate(n,o);return VT(i,c,m,y,b,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",E,A)}getProgramIds(){return["circle"]}getProgramConfiguration(i){return new _l(this,i)}},heatmap:class extends Es{createBucket(i){return new qT(i)}constructor(i){super(i,yz),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(i){i==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=x_({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(i){return ch("heatmap-radius",this,i)}queryIntersectsFeature(i,n,o,c,p,m,y,b){const E=this.paint.get("heatmap-radius").evaluate(n,o);return VT(i,c,m,y,b,!0,!0,new ve(0,0),E)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(i){return new _l(this,i)}},hillshade:class extends Es{constructor(i){super(i,xz)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends Es{constructor(i){super(i,Nz)}getProgramIds(){const i=this.paint.get("fill-pattern"),n=i&&i.constantOr(1),o=[n?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&o.push(n&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),o}getProgramConfiguration(i){return new _l(this,i)}recalculate(i,n){super.recalculate(i,n);const o=this.paint._values["fill-outline-color"];o.value.kind==="constant"&&o.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(i){return new Gg(i)}queryRadius(){return Bg(this.paint.get("fill-translate"))}queryIntersectsFeature(i,n,o,c,p,m){return!i.queryGeometry.isAboveHorizon&&RT(jT(i.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),m.angle,i.pixelToTileUnitsFactor),c)}isTileClipped(){return!0}},"fill-extrusion":class extends Es{constructor(i){super(i,Kz)}createBucket(i){return new Qp(i)}queryRadius(){return Bg(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(i){return new _l(this,i)}queryIntersectsFeature(i,n,o,c,p,m,y,b,E){const A=UT(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),m.angle,i.pixelToTileUnitsFactor),I=this.paint.get("fill-extrusion-height").evaluate(n,o),N=this.paint.get("fill-extrusion-base").evaluate(n,o),O=[0,0],j=b&&m.elevation,G=m.elevation?m.elevation.exaggeration():1,X=i.tile.getBucket(this);if(j&&X instanceof Qp){const ge=X.centroidVertexArray,Ee=E+1;Ee<ge.length&&(O[0]=ge.geta_centroid_pos0(Ee),O[1]=ge.geta_centroid_pos1(Ee))}if(O[0]===0&&O[1]===1)return!1;m.projection.name==="globe"&&(c=cS([c],[new ve(0,0),new ve(Zt,Zt)],i.tileID.canonical).map(ge=>ge.polygon).flat());const te=j?b:null,[ue,xe]=function(ge,Ee,we,Ve,$e,et,ut,We,rt,it,at){return ge.projection.name==="globe"?function(ft,Je,Ct,Lt,At,rn,yt,qt,on,Sn,sn){const Kt=[],Zn=[],cn=ft.projection.upVectorScale(sn,ft.center.lat,ft.worldSize).metersToTile,un=[0,0,0,1],$n=[0,0,0,1],Gn=(jn,sr,pr,Mr)=>{jn[0]=sr,jn[1]=pr,jn[2]=Mr,jn[3]=1},qn=lS();Ct>0&&(Ct+=qn),Lt+=qn;for(const jn of Je){const sr=[],pr=[];for(const Mr of jn){const Un=Mr.x+At.x,Or=Mr.y+At.y,kr=ft.projection.projectTilePoint(Un,Or,sn),lr=ft.projection.upVector(sn,Mr.x,Mr.y);let An=Ct,Pr=Lt;if(yt){const Hn=pS(Un,Or,Ct,Lt,yt,qt,on,Sn);An+=Hn.base,Pr+=Hn.top}Ct!==0?Gn(un,kr.x+lr[0]*cn*An,kr.y+lr[1]*cn*An,kr.z+lr[2]*cn*An):Gn(un,kr.x,kr.y,kr.z),Gn($n,kr.x+lr[0]*cn*Pr,kr.y+lr[1]*cn*Pr,kr.z+lr[2]*cn*Pr),_r(un,un,rn),_r($n,$n,rn),sr.push(new dh(un[0],un[1],un[2])),pr.push(new dh($n[0],$n[1],$n[2]))}Kt.push(sr),Zn.push(pr)}return[Kt,Zn]}(ge,Ee,we,Ve,$e,et,ut,We,rt,it,at):ut?function(ft,Je,Ct,Lt,At,rn,yt,qt,on){const Sn=[],sn=[],Kt=[0,0,0,1];for(const Zn of ft){const cn=[],un=[];for(const $n of Zn){const Gn=$n.x+Lt.x,qn=$n.y+Lt.y,jn=pS(Gn,qn,Je,Ct,rn,yt,qt,on);Kt[0]=Gn,Kt[1]=qn,Kt[2]=jn.base,Kt[3]=1,Vc(Kt,Kt,At),Kt[3]=Math.max(Kt[3],1e-5);const sr=new dh(Kt[0]/Kt[3],Kt[1]/Kt[3],Kt[2]/Kt[3]);Kt[0]=Gn,Kt[1]=qn,Kt[2]=jn.top,Kt[3]=1,Vc(Kt,Kt,At),Kt[3]=Math.max(Kt[3],1e-5);const pr=new dh(Kt[0]/Kt[3],Kt[1]/Kt[3],Kt[2]/Kt[3]);cn.push(sr),un.push(pr)}Sn.push(cn),sn.push(un)}return[Sn,sn]}(Ee,we,Ve,$e,et,ut,We,rt,it):function(ft,Je,Ct,Lt,At){const rn=[],yt=[],qt=At[8]*Je,on=At[9]*Je,Sn=At[10]*Je,sn=At[11]*Je,Kt=At[8]*Ct,Zn=At[9]*Ct,cn=At[10]*Ct,un=At[11]*Ct;for(const $n of ft){const Gn=[],qn=[];for(const jn of $n){const sr=jn.x+Lt.x,pr=jn.y+Lt.y,Mr=At[0]*sr+At[4]*pr+At[12],Un=At[1]*sr+At[5]*pr+At[13],Or=At[2]*sr+At[6]*pr+At[14],kr=At[3]*sr+At[7]*pr+At[15],lr=Mr+qt,An=Un+on,Pr=Or+Sn,Hn=Math.max(kr+sn,1e-5),Ii=Mr+Kt,Ir=Un+Zn,ei=Or+cn,Zr=Math.max(kr+un,1e-5);Gn.push(new dh(lr/Hn,An/Hn,Pr/Hn)),qn.push(new dh(Ii/Zr,Ir/Zr,ei/Zr))}rn.push(Gn),yt.push(qn)}return[rn,yt]}(Ee,we,Ve,$e,et)}(m,c,N,I,A,y,te,O,G,m.center.lat,i.tileID.canonical),he=i.queryGeometry;return function(ge,Ee,we){let Ve=1/0;RT(we,Ee)&&(Ve=dS(we,Ee[0]));for(let $e=0;$e<Ee.length;$e++){const et=Ee[$e],ut=ge[$e];for(let We=0;We<et.length-1;We++){const rt=et[We],it=[rt,et[We+1],ut[We+1],ut[We],rt];FT(we,it)&&(Ve=Math.min(Ve,dS(we,it)))}}return Ve!==1/0&&Ve}(ue,xe,he.isPointQuery()?he.screenBounds:he.screenGeometry)}},line:class extends Es{constructor(i){super(i,fS),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(i){if(i==="line-gradient"){const n=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=n._styleExpression&&n._styleExpression.expression instanceof op,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(i,n){super.recalculate(i,n),this.paint._values["line-floorwidth"]=mS.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)}createBucket(i){return new Xg(i)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(i){return new _l(this,i)}queryRadius(i){const n=i,o=gS(ch("line-width",this,n),ch("line-gap-width",this,n)),c=ch("line-offset",this,n);return o/2+Math.abs(c)+Bg(this.paint.get("line-translate"))}queryIntersectsFeature(i,n,o,c,p,m){if(i.queryGeometry.isAboveHorizon)return!1;const y=jT(i.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),m.angle,i.pixelToTileUnitsFactor),b=i.pixelToTileUnitsFactor/2*gS(this.paint.get("line-width").evaluate(n,o),this.paint.get("line-gap-width").evaluate(n,o)),E=this.paint.get("line-offset").evaluate(n,o);return E&&(c=function(A,I){const N=[],O=new ve(0,0);for(let j=0;j<A.length;j++){const G=A[j],X=[];for(let te=0;te<G.length;te++){const ue=G[te],xe=G[te+1],he=te===0?O:ue.sub(G[te-1])._unit()._perp(),ge=te===G.length-1?O:xe.sub(ue)._unit()._perp(),Ee=he._add(ge)._unit();Ee._mult(1/(Ee.x*ge.x+Ee.y*ge.y)),X.push(Ee._mult(I)._add(ue))}N.push(X)}return N}(c,E*i.pixelToTileUnitsFactor)),function(A,I,N){for(let O=0;O<I.length;O++){const j=I[O];if(A.length>=3){for(let G=0;G<j.length;G++)if(Wc(A,j[G]))return!0}if(cz(A,j,N))return!0}return!1}(y,c,b)}isTileClipped(){return!0}},symbol:c0,background:class extends Es{constructor(i){super(i,JN)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Es{constructor(i){super(i,QN)}getProgramIds(){return["raster"]}},sky:class extends Es{constructor(i){super(i,t8),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(i){i==="sky-gradient"?this._updateColorRamp():i!=="sky-atmosphere-sun"&&i!=="sky-atmosphere-halo-color"&&i!=="sky-atmosphere-color"&&i!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=x_({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(i){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const n=i.style.light.properties.get("position");return this._lightPosition.azimuthal!==n.azimuthal||this._lightPosition.polar!==n.polar}return!1}getCenter(i,n){if(this.paint.get("sky-type")==="atmosphere"){const c=this.paint.get("sky-atmosphere-sun"),p=!c,m=i.style.light,y=m.properties.get("position");return p&&m.properties.get("anchor")==="viewport"&&tn("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),p?U_(y.azimuthal,90-y.polar,n):U_(c[0],90-c[1],n)}const o=this.paint.get("sky-gradient-center");return U_(o[0],90-o[1],n)}is3D(){return!1}isSky(){return!0}markSkyboxValid(i){this._skyboxInvalidated=!1,this._lightPosition=i.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const i=this.paint.get("sky-type");return i==="atmosphere"?["skyboxCapture","skybox"]:i==="gradient"?["skyboxGradient"]:null}}};class hf{constructor(n,o,c,p){this.context=n,this.format=c,this.texture=n.gl.createTexture(),this.update(o,p)}update(n,o,c){const{width:p,height:m}=n,{context:y}=this,{gl:b}=y,{HTMLImageElement:E,HTMLCanvasElement:A,HTMLVideoElement:I,ImageData:N,ImageBitmap:O}=_;if(b.bindTexture(b.TEXTURE_2D,this.texture),y.pixelStoreUnpackFlipY.set(!1),y.pixelStoreUnpack.set(1),y.pixelStoreUnpackPremultiplyAlpha.set(this.format===b.RGBA&&(!o||o.premultiply!==!1)),c||this.size&&this.size[0]===p&&this.size[1]===m){const{x:j,y:G}=c||{x:0,y:0};n instanceof E||n instanceof A||n instanceof I||n instanceof N||O&&n instanceof O?b.texSubImage2D(b.TEXTURE_2D,0,j,G,b.RGBA,b.UNSIGNED_BYTE,n):b.texSubImage2D(b.TEXTURE_2D,0,j,G,p,m,b.RGBA,b.UNSIGNED_BYTE,n.data)}else this.size=[p,m],n instanceof E||n instanceof A||n instanceof I||n instanceof N||O&&n instanceof O?b.texImage2D(b.TEXTURE_2D,0,this.format,this.format,b.UNSIGNED_BYTE,n):b.texImage2D(b.TEXTURE_2D,0,this.format,p,m,0,this.format,b.UNSIGNED_BYTE,n.data);this.useMipmap=Boolean(o&&o.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&b.generateMipmap(b.TEXTURE_2D)}bind(n,o){const{context:c}=this,{gl:p}=c;p.bindTexture(p.TEXTURE_2D,this.texture),n!==this.filter&&(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,n),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,this.useMipmap?n===p.NEAREST?p.NEAREST_MIPMAP_NEAREST:p.LINEAR_MIPMAP_NEAREST:n),this.filter=n),o!==this.wrap&&(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,o),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,o),this.wrap=o)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:n}=this.context;n.deleteTexture(this.texture),this.texture=null}}class r8{constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class i8{constructor(){this.tasks={},this.taskQueue=[],xn(["process"],this),this.invoker=new r8(this.process),this.nextId=0}add(n,o){const c=this.nextId++,p=function({type:m,isSymbolTile:y,zoom:b}){return b=b||0,m==="message"?0:m!=="maybePrepare"||y?m!=="parseTile"||y?m==="parseTile"&&y?300-b:m==="maybePrepare"&&y?400-b:500:200-b:100-b}(o);if(p===0){Se();try{n()}finally{}return{cancel:()=>{}}}return this.tasks[c]={fn:n,metadata:o,priority:p,id:c},this.taskQueue.push(c),this.invoker.trigger(),{cancel:()=>{delete this.tasks[c]}}}process(){Se();try{if(this.taskQueue=this.taskQueue.filter(c=>!!this.tasks[c]),!this.taskQueue.length)return;const n=this.pick();if(n===null)return;const o=this.tasks[n];if(delete this.tasks[n],this.taskQueue.length&&this.invoker.trigger(),!o)return;o.fn()}finally{}}pick(){let n=null,o=1/0;for(let p=0;p<this.taskQueue.length;p++){const m=this.tasks[this.taskQueue[p]];m.priority<o&&(o=m.priority,n=p)}if(n===null)return null;const c=this.taskQueue[n];return this.taskQueue.splice(n,1),c}remove(){this.invoker.remove()}}class eC{constructor(n){this._stringToNumber={},this._numberToString=[];for(let o=0;o<n.length;o++){const c=n[o];this._stringToNumber[c]=o,this._numberToString[o]=c}}encode(n){return this._stringToNumber[n]}decode(n){return this._numberToString[n]}}const o8=["tile","layer","source","sourceLayer","state"];class tC{constructor(n,o,c,p,m){this.type="Feature",this._vectorTileFeature=n,this._z=o,this._x=c,this._y=p,this.properties=n.properties,this.id=m}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};this.id!==void 0&&(n.id=this.id);for(const o of o8)this[o]!==void 0&&(n[o]=this[o]);return n}}const Qo=32,Qs=33,Sl=new Uint16Array(8184);for(let i=0;i<2046;i++){let n=i+2,o=0,c=0,p=0,m=0,y=0,b=0;for(1&n?p=m=y=Qo:o=c=b=Qo;(n>>=1)>1;){const A=o+p>>1,I=c+m>>1;1&n?(p=o,m=c,o=y,c=b):(o=p,c=m,p=y,m=b),y=A,b=I}const E=4*i;Sl[E+0]=o,Sl[E+1]=c,Sl[E+2]=p,Sl[E+3]=m}const ea=new Uint16Array(2178),Cl=new Uint8Array(1089),u0=new Uint16Array(1089);function nC(i){return i===0?-.03125:i===32?.03125:0}var rC=ze([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const iC={type:2,extent:Zt,loadGeometry:()=>[[new ve(0,0),new ve(Zt+1,0),new ve(Zt+1,Zt+1),new ve(0,Zt+1),new ve(0,0)]]};class V_{constructor(n,o,c,p,m){this.tileID=n,this.uid=en(),this.uses=0,this.tileSize=o,this.tileZoom=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=m,this.expiredRequestCount=0,this.state="loading",p&&p.transform&&(this.projection=p.transform.projection)}registerFadeDuration(n){const o=n+this.timeAdded;o<hs.now()||this.fadeEndTime&&o<this.fadeEndTime||(this.fadeEndTime=o)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=Xc(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(n,o,c){if(this.unloadVectorData(),this.state="loaded",n){n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=function(p,m){const y={};if(!m)return y;for(const b of p){const E=b.layerIds.map(A=>m.getLayer(A)).filter(Boolean);if(E.length!==0){b.layers=E,b.stateDependentLayerIds&&(b.stateDependentLayers=b.stateDependentLayerIds.map(A=>E.filter(I=>I.id===A)[0]));for(const A of E)y[A.id]=b}}return y}(n.buckets,o.style),this.hasSymbolBuckets=!1;for(const p in this.buckets){const m=this.buckets[p];if(m instanceof Tl){if(this.hasSymbolBuckets=!0,!c)break;m.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const p in this.buckets){const m=this.buckets[p];if(m instanceof Tl&&m.hasRTLText){this.hasRTLText=!0,P.isLoading()||P.isLoaded()||w()!=="deferred"||M();break}}this.queryPadding=0;for(const p in this.buckets){const m=this.buckets[p];this.queryPadding=Math.max(this.queryPadding,o.style.getLayer(p).queryRadius(m))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage),n.lineAtlas&&(this.lineAtlas=n.lineAtlas)}else this.collisionBoxArray=new On}unloadVectorData(){if(this.hasData()){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(n){return this.buckets[n.id]}upload(n){for(const c in this.buckets){const p=this.buckets[c];p.uploadPending()&&p.upload(n)}const o=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new hf(n,this.imageAtlas.image,o.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new hf(n,this.glyphAtlasImage,o.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new hf(n,this.lineAtlas.image,o.ALPHA),this.lineAtlas.uploaded=!0)}prepare(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)}queryRenderedFeatures(n,o,c,p,m,y,b,E){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:p,pixelPosMatrix:b,transform:y,params:m,tileTransform:this.tileTransform},n,o,c):{}}querySourceFeatures(n,o){const c=this.latestFeatureIndex;if(!c||!c.rawTileData)return;const p=c.loadVTLayers(),m=o?o.sourceLayer:"",y=p._geojsonTileLayer||p[m];if(!y)return;const b=Yu(o&&o.filter),{z:E,x:A,y:I}=this.tileID.canonical,N={z:E,x:A,y:I};for(let O=0;O<y.length;O++){const j=y.feature(O);if(b.needGeometry){const te=Hc(j,!0);if(!b.filter(new z(this.tileID.overscaledZ),te,this.tileID.canonical))continue}else if(!b.filter(new z(this.tileID.overscaledZ),j))continue;const G=c.getId(j,m),X=new tC(j,E,A,I,G);X.tile=N,n.push(X)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(n){const o=this.expirationTime;if(n.cacheControl){const c=Ge(n.cacheControl);c["max-age"]&&(this.expirationTime=Date.now()+1e3*c["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){const c=Date.now();let p=!1;if(this.expirationTime>c)p=!1;else if(o)if(this.expirationTime<o)p=!0;else{const m=this.expirationTime-o;m?this.expirationTime=c+Math.max(m,3e4):p=!0}else p=!0;p?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(n,o){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(n).length===0||!o)return;const c=this.latestFeatureIndex.loadVTLayers(),p=o.style.listImages();for(const m in this.buckets){if(!o.style.hasLayer(m))continue;const y=this.buckets[m],b=y.layers[0].sourceLayer||"_geojsonTileLayer",E=c[b],A=n[b];if(!E||!A||Object.keys(A).length===0)continue;if(y.update(A,E,p,this.imageAtlas&&this.imageAtlas.patternPositions||{}),y instanceof Xg||y instanceof Gg){const N=o.style._getSourceCache(y.layers[0].source);o._terrain&&o._terrain.enabled&&N&&y.programConfigurations.needsUpload&&o._terrain._clearRenderCacheForTile(N.id,this.tileID)}const I=o&&o.style&&o.style.getLayer(m);I&&(this.queryPadding=Math.max(this.queryPadding,I.queryRadius(y)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<hs.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(n){this.symbolFadeHoldUntil=hs.now()+n}setTexture(n,o){const c=o.context,p=c.gl;this.texture=this.texture||o.getTileTexture(n.width),this.texture?this.texture.update(n,{useMipmap:!0}):(this.texture=new hf(c,n,p.RGBA,{useMipmap:!0}),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE))}setDependencies(n,o){const c={};for(const p of o)c[p]=!0;this.dependencies[n]=c}hasDependency(n,o){for(const c of n){const p=this.dependencies[c];if(p){for(const m of o)if(p[m])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(n,o){if(!o||o.name==="mercator"||this._tileDebugBuffer)return;const c=ka(iC,this.tileID.canonical,this.tileTransform)[0],p=new ct,m=new ro;for(let y=0;y<c.length;y++){const{x:b,y:E}=c[y];p.emplaceBack(b,E),m.emplaceBack(y)}m.emplaceBack(0),this._tileDebugIndexBuffer=n.createIndexBuffer(m),this._tileDebugBuffer=n.createVertexBuffer(p,Up.members),this._tileDebugSegments=Cr.simpleSegment(0,0,p.length,m.length)}_makeTileBoundsBuffers(n,o){if(this._tileBoundsBuffer||!o||o.name==="mercator")return;const c=ka(iC,this.tileID.canonical,this.tileTransform)[0];let p,m;if(this.isRaster){const y=function(b,E){const A=Xc(b,E),I=Math.pow(2,b.z);for(let te=0;te<Qs;te++)for(let ue=0;ue<Qs;ue++){const xe=Eo((b.x+(ue+nC(ue))/Qo)/I),he=ai((b.y+(te+nC(te))/Qo)/I),ge=E.project(xe,he),Ee=te*Qs+ue;ea[2*Ee+0]=Math.round((ge.x*A.scale-A.x)*Zt),ea[2*Ee+1]=Math.round((ge.y*A.scale-A.y)*Zt)}Cl.fill(0),u0.fill(0);for(let te=2045;te>=0;te--){const ue=4*te,xe=Sl[ue+0],he=Sl[ue+1],ge=Sl[ue+2],Ee=Sl[ue+3],we=xe+ge>>1,Ve=he+Ee>>1,$e=we+Ve-he,et=Ve+xe-we,ut=he*Qs+xe,We=Ee*Qs+ge,rt=Ve*Qs+we,it=Math.hypot((ea[2*ut+0]+ea[2*We+0])/2-ea[2*rt+0],(ea[2*ut+1]+ea[2*We+1])/2-ea[2*rt+1])>=16;Cl[rt]=Cl[rt]||(it?1:0),te<1022&&(Cl[rt]=Cl[rt]||Cl[(he+et>>1)*Qs+(xe+$e>>1)]||Cl[(Ee+et>>1)*Qs+(ge+$e>>1)])}const N=new nt,O=new $t;let j=0;function G(te,ue){const xe=ue*Qs+te;return u0[xe]===0&&(N.emplaceBack(ea[2*xe+0],ea[2*xe+1],te*Zt/Qo,ue*Zt/Qo),u0[xe]=++j),u0[xe]-1}function X(te,ue,xe,he,ge,Ee){const we=te+xe>>1,Ve=ue+he>>1;if(Math.abs(te-ge)+Math.abs(ue-Ee)>1&&Cl[Ve*Qs+we])X(ge,Ee,te,ue,we,Ve),X(xe,he,ge,Ee,we,Ve);else{const $e=G(te,ue),et=G(xe,he),ut=G(ge,Ee);O.emplaceBack($e,et,ut)}}return X(0,0,Qo,Qo,Qo,0),X(Qo,Qo,0,0,0,Qo),{vertices:N,indices:O}}(this.tileID.canonical,o);p=y.vertices,m=y.indices}else{p=new nt,m=new $t;for(const{x:b,y:E}of c)p.emplaceBack(b,E,0,0);const y=E_(p.int16,void 0,4);for(let b=0;b<y.length;b+=3)m.emplaceBack(y[b],y[b+1],y[b+2])}this._tileBoundsBuffer=n.createVertexBuffer(p,rC.members),this._tileBoundsIndexBuffer=n.createIndexBuffer(m),this._tileBoundsSegments=Cr.simpleSegment(0,0,p.length,m.length)}_makeGlobeTileDebugBuffers(n,o){const c=o.projection;if(!c||c.name!=="globe"||o.freezeTileCoverage)return;const p=this.tileID.canonical,m=qp(ST(p,o)),y=ah(o.zoom);let b;y>0&&(b=Yx(new Float64Array(16),o.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(n,p,o,m,b,y),this._makeGlobeTileDebugTextBuffer(n,p,o,m,b,y)}_globePoint(n,o,c,p,m,y,b){let E=Gp(n,o,c);if(y){const A=1<<c.z,I=Ys(p.center.lng),N=Js(p.center.lat),O=(c.x+.5)/A-I;let j=0;O>.5?j=-1:O<-.5&&(j=1);let G=(n/Zt+c.x)/A+j,X=(o/Zt+c.y)/A;G=(G-I)*p._pixelsPerMercatorPixel+I,X=(X-N)*p._pixelsPerMercatorPixel+N;const te=[G*p.worldSize,X*p.worldSize,0];_r(te,te,y),E=qc(E,te,b)}return _r(E,E,m)}_makeGlobeTileDebugBorderBuffer(n,o,c,p,m,y){const b=new ct,E=new ro,A=new Be,I=(O,j,G,X,te)=>{const ue=(G-O)/(te-1),xe=(X-j)/(te-1),he=b.length;for(let ge=0;ge<te;ge++){const Ee=O+ge*ue,we=j+ge*xe;b.emplaceBack(Ee,we);const Ve=this._globePoint(Ee,we,o,c,p,m,y);A.emplaceBack(Ve[0],Ve[1],Ve[2]),E.emplaceBack(he+ge)}},N=Zt;I(0,0,N,0,16),I(N,0,N,N,16),I(N,N,0,N,16),I(0,N,0,0,16),this._tileDebugIndexBuffer=n.createIndexBuffer(E),this._tileDebugBuffer=n.createVertexBuffer(b,Up.members),this._globeTileDebugBorderBuffer=n.createVertexBuffer(A,wT.members),this._tileDebugSegments=Cr.simpleSegment(0,0,b.length,E.length)}_makeGlobeTileDebugTextBuffer(n,o,c,p,m,y){const b=Zt/4,E=new ct,A=new $t,I=new Be,N=25;A.reserve(32),E.reserve(N),I.reserve(N);const O=(j,G)=>N*j+G;for(let j=0;j<N;j++){const G=j*b;for(let X=0;X<N;X++){const te=X*b;E.emplaceBack(te,G);const ue=this._globePoint(te,G,o,c,p,m,y);I.emplaceBack(ue[0],ue[1],ue[2])}}for(let j=0;j<4;j++)for(let G=0;G<4;G++){const X=O(j,G),te=O(j,G+1),ue=O(j+1,G),xe=O(j+1,G+1);A.emplaceBack(X,te,ue),A.emplaceBack(ue,te,xe)}this._tileDebugTextIndexBuffer=n.createIndexBuffer(A),this._tileDebugTextBuffer=n.createVertexBuffer(E,Up.members),this._globeTileDebugTextBuffer=n.createVertexBuffer(I,wT.members),this._tileDebugTextSegments=Cr.simpleSegment(0,0,N,32)}}class s8{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(n,o,c){const p=String(o);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][p]=this.stateChanges[n][p]||{},Et(this.stateChanges[n][p],c),this.deletedStates[n]===null){this.deletedStates[n]={};for(const m in this.state[n])m!==p&&(this.deletedStates[n][m]=null)}else if(this.deletedStates[n]&&this.deletedStates[n][p]===null){this.deletedStates[n][p]={};for(const m in this.state[n][p])c[m]||(this.deletedStates[n][p][m]=null)}else for(const m in c)this.deletedStates[n]&&this.deletedStates[n][p]&&this.deletedStates[n][p][m]===null&&delete this.deletedStates[n][p][m]}removeFeatureState(n,o,c){if(this.deletedStates[n]===null)return;const p=String(o);if(this.deletedStates[n]=this.deletedStates[n]||{},c&&o!==void 0)this.deletedStates[n][p]!==null&&(this.deletedStates[n][p]=this.deletedStates[n][p]||{},this.deletedStates[n][p][c]=null);else if(o!==void 0)if(this.stateChanges[n]&&this.stateChanges[n][p])for(c in this.deletedStates[n][p]={},this.stateChanges[n][p])this.deletedStates[n][p][c]=null;else this.deletedStates[n][p]=null;else this.deletedStates[n]=null}getState(n,o){const c=String(o),p=Et({},(this.state[n]||{})[c],(this.stateChanges[n]||{})[c]);if(this.deletedStates[n]===null)return{};if(this.deletedStates[n]){const m=this.deletedStates[n][o];if(m===null)return{};for(const y in m)delete p[y]}return p}initializeTileState(n,o){n.setFeatureState(this.state,o)}coalesceChanges(n,o){const c={};for(const p in this.stateChanges){this.state[p]=this.state[p]||{};const m={};for(const y in this.stateChanges[p])this.state[p][y]||(this.state[p][y]={}),Et(this.state[p][y],this.stateChanges[p][y]),m[y]=this.state[p][y];c[p]=m}for(const p in this.deletedStates){this.state[p]=this.state[p]||{};const m={};if(this.deletedStates[p]===null)for(const y in this.state[p])m[y]={},this.state[p][y]={};else for(const y in this.deletedStates[p]){if(this.deletedStates[p][y]===null)this.state[p][y]={};else if(this.state[p][y])for(const b of Object.keys(this.deletedStates[p][y]))delete this.state[p][y][b];m[y]=this.state[p][y]}c[p]=c[p]||{},Et(c[p],m)}if(this.stateChanges={},this.deletedStates={},Object.keys(c).length!==0)for(const p in n)n[p].setFeatureState(c,o)}}class oC{constructor(n){this.size=n,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(n,o){const c=this.toIdx(n,o);return{min:this.minimums[c],max:this.maximums[c]}}isLeaf(n,o){return this.leaves[this.toIdx(n,o)]}toIdx(n,o){return o*this.size+n}}function sC(i,n,o,c){let p=0,m=Number.MAX_VALUE;for(let y=0;y<3;y++)if(Math.abs(c[y])<1e-15){if(o[y]<i[y]||o[y]>n[y])return null}else{const b=1/c[y];let E=(i[y]-o[y])*b,A=(n[y]-o[y])*b;if(E>A){const I=E;E=A,A=I}if(E>p&&(p=E),A<m&&(m=A),p>m)return null}return p}function aC(i,n,o,c,p,m,y,b,E,A,I){const N=c-i,O=p-n,j=m-o,G=y-i,X=b-n,te=E-o,ue=I[1]*te-I[2]*X,xe=I[2]*G-I[0]*te,he=I[0]*X-I[1]*G,ge=N*ue+O*xe+j*he;if(Math.abs(ge)<1e-15)return null;const Ee=1/ge,we=A[0]-i,Ve=A[1]-n,$e=A[2]-o,et=(we*ue+Ve*xe+$e*he)*Ee;if(et<0||et>1)return null;const ut=Ve*j-$e*O,We=$e*N-we*j,rt=we*O-Ve*N,it=(I[0]*ut+I[1]*We+I[2]*rt)*Ee;return it<0||et+it>1?null:(G*ut+X*We+te*rt)*Ee}function lC(i,n,o){return(i-n)/(o-n)}function cC(i,n,o,c,p,m,y,b,E){const A=1<<o,I=m-c,N=y-p,O=(i+1)/A*I+c,j=(n+0)/A*N+p,G=(n+1)/A*N+p;b[0]=(i+0)/A*I+c,b[1]=j,E[0]=O,E[1]=G}class uC{constructor(n){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=n,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const o=function(m){const y=Math.ceil(Math.log2(m.dim/8)),b=[];let E=Math.ceil(Math.pow(2,y));const A=1/E,I=(j,G,X,te,ue)=>{const xe=te?1:0,he=(j+1)*X-xe,ge=G*X,Ee=(G+1)*X-xe;ue[0]=j*X,ue[1]=ge,ue[2]=he,ue[3]=Ee};let N=new oC(E);const O=[];for(let j=0;j<E*E;j++){I(j%E,Math.floor(j/E),A,!1,O);const G=Al(O[0],O[1],m),X=Al(O[2],O[1],m),te=Al(O[2],O[3],m),ue=Al(O[0],O[3],m);N.minimums.push(Math.min(G,X,te,ue)),N.maximums.push(Math.max(G,X,te,ue)),N.leaves.push(1)}for(b.push(N),E/=2;E>=1;E/=2){const j=b[b.length-1];N=new oC(E);for(let G=0;G<E*E;G++){I(G%E,Math.floor(G/E),2,!0,O);const X=j.getElevation(O[0],O[1]),te=j.getElevation(O[2],O[1]),ue=j.getElevation(O[2],O[3]),xe=j.getElevation(O[0],O[3]),he=j.isLeaf(O[0],O[1]),ge=j.isLeaf(O[2],O[1]),Ee=j.isLeaf(O[2],O[3]),we=j.isLeaf(O[0],O[3]),Ve=Math.min(X.min,te.min,ue.min,xe.min),$e=Math.max(X.max,te.max,ue.max,xe.max),et=he&&ge&&Ee&&we;N.maximums.push($e),N.minimums.push(Ve),N.leaves.push($e-Ve<=5&&et?1:0)}b.push(N)}return b}(this.dem),c=o.length-1,p=o[c];this._addNode(p.minimums[0],p.maximums[0],p.leaves[0]),this._construct(o,0,0,c,0)}raycastRoot(n,o,c,p,m,y,b=1){return sC([n,o,-100],[c,p,this.maximums[0]*b],m,y)}raycast(n,o,c,p,m,y,b=1){if(!this.nodeCount)return null;const E=this.raycastRoot(n,o,c,p,m,y,b);if(E==null)return null;const A=[],I=[],N=[],O=[],j=[{idx:0,t:E,nodex:0,nodey:0,depth:0}];for(;j.length>0;){const{idx:G,t:X,nodex:te,nodey:ue,depth:xe}=j.pop();if(this.leaves[G]){cC(te,ue,xe,n,o,c,p,N,O);const ge=1<<xe,Ee=(te+0)/ge,we=(te+1)/ge,Ve=(ue+0)/ge,$e=(ue+1)/ge,et=Al(Ee,Ve,this.dem)*b,ut=Al(we,Ve,this.dem)*b,We=Al(we,$e,this.dem)*b,rt=Al(Ee,$e,this.dem)*b,it=aC(N[0],N[1],et,O[0],N[1],ut,O[0],O[1],We,m,y),at=aC(O[0],O[1],We,N[0],O[1],rt,N[0],N[1],et,m,y),ft=Math.min(it!==null?it:Number.MAX_VALUE,at!==null?at:Number.MAX_VALUE);if(ft!==Number.MAX_VALUE)return ft;{const Je=$p([],m,y,X);if(hC(et,ut,rt,We,lC(Je[0],N[0],O[0]),lC(Je[1],N[1],O[1]))>=Je[2])return X}continue}let he=0;for(let ge=0;ge<this._siblingOffset.length;ge++){cC((te<<1)+this._siblingOffset[ge][0],(ue<<1)+this._siblingOffset[ge][1],xe+1,n,o,c,p,N,O),N[2]=-100,O[2]=this.maximums[this.childOffsets[G]+ge]*b;const Ee=sC(N,O,m,y);if(Ee!=null){const we=Ee;A[ge]=we;let Ve=!1;for(let $e=0;$e<he&&!Ve;$e++)we>=A[I[$e]]&&(I.splice($e,0,ge),Ve=!0);Ve||(I[he]=ge),he++}}for(let ge=0;ge<he;ge++){const Ee=I[ge];j.push({idx:this.childOffsets[G]+Ee,t:A[Ee],nodex:(te<<1)+this._siblingOffset[Ee][0],nodey:(ue<<1)+this._siblingOffset[Ee][1],depth:xe+1})}}return null}_addNode(n,o,c){return this.minimums.push(n),this.maximums.push(o),this.leaves.push(c),this.childOffsets.push(0),this.nodeCount++}_construct(n,o,c,p,m){if(n[p].isLeaf(o,c)===1)return;this.childOffsets[m]||(this.childOffsets[m]=this.nodeCount);const y=p-1,b=n[y];let E=0,A=0;for(let I=0;I<this._siblingOffset.length;I++){const N=2*o+this._siblingOffset[I][0],O=2*c+this._siblingOffset[I][1],j=b.getElevation(N,O),G=b.isLeaf(N,O),X=this._addNode(j.min,j.max,G);G&&(E|=1<<I),A||(A=X)}for(let I=0;I<this._siblingOffset.length;I++)E&1<<I||this._construct(n,2*o+this._siblingOffset[I][0],2*c+this._siblingOffset[I][1],y,A+I)}}function hC(i,n,o,c,p,m){return En(En(i,o,m),En(n,c,m),p)}function Al(i,n,o){const c=o.dim,p=Ze(i*c-.5,0,c-1),m=Ze(n*c-.5,0,c-1),y=Math.floor(p),b=Math.floor(m),E=Math.min(y+1,c-1),A=Math.min(b+1,c-1);return hC(o.get(y,b),o.get(E,b),o.get(y,A),o.get(E,A),p-y,m-b)}const dC={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function a8(i,n,o){return(256*i*256+256*n+o)/10-1e4}function l8(i,n,o){return 256*i+n+o/256-32768}class h0{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(n,o,c,p=!1,m=!1){if(this.uid=n,o.height!==o.width)throw new RangeError("DEM tiles must be square");if(c&&c!=="mapbox"&&c!=="terrarium")return tn(`"${c}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=o.height;const y=this.dim=o.height-2,b=new Uint32Array(o.data.buffer);if(this.pixels=new Uint8Array(o.data.buffer),this.encoding=c||"mapbox",this.borderReady=p,!p){for(let E=0;E<y;E++)b[this._idx(-1,E)]=b[this._idx(0,E)],b[this._idx(y,E)]=b[this._idx(y-1,E)],b[this._idx(E,-1)]=b[this._idx(E,0)],b[this._idx(E,y)]=b[this._idx(E,y-1)];b[this._idx(-1,-1)]=b[this._idx(0,0)],b[this._idx(y,-1)]=b[this._idx(y-1,0)],b[this._idx(-1,y)]=b[this._idx(0,y-1)],b[this._idx(y,y)]=b[this._idx(y-1,y-1)],m&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new uC(this)}get(n,o,c=!1){c&&(n=Ze(n,-1,this.dim),o=Ze(o,-1,this.dim));const p=4*this._idx(n,o);return(this.encoding==="terrarium"?l8:a8)(this.pixels[p],this.pixels[p+1],this.pixels[p+2])}static getUnpackVector(n){return dC[n]}get unpackVector(){return dC[this.encoding]}_idx(n,o){if(n<-1||n>=this.dim+1||o<-1||o>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(o+1)*this.stride+(n+1)}static pack(n,o){const c=[0,0,0,0],p=h0.getUnpackVector(o);let m=Math.floor((n+p[3])/p[2]);return c[2]=m%256,m=Math.floor(m/256),c[1]=m%256,m=Math.floor(m/256),c[0]=m,c}getPixels(){return new oo({width:this.stride,height:this.stride},this.pixels)}backfillBorder(n,o,c){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let p=o*this.dim,m=o*this.dim+this.dim,y=c*this.dim,b=c*this.dim+this.dim;switch(o){case-1:p=m-1;break;case 1:m=p+1}switch(c){case-1:y=b-1;break;case 1:b=y+1}const E=-o*this.dim,A=-c*this.dim;for(let I=y;I<b;I++)for(let N=p;N<m;N++){const O=4*this._idx(N,I),j=4*this._idx(N+E,I+A);this.pixels[O+0]=n.pixels[j+0],this.pixels[O+1]=n.pixels[j+1],this.pixels[O+2]=n.pixels[j+2],this.pixels[O+3]=n.pixels[j+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}It(h0,"DEMData"),It(uC,"DemMinMaxQuadTree",{omit:["dem"]});class c8{constructor(n,o){this.max=n,this.onRemove=o,this.reset()}reset(){for(const n in this.data)for(const o of this.data[n])o.timeout&&clearTimeout(o.timeout),this.onRemove(o.value);return this.data={},this.order=[],this}add(n,o,c){const p=n.wrapped().key;this.data[p]===void 0&&(this.data[p]=[]);const m={value:o,timeout:void 0};if(c!==void 0&&(m.timeout=setTimeout(()=>{this.remove(n,m)},c)),this.data[p].push(m),this.order.push(p),this.order.length>this.max){const y=this._getAndRemoveByKey(this.order[0]);y&&this.onRemove(y)}return this}has(n){return n.wrapped().key in this.data}getAndRemove(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null}_getAndRemoveByKey(n){const o=this.data[n].shift();return o.timeout&&clearTimeout(o.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),o.value}getByKey(n){const o=this.data[n];return o?o[0].value:null}get(n){return this.has(n)?this.data[n.wrapped().key][0].value:null}remove(n,o){if(!this.has(n))return this;const c=n.wrapped().key,p=o===void 0?0:this.data[c].indexOf(o),m=this.data[c][p];return this.data[c].splice(p,1),m.timeout&&clearTimeout(m.timeout),this.data[c].length===0&&delete this.data[c],this.onRemove(m.value),this.order.splice(this.order.indexOf(c),1),this}setMaxSize(n){for(this.max=n;this.order.length>this.max;){const o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this}filter(n){const o=[];for(const c in this.data)for(const p of this.data[c])n(p.value)||o.push(p);for(const c of o)this.remove(c.value.tileID,c)}}class wh{constructor(n,o,c){this.func=n,this.mask=o,this.range=c}}wh.ReadOnly=!1,wh.ReadWrite=!0,wh.disabled=new wh(519,wh.ReadOnly,[0,1]);const G_=7680;class q_{constructor(n,o,c,p,m,y){this.test=n,this.ref=o,this.mask=c,this.fail=p,this.depthFail=m,this.pass=y}}q_.disabled=new q_({func:519,mask:0},0,0,G_,G_,G_);class ta{constructor(n,o,c){this.blendFunction=n,this.blendColor=o,this.mask=c}}ta.Replace=[1,0],ta.disabled=new ta(ta.Replace,xr.transparent,[!1,!1,!1,!1]),ta.unblended=new ta(ta.Replace,xr.transparent,[!0,!0,!0,!0]),ta.alphaBlended=new ta([1,771],xr.transparent,[!0,!0,!0,!0]);const H_=1029,W_=2305;class ks{constructor(n,o,c){this.enable=n,this.mode=o,this.frontFace=c}}ks.disabled=new ks(!1,H_,W_),ks.backCCW=new ks(!0,H_,W_),ks.backCW=new ks(!0,H_,2304),ks.frontCW=new ks(!0,1028,2304),ks.frontCCW=new ks(!0,1028,W_);class Kc extends pc{constructor(n,o,c){super(),this.id=n,this._onlySymbols=c,o.on("data",p=>{p.dataType==="source"&&p.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&p.dataType==="source"&&p.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),o.on("error",()=>{this._sourceErrored=!0}),this._source=o,this._tiles={},this._cache=new c8(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=o.minTileCacheSize,this._maxTileCacheSize=o.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new s8,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(n){this.map=n,this._minTileCacheSize=this._minTileCacheSize===void 0&&n?n._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&n?n._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const n in this._tiles){const o=this._tiles[n];if(o.state!=="loaded"&&o.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(n,o){return n.isSymbolTile=this._onlySymbols,this._source.loadTile(n,o)}_unloadTile(n){if(this._source.unloadTile)return this._source.unloadTile(n,()=>{})}_abortTile(n){if(this._source.abortTile)return this._source.abortTile(n,()=>{})}serialize(){return this._source.serialize()}prepare(n){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const o in this._tiles){const c=this._tiles[o];c.upload(n),c.prepare(this.map.style.imageManager)}}getIds(){return mt(this._tiles).map(n=>n.tileID).sort(pC).map(n=>n.key)}getRenderableIds(n){const o=[];for(const c in this._tiles)this._isIdRenderable(+c,n)&&o.push(this._tiles[c]);return n?o.sort((c,p)=>{const m=c.tileID,y=p.tileID,b=new ve(m.canonical.x,m.canonical.y)._rotate(this.transform.angle),E=new ve(y.canonical.x,y.canonical.y)._rotate(this.transform.angle);return m.overscaledZ-y.overscaledZ||E.y-b.y||E.x-b.x}).map(c=>c.tileID.key):o.map(c=>c.tileID).sort(pC).map(c=>c.key)}hasRenderableParent(n){const o=this.findLoadedParent(n,0);return!!o&&this._isIdRenderable(o.tileID.key)}_isIdRenderable(n,o){return this._tiles[n]&&this._tiles[n].hasData()&&!this._coveredTiles[n]&&(o||!this._tiles[n].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const n in this._tiles)this._tiles[n].state!=="errored"&&this._reloadTile(+n,"reloading")}}_reloadTile(n,o){const c=this._tiles[n];c&&(c.state!=="loading"&&(c.state=o),this._loadTile(c,this._tileLoaded.bind(this,c,n,o)))}_tileLoaded(n,o,c,p){if(p)if(n.state="errored",p.status!==404)this._source.fire(new ds(p,{tile:n}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const m=this.map.painter.terrain;this.update(this.transform,m.getScaledDemTileSize(),!0),m.resetTileLookupCache(this.id)}else this.update(this.transform);else n.timeAdded=hs.now(),c==="expired"&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(o,n),this._source.type==="raster-dem"&&n.dem&&this._backfillDEM(n),this._state.initializeTileState(n,this.map?this.map.painter:null),this._source.fire(new ma("data",{dataType:"source",tile:n,coord:n.tileID,sourceCacheId:this.id}))}_backfillDEM(n){const o=this.getRenderableIds();for(let p=0;p<o.length;p++){const m=o[p];if(n.neighboringTiles&&n.neighboringTiles[m]){const y=this.getTileByID(m);c(n,y),c(y,n)}}function c(p,m){if(!p.dem||p.dem.borderReady)return;p.needsHillshadePrepare=!0,p.needsDEMTextureUpload=!0;let y=m.tileID.canonical.x-p.tileID.canonical.x;const b=m.tileID.canonical.y-p.tileID.canonical.y,E=Math.pow(2,p.tileID.canonical.z),A=m.tileID.key;y===0&&b===0||Math.abs(b)>1||(Math.abs(y)>1&&(Math.abs(y+E)===1?y+=E:Math.abs(y-E)===1&&(y-=E)),m.dem&&p.dem&&(p.dem.backfillBorder(m.dem,y,b),p.neighboringTiles&&p.neighboringTiles[A]&&(p.neighboringTiles[A].backfilled=!0)))}}getTile(n){return this.getTileByID(n.key)}getTileByID(n){return this._tiles[n]}_retainLoadedChildren(n,o,c,p){for(const m in this._tiles){let y=this._tiles[m];if(p[m]||!y.hasData()||y.tileID.overscaledZ<=o||y.tileID.overscaledZ>c)continue;let b=y.tileID;for(;y&&y.tileID.overscaledZ>o+1;){const A=y.tileID.scaledTo(y.tileID.overscaledZ-1);y=this._tiles[A.key],y&&y.hasData()&&(b=A)}let E=b;for(;E.overscaledZ>o;)if(E=E.scaledTo(E.overscaledZ-1),n[E.key]){p[b.key]=b;break}}}findLoadedParent(n,o){if(n.key in this._loadedParentTiles){const c=this._loadedParentTiles[n.key];return c&&c.tileID.overscaledZ>=o?c:null}for(let c=n.overscaledZ-1;c>=o;c--){const p=n.scaledTo(c),m=this._getLoadedTile(p);if(m)return m}}_getLoadedTile(n){const o=this._tiles[n.key];return o&&o.hasData()?o:this._cache.getByKey(this._source.reparseOverscaled?n.wrapped().key:n.canonical.key)}updateCacheSize(n,o){o=o||this._source.tileSize;const c=Math.ceil(n.width/o)+1,p=Math.ceil(n.height/o)+1,m=Math.floor(c*p*5),y=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,m):m,b=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,y):y;this._cache.setMaxSize(b)}handleWrapJump(n){const o=Math.round((n-(this._prevLng===void 0?n:this._prevLng))/360);if(this._prevLng=n,o){const c={};for(const p in this._tiles){const m=this._tiles[p];m.tileID=m.tileID.unwrapTo(m.tileID.wrap+o),c[m.tileID.key]=m}this._tiles=c;for(const p in this._timers)clearTimeout(this._timers[p]),delete this._timers[p];for(const p in this._tiles)this._setTileReloadTimer(+p,this._tiles[p])}}update(n,o,c){if(this.transform=n,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!c)return;let p;this.updateCacheSize(n,o),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=n.getVisibleUnwrappedCoordinates(this._source.tileID).map(b=>new Pi(b.canonical.z,b.wrap,b.canonical.z,b.canonical.x,b.canonical.y)):(p=n.coveringTiles({tileSize:o||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!c,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(p=p.filter(b=>this._source.hasTile(b)))):p=[];const m=this._updateRetainedTiles(p);if(fC(this._source.type)&&p.length!==0){const b={},E={},A=Object.keys(m);for(const N of A){const O=m[N],j=this._tiles[N];if(!j||j.fadeEndTime&&j.fadeEndTime<=hs.now())continue;const G=this.findLoadedParent(O,Math.max(O.overscaledZ-Kc.maxOverzooming,this._source.minzoom));G&&(this._addTile(G.tileID),b[G.tileID.key]=G.tileID),E[N]=O}const I=p[p.length-1].overscaledZ;for(const N in this._tiles){const O=this._tiles[N];if(m[N]||!O.hasData())continue;let j=O.tileID;for(;j.overscaledZ>I;){j=j.scaledTo(j.overscaledZ-1);const G=this._tiles[j.key];if(G&&G.hasData()&&E[j.key]){m[N]=O.tileID;break}}}for(const N in b)m[N]||(this._coveredTiles[N]=!0,m[N]=b[N])}for(const b in m)this._tiles[b].clearFadeHold();const y=function(b,E){const A=[];for(const I in b)I in E||A.push(I);return A}(this._tiles,m);for(const b of y){const E=this._tiles[b];E.hasSymbolBuckets&&!E.holdingForFade()?E.setHoldDuration(this.map._fadeDuration):E.hasSymbolBuckets&&!E.symbolFadeFinished()||this._removeTile(+b)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const n in this._tiles)this._tiles[n].holdingForFade()&&this._removeTile(+n)}_updateRetainedTiles(n){const o={};if(n.length===0)return o;const c={},p=n.reduce((A,I)=>Math.min(A,I.overscaledZ),1/0),m=n[0].overscaledZ,y=Math.max(m-Kc.maxOverzooming,this._source.minzoom),b=Math.max(m+Kc.maxUnderzooming,this._source.minzoom),E={};for(const A of n){const I=this._addTile(A);o[A.key]=A,I.hasData()||p<this._source.maxzoom&&(E[A.key]=A)}this._retainLoadedChildren(E,p,b,o);for(const A of n){let I=this._tiles[A.key];if(I.hasData())continue;if(A.canonical.z>=this._source.maxzoom){const O=A.children(this._source.maxzoom)[0],j=this.getTile(O);if(j&&j.hasData()){o[O.key]=O;continue}}else{const O=A.children(this._source.maxzoom);if(o[O[0].key]&&o[O[1].key]&&o[O[2].key]&&o[O[3].key])continue}let N=I.wasRequested();for(let O=A.overscaledZ-1;O>=y;--O){const j=A.scaledTo(O);if(c[j.key]||(c[j.key]=!0,I=this.getTile(j),!I&&N&&(I=this._addTile(j)),I&&(o[j.key]=j,N=I.wasRequested(),I.hasData())))break}}return o}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const n in this._tiles){const o=[];let c,p=this._tiles[n].tileID;for(;p.overscaledZ>0;){if(p.key in this._loadedParentTiles){c=this._loadedParentTiles[p.key];break}o.push(p.key);const m=p.scaledTo(p.overscaledZ-1);if(c=this._getLoadedTile(m),c)break;p=m}for(const m of o)this._loadedParentTiles[m]=c}}_addTile(n){let o=this._tiles[n.key];if(o)return o;o=this._cache.getAndRemove(n),o&&(this._setTileReloadTimer(n.key,o),o.tileID=n,this._state.initializeTileState(o,this.map?this.map.painter:null),this._cacheTimers[n.key]&&(clearTimeout(this._cacheTimers[n.key]),delete this._cacheTimers[n.key],this._setTileReloadTimer(n.key,o)));const c=Boolean(o);if(!c){const p=this.map?this.map.painter:null;o=new V_(n,this._source.tileSize*n.overscaleFactor(),this.transform.tileZoom,p,this._isRaster),this._loadTile(o,this._tileLoaded.bind(this,o,n.key,o.state))}return o?(o.uses++,this._tiles[n.key]=o,c||this._source.fire(new ma("dataloading",{tile:o,coord:o.tileID,dataType:"source"})),o):null}_setTileReloadTimer(n,o){n in this._timers&&(clearTimeout(this._timers[n]),delete this._timers[n]);const c=o.getExpiryTimeout();c&&(this._timers[n]=setTimeout(()=>{this._reloadTile(n,"expired"),delete this._timers[n]},c))}_removeTile(n){const o=this._tiles[n];o&&(o.uses--,delete this._tiles[n],this._timers[n]&&(clearTimeout(this._timers[n]),delete this._timers[n]),o.uses>0||(o.hasData()&&o.state!=="reloading"?this._cache.add(o.tileID,o,o.getExpiryTimeout()):(o.aborted=!0,this._abortTile(o),this._unloadTile(o))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const n in this._tiles)this._removeTile(+n);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(n,o,c){const p=[],m=this.transform;if(!m)return p;const y=m.projection.name==="globe",b=Ys(m.center.lng);for(const E in this._tiles){const A=this._tiles[E];if(c&&A.clearQueryDebugViz(),A.holdingForFade())continue;let I;if(y){const N=A.tileID.canonical;if(N.z===0){const O=[Math.abs(Ze(b,...df(N,-1))-b),Math.abs(Ze(b,...df(N,1))-b)];I=[0,2*O.indexOf(Math.min(...O))-1]}else{const O=[Math.abs(Ze(b,...df(N,-1))-b),Math.abs(Ze(b,...df(N,0))-b),Math.abs(Ze(b,...df(N,1))-b)];I=[O.indexOf(Math.min(...O))-1]}}else I=[0];for(const N of I){const O=n.containsTile(A,m,o,N);O&&p.push(O)}}return p}getVisibleCoordinates(n){const o=this.getRenderableIds(n).map(c=>this._tiles[c].tileID);for(const c of o)c.projMatrix=this.transform.calculateProjMatrix(c.toUnwrapped());return o}hasTransition(){if(this._source.hasTransition())return!0;if(fC(this._source.type))for(const n in this._tiles){const o=this._tiles[n];if(o.fadeEndTime!==void 0&&o.fadeEndTime>=hs.now())return!0}return!1}setFeatureState(n,o,c){this._state.updateState(n=n||"_geojsonTileLayer",o,c)}removeFeatureState(n,o,c){this._state.removeFeatureState(n=n||"_geojsonTileLayer",o,c)}getFeatureState(n,o){return this._state.getState(n=n||"_geojsonTileLayer",o)}setDependencies(n,o,c){const p=this._tiles[n];p&&p.setDependencies(o,c)}reloadTilesForDependencies(n,o){for(const c in this._tiles)this._tiles[c].hasDependency(n,o)&&this._reloadTile(+c,"reloading");this._cache.filter(c=>!c.hasDependency(n,o))}_preloadTiles(n,o){if(!this._sourceLoaded){const b=()=>{this._sourceLoaded&&(this._source.off("data",b),this._preloadTiles(n,o))};return void this._source.on("data",b)}const c=new Map,p=Array.isArray(n)?n:[n],m=this.map.painter.terrain,y=this.usedForTerrain&&m?m.getScaledDemTileSize():this._source.tileSize;for(const b of p){const E=b.coveringTiles({tileSize:y,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const A of E)c.set(A.key,A);this.usedForTerrain&&b.updateElevation(!1)}_t(Array.from(c.values()),(b,E)=>{const A=new V_(b,this._source.tileSize*b.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(A,I=>{this._source.type==="raster-dem"&&A.dem&&this._backfillDEM(A),E(I,A)})},o)}}function pC(i,n){const o=Math.abs(2*i.wrap)-+(i.wrap<0),c=Math.abs(2*n.wrap)-+(n.wrap<0);return i.overscaledZ-n.overscaledZ||c-o||n.canonical.y-i.canonical.y||n.canonical.x-i.canonical.x}function fC(i){return i==="raster"||i==="image"||i==="video"||i==="custom"}function df(i,n){const o=1<<i.z;return[i.x/o+n,(i.x+1)/o+n]}Kc.maxOverzooming=10,Kc.maxUnderzooming=3;class d0{constructor(n,o,c){this._demTile=n,this._dem=this._demTile.dem,this._scale=o,this._offset=c}static create(n,o,c){const p=c||n.findDEMTileFor(o);if(!p||!p.dem)return;const m=p.dem,y=p.tileID,b=1<<o.canonical.z-y.canonical.z;return new d0(p,p.tileSize/Zt/b,[(o.canonical.x/b-y.canonical.x)*m.dim,(o.canonical.y/b-y.canonical.y)*m.dim])}tileCoordToPixel(n,o){const c=o*this._scale+this._offset[1],p=Math.floor(n*this._scale+this._offset[0]),m=Math.floor(c);return new ve(p,m)}getElevationAt(n,o,c,p){const m=n*this._scale+this._offset[0],y=o*this._scale+this._offset[1],b=Math.floor(m),E=Math.floor(y),A=this._dem;return p=!!p,c?En(En(A.get(b,E,p),A.get(b,E+1,p),y-E),En(A.get(b+1,E,p),A.get(b+1,E+1,p),y-E),m-b):A.get(b,E,p)}getElevationAtPixel(n,o,c){return this._dem.get(n,o,!!c)}getMeterToDEM(n){return(1<<this._demTile.tileID.canonical.z)*Cs(1,n)*this._dem.stride}}class mC{constructor(n,o){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new wa(Zt,16,0),this.featureIndexArray=new Oc,this.promoteId=o}insert(n,o,c,p,m,y=0){const b=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(c,p,m,y);const E=this.grid;for(let A=0;A<o.length;A++){const I=o[A],N=[1/0,1/0,-1/0,-1/0];for(let O=0;O<I.length;O++){const j=I[O];N[0]=Math.min(N[0],j.x),N[1]=Math.min(N[1],j.y),N[2]=Math.max(N[2],j.x),N[3]=Math.max(N[3],j.y)}N[0]<Zt&&N[1]<Zt&&N[2]>=0&&N[3]>=0&&E.insert(b,N[0],N[1],N[2],N[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new A_(new Jg(this.rawTileData)).layers,this.sourceLayerCoder=new eC(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const n in this.vtLayers)this.vtFeatures[n]=[]}return this.vtLayers}query(n,o,c,p){this.loadVTLayers();const m=n.params||{},y=Yu(m.filter),b=n.tileResult,E=n.transform,A=b.bufferedTilespaceBounds,I=this.grid.query(A.min.x,A.min.y,A.max.x,A.max.y,(G,X,te,ue)=>$T(b.bufferedTilespaceGeometry,G,X,te,ue));I.sort(u8);let N=null;E.elevation&&I.length>0&&(N=d0.create(E.elevation,this.tileID));const O={};let j;for(let G=0;G<I.length;G++){const X=I[G];if(X===j)continue;j=X;const te=this.featureIndexArray.get(X);let ue=null;this.loadMatchingFeature(O,te,y,m.layers,m.availableImages,o,c,p,(xe,he,ge,Ee=0)=>(ue||(ue=ka(xe,this.tileID.canonical,n.tileTransform)),he.queryIntersectsFeature(b,xe,ge,ue,this.z,n.transform,n.pixelPosMatrix,N,Ee)))}return O}loadMatchingFeature(n,o,c,p,m,y,b,E,A){const{featureIndex:I,bucketIndex:N,sourceLayerIndex:O,layoutVertexArrayOffset:j}=o,G=this.bucketLayerIDs[N];if(p&&!function(xe,he){for(let ge=0;ge<xe.length;ge++)if(he.indexOf(xe[ge])>=0)return!0;return!1}(p,G))return;const X=this.sourceLayerCoder.decode(O),te=this.vtLayers[X].feature(I);if(c.needGeometry){const xe=Hc(te,!0);if(!c.filter(new z(this.tileID.overscaledZ),xe,this.tileID.canonical))return}else if(!c.filter(new z(this.tileID.overscaledZ),te))return;const ue=this.getId(te,X);for(let xe=0;xe<G.length;xe++){const he=G[xe];if(p&&p.indexOf(he)<0)continue;const ge=y[he];if(!ge)continue;let Ee={};ue!==void 0&&E&&(Ee=E.getState(ge.sourceLayer||"_geojsonTileLayer",ue));const we=Et({},b[he]);we.paint=gC(we.paint,ge.paint,te,Ee,m),we.layout=gC(we.layout,ge.layout,te,Ee,m);const Ve=!A||A(te,ge,Ee,j);if(!Ve)continue;const $e=new tC(te,this.z,this.x,this.y,ue);$e.layer=we;let et=n[he];et===void 0&&(et=n[he]=[]),et.push({featureIndex:I,feature:$e,intersectionZ:Ve})}}lookupSymbolFeatures(n,o,c,p,m,y,b,E){const A={};this.loadVTLayers();const I=Yu(m);for(const N of n)this.loadMatchingFeature(A,{bucketIndex:c,sourceLayerIndex:p,featureIndex:N,layoutVertexArrayOffset:0},I,y,b,E,o);return A}loadFeature(n){const{featureIndex:o,sourceLayerIndex:c}=n;this.loadVTLayers();const p=this.sourceLayerCoder.decode(c),m=this.vtFeatures[p];if(m[o])return m[o];const y=this.vtLayers[p].feature(o);return m[o]=y,y}hasLayer(n){for(const o of this.bucketLayerIDs)for(const c of o)if(n===c)return!0;return!1}getId(n,o){let c=n.id;if(this.promoteId){const p=typeof this.promoteId=="string"?this.promoteId:this.promoteId[o];p!=null&&(c=n.properties[p]),typeof c=="boolean"&&(c=Number(c))}return c}}function gC(i,n,o,c,p){return Rt(i,(m,y)=>{const b=n instanceof le?n.get(y):null;return b&&b.evaluate?b.evaluate(o,c,p):b})}function u8(i,n){return n-i}It(mC,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class yC{constructor(n,o){this.width=n,this.height=o,this.nextRow=0,this.image=new Pa({width:n,height:o}),this.positions={},this.uploaded=!1}getDash(n,o){const c=this.getKey(n,o);return this.positions[c]}trim(){const n=this.width,o=this.height=vn(this.nextRow);this.image.resize({width:n,height:o})}getKey(n,o){return n.join(",")+o}getDashRanges(n,o,c){const p=[];let m=n.length%2==1?-n[n.length-1]*c:0,y=n[0]*c,b=!0;p.push({left:m,right:y,isDash:b,zeroLength:n[0]===0});let E=n[0];for(let A=1;A<n.length;A++){b=!b;const I=n[A];m=E*c,E+=I,y=E*c,p.push({left:m,right:y,isDash:b,zeroLength:I===0})}return p}addRoundDash(n,o,c){const p=o/2;for(let m=-c;m<=c;m++){const y=this.width*(this.nextRow+c+m);let b=0,E=n[b];for(let A=0;A<this.width;A++){A/E.right>1&&(E=n[++b]);const I=Math.abs(A-E.left),N=Math.abs(A-E.right),O=Math.min(I,N);let j;const G=m/c*(p+1);if(E.isDash){const X=p-Math.abs(G);j=Math.sqrt(O*O+X*X)}else j=p-Math.sqrt(O*O+G*G);this.image.data[y+A]=Math.max(0,Math.min(255,j+128))}}}addRegularDash(n,o){for(let E=n.length-1;E>=0;--E){const A=n[E],I=n[E+1];A.zeroLength?n.splice(E,1):I&&I.isDash===A.isDash&&(I.left=A.left,n.splice(E,1))}const c=n[0],p=n[n.length-1];c.isDash===p.isDash&&(c.left=p.left-this.width,p.right=c.right+this.width);const m=this.width*this.nextRow;let y=0,b=n[y];for(let E=0;E<this.width;E++){E/b.right>1&&(b=n[++y]);const A=Math.abs(E-b.left),I=Math.abs(E-b.right),N=Math.min(A,I);this.image.data[m+E]=Math.max(0,Math.min(255,(b.isDash?N:-N)+o+128))}}addDash(n,o){const c=this.getKey(n,o);if(this.positions[c])return this.positions[c];const p=o==="round",m=p?7:0,y=2*m+1;if(this.nextRow+y>this.height)return tn("LineAtlas out of space"),null;n.length===0&&n.push(1);let b=0;for(let I=0;I<n.length;I++)n[I]<0&&(tn("Negative value is found in line dasharray, replacing values with 0"),n[I]=0),b+=n[I];if(b!==0){const I=this.width/b,N=this.getDashRanges(n,this.width,I);p?this.addRoundDash(N,I,m):this.addRegularDash(N,o==="square"?.5*I:0)}const E=this.nextRow+m;this.nextRow+=y;const A={tl:[E,m],br:[b,0]};return this.positions[c]=A,A}}It(yC,"LineAtlas");const xC=1*Ms;class _C{constructor(n){const o={},c=[];for(const b in n){const E=n[b],A=o[b]={};for(const I in E.glyphs){const N=E.glyphs[+I];if(!N||N.bitmap.width===0||N.bitmap.height===0)continue;const O=N.metrics.localGlyph?xC:1,j={x:0,y:0,w:N.bitmap.width+2*O,h:N.bitmap.height+2*O};c.push(j),A[I]=j}}const{w:p,h:m}=I_(c),y=new Pa({width:p||1,height:m||1});for(const b in n){const E=n[b];for(const A in E.glyphs){const I=E.glyphs[+A];if(!I||I.bitmap.width===0||I.bitmap.height===0)continue;const N=o[b][A],O=I.metrics.localGlyph?xC:1;Pa.copy(I.bitmap,y,{x:0,y:0},{x:N.x+O,y:N.y+O},I.bitmap)}}this.image=y,this.positions=o}}It(_C,"GlyphAtlas");class h8{constructor(n){this.tileID=new Pi(n.tileID.overscaledZ,n.tileID.wrap,n.tileID.canonical.z,n.tileID.canonical.x,n.tileID.canonical.y),this.tileZoom=n.tileZoom,this.uid=n.uid,this.zoom=n.zoom,this.canonical=n.tileID.canonical,this.pixelRatio=n.pixelRatio,this.tileSize=n.tileSize,this.source=n.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=n.showCollisionBoxes,this.collectResourceTiming=!!n.collectResourceTiming,this.returnDependencies=!!n.returnDependencies,this.promoteId=n.promoteId,this.enableTerrain=!!n.enableTerrain,this.isSymbolTile=n.isSymbolTile,this.tileTransform=Xc(n.tileID.canonical,n.projection),this.projection=n.projection}parse(n,o,c,p,m){this.status="parsing",this.data=n,this.collisionBoxArray=new On;const y=new eC(Object.keys(n.layers).sort()),b=new mC(this.tileID,this.promoteId);b.bucketLayerIDs=[];const E={},A=new yC(256,256),I={featureIndex:b,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:A,availableImages:c},N=o.familiesBySource[this.source];for(const Ee in N){const we=n.layers[Ee];if(!we)continue;let Ve=!1,$e=!1;for(const We of N[Ee])We[0].type==="symbol"?Ve=!0:$e=!0;if(this.isSymbolTile===!0&&!Ve||this.isSymbolTile===!1&&!$e)continue;we.version===1&&tn(`Vector tile source "${this.source}" layer "${Ee}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const et=y.encode(Ee),ut=[];for(let We=0;We<we.length;We++){const rt=we.feature(We),it=b.getId(rt,Ee);ut.push({feature:rt,id:it,index:We,sourceLayerIndex:et})}for(const We of N[Ee]){const rt=We[0];this.isSymbolTile!==void 0&&rt.type==="symbol"!==this.isSymbolTile||rt.minzoom&&this.zoom<Math.floor(rt.minzoom)||rt.maxzoom&&this.zoom>=rt.maxzoom||rt.visibility!=="none"&&(Z_(We,this.zoom,c),(E[rt.id]=rt.createBucket({index:b.bucketLayerIDs.length,layers:We,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:et,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:c})).populate(ut,I,this.tileID.canonical,this.tileTransform),b.bucketLayerIDs.push(We.map(it=>it.id)))}}let O,j,G,X;A.trim();const te={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},ue=()=>{if(O)return m(O);if(j&&G&&X){const Ee=new _C(j),we=new CS(G,X);for(const Ve in E){const $e=E[Ve];$e instanceof Tl?(Z_($e.layers,this.zoom,c),RN($e,j,Ee.positions,G,we.iconPositions,this.showCollisionBoxes,c,this.tileID.canonical,this.tileZoom,this.projection)):$e.hasPattern&&($e instanceof Xg||$e instanceof Gg||$e instanceof Qp)&&(Z_($e.layers,this.zoom,c),$e.addFeatures(I,this.tileID.canonical,we.patternPositions,c,this.tileTransform))}this.status="done",m(null,{buckets:mt(E).filter(Ve=>!Ve.isEmpty()),featureIndex:b,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ee.image,lineAtlas:A,imageAtlas:we,glyphMap:this.returnDependencies?j:null,iconMap:this.returnDependencies?G:null,glyphPositions:this.returnDependencies?Ee.positions:null})}},xe=Rt(I.glyphDependencies,Ee=>Object.keys(Ee).map(Number));Object.keys(xe).length?p.send("getGlyphs",{uid:this.uid,stacks:xe},(Ee,we)=>{O||(O=Ee,j=we,ue())},void 0,!1,te):j={};const he=Object.keys(I.iconDependencies);he.length?p.send("getImages",{icons:he,source:this.source,tileID:this.tileID,type:"icons"},(Ee,we)=>{O||(O=Ee,G=we,ue())},void 0,!1,te):G={};const ge=Object.keys(I.patternDependencies);ge.length?p.send("getImages",{icons:ge,source:this.source,tileID:this.tileID,type:"patterns"},(Ee,we)=>{O||(O=Ee,X=we,ue())},void 0,!1,te):X={},ue()}}function Z_(i,n,o){const c=new z(n);for(const p of i)p.recalculate(c,o)}class vC{constructor(n){this.entries={},this.scheduler=n}request(n,o,c,p){const m=this.entries[n]=this.entries[n]||{callbacks:[]};if(m.result){const[y,b]=m.result;return this.scheduler?this.scheduler.add(()=>{p(y,b)},o):p(y,b),()=>{}}return m.callbacks.push(p),m.cancel||(m.cancel=c((y,b)=>{m.result=[y,b];for(const E of m.callbacks)this.scheduler?this.scheduler.add(()=>{E(y,b)},o):E(y,b);setTimeout(()=>delete this.entries[n],3e3)})),()=>{m.result||(m.callbacks=m.callbacks.filter(y=>y!==p),m.callbacks.length||(m.cancel(),delete this.entries[n]))}}}function bC(i,n,o){const c=JSON.stringify(i.request);return i.data&&(this.deduped.entries[c]={result:[null,i.data]}),this.deduped.request(c,{type:"parseTile",isSymbolTile:i.isSymbolTile,zoom:i.tileZoom},p=>{const m=Ja(i.request,(y,b,E,A)=>{y?p(y):b&&p(null,{vectorTile:o?void 0:new A_(new Jg(b)),rawData:b,cacheControl:E,expires:A})});return()=>{m.cancel(),p()}},n)}const wC=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class X_{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[o,c]=new Uint8Array(n,0,2);if(o!==219)throw new Error("Data does not appear to be in a KDBush format.");const p=c>>4;if(p!==1)throw new Error(`Got v${p} data when expected v1.`);const m=wC[15&c];if(!m)throw new Error("Unrecognized array type.");const[y]=new Uint16Array(n,2,1),[b]=new Uint32Array(n,4,1);return new X_(b,y,m,n)}constructor(n,o=64,c=Float64Array,p){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+o,2),65535),this.ArrayType=c,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const m=wC.indexOf(this.ArrayType),y=2*n*this.ArrayType.BYTES_PER_ELEMENT,b=n*this.IndexArrayType.BYTES_PER_ELEMENT,E=(8-b%8)%8;if(m<0)throw new Error(`Unexpected typed array class: ${c}.`);p&&p instanceof ArrayBuffer?(this.data=p,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+b+E,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+y+b+E),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+b+E,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+m]),new Uint16Array(this.data,2,1)[0]=o,new Uint32Array(this.data,4,1)[0]=n)}add(n,o){const c=this._pos>>1;return this.ids[c]=c,this.coords[this._pos++]=n,this.coords[this._pos++]=o,c}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return K_(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,o,c,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:y,nodeSize:b}=this,E=[0,m.length-1,0],A=[];for(;E.length;){const I=E.pop()||0,N=E.pop()||0,O=E.pop()||0;if(N-O<=b){for(let te=O;te<=N;te++){const ue=y[2*te],xe=y[2*te+1];ue>=n&&ue<=c&&xe>=o&&xe<=p&&A.push(m[te])}continue}const j=O+N>>1,G=y[2*j],X=y[2*j+1];G>=n&&G<=c&&X>=o&&X<=p&&A.push(m[j]),(I===0?n<=G:o<=X)&&(E.push(O),E.push(j-1),E.push(1-I)),(I===0?c>=G:p>=X)&&(E.push(j+1),E.push(N),E.push(1-I))}return A}within(n,o,c){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:p,coords:m,nodeSize:y}=this,b=[0,p.length-1,0],E=[],A=c*c;for(;b.length;){const I=b.pop()||0,N=b.pop()||0,O=b.pop()||0;if(N-O<=y){for(let te=O;te<=N;te++)TC(m[2*te],m[2*te+1],n,o)<=A&&E.push(p[te]);continue}const j=O+N>>1,G=m[2*j],X=m[2*j+1];TC(G,X,n,o)<=A&&E.push(p[j]),(I===0?n-c<=G:o-c<=X)&&(b.push(O),b.push(j-1),b.push(1-I)),(I===0?n+c>=G:o+c>=X)&&(b.push(j+1),b.push(N),b.push(1-I))}return E}}function K_(i,n,o,c,p,m){if(p-c<=o)return;const y=c+p>>1;EC(i,n,y,c,p,m),K_(i,n,o,c,y-1,1-m),K_(i,n,o,y+1,p,1-m)}function EC(i,n,o,c,p,m){for(;p>c;){if(p-c>600){const A=p-c+1,I=o-c+1,N=Math.log(A),O=.5*Math.exp(2*N/3),j=.5*Math.sqrt(N*O*(A-O)/A)*(I-A/2<0?-1:1);EC(i,n,o,Math.max(c,Math.floor(o-I*O/A+j)),Math.min(p,Math.floor(o+(A-I)*O/A+j)),m)}const y=n[2*o+m];let b=c,E=p;for(pf(i,n,c,o),n[2*p+m]>y&&pf(i,n,c,p);b<E;){for(pf(i,n,b,E),b++,E--;n[2*b+m]<y;)b++;for(;n[2*E+m]>y;)E--}n[2*c+m]===y?pf(i,n,c,E):(E++,pf(i,n,E,p)),E<=o&&(c=E+1),o<=E&&(p=E-1)}}function pf(i,n,o,c){Y_(i,o,c),Y_(n,2*o,2*c),Y_(n,2*o+1,2*c+1)}function Y_(i,n,o){const c=i[n];i[n]=i[o],i[o]=c}function TC(i,n,o,c){const p=i-o,m=n-c;return p*p+m*m}l.ARRAY_TYPE=io,l.AUTH_ERR_MSG=Te,l.Aabb=ki,l.Actor=class{constructor(i,n,o){this.target=i,this.parent=n,this.mapId=o,this.callbacks={},this.cancelCallbacks={},xn(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=Se()?i:_,this.scheduler=new i8}send(i,n,o,c,p=!1,m){const y=Math.round(1e18*Math.random()).toString(36).substring(0,10);o&&(o.metadata=m,this.callbacks[y]=o);const b=gt(this.globalScope)?void 0:[];return this.target.postMessage({id:y,type:i,hasCallback:!!o,targetMapId:c,mustQueue:p,sourceMapId:this.mapId,data:gl(n,b)},b),{cancel:()=>{o&&delete this.callbacks[y],this.target.postMessage({id:y,type:"<cancel>",targetMapId:c,sourceMapId:this.mapId})}}}receive(i){const n=i.data,o=n.id;if(o&&(!n.targetMapId||this.mapId===n.targetMapId))if(n.type==="<cancel>"){const c=this.cancelCallbacks[o];delete this.cancelCallbacks[o],c&&c.cancel()}else if(n.mustQueue||Se()){const c=this.callbacks[o];this.cancelCallbacks[o]=this.scheduler.add(()=>this.processTask(o,n),c&&c.metadata||{type:"message"})}else this.processTask(o,n)}processTask(i,n){if(n.type==="<response>"){const o=this.callbacks[i];delete this.callbacks[i],o&&(n.error?o(Ea(n.error)):o(null,Ea(n.data)))}else{const o=gt(this.globalScope)?void 0:[],c=n.hasCallback?(m,y)=>{delete this.cancelCallbacks[i],this.target.postMessage({id:i,type:"<response>",sourceMapId:this.mapId,error:m?gl(m):null,data:gl(y,o)},o)}:m=>{},p=Ea(n.data);if(this.parent[n.type])this.parent[n.type](n.sourceMapId,p,c);else if(this.parent.getWorkerSource){const m=n.type.split(".");this.parent.getWorkerSource(n.sourceMapId,m[0],p.source)[m[1]](p,c)}else c(new Error(`Could not find function ${n.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},l.CanonicalTileID=Zg,l.Color=xr,l.ColorMode=ta,l.CullFaceMode=ks,l.DEMData=h0,l.DataConstantProperty=Z,l.DedupedRequest=vC,l.DepthMode=wh,l.EXTENT=Zt,l.Elevation=class{isDataAvailableAtPoint(i){const n=this._source();if(this.isUsingMockSource()||!n||i.y<0||i.y>1)return!1;const o=n.getSource().maxzoom,c=1<<o,p=Math.floor(i.x),m=Math.floor((i.x-p)*c),y=Math.floor(i.y*c),b=this.findDEMTileFor(new Pi(o,p,o,m,y));return!(!b||!b.dem)}getAtPointOrZero(i,n=0){return this.getAtPoint(i,n)||0}getAtPoint(i,n,o=!0){if(this.isUsingMockSource())return null;n==null&&(n=null);const c=this._source();if(!c||i.y<0||i.y>1)return n;const p=c.getSource().maxzoom,m=1<<p,y=Math.floor(i.x),b=i.x-y,E=new Pi(p,y,p,Math.floor(b*m),Math.floor(i.y*m)),A=this.findDEMTileFor(E);if(!A||!A.dem)return n;const I=A.dem,N=1<<A.tileID.canonical.z,O=(b*N-A.tileID.canonical.x)*I.dim,j=(i.y*N-A.tileID.canonical.y)*I.dim,G=Math.floor(O),X=Math.floor(j);return(o?this.exaggeration():1)*En(En(I.get(G,X),I.get(G,X+1),j-X),En(I.get(G+1,X),I.get(G+1,X+1),j-X),O-G)}getAtTileOffset(i,n,o){const c=1<<i.canonical.z;return this.getAtPointOrZero(new lh(i.wrap+(i.canonical.x+n/Zt)/c,(i.canonical.y+o/Zt)/c))}getAtTileOffsetFunc(i,n,o,c){return p=>{const m=this.getAtTileOffset(i,p.x,p.y),y=c.upVector(i.canonical,p.x,p.y);return wo(y,y,m*c.upVectorScale(i.canonical,n,o).metersToTile),y}}getForTilePoints(i,n,o,c){if(this.isUsingMockSource())return!1;const p=d0.create(this,i,c);return!!p&&(n.forEach(m=>{m[2]=this.exaggeration()*p.getElevationAt(m[0],m[1],o)}),!0)}getMinMaxForTile(i){if(this.isUsingMockSource())return null;const n=this.findDEMTileFor(i);if(!n||!n.dem)return null;const o=n.dem.tree,c=n.tileID,p=1<<i.canonical.z-c.canonical.z;let m=i.canonical.x/p-c.canonical.x,y=i.canonical.y/p-c.canonical.y,b=0;for(let E=0;E<i.canonical.z-c.canonical.z&&!o.leaves[b];E++){m*=2,y*=2;const A=2*Math.floor(y)+Math.floor(m);b=o.childOffsets[b]+A,m%=1,y%=1}return{min:this.exaggeration()*o.minimums[b],max:this.exaggeration()*o.maximums[b]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(i,n,o){throw new Error("Pure virtual method called.")}pointCoordinate(i){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(i){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},l.ErrorEvent=ds,l.EvaluationParameters=z,l.Event=ma,l.Evented=pc,l.FillExtrusionBucket=Qp,l.Frustum=i_,l.FrustumCorners=r_,l.GLOBE_RADIUS=Xs,l.GLOBE_SCALE_MATCH_LATITUDE=45,l.GLOBE_ZOOM_THRESHOLD_MAX=ET,l.GLOBE_ZOOM_THRESHOLD_MIN=o_,l.GlobeSharedBuffers=class{constructor(i){this._createGrid(i),this._createPoles(i)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const i of this._poleSegments)i.destroy();for(const i of this._gridSegments)i.withSkirts.destroy(),i.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const i of this._wireframeSegments)i.destroy()}}_fillGridMeshWithLods(i,n){const o=new ct,c=new $t,p=[],m=i+1+2,y=n[0]+1,b=n[0]+1+(1+n.length),E=(A,I,N)=>{let O=A===m-1?A-2:A===0?A:A-1;return O+=N?24575:0,[O,I]};for(let A=0;A<m;++A)o.emplaceBack(...E(A,0,!0));for(let A=0;A<y;++A)for(let I=0;I<m;++I)o.emplaceBack(...E(I,A,(I===0||I===m-1)&&!0));for(let A=0;A<n.length;++A){const I=n[A];for(let N=0;N<m;++N)o.emplaceBack(...E(N,I,!0))}for(let A=0;A<n.length;++A){const I=c.length,N=n[A]+1+2,O=new $t;for(let X=0;X<N-1;X++){const te=X===N-2,ue=te?m*(b-n.length+A-X):m;for(let xe=0;xe<m-1;xe++){const he=X*m+xe;X===0||te||xe===0||xe===m-2?(O.emplaceBack(he+1,he,he+ue),O.emplaceBack(he+ue,he+ue+1,he+1)):(c.emplaceBack(he+1,he,he+ue),c.emplaceBack(he+ue,he+ue+1,he+1))}}const j=Cr.simpleSegment(0,I,o.length,c.length-I);for(let X=0;X<O.uint16.length;X+=3)c.emplaceBack(O.uint16[X],O.uint16[X+1],O.uint16[X+2]);const G=Cr.simpleSegment(0,I,o.length,c.length-I);p.push({withoutSkirts:j,withSkirts:G})}return{vertices:o,indices:c,segments:p}}_createGrid(i){const n=this._fillGridMeshWithLods(Gc,Vp);this._gridSegments=n.segments,this._gridBuffer=i.createVertexBuffer(n.vertices,Up.members),this._gridIndexBuffer=i.createIndexBuffer(n.indices,!0)}_createPoles(i){const n=new $t;for(let p=0;p<=Gc;p++)n.emplaceBack(0,p+1,p+2);this._poleIndexBuffer=i.createIndexBuffer(n,!0);const o=new Rn,c=new Rn;this._poleSegments=[];for(let p=0,m=0;p<o_;p++){const y=360/(1<<p);o.emplaceBack(0,-Xs,0,.5,0),c.emplaceBack(0,-Xs,0,.5,1);for(let b=0;b<=Gc;b++){const E=b/Gc,A=En(0,y,E),[I,N,O]=oh(iz,oz,A,Xs);o.emplaceBack(I,N,O,E,0),c.emplaceBack(I,N,O,E,1)}this._poleSegments.push(Cr.simpleSegment(m,0,66,64)),m+=66}this._poleNorthVertexBuffer=i.createVertexBuffer(o,bT,!1),this._poleSouthVertexBuffer=i.createVertexBuffer(c,bT,!1)}getGridBuffers(i,n){return[this._gridBuffer,this._gridIndexBuffer,n?this._gridSegments[i].withSkirts:this._gridSegments[i].withoutSkirts]}getPoleBuffers(i){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[i]]}getWirefameBuffers(i,n){if(!this._wireframeSegments){const o=new Wr,c=Gc,p=c+1+2,m=1;this._wireframeSegments=[];for(let y=0,b=0;y<Vp.length;y++){const E=Vp[y];for(let I=m;I<E+m;I++)for(let N=m;N<c+m;N++){const O=I*p+N;o.emplaceBack(O,O+1),o.emplaceBack(O,O+p),o.emplaceBack(O,O+p+1)}const A=E*c*3;this._wireframeSegments.push(Cr.simpleSegment(0,b,(E+1)*p,A)),b+=A}this._wireframeIndexBuffer=i.createIndexBuffer(o)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[n]]}},l.GlyphManager=yh,l.ImagePosition=D_,l.KDBush=X_,l.LivePerformanceUtils=Sx,l.LngLat=Bn,l.LngLatBounds=vl,l.LocalGlyphMode=L_,l.MAX_MERCATOR_LATITUDE=li,l.MercatorCoordinate=lh,l.ONE_EM=Qr,l.OverscaledTileID=Pi,l.PerformanceMarkers=Qa,l.Point=ve,l.Properties=pe,l.RGBAImage=oo,l.Ray=n_,l.RequestManager=class{constructor(i,n,o){this._transformRequestFn=i,this._customAccessToken=n,this._silenceAuthErrors=!!o,this._createSkuToken()}_createSkuToken(){const i=function(){let n="";for(let o=0;o<10;o++)n+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",F,n].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=i.token,this._skuTokenExpiresAt=i.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(i,n){return this._transformRequestFn&&this._transformRequestFn(i,n)||{url:i}}normalizeStyleURL(i,n){if(!Pe(i))return i;const o=wt(i);return o.path=`/styles/v1${o.path}`,this._makeAPIURL(o,this._customAccessToken||n)}normalizeGlyphsURL(i,n){if(!Pe(i))return i;const o=wt(i);return o.path=`/fonts/v1${o.path}`,this._makeAPIURL(o,this._customAccessToken||n)}normalizeSourceURL(i,n,o,c){if(!Pe(i))return i;const p=wt(i);return p.path=`/v4/${p.authority}.json`,p.params.push("secure"),o&&p.params.push(`language=${o}`),c&&p.params.push(`worldview=${c}`),this._makeAPIURL(p,this._customAccessToken||n)}normalizeSpriteURL(i,n,o,c){const p=wt(i);return Pe(i)?(p.path=`/styles/v1${p.path}/sprite${n}${o}`,this._makeAPIURL(p,this._customAccessToken||c)):(p.path+=`${n}${o}`,pt(p))}normalizeTileURL(i,n,o){if(this._isSkuTokenExpired()&&this._createSkuToken(),i&&!Pe(i))return i;const c=wt(i);c.path=c.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${n||o&&c.authority!=="raster"&&o===512?"@2x":""}${D.supported?".webp":"$1"}`),c.authority==="raster"?c.path=`/${k.RASTER_URL_PREFIX}${c.path}`:(c.path=c.path.replace(/^.+\/v4\//,"/"),c.path=`/${k.TILE_URL_VERSION}${c.path}`);const p=this._customAccessToken||function(m){for(const y of m){const b=y.match(/^access_token=(.*)$/);if(b)return b[1]}return null}(c.params)||k.ACCESS_TOKEN;return k.REQUIRE_ACCESS_TOKEN&&p&&this._skuToken&&c.params.push(`sku=${this._skuToken}`),this._makeAPIURL(c,p)}canonicalizeTileURL(i,n){const o=wt(i);if(!o.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!o.path.match(/\.[\w]+$/))return i;let c="mapbox://";o.path.match(/^\/raster\/v1\//)?c+=`raster/${o.path.replace(`/${k.RASTER_URL_PREFIX}/`,"")}`:c+=`tiles/${o.path.replace(`/${k.TILE_URL_VERSION}/`,"")}`;let p=o.params;return n&&(p=p.filter(m=>!m.match(/^access_token=/))),p.length&&(c+=`?${p.join("&")}`),c}canonicalizeTileset(i,n){const o=!!n&&Pe(n),c=[];for(const p of i.tiles||[])Oe(p)?c.push(this.canonicalizeTileURL(p,o)):c.push(p);return c}_makeAPIURL(i,n){const o="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",c=wt(k.API_URL);if(i.protocol=c.protocol,i.authority=c.authority,i.protocol==="http"){const p=i.params.indexOf("secure");p>=0&&i.params.splice(p,1)}if(c.path!=="/"&&(i.path=`${c.path}${i.path}`),!k.REQUIRE_ACCESS_TOKEN)return pt(i);if(n=n||k.ACCESS_TOKEN,!this._silenceAuthErrors){if(!n)throw new Error(`An API access token is required to use Mapbox GL. ${o}`);if(n[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${o}`)}return i.params=i.params.filter(p=>p.indexOf("access_token")===-1),i.params.push(`access_token=${n||""}`),pt(i)}},l.ResourceType=$o,l.SegmentVector=Cr,l.SourceCache=Kc,l.StencilMode=q_,l.StructArrayLayout1ui2=ro,l.StructArrayLayout2f1f2i16=Xt,l.StructArrayLayout2i4=ct,l.StructArrayLayout2ui4=Wr,l.StructArrayLayout3f12=pn,l.StructArrayLayout3ui6=$t,l.StructArrayLayout4i8=nt,l.StructArrayLayout5f20=Rn,l.Texture=hf,l.Tile=V_,l.Transitionable=W,l.Uniform1f=Ig,l.Uniform1i=class extends Ca{constructor(i){super(i),this.current=0}set(i,n,o){this.fetchUniformLocation(i,n)&&this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},l.Uniform2f=class extends Ca{constructor(i){super(i),this.current=[0,0]}set(i,n,o){this.fetchUniformLocation(i,n)&&(o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1])))}},l.Uniform3f=class extends Ca{constructor(i){super(i),this.current=[0,0,0]}set(i,n,o){this.fetchUniformLocation(i,n)&&(o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2])))}},l.Uniform4f=iT,l.UniformColor=oT,l.UniformMatrix2f=class extends Ca{constructor(i){super(i),this.current=UD}set(i,n,o){if(this.fetchUniformLocation(i,n)){for(let c=0;c<4;c++)if(o[c]!==this.current[c]){this.current=o,this.gl.uniformMatrix2fv(this.location,!1,o);break}}}},l.UniformMatrix3f=class extends Ca{constructor(i){super(i),this.current=jD}set(i,n,o){if(this.fetchUniformLocation(i,n)){for(let c=0;c<9;c++)if(o[c]!==this.current[c]){this.current=o,this.gl.uniformMatrix3fv(this.location,!1,o);break}}}},l.UniformMatrix4f=class extends Ca{constructor(i){super(i),this.current=$D}set(i,n,o){if(this.fetchUniformLocation(i,n)){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let c=1;c<16;c++)if(o[c]!==this.current[c]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}}},l.UnwrappedTileID=hS,l.ValidationError=Pt,l.VectorTileFeature=Hg,l.VectorTileWorkerSource=class extends pc{constructor(i,n,o,c,p){super(),this.actor=i,this.layerIndex=n,this.availableImages=o,this.loadVectorData=p||bC,this.loading={},this.loaded={},this.deduped=new vC(i.scheduler),this.isSpriteLoaded=c,this.scheduler=i.scheduler}loadTile(i,n){const o=i.uid,c=i&&i.request,p=c&&c.collectResourceTiming,m=this.loading[o]=new h8(i);m.abort=this.loadVectorData(i,(y,b)=>{const E=!this.loading[o];if(delete this.loading[o],E||y||!b)return m.status="done",E||(this.loaded[o]=m),n(y);const A=b.rawData,I={};b.expires&&(I.expires=b.expires),b.cacheControl&&(I.cacheControl=b.cacheControl),m.vectorTile=b.vectorTile||new A_(new Jg(A));const N=()=>{m.parse(m.vectorTile,this.layerIndex,this.availableImages,this.actor,(O,j)=>{if(O||!j)return n(O);const G={};if(p){const X=Bd(c);X.length>0&&(G.resourceTiming=JSON.parse(JSON.stringify(X)))}n(null,Et({rawTileData:A.slice(0)},j,I,G))})};this.isSpriteLoaded?N():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(N,{type:"parseTile",isSymbolTile:i.isSymbolTile,zoom:i.tileZoom}):N()}),this.loaded=this.loaded||{},this.loaded[o]=m})}reloadTile(i,n){const o=this.loaded,c=i.uid,p=this;if(o&&o[c]){const m=o[c];m.showCollisionBoxes=i.showCollisionBoxes,m.enableTerrain=!!i.enableTerrain,m.projection=i.projection,m.tileTransform=Xc(i.tileID.canonical,i.projection);const y=(b,E)=>{const A=m.reloadCallback;A&&(delete m.reloadCallback,m.parse(m.vectorTile,p.layerIndex,this.availableImages,p.actor,A)),n(b,E)};m.status==="parsing"?m.reloadCallback=y:m.status==="done"&&(m.vectorTile?m.parse(m.vectorTile,this.layerIndex,this.availableImages,this.actor,y):y())}}abortTile(i,n){const o=i.uid,c=this.loading[o];c&&(c.abort&&c.abort(),delete this.loading[o]),n()}removeTile(i,n){const o=this.loaded,c=i.uid;o&&o[c]&&delete o[c],n()}},l.WritingMode=To,l.ZoomDependentExpression=Ic,l.add=Ma,l.addDynamicAttributes=l0,l.adjoint=function(i,n){var o=n[0],c=n[1],p=n[2],m=n[3],y=n[4],b=n[5],E=n[6],A=n[7],I=n[8];return i[0]=y*I-b*A,i[1]=p*A-c*I,i[2]=c*b-p*y,i[3]=b*E-m*I,i[4]=o*I-p*E,i[5]=p*m-o*b,i[6]=m*A-y*E,i[7]=c*E-o*A,i[8]=o*y-c*m,i},l.asyncAll=_t,l.bezier=Ot,l.bindAll=xn,l.boundsAttributes=rC,l.bufferConvexPolygon=function(i,n){const o=[];for(let c=0;c<i.length;c++){const p=De(c-1,-1,i.length-1),m=De(c+1,-1,i.length-1),y=i[c],b=i[m],E=i[p].sub(y).unit(),A=b.sub(y).unit(),I=A.angleWithSep(E.x,E.y),N=E.add(A).unit().mult(-1*n/Math.sin(I/2));o.push(y.add(N))}return o},l.cacheEntryPossiblyAdded=function(i){pa++,pa>hr&&(i.getActor().send("enforceCacheSizeLimit",Mn),pa=0)},l.calculateGlobeLabelMatrix=function(i,n){const{x:o,y:c}=i.point,p=MT(o,c,i.worldSize/i._pixelsPerMercatorPixel,0,0);return jc(p,p,l_(Ks(n)))},l.calculateGlobeMatrix=function(i){const{x:n,y:o}=i.point,{lng:c,lat:p}=i._center;return MT(n,o,i.worldSize,c,p)},l.calculateGlobeMercatorMatrix=function(i){const n=i.pixelsPerMeter,o=n/Cs(1,i.center.lat),c=Ts(new Float64Array(16));return Fp(c,c,[i.point.x,i.point.y,0]),Uc(c,c,[o,o,n]),Float32Array.from(c)},l.circumferenceAtLatitude=u_,l.clamp=Ze,l.clearTileCache=function(i){if(!da())return;const n=_.caches.delete(Gt);i&&n.catch(i).then(()=>i())},l.clipLine=BS,l.clone=function(i){var n=new io(16);return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],n},l.clone$1=zn,l.collisionCircleLayout=cN,l.config=k,l.conjugate=function(i,n){return i[0]=-n[0],i[1]=-n[1],i[2]=-n[2],i[3]=n[3],i},l.create=function(){var i=new io(16);return io!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0),i[0]=1,i[5]=1,i[10]=1,i[15]=1,i},l.create$1=lT,l.createExpression=pl,l.createLayout=ze,l.createStyleLayer=function(i){return i.type==="custom"?new e8(i):new n8[i.type](i)},l.cross=t_,l.degToRad=Ie,l.distance=function(i,n){return Math.hypot(n[0]-i[0],n[1]-i[1],n[2]-i[2])},l.div=function(i,n,o){return i[0]=n[0]/o[0],i[1]=n[1]/o[1],i[2]=n[2]/o[2],i},l.dot=Ko,l.earthRadius=Hp,l.ease=Dt,l.easeCubicInOut=ot,l.ecefToLatLng=function([i,n,o]){const c=Math.hypot(i,n,o),p=Math.atan2(i,o),m=.5*Math.PI-Math.acos(-n/c);return new Bn(Ke(p),Ke(m))},l.emitValidationErrors=Sg,l.endsWith=Xn,l.enforceCacheSizeLimit=function(i){xo(),er&&er.then(n=>{n.keys().then(o=>{for(let c=0;c<o.length-i;c++)n.delete(o[c])})})},l.evaluateSizeForFeature=Kg,l.evaluateSizeForZoom=ph,l.evaluateVariableOffset=GS,l.evented=v,l.exactEquals=function(i,n){return i[0]===n[0]&&i[1]===n[1]&&i[2]===n[2]&&i[3]===n[3]},l.exactEquals$1=function(i,n){return i[0]===n[0]&&i[1]===n[1]&&i[2]===n[2]},l.exported=hs,l.exported$1=D,l.extend=Et,l.extend$1=ps,l.fillExtrusionHeightLift=lS,l.filterObject=Qn,l.fromMat4=function(i,n){return i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[4],i[4]=n[5],i[5]=n[6],i[6]=n[8],i[7]=n[9],i[8]=n[10],i},l.fromQuat=function(i,n){var o=n[0],c=n[1],p=n[2],m=n[3],y=o+o,b=c+c,E=p+p,A=o*y,I=c*y,N=c*b,O=p*y,j=p*b,G=p*E,X=m*y,te=m*b,ue=m*E;return i[0]=1-N-G,i[1]=I+ue,i[2]=O-te,i[3]=0,i[4]=I-ue,i[5]=1-A-G,i[6]=j+X,i[7]=0,i[8]=O+te,i[9]=j-X,i[10]=1-A-N,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i},l.fromRotation=function(i,n){var o=Math.sin(n),c=Math.cos(n);return i[0]=c,i[1]=o,i[2]=0,i[3]=-o,i[4]=c,i[5]=0,i[6]=0,i[7]=0,i[8]=1,i},l.fromScaling=uT,l.furthestTileCorner=function(i){const n=Math.round((i+45+360)%360/90)%4;return bt[n]},l.getAABBPointSquareDist=function(i,n,o){let c=0;for(let p=0;p<2;++p){const m=o?o[p]:0;i[p]>m&&(c+=(i[p]-m)*(i[p]-m)),n[p]<m&&(c+=(m-n[p])*(m-n[p]))}return c},l.getAnchorAlignment=N_,l.getAnchorJustification=R_,l.getBounds=function(i){let n=1/0,o=1/0,c=-1/0,p=-1/0;for(const m of i)n=Math.min(n,m.x),o=Math.min(o,m.y),c=Math.max(c,m.x),p=Math.max(p,m.y);return{min:new ve(n,o),max:new ve(c,p)}},l.getColumn=vt,l.getDefaultExportFromCjs=V,l.getGridMatrix=function(i,n,o,c){const p=n.getNorth(),m=n.getSouth(),y=n.getWest(),b=n.getEast(),E=1<<i.z,A=b-y,I=p-m,N=A/Gc,O=-I/Vp[o],j=[0,N,0,O,0,0,p,y,0];if(i.z>0){const G=180/c;cT(j,j,[G/A+1,0,0,0,G/I+1,0,-.5*G/N,.5*G/O,1])}return j[2]=E,j[5]=i.x,j[8]=i.y,j},l.getImage=me,l.getJSON=function(i,n){return fa(Et(i,{type:"json"}),n)},l.getLatitudinalLod=function(i){const n=li-5;i=Ze(i,-n,n)/n*90;const o=Math.pow(Math.abs(Math.sin(Ie(i))),3);return Math.round(o*(Vp.length-1))},l.getMapSessionAPI=Gr,l.getPerformanceMeasurement=Bd,l.getProjection=JS,l.getRTLTextPluginStatus=w,l.getReferrer=Uo,l.getTilePoint=function(i,{x:n,y:o},c=0){return new ve(((n-c)*i.scale-i.x)*Zt,(o*i.scale-i.y)*Zt)},l.getTileVec3=function(i,n,o=0){return ih(((n.x-o)*i.scale-i.x)*Zt,(n.y*i.scale-i.y)*Zt,DT(n.z,n.y))},l.getVideo=function(i,n){const o=_.document.createElement("video");o.muted=!0,o.onloadstart=function(){n(null,o)};for(let c=0;c<i.length;c++){const p=_.document.createElement("source");Cu(i[c])||(o.crossOrigin="Anonymous"),p.src=i[c],o.appendChild(p)}return{cancel:()=>{}}},l.globeCenterToScreenPoint=function(i){const n=[0,0,0],o=Ts(new Float64Array(16));return jc(o,i.pixelMatrix,i.globeMatrix),_r(n,n,o),new ve(n[0],n[1])},l.globeDenormalizeECEF=l_,l.globeECEFOrigin=function(i,n){const o=[0,0,0];return _r(o,o,qp(Ks(n.canonical))),_r(o,o,i),o},l.globeMetersToEcef=Ng,l.globeNormalizeECEF=qp,l.globePixelsToTileUnits=function(i,n){return Zt/(512*Math.pow(2,i))*Fg(Ks(n))},l.globePoleMatrixForTile=function(i,n,o){const c=Ts(new Float64Array(16)),p=(n/(1<<i)-.5)*Math.PI*2;return zg(c,o.globeMatrix,p),Float32Array.from(c)},l.globeTileBounds=Ks,l.globeTiltAtLngLat=kT,l.globeToMercatorTransition=ah,l.globeUseCustomAntiAliasing=function(i,n,o){const c=ah(o.zoom),p=i.style.map._antialias,m=!!n.extStandardDerivatives,y=n.extStandardDerivativesForceOff||i.terrain&&i.terrain.exaggeration()>0;return c===0&&!p&&!y&&m},l.identity=Ts,l.identity$1=xT,l.invert=Yx,l.isFullscreen=function(){return!!_.document.fullscreenElement||!!_.document.webkitFullscreenElement},l.isLngLatBehindGlobe=c_,l.isMapAuthenticated=function(i){return yi.has(i)},l.isMapboxURL=Pe,l.isSafariWithAntialiasingBug=function(i){const n=i.navigator?i.navigator.userAgent:null;return!!gt(i)&&n&&(n.match("Version/15.4")||n.match("Version/15.5")||n.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},l.latFromMercatorY=ai,l.latLngToECEF=sh,l.len=YD,l.length=Rp,l.length$1=function(i){return Math.hypot(i[0],i[1],i[2],i[3])},l.lngFromMercatorX=Eo,l.loadVectorTile=bC,l.makeRequest=fa,l.mapValue=function(i,n,o,c,p){return Ze((i-n)/(o-n)*(p-c)+c,c,p)},l.mercatorScale=zT,l.mercatorXfromLng=Ys,l.mercatorYfromLat=Js,l.mercatorZfromAltitude=Cs,l.mul=XD,l.mul$1=KD,l.multiply=jc,l.multiply$1=cT,l.multiply$2=pT,l.nextPowerOfTwo=vn,l.normalize=Mi,l.normalize$1=JD,l.normalize$2=gT,l.number=En,l.ortho=function(i,n,o,c,p,m,y){var b=1/(n-o),E=1/(c-p),A=1/(m-y);return i[0]=-2*b,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*E,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2*A,i[11]=0,i[12]=(n+o)*b,i[13]=(p+c)*E,i[14]=(y+m)*A,i[15]=1,i},l.pbf=xS,l.perspective=function(i,n,o,c,p){var m,y=1/Math.tan(n/2);return i[0]=y/o,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=y,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=-1,i[12]=0,i[13]=0,i[15]=0,p!=null&&p!==1/0?(i[10]=(p+c)*(m=1/(c-p)),i[14]=2*p*c*m):(i[10]=-1,i[14]=-2*c),i},l.pick=function(i,n){const o={};for(let c=0;c<n.length;c++){const p=n[c];p in i&&(o[p]=i[p])}return o},l.plugin=P,l.pointGeometry=be,l.polesInViewport=function(i){const n=Ts(new Float64Array(16));jc(n,i.pixelMatrix,i.globeMatrix);const o=[0,Yo,0],c=[0,Jo,0];return _r(o,o,n),_r(c,c,n),[o[0]>0&&o[0]<=i.width&&o[1]>0&&o[1]<=i.height&&!c_(i,new Bn(i.center.lat,90)),c[0]>0&&c[0]<=i.width&&c[1]>0&&c[1]<=i.height&&!c_(i,new Bn(i.center.lat,-90))]},l.polygonContainsPoint=Wc,l.polygonIntersectsBox=$T,l.polygonIntersectsPolygon=FT,l.polygonizeBounds=function(i,n,o=0,c=!0){const p=new ve(o,o),m=i.sub(p),y=n.add(p),b=[m,new ve(y.x,m.y),y,new ve(m.x,y.y)];return c&&b.push(m.clone()),b},l.posAttributes=Up,l.postMapLoadEvent=Er,l.postPerformanceEvent=Rr,l.postTurnstileEvent=bn,l.potpack=I_,l.prevPowerOfTwo=function(i){return i<=1?1:Math.pow(2,Math.floor(Math.log(i)/Math.LN2))},l.radToDeg=Ke,l.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],l.registerForPluginStateChange=function(i){return i({pluginStatus:f,pluginURL:a}),v.on("pluginStateChange",i),i},l.removeAuthState=function(i){yi.delete(i)},l.renderColorRamp=x_,l.resample=NT,l.rotateX=Jx,l.rotateX$1=_T,l.rotateY=zg,l.rotateY$1=vT,l.rotateZ=function(i,n,o){var c=Math.sin(o),p=Math.cos(o),m=n[0],y=n[1],b=n[2],E=n[3],A=n[4],I=n[5],N=n[6],O=n[7];return n!==i&&(i[8]=n[8],i[9]=n[9],i[10]=n[10],i[11]=n[11],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15]),i[0]=m*p+A*c,i[1]=y*p+I*c,i[2]=b*p+N*c,i[3]=E*p+O*c,i[4]=A*p-m*c,i[5]=I*p-y*c,i[6]=N*p-b*c,i[7]=O*p-E*c,i},l.rotateZ$1=function(i,n,o){o*=.5;var c=n[0],p=n[1],m=n[2],y=n[3],b=Math.sin(o),E=Math.cos(o);return i[0]=c*E+p*b,i[1]=p*E-c*b,i[2]=m*E+y*b,i[3]=y*E-m*b,i},l.scale=Uc,l.scale$1=mT,l.scale$2=wo,l.scaleAndAdd=$p,l.set=function(i,n,o,c){return i[0]=n,i[1]=o,i[2]=c,i},l.setCacheLimits=function(i,n){Mn=i,hr=n},l.setColumn=function(i,n,o){i[4*n+0]=o[0],i[4*n+1]=o[1],i[4*n+2]=o[2],i[4*n+3]=o[3]},l.setRTLTextPlugin=function(i,n,o=!1){if(f===Ip||f===Dp||f===zp)throw new Error("setRTLTextPlugin cannot be called multiple times.");a=hs.resolveURL(i),f=Ip,yl=n,g(),o||M()},l.smoothstep=Ye,l.spec=Qe,l.squaredLength=function(i){var n=i[0],o=i[1],c=i[2];return n*n+o*o+c*c},l.storeAuthState=function(i,n){n?yi.add(i):yi.delete(i)},l.sub=Ss,l.subtract=e_,l.symbolSize=uN,l.tileAABB=function(i,n,o,c,p,m,y,b,E){if(E.name==="globe")return rz(i,n,new Zg(o,c,p));const A=Xc({z:o,x:c,y:p},E);return new ki([(m+A.x/A.scale)*n,n*(A.y/A.scale),y],[(m+A.x2/A.scale)*n,n*(A.y2/A.scale),b])},l.tileCornersToBounds=Lg,l.tileTransform=Xc,l.transformMat3=function(i,n,o){var c=n[0],p=n[1],m=n[2];return i[0]=c*o[0]+p*o[3]+m*o[6],i[1]=c*o[1]+p*o[4]+m*o[7],i[2]=c*o[2]+p*o[5]+m*o[8],i},l.transformMat4=_r,l.transformMat4$1=Vc,l.transformQuat=fT,l.transitionTileAABBinECEF=ST,l.translate=Fp,l.transpose=function(i,n){if(i===n){var o=n[1],c=n[2],p=n[5];i[1]=n[3],i[2]=n[6],i[3]=o,i[5]=n[7],i[6]=c,i[7]=p}else i[0]=n[0],i[1]=n[3],i[2]=n[6],i[3]=n[1],i[4]=n[4],i[5]=n[7],i[6]=n[2],i[7]=n[5],i[8]=n[8];return i},l.triggerPluginCompletionEvent=h,l.uniqueId=en,l.updateGlobeVertexNormal=function(i,n,o,c,p){const m=5*n+2;i.float32[m+0]=o,i.float32[m+1]=c,i.float32[m+2]=p},l.validateCustomStyleLayer=function(i){const n=[],o=i.id;return o===void 0&&n.push({message:`layers.${o}: missing required property "id"`}),i.render===void 0&&n.push({message:`layers.${o}: missing required method "render"`}),i.renderingMode&&i.renderingMode!=="2d"&&i.renderingMode!=="3d"&&n.push({message:`layers.${o}: property "renderingMode" must be either "2d" or "3d"`}),n},l.validateFilter=i=>no(Fc(i)),l.validateFog=i=>no(wg(i)),l.validateLayer=i=>no(xg(i)),l.validateLight=i=>no(bg(i)),l.validateSource=i=>no(vg(i)),l.validateStyle=Tg,l.validateTerrain=i=>no(Cp(i)),l.values=mt,l.vectorTile=qg,l.version=S,l.warnOnce=tn,l.window=_,l.wrap=De}),d(["./shared"],function(l){function _(ye){if(typeof ye=="number"||typeof ye=="boolean"||typeof ye=="string"||ye==null)return JSON.stringify(ye);if(Array.isArray(ye)){let Q="[";for(const me of ye)Q+=`${_(me)},`;return`${Q}]`}let Y="{";for(const Q of Object.keys(ye).sort())Y+=`${Q}:${_(ye[Q])},`;return`${Y}}`}function S(ye){let Y="";for(const Q of l.refProperties)Y+=`/${_(ye[Q])}`;return Y}class C{constructor(Y){this.keyCache={},Y&&this.replace(Y)}replace(Y){this._layerConfigs={},this._layers={},this.update(Y,[])}update(Y,Q){for(const Te of Y)this._layerConfigs[Te.id]=Te,(this._layers[Te.id]=l.createStyleLayer(Te)).compileFilter(),this.keyCache[Te.id]&&delete this.keyCache[Te.id];for(const Te of Q)delete this.keyCache[Te],delete this._layerConfigs[Te],delete this._layers[Te];this.familiesBySource={};const me=function(Te,Pe){const Oe={};for(let ke=0;ke<Te.length;ke++){const qe=Pe&&Pe[Te[ke].id]||S(Te[ke]);Pe&&(Pe[Te[ke].id]=qe);let xt=Oe[qe];xt||(xt=Oe[qe]=[]),xt.push(Te[ke])}const Re=[];for(const ke in Oe)Re.push(Oe[ke]);return Re}(l.values(this._layerConfigs),this.keyCache);for(const Te of me){const Pe=Te.map(wt=>this._layers[wt.id]),Oe=Pe[0];if(Oe.visibility==="none")continue;const Re=Oe.source||"";let ke=this.familiesBySource[Re];ke||(ke=this.familiesBySource[Re]={});const qe=Oe.sourceLayer||"_geojsonTileLayer";let xt=ke[qe];xt||(xt=ke[qe]=[]),xt.push(Pe)}}}class k{loadTile(Y,Q){const{uid:me,encoding:Te,rawImageData:Pe,padding:Oe,buildQuadTree:Re}=Y,ke=l.window.ImageBitmap&&Pe instanceof l.window.ImageBitmap?this.getImageData(Pe,Oe):Pe;Q(null,new l.DEMData(me,ke,Te,Oe<1,Re))}getImageData(Y,Q){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Y.width,Y.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=Y.width,this.offscreenCanvas.height=Y.height,this.offscreenCanvasContext.drawImage(Y,0,0,Y.width,Y.height);const me=this.offscreenCanvasContext.getImageData(-Q,-Q,Y.width+2*Q,Y.height+2*Q);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),me}}function D(ye,Y){if(ye.length!==0){U(ye[0],Y);for(var Q=1;Q<ye.length;Q++)U(ye[Q],!Y)}}function U(ye,Y){for(var Q=0,me=0,Te=0,Pe=ye.length,Oe=Pe-1;Te<Pe;Oe=Te++){var Re=(ye[Te][0]-ye[Oe][0])*(ye[Oe][1]+ye[Te][1]),ke=Q+Re;me+=Math.abs(Q)>=Math.abs(Re)?Q-ke+Re:Re-ke+Q,Q=ke}Q+me>=0!=!!Y&&ye.reverse()}var q=l.getDefaultExportFromCjs(function ye(Y,Q){var me,Te=Y&&Y.type;if(Te==="FeatureCollection")for(me=0;me<Y.features.length;me++)ye(Y.features[me],Q);else if(Te==="GeometryCollection")for(me=0;me<Y.geometries.length;me++)ye(Y.geometries[me],Q);else if(Te==="Feature")ye(Y.geometry,Q);else if(Te==="Polygon")D(Y.coordinates,Q);else if(Te==="MultiPolygon")for(me=0;me<Y.coordinates.length;me++)D(Y.coordinates[me],Q);return Y});const L=l.VectorTileFeature.prototype.toGeoJSON;var K={exports:{}},R=l.pointGeometry,F=l.vectorTile.VectorTileFeature,V=J;function J(ye,Y){this.options=Y||{},this.features=ye,this.length=ye.length}function re(ye,Y){this.id=typeof ye.id=="number"?ye.id:void 0,this.type=ye.type,this.rawGeometry=ye.type===1?[ye.geometry]:ye.geometry,this.properties=ye.tags,this.extent=Y||4096}J.prototype.feature=function(ye){return new re(this.features[ye],this.options.extent)},re.prototype.loadGeometry=function(){var ye=this.rawGeometry;this.geometry=[];for(var Y=0;Y<ye.length;Y++){for(var Q=ye[Y],me=[],Te=0;Te<Q.length;Te++)me.push(new R(Q[Te][0],Q[Te][1]));this.geometry.push(me)}return this.geometry},re.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ye=this.geometry,Y=1/0,Q=-1/0,me=1/0,Te=-1/0,Pe=0;Pe<ye.length;Pe++)for(var Oe=ye[Pe],Re=0;Re<Oe.length;Re++){var ke=Oe[Re];Y=Math.min(Y,ke.x),Q=Math.max(Q,ke.x),me=Math.min(me,ke.y),Te=Math.max(Te,ke.y)}return[Y,me,Q,Te]},re.prototype.toGeoJSON=F.prototype.toGeoJSON;var fe=l.pbf,be=V;function ce(ye){var Y=new fe;return function(Q,me){for(var Te in Q.layers)me.writeMessage(3,ve,Q.layers[Te])}(ye,Y),Y.finish()}function ve(ye,Y){var Q;Y.writeVarintField(15,ye.version||1),Y.writeStringField(1,ye.name||""),Y.writeVarintField(5,ye.extent||4096);var me={keys:[],values:[],keycache:{},valuecache:{}};for(Q=0;Q<ye.length;Q++)me.feature=ye.feature(Q),Y.writeMessage(2,Fe,me);var Te=me.keys;for(Q=0;Q<Te.length;Q++)Y.writeStringField(3,Te[Q]);var Pe=me.values;for(Q=0;Q<Pe.length;Q++)Y.writeMessage(4,ot,Pe[Q])}function Fe(ye,Y){var Q=ye.feature;Q.id!==void 0&&Y.writeVarintField(1,Q.id),Y.writeMessage(2,Le,ye),Y.writeVarintField(3,Q.type),Y.writeMessage(4,bt,Q)}function Le(ye,Y){var Q=ye.feature,me=ye.keys,Te=ye.values,Pe=ye.keycache,Oe=ye.valuecache;for(var Re in Q.properties){var ke=Q.properties[Re],qe=Pe[Re];if(ke!==null){qe===void 0&&(me.push(Re),Pe[Re]=qe=me.length-1),Y.writeVarint(qe);var xt=typeof ke;xt!=="string"&&xt!=="boolean"&&xt!=="number"&&(ke=JSON.stringify(ke));var wt=xt+":"+ke,pt=Oe[wt];pt===void 0&&(Te.push(ke),Oe[wt]=pt=Te.length-1),Y.writeVarint(pt)}}}function Ie(ye,Y){return(Y<<3)+(7&ye)}function Ke(ye){return ye<<1^ye>>31}function bt(ye,Y){for(var Q=ye.loadGeometry(),me=ye.type,Te=0,Pe=0,Oe=Q.length,Re=0;Re<Oe;Re++){var ke=Q[Re],qe=1;me===1&&(qe=ke.length),Y.writeVarint(Ie(1,qe));for(var xt=me===3?ke.length-1:ke.length,wt=0;wt<xt;wt++){wt===1&&me!==1&&Y.writeVarint(Ie(2,xt-1));var pt=ke[wt].x-Te,an=ke[wt].y-Pe;Y.writeVarint(Ke(pt)),Y.writeVarint(Ke(an)),Te+=pt,Pe+=an}me===3&&Y.writeVarint(Ie(7,1))}}function ot(ye,Y){var Q=typeof ye;Q==="string"?Y.writeStringField(1,ye):Q==="boolean"?Y.writeBooleanField(7,ye):Q==="number"&&(ye%1!=0?Y.writeDoubleField(3,ye):ye<0?Y.writeSVarintField(6,ye):Y.writeVarintField(5,ye))}K.exports=ce,K.exports.fromVectorTileJs=ce,K.exports.fromGeojsonVt=function(ye,Y){Y=Y||{};var Q={};for(var me in ye)Q[me]=new be(ye[me].features,Y),Q[me].name=me,Q[me].version=Y.version,Q[me].extent=Y.extent;return ce({layers:Q})},K.exports.GeoJSONWrapper=be;var Ot=l.getDefaultExportFromCjs(K.exports);const Dt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ye=>ye},Ze=Math.fround||(Ye=new Float32Array(1),ye=>(Ye[0]=+ye,Ye[0]));var Ye;const De=3,_t=5,mt=6;class Et{constructor(Y){this.options=Object.assign(Object.create(Dt),Y),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(Y){const{log:Q,minZoom:me,maxZoom:Te}=this.options;Q&&console.time("total time");const Pe=`prepare ${Y.length} points`;Q&&console.time(Pe),this.points=Y;const Oe=[];for(let ke=0;ke<Y.length;ke++){const qe=Y[ke];if(!qe.geometry)continue;const[xt,wt]=qe.geometry.coordinates,pt=Ze(nn(xt)),an=Ze(vn(wt));Oe.push(pt,an,1/0,ke,-1,1),this.options.reduce&&Oe.push(0)}let Re=this.trees[Te+1]=this._createTree(Oe);Q&&console.timeEnd(Pe);for(let ke=Te;ke>=me;ke--){const qe=+Date.now();Re=this.trees[ke]=this._createTree(this._cluster(Re,ke)),Q&&console.log("z%d: %d clusters in %dms",ke,Re.numItems,+Date.now()-qe)}return Q&&console.timeEnd("total time"),this}getClusters(Y,Q){let me=((Y[0]+180)%360+360)%360-180;const Te=Math.max(-90,Math.min(90,Y[1]));let Pe=Y[2]===180?180:((Y[2]+180)%360+360)%360-180;const Oe=Math.max(-90,Math.min(90,Y[3]));if(Y[2]-Y[0]>=360)me=-180,Pe=180;else if(me>Pe){const wt=this.getClusters([me,Te,180,Oe],Q),pt=this.getClusters([-180,Te,Pe,Oe],Q);return wt.concat(pt)}const Re=this.trees[this._limitZoom(Q)],ke=Re.range(nn(me),vn(Oe),nn(Pe),vn(Te)),qe=Re.data,xt=[];for(const wt of ke){const pt=this.stride*wt;xt.push(qe[pt+_t]>1?jt(qe,pt,this.clusterProps):this.points[qe[pt+De]])}return xt}getChildren(Y){const Q=this._getOriginId(Y),me=this._getOriginZoom(Y),Te="No cluster with the specified id.",Pe=this.trees[me];if(!Pe)throw new Error(Te);const Oe=Pe.data;if(Q*this.stride>=Oe.length)throw new Error(Te);const Re=this.options.radius/(this.options.extent*Math.pow(2,me-1)),ke=Pe.within(Oe[Q*this.stride],Oe[Q*this.stride+1],Re),qe=[];for(const xt of ke){const wt=xt*this.stride;Oe[wt+4]===Y&&qe.push(Oe[wt+_t]>1?jt(Oe,wt,this.clusterProps):this.points[Oe[wt+De]])}if(qe.length===0)throw new Error(Te);return qe}getLeaves(Y,Q,me){const Te=[];return this._appendLeaves(Te,Y,Q=Q||10,me=me||0,0),Te}getTile(Y,Q,me){const Te=this.trees[this._limitZoom(Y)],Pe=Math.pow(2,Y),{extent:Oe,radius:Re}=this.options,ke=Re/Oe,qe=(me-ke)/Pe,xt=(me+1+ke)/Pe,wt={features:[]};return this._addTileFeatures(Te.range((Q-ke)/Pe,qe,(Q+1+ke)/Pe,xt),Te.data,Q,me,Pe,wt),Q===0&&this._addTileFeatures(Te.range(1-ke/Pe,qe,1,xt),Te.data,Pe,me,Pe,wt),Q===Pe-1&&this._addTileFeatures(Te.range(0,qe,ke/Pe,xt),Te.data,-1,me,Pe,wt),wt.features.length?wt:null}getClusterExpansionZoom(Y){let Q=this._getOriginZoom(Y)-1;for(;Q<=this.options.maxZoom;){const me=this.getChildren(Y);if(Q++,me.length!==1)break;Y=me[0].properties.cluster_id}return Q}_appendLeaves(Y,Q,me,Te,Pe){const Oe=this.getChildren(Q);for(const Re of Oe){const ke=Re.properties;if(ke&&ke.cluster?Pe+ke.point_count<=Te?Pe+=ke.point_count:Pe=this._appendLeaves(Y,ke.cluster_id,me,Te,Pe):Pe<Te?Pe++:Y.push(Re),Y.length===me)break}return Pe}_createTree(Y){const Q=new l.KDBush(Y.length/this.stride|0,this.options.nodeSize,Float32Array);for(let me=0;me<Y.length;me+=this.stride)Q.add(Y[me],Y[me+1]);return Q.finish(),Q.data=Y,Q}_addTileFeatures(Y,Q,me,Te,Pe,Oe){for(const Re of Y){const ke=Re*this.stride,qe=Q[ke+_t]>1;let xt,wt,pt;if(qe)xt=en(Q,ke,this.clusterProps),wt=Q[ke],pt=Q[ke+1];else{const ln=this.points[Q[ke+De]];xt=ln.properties;const[dn,bn]=ln.geometry.coordinates;wt=nn(dn),pt=vn(bn)}const an={type:1,geometry:[[Math.round(this.options.extent*(wt*Pe-me)),Math.round(this.options.extent*(pt*Pe-Te))]],tags:xt};let hn;hn=qe||this.options.generateId?Q[ke+De]:this.points[Q[ke+De]].id,hn!==void 0&&(an.id=hn),Oe.features.push(an)}}_limitZoom(Y){return Math.max(this.options.minZoom,Math.min(Math.floor(+Y),this.options.maxZoom+1))}_cluster(Y,Q){const{radius:me,extent:Te,reduce:Pe,minPoints:Oe}=this.options,Re=me/(Te*Math.pow(2,Q)),ke=Y.data,qe=[],xt=this.stride;for(let wt=0;wt<ke.length;wt+=xt){if(ke[wt+2]<=Q)continue;ke[wt+2]=Q;const pt=ke[wt],an=ke[wt+1],hn=Y.within(ke[wt],ke[wt+1],Re),ln=ke[wt+_t];let dn=ln;for(const bn of hn){const or=bn*xt;ke[or+2]>Q&&(dn+=ke[or+_t])}if(dn>ln&&dn>=Oe){let bn,or=pt*ln,Er=an*ln,ii=-1;const Rr=((wt/xt|0)<<5)+(Q+1)+this.points.length;for(const Vo of hn){const Gr=Vo*xt;if(ke[Gr+2]<=Q)continue;ke[Gr+2]=Q;const yi=ke[Gr+_t];or+=ke[Gr]*yi,Er+=ke[Gr+1]*yi,ke[Gr+4]=Rr,Pe&&(bn||(bn=this._map(ke,wt,!0),ii=this.clusterProps.length,this.clusterProps.push(bn)),Pe(bn,this._map(ke,Gr)))}ke[wt+4]=Rr,qe.push(or/dn,Er/dn,1/0,Rr,-1,dn),Pe&&qe.push(ii)}else{for(let bn=0;bn<xt;bn++)qe.push(ke[wt+bn]);if(dn>1)for(const bn of hn){const or=bn*xt;if(!(ke[or+2]<=Q)){ke[or+2]=Q;for(let Er=0;Er<xt;Er++)qe.push(ke[or+Er])}}}}return qe}_getOriginId(Y){return Y-this.points.length>>5}_getOriginZoom(Y){return(Y-this.points.length)%32}_map(Y,Q,me){if(Y[Q+_t]>1){const Oe=this.clusterProps[Y[Q+mt]];return me?Object.assign({},Oe):Oe}const Te=this.points[Y[Q+De]].properties,Pe=this.options.map(Te);return me&&Pe===Te?Object.assign({},Pe):Pe}}function jt(ye,Y,Q){return{type:"Feature",id:ye[Y+De],properties:en(ye,Y,Q),geometry:{type:"Point",coordinates:[(me=ye[Y],360*(me-.5)),Bt(ye[Y+1])]}};var me}function en(ye,Y,Q){const me=ye[Y+_t],Te=me>=1e4?`${Math.round(me/1e3)}k`:me>=1e3?Math.round(me/100)/10+"k":me,Pe=ye[Y+mt],Oe=Pe===-1?{}:Object.assign({},Q[Pe]);return Object.assign(Oe,{cluster:!0,cluster_id:ye[Y+De],point_count:me,point_count_abbreviated:Te})}function nn(ye){return ye/360+.5}function vn(ye){const Y=Math.sin(ye*Math.PI/180),Q=.5-.25*Math.log((1+Y)/(1-Y))/Math.PI;return Q<0?0:Q>1?1:Q}function Bt(ye){const Y=(180-360*ye)*Math.PI/180;return 360*Math.atan(Math.exp(Y))/Math.PI-90}function xn(ye,Y,Q,me){for(var Te,Pe=me,Oe=Q-Y>>1,Re=Q-Y,ke=ye[Y],qe=ye[Y+1],xt=ye[Q],wt=ye[Q+1],pt=Y+3;pt<Q;pt+=3){var an=Xn(ye[pt],ye[pt+1],ke,qe,xt,wt);if(an>Pe)Te=pt,Pe=an;else if(an===Pe){var hn=Math.abs(pt-Oe);hn<Re&&(Te=pt,Re=hn)}}Pe>me&&(Te-Y>3&&xn(ye,Y,Te,me),ye[Te+2]=Pe,Q-Te>3&&xn(ye,Te,Q,me))}function Xn(ye,Y,Q,me,Te,Pe){var Oe=Te-Q,Re=Pe-me;if(Oe!==0||Re!==0){var ke=((ye-Q)*Oe+(Y-me)*Re)/(Oe*Oe+Re*Re);ke>1?(Q=Te,me=Pe):ke>0&&(Q+=Oe*ke,me+=Re*ke)}return(Oe=ye-Q)*Oe+(Re=Y-me)*Re}function Rt(ye,Y,Q,me){var Te={id:ye===void 0?null:ye,type:Y,geometry:Q,tags:me,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Pe){var Oe=Pe.geometry,Re=Pe.type;if(Re==="Point"||Re==="MultiPoint"||Re==="LineString")Qn(Pe,Oe);else if(Re==="Polygon"||Re==="MultiLineString")for(var ke=0;ke<Oe.length;ke++)Qn(Pe,Oe[ke]);else if(Re==="MultiPolygon")for(ke=0;ke<Oe.length;ke++)for(var qe=0;qe<Oe[ke].length;qe++)Qn(Pe,Oe[ke][qe])}(Te),Te}function Qn(ye,Y){for(var Q=0;Q<Y.length;Q+=3)ye.minX=Math.min(ye.minX,Y[Q]),ye.minY=Math.min(ye.minY,Y[Q+1]),ye.maxX=Math.max(ye.maxX,Y[Q]),ye.maxY=Math.max(ye.maxY,Y[Q+1])}function zn(ye,Y,Q,me){if(Y.geometry){var Te=Y.geometry.coordinates,Pe=Y.geometry.type,Oe=Math.pow(Q.tolerance/((1<<Q.maxZoom)*Q.extent),2),Re=[],ke=Y.id;if(Q.promoteId?ke=Y.properties[Q.promoteId]:Q.generateId&&(ke=me||0),Pe==="Point")Fr(Te,Re);else if(Pe==="MultiPoint")for(var qe=0;qe<Te.length;qe++)Fr(Te[qe],Re);else if(Pe==="LineString")tn(Te,Re,Oe,!1);else if(Pe==="MultiLineString"){if(Q.lineMetrics){for(qe=0;qe<Te.length;qe++)tn(Te[qe],Re=[],Oe,!1),ye.push(Rt(ke,"LineString",Re,Y.properties));return}Wn(Te,Re,Oe,!1)}else if(Pe==="Polygon")Wn(Te,Re,Oe,!0);else{if(Pe!=="MultiPolygon"){if(Pe==="GeometryCollection"){for(qe=0;qe<Y.geometry.geometries.length;qe++)zn(ye,{id:ke,geometry:Y.geometry.geometries[qe],properties:Y.properties},Q,me);return}throw new Error("Input data is not a valid GeoJSON object.")}for(qe=0;qe<Te.length;qe++){var xt=[];Wn(Te[qe],xt,Oe,!0),Re.push(xt)}}ye.push(Rt(ke,Pe,Re,Y.properties))}}function Fr(ye,Y){Y.push(wr(ye[0])),Y.push(Se(ye[1])),Y.push(0)}function tn(ye,Y,Q,me){for(var Te,Pe,Oe=0,Re=0;Re<ye.length;Re++){var ke=wr(ye[Re][0]),qe=Se(ye[Re][1]);Y.push(ke),Y.push(qe),Y.push(0),Re>0&&(Oe+=me?(Te*qe-ke*Pe)/2:Math.sqrt(Math.pow(ke-Te,2)+Math.pow(qe-Pe,2))),Te=ke,Pe=qe}var xt=Y.length-3;Y[2]=1,xn(Y,0,xt,Q),Y[xt+2]=1,Y.size=Math.abs(Oe),Y.start=0,Y.end=Y.size}function Wn(ye,Y,Q,me){for(var Te=0;Te<ye.length;Te++){var Pe=[];tn(ye[Te],Pe,Q,me),Y.push(Pe)}}function wr(ye){return ye/360+.5}function Se(ye){var Y=Math.sin(ye*Math.PI/180),Q=.5-.25*Math.log((1+Y)/(1-Y))/Math.PI;return Q<0?0:Q>1?1:Q}function Ge(ye,Y,Q,me,Te,Pe,Oe,Re){if(me/=Y,Pe>=(Q/=Y)&&Oe<me)return ye;if(Oe<Q||Pe>=me)return null;for(var ke=[],qe=0;qe<ye.length;qe++){var xt=ye[qe],wt=xt.geometry,pt=xt.type,an=Te===0?xt.minX:xt.minY,hn=Te===0?xt.maxX:xt.maxY;if(an>=Q&&hn<me)ke.push(xt);else if(!(hn<Q||an>=me)){var ln=[];if(pt==="Point"||pt==="MultiPoint")Xe(wt,ln,Q,me,Te);else if(pt==="LineString")gt(wt,ln,Q,me,Te,!1,Re.lineMetrics);else if(pt==="MultiLineString")vt(wt,ln,Q,me,Te,!1);else if(pt==="Polygon")vt(wt,ln,Q,me,Te,!0);else if(pt==="MultiPolygon")for(var dn=0;dn<wt.length;dn++){var bn=[];vt(wt[dn],bn,Q,me,Te,!0),bn.length&&ln.push(bn)}if(ln.length){if(Re.lineMetrics&&pt==="LineString"){for(dn=0;dn<ln.length;dn++)ke.push(Rt(xt.id,pt,ln[dn],xt.tags));continue}pt!=="LineString"&&pt!=="MultiLineString"||(ln.length===1?(pt="LineString",ln=ln[0]):pt="MultiLineString"),pt!=="Point"&&pt!=="MultiPoint"||(pt=ln.length===3?"Point":"MultiPoint"),ke.push(Rt(xt.id,pt,ln,xt.tags))}}}return ke.length?ke:null}function Xe(ye,Y,Q,me,Te){for(var Pe=0;Pe<ye.length;Pe+=3){var Oe=ye[Pe+Te];Oe>=Q&&Oe<=me&&(Y.push(ye[Pe]),Y.push(ye[Pe+1]),Y.push(ye[Pe+2]))}}function gt(ye,Y,Q,me,Te,Pe,Oe){for(var Re,ke,qe=Tt(ye),xt=Te===0?Mn:hr,wt=ye.start,pt=0;pt<ye.length-3;pt+=3){var an=ye[pt],hn=ye[pt+1],ln=ye[pt+2],dn=ye[pt+3],bn=ye[pt+4],or=Te===0?an:hn,Er=Te===0?dn:bn,ii=!1;Oe&&(Re=Math.sqrt(Math.pow(an-dn,2)+Math.pow(hn-bn,2))),or<Q?Er>Q&&(ke=xt(qe,an,hn,dn,bn,Q),Oe&&(qe.start=wt+Re*ke)):or>me?Er<me&&(ke=xt(qe,an,hn,dn,bn,me),Oe&&(qe.start=wt+Re*ke)):Gt(qe,an,hn,ln),Er<Q&&or>=Q&&(ke=xt(qe,an,hn,dn,bn,Q),ii=!0),Er>me&&or<=me&&(ke=xt(qe,an,hn,dn,bn,me),ii=!0),!Pe&&ii&&(Oe&&(qe.end=wt+Re*ke),Y.push(qe),qe=Tt(ye)),Oe&&(wt+=Re)}var Rr=ye.length-3;an=ye[Rr],hn=ye[Rr+1],ln=ye[Rr+2],(or=Te===0?an:hn)>=Q&&or<=me&&Gt(qe,an,hn,ln),Rr=qe.length-3,Pe&&Rr>=3&&(qe[Rr]!==qe[0]||qe[Rr+1]!==qe[1])&&Gt(qe,qe[0],qe[1],qe[2]),qe.length&&Y.push(qe)}function Tt(ye){var Y=[];return Y.size=ye.size,Y.start=ye.start,Y.end=ye.end,Y}function vt(ye,Y,Q,me,Te,Pe){for(var Oe=0;Oe<ye.length;Oe++)gt(ye[Oe],Y,Q,me,Te,Pe,!1)}function Gt(ye,Y,Q,me){ye.push(Y),ye.push(Q),ye.push(me)}function Mn(ye,Y,Q,me,Te,Pe){var Oe=(Pe-Y)/(me-Y);return ye.push(Pe),ye.push(Q+(Te-Q)*Oe),ye.push(1),Oe}function hr(ye,Y,Q,me,Te,Pe){var Oe=(Pe-Q)/(Te-Q);return ye.push(Y+(me-Y)*Oe),ye.push(Pe),ye.push(1),Oe}function er(ye,Y){for(var Q=[],me=0;me<ye.length;me++){var Te,Pe=ye[me],Oe=Pe.type;if(Oe==="Point"||Oe==="MultiPoint"||Oe==="LineString")Te=gi(Pe.geometry,Y);else if(Oe==="MultiLineString"||Oe==="Polygon"){Te=[];for(var Re=0;Re<Pe.geometry.length;Re++)Te.push(gi(Pe.geometry[Re],Y))}else if(Oe==="MultiPolygon")for(Te=[],Re=0;Re<Pe.geometry.length;Re++){for(var ke=[],qe=0;qe<Pe.geometry[Re].length;qe++)ke.push(gi(Pe.geometry[Re][qe],Y));Te.push(ke)}Q.push(Rt(Pe.id,Oe,Te,Pe.tags))}return Q}function gi(ye,Y){var Q=[];Q.size=ye.size,ye.start!==void 0&&(Q.start=ye.start,Q.end=ye.end);for(var me=0;me<ye.length;me+=3)Q.push(ye[me]+Y,ye[me+1],ye[me+2]);return Q}function da(ye,Y){if(ye.transformed)return ye;var Q,me,Te,Pe=1<<ye.z,Oe=ye.x,Re=ye.y;for(Q=0;Q<ye.features.length;Q++){var ke=ye.features[Q],qe=ke.geometry,xt=ke.type;if(ke.geometry=[],xt===1)for(me=0;me<qe.length;me+=2)ke.geometry.push(xo(qe[me],qe[me+1],Y,Pe,Oe,Re));else for(me=0;me<qe.length;me++){var wt=[];for(Te=0;Te<qe[me].length;Te+=2)wt.push(xo(qe[me][Te],qe[me][Te+1],Y,Pe,Oe,Re));ke.geometry.push(wt)}}return ye.transformed=!0,ye}function xo(ye,Y,Q,me,Te,Pe){return[Math.round(Q*(ye*me-Te)),Math.round(Q*(Y*me-Pe))]}function Bo(ye,Y,Q,me,Te){for(var Pe=Y===Te.maxZoom?0:Te.tolerance/((1<<Y)*Te.extent),Oe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Q,y:me,z:Y,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Re=0;Re<ye.length;Re++){Oe.numFeatures++,pa(Oe,ye[Re],Pe,Te);var ke=ye[Re].minX,qe=ye[Re].minY,xt=ye[Re].maxX,wt=ye[Re].maxY;ke<Oe.minX&&(Oe.minX=ke),qe<Oe.minY&&(Oe.minY=qe),xt>Oe.maxX&&(Oe.maxX=xt),wt>Oe.maxY&&(Oe.maxY=wt)}return Oe}function pa(ye,Y,Q,me){var Te=Y.geometry,Pe=Y.type,Oe=[];if(Pe==="Point"||Pe==="MultiPoint")for(var Re=0;Re<Te.length;Re+=3)Oe.push(Te[Re]),Oe.push(Te[Re+1]),ye.numPoints++,ye.numSimplified++;else if(Pe==="LineString")$o(Oe,Te,ye,Q,!1,!1);else if(Pe==="MultiLineString"||Pe==="Polygon")for(Re=0;Re<Te.length;Re++)$o(Oe,Te[Re],ye,Q,Pe==="Polygon",Re===0);else if(Pe==="MultiPolygon")for(var ke=0;ke<Te.length;ke++){var qe=Te[ke];for(Re=0;Re<qe.length;Re++)$o(Oe,qe[Re],ye,Q,!0,Re===0)}if(Oe.length){var xt=Y.tags||null;if(Pe==="LineString"&&me.lineMetrics){for(var wt in xt={},Y.tags)xt[wt]=Y.tags[wt];xt.mapbox_clip_start=Te.start/Te.size,xt.mapbox_clip_end=Te.end/Te.size}var pt={geometry:Oe,type:Pe==="Polygon"||Pe==="MultiPolygon"?3:Pe==="LineString"||Pe==="MultiLineString"?2:1,tags:xt};Y.id!==null&&(pt.id=Y.id),ye.features.push(pt)}}function $o(ye,Y,Q,me,Te,Pe){var Oe=me*me;if(me>0&&Y.size<(Te?Oe:me))Q.numPoints+=Y.length/3;else{for(var Re=[],ke=0;ke<Y.length;ke+=3)(me===0||Y[ke+2]>Oe)&&(Q.numSimplified++,Re.push(Y[ke]),Re.push(Y[ke+1])),Q.numPoints++;Te&&function(qe,xt){for(var wt=0,pt=0,an=qe.length,hn=an-2;pt<an;hn=pt,pt+=2)wt+=(qe[pt]-qe[hn])*(qe[pt+1]+qe[hn+1]);if(wt>0===xt)for(pt=0,an=qe.length;pt<an/2;pt+=2){var ln=qe[pt],dn=qe[pt+1];qe[pt]=qe[an-2-pt],qe[pt+1]=qe[an-1-pt],qe[an-2-pt]=ln,qe[an-1-pt]=dn}}(Re,Pe),ye.push(Re)}}function jo(ye,Y){var Q=(Y=this.options=function(Te,Pe){for(var Oe in Pe)Te[Oe]=Pe[Oe];return Te}(Object.create(this.options),Y)).debug;if(Q&&console.time("preprocess data"),Y.maxZoom<0||Y.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Y.promoteId&&Y.generateId)throw new Error("promoteId and generateId cannot be used together.");var me=function(Te,Pe){var Oe=[];if(Te.type==="FeatureCollection")for(var Re=0;Re<Te.features.length;Re++)zn(Oe,Te.features[Re],Pe,Re);else zn(Oe,Te.type==="Feature"?Te:{geometry:Te},Pe);return Oe}(ye,Y);this.tiles={},this.tileCoords=[],Q&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Y.indexMaxZoom,Y.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),me=function(Te,Pe){var Oe=Pe.buffer/Pe.extent,Re=Te,ke=Ge(Te,1,-1-Oe,Oe,0,-1,2,Pe),qe=Ge(Te,1,1-Oe,2+Oe,0,-1,2,Pe);return(ke||qe)&&(Re=Ge(Te,1,-Oe,1+Oe,0,-1,2,Pe)||[],ke&&(Re=er(ke,1).concat(Re)),qe&&(Re=Re.concat(er(qe,-1)))),Re}(me,Y),me.length&&this.splitTile(me,0,0,0),Q&&(me.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Uo(ye,Y,Q){return 32*((1<<ye)*Q+Y)+ye}function fa(ye,Y){const Q=ye.tileID.canonical;if(!this._geoJSONIndex)return Y(null,null);const me=this._geoJSONIndex.getTile(Q.z,Q.x,Q.y);if(!me)return Y(null,null);const Te=new class{constructor(Oe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.EXTENT,this.length=Oe.length,this._features=Oe}feature(Oe){return new class{constructor(Re){this._feature=Re,this.extent=l.EXTENT,this.type=Re.type,this.properties=Re.tags,"id"in Re&&!isNaN(Re.id)&&(this.id=parseInt(Re.id,10))}loadGeometry(){if(this._feature.type===1){const Re=[];for(const ke of this._feature.geometry)Re.push([new l.Point(ke[0],ke[1])]);return Re}{const Re=[];for(const ke of this._feature.geometry){const qe=[];for(const xt of ke)qe.push(new l.Point(xt[0],xt[1]));Re.push(qe)}return Re}}toGeoJSON(Re,ke,qe){return L.call(this,Re,ke,qe)}}(this._features[Oe])}}(me.features);let Pe=Ot(Te);Pe.byteOffset===0&&Pe.byteLength===Pe.buffer.byteLength||(Pe=new Uint8Array(Pe)),Y(null,{vectorTile:Te,rawData:Pe.buffer})}jo.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},jo.prototype.splitTile=function(ye,Y,Q,me,Te,Pe,Oe){for(var Re=[ye,Y,Q,me],ke=this.options,qe=ke.debug;Re.length;){me=Re.pop(),Q=Re.pop(),Y=Re.pop(),ye=Re.pop();var xt=1<<Y,wt=Uo(Y,Q,me),pt=this.tiles[wt];if(!pt&&(qe>1&&console.time("creation"),pt=this.tiles[wt]=Bo(ye,Y,Q,me,ke),this.tileCoords.push({z:Y,x:Q,y:me}),qe)){qe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Y,Q,me,pt.numFeatures,pt.numPoints,pt.numSimplified),console.timeEnd("creation"));var an="z"+Y;this.stats[an]=(this.stats[an]||0)+1,this.total++}if(pt.source=ye,Te){if(Y===ke.maxZoom||Y===Te)continue;var hn=1<<Te-Y;if(Q!==Math.floor(Pe/hn)||me!==Math.floor(Oe/hn))continue}else if(Y===ke.indexMaxZoom||pt.numPoints<=ke.indexMaxPoints)continue;if(pt.source=null,ye.length!==0){qe>1&&console.time("clipping");var ln,dn,bn,or,Er,ii,Rr=.5*ke.buffer/ke.extent,Vo=.5-Rr,Gr=.5+Rr,yi=1+Rr;ln=dn=bn=or=null,Er=Ge(ye,xt,Q-Rr,Q+Gr,0,pt.minX,pt.maxX,ke),ii=Ge(ye,xt,Q+Vo,Q+yi,0,pt.minX,pt.maxX,ke),ye=null,Er&&(ln=Ge(Er,xt,me-Rr,me+Gr,1,pt.minY,pt.maxY,ke),dn=Ge(Er,xt,me+Vo,me+yi,1,pt.minY,pt.maxY,ke),Er=null),ii&&(bn=Ge(ii,xt,me-Rr,me+Gr,1,pt.minY,pt.maxY,ke),or=Ge(ii,xt,me+Vo,me+yi,1,pt.minY,pt.maxY,ke),ii=null),qe>1&&console.timeEnd("clipping"),Re.push(ln||[],Y+1,2*Q,2*me),Re.push(dn||[],Y+1,2*Q,2*me+1),Re.push(bn||[],Y+1,2*Q+1,2*me),Re.push(or||[],Y+1,2*Q+1,2*me+1)}}},jo.prototype.getTile=function(ye,Y,Q){var me=this.options,Te=me.extent,Pe=me.debug;if(ye<0||ye>24)return null;var Oe=1<<ye,Re=Uo(ye,Y=(Y%Oe+Oe)%Oe,Q);if(this.tiles[Re])return da(this.tiles[Re],Te);Pe>1&&console.log("drilling down to z%d-%d-%d",ye,Y,Q);for(var ke,qe=ye,xt=Y,wt=Q;!ke&&qe>0;)qe--,xt=Math.floor(xt/2),wt=Math.floor(wt/2),ke=this.tiles[Uo(qe,xt,wt)];return ke&&ke.source?(Pe>1&&console.log("found parent tile z%d-%d-%d",qe,xt,wt),Pe>1&&console.time("drilling down"),this.splitTile(ke.source,qe,xt,wt,ye,Y,Q),Pe>1&&console.timeEnd("drilling down"),this.tiles[Re]?da(this.tiles[Re],Te):null):null};class Ja extends l.VectorTileWorkerSource{constructor(Y,Q,me,Te,Pe){super(Y,Q,me,Te,fa),Pe&&(this.loadGeoJSON=Pe)}loadData(Y,Q){const me=Y&&Y.request,Te=me&&me.collectResourceTiming;this.loadGeoJSON(Y,(Pe,Oe)=>{if(Pe||!Oe)return Q(Pe);if(typeof Oe!="object")return Q(new Error(`Input data given to '${Y.source}' is not a valid GeoJSON object.`));{q(Oe,!0);try{if(Y.filter){const ke=l.createExpression(Y.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ke.result==="error")throw new Error(ke.value.map(xt=>`${xt.key}: ${xt.message}`).join(", "));const qe=Oe.features.filter(xt=>ke.value.evaluate({zoom:0},xt));Oe={type:"FeatureCollection",features:qe}}this._geoJSONIndex=Y.cluster?new Et(function({superclusterOptions:ke,clusterProperties:qe}){if(!qe||!ke)return ke;const xt={},wt={},pt={accumulated:null,zoom:0},an={properties:null},hn=Object.keys(qe);for(const ln of hn){const[dn,bn]=qe[ln],or=l.createExpression(bn),Er=l.createExpression(typeof dn=="string"?[dn,["accumulated"],["get",ln]]:dn);xt[ln]=or.value,wt[ln]=Er.value}return ke.map=ln=>{an.properties=ln;const dn={};for(const bn of hn)dn[bn]=xt[bn].evaluate(pt,an);return dn},ke.reduce=(ln,dn)=>{an.properties=dn;for(const bn of hn)pt.accumulated=ln[bn],ln[bn]=wt[bn].evaluate(pt,an)},ke}(Y)).load(Oe.features):function(ke,qe){return new jo(ke,qe)}(Oe,Y.geojsonVtOptions)}catch(ke){return Q(ke)}this.loaded={};const Re={};if(Te){const ke=l.getPerformanceMeasurement(me);ke&&(Re.resourceTiming={},Re.resourceTiming[Y.source]=JSON.parse(JSON.stringify(ke)))}Q(null,Re)}})}reloadTile(Y,Q){const me=this.loaded;return me&&me[Y.uid]?super.reloadTile(Y,Q):this.loadTile(Y,Q)}loadGeoJSON(Y,Q){if(Y.request)l.getJSON(Y.request,Q);else{if(typeof Y.data!="string")return Q(new Error(`Input data given to '${Y.source}' is not a valid GeoJSON object.`));try{return Q(null,JSON.parse(Y.data))}catch{return Q(new Error(`Input data given to '${Y.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(Y,Q){try{Q(null,this._geoJSONIndex.getClusterExpansionZoom(Y.clusterId))}catch(me){Q(me)}}getClusterChildren(Y,Q){try{Q(null,this._geoJSONIndex.getChildren(Y.clusterId))}catch(me){Q(me)}}getClusterLeaves(Y,Q){try{Q(null,this._geoJSONIndex.getLeaves(Y.clusterId,Y.limit,Y.offset))}catch(me){Q(me)}}}class Cu{constructor(Y){this.self=Y,this.actor=new l.Actor(Y,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=l.getProjection({name:"mercator"}),this.workerSourceTypes={vector:l.VectorTileWorkerSource,geojson:Ja},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(Q,me)=>{if(this.workerSourceTypes[Q])throw new Error(`Worker source with name "${Q}" already registered.`);this.workerSourceTypes[Q]=me},this.self.registerRTLTextPlugin=Q=>{if(l.plugin.isParsed())throw new Error("RTL text plugin already registered.");l.plugin.applyArabicShaping=Q.applyArabicShaping,l.plugin.processBidirectionalText=Q.processBidirectionalText,l.plugin.processStyledBidirectionalText=Q.processStyledBidirectionalText}}clearCaches(Y,Q,me){delete this.layerIndexes[Y],delete this.availableImages[Y],delete this.workerSources[Y],delete this.demWorkerSources[Y],me()}checkIfReady(Y,Q,me){me()}setReferrer(Y,Q){this.referrer=Q}spriteLoaded(Y,Q){this.isSpriteLoaded[Y]=Q;for(const me in this.workerSources[Y]){const Te=this.workerSources[Y][me];for(const Pe in Te)Te[Pe]instanceof l.VectorTileWorkerSource&&(Te[Pe].isSpriteLoaded=Q,Te[Pe].fire(new l.Event("isSpriteLoaded")))}}setImages(Y,Q,me){this.availableImages[Y]=Q;for(const Te in this.workerSources[Y]){const Pe=this.workerSources[Y][Te];for(const Oe in Pe)Pe[Oe].availableImages=Q}me()}enableTerrain(Y,Q,me){this.terrain=Q,me()}setProjection(Y,Q){this.projections[Y]=l.getProjection(Q)}setLayers(Y,Q,me){this.getLayerIndex(Y).replace(Q),me()}updateLayers(Y,Q,me){this.getLayerIndex(Y).update(Q.layers,Q.removedIds),me()}loadTile(Y,Q,me){const Te=this.enableTerrain?l.extend({enableTerrain:this.terrain},Q):Q;Te.projection=this.projections[Y]||this.defaultProjection,this.getWorkerSource(Y,Q.type,Q.source).loadTile(Te,me)}loadDEMTile(Y,Q,me){const Te=this.enableTerrain?l.extend({buildQuadTree:this.terrain},Q):Q;this.getDEMWorkerSource(Y,Q.source).loadTile(Te,me)}reloadTile(Y,Q,me){const Te=this.enableTerrain?l.extend({enableTerrain:this.terrain},Q):Q;Te.projection=this.projections[Y]||this.defaultProjection,this.getWorkerSource(Y,Q.type,Q.source).reloadTile(Te,me)}abortTile(Y,Q,me){this.getWorkerSource(Y,Q.type,Q.source).abortTile(Q,me)}removeTile(Y,Q,me){this.getWorkerSource(Y,Q.type,Q.source).removeTile(Q,me)}removeSource(Y,Q,me){if(!this.workerSources[Y]||!this.workerSources[Y][Q.type]||!this.workerSources[Y][Q.type][Q.source])return;const Te=this.workerSources[Y][Q.type][Q.source];delete this.workerSources[Y][Q.type][Q.source],Te.removeSource!==void 0?Te.removeSource(Q,me):me()}loadWorkerSource(Y,Q,me){try{this.self.importScripts(Q.url),me()}catch(Te){me(Te.toString())}}syncRTLPluginState(Y,Q,me){try{l.plugin.setState(Q);const Te=l.plugin.getPluginURL();if(l.plugin.isLoaded()&&!l.plugin.isParsed()&&Te!=null){this.self.importScripts(Te);const Pe=l.plugin.isParsed();me(Pe?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Te}`),Pe)}}catch(Te){me(Te.toString())}}getAvailableImages(Y){let Q=this.availableImages[Y];return Q||(Q=[]),Q}getLayerIndex(Y){let Q=this.layerIndexes[Y];return Q||(Q=this.layerIndexes[Y]=new C),Q}getWorkerSource(Y,Q,me){if(this.workerSources[Y]||(this.workerSources[Y]={}),this.workerSources[Y][Q]||(this.workerSources[Y][Q]={}),!this.workerSources[Y][Q][me]){const Te={send:(Pe,Oe,Re,ke,qe,xt)=>{this.actor.send(Pe,Oe,Re,Y,qe,xt)},scheduler:this.actor.scheduler};this.workerSources[Y][Q][me]=new this.workerSourceTypes[Q](Te,this.getLayerIndex(Y),this.getAvailableImages(Y),this.isSpriteLoaded[Y])}return this.workerSources[Y][Q][me]}getDEMWorkerSource(Y,Q){return this.demWorkerSources[Y]||(this.demWorkerSources[Y]={}),this.demWorkerSources[Y][Q]||(this.demWorkerSources[Y][Q]=new k),this.demWorkerSources[Y][Q]}enforceCacheSizeLimit(Y,Q){l.enforceCacheSizeLimit(Q)}getWorkerPerformanceMetrics(Y,Q,me){me(void 0,void 0)}}return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new Cu(self)),Cu}),d(["./shared"],function(l){function _(f,a){if(Array.isArray(f)){if(!Array.isArray(a)||f.length!==a.length)return!1;for(let h=0;h<f.length;h++)if(!_(f[h],a[h]))return!1;return!0}if(typeof f=="object"&&f!==null&&a!==null){if(typeof a!="object"||Object.keys(f).length!==Object.keys(a).length)return!1;for(const h in f)if(!_(f[h],a[h]))return!1;return!0}return f===a}var S=C;function C(f){return!function(a){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var g,v,w=new Blob([""],{type:"text/javascript"}),M=URL.createObjectURL(w);try{v=new Worker(M),g=!0}catch{g=!1}return v&&v.terminate(),URL.revokeObjectURL(M),g}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var g=document.createElement("canvas");g.width=g.height=1;var v=g.getContext("2d");if(!v)return!1;var w=v.getImageData(0,0,1,1);return w&&w.width===g.width}()?(k[h=a&&a.failIfMajorPerformanceCaveat]===void 0&&(k[h]=function(g){var v,w=function(M){var P=document.createElement("canvas"),z=Object.create(C.webGLContextAttributes);return z.failIfMajorPerformanceCaveat=M,P.getContext("webgl",z)||P.getContext("experimental-webgl",z)}(g);if(!w)return!1;try{v=w.createShader(w.VERTEX_SHADER)}catch{return!1}return!(!v||w.isContextLost())&&(w.shaderSource(v,"void main() {}"),w.compileShader(v),w.getShaderParameter(v,w.COMPILE_STATUS)===!0)}(h)),k[h]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var h}(f)}var k={};function D(f,a,h){const g=l.window.document.createElement(f);return a!==void 0&&(g.className=a),h&&h.appendChild(g),g}function U(f,a,h){const g=l.window.document.createElementNS("http://www.w3.org/2000/svg",f);for(const v of Object.keys(a))g.setAttributeNS(null,v,a[v]);return h&&h.appendChild(g),g}C.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const q=l.window.document&&l.window.document.documentElement.style,L=q&&q.userSelect!==void 0?"userSelect":"WebkitUserSelect";let K;function R(){q&&L&&(K=q[L],q[L]="none")}function F(){q&&L&&(q[L]=K)}function V(f){f.preventDefault(),f.stopPropagation(),l.window.removeEventListener("click",V,!0)}function J(){l.window.addEventListener("click",V,!0),l.window.setTimeout(()=>{l.window.removeEventListener("click",V,!0)},0)}function re(f,a){const h=f.getBoundingClientRect();return ce(f,h,a)}function fe(f,a){const h=f.getBoundingClientRect(),g=[];for(let v=0;v<a.length;v++)g.push(ce(f,h,a[v]));return g}function be(f){return l.window.InstallTrigger!==void 0&&f.button===2&&f.ctrlKey&&l.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:f.button}function ce(f,a,h){const g=f.offsetWidth===a.width?1:f.offsetWidth/a.width;return new l.Point((h.clientX-a.left)*g,(h.clientY-a.top)*g)}function ve(f,a){var h=a[0],g=a[1],v=a[2],w=a[3],M=h*w-v*g;return M?(f[0]=w*(M=1/M),f[1]=-g*M,f[2]=-v*M,f[3]=h*M,f):null}function Fe(f){const{userImage:a}=f;return!!(a&&a.render&&a.render())&&(f.data.replace(new Uint8Array(a.data.buffer)),!0)}class Le extends l.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(a){if(this.loaded!==a&&(this.loaded=a,a)){for(const{ids:h,callback:g}of this.requestors)this._notify(h,g);this.requestors=[]}}hasImage(a){return!!this.getImage(a)}getImage(a){return this.images[a]}addImage(a,h){this._validate(a,h)&&(this.images[a]=h)}_validate(a,h){let g=!0;return this._validateStretch(h.stretchX,h.data&&h.data.width)||(this.fire(new l.ErrorEvent(new Error(`Image "${a}" has invalid "stretchX" value`))),g=!1),this._validateStretch(h.stretchY,h.data&&h.data.height)||(this.fire(new l.ErrorEvent(new Error(`Image "${a}" has invalid "stretchY" value`))),g=!1),this._validateContent(h.content,h)||(this.fire(new l.ErrorEvent(new Error(`Image "${a}" has invalid "content" value`))),g=!1),g}_validateStretch(a,h){if(!a)return!0;let g=0;for(const v of a){if(v[0]<g||v[1]<v[0]||h<v[1])return!1;g=v[1]}return!0}_validateContent(a,h){return!(a&&(a.length!==4||a[0]<0||h.data.width<a[0]||a[1]<0||h.data.height<a[1]||a[2]<0||h.data.width<a[2]||a[3]<0||h.data.height<a[3]||a[2]<a[0]||a[3]<a[1]))}updateImage(a,h){h.version=this.images[a].version+1,this.images[a]=h,this.updatedImages[a]=!0}removeImage(a){const h=this.images[a];delete this.images[a],delete this.patterns[a],h.userImage&&h.userImage.onRemove&&h.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(a,h){let g=!0;if(!this.isLoaded())for(const v of a)this.images[v]||(g=!1);this.isLoaded()||g?this._notify(a,h):this.requestors.push({ids:a,callback:h})}_notify(a,h){const g={};for(const v of a){this.images[v]||this.fire(new l.Event("styleimagemissing",{id:v}));const w=this.images[v];w?g[v]={data:w.data.clone(),pixelRatio:w.pixelRatio,sdf:w.sdf,version:w.version,stretchX:w.stretchX,stretchY:w.stretchY,content:w.content,hasRenderCallback:Boolean(w.userImage&&w.userImage.render)}:l.warnOnce(`Image "${v}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}h(null,g)}getPixelSize(){const{width:a,height:h}=this.atlasImage;return{width:a,height:h}}getPattern(a){const h=this.patterns[a],g=this.getImage(a);if(!g)return null;if(h&&h.position.version===g.version)return h.position;if(h)h.position.version=g.version;else{const v={w:g.data.width+2,h:g.data.height+2,x:0,y:0},w=new l.ImagePosition(v,g);this.patterns[a]={bin:v,position:w}}return this._updatePatternAtlas(),this.patterns[a].position}bind(a){const h=a.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new l.Texture(a,this.atlasImage,h.RGBA),this.atlasTexture&&this.atlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE)}_updatePatternAtlas(){const a=[];for(const w in this.patterns)a.push(this.patterns[w].bin);const{w:h,h:g}=l.potpack(a),v=this.atlasImage;v.resize({width:h||1,height:g||1});for(const w in this.patterns){const{bin:M}=this.patterns[w],P=M.x+1,z=M.y+1,$=this.images[w].data,B=$.width,W=$.height;l.RGBAImage.copy($,v,{x:0,y:0},{x:P,y:z},{width:B,height:W}),l.RGBAImage.copy($,v,{x:0,y:W-1},{x:P,y:z-1},{width:B,height:1}),l.RGBAImage.copy($,v,{x:0,y:0},{x:P,y:z+W},{width:B,height:1}),l.RGBAImage.copy($,v,{x:B-1,y:0},{x:P-1,y:z},{width:1,height:W}),l.RGBAImage.copy($,v,{x:0,y:0},{x:P+B,y:z},{width:1,height:W})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(a){for(const h of a){if(this.callbackDispatchedThisFrame[h])continue;this.callbackDispatchedThisFrame[h]=!0;const g=this.images[h];Fe(g)&&this.updateImage(h,g)}}}const Ie=new l.Properties({anchor:new l.DataConstantProperty(l.spec.light.anchor),position:new class{constructor(){this.specification=l.spec.light.position}possiblyEvaluate(f,a){return function([h,g,v]){const w=l.degToRad(g+90),M=l.degToRad(v);return{x:h*Math.cos(w)*Math.sin(M),y:h*Math.sin(w)*Math.sin(M),z:h*Math.cos(M),azimuthal:g,polar:v}}(f.expression.evaluate(a))}interpolate(f,a,h){return{x:l.number(f.x,a.x,h),y:l.number(f.y,a.y,h),z:l.number(f.z,a.z,h),azimuthal:l.number(f.azimuthal,a.azimuthal,h),polar:l.number(f.polar,a.polar,h)}}},color:new l.DataConstantProperty(l.spec.light.color),intensity:new l.DataConstantProperty(l.spec.light.intensity)});class Ke extends l.Evented{constructor(a){super(),this._transitionable=new l.Transitionable(Ie),this.setLight(a),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(a,h={}){if(!this._validate(l.validateLight,a,h))for(const g in a){const v=a[g];l.endsWith(g,"-transition")?this._transitionable.setTransition(g.slice(0,-11),v):this._transitionable.setValue(g,v)}}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,h,g){return(!g||g.validate!==!1)&&l.emitValidationErrors(this,a.call(l.validateStyle,l.extend({value:h,style:{glyphs:!0,sprite:!0},styleSpec:l.spec})))}}const bt=new l.Properties({source:new l.DataConstantProperty(l.spec.terrain.source),exaggeration:new l.DataConstantProperty(l.spec.terrain.exaggeration)});let ot=class extends l.Evented{constructor(f,a){super(),this._transitionable=new l.Transitionable(bt),this.set(f),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=a}get(){return this._transitionable.serialize()}set(f){for(const a in f){const h=f[a];l.endsWith(a,"-transition")?this._transitionable.setTransition(a.slice(0,-11),h):this._transitionable.setValue(a,h)}}updateTransitions(f){this._transitioning=this._transitionable.transitioned(f,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(f){this.properties=this._transitioning.possiblyEvaluate(f)}};function Ot(f,a,h,g){const v=l.smoothstep(45,65,h),[w,M]=Dt(f,g),P=l.length(a);let z=1-Math.min(1,Math.exp((P-w)/(M-w)*-6));return z*=z*z,z=Math.min(1,1.00747*z),z*v*f.alpha}function Dt(f,a){const h=.5/Math.tan(.5*a);return[f.range[0]+h,f.range[1]+h]}const Ze=new l.Properties({range:new l.DataConstantProperty(l.spec.fog.range),color:new l.DataConstantProperty(l.spec.fog.color),"high-color":new l.DataConstantProperty(l.spec.fog["high-color"]),"space-color":new l.DataConstantProperty(l.spec.fog["space-color"]),"horizon-blend":new l.DataConstantProperty(l.spec.fog["horizon-blend"]),"star-intensity":new l.DataConstantProperty(l.spec.fog["star-intensity"])});class Ye extends l.Evented{constructor(a,h){super(),this._transitionable=new l.Transitionable(Ze),this.set(a),this._transitioning=this._transitionable.untransitioned(),this._transform=h}get state(){const a=this._transform,h=a.projection.name==="globe",g=l.globeToMercatorTransition(a.zoom),v=this.properties.get("range"),w=[.5,3];return{range:h?[l.number(w[0],v[0],g),l.number(w[1],v[1],g)]:v,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(a,h={}){if(!this._validate(l.validateFog,a,h)){for(const g of Object.keys(l.spec.fog))a&&a[g]===void 0&&(a[g]=l.spec.fog[g].default);for(const g in a){const v=a[g];l.endsWith(g,"-transition")?this._transitionable.setTransition(g.slice(0,-11),v):this._transitionable.setValue(g,v)}}}getOpacity(a){if(!this._transform.projection.supportsFog)return 0;const h=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:l.smoothstep(45,65,a))*h.a}getOpacityAtLatLng(a,h){return this._transform.projection.supportsFog?function(g,v,w){const M=l.MercatorCoordinate.fromLngLat(v),P=w.elevation?w.elevation.getAtPointOrZero(M):0,z=[M.x,M.y,P];return l.transformMat4(z,z,w.mercatorFogMatrix),Ot(g,z,w.pitch,w._fov)}(this.state,a,h):0}getFovAdjustedRange(a){return this._transform.projection.supportsFog?Dt(this.state,a):[0,1]}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,h,g){return(!g||g.validate!==!1)&&l.emitValidationErrors(this,a.call(l.validateStyle,l.extend({value:h,style:{glyphs:!0,sprite:!0},styleSpec:l.spec})))}}class De{constructor(a,h){this.workerPool=a,this.actors=[],this.currentActor=0,this.id=l.uniqueId();const g=this.workerPool.acquire(this.id);for(let v=0;v<g.length;v++){const w=new De.Actor(g[v],h,this.id);w.name=`Worker ${v}`,this.actors.push(w)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(a,h,g){l.asyncAll(this.actors,(v,w)=>{v.send(a,h,w)},g=g||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(a=>{a.remove()}),this.actors=[],this.workerPool.release(this.id)}}function _t(f,a,h){return a*(l.EXTENT/(f.tileSize*Math.pow(2,h-f.tileID.overscaledZ)))}De.Actor=l.Actor;class mt{constructor(a,h,g,v){this.screenBounds=a,this.cameraPoint=h,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=g,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,v)}static createFromScreenPoints(a,h){let g,v;if(a instanceof l.Point||typeof a[0]=="number"){const w=l.Point.convert(a);g=[w],v=h.isPointAboveHorizon(w)}else{const w=l.Point.convert(a[0]),M=l.Point.convert(a[1]);g=[w,M],v=l.polygonizeBounds(w,M).every(P=>h.isPointAboveHorizon(P))}return new mt(g,h.getCameraPoint(),v,h)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(a){return l.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],a)}bufferedCameraGeometry(a){const h=this.screenBounds[0],g=this.screenBounds.length===1?this.screenBounds[0].add(new l.Point(1,1)):this.screenBounds[1],v=l.polygonizeBounds(h,g,0,!1);return this.cameraPoint.y>g.y&&(this.cameraPoint.x>h.x&&this.cameraPoint.x<g.x?v.splice(3,0,this.cameraPoint):this.cameraPoint.x>=g.x?v[2]=this.cameraPoint:this.cameraPoint.x<=h.x&&(v[3]=this.cameraPoint)),l.bufferConvexPolygon(v,a)}bufferedCameraGeometryGlobe(a){const h=this.screenBounds[0],g=this.screenBounds.length===1?this.screenBounds[0].add(new l.Point(1,1)):this.screenBounds[1],v=l.polygonizeBounds(h,g,a),w=this.cameraPoint.clone();switch(3*((w.y>h.y)+(w.y>g.y))+((w.x>h.x)+(w.x>g.x))){case 0:v[0]=w,v[4]=w.clone();break;case 1:v.splice(1,0,w);break;case 2:v[1]=w;break;case 3:v.splice(4,0,w);break;case 5:v.splice(2,0,w);break;case 6:v[3]=w;break;case 7:v.splice(3,0,w);break;case 8:v[2]=w}return v}containsTile(a,h,g,v=0){const w=a.queryPadding/h._pixelsPerMercatorPixel+1,M=g?this._bufferedCameraMercator(w,h):this._bufferedScreenMercator(w,h);let P=a.tileID.wrap+(M.unwrapped?v:0);const z=M.polygon.map(le=>l.getTilePoint(a.tileTransform,le,P));if(!l.polygonIntersectsBox(z,0,0,l.EXTENT,l.EXTENT))return;P=a.tileID.wrap+(this.screenGeometryMercator.unwrapped?v:0);const $=this.screenGeometryMercator.polygon.map(le=>l.getTileVec3(a.tileTransform,le,P)),B=$.map(le=>new l.Point(le[0],le[1])),W=h.getFreeCameraOptions().position||new l.MercatorCoordinate(0,0,0),ee=l.getTileVec3(a.tileTransform,W,P),oe=$.map(le=>{const Z=l.sub(le,le,ee);return l.normalize(Z,Z),new l.Ray(ee,Z)}),ae=_t(a,1,h.zoom)*h._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:B,tilespaceRays:oe,bufferedTilespaceGeometry:z,bufferedTilespaceBounds:(se=l.getBounds(z),se.min.x=l.clamp(se.min.x,0,l.EXTENT),se.min.y=l.clamp(se.min.y,0,l.EXTENT),se.max.x=l.clamp(se.max.x,0,l.EXTENT),se.max.y=l.clamp(se.max.y,0,l.EXTENT),se),tile:a,tileID:a.tileID,pixelToTileUnitsFactor:ae};var se}_bufferedScreenMercator(a,h){const g=en(a);if(this._screenRaycastCache[g])return this._screenRaycastCache[g];{let v;return v=h.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(a),h):{polygon:this.bufferedScreenGeometry(a).map(w=>h.pointCoordinate3D(w)),unwrapped:!0},this._screenRaycastCache[g]=v,v}}_bufferedCameraMercator(a,h){const g=en(a);if(this._cameraRaycastCache[g])return this._cameraRaycastCache[g];{let v;return v=h.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(a),h):{polygon:this.bufferedCameraGeometry(a).map(w=>h.pointCoordinate3D(w)),unwrapped:!0},this._cameraRaycastCache[g]=v,v}}_projectAndResample(a,h){const g=function(w,M){const P=l.multiply([],M.pixelMatrix,M.globeMatrix),z=[0,-l.GLOBE_RADIUS,0,1],$=[0,l.GLOBE_RADIUS,0,1],B=[0,0,0,1];l.transformMat4$1(z,z,P),l.transformMat4$1($,$,P),l.transformMat4$1(B,B,P);const W=new l.Point(z[0]/z[3],z[1]/z[3]),ee=new l.Point($[0]/$[3],$[1]/$[3]),oe=l.polygonContainsPoint(w,W)&&z[3]<B[3],ae=l.polygonContainsPoint(w,ee)&&$[3]<B[3];if(!oe&&!ae)return null;const se=function(Ae,Ne,ze){for(let Ue=1;Ue<Ae.length;Ue++){const ct=jt(Ne.pointCoordinate3D(Ae[Ue-1]).x),Be=jt(Ne.pointCoordinate3D(Ae[Ue]).x);if(ze<0){if(ct<Be)return{idx:Ue,t:-ct/(Be-1-ct)}}else if(Be<ct)return{idx:Ue,t:(1-ct)/(Be+1-ct)}}return null}(w,M,oe?-1:1);if(!se)return null;const{idx:le,t:Z}=se;let ie=le>1?Et(w.slice(0,le),M):[],de=le<w.length?Et(w.slice(le),M):[];ie=ie.map(Ae=>new l.Point(jt(Ae.x),Ae.y)),de=de.map(Ae=>new l.Point(jt(Ae.x),Ae.y));const pe=[...ie];pe.length===0&&pe.push(de[de.length-1]);const Ce=l.number(pe[pe.length-1].y,(de.length===0?ie[0]:de[0]).y,Z);let Me;return Me=oe?[new l.Point(0,Ce),new l.Point(0,0),new l.Point(1,0),new l.Point(1,Ce)]:[new l.Point(1,Ce),new l.Point(1,1),new l.Point(0,1),new l.Point(0,Ce)],pe.push(...Me),de.length===0?pe.push(ie[0]):pe.push(...de),{polygon:pe.map(Ae=>new l.MercatorCoordinate(Ae.x,Ae.y)),unwrapped:!1}}(a,h);if(g)return g;const v=function(w,M){let P=!1,z=-1/0,$=0;for(let W=0;W<w.length-1;W++)w[W].x>z&&(z=w[W].x,$=W);for(let W=0;W<w.length-1;W++){const ee=($+W)%(w.length-1),oe=w[ee],ae=w[ee+1];Math.abs(oe.x-ae.x)>.5&&(oe.x<ae.x?(oe.x+=1,ee===0&&(w[w.length-1].x+=1)):(ae.x+=1,ee+1===w.length-1&&(w[0].x+=1)),P=!0)}const B=l.mercatorXfromLng(M.center.lng);return P&&B<Math.abs(B-1)&&w.forEach(W=>{W.x-=1}),{polygon:w,unwrapped:P}}(Et(a,h).map(w=>new l.Point(jt(w.x),w.y)),h);return{polygon:v.polygon.map(w=>new l.MercatorCoordinate(w.x,w.y)),unwrapped:v.unwrapped}}}function Et(f,a){return l.resample(f,h=>{const g=a.pointCoordinate3D(h);h.x=g.x,h.y=g.y},1/256)}function jt(f){return f<0?1+f%1:f%1}function en(f){return 100*f|0}function nn(f,a,h,g,v){const w=function(M,P){if(M)return v(M);if(P){f.url&&P.tiles&&f.tiles&&delete f.tiles;const z=l.pick(l.extend(P,f),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);P.vector_layers&&(z.vectorLayers=P.vector_layers,z.vectorLayerIds=z.vectorLayers.map($=>$.id)),z.tiles=a.canonicalizeTileset(z,f.url),v(null,z)}};return f.url?l.getJSON(a.transformRequest(a.normalizeSourceURL(f.url,null,h,g),l.ResourceType.Source),w):l.exported.frame(()=>w(null,f))}class vn{constructor(a,h,g){this.bounds=l.LngLatBounds.convert(this.validateBounds(a)),this.minzoom=h||0,this.maxzoom=g||24}validateBounds(a){return Array.isArray(a)&&a.length===4?[Math.max(-180,a[0]),Math.max(-90,a[1]),Math.min(180,a[2]),Math.min(90,a[3])]:[-180,-90,180,90]}contains(a){const h=Math.pow(2,a.z),g=Math.floor(l.mercatorXfromLng(this.bounds.getWest())*h),v=Math.floor(l.mercatorYfromLat(this.bounds.getNorth())*h),w=Math.ceil(l.mercatorXfromLng(this.bounds.getEast())*h),M=Math.ceil(l.mercatorYfromLat(this.bounds.getSouth())*h);return a.x>=g&&a.x<w&&a.y>=v&&a.y<M}}class Bt{constructor(a,h,g){this.context=a;const v=a.gl;this.buffer=v.createBuffer(),this.dynamicDraw=Boolean(g),this.context.unbindVAO(),a.bindElementBuffer.set(this.buffer),v.bufferData(v.ELEMENT_ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||h.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(a){const h=this.context.gl;this.context.unbindVAO(),this.bind(),h.bufferSubData(h.ELEMENT_ARRAY_BUFFER,0,a.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const xn={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Xn{constructor(a,h,g,v){this.length=h.length,this.attributes=g,this.itemSize=h.bytesPerElement,this.dynamicDraw=v,this.context=a;const w=a.gl;this.buffer=w.createBuffer(),a.bindVertexBuffer.set(this.buffer),w.bufferData(w.ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||h.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(a){const h=this.context.gl;this.bind(),h.bufferSubData(h.ARRAY_BUFFER,0,a.arrayBuffer)}enableAttributes(a,h){for(let g=0;g<this.attributes.length;g++){const v=h.attributes[this.attributes[g].name];v!==void 0&&a.enableVertexAttribArray(v)}}setVertexAttribPointers(a,h,g){for(let v=0;v<this.attributes.length;v++){const w=this.attributes[v],M=h.attributes[w.name];M!==void 0&&a.vertexAttribPointer(M,w.components,a[xn[w.type]],!1,this.itemSize,w.offset+this.itemSize*(g||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Rt{constructor(a){this.gl=a.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(a){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Qn extends Rt{getDefault(){return l.Color.transparent}set(a){const h=this.current;(a.r!==h.r||a.g!==h.g||a.b!==h.b||a.a!==h.a||this.dirty)&&(this.gl.clearColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class zn extends Rt{getDefault(){return 1}set(a){(a!==this.current||this.dirty)&&(this.gl.clearDepth(a),this.current=a,this.dirty=!1)}}class Fr extends Rt{getDefault(){return 0}set(a){(a!==this.current||this.dirty)&&(this.gl.clearStencil(a),this.current=a,this.dirty=!1)}}class tn extends Rt{getDefault(){return[!0,!0,!0,!0]}set(a){const h=this.current;(a[0]!==h[0]||a[1]!==h[1]||a[2]!==h[2]||a[3]!==h[3]||this.dirty)&&(this.gl.colorMask(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class Wn extends Rt{getDefault(){return!0}set(a){(a!==this.current||this.dirty)&&(this.gl.depthMask(a),this.current=a,this.dirty=!1)}}class wr extends Rt{getDefault(){return 255}set(a){(a!==this.current||this.dirty)&&(this.gl.stencilMask(a),this.current=a,this.dirty=!1)}}class Se extends Rt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(a){const h=this.current;(a.func!==h.func||a.ref!==h.ref||a.mask!==h.mask||this.dirty)&&(this.gl.stencilFunc(a.func,a.ref,a.mask),this.current=a,this.dirty=!1)}}class Ge extends Rt{getDefault(){const a=this.gl;return[a.KEEP,a.KEEP,a.KEEP]}set(a){const h=this.current;(a[0]!==h[0]||a[1]!==h[1]||a[2]!==h[2]||this.dirty)&&(this.gl.stencilOp(a[0],a[1],a[2]),this.current=a,this.dirty=!1)}}class Xe extends Rt{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const h=this.gl;a?h.enable(h.STENCIL_TEST):h.disable(h.STENCIL_TEST),this.current=a,this.dirty=!1}}class gt extends Rt{getDefault(){return[0,1]}set(a){const h=this.current;(a[0]!==h[0]||a[1]!==h[1]||this.dirty)&&(this.gl.depthRange(a[0],a[1]),this.current=a,this.dirty=!1)}}class Tt extends Rt{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const h=this.gl;a?h.enable(h.DEPTH_TEST):h.disable(h.DEPTH_TEST),this.current=a,this.dirty=!1}}class vt extends Rt{getDefault(){return this.gl.LESS}set(a){(a!==this.current||this.dirty)&&(this.gl.depthFunc(a),this.current=a,this.dirty=!1)}}class Gt extends Rt{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const h=this.gl;a?h.enable(h.BLEND):h.disable(h.BLEND),this.current=a,this.dirty=!1}}class Mn extends Rt{getDefault(){const a=this.gl;return[a.ONE,a.ZERO]}set(a){const h=this.current;(a[0]!==h[0]||a[1]!==h[1]||this.dirty)&&(this.gl.blendFunc(a[0],a[1]),this.current=a,this.dirty=!1)}}class hr extends Rt{getDefault(){return l.Color.transparent}set(a){const h=this.current;(a.r!==h.r||a.g!==h.g||a.b!==h.b||a.a!==h.a||this.dirty)&&(this.gl.blendColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class er extends Rt{getDefault(){return this.gl.FUNC_ADD}set(a){(a!==this.current||this.dirty)&&(this.gl.blendEquation(a),this.current=a,this.dirty=!1)}}class gi extends Rt{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const h=this.gl;a?h.enable(h.CULL_FACE):h.disable(h.CULL_FACE),this.current=a,this.dirty=!1}}class da extends Rt{getDefault(){return this.gl.BACK}set(a){(a!==this.current||this.dirty)&&(this.gl.cullFace(a),this.current=a,this.dirty=!1)}}class xo extends Rt{getDefault(){return this.gl.CCW}set(a){(a!==this.current||this.dirty)&&(this.gl.frontFace(a),this.current=a,this.dirty=!1)}}let Bo,pa=class extends Rt{getDefault(){return null}set(f){(f!==this.current||this.dirty)&&(this.gl.useProgram(f),this.current=f,this.dirty=!1)}};class $o extends Rt{getDefault(){return this.gl.TEXTURE0}set(a){(a!==this.current||this.dirty)&&(this.gl.activeTexture(a),this.current=a,this.dirty=!1)}}class jo extends Rt{getDefault(){const a=this.gl;return[0,0,a.drawingBufferWidth,a.drawingBufferHeight]}set(a){const h=this.current;(a[0]!==h[0]||a[1]!==h[1]||a[2]!==h[2]||a[3]!==h[3]||this.dirty)&&(this.gl.viewport(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class Uo extends Rt{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const h=this.gl;h.bindFramebuffer(h.FRAMEBUFFER,a),this.current=a,this.dirty=!1}}class fa extends Rt{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const h=this.gl;h.bindRenderbuffer(h.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class Ja extends Rt{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const h=this.gl;h.bindTexture(h.TEXTURE_2D,a),this.current=a,this.dirty=!1}}class Cu extends Rt{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const h=this.gl;h.bindBuffer(h.ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class ye extends Rt{getDefault(){return null}set(a){const h=this.gl;h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class Y extends Rt{constructor(a){super(a),this.vao=a.extVertexArrayObject}getDefault(){return null}set(a){this.vao&&(a!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(a),this.current=a,this.dirty=!1)}}class Q extends Rt{getDefault(){return 4}set(a){if(a===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_ALIGNMENT,a),this.current=a,this.dirty=!1}}class me extends Rt{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),this.current=a,this.dirty=!1}}class Te extends Rt{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,a),this.current=a,this.dirty=!1}}class Pe extends Rt{constructor(a,h){super(a),this.context=a,this.parent=h}getDefault(){return null}}class Oe extends Pe{setDirty(){this.dirty=!0}set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}}class Re extends Pe{attachment(){return this.gl.DEPTH_ATTACHMENT}set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,this.attachment(),h.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class ke extends Re{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class qe{constructor(a,h,g,v){this.context=a,this.width=h,this.height=g;const w=this.framebuffer=a.gl.createFramebuffer();this.colorAttachment=new Oe(a,w),v&&(this.depthAttachment=new Re(a,w))}destroy(){const a=this.context.gl,h=this.colorAttachment.get();if(h&&a.deleteTexture(h),this.depthAttachment){const g=this.depthAttachment.get();g&&a.deleteRenderbuffer(g)}a.deleteFramebuffer(this.framebuffer)}}class xt{constructor(a,h=!1){if(this.gl=a,this.isWebGL2=h,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),h){const g=a;this.extVertexArrayObject={createVertexArrayOES:g.createVertexArray.bind(a),deleteVertexArrayOES:g.deleteVertexArray.bind(a),bindVertexArrayOES:g.bindVertexArray.bind(a)}}this.clearColor=new Qn(this),this.clearDepth=new zn(this),this.clearStencil=new Fr(this),this.colorMask=new tn(this),this.depthMask=new Wn(this),this.stencilMask=new wr(this),this.stencilFunc=new Se(this),this.stencilOp=new Ge(this),this.stencilTest=new Xe(this),this.depthRange=new gt(this),this.depthTest=new Tt(this),this.depthFunc=new vt(this),this.blend=new Gt(this),this.blendFunc=new Mn(this),this.blendColor=new hr(this),this.blendEquation=new er(this),this.cullFace=new gi(this),this.cullFaceSide=new da(this),this.frontFace=new xo(this),this.program=new pa(this),this.activeTexture=new $o(this),this.viewport=new jo(this),this.bindFramebuffer=new Uo(this),this.bindRenderbuffer=new fa(this),this.bindTexture=new Ja(this),this.bindVertexBuffer=new Cu(this),this.bindElementBuffer=new ye(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Y(this),this.pixelStoreUnpack=new Q(this),this.pixelStoreUnpackPremultiplyAlpha=new me(this),this.pixelStoreUnpackFlipY=new Te(this),this.extTextureFilterAnisotropic=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=a.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=a.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=a.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=a.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),h||(this.extTextureHalfFloat=a.getExtension("OES_texture_half_float")),(h||this.extTextureHalfFloat&&a.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=a.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=h||a.getExtension("OES_standard_derivatives"),this.extTimerQuery=a.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(a,h){return new Bt(this,a,h)}createVertexBuffer(a,h,g){return new Xn(this,a,h,g)}createRenderbuffer(a,h,g){const v=this.gl,w=v.createRenderbuffer();return this.bindRenderbuffer.set(w),v.renderbufferStorage(v.RENDERBUFFER,a,h,g),this.bindRenderbuffer.set(null),w}createFramebuffer(a,h,g){return new qe(this,a,h,g)}clear({color:a,depth:h,stencil:g}){const v=this.gl;let w=0;a&&(w|=v.COLOR_BUFFER_BIT,this.clearColor.set(a),this.colorMask.set([!0,!0,!0,!0])),h!==void 0&&(w|=v.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(h),this.depthMask.set(!0)),g!==void 0&&(w|=v.STENCIL_BUFFER_BIT,this.clearStencil.set(g),this.stencilMask.set(255)),v.clear(w)}setCullFace(a){a.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(a.mode),this.frontFace.set(a.frontFace))}setDepthMode(a){a.func!==this.gl.ALWAYS||a.mask?(this.depthTest.set(!0),this.depthFunc.set(a.func),this.depthMask.set(a.mask),this.depthRange.set(a.range)):this.depthTest.set(!1)}setStencilMode(a){a.test.func!==this.gl.ALWAYS||a.mask?(this.stencilTest.set(!0),this.stencilMask.set(a.mask),this.stencilOp.set([a.fail,a.depthFail,a.pass]),this.stencilFunc.set({func:a.test.func,ref:a.ref,mask:a.test.mask})):this.stencilTest.set(!1)}setColorMode(a){_(a.blendFunction,l.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(a.blendFunction),this.blendColor.set(a.blendColor)),this.colorMask.set(a.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class wt extends l.Evented{constructor(a,h,g,v){if(super(),this.id=a,this.dispatcher=g,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.extend(this,l.pick(h,["url","scheme","tileSize","promoteId"])),this._options=l.extend({type:"vector"},h),this._collectResourceTiming=h.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(v),this._tileWorkers={},this._deduped=new l.DedupedRequest}load(a){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"}));const h=Array.isArray(this.map._language)?this.map._language.join():this.map._language,g=this.map._worldview;this._tileJSONRequest=nn(this._options,this.map._requestManager,h,g,(v,w)=>{this._tileJSONRequest=null,this._loaded=!0,v?(h&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${h}`),g&&g.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${g}`),this.fire(new l.ErrorEvent(v))):w&&(l.extend(this,w),w.bounds&&(this.tileBounds=new vn(w.bounds,this.minzoom,this.maxzoom)),l.postTurnstileEvent(w.tiles,this.map._requestManager._customAccessToken),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"}))),a&&a(v)})}loaded(){return this._loaded}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}onAdd(a){this.map=a,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(a){return this._options.tiles=a,this.reload(),this}setUrl(a){return this.url=a,this._options.url=a,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return l.extend({},this._options)}loadTile(a,h){const g=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme)),v={request:this.map._requestManager.transformRequest(g,l.ResourceType.Tile),data:void 0,uid:a.uid,tileID:a.tileID,tileZoom:a.tileZoom,zoom:a.tileID.overscaledZ,tileSize:this.tileSize*a.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:l.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:a.isSymbolTile};if(v.request.collectResourceTiming=this._collectResourceTiming,a.actor&&a.state!=="expired")a.state==="loading"?a.reloadCallback=h:a.request=a.actor.send("reloadTile",v,w.bind(this));else if(a.actor=this._tileWorkers[g]=this._tileWorkers[g]||this.dispatcher.getActor(),this.dispatcher.ready)a.request=a.actor.send("loadTile",v,w.bind(this),void 0,!0);else{const M=l.loadVectorTile.call({deduped:this._deduped},v,(P,z)=>{P||!z?w.call(this,P):(v.data={cacheControl:z.cacheControl,expires:z.expires,rawData:z.rawData.slice(0)},a.actor&&a.actor.send("loadTile",v,w.bind(this),void 0,!0))},!0);a.request={cancel:M}}function w(M,P){return delete a.request,a.aborted?h(null):M&&M.status!==404?h(M):(P&&P.resourceTiming&&(a.resourceTiming=P.resourceTiming),this.map._refreshExpiredTiles&&P&&a.setExpiryData(P),a.loadVectorData(P,this.map.painter),l.cacheEntryPossiblyAdded(this.dispatcher),h(null),void(a.reloadCallback&&(this.loadTile(a,a.reloadCallback),a.reloadCallback=null)))}}abortTile(a){a.request&&(a.request.cancel(),delete a.request),a.actor&&a.actor.send("abortTile",{uid:a.uid,type:this.type,source:this.id})}unloadTile(a){a.unloadVectorData(),a.actor&&a.actor.send("removeTile",{uid:a.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class pt extends l.Evented{constructor(a,h,g,v){super(),this.id=a,this.dispatcher=g,this.setEventedParent(v),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.extend({type:"raster"},h),l.extend(this,l.pick(h,["url","scheme","tileSize"]))}load(a){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=nn(this._options,this.map._requestManager,null,null,(h,g)=>{this._tileJSONRequest=null,this._loaded=!0,h?this.fire(new l.ErrorEvent(h)):g&&(l.extend(this,g),g.bounds&&(this.tileBounds=new vn(g.bounds,this.minzoom,this.maxzoom)),l.postTurnstileEvent(g.tiles),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"}))),a&&a(h)})}loaded(){return this._loaded}onAdd(a){this.map=a,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(a){return this._options.tiles=a,this.reload(),this}setUrl(a){return this.url=a,this._options.url=a,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return l.extend({},this._options)}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}loadTile(a,h){const g=l.exported.devicePixelRatio>=2,v=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme),g,this.tileSize);a.request=l.getImage(this.map._requestManager.transformRequest(v,l.ResourceType.Tile),(w,M,P,z)=>(delete a.request,a.aborted?(a.state="unloaded",h(null)):w?(a.state="errored",h(w)):M?(this.map._refreshExpiredTiles&&a.setExpiryData({cacheControl:P,expires:z}),a.setTexture(M,this.map.painter),a.state="loaded",l.cacheEntryPossiblyAdded(this.dispatcher),void h(null)):h(null)))}static loadTileData(a,h,g){a.setTexture(h,g)}static unloadTileData(a,h){a.texture&&h.saveTileTexture(a.texture)}abortTile(a,h){a.request&&(a.request.cancel(),delete a.request),h()}unloadTile(a,h){a.texture&&this.map.painter.saveTileTexture(a.texture),h()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function an(f,a,h,g,v,w,M,P){const z=[f,h,v,a,g,w,1,1,1],$=[M,P,1],B=l.adjoint([],z),[W,ee,oe]=l.transformMat3($,$,l.transpose(B,B));return l.multiply$1(z,[W,0,0,0,ee,0,0,0,oe],z)}class hn extends l.Evented{constructor(a,h,g,v){super(),this.id=a,this.dispatcher=g,this.coordinates=h.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(v),this.options=h,this._dirty=!1}load(a,h){this._loaded=h||!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=l.getImage(this.map._requestManager.transformRequest(this.url,l.ResourceType.Image),(g,v)=>{if(this._imageRequest=null,this._loaded=!0,g)this.fire(new l.ErrorEvent(g));else if(v){const{HTMLImageElement:w}=l.window;this.image=v instanceof w?l.exported.getImageData(v):v,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,a&&(this.coordinates=a),this._finishLoading()}})}loaded(){return this._loaded}updateImage(a){return this.image&&a.url?(this._imageRequest&&a.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=a.url,this.load(a.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(a){this.map=a,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(a){this.coordinates=a,this._boundsArray=void 0;const h=a.map(l.MercatorCoordinate.fromLngLat);return this.tileID=function(g){let v=1/0,w=1/0,M=-1/0,P=-1/0;for(const W of g)v=Math.min(v,W.x),w=Math.min(w,W.y),M=Math.max(M,W.x),P=Math.max(P,W.y);const z=Math.max(M-v,P-w),$=Math.max(0,Math.floor(-Math.log(z)/Math.LN2)),B=Math.pow(2,$);return new l.CanonicalTileID($,Math.floor((v+M)/2*B),Math.floor((w+P)/2*B))}(h),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(a){for(const z in this.tiles){const $=this.tiles[z];$.state!=="loaded"&&($.state="loaded",$.texture=this.texture)}if(this._boundsArray)return;const h=l.tileTransform(this.tileID,this.map.transform.projection),[g,v,w,M]=this.coordinates.map(z=>{const $=h.projection.project(z[0],z[1]);return l.getTilePoint(h,$)._round()});this.perspectiveTransform=function(z,$,B,W,ee,oe,ae,se,le,Z){const ie=an(0,0,z,0,0,$,z,$),de=an(B,W,ee,oe,ae,se,le,Z);return l.multiply$1(de,l.adjoint(ie,ie),de),[de[6]/de[8]*z/l.EXTENT,de[7]/de[8]*$/l.EXTENT]}(this.width,this.height,g.x,g.y,v.x,v.y,M.x,M.y,w.x,w.y);const P=this._boundsArray=new l.StructArrayLayout4i8;P.emplaceBack(g.x,g.y,0,0),P.emplaceBack(v.x,v.y,l.EXTENT,0),P.emplaceBack(M.x,M.y,0,l.EXTENT),P.emplaceBack(w.x,w.y,l.EXTENT,l.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=a.createVertexBuffer(P,l.boundsAttributes.members),this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const a=this.map.painter.context,h=a.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new l.Texture(a,this.image,h.RGBA),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(a)}loadTile(a,h){this.tileID&&this.tileID.equals(a.tileID.canonical)?(this.tiles[String(a.tileID.wrap)]=a,a.buckets={},h(null)):(a.state="errored",h(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const ln={vector:wt,raster:pt,"raster-dem":class extends pt{constructor(f,a,h,g){super(f,a,h,g),this.type="raster-dem",this.maxzoom=22,this._options=l.extend({type:"raster-dem"},a),this.encoding=a.encoding||"mapbox"}loadTile(f,a){const h=this.map._requestManager.normalizeTileURL(f.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function g(v,w){v&&(f.state="errored",a(v)),w&&(f.dem=w,f.dem.onDeserialize(),f.needsHillshadePrepare=!0,f.needsDEMTextureUpload=!0,f.state="loaded",a(null))}f.request=l.getImage(this.map._requestManager.transformRequest(h,l.ResourceType.Tile),function(v,w,M,P){if(delete f.request,f.aborted)f.state="unloaded",a(null);else if(v)f.state="errored",a(v);else if(w){this.map._refreshExpiredTiles&&f.setExpiryData({cacheControl:M,expires:P});const z=l.window.ImageBitmap&&w instanceof l.window.ImageBitmap&&(Bo==null&&(Bo=l.window.OffscreenCanvas&&new l.window.OffscreenCanvas(1,1).getContext("2d")&&typeof l.window.createImageBitmap=="function"),Bo),$=1-(w.width-l.prevPowerOfTwo(w.width))/2;$<1||f.neighboringTiles||(f.neighboringTiles=this._getNeighboringTiles(f.tileID));const B=z?w:l.exported.getImageData(w,$),W={uid:f.uid,coord:f.tileID,source:this.id,rawImageData:B,encoding:this.encoding,padding:$};f.actor&&f.state!=="expired"||(f.actor=this.dispatcher.getActor(),f.actor.send("loadDEMTile",W,g.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(f){const a=f.canonical,h=Math.pow(2,a.z),g=(a.x-1+h)%h,v=a.x===0?f.wrap-1:f.wrap,w=(a.x+1+h)%h,M=a.x+1===h?f.wrap+1:f.wrap,P={};return P[new l.OverscaledTileID(f.overscaledZ,v,a.z,g,a.y).key]={backfilled:!1},P[new l.OverscaledTileID(f.overscaledZ,M,a.z,w,a.y).key]={backfilled:!1},a.y>0&&(P[new l.OverscaledTileID(f.overscaledZ,v,a.z,g,a.y-1).key]={backfilled:!1},P[new l.OverscaledTileID(f.overscaledZ,f.wrap,a.z,a.x,a.y-1).key]={backfilled:!1},P[new l.OverscaledTileID(f.overscaledZ,M,a.z,w,a.y-1).key]={backfilled:!1}),a.y+1<h&&(P[new l.OverscaledTileID(f.overscaledZ,v,a.z,g,a.y+1).key]={backfilled:!1},P[new l.OverscaledTileID(f.overscaledZ,f.wrap,a.z,a.x,a.y+1).key]={backfilled:!1},P[new l.OverscaledTileID(f.overscaledZ,M,a.z,w,a.y+1).key]={backfilled:!1}),P}unloadTile(f){f.demTexture&&this.map.painter.saveTileTexture(f.demTexture),f.fbo&&(f.fbo.destroy(),delete f.fbo),f.dem&&delete f.dem,delete f.neighboringTiles,f.state="unloaded"}},geojson:class extends l.Evented{constructor(f,a,h,g){super(),this.id=f,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=h.getActor(),this.setEventedParent(g),this._data=a.data,this._options=l.extend({},a),this._collectResourceTiming=a.collectResourceTiming,a.maxzoom!==void 0&&(this.maxzoom=a.maxzoom),a.type&&(this.type=a.type),a.attribution&&(this.attribution=a.attribution),this.promoteId=a.promoteId;const v=l.EXTENT/this.tileSize;this.workerOptions=l.extend({source:this.id,cluster:a.cluster||!1,geojsonVtOptions:{buffer:(a.buffer!==void 0?a.buffer:128)*v,tolerance:(a.tolerance!==void 0?a.tolerance:.375)*v,extent:l.EXTENT,maxZoom:this.maxzoom,lineMetrics:a.lineMetrics||!1,generateId:a.generateId||!1},superclusterOptions:{maxZoom:a.clusterMaxZoom!==void 0?a.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,a.clusterMinPoints||2),extent:l.EXTENT,radius:(a.clusterRadius!==void 0?a.clusterRadius:50)*v,log:!1,generateId:a.generateId||!1},clusterProperties:a.clusterProperties,filter:a.filter},a.workerOptions)}onAdd(f){this.map=f,this.setData(this._data)}setData(f){return this._data=f,this._updateWorkerData(),this}getClusterExpansionZoom(f,a){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:f,source:this.id},a),this}getClusterChildren(f,a){return this.actor.send("geojson.getClusterChildren",{clusterId:f,source:this.id},a),this}getClusterLeaves(f,a,h,g){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:f,limit:a,offset:h},g),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new l.Event("dataloading",{dataType:"source"})),this._loaded=!1;const f=l.extend({},this.workerOptions),a=this._data;typeof a=="string"?(f.request=this.map._requestManager.transformRequest(l.exported.resolveURL(a),l.ResourceType.Source),f.request.collectResourceTiming=this._collectResourceTiming):f.data=JSON.stringify(a),this._pendingLoad=this.actor.send(`${this.type}.loadData`,f,(h,g)=>{if(this._loaded=!0,this._pendingLoad=null,h)this.fire(new l.ErrorEvent(h));else{const v={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&g&&g.resourceTiming&&g.resourceTiming[this.id]&&(v.resourceTiming=g.resourceTiming[this.id]),this.fire(new l.Event("data",v)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(f,a){const h=f.actor?"reloadTile":"loadTile";f.actor=this.actor,f.request=this.actor.send(h,{type:this.type,uid:f.uid,tileID:f.tileID,tileZoom:f.tileZoom,zoom:f.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:l.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(g,v)=>(delete f.request,f.unloadVectorData(),f.aborted?a(null):g?a(g):(f.loadVectorData(v,this.map.painter,h==="reloadTile"),a(null))),void 0,h==="loadTile")}abortTile(f){f.request&&(f.request.cancel(),delete f.request),f.aborted=!0}unloadTile(f){f.unloadVectorData(),this.actor.send("removeTile",{uid:f.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return l.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends hn{constructor(f,a,h,g){super(f,a,h,g),this.roundZoom=!0,this.type="video",this.options=a}load(){this._loaded=!1;const f=this.options;this.urls=[];for(const a of f.urls)this.urls.push(this.map._requestManager.transformRequest(a,l.ResourceType.Source).url);l.getVideo(this.urls,(a,h)=>{this._loaded=!0,a?this.fire(new l.ErrorEvent(a)):h&&(this.video=h,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(f){if(this.video){const a=this.video.seekable;f<a.start(0)||f>a.end(0)?this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${a.start(0)} and ${a.end(0)}-second mark.`))):this.video.currentTime=f}}getVideo(){return this.video}onAdd(f){this.map||(this.map=f,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const f=this.map.painter.context,a=f.gl;this.texture?this.video.paused||(this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE),a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,this.video)):(this.texture=new l.Texture(f,this.video,a.RGBA),this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(f)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:hn,canvas:class extends hn{constructor(f,a,h,g){super(f,a,h,g),a.coordinates?Array.isArray(a.coordinates)&&a.coordinates.length===4&&!a.coordinates.some(v=>!Array.isArray(v)||v.length!==2||v.some(w=>typeof w!="number"))||this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${f}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${f}`,null,'missing required property "coordinates"'))),a.animate&&typeof a.animate!="boolean"&&this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${f}`,null,'optional "animate" property must be a boolean value'))),a.canvas?typeof a.canvas=="string"||a.canvas instanceof l.window.HTMLCanvasElement||this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${f}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${f}`,null,'missing required property "canvas"'))),this.options=a,this.animate=a.animate===void 0||a.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof l.window.HTMLCanvasElement?this.options.canvas:l.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(f){this.map=f,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let f=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,f=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,f=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const a=this.map.painter.context;this.texture?(f||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new l.Texture(a,this.canvas,a.gl.RGBA,{premultiply:!0}),this._prepareData(a)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const f of[this.canvas.width,this.canvas.height])if(isNaN(f)||f<=0)return!0;return!1}},custom:class extends l.Evented{constructor(f,a,h,g){super(),this.id=f,this.type="custom",this._dataType="raster",this._dispatcher=h,this._implementation=a,this.setEventedParent(g),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new l.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new l.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new vn(this._implementation.bounds,this.minzoom,this.maxzoom)),a.update=this._update.bind(this),a.clearTiles=this._clearTiles.bind(this),a.coveringTiles=this._coveringTiles.bind(this),l.extend(this,l.pick(a,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return l.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(f){this._map=f,this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(f),this.load()}onRemove(f){this._implementation.onRemove&&this._implementation.onRemove(f)}hasTile(f){if(this._implementation.hasTile){const{x:a,y:h,z:g}=f.canonical;return this._implementation.hasTile({x:a,y:h,z:g})}return!this.tileBounds||this.tileBounds.contains(f.canonical)}loadTile(f,a){const{x:h,y:g,z:v}=f.tileID.canonical,w=new l.window.AbortController;f.request=Promise.resolve(this._implementation.loadTile({x:h,y:g,z:v},{signal:w.signal})).then(function(M){return delete f.request,f.aborted?(f.state="unloaded",a(null)):M===void 0?(f.state="errored",a(null)):M===null?(this.loadTileData(f,{width:this.tileSize,height:this.tileSize,data:null}),f.state="loaded",a(null)):function(P){return P instanceof l.window.ImageData||P instanceof l.window.HTMLCanvasElement||P instanceof l.window.ImageBitmap||P instanceof l.window.HTMLImageElement}(M)?(this.loadTileData(f,M),f.state="loaded",void a(null)):(f.state="errored",a(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}.bind(this)).catch(M=>{M.code!==20&&(f.state="errored",a(M))}),f.request.cancel=()=>w.abort()}loadTileData(f,a){pt.loadTileData(f,a,this._map.painter)}unloadTileData(f){pt.unloadTileData(f,this._map.painter)}unloadTile(f,a){if(this.unloadTileData(f),this._implementation.unloadTile){const{x:h,y:g,z:v}=f.tileID.canonical;this._implementation.unloadTile({x:h,y:g,z:v})}a()}abortTile(f,a){f.request&&f.request.cancel&&(f.request.cancel(),delete f.request),a()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(f=>({x:f.canonical.x,y:f.canonical.y,z:f.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"}))}}},dn=function(f,a,h,g){const v=new ln[a.type](f,a,h,g);if(v.id!==f)throw new Error(`Expected Source id to be ${f} instead of ${v.id}`);return l.bindAll(["load","abort","unload","serialize","prepare"],v),v};function bn(f,a){const h=l.identity([]);return l.scale(h,h,[.5*f.width,.5*-f.height,1]),l.translate(h,h,[1,-1,0]),l.multiply(h,h,f.calculateProjMatrix(a.toUnwrapped())),Float32Array.from(h)}function or(f,a,h,g,v,w,M,P=!1){const z=f.tilesIn(g,M,P);z.sort(ii);const $=[];for(const W of z)$.push({wrappedTileID:W.tile.tileID.wrapped().key,queryResults:W.tile.queryRenderedFeatures(a,h,f._state,W,v,w,bn(f.transform,W.tile.tileID),P)});const B=function(W){const ee={},oe={};for(const ae of W){const se=ae.queryResults,le=ae.wrappedTileID,Z=oe[le]=oe[le]||{};for(const ie in se){const de=se[ie],pe=Z[ie]=Z[ie]||{},Ce=ee[ie]=ee[ie]||[];for(const Me of de)pe[Me.featureIndex]||(pe[Me.featureIndex]=!0,Ce.push(Me))}}return ee}($);for(const W in B)B[W].forEach(ee=>{const oe=ee.feature,ae=oe.layer;ae&&ae.type!=="background"&&ae.type!=="sky"&&(oe.source=ae.source,ae["source-layer"]&&(oe.sourceLayer=ae["source-layer"]),oe.state=oe.id!==void 0?f.getFeatureState(ae["source-layer"],oe.id):{})});return B}function Er(f,a){const h=f.getRenderableIds().map(w=>f.getTileByID(w)),g=[],v={};for(let w=0;w<h.length;w++){const M=h[w],P=M.tileID.canonical.key;v[P]||(v[P]=!0,M.querySourceFeatures(g,a))}return g}function ii(f,a){const h=f.tileID,g=a.tileID;return h.overscaledZ-g.overscaledZ||h.canonical.y-g.canonical.y||h.wrap-g.wrap||h.canonical.x-g.canonical.x}function Rr(){return yl.workerClass!=null?new yl.workerClass:new l.window.Worker(yl.workerUrl)}const Vo="mapboxgl_preloaded_worker_pool";class Gr{constructor(){this.active={}}acquire(a){if(!this.workers)for(this.workers=[];this.workers.length<Gr.workerCount;)this.workers.push(new Rr);return this.active[a]=!0,this.workers.slice()}release(a){delete this.active[a],this.numActive()===0&&(this.workers.forEach(h=>{h.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Vo]}numActive(){return Object.keys(this.active).length}}let yi;function Qa(){return yi||(yi=new Gr),yi}function Sx(f,a){const h={};for(const g in f)g!=="ref"&&(h[g]=f[g]);return l.refProperties.forEach(g=>{g in a&&(h[g]=a[g])}),h}function Um(f){f=f.slice();const a=Object.create(null);for(let h=0;h<f.length;h++)a[f[h].id]=f[h];for(let h=0;h<f.length;h++)"ref"in f[h]&&(f[h]=Sx(f[h],a[f[h].ref]));return f}Gr.workerCount=2;const kn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function Bd(f,a,h){h.push({command:kn.addSource,args:[f,a[f]]})}function dc(f,a,h){a.push({command:kn.removeSource,args:[f]}),h[f]=!0}function $d(f,a,h,g){dc(f,h,g),Bd(f,a,h)}function Au(f,a,h){let g;for(g in f[h])if(f[h].hasOwnProperty(g)&&g!=="data"&&!_(f[h][g],a[h][g]))return!1;for(g in a[h])if(a[h].hasOwnProperty(g)&&g!=="data"&&!_(f[h][g],a[h][g]))return!1;return!0}function Go(f,a,h,g,v,w){let M;for(M in a=a||{},f=f||{})f.hasOwnProperty(M)&&(_(f[M],a[M])||h.push({command:w,args:[g,M,a[M],v]}));for(M in a)a.hasOwnProperty(M)&&!f.hasOwnProperty(M)&&(_(f[M],a[M])||h.push({command:w,args:[g,M,a[M],v]}))}function hs(f){return f.id}function jd(f,a){return f[a.id]=a,f}class Ud{constructor(a,h){this.reset(a,h)}reset(a,h){this.points=a||[],this._distances=[0];for(let g=1;g<this.points.length;g++)this._distances[g]=this._distances[g-1]+this.points[g].dist(this.points[g-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(h||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(a){if(this.points.length===1)return this.points[0];a=l.clamp(a,0,1);let h=1,g=this._distances[h];const v=a*this.paddedLength+this.padding;for(;g<v&&h<this._distances.length;)g=this._distances[++h];const w=h-1,M=this._distances[w],P=g-M,z=P>0?(v-M)/P:0;return this.points[w].mult(1-z).add(this.points[h].mult(z))}}class ma{constructor(a,h,g){const v=this.boxCells=[],w=this.circleCells=[];this.xCellCount=Math.ceil(a/g),this.yCellCount=Math.ceil(h/g);for(let M=0;M<this.xCellCount*this.yCellCount;M++)v.push([]),w.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=a,this.height=h,this.xScale=this.xCellCount/a,this.yScale=this.yCellCount/h,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(a,h,g,v,w){this._forEachCell(h,g,v,w,this._insertBoxCell,this.boxUid++),this.boxKeys.push(a),this.bboxes.push(h),this.bboxes.push(g),this.bboxes.push(v),this.bboxes.push(w)}insertCircle(a,h,g,v){this._forEachCell(h-v,g-v,h+v,g+v,this._insertCircleCell,this.circleUid++),this.circleKeys.push(a),this.circles.push(h),this.circles.push(g),this.circles.push(v)}_insertBoxCell(a,h,g,v,w,M){this.boxCells[w].push(M)}_insertCircleCell(a,h,g,v,w,M){this.circleCells[w].push(M)}_query(a,h,g,v,w,M){if(g<0||a>this.width||v<0||h>this.height)return!w&&[];const P=[];if(a<=0&&h<=0&&this.width<=g&&this.height<=v){if(w)return!0;for(let z=0;z<this.boxKeys.length;z++)P.push({key:this.boxKeys[z],x1:this.bboxes[4*z],y1:this.bboxes[4*z+1],x2:this.bboxes[4*z+2],y2:this.bboxes[4*z+3]});for(let z=0;z<this.circleKeys.length;z++){const $=this.circles[3*z],B=this.circles[3*z+1],W=this.circles[3*z+2];P.push({key:this.circleKeys[z],x1:$-W,y1:B-W,x2:$+W,y2:B+W})}return M?P.filter(M):P}return this._forEachCell(a,h,g,v,this._queryCell,P,{hitTest:w,seenUids:{box:{},circle:{}}},M),w?P.length>0:P}_queryCircle(a,h,g,v,w){const M=a-g,P=a+g,z=h-g,$=h+g;if(P<0||M>this.width||$<0||z>this.height)return!v&&[];const B=[];return this._forEachCell(M,z,P,$,this._queryCellCircle,B,{hitTest:v,circle:{x:a,y:h,radius:g},seenUids:{box:{},circle:{}}},w),v?B.length>0:B}query(a,h,g,v,w){return this._query(a,h,g,v,!1,w)}hitTest(a,h,g,v,w){return this._query(a,h,g,v,!0,w)}hitTestCircle(a,h,g,v){return this._queryCircle(a,h,g,!0,v)}_queryCell(a,h,g,v,w,M,P,z){const $=P.seenUids,B=this.boxCells[w];if(B!==null){const ee=this.bboxes;for(const oe of B)if(!$.box[oe]){$.box[oe]=!0;const ae=4*oe;if(a<=ee[ae+2]&&h<=ee[ae+3]&&g>=ee[ae+0]&&v>=ee[ae+1]&&(!z||z(this.boxKeys[oe]))){if(P.hitTest)return M.push(!0),!0;M.push({key:this.boxKeys[oe],x1:ee[ae],y1:ee[ae+1],x2:ee[ae+2],y2:ee[ae+3]})}}}const W=this.circleCells[w];if(W!==null){const ee=this.circles;for(const oe of W)if(!$.circle[oe]){$.circle[oe]=!0;const ae=3*oe;if(this._circleAndRectCollide(ee[ae],ee[ae+1],ee[ae+2],a,h,g,v)&&(!z||z(this.circleKeys[oe]))){if(P.hitTest)return M.push(!0),!0;{const se=ee[ae],le=ee[ae+1],Z=ee[ae+2];M.push({key:this.circleKeys[oe],x1:se-Z,y1:le-Z,x2:se+Z,y2:le+Z})}}}}}_queryCellCircle(a,h,g,v,w,M,P,z){const $=P.circle,B=P.seenUids,W=this.boxCells[w];if(W!==null){const oe=this.bboxes;for(const ae of W)if(!B.box[ae]){B.box[ae]=!0;const se=4*ae;if(this._circleAndRectCollide($.x,$.y,$.radius,oe[se+0],oe[se+1],oe[se+2],oe[se+3])&&(!z||z(this.boxKeys[ae])))return M.push(!0),!0}}const ee=this.circleCells[w];if(ee!==null){const oe=this.circles;for(const ae of ee)if(!B.circle[ae]){B.circle[ae]=!0;const se=3*ae;if(this._circlesCollide(oe[se],oe[se+1],oe[se+2],$.x,$.y,$.radius)&&(!z||z(this.circleKeys[ae])))return M.push(!0),!0}}}_forEachCell(a,h,g,v,w,M,P,z){const $=this._convertToXCellCoord(a),B=this._convertToYCellCoord(h),W=this._convertToXCellCoord(g),ee=this._convertToYCellCoord(v);for(let oe=$;oe<=W;oe++)for(let ae=B;ae<=ee;ae++)if(w.call(this,a,h,g,v,this.xCellCount*ae+oe,M,P,z))return}_convertToXCellCoord(a){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(a*this.xScale)))}_convertToYCellCoord(a){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(a*this.yScale)))}_circlesCollide(a,h,g,v,w,M){const P=v-a,z=w-h,$=g+M;return $*$>P*P+z*z}_circleAndRectCollide(a,h,g,v,w,M,P){const z=(M-v)/2,$=Math.abs(a-(v+z));if($>z+g)return!1;const B=(P-w)/2,W=Math.abs(h-(w+B));if(W>B+g)return!1;if($<=z||W<=B)return!0;const ee=$-z,oe=W-B;return ee*ee+oe*oe<=g*g}}const ds={unknown:0,flipRequired:1,flipNotRequired:2},pc=Math.tan(85*Math.PI/180);function Qe(f,a,h,g,v,w,M){const P=l.create();if(h)if(w.name==="globe"){const z=l.calculateGlobeLabelMatrix(v,a);l.multiply(P,P,z)}else{const z=ve([],M);P[0]=z[0],P[1]=z[1],P[4]=z[2],P[5]=z[3],g||l.rotateZ(P,P,v.angle)}else l.multiply(P,v.labelPlaneMatrix,f);return P}function ps(f,a,h,g,v,w,M){const P=Qe(f,a,h,g,v,w,M);return w.name==="globe"&&h||(P[2]=P[6]=P[10]=P[14]=0),P}function Tr(f,a,h,g,v,w,M){if(h){if(w.name==="globe"){const P=Qe(f,a,h,g,v,w,M);return l.invert(P,P),l.multiply(P,f,P),P}{const P=l.clone(f),z=l.identity([]);return z[0]=M[0],z[1]=M[1],z[4]=M[2],z[5]=M[3],l.multiply(P,P,z),g||l.rotateZ(P,P,-v.angle),P}}return v.glCoordMatrix}function qr(f,a,h,g){const v=[f,a,h,1];h?l.transformMat4$1(v,v,g):mn(v,v,g);const w=v[3];return v[0]/=w,v[1]/=w,v[2]/=w,v}function Vm(f,a){return Math.min(.5+f/a*.5,1.5)}function qo(f,a){const h=f[0]/f[3],g=f[1]/f[3];return h>=-a[0]&&h<=a[0]&&g>=-a[1]&&g<=a[1]}function Vd(f,a,h,g,v,w,M,P,z,$){const B=h.transform,W=g?f.textSizeData:f.iconSizeData,ee=l.evaluateSizeForZoom(W,h.transform.zoom),oe=B.projection.name==="globe",ae=[256/h.width*2+1,256/h.height*2+1],se=g?f.text.dynamicLayoutVertexArray:f.icon.dynamicLayoutVertexArray;se.clear();let le=null;oe&&(le=g?f.text.globeExtVertexArray:f.icon.globeExtVertexArray);const Z=f.lineVertexArray,ie=g?f.text.placedSymbolArray:f.icon.placedSymbolArray,de=h.transform.width/h.transform.height;let pe,Ce=!1;for(let Me=0;Me<ie.length;Me++){const Ae=ie.get(Me),{numGlyphs:Ne,writingMode:ze}=Ae;if(ze!==l.WritingMode.vertical||Ce||pe===l.WritingMode.horizontal||(Ce=!0),pe=ze,(Ae.hidden||ze===l.WritingMode.vertical)&&!Ce){_o(Ne,se);continue}Ce=!1;const Ue=new l.Point(Ae.tileAnchorX,Ae.tileAnchorY);let{x:ct,y:Be,z:nt}=B.projection.projectTilePoint(Ue.x,Ue.y,$.canonical);if(z){const[Qt,Nt,Xt]=z(Ue);ct+=Qt,Be+=Nt,nt+=Xt}const He=[ct,Be,nt,1];if(l.transformMat4$1(He,He,a),!qo(He,ae)){_o(Ne,se);continue}const lt=Vm(h.transform.cameraToCenterDistance,He[3]),je=l.evaluateSizeForFeature(W,ee,Ae),tt=M?je/lt:je*lt,ht=qr(ct,Be,nt,v);if(ht[3]<=0){_o(Ne,se);continue}let st={};const dt=M?null:z,Vt=kt(Ae,tt,!1,P,a,v,w,f.glyphOffsetArray,Z,se,le,ht,Ue,st,de,dt,B.projection,$,M);Ce=Vt.useVertical,dt&&Vt.needsFlipping&&(st={}),(Vt.notEnoughRoom||Ce||Vt.needsFlipping&&kt(Ae,tt,!0,P,a,v,w,f.glyphOffsetArray,Z,se,le,ht,Ue,st,de,dt,B.projection,$,M).notEnoughRoom)&&_o(Ne,se)}g?(f.text.dynamicLayoutVertexBuffer.updateData(se),le&&f.text.globeExtVertexBuffer.updateData(le)):(f.icon.dynamicLayoutVertexBuffer.updateData(se),le&&f.icon.globeExtVertexBuffer.updateData(le))}function Gm(f,a,h,g,v,w,M,P,z,$,B,W,ee,oe,ae,se){const{lineStartIndex:le,glyphStartIndex:Z,segment:ie}=P,de=Z+P.numGlyphs,pe=le+P.lineLength,Ce=a.getoffsetX(Z),Me=a.getoffsetX(de-1),Ae=Bi(f*Ce,h,g,v,w,M,ie,le,pe,z,$,B,W,ee,!0,oe,ae,se);if(!Ae)return null;const Ne=Bi(f*Me,h,g,v,w,M,ie,le,pe,z,$,B,W,ee,!0,oe,ae,se);return Ne?{first:Ae,last:Ne}:null}function el(f,a,h,g){return f===l.WritingMode.horizontal&&Math.abs(g)>Math.abs(h)?{useVertical:!0}:f===l.WritingMode.vertical?g>0?{needsFlipping:!0}:null:a!==ds.unknown&&function(v,w){return v===0||Math.abs(w/v)>pc}(h,g)?a===ds.flipRequired?{needsFlipping:!0}:null:h<0?{needsFlipping:!0}:null}function kt(f,a,h,g,v,w,M,P,z,$,B,W,ee,oe,ae,se,le,Z,ie){const de=a/24,pe=f.lineOffsetX*de,Ce=f.lineOffsetY*de,{lineStartIndex:Me,glyphStartIndex:Ae,numGlyphs:Ne,segment:ze,writingMode:Ue,flipState:ct}=f,Be=Me+f.lineLength,nt=He=>{if(B){const[ht,st,dt]=He.up,Vt=$.length;l.updateGlobeVertexNormal(B,Vt+0,ht,st,dt),l.updateGlobeVertexNormal(B,Vt+1,ht,st,dt),l.updateGlobeVertexNormal(B,Vt+2,ht,st,dt),l.updateGlobeVertexNormal(B,Vt+3,ht,st,dt)}const[lt,je,tt]=He.point;l.addDynamicAttributes($,lt,je,tt,He.angle)};if(Ne>1){const He=Gm(de,P,pe,Ce,h,W,ee,f,z,w,oe,se,!1,le,Z,ie);if(!He)return{notEnoughRoom:!0};if(g&&!h){let[lt,je,tt]=He.first.point,[ht,st,dt]=He.last.point;[lt,je]=qr(lt,je,tt,M),[ht,st]=qr(ht,st,dt,M);const Vt=el(Ue,ct,(ht-lt)*ae,st-je);if(f.flipState=Vt&&Vt.needsFlipping?ds.flipRequired:ds.flipNotRequired,Vt)return Vt}nt(He.first);for(let lt=Ae+1;lt<Ae+Ne-1;lt++){const je=Bi(de*P.getoffsetX(lt),pe,Ce,h,W,ee,ze,Me,Be,z,w,oe,se,!1,!1,le,Z,ie);if(!je)return $.length-=4*(lt-Ae),{notEnoughRoom:!0};nt(je)}nt(He.last)}else{if(g&&!h){const lt=qr(ee.x,ee.y,0,v),je=Me+ze+1,tt=new l.Point(z.getx(je),z.gety(je)),ht=qr(tt.x,tt.y,0,v),st=ht[3]>0?ht:fn(ee,tt,lt,1,v,void 0,le,Z.canonical),dt=el(Ue,ct,(st[0]-lt[0])*ae,st[1]-lt[1]);if(f.flipState=dt&&dt.needsFlipping?ds.flipRequired:ds.flipNotRequired,dt)return dt}const He=Bi(de*P.getoffsetX(Ae),pe,Ce,h,W,ee,ze,Me,Be,z,w,oe,se,!1,!1,le,Z,ie);if(!He)return{notEnoughRoom:!0};nt(He)}return{}}function _n(f,a,h,g,v){const{x:w,y:M,z:P}=g.projectTilePoint(f.x,f.y,a);if(!v)return qr(w,M,P,h);const[z,$,B]=v(f);return qr(w+z,M+$,P+B,h)}function fn(f,a,h,g,v,w,M,P){const z=_n(f.sub(a)._unit()._add(f),P,v,M,w);return l.sub(z,h,z),l.normalize(z,z),l.scaleAndAdd(z,h,z,g)}function Bi(f,a,h,g,v,w,M,P,z,$,B,W,ee,oe,ae,se,le,Z){const ie=g?f-a:f+a;let de=ie>0?1:-1,pe=0;g&&(de*=-1,pe=Math.PI),de<0&&(pe+=Math.PI);let Ce=P+M+(de>0?0:1)|0,Me=v,Ae=v,Ne=0,ze=0;const Ue=Math.abs(ie),ct=[],Be=[];let nt=w,He=nt;const lt=()=>fn(He,nt,Ae,Ue-Ne+1,B,ee,se,le.canonical);for(;Ne+ze<=Ue;){if(Ce+=de,Ce<P||Ce>=z)return null;if(Ae=Me,He=nt,ct.push(Ae),oe&&Be.push(He),nt=new l.Point($.getx(Ce),$.gety(Ce)),Me=W[Ce],!Me){const Xt=_n(nt,le.canonical,B,se,ee);Me=Xt[3]>0?W[Ce]=Xt:lt()}Ne+=ze,ze=l.distance(Ae,Me)}ae&&ee&&(W[Ce]&&(Me=lt(),ze=l.distance(Ae,Me)),W[Ce]=Me);const je=(Ue-Ne)/ze,tt=nt.sub(He)._mult(je)._add(He),ht=l.sub([],Me,Ae),st=l.scaleAndAdd([],Ae,ht,je);let dt=[0,0,1],Vt=ht[0],Qt=ht[1];if(Z&&(dt=se.upVector(le.canonical,tt.x,tt.y),dt[0]!==0||dt[1]!==0||dt[2]!==1)){const Xt=[dt[2],0,-dt[0]],gn=l.cross([],dt,Xt);l.normalize(Xt,Xt),l.normalize(gn,gn),Vt=l.dot(ht,Xt),Qt=l.dot(ht,gn)}if(h){const Xt=l.cross([],dt,ht);l.normalize(Xt,Xt),l.scaleAndAdd(st,st,Xt,h*de)}const Nt=pe+Math.atan2(Qt,Vt);return ct.push(st),oe&&Be.push(tt),{point:st,angle:Nt,path:ct,tilePath:Be,up:dt}}function _o(f,a){const h=a.length,g=h+4*f;a.resize(g),a.float32.fill(-1/0,4*h,4*g)}function mn(f,a,h){const g=a[0],v=a[1];return f[0]=h[0]*g+h[4]*v+h[12],f[1]=h[1]*g+h[5]*v+h[13],f[3]=h[3]*g+h[7]*v+h[15],f}const $i=100;class fc{constructor(a,h,g=new ma(a.width+200,a.height+200,25),v=new ma(a.width+200,a.height+200,25)){this.transform=a,this.grid=g,this.ignoredGrid=v,this.pitchfactor=Math.cos(a._pitch)*a.cameraToCenterDistance,this.screenRightBoundary=a.width+$i,this.screenBottomBoundary=a.height+$i,this.gridRightBoundary=a.width+200,this.gridBottomBoundary=a.height+200,this.fogState=h}placeCollisionBox(a,h,g,v,w,M,P,z){let $=g.projectedAnchorX,B=g.projectedAnchorY,W=g.projectedAnchorZ;const ee=g.elevation,oe=g.tileID,ae=a.getProjection();if(ee&&oe){const[Me,Ae,Ne]=ae.upVector(oe.canonical,g.tileAnchorX,g.tileAnchorY),ze=ae.upVectorScale(oe.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;$+=Me*ee*ze,B+=Ae*ee*ze,W+=Ne*ee*ze}const se=this.projectAndGetPerspectiveRatio(P,$,B,W,g.tileID,ae.name==="globe"||!!ee||this.transform.pitch>0,ae),le=M*se.perspectiveRatio,Z=(g.x1*h+v.x-g.padding)*le+se.point.x,ie=(g.y1*h+v.y-g.padding)*le+se.point.y,de=(g.x2*h+v.x+g.padding)*le+se.point.x,pe=(g.y2*h+v.y+g.padding)*le+se.point.y,Ce=se.perspectiveRatio<=.55||se.occluded;return!this.isInsideGrid(Z,ie,de,pe)||!w&&this.grid.hitTest(Z,ie,de,pe,z)||Ce?{box:[],offscreen:!1,occluded:se.occluded}:{box:[Z,ie,de,pe],offscreen:this.isOffscreen(Z,ie,de,pe),occluded:!1}}placeCollisionCircles(a,h,g,v,w,M,P,z,$,B,W,ee,oe,ae,se){const le=[],Z=this.transform.elevation,ie=a.getProjection(),de=Z?Z.getAtTileOffsetFunc(se,this.transform.center.lat,this.transform.worldSize,ie):null,pe=new l.Point(g.tileAnchorX,g.tileAnchorY);let{x:Ce,y:Me,z:Ae}=ie.projectTilePoint(pe.x,pe.y,se.canonical);if(de){const[tt,ht,st]=de(pe);Ce+=tt,Me+=ht,Ae+=st}const Ne=ie.name==="globe",ze=this.projectAndGetPerspectiveRatio(P,Ce,Me,Ae,se,Ne||!!Z||this.transform.pitch>0,ie),{perspectiveRatio:Ue}=ze,ct=(W?M/Ue:M*Ue)/l.ONE_EM,Be=qr(Ce,Me,Ae,z),nt=ze.signedDistanceFromCamera>0?Gm(ct,w,g.lineOffsetX*ct,g.lineOffsetY*ct,!1,Be,pe,g,v,z,{},Z&&!W?de:null,W&&!!Z,ie,se,W):null;let He=!1,lt=!1,je=!0;if(nt&&!ze.occluded){const tt=.5*oe*Ue+ae,ht=new l.Point(-100,-100),st=new l.Point(this.screenRightBoundary,this.screenBottomBoundary),dt=new Ud,{first:Vt,last:Qt}=nt,Nt=Vt.path.length;let Xt=[];for(let $t=Nt-1;$t>=1;$t--)Xt.push(Vt.path[$t]);for(let $t=1;$t<Qt.path.length;$t++)Xt.push(Qt.path[$t]);const gn=2.5*tt;$&&(Xt=Xt.map(([$t,Dn,Ln],Fn)=>(de&&!Ne&&(Ln=de(Fn<Nt-1?Vt.tilePath[Nt-1-Fn]:Qt.tilePath[Fn-Nt+2])[2]),qr($t,Dn,Ln,$))),Xt.some($t=>$t[3]<=0)&&(Xt=[]));let pn=[];if(Xt.length>0){let $t=1/0,Dn=-1/0,Ln=1/0,Fn=-1/0;for(const Rn of Xt)$t=Math.min($t,Rn[0]),Ln=Math.min(Ln,Rn[1]),Dn=Math.max(Dn,Rn[0]),Fn=Math.max(Fn,Rn[1]);Dn>=ht.x&&$t<=st.x&&Fn>=ht.y&&Ln<=st.y&&(pn=[Xt.map(Rn=>new l.Point(Rn[0],Rn[1]))],($t<ht.x||Dn>st.x||Ln<ht.y||Fn>st.y)&&(pn=l.clipLine(pn,ht.x,ht.y,st.x,st.y)))}for(const $t of pn){dt.reset($t,.25*tt);let Dn=0;Dn=dt.length<=.5*tt?1:Math.ceil(dt.paddedLength/gn)+1;for(let Ln=0;Ln<Dn;Ln++){const Fn=Ln/Math.max(Dn-1,1),Rn=dt.lerp(Fn),si=Rn.x+$i,Wr=Rn.y+$i;le.push(si,Wr,tt,0);const ro=si-tt,Xo=Wr-tt,nr=si+tt,On=Wr+tt;if(je=je&&this.isOffscreen(ro,Xo,nr,On),lt=lt||this.isInsideGrid(ro,Xo,nr,On),!h&&this.grid.hitTestCircle(si,Wr,tt,ee)&&(He=!0,!B))return{circles:[],offscreen:!1,collisionDetected:He,occluded:!1}}}}return{circles:!B&&He||!lt?[]:le,offscreen:je,collisionDetected:He,occluded:ze.occluded}}queryRenderedSymbols(a){if(a.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const h=[];let g=1/0,v=1/0,w=-1/0,M=-1/0;for(const B of a){const W=new l.Point(B.x+$i,B.y+$i);g=Math.min(g,W.x),v=Math.min(v,W.y),w=Math.max(w,W.x),M=Math.max(M,W.y),h.push(W)}const P=this.grid.query(g,v,w,M).concat(this.ignoredGrid.query(g,v,w,M)),z={},$={};for(const B of P){const W=B.key;if(z[W.bucketInstanceId]===void 0&&(z[W.bucketInstanceId]={}),z[W.bucketInstanceId][W.featureIndex])continue;const ee=[new l.Point(B.x1,B.y1),new l.Point(B.x2,B.y1),new l.Point(B.x2,B.y2),new l.Point(B.x1,B.y2)];l.polygonIntersectsPolygon(h,ee)&&(z[W.bucketInstanceId][W.featureIndex]=!0,$[W.bucketInstanceId]===void 0&&($[W.bucketInstanceId]=[]),$[W.bucketInstanceId].push(W.featureIndex))}return $}insertCollisionBox(a,h,g,v,w){(h?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:v,collisionGroupID:w},a[0],a[1],a[2],a[3])}insertCollisionCircles(a,h,g,v,w){const M=h?this.ignoredGrid:this.grid,P={bucketInstanceId:g,featureIndex:v,collisionGroupID:w};for(let z=0;z<a.length;z+=4)M.insertCircle(P,a[z],a[z+1],a[z+2])}projectAndGetPerspectiveRatio(a,h,g,v,w,M,P){const z=[h,g,v,1];let $=!1;v||this.transform.pitch>0?(l.transformMat4$1(z,z,a),this.fogState&&w&&P.name!=="globe"&&($=function(ee,oe,ae,se,le,Z){const ie=Z.calculateFogTileMatrix(le),de=[oe,ae,se];return l.transformMat4(de,de,ie),Ot(ee,de,Z.pitch,Z._fov)}(this.fogState,h,g,v,w.toUnwrapped(),this.transform)>.9)):mn(z,z,a);const B=z[3];return{point:new l.Point((z[0]/B+1)/2*this.transform.width+$i,(-z[1]/B+1)/2*this.transform.height+$i),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(P)/B*.5,1.5),signedDistanceFromCamera:B,occluded:M&&z[2]>B||$}}isOffscreen(a,h,g,v){return g<$i||a>=this.screenRightBoundary||v<$i||h>this.screenBottomBoundary}isInsideGrid(a,h,g,v){return g>=0&&a<this.gridRightBoundary&&v>=0&&h<this.gridBottomBoundary}getViewportMatrix(){const a=l.identity([]);return l.translate(a,a,[-100,-100,0]),a}}function ga(f,a,h){const g=a.createTileMatrix(f,f.worldSize,h.toUnwrapped());return l.multiply(new Float32Array(16),f.projMatrix,g)}function Qi(f,a,h){if(a.projection.name===h.projection.name)return f.projMatrix;const g=h.clone();return g.setProjection(a.projection),ga(g,a.getProjection(),f)}function tr(f,a,h){return a.name===h.projection.name?f.projMatrix:ga(h,a,f)}class qm{constructor(a,h,g,v){this.opacity=a?Math.max(0,Math.min(1,a.opacity+(a.placed?h:-h))):v&&g?1:0,this.placed=g}isHidden(){return this.opacity===0&&!this.placed}}class fs{constructor(a,h,g,v,w,M=!1){this.text=new qm(a?a.text:null,h,g,w),this.icon=new qm(a?a.icon:null,h,v,w),this.clipped=M}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class mc{constructor(a,h,g,v=!1){this.text=a,this.icon=h,this.skipFade=g,this.clipped=v}}class gc{constructor(){this.invProjMatrix=l.create(),this.viewportMatrix=l.create(),this.circles=[]}}class Gd{constructor(a,h,g,v,w){this.bucketInstanceId=a,this.featureIndex=h,this.sourceLayerIndex=g,this.bucketIndex=v,this.tileID=w}}class Hm{constructor(a){this.crossSourceCollisions=a,this.maxGroupID=0,this.collisionGroups={}}get(a){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[a]){const h=++this.maxGroupID;this.collisionGroups[a]={ID:h,predicate:g=>g.collisionGroupID===h}}return this.collisionGroups[a]}}function yc(f,a,h,g,v){const{horizontalAlign:w,verticalAlign:M}=l.getAnchorAlignment(f),P=-(w-.5)*a,z=-(M-.5)*h,$=l.evaluateVariableOffset(f,g);return new l.Point(P+$[0]*v,z+$[1]*v)}function xc(f,a,h,g,v){const w=new l.Point(f,a);return h&&w._rotate(g?v:-v),w}class Mu{constructor(a,h,g,v,w){this.transform=a.clone(),this.projection=a.projection.name,this.collisionIndex=new fc(this.transform,w),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=h,this.retainedQueryData={},this.collisionGroups=new Hm(g),this.collisionCircleArrays={},this.prevPlacement=v,v&&(v.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(a,h,g,v){const w=g.getBucket(h),M=g.latestFeatureIndex;if(!w||!M||h.id!==w.layerIds[0])return;const P=w.layers[0].layout,z=g.collisionBoxArray,$=Math.pow(2,this.transform.zoom-g.tileID.overscaledZ),B=g.tileSize/l.EXTENT,W=g.tileID.toUnwrapped();this.transform.setProjection(w.projection);const ee=(oe=g.tileID,ae=w.getProjection(),se=this.transform,ae.name===this.projection?se.calculateProjMatrix(oe.toUnwrapped()):ga(se,ae,oe));var oe,ae,se;const le=P.get("text-pitch-alignment")==="map",Z=P.get("text-rotation-alignment")==="map";h.compileFilter();const ie=h.dynamicFilter(),de=h.dynamicFilterNeedsFeature(),pe=this.transform.calculatePixelsToTileUnitsMatrix(g),Ce=ps(ee,g.tileID.canonical,le,Z,this.transform,w.getProjection(),pe);let Me=null;if(le){const ze=Tr(ee,g.tileID.canonical,le,Z,this.transform,w.getProjection(),pe);Me=l.multiply([],this.transform.labelPlaneMatrix,ze)}let Ae=null;ie&&g.latestFeatureIndex&&(Ae={unwrappedTileID:W,dynamicFilter:ie,dynamicFilterNeedsFeature:de,featureIndex:g.latestFeatureIndex}),this.retainedQueryData[w.bucketInstanceId]=new Gd(w.bucketInstanceId,M,w.sourceLayerIndex,w.index,g.tileID);const Ne={bucket:w,layout:P,posMatrix:ee,textLabelPlaneMatrix:Ce,labelToScreenMatrix:Me,clippingData:Ae,scale:$,textPixelRatio:B,holdingForFade:g.holdingForFade(),collisionBoxArray:z,partiallyEvaluatedTextSize:l.evaluateSizeForZoom(w.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:l.evaluateSizeForZoom(w.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(w.sourceID)};if(v)for(const ze of w.sortKeyRanges){const{sortKey:Ue,symbolInstanceStart:ct,symbolInstanceEnd:Be}=ze;a.push({sortKey:Ue,symbolInstanceStart:ct,symbolInstanceEnd:Be,parameters:Ne})}else a.push({symbolInstanceStart:0,symbolInstanceEnd:w.symbolInstances.length,parameters:Ne})}attemptAnchorPlacement(a,h,g,v,w,M,P,z,$,B,W,ee,oe,ae,se,le,Z,ie){const{textOffset0:de,textOffset1:pe,crossTileID:Ce}=ee,Me=[de,pe],Ae=yc(a,g,v,Me,w),Ne=this.collisionIndex.placeCollisionBox(ae,w,h,xc(Ae.x,Ae.y,M,P,this.transform.angle),W,z,$,B.predicate);if(le){const ze=ae.getSymbolInstanceIconSize(ie,this.transform.zoom,ee.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(ae,ze,le,xc(Ae.x,Ae.y,M,P,this.transform.angle),W,z,$,B.predicate).box.length===0)return}if(Ne.box.length>0){let ze;return this.prevPlacement&&this.prevPlacement.variableOffsets[Ce]&&this.prevPlacement.placements[Ce]&&this.prevPlacement.placements[Ce].text&&(ze=this.prevPlacement.variableOffsets[Ce].anchor),this.variableOffsets[Ce]={textOffset:Me,width:g,height:v,anchor:a,textScale:w,prevAnchor:ze},this.markUsedJustification(ae,a,ee,se),ae.allowVerticalPlacement&&(this.markUsedOrientation(ae,se,ee),this.placedOrientations[Ce]=se),{shift:Ae,placedGlyphBoxes:Ne}}}placeLayerBucketPart(a,h,g,v){const{bucket:w,layout:M,posMatrix:P,textLabelPlaneMatrix:z,labelToScreenMatrix:$,clippingData:B,textPixelRatio:W,holdingForFade:ee,collisionBoxArray:oe,partiallyEvaluatedTextSize:ae,partiallyEvaluatedIconSize:se,collisionGroup:le}=a.parameters,Z=M.get("text-optional"),ie=M.get("icon-optional"),de=M.get("text-allow-overlap"),pe=M.get("icon-allow-overlap"),Ce=M.get("text-rotation-alignment")==="map",Me=M.get("text-pitch-alignment")==="map",Ae=M.get("icon-text-fit")!=="none",Ne=M.get("symbol-z-order")==="viewport-y";this.transform.setProjection(w.projection);let ze=de&&(pe||!w.hasIconData()||ie),Ue=pe&&(de||!w.hasTextData()||Z);!w.collisionArrays&&oe&&w.deserializeCollisionBoxes(oe),g&&v&&w.updateCollisionDebugBuffers(this.transform.zoom,oe);const ct=(Be,nt,He)=>{const{crossTileID:lt,numVerticalGlyphVertices:je}=Be;if(B){const nr={zoom:this.transform.zoom,pitch:this.transform.pitch};let On=null;if(B.dynamicFilterNeedsFeature){const Cn=this.retainedQueryData[w.bucketInstanceId];On=B.featureIndex.loadFeature({featureIndex:Be.featureIndex,bucketIndex:Cn.bucketIndex,sourceLayerIndex:Cn.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,B.dynamicFilter)(nr,On,this.retainedQueryData[w.bucketInstanceId].tileID.canonical,new l.Point(Be.tileAnchorX,Be.tileAnchorY),this.transform.calculateDistanceTileData(B.unwrappedTileID)))return this.placements[lt]=new mc(!1,!1,!1,!0),void h.add(lt)}if(h.has(lt))return;if(ee)return void(this.placements[lt]=new mc(!1,!1,!1));let tt=!1,ht=!1,st=!0,dt=!1,Vt=!1,Qt=null,Nt={box:null,offscreen:null,occluded:null},Xt={box:null,offscreen:null,occluded:null},gn=null,pn=null,$t=null,Dn=0,Ln=0,Fn=0;He.textFeatureIndex?Dn=He.textFeatureIndex:Be.useRuntimeCollisionCircles&&(Dn=Be.featureIndex),He.verticalTextFeatureIndex&&(Ln=He.verticalTextFeatureIndex);const Rn=nr=>{nr.tileID=this.retainedQueryData[w.bucketInstanceId].tileID;const On=this.transform.elevation;(On||nr.elevation)&&(nr.elevation=On?On.getAtTileOffset(nr.tileID,nr.tileAnchorX,nr.tileAnchorY):0)},si=He.textBox;if(si){Rn(si);const nr=Cn=>{let Sr=l.WritingMode.horizontal;if(w.allowVerticalPlacement&&!Cn&&this.prevPlacement){const xi=this.prevPlacement.placedOrientations[lt];xi&&(this.placedOrientations[lt]=xi,Sr=xi,this.markUsedOrientation(w,Sr,Be))}return Sr},On=(Cn,Sr)=>{if(w.allowVerticalPlacement&&je>0&&He.verticalTextBox){for(const xi of w.writingModes)if(xi===l.WritingMode.vertical?(Nt=Sr(),Xt=Nt):Nt=Cn(),Nt&&Nt.box&&Nt.box.length)break}else Nt=Cn()};if(M.get("text-variable-anchor")){let Cn=M.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[lt]){const Kn=this.prevPlacement.variableOffsets[lt];Cn.indexOf(Kn.anchor)>0&&(Cn=Cn.filter(Ai=>Ai!==Kn.anchor),Cn.unshift(Kn.anchor))}const Sr=(Kn,Ai,th)=>{const Ta=w.getSymbolInstanceTextSize(ae,Be,this.transform.zoom,nt),Oc=(Kn.x2-Kn.x1)*Ta+2*Kn.padding,bs=(Kn.y2-Kn.y1)*Ta+2*Kn.padding,Zs=Ae&&!pe?Ai:null;Zs&&Rn(Zs);let Sa={box:[],offscreen:!1,occluded:!1};const nh=de?2*Cn.length:Cn.length;for(let Bc=0;Bc<nh;++Bc){const Np=this.attemptAnchorPlacement(Cn[Bc%Cn.length],Kn,Oc,bs,Ta,Ce,Me,W,P,le,Bc>=Cn.length,Be,nt,w,th,Zs,ae,se);if(Np&&(Sa=Np.placedGlyphBoxes,Sa&&Sa.box&&Sa.box.length)){tt=!0,Qt=Np.shift;break}}return Sa};On(()=>Sr(si,He.iconBox,l.WritingMode.horizontal),()=>{const Kn=He.verticalTextBox;return Kn&&Rn(Kn),w.allowVerticalPlacement&&!(Nt&&Nt.box&&Nt.box.length)&&je>0&&Kn?Sr(Kn,He.verticalIconBox,l.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),Nt&&(tt=Nt.box,st=Nt.offscreen,dt=Nt.occluded);const xi=nr(!(!Nt||!Nt.box));if(!tt&&this.prevPlacement){const Kn=this.prevPlacement.variableOffsets[lt];Kn&&(this.variableOffsets[lt]=Kn,this.markUsedJustification(w,Kn.anchor,Be,xi))}}else{const Cn=(Sr,xi)=>{const Kn=w.getSymbolInstanceTextSize(ae,Be,this.transform.zoom,nt),Ai=this.collisionIndex.placeCollisionBox(w,Kn,Sr,new l.Point(0,0),de,W,P,le.predicate);return Ai&&Ai.box&&Ai.box.length&&(this.markUsedOrientation(w,xi,Be),this.placedOrientations[lt]=xi),Ai};On(()=>Cn(si,l.WritingMode.horizontal),()=>{const Sr=He.verticalTextBox;return w.allowVerticalPlacement&&je>0&&Sr?(Rn(Sr),Cn(Sr,l.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),nr(!!(Nt&&Nt.box&&Nt.box.length))}}if(gn=Nt,tt=gn&&gn.box&&gn.box.length>0,st=gn&&gn.offscreen,dt=gn&&gn.occluded,Be.useRuntimeCollisionCircles){const nr=w.text.placedSymbolArray.get(Be.centerJustifiedTextSymbolIndex>=0?Be.centerJustifiedTextSymbolIndex:Be.verticalPlacedTextSymbolIndex),On=l.evaluateSizeForFeature(w.textSizeData,ae,nr),Cn=M.get("text-padding");pn=this.collisionIndex.placeCollisionCircles(w,de,nr,w.lineVertexArray,w.glyphOffsetArray,On,P,z,$,g,Me,le.predicate,Be.collisionCircleDiameter*On/l.ONE_EM,Cn,this.retainedQueryData[w.bucketInstanceId].tileID),tt=de||pn.circles.length>0&&!pn.collisionDetected,st=st&&pn.offscreen,dt=pn.occluded}if(He.iconFeatureIndex&&(Fn=He.iconFeatureIndex),He.iconBox){const nr=On=>{Rn(On);const Cn=Ae&&Qt?xc(Qt.x,Qt.y,Ce,Me,this.transform.angle):new l.Point(0,0),Sr=w.getSymbolInstanceIconSize(se,this.transform.zoom,Be.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(w,Sr,On,Cn,pe,W,P,le.predicate)};Xt&&Xt.box&&Xt.box.length&&He.verticalIconBox?($t=nr(He.verticalIconBox),ht=$t.box.length>0):($t=nr(He.iconBox),ht=$t.box.length>0),st=st&&$t.offscreen,Vt=$t.occluded}const Wr=Z||Be.numHorizontalGlyphVertices===0&&je===0,ro=ie||Be.numIconVertices===0;if(Wr||ro?ro?Wr||(ht=ht&&tt):tt=ht&&tt:ht=tt=ht&&tt,tt&&gn&&gn.box&&this.collisionIndex.insertCollisionBox(gn.box,M.get("text-ignore-placement"),w.bucketInstanceId,Xt&&Xt.box&&Ln?Ln:Dn,le.ID),ht&&$t&&this.collisionIndex.insertCollisionBox($t.box,M.get("icon-ignore-placement"),w.bucketInstanceId,Fn,le.ID),pn&&(tt&&this.collisionIndex.insertCollisionCircles(pn.circles,M.get("text-ignore-placement"),w.bucketInstanceId,Dn,le.ID),g)){const nr=w.bucketInstanceId;let On=this.collisionCircleArrays[nr];On===void 0&&(On=this.collisionCircleArrays[nr]=new gc);for(let Cn=0;Cn<pn.circles.length;Cn+=4)On.circles.push(pn.circles[Cn+0]),On.circles.push(pn.circles[Cn+1]),On.circles.push(pn.circles[Cn+2]),On.circles.push(pn.collisionDetected?1:0)}const Xo=w.projection.name!=="globe";ze=ze&&(Xo||!dt),Ue=Ue&&(Xo||!Vt),this.placements[lt]=new mc(tt||ze,ht||Ue,st||w.justReloaded),h.add(lt)};if(Ne){const Be=w.getSortedSymbolIndexes(this.transform.angle);for(let nt=Be.length-1;nt>=0;--nt){const He=Be[nt];ct(w.symbolInstances.get(He),He,w.collisionArrays[He])}}else for(let Be=a.symbolInstanceStart;Be<a.symbolInstanceEnd;Be++)ct(w.symbolInstances.get(Be),Be,w.collisionArrays[Be]);if(g&&w.bucketInstanceId in this.collisionCircleArrays){const Be=this.collisionCircleArrays[w.bucketInstanceId];l.invert(Be.invProjMatrix,P),Be.viewportMatrix=this.collisionIndex.getViewportMatrix()}w.justReloaded=!1}markUsedJustification(a,h,g,v){const{leftJustifiedTextSymbolIndex:w,centerJustifiedTextSymbolIndex:M,rightJustifiedTextSymbolIndex:P,verticalPlacedTextSymbolIndex:z,crossTileID:$}=g,B=l.getAnchorJustification(h),W=v===l.WritingMode.vertical?z:B==="left"?w:B==="center"?M:B==="right"?P:-1;w>=0&&(a.text.placedSymbolArray.get(w).crossTileID=W>=0&&w!==W?0:$),M>=0&&(a.text.placedSymbolArray.get(M).crossTileID=W>=0&&M!==W?0:$),P>=0&&(a.text.placedSymbolArray.get(P).crossTileID=W>=0&&P!==W?0:$),z>=0&&(a.text.placedSymbolArray.get(z).crossTileID=W>=0&&z!==W?0:$)}markUsedOrientation(a,h,g){const v=h===l.WritingMode.horizontal||h===l.WritingMode.horizontalOnly?h:0,w=h===l.WritingMode.vertical?h:0,{leftJustifiedTextSymbolIndex:M,centerJustifiedTextSymbolIndex:P,rightJustifiedTextSymbolIndex:z,verticalPlacedTextSymbolIndex:$}=g,B=a.text.placedSymbolArray;M>=0&&(B.get(M).placedOrientation=v),P>=0&&(B.get(P).placedOrientation=v),z>=0&&(B.get(z).placedOrientation=v),$>=0&&(B.get($).placedOrientation=w)}commit(a){this.commitTime=a,this.zoomAtLastRecencyCheck=this.transform.zoom;const h=this.prevPlacement;let g=!1;this.prevZoomAdjustment=h?h.zoomAdjustment(this.transform.zoom):0;const v=h?h.symbolFadeChange(a):1,w=h?h.opacities:{},M=h?h.variableOffsets:{},P=h?h.placedOrientations:{};for(const z in this.placements){const $=this.placements[z],B=w[z];B?(this.opacities[z]=new fs(B,v,$.text,$.icon,null,$.clipped),g=g||$.text!==B.text.placed||$.icon!==B.icon.placed):(this.opacities[z]=new fs(null,v,$.text,$.icon,$.skipFade,$.clipped),g=g||$.text||$.icon)}for(const z in w){const $=w[z];if(!this.opacities[z]){const B=new fs($,v,!1,!1);B.isHidden()||(this.opacities[z]=B,g=g||$.text.placed||$.icon.placed)}}for(const z in M)this.variableOffsets[z]||!this.opacities[z]||this.opacities[z].isHidden()||(this.variableOffsets[z]=M[z]);for(const z in P)this.placedOrientations[z]||!this.opacities[z]||this.opacities[z].isHidden()||(this.placedOrientations[z]=P[z]);g?this.lastPlacementChangeTime=a:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=h?h.lastPlacementChangeTime:a)}updateLayerOpacities(a,h){const g=new Set;for(const v of h){const w=v.getBucket(a);w&&v.latestFeatureIndex&&a.id===w.layerIds[0]&&this.updateBucketOpacities(w,g,v.collisionBoxArray)}}updateBucketOpacities(a,h,g){a.hasTextData()&&a.text.opacityVertexArray.clear(),a.hasIconData()&&a.icon.opacityVertexArray.clear(),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexArray.clear(),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexArray.clear();const v=a.layers[0].layout,w=!!a.layers[0].dynamicFilter(),M=new fs(null,0,!1,!1,!0),P=v.get("text-allow-overlap"),z=v.get("icon-allow-overlap"),$=v.get("text-variable-anchor"),B=v.get("text-rotation-alignment")==="map",W=v.get("text-pitch-alignment")==="map",ee=v.get("icon-text-fit")!=="none",oe=new fs(null,0,P&&(z||!a.hasIconData()||v.get("icon-optional")),z&&(P||!a.hasTextData()||v.get("text-optional")),!0);!a.collisionArrays&&g&&(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData())&&a.deserializeCollisionBoxes(g);const ae=(le,Z,ie)=>{for(let de=0;de<Z/4;de++)le.opacityVertexArray.emplaceBack(ie)};let se=0;for(let le=0;le<a.symbolInstances.length;le++){const Z=a.symbolInstances.get(le),{numHorizontalGlyphVertices:ie,numVerticalGlyphVertices:de,crossTileID:pe,numIconVertices:Ce}=Z,Me=h.has(pe);let Ae=this.opacities[pe];Me?Ae=M:Ae||(Ae=oe,this.opacities[pe]=Ae),h.add(pe);const Ne=ie>0||de>0,ze=Ce>0,Ue=this.placedOrientations[pe],ct=Ue===l.WritingMode.vertical,Be=Ue===l.WritingMode.horizontal||Ue===l.WritingMode.horizontalOnly;if(!Ne&&!ze||Ae.isHidden()||se++,Ne){const nt=_c(Ae.text);ae(a.text,ie,ct?dr:nt),ae(a.text,de,Be?dr:nt);const He=Ae.text.isHidden(),{leftJustifiedTextSymbolIndex:lt,centerJustifiedTextSymbolIndex:je,rightJustifiedTextSymbolIndex:tt,verticalPlacedTextSymbolIndex:ht}=Z,st=a.text.placedSymbolArray,dt=He||ct?1:0;lt>=0&&(st.get(lt).hidden=dt),je>=0&&(st.get(je).hidden=dt),tt>=0&&(st.get(tt).hidden=dt),ht>=0&&(st.get(ht).hidden=He||Be?1:0);const Vt=this.variableOffsets[pe];Vt&&this.markUsedJustification(a,Vt.anchor,Z,Ue);const Qt=this.placedOrientations[pe];Qt&&(this.markUsedJustification(a,"left",Z,Qt),this.markUsedOrientation(a,Qt,Z))}if(ze){const nt=_c(Ae.icon),{placedIconSymbolIndex:He,verticalPlacedIconSymbolIndex:lt}=Z,je=a.icon.placedSymbolArray,tt=Ae.icon.isHidden()?1:0;He>=0&&(ae(a.icon,Ce,ct?dr:nt),je.get(He).hidden=tt),lt>=0&&(ae(a.icon,Z.numVerticalIconVertices,Be?dr:nt),je.get(lt).hidden=tt)}if(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData()){const nt=a.collisionArrays[le];if(nt){let He=new l.Point(0,0),lt=!0;if(nt.textBox||nt.verticalTextBox){if($){const tt=this.variableOffsets[pe];tt?(He=yc(tt.anchor,tt.width,tt.height,tt.textOffset,tt.textScale),B&&He._rotate(W?this.transform.angle:-this.transform.angle)):lt=!1}w&&(lt=!Ae.clipped),nt.textBox&&tl(a.textCollisionBox.collisionVertexArray,Ae.text.placed,!lt||ct,He.x,He.y),nt.verticalTextBox&&tl(a.textCollisionBox.collisionVertexArray,Ae.text.placed,!lt||Be,He.x,He.y)}const je=lt&&Boolean(!Be&&nt.verticalIconBox);nt.iconBox&&tl(a.iconCollisionBox.collisionVertexArray,Ae.icon.placed,je,ee?He.x:0,ee?He.y:0),nt.verticalIconBox&&tl(a.iconCollisionBox.collisionVertexArray,Ae.icon.placed,!je,ee?He.x:0,ee?He.y:0)}}}if(a.fullyClipped=se===0,a.sortFeatures(this.transform.angle),this.retainedQueryData[a.bucketInstanceId]&&(this.retainedQueryData[a.bucketInstanceId].featureSortOrder=a.featureSortOrder),a.hasTextData()&&a.text.opacityVertexBuffer&&a.text.opacityVertexBuffer.updateData(a.text.opacityVertexArray),a.hasIconData()&&a.icon.opacityVertexBuffer&&a.icon.opacityVertexBuffer.updateData(a.icon.opacityVertexArray),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexBuffer&&a.iconCollisionBox.collisionVertexBuffer.updateData(a.iconCollisionBox.collisionVertexArray),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexBuffer&&a.textCollisionBox.collisionVertexBuffer.updateData(a.textCollisionBox.collisionVertexArray),a.bucketInstanceId in this.collisionCircleArrays){const le=this.collisionCircleArrays[a.bucketInstanceId];a.placementInvProjMatrix=le.invProjMatrix,a.placementViewportMatrix=le.viewportMatrix,a.collisionCircleArray=le.circles,delete this.collisionCircleArrays[a.bucketInstanceId]}}symbolFadeChange(a){return this.fadeDuration===0?1:(a-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(a){return Math.max(0,(this.transform.zoom-a)/1.5)}hasTransitions(a){return this.stale||a-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(a,h){const g=this.zoomAtLastRecencyCheck===h?1-this.zoomAdjustment(h):1;return this.zoomAtLastRecencyCheck=h,this.commitTime+this.fadeDuration*g>a}setStale(){this.stale=!0}}function tl(f,a,h,g,v){f.emplaceBack(a?1:0,h?1:0,g||0,v||0),f.emplaceBack(a?1:0,h?1:0,g||0,v||0),f.emplaceBack(a?1:0,h?1:0,g||0,v||0),f.emplaceBack(a?1:0,h?1:0,g||0,v||0)}const Si=Math.pow(2,25),xr=Math.pow(2,24),qd=Math.pow(2,17),Hd=Math.pow(2,16),Ci=Math.pow(2,9),eo=Math.pow(2,8),Wm=Math.pow(2,1);function _c(f){if(f.opacity===0&&!f.placed)return 0;if(f.opacity===1&&f.placed)return 4294967295;const a=f.placed?1:0,h=Math.floor(127*f.opacity);return h*Si+a*xr+h*qd+a*Hd+h*Ci+a*eo+h*Wm+a}const dr=0;class vc{constructor(a){this._sortAcrossTiles=a.layout.get("symbol-z-order")!=="viewport-y"&&a.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(a,h,g,v,w){const M=this._bucketParts;for(;this._currentTileIndex<a.length;)if(h.getBucketParts(M,v,a[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,w())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,M.sort((P,z)=>P.sortKey-z.sortKey));this._currentPartIndex<M.length;){const P=M[this._currentPartIndex];if(h.placeLayerBucketPart(P,this._seenCrossTileIDs,g,P.symbolInstanceStart===0),this._currentPartIndex++,w())return!0}return!1}}class Wd{constructor(a,h,g,v,w,M,P,z){this.placement=new Mu(a,w,M,P,z),this._currentPlacementIndex=h.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=v,this._done=!1}isDone(){return this._done}continuePlacement(a,h,g){const v=l.exported.now(),w=()=>{const M=l.exported.now()-v;return!this._forceFullPlacement&&M>2};for(;this._currentPlacementIndex>=0;){const M=h[a[this._currentPlacementIndex]],P=this.placement.collisionIndex.transform.zoom;if(M.type==="symbol"&&(!M.minzoom||M.minzoom<=P)&&(!M.maxzoom||M.maxzoom>P)){if(this._inProgressLayer||(this._inProgressLayer=new vc(M)),this._inProgressLayer.continuePlacement(g[M.source],this.placement,this._showCollisionBoxes,M,w))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(a){return this.placement.commit(a),this.placement}}const ya=512/l.EXTENT/2;class Jr{constructor(a,h,g){this.tileID=a,this.bucketInstanceId=g,this.index=new l.KDBush(h.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const v=a.canonical.x*l.EXTENT,w=a.canonical.y*l.EXTENT;for(let M=0;M<h.length;M++){const{key:P,crossTileID:z,tileAnchorX:$,tileAnchorY:B}=h.get(M),W=Math.floor((v+$)*ya),ee=Math.floor((w+B)*ya);this.index.add(W,ee),this.keys.push(P),this.crossTileIDs.push(z)}this.index.finish()}findMatches(a,h,g){const v=this.tileID.canonical.z<h.canonical.z?1:Math.pow(2,this.tileID.canonical.z-h.canonical.z),w=ya/Math.pow(2,h.canonical.z-this.tileID.canonical.z),M=h.canonical.x*l.EXTENT,P=h.canonical.y*l.EXTENT;for(let z=0;z<a.length;z++){const $=a.get(z);if($.crossTileID)continue;const{key:B,tileAnchorX:W,tileAnchorY:ee}=$,oe=Math.floor((M+W)*w),ae=Math.floor((P+ee)*w),se=this.index.range(oe-v,ae-v,oe+v,ae+v);for(const le of se){const Z=this.crossTileIDs[le];if(this.keys[le]===B&&!g.has(Z)){g.add(Z),$.crossTileID=Z;break}}}}}class Zd{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Xd{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(a){const h=Math.round((a-this.lng)/360);if(h!==0)for(const g in this.indexes){const v=this.indexes[g],w={};for(const M in v){const P=v[M];P.tileID=P.tileID.unwrapTo(P.tileID.wrap+h),w[P.tileID.key]=P}this.indexes[g]=w}this.lng=a}addBucket(a,h,g){if(this.indexes[a.overscaledZ]&&this.indexes[a.overscaledZ][a.key]){if(this.indexes[a.overscaledZ][a.key].bucketInstanceId===h.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(a.overscaledZ,this.indexes[a.overscaledZ][a.key])}for(let w=0;w<h.symbolInstances.length;w++)h.symbolInstances.get(w).crossTileID=0;this.usedCrossTileIDs[a.overscaledZ]||(this.usedCrossTileIDs[a.overscaledZ]=new Set);const v=this.usedCrossTileIDs[a.overscaledZ];for(const w in this.indexes){const M=this.indexes[w];if(Number(w)>a.overscaledZ)for(const P in M){const z=M[P];z.tileID.isChildOf(a)&&z.findMatches(h.symbolInstances,a,v)}else{const P=M[a.scaledTo(Number(w)).key];P&&P.findMatches(h.symbolInstances,a,v)}}for(let w=0;w<h.symbolInstances.length;w++){const M=h.symbolInstances.get(w);M.crossTileID||(M.crossTileID=g.generate(),v.add(M.crossTileID))}return this.indexes[a.overscaledZ]===void 0&&(this.indexes[a.overscaledZ]={}),this.indexes[a.overscaledZ][a.key]=new Jr(a,h.symbolInstances,h.bucketInstanceId),!0}removeBucketCrossTileIDs(a,h){for(const g of h.crossTileIDs)this.usedCrossTileIDs[a].delete(g)}removeStaleBuckets(a){let h=!1;for(const g in this.indexes){const v=this.indexes[g];for(const w in v)a[v[w].bucketInstanceId]||(this.removeBucketCrossTileIDs(g,v[w]),delete v[w],h=!0)}return h}}class ms{constructor(){this.layerIndexes={},this.crossTileIDs=new Zd,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(a,h,g,v){let w=this.layerIndexes[a.id];w===void 0&&(w=this.layerIndexes[a.id]=new Xd);let M=!1;const P={};v.name!=="globe"&&w.handleWrapJump(g);for(const z of h){const $=z.getBucket(a);$&&a.id===$.layerIds[0]&&($.bucketInstanceId||($.bucketInstanceId=++this.maxBucketInstanceId),w.addBucket(z.tileID,$,this.crossTileIDs)&&(M=!0),P[$.bucketInstanceId]=!0)}return w.removeStaleBuckets(P)&&(M=!0),M}pruneUnusedLayers(a){const h={};a.forEach(g=>{h[g]=!0});for(const g in this.layerIndexes)h[g]||delete this.layerIndexes[g]}}const Hs=(f,a)=>l.emitValidationErrors(f,a&&a.filter(h=>h.identifier!=="source.canvas")),ku=l.pick(kn,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),Cx=l.pick(kn,["setCenter","setZoom","setBearing","setPitch"]),Kd={version:8,layers:[],sources:{}},nl={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Ho extends l.Evented{constructor(a,h={}){super(),this.map=a,this.dispatcher=new De(Qa(),this),this.imageManager=new Le,this.imageManager.setEventedParent(this),this.glyphManager=new l.GlyphManager(a._requestManager,h.localFontFamily?l.LocalGlyphMode.all:h.localIdeographFontFamily?l.LocalGlyphMode.ideographs:l.LocalGlyphMode.none,h.localFontFamily||h.localIdeographFontFamily),this.crossTileSymbolIndex=new ms,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.getReferrer());const g=this;this._rtlTextPluginCallback=Ho.registerForPluginStateChange(v=>{g.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:v.pluginStatus,pluginURL:v.pluginURL},(w,M)=>{if(l.triggerPluginCompletionEvent(w),M&&M.every(P=>P))for(const P in g._sourceCaches){const z=g._sourceCaches[P],$=z.getSource().type;$!=="vector"&&$!=="geojson"||z.reload()}})}),this.on("data",v=>{if(v.dataType!=="source"||v.sourceDataType!=="metadata")return;const w=this.getSource(v.sourceId);if(w&&w.vectorLayerIds)for(const M in this._layers){const P=this._layers[M];P.source===w.id&&this._validateLayer(P)}})}loadURL(a,h={}){this.fire(new l.Event("dataloading",{dataType:"style"}));const g=typeof h.validate=="boolean"?h.validate:!l.isMapboxURL(a);a=this.map._requestManager.normalizeStyleURL(a,h.accessToken);const v=this.map._requestManager.transformRequest(a,l.ResourceType.Style);this._request=l.getJSON(v,(w,M)=>{this._request=null,w?this.fire(new l.ErrorEvent(w)):M&&this._load(M,g)})}loadJSON(a,h={}){this.fire(new l.Event("dataloading",{dataType:"style"})),this._request=l.exported.frame(()=>{this._request=null,this._load(a,h.validate!==!1)})}loadEmpty(){this.fire(new l.Event("dataloading",{dataType:"style"})),this._load(Kd,!1)}_updateLayerCount(a,h){const g=h?1:-1;a.is3D()&&(this._num3DLayers+=g),a.type==="circle"&&(this._numCircleLayers+=g),a.type==="symbol"&&(this._numSymbolLayers+=g)}_load(a,h){if(h&&Hs(this,l.validateStyle(a)))return;this._loaded=!0,this.stylesheet=l.clone$1(a),this._updateMapProjection();for(const v in a.sources)this.addSource(v,a.sources[v],{validate:!1});this._changed=!1,a.sprite?this._loadSprite(a.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(a.glyphs);const g=Um(this.stylesheet.layers);this._order=g.map(v=>v.id),this._layers={},this._serializedLayers={};for(const v of g){const w=l.createStyleLayer(v);w.setEventedParent(this,{layer:{id:w.id}}),this._layers[w.id]=w,this._serializedLayers[w.id]=w.serialize(),this._updateLayerCount(w,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Ke(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new l.Event("data",{dataType:"style"})),this.fire(new l.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(a){a?this.stylesheet.projection=a:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(a){this._spriteRequest=function(h,g,v){let w,M,P;const z=l.exported.devicePixelRatio>1?"@2x":"";let $=l.getJSON(g.transformRequest(g.normalizeSpriteURL(h,z,".json"),l.ResourceType.SpriteJSON),(ee,oe)=>{$=null,P||(P=ee,w=oe,W())}),B=l.getImage(g.transformRequest(g.normalizeSpriteURL(h,z,".png"),l.ResourceType.SpriteImage),(ee,oe)=>{B=null,P||(P=ee,M=oe,W())});function W(){if(P)v(P);else if(w&&M){const ee=l.exported.getImageData(M),oe={};for(const ae in w){const{width:se,height:le,x:Z,y:ie,sdf:de,pixelRatio:pe,stretchX:Ce,stretchY:Me,content:Ae}=w[ae],Ne=new l.RGBAImage({width:se,height:le});l.RGBAImage.copy(ee,Ne,{x:Z,y:ie},{x:0,y:0},{width:se,height:le}),oe[ae]={data:Ne,pixelRatio:pe,sdf:de,stretchX:Ce,stretchY:Me,content:Ae}}v(null,oe)}}return{cancel(){$&&($.cancel(),$=null),B&&(B.cancel(),B=null)}}}(a,this.map._requestManager,(h,g)=>{if(this._spriteRequest=null,h)this.fire(new l.ErrorEvent(h));else if(g)for(const v in g)this.imageManager.addImage(v,g[v]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new l.Event("data",{dataType:"style"}))})}_validateLayer(a){const h=this.getSource(a.source);if(!h)return;const g=a.sourceLayer;g&&(h.type==="geojson"||h.vectorLayerIds&&h.vectorLayerIds.indexOf(g)===-1)&&this.fire(new l.ErrorEvent(new Error(`Source layer "${g}" does not exist on source "${h.id}" as specified by style layer "${a.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const a in this._sourceCaches)if(!this._sourceCaches[a].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(a){const h=[];for(const g of a){const v=this._layers[g];v.type!=="custom"&&h.push(v.serialize())}return h}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const a in this._sourceCaches)if(this._sourceCaches[a].hasTransition())return!0;for(const a in this._layers)if(this._layers[a].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(a){return!!this.terrain&&(typeof a.isLayerDraped=="function"?a.isLayerDraped():nl[a.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(a){if(!this._loaded)return;const h=this._changed;if(this._changed){const v=Object.keys(this._updatedLayers),w=Object.keys(this._removedLayers);(v.length||w.length)&&this._updateWorkerLayers(v,w);for(const M in this._updatedSources){const P=this._updatedSources[M];P==="reload"?this._reloadSource(M):P==="clear"&&this._clearSource(M)}this._updateTilesForChangedImages();for(const M in this._updatedPaintProps)this._layers[M].updateTransitions(a);this.light.updateTransitions(a),this.fog&&this.fog.updateTransitions(a),this._resetUpdates()}const g={};for(const v in this._sourceCaches){const w=this._sourceCaches[v];g[v]=w.used,w.used=!1}for(const v of this._order){const w=this._layers[v];if(w.recalculate(a,this._availableImages),!w.isHidden(a.zoom)){const P=this._getLayerSourceCache(w);P&&(P.used=!0)}const M=this.map.painter;if(M){const P=w.getProgramIds();if(!P)continue;const z=w.getProgramConfiguration(a.zoom);for(const $ of P)M.useProgram($,z)}}for(const v in g){const w=this._sourceCaches[v];g[v]!==w.used&&w.getSource().fire(new l.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:w.getSource().id}))}this.light.recalculate(a),this.terrain&&this.terrain.recalculate(a),this.fog&&this.fog.recalculate(a),this.z=a.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),h&&this.fire(new l.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const a=Object.keys(this._changedImages);if(a.length){for(const h in this._sourceCaches)this._sourceCaches[h].reloadTilesForDependencies(["icons","patterns"],a);this._changedImages={}}}_updateWorkerLayers(a,h){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(a),removedIds:h})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(a){if(this._checkLoaded(),Hs(this,l.validateStyle(a)))return!1;(a=l.clone$1(a)).layers=Um(a.layers);const h=function(v,w){if(!v)return[{command:kn.setStyle,args:[w]}];let M=[];try{if(!_(v.version,w.version))return[{command:kn.setStyle,args:[w]}];_(v.center,w.center)||M.push({command:kn.setCenter,args:[w.center]}),_(v.zoom,w.zoom)||M.push({command:kn.setZoom,args:[w.zoom]}),_(v.bearing,w.bearing)||M.push({command:kn.setBearing,args:[w.bearing]}),_(v.pitch,w.pitch)||M.push({command:kn.setPitch,args:[w.pitch]}),_(v.sprite,w.sprite)||M.push({command:kn.setSprite,args:[w.sprite]}),_(v.glyphs,w.glyphs)||M.push({command:kn.setGlyphs,args:[w.glyphs]}),_(v.transition,w.transition)||M.push({command:kn.setTransition,args:[w.transition]}),_(v.light,w.light)||M.push({command:kn.setLight,args:[w.light]}),_(v.fog,w.fog)||M.push({command:kn.setFog,args:[w.fog]}),_(v.projection,w.projection)||M.push({command:kn.setProjection,args:[w.projection]});const P={},z=[];(function(W,ee,oe,ae){let se;for(se in ee=ee||{},W=W||{})W.hasOwnProperty(se)&&(ee.hasOwnProperty(se)||dc(se,oe,ae));for(se in ee){if(!ee.hasOwnProperty(se))continue;const le=ee[se];W.hasOwnProperty(se)?_(W[se],le)||(W[se].type==="geojson"&&le.type==="geojson"&&Au(W,ee,se)?oe.push({command:kn.setGeoJSONSourceData,args:[se,le.data]}):$d(se,ee,oe,ae)):Bd(se,ee,oe)}})(v.sources,w.sources,z,P);const $=[];v.layers&&v.layers.forEach(W=>{W.source&&P[W.source]?M.push({command:kn.removeLayer,args:[W.id]}):$.push(W)});let B=v.terrain;B&&P[B.source]&&(M.push({command:kn.setTerrain,args:[void 0]}),B=void 0),M=M.concat(z),_(B,w.terrain)||M.push({command:kn.setTerrain,args:[w.terrain]}),function(W,ee,oe){ee=ee||[];const ae=(W=W||[]).map(hs),se=ee.map(hs),le=W.reduce(jd,{}),Z=ee.reduce(jd,{}),ie=ae.slice(),de=Object.create(null);let pe,Ce,Me,Ae,Ne,ze,Ue;for(pe=0,Ce=0;pe<ae.length;pe++)Me=ae[pe],Z.hasOwnProperty(Me)?Ce++:(oe.push({command:kn.removeLayer,args:[Me]}),ie.splice(ie.indexOf(Me,Ce),1));for(pe=0,Ce=0;pe<se.length;pe++)Me=se[se.length-1-pe],ie[ie.length-1-pe]!==Me&&(le.hasOwnProperty(Me)?(oe.push({command:kn.removeLayer,args:[Me]}),ie.splice(ie.lastIndexOf(Me,ie.length-Ce),1)):Ce++,ze=ie[ie.length-pe],oe.push({command:kn.addLayer,args:[Z[Me],ze]}),ie.splice(ie.length-pe,0,Me),de[Me]=!0);for(pe=0;pe<se.length;pe++)if(Me=se[pe],Ae=le[Me],Ne=Z[Me],!de[Me]&&!_(Ae,Ne))if(_(Ae.source,Ne.source)&&_(Ae["source-layer"],Ne["source-layer"])&&_(Ae.type,Ne.type)){for(Ue in Go(Ae.layout,Ne.layout,oe,Me,null,kn.setLayoutProperty),Go(Ae.paint,Ne.paint,oe,Me,null,kn.setPaintProperty),_(Ae.filter,Ne.filter)||oe.push({command:kn.setFilter,args:[Me,Ne.filter]}),_(Ae.minzoom,Ne.minzoom)&&_(Ae.maxzoom,Ne.maxzoom)||oe.push({command:kn.setLayerZoomRange,args:[Me,Ne.minzoom,Ne.maxzoom]}),Ae)Ae.hasOwnProperty(Ue)&&Ue!=="layout"&&Ue!=="paint"&&Ue!=="filter"&&Ue!=="metadata"&&Ue!=="minzoom"&&Ue!=="maxzoom"&&(Ue.indexOf("paint.")===0?Go(Ae[Ue],Ne[Ue],oe,Me,Ue.slice(6),kn.setPaintProperty):_(Ae[Ue],Ne[Ue])||oe.push({command:kn.setLayerProperty,args:[Me,Ue,Ne[Ue]]}));for(Ue in Ne)Ne.hasOwnProperty(Ue)&&!Ae.hasOwnProperty(Ue)&&Ue!=="layout"&&Ue!=="paint"&&Ue!=="filter"&&Ue!=="metadata"&&Ue!=="minzoom"&&Ue!=="maxzoom"&&(Ue.indexOf("paint.")===0?Go(Ae[Ue],Ne[Ue],oe,Me,Ue.slice(6),kn.setPaintProperty):_(Ae[Ue],Ne[Ue])||oe.push({command:kn.setLayerProperty,args:[Me,Ue,Ne[Ue]]}))}else oe.push({command:kn.removeLayer,args:[Me]}),ze=ie[ie.lastIndexOf(Me)+1],oe.push({command:kn.addLayer,args:[Ne,ze]})}($,w.layers,M)}catch(P){console.warn("Unable to compute style diff:",P),M=[{command:kn.setStyle,args:[w]}]}return M}(this.serialize(),a).filter(v=>!(v.command in Cx));if(h.length===0)return!1;const g=h.filter(v=>!(v.command in ku));if(g.length>0)throw new Error(`Unimplemented: ${g.map(v=>v.command).join(", ")}.`);return h.forEach(v=>{v.command!=="setTransition"&&v.command!=="setProjection"&&this[v.command].apply(this,v.args)}),this.stylesheet=a,this._updateMapProjection(),!0}addImage(a,h){return this.getImage(a)?this.fire(new l.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(a,h),this._afterImageUpdated(a),this)}updateImage(a,h){this.imageManager.updateImage(a,h)}getImage(a){return this.imageManager.getImage(a)}removeImage(a){return this.getImage(a)?(this.imageManager.removeImage(a),this._afterImageUpdated(a),this):this.fire(new l.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(a){this._availableImages=this.imageManager.listImages(),this._changedImages[a]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(a,h,g={}){if(this._checkLoaded(),this.getSource(a)!==void 0)throw new Error("There is already a source with this ID");if(!h.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(h).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(h.type)>=0&&this._validate(l.validateSource,`sources.${a}`,h,null,g))return;this.map&&this.map._collectResourceTiming&&(h.collectResourceTiming=!0);const v=dn(a,h,this.dispatcher,this);v.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(a),source:v.serialize(),sourceId:a}));const w=M=>{const P=(M?"symbol:":"other:")+a,z=this._sourceCaches[P]=new l.SourceCache(P,v,M);(M?this._symbolSourceCaches:this._otherSourceCaches)[a]=z,z.style=this,z.onAdd(this.map)};w(!1),h.type!=="vector"&&h.type!=="geojson"||w(!0),v.onAdd&&v.onAdd(this.map),this._changed=!0}removeSource(a){this._checkLoaded();const h=this.getSource(a);if(!h)throw new Error("There is no source with this ID");for(const v in this._layers)if(this._layers[v].source===a)return this.fire(new l.ErrorEvent(new Error(`Source "${a}" cannot be removed while layer "${v}" is using it.`)));if(this.terrain&&this.terrain.get().source===a)return this.fire(new l.ErrorEvent(new Error(`Source "${a}" cannot be removed while terrain is using it.`)));const g=this._getSourceCaches(a);for(const v of g)delete this._sourceCaches[v.id],delete this._updatedSources[v.id],v.fire(new l.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:v.getSource().id})),v.setEventedParent(null),v.clearTiles();return delete this._otherSourceCaches[a],delete this._symbolSourceCaches[a],h.setEventedParent(null),h.onRemove&&h.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(a,h){this._checkLoaded(),this.getSource(a).setData(h),this._changed=!0}getSource(a){const h=this._getSourceCache(a);return h&&h.getSource()}_getSources(){const a=[];for(const h in this._otherSourceCaches){const g=this._getSourceCache(h);g&&a.push(g.getSource())}return a}addLayer(a,h,g={}){this._checkLoaded();const v=a.id;if(this.getLayer(v))return void this.fire(new l.ErrorEvent(new Error(`Layer with id "${v}" already exists on this map`)));let w;if(a.type==="custom"){if(Hs(this,l.validateCustomStyleLayer(a)))return;w=l.createStyleLayer(a)}else{if(typeof a.source=="object"&&(this.addSource(v,a.source),a=l.clone$1(a),a=l.extend(a,{source:v})),this._validate(l.validateLayer,`layers.${v}`,a,{arrayIndex:-1},g))return;w=l.createStyleLayer(a),this._validateLayer(w),w.setEventedParent(this,{layer:{id:v}}),this._serializedLayers[w.id]=w.serialize(),this._updateLayerCount(w,!0)}const M=h?this._order.indexOf(h):this._order.length;if(h&&M===-1)return void this.fire(new l.ErrorEvent(new Error(`Layer with id "${h}" does not exist on this map.`)));this._order.splice(M,0,v),this._layerOrderChanged=!0,this._layers[v]=w;const P=this._getLayerSourceCache(w);if(this._removedLayers[v]&&w.source&&P&&w.type!=="custom"){const z=this._removedLayers[v];delete this._removedLayers[v],z.type!==w.type?this._updatedSources[w.source]="clear":(this._updatedSources[w.source]="reload",P.pause())}this._updateLayer(w),w.onAdd&&w.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(a,h){if(this._checkLoaded(),this._changed=!0,!this._layers[a])return void this.fire(new l.ErrorEvent(new Error(`The layer '${a}' does not exist in the map's style and cannot be moved.`)));if(a===h)return;const g=this._order.indexOf(a);this._order.splice(g,1);const v=h?this._order.indexOf(h):this._order.length;h&&v===-1?this.fire(new l.ErrorEvent(new Error(`Layer with id "${h}" does not exist on this map.`))):(this._order.splice(v,0,a),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(a){this._checkLoaded();const h=this._layers[a];if(!h)return void this.fire(new l.ErrorEvent(new Error(`The layer '${a}' does not exist in the map's style and cannot be removed.`)));h.setEventedParent(null),this._updateLayerCount(h,!1);const g=this._order.indexOf(a);this._order.splice(g,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[a]=h,delete this._layers[a],delete this._serializedLayers[a],delete this._updatedLayers[a],delete this._updatedPaintProps[a],h.onRemove&&h.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(a){return this._layers[a]}hasLayer(a){return a in this._layers}hasLayerType(a){for(const h in this._layers)if(this._layers[h].type===a)return!0;return!1}setLayerZoomRange(a,h,g){this._checkLoaded();const v=this.getLayer(a);v?v.minzoom===h&&v.maxzoom===g||(h!=null&&(v.minzoom=h),g!=null&&(v.maxzoom=g),this._updateLayer(v)):this.fire(new l.ErrorEvent(new Error(`The layer '${a}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(a,h,g={}){this._checkLoaded();const v=this.getLayer(a);if(v){if(!_(v.filter,h))return h==null?(v.filter=void 0,void this._updateLayer(v)):void(this._validate(l.validateFilter,`layers.${v.id}.filter`,h,{layerType:v.type},g)||(v.filter=l.clone$1(h),this._updateLayer(v)))}else this.fire(new l.ErrorEvent(new Error(`The layer '${a}' does not exist in the map's style and cannot be filtered.`)))}getFilter(a){const h=this.getLayer(a);return h&&l.clone$1(h.filter)}setLayoutProperty(a,h,g,v={}){this._checkLoaded();const w=this.getLayer(a);w?_(w.getLayoutProperty(h),g)||(w.setLayoutProperty(h,g,v),this._updateLayer(w)):this.fire(new l.ErrorEvent(new Error(`The layer '${a}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(a,h){const g=this.getLayer(a);if(g)return g.getLayoutProperty(h);this.fire(new l.ErrorEvent(new Error(`The layer '${a}' does not exist in the map's style.`)))}setPaintProperty(a,h,g,v={}){this._checkLoaded();const w=this.getLayer(a);w?_(w.getPaintProperty(h),g)||(w.setPaintProperty(h,g,v)&&this._updateLayer(w),this._changed=!0,this._updatedPaintProps[a]=!0):this.fire(new l.ErrorEvent(new Error(`The layer '${a}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(a,h){const g=this.getLayer(a);return g&&g.getPaintProperty(h)}setFeatureState(a,h){this._checkLoaded();const g=a.source,v=a.sourceLayer,w=this.getSource(g);if(!w)return void this.fire(new l.ErrorEvent(new Error(`The source '${g}' does not exist in the map's style.`)));const M=w.type;if(M==="geojson"&&v)return void this.fire(new l.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(M==="vector"&&!v)return void this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));a.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided.")));const P=this._getSourceCaches(g);for(const z of P)z.setFeatureState(v,a.id,h)}removeFeatureState(a,h){this._checkLoaded();const g=a.source,v=this.getSource(g);if(!v)return void this.fire(new l.ErrorEvent(new Error(`The source '${g}' does not exist in the map's style.`)));const w=v.type,M=w==="vector"?a.sourceLayer:void 0;if(w==="vector"&&!M)return void this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(h&&typeof a.id!="string"&&typeof a.id!="number")return void this.fire(new l.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const P=this._getSourceCaches(g);for(const z of P)z.removeFeatureState(M,a.id,h)}getFeatureState(a){this._checkLoaded();const h=a.source,g=a.sourceLayer,v=this.getSource(h);if(v){if(v.type!=="vector"||g)return a.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(h)[0].getFeatureState(g,a.id);this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error(`The source '${h}' does not exist in the map's style.`)))}getTransition(){return l.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const a={};for(const h in this._sourceCaches){const g=this._sourceCaches[h].getSource();a[g.id]||(a[g.id]=g.serialize())}return l.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:a,layers:this._serializeLayers(this._order)},h=>h!==void 0)}_updateLayer(a){this._updatedLayers[a.id]=!0;const h=this._getLayerSourceCache(a);a.source&&!this._updatedSources[a.source]&&h&&h.getSource().type!=="raster"&&(this._updatedSources[a.source]="reload",h.pause()),this._changed=!0,a.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(a){const h=M=>this._layers[M].type==="fill-extrusion",g={},v=[];for(let M=this._order.length-1;M>=0;M--){const P=this._order[M];if(h(P)){g[P]=M;for(const z of a){const $=z[P];if($)for(const B of $)v.push(B)}}}v.sort((M,P)=>P.intersectionZ-M.intersectionZ);const w=[];for(let M=this._order.length-1;M>=0;M--){const P=this._order[M];if(h(P))for(let z=v.length-1;z>=0;z--){const $=v[z].feature;if(g[$.layer.id]<M)break;w.push($),v.pop()}else for(const z of a){const $=z[P];if($)for(const B of $)w.push(B.feature)}}return w}queryRenderedFeatures(a,h,g){h&&h.filter&&this._validate(l.validateFilter,"queryRenderedFeatures.filter",h.filter,null,h);const v={};if(h&&h.layers){if(!Array.isArray(h.layers))return this.fire(new l.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const z of h.layers){const $=this._layers[z];if(!$)return this.fire(new l.ErrorEvent(new Error(`The layer '${z}' does not exist in the map's style and cannot be queried for features.`))),[];v[$.source]=!0}}const w=[];h.availableImages=this._availableImages;const M=h&&h.layers?h.layers.some(z=>{const $=this.getLayer(z);return $&&$.is3D()}):this.has3DLayers(),P=mt.createFromScreenPoints(a,g);for(const z in this._sourceCaches){const $=this._sourceCaches[z].getSource().id;h.layers&&!v[$]||w.push(or(this._sourceCaches[z],this._layers,this._serializedLayers,P,h,g,M,!!this.map._showQueryGeometry))}return this.placement&&w.push(function(z,$,B,W,ee,oe,ae){const se={},le=oe.queryRenderedSymbols(W),Z=[];for(const ie of Object.keys(le).map(Number))Z.push(ae[ie]);Z.sort(ii);for(const ie of Z){const de=ie.featureIndex.lookupSymbolFeatures(le[ie.bucketInstanceId],$,ie.bucketIndex,ie.sourceLayerIndex,ee.filter,ee.layers,ee.availableImages,z);for(const pe in de){const Ce=se[pe]=se[pe]||[],Me=de[pe];Me.sort((Ae,Ne)=>{const ze=ie.featureSortOrder;if(ze){const Ue=ze.indexOf(Ae.featureIndex);return ze.indexOf(Ne.featureIndex)-Ue}return Ne.featureIndex-Ae.featureIndex});for(const Ae of Me)Ce.push(Ae)}}for(const ie in se)se[ie].forEach(de=>{const pe=de.feature,Ce=B(z[ie]);if(!Ce)return;const Me=Ce.getFeatureState(pe.layer["source-layer"],pe.id);pe.source=pe.layer.source,pe.layer["source-layer"]&&(pe.sourceLayer=pe.layer["source-layer"]),pe.state=Me});return se}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),P.screenGeometry,h,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(w)}querySourceFeatures(a,h){h&&h.filter&&this._validate(l.validateFilter,"querySourceFeatures.filter",h.filter,null,h);const g=this._getSourceCaches(a);let v=[];for(const w of g)v=v.concat(Er(w,h));return v}addSourceType(a,h,g){return Ho.getSourceType(a)?g(new Error(`A source type called "${a}" already exists.`)):(Ho.setSourceType(a,h),h.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:a,url:h.workerSourceURL},g):g(null,null))}getLight(){return this.light.getLight()}setLight(a,h={}){this._checkLoaded();const g=this.light.getLight();let v=!1;for(const M in a)if(!_(a[M],g[M])){v=!0;break}if(!v)return;const w=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(a,h),this.light.updateTransitions(w)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(a,h=1){if(this._checkLoaded(),!a)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let g=a;if(h===1){if(typeof g.source=="object"){const v="terrain-dem-src";this.addSource(v,g.source),g=l.clone$1(g),g=l.extend(g,{source:v})}if(this._validate(l.validateTerrain,"terrain",g))return}if(!this.terrain||this.terrain&&h!==this.terrain.drapeRenderMode){if(!g)return;this._createTerrain(g,h)}else{const v=this.terrain,w=v.get();for(const M of Object.keys(l.spec.terrain))!g.hasOwnProperty(M)&&l.spec.terrain[M].default&&(g[M]=l.spec.terrain[M].default);for(const M in g)if(!_(g[M],w[M])){v.set(g),this.stylesheet.terrain=g;const P=this._setTransitionParameters({duration:0});v.updateTransitions(P);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(a){const h=this.fog=new Ye(a,this.map.transform);this.stylesheet.fog=a;const g=this._setTransitionParameters({duration:0});h.updateTransitions(g)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const a of this.map._markers)a._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(a){if(this._checkLoaded(),!a)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const h=this.fog,g=h.get();Object.keys(a).length===0&&h.set(a);for(const v in a)if(!_(a[v],g[v])){h.set(a),this.stylesheet.fog=a;const w=this._setTransitionParameters({duration:0});h.updateTransitions(w);break}}else this._createFog(a);this._markersNeedUpdate=!0}_setTransitionParameters(a){return{now:l.exported.now(),transition:l.extend(a,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const a=this._order.filter(g=>this.isLayerDraped(this._layers[g])),h=this._order.filter(g=>!this.isLayerDraped(this._layers[g]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...a),this._drapedFirstOrder.push(...h)}_createTerrain(a,h){const g=this.terrain=new ot(a,h);this.stylesheet.terrain=a,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const v=this._setTransitionParameters({duration:0});g.updateTransitions(v)}_force3DLayerUpdate(){for(const a in this._layers){const h=this._layers[a];h.type==="fill-extrusion"&&this._updateLayer(h)}}_forceSymbolLayerUpdate(){for(const a in this._layers){const h=this._layers[a];h.type==="symbol"&&this._updateLayer(h)}}_validate(a,h,g,v,w={}){return(!w||w.validate!==!1)&&Hs(this,a.call(l.validateStyle,l.extend({key:h,style:this.serialize(),value:g,styleSpec:l.spec},v)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const a in this._layers)this._layers[a].setEventedParent(null);for(const a in this._sourceCaches)this._sourceCaches[a].clearTiles(),this._sourceCaches[a].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(a){const h=this._getSourceCaches(a);for(const g of h)g.clearTiles()}_reloadSource(a){const h=this._getSourceCaches(a);for(const g of h)g.resume(),g.reload()}_reloadSources(){for(const a of this._getSources())a.reload&&a.reload()}_updateSources(a){for(const h in this._sourceCaches)this._sourceCaches[h].update(a)}_generateCollisionBoxes(){for(const a in this._sourceCaches){const h=this._sourceCaches[a];h.resume(),h.reload()}}_updatePlacement(a,h,g,v,w=!1){let M=!1,P=!1;const z={};for(const $ of this._order){const B=this._layers[$];if(B.type!=="symbol")continue;if(!z[B.source]){const ee=this._getLayerSourceCache(B);if(!ee)continue;z[B.source]=ee.getRenderableIds(!0).map(oe=>ee.getTileByID(oe)).sort((oe,ae)=>ae.tileID.overscaledZ-oe.tileID.overscaledZ||(oe.tileID.isLessThan(ae.tileID)?-1:1))}const W=this.crossTileSymbolIndex.addLayer(B,z[B.source],a.center.lng,a.projection);M=M||W}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),w=w||this._layerOrderChanged||g===0,this._layerOrderChanged&&this.fire(new l.Event("neworder")),(w||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.exported.now(),a.zoom))&&(this.pauseablePlacement=new Wd(a,this._order,w,h,g,v,this.placement,this.fog&&a.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,z),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.exported.now()),P=!0),M&&this.pauseablePlacement.placement.setStale()),P||M)for(const $ of this._order){const B=this._layers[$];B.type==="symbol"&&this.placement.updateLayerOpacities(B,z[B.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.exported.now())}_releaseSymbolFadeTiles(){for(const a in this._sourceCaches)this._sourceCaches[a].releaseSymbolFadeTiles()}getImages(a,h,g){this.imageManager.getImages(h.icons,g),this._updateTilesForChangedImages();const v=w=>{w&&w.setDependencies(h.tileID.key,h.type,h.icons)};v(this._otherSourceCaches[h.source]),v(this._symbolSourceCaches[h.source])}getGlyphs(a,h,g){this.glyphManager.getGlyphs(h.stacks,g)}getResource(a,h,g){return l.makeRequest(h,g)}_getSourceCache(a){return this._otherSourceCaches[a]}_getLayerSourceCache(a){return a.type==="symbol"?this._symbolSourceCaches[a.source]:this._otherSourceCaches[a.source]}_getSourceCaches(a){const h=[];return this._otherSourceCaches[a]&&h.push(this._otherSourceCaches[a]),this._symbolSourceCaches[a]&&h.push(this._symbolSourceCaches[a]),h}_isSourceCacheLoaded(a){const h=this._getSourceCaches(a);return h.length===0?(this.fire(new l.ErrorEvent(new Error(`There is no source with ID '${a}'`))),!1):h.every(g=>g.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Ho.getSourceType=function(f){return ln[f]},Ho.setSourceType=function(f,a){ln[f]=a},Ho.registerForPluginStateChange=l.registerForPluginStateChange;var Yd=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,xa="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",gs=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,bc=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,ys=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let Pu={},rl={};const wc=[];il(Yd,wc),il(gs,wc),il(bc,wc),il(ys,wc),Pu=Pn("",gs),rl=Pn(ys,bc);const Zm=Pn(`
#if __VERSION__ >=300
#define varying in
#define gl_FragColor glFragColor
#define texture2D texture
#define textureCube texture
out vec4 glFragColor;
#endif
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
#if __VERSION__ >=300
#define attribute in
#define varying out
#define texture2D texture
#endif
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),Iu=Yd,Jd=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var Qd={background:Pn(`uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
varying vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform vec4 u_color;varying vec4 v_color;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(u_color);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:Pn(`uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:Pn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:Pn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Pn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:Pn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Pn("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:Pn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:Pn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:Pn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:Pn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:Pn(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:Pn(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:Pn(`varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
vec3 normal=v_normal;
#endif
float z;vec4 color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);
#else
color=v_color;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
#ifdef ZERO_ROOF_RADIUS
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#endif
color.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
v_normal=normal;
#endif
base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(color,NdotL);
#else
v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_color*=u_opacity;
#ifdef ZERO_ROOF_RADIUS
v_roof_color=vec4(0.0,0.0,0.0,1.0);
#ifdef LIGHTING_3D_MODE
v_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));
#else
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:Pn(`uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
varying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,v_NdotL)*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_NdotL=NdotL;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:Pn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Pn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
gl_FragColor=apply_lighting(gl_FragColor);
#endif
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:Pn(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
uniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture2D(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trimmed=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
#ifdef RENDER_LINE_BORDER
float edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);
#ifdef RENDER_LINE_BORDER_AUTO
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}
#else
out_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);
#endif
}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:Pn(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
color=apply_lighting(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:Pn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:Pn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:Pn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:Pn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:Pn(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=wireframeOffset;
#endif
v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:Pn(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:Pn(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,xa),skyboxGradient:Pn(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,xa),skyboxCapture:Pn(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Pn(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:Pn(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function il(f,a){const h=f.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let g of h)if(g=g.trim(),g[0]==="#"&&g.includes("if")&&!g.includes("endif")){g=g.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const v=g.split(" ");for(const w of v)a.includes(w)||a.push(w)}}function Pn(f,a){const h=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,g=a.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),v={},w=[...wc];return il(f,w),il(a,w),{fragmentSource:f=f.replace(h,(M,P,z,$,B)=>(v[B]=!0,P==="define"?`
#ifndef HAS_UNIFORM_u_${B}
varying ${z} ${$} ${B};
#else
uniform ${z} ${$} u_${B};
#endif
`:`
#ifdef HAS_UNIFORM_u_${B}
    ${z} ${$} ${B} = u_${B};
#endif
`)),vertexSource:a=a.replace(h,(M,P,z,$,B)=>{const W=$==="float"?"vec2":"vec4",ee=B.match(/color/)?"color":W;return v[B]?P==="define"?`
#ifndef HAS_UNIFORM_u_${B}
uniform lowp float u_${B}_t;
attribute ${z} ${W} a_${B};
varying ${z} ${$} ${B};
#else
uniform ${z} ${$} u_${B};
#endif
`:ee==="vec4"?`
#ifndef HAS_UNIFORM_u_${B}
    ${B} = a_${B};
#else
    ${z} ${$} ${B} = u_${B};
#endif
`:`
#ifndef HAS_UNIFORM_u_${B}
    ${B} = unpack_mix_${ee}(a_${B}, u_${B}_t);
#else
    ${z} ${$} ${B} = u_${B};
#endif
`:P==="define"?`
#ifndef HAS_UNIFORM_u_${B}
uniform lowp float u_${B}_t;
attribute ${z} ${W} a_${B};
#else
uniform ${z} ${$} u_${B};
#endif
`:ee==="vec4"?`
#ifndef HAS_UNIFORM_u_${B}
    ${z} ${$} ${B} = a_${B};
#else
    ${z} ${$} ${B} = u_${B};
#endif
`:`
#ifndef HAS_UNIFORM_u_${B}
    ${z} ${$} ${B} = unpack_mix_${ee}(a_${B}, u_${B}_t);
#else
    ${z} ${$} ${B} = u_${B};
#endif
`}),staticAttributes:g,usedDefines:w}}class Ax{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(a,h,g,v,w,M,P){this.context=a;let z=this.boundPaintVertexBuffers.length!==v.length;for(let B=0;!z&&B<v.length;B++)this.boundPaintVertexBuffers[B]!==v[B]&&(z=!0);let $=this.boundDynamicVertexBuffers.length!==P.length;for(let B=0;!$&&B<P.length;B++)this.boundDynamicVertexBuffers[B]!==P[B]&&($=!0);if(!a.extVertexArrayObject||!this.vao||this.boundProgram!==h||this.boundLayoutVertexBuffer!==g||z||$||this.boundIndexBuffer!==w||this.boundVertexOffset!==M)this.freshBind(h,g,v,w,M,P);else{a.bindVertexArrayOES.set(this.vao);for(const B of P)B&&B.bind();w&&w.dynamicDraw&&w.bind()}}freshBind(a,h,g,v,w,M){let P;const z=a.numAttributes,$=this.context,B=$.gl;if($.extVertexArrayObject)this.vao&&this.destroy(),this.vao=$.extVertexArrayObject.createVertexArrayOES(),$.bindVertexArrayOES.set(this.vao),P=0,this.boundProgram=a,this.boundLayoutVertexBuffer=h,this.boundPaintVertexBuffers=g,this.boundIndexBuffer=v,this.boundVertexOffset=w,this.boundDynamicVertexBuffers=M;else{P=$.currentNumAttributes||0;for(let W=z;W<P;W++)B.disableVertexAttribArray(W)}h.enableAttributes(B,a),h.bind(),h.setVertexAttribPointers(B,a,w);for(const W of g)W.enableAttributes(B,a),W.bind(),W.setVertexAttribPointers(B,a,w);for(const W of M)W&&(W.enableAttributes(B,a),W.bind(),W.setVertexAttribPointers(B,a,w));v&&v.bind(),$.currentNumAttributes=z}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function ep(f,a){const h=Math.pow(2,a.canonical.z),g=a.canonical.y;return[new l.MercatorCoordinate(0,g/h).toLngLat().lat,new l.MercatorCoordinate(0,(g+1)/h).toLngLat().lat]}function Xm(f,a,h,g,v,w,M){const P=f.context,z=P.gl,$=h.fbo;if(!$)return;f.prepareDrawTile();const B=f.useProgram("hillshade");P.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,$.colorAttachment.get());const W=((se,le,Z,ie)=>{const de=Z.paint.get("hillshade-shadow-color"),pe=Z.paint.get("hillshade-highlight-color"),Ce=Z.paint.get("hillshade-accent-color");let Me=Z.paint.get("hillshade-illumination-direction")*(Math.PI/180);Z.paint.get("hillshade-illumination-anchor")==="viewport"&&(Me-=se.transform.angle);const Ae=!se.options.moving;return{u_matrix:ie||se.transform.calculateProjMatrix(le.tileID.toUnwrapped(),Ae),u_image:0,u_latrange:ep(0,le.tileID),u_light:[Z.paint.get("hillshade-exaggeration"),Me],u_shadow:de,u_highlight:pe,u_accent:Ce}})(f,h,g,f.terrain?a.projMatrix:null);f.prepareDrawProgram(P,B,a.toUnwrapped());const{tileBoundsBuffer:ee,tileBoundsIndexBuffer:oe,tileBoundsSegments:ae}=f.getTileBoundsBuffers(h);B.draw(P,z.TRIANGLES,v,w,M,l.CullFaceMode.disabled,W,g.id,ee,oe,ae)}function tp(f,a,h){if(!a.needsDEMTextureUpload)return;const g=f.context,v=g.gl;g.pixelStoreUnpackPremultiplyAlpha.set(!1),a.demTexture=a.demTexture||f.getTileTexture(h.stride);const w=h.getPixels();a.demTexture?a.demTexture.update(w,{premultiply:!1}):a.demTexture=new l.Texture(g,w,v.RGBA,{premultiply:!1}),a.needsDEMTextureUpload=!1}function Km(f,a,h,g,v,w){const M=f.context,P=M.gl;if(!a.dem)return;const z=a.dem;if(M.activeTexture.set(P.TEXTURE1),tp(f,a,z),!a.demTexture)return;a.demTexture.bind(P.NEAREST,P.CLAMP_TO_EDGE);const $=z.dim;M.activeTexture.set(P.TEXTURE0);let B=a.fbo;if(!B){const ae=new l.Texture(M,{width:$,height:$,data:null},P.RGBA);ae.bind(P.LINEAR,P.CLAMP_TO_EDGE),B=a.fbo=M.createFramebuffer($,$,!0),B.colorAttachment.set(ae.texture)}M.bindFramebuffer.set(B.framebuffer),M.viewport.set([0,0,$,$]);const{tileBoundsBuffer:W,tileBoundsIndexBuffer:ee,tileBoundsSegments:oe}=f.getMercatorTileBoundsBuffers();f.useProgram("hillshadePrepare").draw(M,P.TRIANGLES,g,v,w,l.CullFaceMode.disabled,((ae,se)=>{const le=se.stride,Z=l.create();return l.ortho(Z,0,l.EXTENT,-l.EXTENT,0,0,1),l.translate(Z,Z,[0,-l.EXTENT,0]),{u_matrix:Z,u_image:1,u_dimension:[le,le],u_zoom:ae.overscaledZ,u_unpack:se.unpackVector}})(a.tileID,z),h.id,W,ee,oe),a.needsHillshadePrepare=!1}const np=f=>({u_matrix:new l.UniformMatrix4f(f),u_image0:new l.Uniform1i(f),u_skirt_height:new l.Uniform1f(f)}),ol=(f,a)=>({u_matrix:f,u_image0:0,u_skirt_height:a}),Du=(f,a,h,g,v,w,M,P,z,$,B,W,ee,oe,ae)=>({u_proj_matrix:Float32Array.from(f),u_globe_matrix:a,u_normalize_matrix:Float32Array.from(g),u_merc_matrix:h,u_zoom_transition:v,u_merc_center:w,u_image0:0,u_frustum_tl:M,u_frustum_tr:P,u_frustum_br:z,u_frustum_bl:$,u_globe_pos:B,u_globe_radius:W,u_viewport:ee,u_grid_matrix:ae?Float32Array.from(ae):new Float32Array(9),u_skirt_height:oe});function sl(f,a){return f!=null&&a!=null&&!(!f.hasData()||!a.hasData())&&f.demTexture!=null&&a.demTexture!=null&&f.tileID.key!==a.tileID.key}const xs=new class{constructor(){this.operations={}}newMorphing(f,a,h,g,v){if(f in this.operations){const w=this.operations[f];w.to.tileID.key!==h.tileID.key&&(w.queued=h)}else this.operations[f]={startTime:g,phase:0,duration:v,from:a,to:h,queued:null}}getMorphValuesForProxy(f){if(!(f in this.operations))return null;const a=this.operations[f];return{from:a.from,to:a.to,phase:a.phase}}update(f){for(const a in this.operations){const h=this.operations[a];for(h.phase=(f-h.startTime)/h.duration;h.phase>=1||!this._validOp(h);)if(!this._nextOp(h,f)){delete this.operations[a];break}}}_nextOp(f,a){return!!f.queued&&(f.from=f.to,f.to=f.queued,f.queued=null,f.phase=0,f.startTime=a,!0)}_validOp(f){return f.from.hasData()&&f.to.hasData()}},_a={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function zu(f){return 6*Math.pow(1.5,22-f)}function Ym(f,a){const h=1<<f.z;return!a&&(f.x===0||f.x===h-1)||f.y===0||f.y===h-1}const Ec=f=>({u_matrix:f});function rp(f,a,h,g,v){if(v>0){const w=l.exported.now(),M=(w-f.timeAdded)/v,P=a?(w-a.timeAdded)/v:-1,z=h.getSource(),$=g.coveringZoomLevel({tileSize:z.tileSize,roundZoom:z.roundZoom}),B=!a||Math.abs(a.tileID.overscaledZ-$)>Math.abs(f.tileID.overscaledZ-$),W=B&&f.refreshedUponExpiration?1:l.clamp(B?M:1-P,0,1);return f.refreshedUponExpiration&&M>=1&&(f.refreshedUponExpiration=!1),a?{opacity:1,mix:1-W}:{opacity:W,mix:0}}return{opacity:1,mix:0}}class ip extends l.SourceCache{constructor(a){const h={type:"raster-dem",maxzoom:a.transform.maxZoom},g=new De(Qa(),null),v=dn("mock-dem",h,g,a.style);super("mock-dem",v,!1),v.setEventedParent(this),this._sourceLoaded=!0}_loadTile(a,h){a.state="loaded",h(null)}}class Nu extends l.SourceCache{constructor(a){const h=dn("proxy",{type:"geojson",maxzoom:a.transform.maxZoom},new De(Qa(),null),a.style);super("proxy",h,!1),h.setEventedParent(this),this.map=this.getSource().map=a,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(a,h,g){if(a.freezeTileCoverage)return;this.transform=a;const v=a.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((w,M)=>{if(w[M.key]="",!this._tiles[M.key]){const P=new l.Tile(M,this._source.tileSize*M.overscaleFactor(),a.tileZoom);P.state="loaded",this._tiles[M.key]=P}return w},{});for(const w in this._tiles)w in v||(this.freeFBO(w),this._tiles[w].unloadVectorData(),delete this._tiles[w])}freeFBO(a){const h=this.proxyCachedFBO[a];if(h!==void 0){const g=Object.values(h);this.renderCachePool.push(...g),delete this.proxyCachedFBO[a]}}deallocRenderCache(){this.renderCache.forEach(a=>a.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Lu extends l.OverscaledTileID{constructor(a,h,g){super(a.overscaledZ,a.wrap,a.canonical.z,a.canonical.x,a.canonical.y),this.proxyTileKey=h,this.projMatrix=g}}class op extends l.Elevation{constructor(a,h){super(),this.painter=a,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[g,v,w]=function(z){const $=new l.StructArrayLayout2i4,B=new l.StructArrayLayout3ui6,W=131;$.reserve(17161),B.reserve(33800);const ee=l.EXTENT/128,oe=l.EXTENT+ee/2,ae=oe+ee;for(let le=-ee;le<ae;le+=ee)for(let Z=-ee;Z<ae;Z+=ee){const ie=Z<0||Z>oe||le<0||le>oe?24575:0,de=l.clamp(Math.round(Z),0,l.EXTENT),pe=l.clamp(Math.round(le),0,l.EXTENT);$.emplaceBack(de+ie,pe)}const se=(le,Z)=>{const ie=Z*W+le;B.emplaceBack(ie+1,ie,ie+W),B.emplaceBack(ie+W,ie+W+1,ie+1)};for(let le=1;le<129;le++)for(let Z=1;Z<129;Z++)se(Z,le);return[0,129].forEach(le=>{for(let Z=0;Z<130;Z++)se(Z,le),se(le,Z)}),[$,B,32768]}(),M=a.context;this.gridBuffer=M.createVertexBuffer(g,l.posAttributes.members),this.gridIndexBuffer=M.createIndexBuffer(v),this.gridSegments=l.SegmentVector.simpleSegment(0,0,g.length,v.length),this.gridNoSkirtSegments=l.SegmentVector.simpleSegment(0,0,g.length,w),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Nu(h.map),this.orthoMatrix=l.create(),l.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,l.EXTENT,0,l.EXTENT,0,1);const P=M.gl;this._overlapStencilMode=new l.StencilMode({func:P.GEQUAL,mask:255},0,255,P.KEEP,P.KEEP,P.REPLACE),this._previousZoom=a.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=h,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new ip(h.map)}set style(a){a.on("data",this._onStyleDataEvent.bind(this)),a.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=a,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(a,h,g){if(a&&a.terrain){this._style!==a&&(this.style=a),this.enabled=!0;const v=a.terrain.properties;this.sourceCache=a.terrain.drapeRenderMode===0?this._mockSourceCache:a._getSourceCache(v.get("source")),this._exaggeration=v.get("exaggeration");const w=()=>{this.sourceCache.used&&l.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const M=this.getScaledDemTileSize();this.sourceCache.update(h,M,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,w(),this._initializing=!0),w(),h.updateElevation(!0,g),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(h),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(a){this._findCoveringTileCache[a]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const a=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||a.efficiency!==100&&l.warnOnce(`Terrain render cache efficiency is not optimal (${a.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${a.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(a){a.coord&&a.dataType==="source"?this._clearRenderCacheForTile(a.sourceCacheId,a.coord):a.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const a in this._style._sourceCaches)this._style._sourceCaches[a].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(a=>a.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const a=2*this.proxySourceCache.getSource().tileSize;return[a,a]}set useVertexMorphing(a){this._useVertexMorphing=a}updateTileBinding(a){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const h=this.proxySourceCache,g=this.painter.transform;this._initializing&&(this._initializing=g._centerAltitude===0&&this.getAtPointOrZero(l.MercatorCoordinate.fromLngLat(g.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const v=this.proxyCoords=h.getIds().map(z=>{const $=h.getTileByID(z).tileID;return $.projMatrix=g.calculateProjMatrix($.toUnwrapped()),$});(function(z,$){const B=$.transform.pointCoordinate($.transform.getCameraPoint()),W=new l.Point(B.x,B.y);z.sort((ee,oe)=>{if(oe.overscaledZ-ee.overscaledZ)return oe.overscaledZ-ee.overscaledZ;const ae=new l.Point(ee.canonical.x+(1<<ee.canonical.z)*ee.wrap,ee.canonical.y),se=new l.Point(oe.canonical.x+(1<<oe.canonical.z)*oe.wrap,oe.canonical.y),le=W.mult(1<<ee.canonical.z);return le.x-=.5,le.y-=.5,le.distSqr(ae)-le.distSqr(se)})})(v,this.painter),this._previousZoom=g.zoom;const w=this.proxyToSource||{};this.proxyToSource={},v.forEach(z=>{this.proxyToSource[z.key]={}}),this.terrainTileForTile={};const M=this._style._sourceCaches;for(const z in M){const $=M[z];if(!$.used||($!==this.sourceCache&&this.resetTileLookupCache($.id),this._setupProxiedCoordsForOrtho($,a[z],w),$.usedForTerrain))continue;const B=a[z];$.getSource().reparseOverscaled&&this._assignTerrainTiles(B)}this.proxiedCoords[h.id]=v.map(z=>new Lu(z,z.key,this.orthoMatrix)),this._assignTerrainTiles(v),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(w),this.renderingToTexture=!1,this._updateTimestamp=l.exported.now();const P={};this._visibleDemTiles=[];for(const z of this.proxyCoords){const $=this.terrainTileForTile[z.key];if(!$)continue;const B=$.tileID.key;B in P||(this._visibleDemTiles.push($),P[B]=B)}}_assignTerrainTiles(a){this._initializing||a.forEach(h=>{if(this.terrainTileForTile[h.key])return;const g=this._findTileCoveringTileID(h,this.sourceCache);g&&(this.terrainTileForTile[h.key]=g)})}_prepareDEMTextures(){const a=this.painter.context,h=a.gl;for(const g in this.terrainTileForTile){const v=this.terrainTileForTile[g],w=v.dem;!w||v.demTexture&&!v.needsDEMTextureUpload||(a.activeTexture.set(h.TEXTURE1),tp(this.painter,v,w))}}_prepareDemTileUniforms(a,h,g,v){if(!h||h.demTexture==null)return!1;const w=a.tileID.canonical,M=Math.pow(2,h.tileID.canonical.z-w.z),P=v||"";return g[`u_dem_tl${P}`]=[w.x*M%1,w.y*M%1],g[`u_dem_scale${P}`]=M,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const a=this.painter.context,h=a.gl;if(!this._emptyDepthBufferTexture){const g=new l.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new l.Texture(a,g,h.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let a=0;const h=this._visibleDemTiles.reduce((g,v)=>{if(!v.dem)return g;const w=v.dem.tree.minimums[0];return w>0&&a++,g+w},0);return a?h/a:0}_updateEmptyDEMTexture(){const a=this.painter.context,h=a.gl;a.activeTexture.set(h.TEXTURE2);const g=this._getLoadedAreaMinimum(),v=new l.RGBAImage({width:1,height:1},new Uint8Array(l.DEMData.pack(g,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let w=this._emptyDEMTexture;return w?w.update(v,{premultiply:!1}):w=this._emptyDEMTexture=new l.Texture(a,v,h.RGBA,{premultiply:!1}),w}setupElevationDraw(a,h,g){const v=this.painter.context,w=v.gl,M=(P=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:l.DEMData.getUnpackVector(P),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var P;M.u_dem_size=this.sourceCache.getSource().tileSize,M.u_exaggeration=this.exaggeration();let z=null,$=null,B=1;if(g&&g.morphing&&this._useVertexMorphing){const W=g.morphing.srcDemTile,ee=g.morphing.dstDemTile;B=g.morphing.phase,W&&ee&&(this._prepareDemTileUniforms(a,W,M,"_prev")&&($=W),this._prepareDemTileUniforms(a,ee,M)&&(z=ee))}if($&&z?(v.activeTexture.set(w.TEXTURE2),z.demTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE,w.NEAREST),v.activeTexture.set(w.TEXTURE4),$.demTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE,w.NEAREST),M.u_dem_lerp=B):(z=this.terrainTileForTile[a.tileID.key],v.activeTexture.set(w.TEXTURE2),(this._prepareDemTileUniforms(a,z,M)?z.demTexture:this.emptyDEMTexture).bind(w.NEAREST,w.CLAMP_TO_EDGE)),v.activeTexture.set(w.TEXTURE3),g&&g.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE),this._depthFBO&&(M.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE),M.u_depth_size_inv=[1,1]),g&&g.useMeterToDem&&z){const W=(1<<z.tileID.canonical.z)*l.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;M.u_meter_to_dem=W}if(g&&g.labelPlaneMatrixInv&&(M.u_label_plane_matrix_inv=g.labelPlaneMatrixInv),h.setTerrainUniformValues(v,M),this.painter.transform.projection.name==="globe"){const W=this.globeUniformValues(this.painter.transform,a.tileID.canonical,g&&g.useDenormalizedUpVectorScale);h.setGlobeUniformValues(v,W)}}globeUniformValues(a,h,g){const v=a.projection;return{u_tile_tl_up:v.upVector(h,0,0),u_tile_tr_up:v.upVector(h,l.EXTENT,0),u_tile_br_up:v.upVector(h,l.EXTENT,l.EXTENT),u_tile_bl_up:v.upVector(h,0,l.EXTENT),u_tile_up_scale:g?l.globeMetersToEcef(1):v.upVectorScale(h,a.center.lat,a.worldSize).metersToTile}}renderToBackBuffer(a){const h=this.painter,g=this.painter.context;a.length!==0&&(g.bindFramebuffer.set(null),g.viewport.set([0,0,h.width,h.height]),h.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(v,w,M,P,z){if(v.transform.projection.name==="globe")(function($,B,W,ee,oe){const ae=$.context,se=ae.gl;let le,Z;const ie=$.options.showTerrainWireframe?2:0,de=$.transform,pe=l.globeUseCustomAntiAliasing($,ae,de),Ce=(lt,je)=>{if(Z===lt)return;const tt=[_a[lt],"PROJECTION_GLOBE_VIEW"];pe&&tt.push("CUSTOM_ANTIALIASING"),je&&tt.push(_a[ie]),le=$.useProgram("globeRaster",null,tt),Z=lt},Me=$.colorModeForRenderPass(),Ae=new l.DepthMode(se.LEQUAL,l.DepthMode.ReadWrite,$.depthRangeFor3D);xs.update(oe);const Ne=l.calculateGlobeMercatorMatrix(de),ze=[l.mercatorXfromLng(de.center.lng),l.mercatorYfromLat(de.center.lat)],Ue=ie?[!1,!0]:[!1],ct=$.globeSharedBuffers,Be=[de.width*l.exported.devicePixelRatio,de.height*l.exported.devicePixelRatio],nt=Float32Array.from(de.globeMatrix),He={useDenormalizedUpVectorScale:!0};if(Ue.forEach(lt=>{const je=$.transform,tt=zu(je.zoom)*B.exaggeration();Z=-1;const ht=lt?se.LINES:se.TRIANGLES;for(const st of ee){const dt=W.getTile(st),Vt=l.StencilMode.disabled,Qt=B.prevTerrainTileForTile[st.key],Nt=B.terrainTileForTile[st.key];sl(Qt,Nt)&&xs.newMorphing(st.key,Qt,Nt,oe,250),ae.activeTexture.set(se.TEXTURE0),dt.texture.bind(se.LINEAR,se.CLAMP_TO_EDGE);const Xt=xs.getMorphValuesForProxy(st.key),gn=Xt?1:0;Xt&&l.extend$1(He,{morphing:{srcDemTile:Xt.from,dstDemTile:Xt.to,phase:l.easeCubicInOut(Xt.phase)}});const pn=l.tileCornersToBounds(st.canonical),$t=l.getLatitudinalLod(pn.getCenter().lat),Dn=l.getGridMatrix(st.canonical,pn,$t,je.worldSize/je._pixelsPerMercatorPixel),Ln=l.globeNormalizeECEF(l.globeTileBounds(st.canonical)),Fn=Du(je.projMatrix,nt,Ne,Ln,l.globeToMercatorTransition(je.zoom),ze,je.frustumCorners.TL,je.frustumCorners.TR,je.frustumCorners.BR,je.frustumCorners.BL,je.globeCenterInViewSpace,je.globeRadius,Be,tt,Dn);if(Ce(gn,lt),B.setupElevationDraw(dt,le,He),$.prepareDrawProgram(ae,le,st.toUnwrapped()),ct){const[Rn,si,Wr]=lt?ct.getWirefameBuffers($.context,$t):ct.getGridBuffers($t,tt!==0);le.draw(ae,ht,Ae,Vt,Me,l.CullFaceMode.backCCW,Fn,"globe_raster",Rn,si,Wr)}}}),ct){const lt=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];pe&&lt.push("CUSTOM_ANTIALIASING"),le=$.useProgram("globeRaster",null,lt);for(const je of ee){const{x:tt,y:ht,z:st}=je.canonical,dt=ht===0,Vt=ht===(1<<st)-1,[Qt,Nt,Xt,gn]=ct.getPoleBuffers(st);if(gn&&(dt||Vt)){const pn=W.getTile(je);ae.activeTexture.set(se.TEXTURE0),pn.texture.bind(se.LINEAR,se.CLAMP_TO_EDGE);let $t=l.globePoleMatrixForTile(st,tt,de);const Dn=l.globeNormalizeECEF(l.globeTileBounds(je.canonical)),Ln=(Fn,Rn)=>Fn.draw(ae,se.TRIANGLES,Ae,l.StencilMode.disabled,Me,l.CullFaceMode.disabled,Du(de.projMatrix,$t,$t,Dn,0,ze,de.frustumCorners.TL,de.frustumCorners.TR,de.frustumCorners.BR,de.frustumCorners.BL,de.globeCenterInViewSpace,de.globeRadius,Be,0),"globe_pole_raster",Rn,Xt,gn);B.setupElevationDraw(pn,le,He),$.prepareDrawProgram(ae,le,je.toUnwrapped()),dt&&Ln(le,Qt),Vt&&($t=l.scale(l.create(),$t,[1,-1,1]),Ln(le,Nt))}}}})(v,w,M,P,z);else{const $=v.context,B=$.gl;let W,ee;const oe=v.options.showTerrainWireframe?2:0,ae=(de,pe)=>{if(ee===de)return;const Ce=[_a[de]];pe&&Ce.push(_a[oe]),W=v.useProgram("terrainRaster",null,Ce),ee=de},se=v.colorModeForRenderPass(),le=new l.DepthMode(B.LEQUAL,l.DepthMode.ReadWrite,v.depthRangeFor3D);xs.update(z);const Z=v.transform,ie=zu(Z.zoom)*w.exaggeration();(oe?[!1,!0]:[!1]).forEach(de=>{ee=-1;const pe=de?B.LINES:B.TRIANGLES,[Ce,Me]=de?w.getWirefameBuffer():[w.gridIndexBuffer,w.gridSegments];for(const Ae of P){const Ne=M.getTile(Ae),ze=l.StencilMode.disabled,Ue=w.prevTerrainTileForTile[Ae.key],ct=w.terrainTileForTile[Ae.key];sl(Ue,ct)&&xs.newMorphing(Ae.key,Ue,ct,z,250),$.activeTexture.set(B.TEXTURE0),Ne.texture.bind(B.LINEAR,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST);const Be=xs.getMorphValuesForProxy(Ae.key),nt=Be?1:0;let He;Be&&(He={morphing:{srcDemTile:Be.from,dstDemTile:Be.to,phase:l.easeCubicInOut(Be.phase)}});const lt=ol(Ae.projMatrix,Ym(Ae.canonical,Z.renderWorldCopies)?ie/10:ie);ae(nt,de),w.setupElevationDraw(Ne,W,He),v.prepareDrawProgram($,W,Ae.toUnwrapped()),W.draw($,pe,le,ze,se,l.CullFaceMode.backCCW,lt,"terrain_raster",w.gridBuffer,Ce,Me)}})}}(h,this,this.proxySourceCache,a,this._updateTimestamp),this.renderingToTexture=!0,h.gpuTimingDeferredRenderEnd(),a.splice(0,a.length))}renderBatch(a){if(this._drapedRenderBatches.length===0)return a+1;this.renderingToTexture=!0;const h=this.painter,g=this.painter.context,v=this.proxySourceCache,w=this.proxiedCoords[v.id],M=this._drapedRenderBatches.shift(),P=[],z=h.style.order;let $=0;for(const B of w){const W=v.getTileByID(B.proxyTileKey),ee=v.proxyCachedFBO[B.key]?v.proxyCachedFBO[B.key][a]:void 0,oe=ee!==void 0?v.renderCache[ee]:this.pool[$++],ae=ee!==void 0;if(W.texture=oe.tex,ae&&!oe.dirty){P.push(W.tileID);continue}let se;g.bindFramebuffer.set(oe.fb.framebuffer),this.renderedToTile=!1,oe.dirty&&(g.clear({color:l.Color.transparent,stencil:0}),oe.dirty=!1);for(let le=M.start;le<=M.end;++le){const Z=h.style._layers[z[le]];if(Z.isHidden(h.transform.zoom))continue;const ie=h.style._getLayerSourceCache(Z),de=ie?this.proxyToSource[B.key][ie.id]:[B];if(!de)continue;const pe=de;g.viewport.set([0,0,oe.fb.width,oe.fb.height]),se!==(ie?ie.id:null)&&(this._setupStencil(oe,de,Z,ie),se=ie?ie.id:null),h.renderLayer(h,ie,Z,pe)}this.renderedToTile?(oe.dirty=!0,P.push(W.tileID)):ae||--$,$===5&&($=0,this.renderToBackBuffer(P))}return this.renderToBackBuffer(P),this.renderingToTexture=!1,g.bindFramebuffer.set(null),g.viewport.set([0,0,h.width,h.height]),M.end+1}postRender(){}renderCacheEfficiency(a){const h=a.order.length;if(h===0)return{efficiency:100};let g,v=0,w=0,M=!1;for(let P=0;P<h;++P){const z=a._layers[a.order[P]];this._style.isLayerDraped(z)?(M&&++v,++w):M||(M=!0,g=z.id)}return w===0?{efficiency:100}:{efficiency:100*(1-v/w),firstUndrapedLayer:g}}getMinElevationBelowMSL(){let a=0;return this._visibleDemTiles.filter(h=>h.dem).forEach(h=>{a=Math.min(a,h.dem.tree.minimums[0])}),a===0?a:(a-30)*this._exaggeration}raycast(a,h,g){if(!this._visibleDemTiles)return null;const v=this._visibleDemTiles.filter(w=>w.dem).map(w=>{const M=w.tileID,P=1<<M.overscaledZ,{x:z,y:$}=M.canonical,B=z/P,W=(z+1)/P,ee=$/P,oe=($+1)/P;return{minx:B,miny:ee,maxx:W,maxy:oe,t:w.dem.tree.raycastRoot(B,ee,W,oe,a,h,g),tile:w}});v.sort((w,M)=>(w.t!==null?w.t:Number.MAX_VALUE)-(M.t!==null?M.t:Number.MAX_VALUE));for(const w of v){if(w.t==null)return null;const M=w.tile.dem.tree.raycast(w.minx,w.miny,w.maxx,w.maxy,a,h,g);if(M!=null)return M}return null}_createFBO(){const a=this.painter.context,h=a.gl,g=this.drapeBufferSize;a.activeTexture.set(h.TEXTURE0);const v=new l.Texture(a,{width:g[0],height:g[1],data:null},h.RGBA);v.bind(h.LINEAR,h.CLAMP_TO_EDGE);const w=a.createFramebuffer(g[0],g[1],!1);return w.colorAttachment.set(v.texture),w.depthAttachment=new ke(a,w.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=a.createRenderbuffer(a.gl.DEPTH_STENCIL,g[0],g[1]),this._stencilRef=0,w.depthAttachment.set(this._sharedDepthStencil),a.clear({stencil:0})):w.depthAttachment.set(this._sharedDepthStencil),a.extTextureFilterAnisotropic&&!a.extTextureFilterAnisotropicForceOff&&h.texParameterf(h.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax),{fb:w,tex:v,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const a in this._style._sourceCaches)if(this._style._sourceCaches[a].hasTransition())return!0;return this._style.order.some(a=>{const h=this._style._layers[a],g=h.isHidden(this.painter.transform.zoom);return h.type==="custom"?!g&&h.shouldRedrape():!g&&h.hasTransition()})}_clearLineLayersFromRenderCache(){let a=!1;for(const g of this._style._getSources())if(g instanceof wt){a=!0;break}if(!a)return;const h={};for(let g=0;g<this._style.order.length;++g){const v=this._style._layers[this._style.order[g]],w=this._style._getLayerSourceCache(v);if(w&&!h[w.id]&&!v.isHidden(this.painter.transform.zoom)&&v.type==="line"&&v.widthExpression()instanceof l.ZoomDependentExpression){h[w.id]=!0;for(const M of this.proxyCoords){const P=this.proxyToSource[M.key][w.id];if(P)for(const z of P)this._clearRenderCacheForTile(w.id,z)}}}}_clearRasterLayersFromRenderCache(){let a=!1;for(const g in this._style._sourceCaches)if(this._style._sourceCaches[g]._source instanceof pt){a=!0;break}if(!a)return;const h={};for(let g=0;g<this._style.order.length;++g){const v=this._style._layers[this._style.order[g]],w=this._style._getLayerSourceCache(v);if(!w||h[w.id]||v.isHidden(this.painter.transform.zoom)||v.type!=="raster")continue;const M=v.paint.get("raster-fade-duration");for(const P of this.proxyCoords){const z=this.proxyToSource[P.key][w.id];if(z)for(const $ of z){const B=rp(w.getTile($),w.findLoadedParent($,0),w,this.painter.transform,M);(B.opacity!==1||B.mix!==0)&&this._clearRenderCacheForTile(w.id,$)}}}}_setupDrapedRenderBatches(){const a=this._style.order,h=a.length;if(h===0)return;const g=[];let v,w=0,M=this._style._layers[a[w]];for(;!this._style.isLayerDraped(M)&&M.isHidden(this.painter.transform.zoom)&&++w<h;)M=this._style._layers[a[w]];for(;w<h;++w){const P=this._style._layers[a[w]];P.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(P)?v===void 0&&(v=w):v!==void 0&&(g.push({start:v,end:w-1}),v=void 0))}v!==void 0&&g.push({start:v,end:w-1}),this._drapedRenderBatches=g}_setupRenderCache(a){const h=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,h.renderCache.length>h.renderCachePool.length){const M=Object.values(h.proxyCachedFBO);h.proxyCachedFBO={};for(let P=0;P<M.length;++P){const z=Object.values(M[P]);h.renderCachePool.push(...z)}}return}this._clearRasterLayersFromRenderCache();const g=this.proxyCoords,v=this._tilesDirty;for(let M=g.length-1;M>=0;M--){const P=g[M];if(h.getTileByID(P.key),h.proxyCachedFBO[P.key]!==void 0){const z=a[P.key],$=this.proxyToSource[P.key];let B=0;for(const W in $){const ee=$[W],oe=z[W];if(!oe||oe.length!==ee.length||ee.some((ae,se)=>ae!==oe[se]||v[W]&&v[W].hasOwnProperty(ae.key))){B=-1;break}++B}for(const W in h.proxyCachedFBO[P.key])h.renderCache[h.proxyCachedFBO[P.key][W]].dirty=B<0||B!==Object.values(z).length}}const w=[...this._drapedRenderBatches];w.sort((M,P)=>P.end-P.start-(M.end-M.start));for(const M of w)for(const P of g){if(h.proxyCachedFBO[P.key])continue;let z=h.renderCachePool.pop();z===void 0&&h.renderCache.length<50&&(z=h.renderCache.length,h.renderCache.push(this._createFBO())),z!==void 0&&(h.proxyCachedFBO[P.key]={},h.proxyCachedFBO[P.key][M.start]=z,h.renderCache[z].dirty=!0)}this._tilesDirty={}}_setupStencil(a,h,g,v){if(!v||!this._sourceTilesOverlap[v.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const w=this.painter.context,M=w.gl;if(h.length<=1)return void(this._overlapStencilType=!1);let P;if(g.isTileClipped())P=h.length,this._overlapStencilMode.test={func:M.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(h[0].overscaledZ>h[h.length-1].overscaledZ))return void(this._overlapStencilType=!1);P=1,this._overlapStencilMode.test={func:M.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+P>255&&(w.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=P,this._overlapStencilMode.ref=this._stencilRef,g.isTileClipped()&&this._renderTileClippingMasks(h,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(a){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[a.key]),this._overlapStencilMode):l.StencilMode.disabled}_renderTileClippingMasks(a,h){const g=this.painter,v=this.painter.context,w=v.gl;g._tileClippingMaskIDs={},v.setColorMode(l.ColorMode.disabled),v.setDepthMode(l.DepthMode.disabled);const M=g.useProgram("clippingMask");for(const P of a){const z=g._tileClippingMaskIDs[P.key]=--h;M.draw(v,w.TRIANGLES,l.DepthMode.disabled,new l.StencilMode({func:w.ALWAYS,mask:0},z,255,w.KEEP,w.KEEP,w.REPLACE),l.ColorMode.disabled,l.CullFaceMode.disabled,Ec(P.projMatrix),"$clipping",g.tileExtentBuffer,g.quadTriangleIndexBuffer,g.tileExtentSegments)}}pointCoordinate(a){const h=this.painter.transform;if(a.x<0||a.x>h.width||a.y<0||a.y>h.height)return null;const g=[a.x,a.y,1,1];l.transformMat4$1(g,g,h.pixelMatrixInverse),l.scale$1(g,g,1/g[3]),g[0]/=h.worldSize,g[1]/=h.worldSize;const v=h._camera.position,w=l.mercatorZfromAltitude(1,h.center.lat),M=[v[0],v[1],v[2]/w,0],P=l.subtract([],g.slice(0,3),M);l.normalize(P,P);const z=this.raycast(M,P,this._exaggeration);return z!==null&&z?(l.scaleAndAdd(M,M,P,z),M[3]=M[2],M[2]*=w,M):null}drawDepth(){const a=this.painter,h=a.context,g=this.proxySourceCache,v=Math.ceil(a.width),w=Math.ceil(a.height);if(!this._depthFBO||this._depthFBO.width===v&&this._depthFBO.height===w||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const M=h.gl,P=h.createFramebuffer(v,w,!0);h.activeTexture.set(M.TEXTURE0);const z=new l.Texture(h,{width:v,height:w,data:null},M.RGBA);z.bind(M.NEAREST,M.CLAMP_TO_EDGE),P.colorAttachment.set(z.texture);const $=h.createRenderbuffer(h.gl.DEPTH_COMPONENT16,v,w);P.depthAttachment.set($),this._depthFBO=P,this._depthTexture=z}h.bindFramebuffer.set(this._depthFBO.framebuffer),h.viewport.set([0,0,v,w]),function(M,P,z,$){if(M.transform.projection.name==="globe")return;const B=M.context,W=B.gl;B.clear({depth:1});const ee=M.useProgram("terrainDepth"),oe=new l.DepthMode(W.LESS,l.DepthMode.ReadWrite,M.depthRangeFor3D);for(const ae of $){const se=z.getTile(ae),le=ol(ae.projMatrix,0);P.setupElevationDraw(se,ee),ee.draw(B,W.TRIANGLES,oe,l.StencilMode.disabled,l.ColorMode.unblended,l.CullFaceMode.backCCW,le,"terrain_depth",P.gridBuffer,P.gridIndexBuffer,P.gridNoSkirtSegments)}}(a,this,g,this.proxyCoords)}_setupProxiedCoordsForOrtho(a,h,g){if(a.getSource()instanceof hn)return this._setupProxiedCoordsForImageSource(a,h,g);this._findCoveringTileCache[a.id]=this._findCoveringTileCache[a.id]||{};const v=this.proxiedCoords[a.id]=[],w=this.proxyCoords;for(let P=0;P<w.length;P++){const z=w[P],$=this._findTileCoveringTileID(z,a);if($){const B=this._createProxiedId(z,$,g[z.key]&&g[z.key][a.id]);v.push(B),this.proxyToSource[z.key][a.id]=[B]}}let M=!1;for(let P=0;P<h.length;P++){const z=a.getTile(h[P]);if(!z||!z.hasData())continue;const $=this._findTileCoveringTileID(z.tileID,this.proxySourceCache);if($&&$.tileID.canonical.z!==z.tileID.canonical.z){const B=this.proxyToSource[$.tileID.key][a.id],W=this._createProxiedId($.tileID,z,g[$.tileID.key]&&g[$.tileID.key][a.id]);B?B.splice(B.length-1,0,W):this.proxyToSource[$.tileID.key][a.id]=[W],v.push(W),M=!0}}this._sourceTilesOverlap[a.id]=M}_setupProxiedCoordsForImageSource(a,h,g){if(!a.getSource().loaded())return;const v=this.proxiedCoords[a.id]=[],w=this.proxyCoords,M=a.getSource(),P=new l.Point(M.tileID.x,M.tileID.y)._div(1<<M.tileID.z),z=M.coordinates.map(l.MercatorCoordinate.fromLngLat).reduce((B,W)=>(B.min.x=Math.min(B.min.x,W.x-P.x),B.min.y=Math.min(B.min.y,W.y-P.y),B.max.x=Math.max(B.max.x,W.x-P.x),B.max.y=Math.max(B.max.y,W.y-P.y),B),{min:new l.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new l.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),$=(B,W)=>{const ee=B.wrap+B.canonical.x/(1<<B.canonical.z),oe=B.canonical.y/(1<<B.canonical.z),ae=l.EXTENT/(1<<B.canonical.z),se=W.wrap+W.canonical.x/(1<<W.canonical.z),le=W.canonical.y/(1<<W.canonical.z);return ee+ae<se+z.min.x||ee>se+z.max.x||oe+ae<le+z.min.y||oe>le+z.max.y};for(let B=0;B<w.length;B++){const W=w[B];for(let ee=0;ee<h.length;ee++){const oe=a.getTile(h[ee]);if(!oe||!oe.hasData()||$(W,oe.tileID))continue;const ae=this._createProxiedId(W,oe,g[W.key]&&g[W.key][a.id]),se=this.proxyToSource[W.key][a.id];se?se.push(ae):this.proxyToSource[W.key][a.id]=[ae],v.push(ae)}}}_createProxiedId(a,h,g){let v=this.orthoMatrix;if(g){const w=g.find(M=>M.key===h.tileID.key);if(w)return w}if(h.tileID.key!==a.key){const w=a.canonical.z-h.tileID.canonical.z;let M,P,z;v=l.create();const $=h.tileID.wrap-a.wrap<<a.overscaledZ;w>0?(M=l.EXTENT>>w,P=M*((h.tileID.canonical.x<<w)-a.canonical.x+$),z=M*((h.tileID.canonical.y<<w)-a.canonical.y)):(M=l.EXTENT<<-w,P=l.EXTENT*(h.tileID.canonical.x-(a.canonical.x+$<<-w)),z=l.EXTENT*(h.tileID.canonical.y-(a.canonical.y<<-w))),l.ortho(v,0,M,0,M,0,1),l.translate(v,v,[P,z,0])}return new Lu(h.tileID,a.key,v)}_findTileCoveringTileID(a,h){let g=h.getTile(a);if(g&&g.hasData())return g;const v=this._findCoveringTileCache[h.id],w=v[a.key];if(g=w?h.getTileByID(w):null,g&&g.hasData()||w===null)return g;let M=g?g.tileID:a,P=M.overscaledZ;const z=h.getSource().minzoom,$=[];if(!w){const W=h.getSource().maxzoom;if(a.canonical.z>=W){const ee=a.canonical.z-W;h.getSource().reparseOverscaled?(P=Math.max(a.canonical.z+2,h.transform.tileZoom),M=new l.OverscaledTileID(P,a.wrap,W,a.canonical.x>>ee,a.canonical.y>>ee)):ee!==0&&(P=W,M=new l.OverscaledTileID(P,a.wrap,W,a.canonical.x>>ee,a.canonical.y>>ee))}M.key!==a.key&&($.push(M.key),g=h.getTile(M))}const B=W=>{$.forEach(ee=>{v[ee]=W}),$.length=0};for(P-=1;P>=z&&(!g||!g.hasData());P--){g&&B(g.tileID.key);const W=M.calculateScaledKey(P);if(g=h.getTileByID(W),g&&g.hasData())break;const ee=v[W];if(ee===null)break;ee===void 0?$.push(W):g=h.getTileByID(ee)}return B(g?g.tileID.key:null),g&&g.hasData()?g:null}findDEMTileFor(a){return this.enabled?this._findTileCoveringTileID(a,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(a,h){let g=this._tilesDirty[a];g||(g=this._tilesDirty[a]={}),g[h.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const a=function(h){let g=0;const v=new l.StructArrayLayout2ui4,w=131;for(let M=1;M<129;M++){for(let P=1;P<129;P++)g=M*w+P,v.emplaceBack(g,g+1),v.emplaceBack(g,g+w),v.emplaceBack(g+1,g+w),M===128&&v.emplaceBack(g+w,g+w+1);v.emplaceBack(g+1,g+1+w)}return v}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(a),this.wireframeSegments=l.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,a.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class En{static cacheKey(a,h,g,v){let w=`${h}${v?v.cacheKey:""}`;for(const M of g)a.usedDefines.includes(M)&&(w+=`/${M}`);return w}constructor(a,h,g,v,w,M){const P=a.gl;this.program=P.createProgram();const z=function(Z){const ie=[];for(let de=0;de<Z.length;de++){if(Z[de]===null)continue;const pe=Z[de].split(" ");ie.push(pe.pop())}return ie}(g.staticAttributes),$=v?v.getBinderAttributes():[],B=z.concat($);let W=v?v.defines():[];W=W.concat(M.map(Z=>`#define ${Z}`));const ee=a.isWebGL2?`#version 300 es
`:"",oe=ee+W.concat(a.extStandardDerivatives&&ee.length===0?`#extension GL_OES_standard_derivatives : enable
`.concat(Jd):Jd,Jd,Iu,Zm.fragmentSource,rl.fragmentSource,g.fragmentSource).join(`
`),ae=ee+W.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,Iu,Zm.vertexSource,rl.vertexSource,Pu.vertexSource,g.vertexSource).join(`
`),se=P.createShader(P.FRAGMENT_SHADER);if(P.isContextLost())return void(this.failedToCreate=!0);P.shaderSource(se,oe),P.compileShader(se),P.attachShader(this.program,se);const le=P.createShader(P.VERTEX_SHADER);if(P.isContextLost())this.failedToCreate=!0;else{P.shaderSource(le,ae),P.compileShader(le),P.attachShader(this.program,le),this.attributes={},this.numAttributes=B.length;for(let Z=0;Z<this.numAttributes;Z++)B[Z]&&(P.bindAttribLocation(this.program,Z,B[Z]),this.attributes[B[Z]]=Z);P.linkProgram(this.program),P.deleteShader(le),P.deleteShader(se),this.fixedUniforms=w(a),this.binderUniforms=v?v.getUniforms(a):[],M.includes("TERRAIN")&&(this.terrainUniforms=(Z=>({u_dem:new l.Uniform1i(Z),u_dem_prev:new l.Uniform1i(Z),u_dem_unpack:new l.Uniform4f(Z),u_dem_tl:new l.Uniform2f(Z),u_dem_scale:new l.Uniform1f(Z),u_dem_tl_prev:new l.Uniform2f(Z),u_dem_scale_prev:new l.Uniform1f(Z),u_dem_size:new l.Uniform1f(Z),u_dem_lerp:new l.Uniform1f(Z),u_exaggeration:new l.Uniform1f(Z),u_depth:new l.Uniform1i(Z),u_depth_size_inv:new l.Uniform2f(Z),u_meter_to_dem:new l.Uniform1f(Z),u_label_plane_matrix_inv:new l.UniformMatrix4f(Z)}))(a)),M.includes("GLOBE")&&(this.globeUniforms=(Z=>({u_tile_tl_up:new l.Uniform3f(Z),u_tile_tr_up:new l.Uniform3f(Z),u_tile_br_up:new l.Uniform3f(Z),u_tile_bl_up:new l.Uniform3f(Z),u_tile_up_scale:new l.Uniform1f(Z)}))(a)),M.includes("FOG")&&(this.fogUniforms=(Z=>({u_fog_matrix:new l.UniformMatrix4f(Z),u_fog_range:new l.Uniform2f(Z),u_fog_color:new l.Uniform4f(Z),u_fog_horizon_blend:new l.Uniform1f(Z),u_fog_temporal_offset:new l.Uniform1f(Z),u_frustum_tl:new l.Uniform3f(Z),u_frustum_tr:new l.Uniform3f(Z),u_frustum_br:new l.Uniform3f(Z),u_frustum_bl:new l.Uniform3f(Z),u_globe_pos:new l.Uniform3f(Z),u_globe_radius:new l.Uniform1f(Z),u_globe_transition:new l.Uniform1f(Z),u_is_globe:new l.Uniform1i(Z),u_viewport:new l.Uniform2f(Z)}))(a))}}setTerrainUniformValues(a,h){if(!this.terrainUniforms)return;const g=this.terrainUniforms;if(!this.failedToCreate){a.program.set(this.program);for(const v in h)g[v]&&g[v].set(this.program,v,h[v])}}setGlobeUniformValues(a,h){if(!this.globeUniforms)return;const g=this.globeUniforms;if(!this.failedToCreate){a.program.set(this.program);for(const v in h)g[v]&&g[v].set(this.program,v,h[v])}}setFogUniformValues(a,h){if(!this.fogUniforms)return;const g=this.fogUniforms;if(!this.failedToCreate){a.program.set(this.program);for(const v in h)g[v].set(this.program,v,h[v])}}draw(a,h,g,v,w,M,P,z,$,B,W,ee,oe,ae,se){const le=a.gl;if(this.failedToCreate)return;a.program.set(this.program),a.setDepthMode(g),a.setStencilMode(v),a.setColorMode(w),a.setCullFace(M);for(const ie of Object.keys(this.fixedUniforms))this.fixedUniforms[ie].set(this.program,ie,P[ie]);ae&&ae.setUniforms(this.program,a,this.binderUniforms,ee,{zoom:oe});const Z={[le.LINES]:2,[le.TRIANGLES]:3,[le.LINE_STRIP]:1}[h];for(const ie of W.get()){const de=ie.vaos||(ie.vaos={});(de[z]||(de[z]=new Ax)).bind(a,this,$,ae?ae.getPaintVertexBuffers():[],B,ie.vertexOffset,se||[]),le.drawElements(h,ie.primitiveLength*Z,le.UNSIGNED_SHORT,ie.primitiveOffset*Z*2)}}}function Tc(f,a){const h=Math.pow(2,a.tileID.overscaledZ),g=a.tileSize*Math.pow(2,f.transform.tileZoom)/h,v=g*(a.tileID.canonical.x+a.tileID.wrap*h),w=g*a.tileID.canonical.y;return{u_image:0,u_texsize:a.imageAtlasTexture.size,u_tile_units_to_pixels:1/_t(a,1,f.transform.tileZoom),u_pixel_coord_upper:[v>>16,w>>16],u_pixel_coord_lower:[65535&v,65535&w]}}const Jm=l.create(),sp=(f,a,h,g,v,w,M,P,z,$,B)=>{const W=a.style.light,ee=W.properties.get("position"),oe=[ee.x,ee.y,ee.z],ae=l.create$1();W.properties.get("anchor")==="viewport"&&(l.fromRotation(ae,-a.transform.angle),l.transformMat3(oe,oe,ae));const se=W.properties.get("color"),le=a.transform,Z={u_matrix:f,u_lightpos:oe,u_lightintensity:W.properties.get("intensity"),u_lightcolor:[se.r,se.g,se.b],u_vertical_gradient:+h,u_opacity:g,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Jm,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:v,u_edge_radius:w};return le.projection.name==="globe"&&(Z.u_tile_id=[M.canonical.x,M.canonical.y,1<<M.canonical.z],Z.u_zoom_transition=z,Z.u_inv_rot_matrix=B,Z.u_merc_center=$,Z.u_up_dir=le.projection.upVector(new l.CanonicalTileID(0,0,0),$[0]*l.EXTENT,$[1]*l.EXTENT),Z.u_height_lift=P),Z},Qm=(f,a,h,g,v,w,M,P,z,$,B,W)=>{const ee=sp(f,a,h,g,v,w,M,z,$,B,W),oe={u_height_factor:-Math.pow(2,M.overscaledZ)/P.tileSize/8};return l.extend(ee,Tc(a,P),oe)},va=f=>({u_matrix:f}),ap=(f,a,h)=>l.extend(va(f),Tc(a,h)),Mx=(f,a)=>({u_matrix:f,u_world:a}),kx=(f,a,h,g)=>l.extend(ap(f,a,h),{u_world:g}),Px=l.create(),lp=(f,a,h,g,v,w)=>{const M=f.transform,P=M.projection.name==="globe";let z;if(w.paint.get("circle-pitch-alignment")==="map")if(P){const B=l.globePixelsToTileUnits(M.zoom,a.canonical)*M._pixelsPerMercatorPixel;z=Float32Array.from([B,0,0,B])}else z=M.calculatePixelsToTileUnitsMatrix(h);else z=new Float32Array([M.pixelsToGLUnits[0],0,0,M.pixelsToGLUnits[1]]);const $={u_camera_to_center_distance:M.cameraToCenterDistance,u_matrix:f.translatePosMatrix(a.projMatrix,h,w.paint.get("circle-translate"),w.paint.get("circle-translate-anchor")),u_device_pixel_ratio:l.exported.devicePixelRatio,u_extrude_scale:z,u_inv_rot_matrix:Px,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(P){$.u_inv_rot_matrix=g,$.u_merc_center=v,$.u_tile_id=[a.canonical.x,a.canonical.y,1<<a.canonical.z],$.u_zoom_transition=l.globeToMercatorTransition(M.zoom);const B=v[0]*l.EXTENT,W=v[1]*l.EXTENT;$.u_up_dir=M.projection.upVector(new l.CanonicalTileID(0,0,0),B,W)}return $},cp=f=>{const a=[];return f.paint.get("circle-pitch-alignment")==="map"&&a.push("PITCH_WITH_MAP"),f.paint.get("circle-pitch-scale")==="map"&&a.push("SCALE_WITH_MAP"),a},up=(f,a,h,g)=>{const v=l.EXTENT/h.tileSize;return{u_matrix:f,u_camera_to_center_distance:a.getCameraToCenterDistance(g),u_extrude_scale:[a.pixelsToGLUnits[0]/v,a.pixelsToGLUnits[1]/v]}},Fu=(f,a,h=1)=>({u_matrix:f,u_color:a,u_overlay:0,u_overlay_scale:h}),eg=l.create(),tg=(f,a,h,g,v,w,M)=>{const P=f.transform,z=P.projection.name==="globe",$=z?l.globePixelsToTileUnits(P.zoom,a.canonical)*P._pixelsPerMercatorPixel:_t(h,1,w),B={u_matrix:a.projMatrix,u_extrude_scale:$,u_intensity:M,u_inv_rot_matrix:eg,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(z){B.u_inv_rot_matrix=g,B.u_merc_center=v,B.u_tile_id=[a.canonical.x,a.canonical.y,1<<a.canonical.z],B.u_zoom_transition=l.globeToMercatorTransition(P.zoom);const W=v[0]*l.EXTENT,ee=v[1]*l.EXTENT;B.u_up_dir=P.projection.upVector(new l.CanonicalTileID(0,0,0),W,ee)}return B},Ix=(f,a,h,g,v,w,M)=>{const P=f.transform,z=P.calculatePixelsToTileUnitsMatrix(a);return{u_matrix:hp(f,a,h,g),u_pixels_to_tile_units:z,u_device_pixel_ratio:w,u_units_to_pixels:[1/P.pixelsToGLUnits[0],1/P.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:v,u_texsize:Cc(h)?a.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:al(a,f.transform),u_alpha_discard_threshold:0,u_trim_offset:M}},Sc=(f,a,h,g,v)=>{const w=f.transform;return{u_matrix:hp(f,a,h,g),u_texsize:a.imageAtlasTexture.size,u_pixels_to_tile_units:w.calculatePixelsToTileUnitsMatrix(a),u_device_pixel_ratio:v,u_image:0,u_tile_units_to_pixels:al(a,w),u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function al(f,a){return 1/_t(f,1,a.tileZoom)}function hp(f,a,h,g){return f.translatePosMatrix(g||a.tileID.projMatrix,a,h.paint.get("line-translate"),h.paint.get("line-translate-anchor"))}function Cc(f){const a=f.paint.get("line-dasharray").value;return a.value||a.kind!=="constant"}const dp=(f,a,h,g,v,w)=>{return{u_matrix:f,u_tl_parent:a,u_scale_parent:h,u_fade_t:g.mix,u_opacity:g.opacity*v.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:v.paint.get("raster-brightness-min"),u_brightness_high:v.paint.get("raster-brightness-max"),u_saturation_factor:(P=v.paint.get("raster-saturation"),P>0?1-1/(1.001-P):-P),u_contrast_factor:(M=v.paint.get("raster-contrast"),M>0?1/(1-M):1+M),u_spin_weights:Wo(v.paint.get("raster-hue-rotate")),u_perspective_transform:w};var M,P};function Wo(f){f*=Math.PI/180;const a=Math.sin(f),h=Math.cos(f);return[(2*h+1)/3,(-Math.sqrt(3)*a-h+1)/3,(Math.sqrt(3)*a-h+1)/3]}const Ru=l.create(),pp=(f,a,h,g,v,w,M,P,z,$,B,W,ee,oe,ae,se)=>{const le=v.transform,Z={u_is_size_zoom_constant:+(f==="constant"||f==="source"),u_is_size_feature_constant:+(f==="constant"||f==="camera"),u_size_t:a?a.uSizeT:0,u_size:a?a.uSize:0,u_camera_to_center_distance:le.cameraToCenterDistance,u_rotate_symbol:+h,u_aspect_ratio:le.width/le.height,u_fade_change:v.options.fadeDuration?v.symbolFadeChange:1,u_matrix:w,u_label_plane_matrix:M,u_coord_matrix:P,u_is_text:+z,u_pitch_with_map:+g,u_texsize:$,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Ru,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Ru,u_up_vector:[0,-1,0]};return se.name==="globe"&&(Z.u_tile_id=[B.canonical.x,B.canonical.y,1<<B.canonical.z],Z.u_zoom_transition=W,Z.u_inv_rot_matrix=oe,Z.u_merc_center=ee,Z.u_camera_forward=le._camera.forward(),Z.u_ecef_origin=l.globeECEFOrigin(le.globeMatrix,B.toUnwrapped()),Z.u_tile_matrix=Float32Array.from(le.globeMatrix),Z.u_up_vector=ae),Z},Ou=(f,a,h,g,v,w,M,P,z,$,B,W,ee,oe,ae,se,le)=>l.extend(pp(f,a,h,g,v,w,M,P,z,$,W,ee,oe,ae,se,le),{u_gamma_scale:g?v.transform.cameraToCenterDistance*Math.cos(v.terrain?0:v.transform._pitch):1,u_device_pixel_ratio:l.exported.devicePixelRatio,u_is_halo:+B}),ng=(f,a,h,g,v,w,M,P,z,$,B,W,ee,oe,ae,se)=>l.extend(Ou(f,a,h,g,v,w,M,P,!0,z,!0,B,W,ee,oe,ae,se),{u_texsize_icon:$,u_texture_icon:1}),fp=(f,a,h)=>({u_matrix:f,u_opacity:a,u_color:h}),Dx=(f,a,h,g,v)=>l.extend(function(w,M,P){const z=M.imageManager.getPattern(w.toString()),{width:$,height:B}=M.imageManager.getPixelSize(),W=Math.pow(2,P.tileID.overscaledZ),ee=P.tileSize*Math.pow(2,M.transform.tileZoom)/W,oe=ee*(P.tileID.canonical.x+P.tileID.wrap*W),ae=ee*P.tileID.canonical.y;return{u_image:0,u_pattern_tl:z.tl,u_pattern_br:z.br,u_texsize:[$,B],u_pattern_size:z.displaySize,u_tile_units_to_pixels:1/_t(P,1,M.transform.tileZoom),u_pixel_coord_upper:[oe>>16,ae>>16],u_pixel_coord_lower:[65535&oe,65535&ae]}}(g,h,v),{u_matrix:f,u_opacity:a}),mp={fillExtrusion:f=>({u_matrix:new l.UniformMatrix4f(f),u_lightpos:new l.Uniform3f(f),u_lightintensity:new l.Uniform1f(f),u_lightcolor:new l.Uniform3f(f),u_vertical_gradient:new l.Uniform1f(f),u_opacity:new l.Uniform1f(f),u_edge_radius:new l.Uniform1f(f),u_ao:new l.Uniform2f(f),u_tile_id:new l.Uniform3f(f),u_zoom_transition:new l.Uniform1f(f),u_inv_rot_matrix:new l.UniformMatrix4f(f),u_merc_center:new l.Uniform2f(f),u_up_dir:new l.Uniform3f(f),u_height_lift:new l.Uniform1f(f)}),fillExtrusionPattern:f=>({u_matrix:new l.UniformMatrix4f(f),u_lightpos:new l.Uniform3f(f),u_lightintensity:new l.Uniform1f(f),u_lightcolor:new l.Uniform3f(f),u_vertical_gradient:new l.Uniform1f(f),u_height_factor:new l.Uniform1f(f),u_edge_radius:new l.Uniform1f(f),u_ao:new l.Uniform2f(f),u_tile_id:new l.Uniform3f(f),u_zoom_transition:new l.Uniform1f(f),u_inv_rot_matrix:new l.UniformMatrix4f(f),u_merc_center:new l.Uniform2f(f),u_up_dir:new l.Uniform3f(f),u_height_lift:new l.Uniform1f(f),u_image:new l.Uniform1i(f),u_texsize:new l.Uniform2f(f),u_pixel_coord_upper:new l.Uniform2f(f),u_pixel_coord_lower:new l.Uniform2f(f),u_tile_units_to_pixels:new l.Uniform1f(f),u_opacity:new l.Uniform1f(f)}),fill:f=>({u_matrix:new l.UniformMatrix4f(f)}),fillPattern:f=>({u_matrix:new l.UniformMatrix4f(f),u_image:new l.Uniform1i(f),u_texsize:new l.Uniform2f(f),u_pixel_coord_upper:new l.Uniform2f(f),u_pixel_coord_lower:new l.Uniform2f(f),u_tile_units_to_pixels:new l.Uniform1f(f)}),fillOutline:f=>({u_matrix:new l.UniformMatrix4f(f),u_world:new l.Uniform2f(f)}),fillOutlinePattern:f=>({u_matrix:new l.UniformMatrix4f(f),u_world:new l.Uniform2f(f),u_image:new l.Uniform1i(f),u_texsize:new l.Uniform2f(f),u_pixel_coord_upper:new l.Uniform2f(f),u_pixel_coord_lower:new l.Uniform2f(f),u_tile_units_to_pixels:new l.Uniform1f(f)}),circle:f=>({u_camera_to_center_distance:new l.Uniform1f(f),u_extrude_scale:new l.UniformMatrix2f(f),u_device_pixel_ratio:new l.Uniform1f(f),u_matrix:new l.UniformMatrix4f(f),u_inv_rot_matrix:new l.UniformMatrix4f(f),u_merc_center:new l.Uniform2f(f),u_tile_id:new l.Uniform3f(f),u_zoom_transition:new l.Uniform1f(f),u_up_dir:new l.Uniform3f(f)}),collisionBox:f=>({u_matrix:new l.UniformMatrix4f(f),u_camera_to_center_distance:new l.Uniform1f(f),u_extrude_scale:new l.Uniform2f(f)}),collisionCircle:f=>({u_matrix:new l.UniformMatrix4f(f),u_inv_matrix:new l.UniformMatrix4f(f),u_camera_to_center_distance:new l.Uniform1f(f),u_viewport_size:new l.Uniform2f(f)}),debug:f=>({u_color:new l.UniformColor(f),u_matrix:new l.UniformMatrix4f(f),u_overlay:new l.Uniform1i(f),u_overlay_scale:new l.Uniform1f(f)}),clippingMask:f=>({u_matrix:new l.UniformMatrix4f(f)}),heatmap:f=>({u_extrude_scale:new l.Uniform1f(f),u_intensity:new l.Uniform1f(f),u_matrix:new l.UniformMatrix4f(f),u_inv_rot_matrix:new l.UniformMatrix4f(f),u_merc_center:new l.Uniform2f(f),u_tile_id:new l.Uniform3f(f),u_zoom_transition:new l.Uniform1f(f),u_up_dir:new l.Uniform3f(f)}),heatmapTexture:f=>({u_image:new l.Uniform1i(f),u_color_ramp:new l.Uniform1i(f),u_opacity:new l.Uniform1f(f)}),hillshade:f=>({u_matrix:new l.UniformMatrix4f(f),u_image:new l.Uniform1i(f),u_latrange:new l.Uniform2f(f),u_light:new l.Uniform2f(f),u_shadow:new l.UniformColor(f),u_highlight:new l.UniformColor(f),u_accent:new l.UniformColor(f)}),hillshadePrepare:f=>({u_matrix:new l.UniformMatrix4f(f),u_image:new l.Uniform1i(f),u_dimension:new l.Uniform2f(f),u_zoom:new l.Uniform1f(f),u_unpack:new l.Uniform4f(f)}),line:f=>({u_matrix:new l.UniformMatrix4f(f),u_pixels_to_tile_units:new l.UniformMatrix2f(f),u_device_pixel_ratio:new l.Uniform1f(f),u_units_to_pixels:new l.Uniform2f(f),u_dash_image:new l.Uniform1i(f),u_gradient_image:new l.Uniform1i(f),u_image_height:new l.Uniform1f(f),u_texsize:new l.Uniform2f(f),u_tile_units_to_pixels:new l.Uniform1f(f),u_alpha_discard_threshold:new l.Uniform1f(f),u_trim_offset:new l.Uniform2f(f)}),linePattern:f=>({u_matrix:new l.UniformMatrix4f(f),u_texsize:new l.Uniform2f(f),u_pixels_to_tile_units:new l.UniformMatrix2f(f),u_device_pixel_ratio:new l.Uniform1f(f),u_image:new l.Uniform1i(f),u_units_to_pixels:new l.Uniform2f(f),u_tile_units_to_pixels:new l.Uniform1f(f),u_alpha_discard_threshold:new l.Uniform1f(f)}),raster:f=>({u_matrix:new l.UniformMatrix4f(f),u_tl_parent:new l.Uniform2f(f),u_scale_parent:new l.Uniform1f(f),u_fade_t:new l.Uniform1f(f),u_opacity:new l.Uniform1f(f),u_image0:new l.Uniform1i(f),u_image1:new l.Uniform1i(f),u_brightness_low:new l.Uniform1f(f),u_brightness_high:new l.Uniform1f(f),u_saturation_factor:new l.Uniform1f(f),u_contrast_factor:new l.Uniform1f(f),u_spin_weights:new l.Uniform3f(f),u_perspective_transform:new l.Uniform2f(f)}),symbolIcon:f=>({u_is_size_zoom_constant:new l.Uniform1i(f),u_is_size_feature_constant:new l.Uniform1i(f),u_size_t:new l.Uniform1f(f),u_size:new l.Uniform1f(f),u_camera_to_center_distance:new l.Uniform1f(f),u_rotate_symbol:new l.Uniform1i(f),u_aspect_ratio:new l.Uniform1f(f),u_fade_change:new l.Uniform1f(f),u_matrix:new l.UniformMatrix4f(f),u_label_plane_matrix:new l.UniformMatrix4f(f),u_coord_matrix:new l.UniformMatrix4f(f),u_is_text:new l.Uniform1i(f),u_pitch_with_map:new l.Uniform1i(f),u_texsize:new l.Uniform2f(f),u_tile_id:new l.Uniform3f(f),u_zoom_transition:new l.Uniform1f(f),u_inv_rot_matrix:new l.UniformMatrix4f(f),u_merc_center:new l.Uniform2f(f),u_camera_forward:new l.Uniform3f(f),u_tile_matrix:new l.UniformMatrix4f(f),u_up_vector:new l.Uniform3f(f),u_ecef_origin:new l.Uniform3f(f),u_texture:new l.Uniform1i(f)}),symbolSDF:f=>({u_is_size_zoom_constant:new l.Uniform1i(f),u_is_size_feature_constant:new l.Uniform1i(f),u_size_t:new l.Uniform1f(f),u_size:new l.Uniform1f(f),u_camera_to_center_distance:new l.Uniform1f(f),u_rotate_symbol:new l.Uniform1i(f),u_aspect_ratio:new l.Uniform1f(f),u_fade_change:new l.Uniform1f(f),u_matrix:new l.UniformMatrix4f(f),u_label_plane_matrix:new l.UniformMatrix4f(f),u_coord_matrix:new l.UniformMatrix4f(f),u_is_text:new l.Uniform1i(f),u_pitch_with_map:new l.Uniform1i(f),u_texsize:new l.Uniform2f(f),u_texture:new l.Uniform1i(f),u_gamma_scale:new l.Uniform1f(f),u_device_pixel_ratio:new l.Uniform1f(f),u_tile_id:new l.Uniform3f(f),u_zoom_transition:new l.Uniform1f(f),u_inv_rot_matrix:new l.UniformMatrix4f(f),u_merc_center:new l.Uniform2f(f),u_camera_forward:new l.Uniform3f(f),u_tile_matrix:new l.UniformMatrix4f(f),u_up_vector:new l.Uniform3f(f),u_ecef_origin:new l.Uniform3f(f),u_is_halo:new l.Uniform1i(f)}),symbolTextAndIcon:f=>({u_is_size_zoom_constant:new l.Uniform1i(f),u_is_size_feature_constant:new l.Uniform1i(f),u_size_t:new l.Uniform1f(f),u_size:new l.Uniform1f(f),u_camera_to_center_distance:new l.Uniform1f(f),u_rotate_symbol:new l.Uniform1i(f),u_aspect_ratio:new l.Uniform1f(f),u_fade_change:new l.Uniform1f(f),u_matrix:new l.UniformMatrix4f(f),u_label_plane_matrix:new l.UniformMatrix4f(f),u_coord_matrix:new l.UniformMatrix4f(f),u_is_text:new l.Uniform1i(f),u_pitch_with_map:new l.Uniform1i(f),u_texsize:new l.Uniform2f(f),u_texsize_icon:new l.Uniform2f(f),u_texture:new l.Uniform1i(f),u_texture_icon:new l.Uniform1i(f),u_gamma_scale:new l.Uniform1f(f),u_device_pixel_ratio:new l.Uniform1f(f),u_is_halo:new l.Uniform1i(f)}),background:f=>({u_matrix:new l.UniformMatrix4f(f),u_opacity:new l.Uniform1f(f),u_color:new l.UniformColor(f)}),backgroundPattern:f=>({u_matrix:new l.UniformMatrix4f(f),u_opacity:new l.Uniform1f(f),u_image:new l.Uniform1i(f),u_pattern_tl:new l.Uniform2f(f),u_pattern_br:new l.Uniform2f(f),u_texsize:new l.Uniform2f(f),u_pattern_size:new l.Uniform2f(f),u_pixel_coord_upper:new l.Uniform2f(f),u_pixel_coord_lower:new l.Uniform2f(f),u_tile_units_to_pixels:new l.Uniform1f(f)}),terrainRaster:np,terrainDepth:np,skybox:f=>({u_matrix:new l.UniformMatrix4f(f),u_sun_direction:new l.Uniform3f(f),u_cubemap:new l.Uniform1i(f),u_opacity:new l.Uniform1f(f),u_temporal_offset:new l.Uniform1f(f)}),skyboxGradient:f=>({u_matrix:new l.UniformMatrix4f(f),u_color_ramp:new l.Uniform1i(f),u_center_direction:new l.Uniform3f(f),u_radius:new l.Uniform1f(f),u_opacity:new l.Uniform1f(f),u_temporal_offset:new l.Uniform1f(f)}),skyboxCapture:f=>({u_matrix_3f:new l.UniformMatrix3f(f),u_sun_direction:new l.Uniform3f(f),u_sun_intensity:new l.Uniform1f(f),u_color_tint_r:new l.Uniform4f(f),u_color_tint_m:new l.Uniform4f(f),u_luminance:new l.Uniform1f(f)}),globeRaster:f=>({u_proj_matrix:new l.UniformMatrix4f(f),u_globe_matrix:new l.UniformMatrix4f(f),u_normalize_matrix:new l.UniformMatrix4f(f),u_merc_matrix:new l.UniformMatrix4f(f),u_zoom_transition:new l.Uniform1f(f),u_merc_center:new l.Uniform2f(f),u_image0:new l.Uniform1i(f),u_grid_matrix:new l.UniformMatrix3f(f),u_skirt_height:new l.Uniform1f(f),u_frustum_tl:new l.Uniform3f(f),u_frustum_tr:new l.Uniform3f(f),u_frustum_br:new l.Uniform3f(f),u_frustum_bl:new l.Uniform3f(f),u_globe_pos:new l.Uniform3f(f),u_globe_radius:new l.Uniform1f(f),u_viewport:new l.Uniform2f(f)}),globeAtmosphere:f=>({u_frustum_tl:new l.Uniform3f(f),u_frustum_tr:new l.Uniform3f(f),u_frustum_br:new l.Uniform3f(f),u_frustum_bl:new l.Uniform3f(f),u_horizon:new l.Uniform1f(f),u_transition:new l.Uniform1f(f),u_fadeout_range:new l.Uniform1f(f),u_color:new l.Uniform4f(f),u_high_color:new l.Uniform4f(f),u_space_color:new l.Uniform4f(f),u_star_intensity:new l.Uniform1f(f),u_star_density:new l.Uniform1f(f),u_star_size:new l.Uniform1f(f),u_temporal_offset:new l.Uniform1f(f),u_horizon_angle:new l.Uniform1f(f),u_rotation_matrix:new l.UniformMatrix4f(f)})};let Bu;function Ac(f,a,h,g,v,w,M){const P=f.context,z=P.gl,$=f.transform,B=f.useProgram("collisionBox"),W=[];let ee=0,oe=0;for(let pe=0;pe<g.length;pe++){const Ce=g[pe],Me=a.getTile(Ce),Ae=Me.getBucket(h);if(!Ae)continue;const Ne=Qi(Ce,Ae,$);let ze=Ne;v[0]===0&&v[1]===0||(ze=f.translatePosMatrix(Ne,Me,v,w));const Ue=M?Ae.textCollisionBox:Ae.iconCollisionBox,ct=Ae.collisionCircleArray;if(ct.length>0){const Be=l.create(),nt=ze;l.mul(Be,Ae.placementInvProjMatrix,$.glCoordMatrix),l.mul(Be,Be,Ae.placementViewportMatrix),W.push({circleArray:ct,circleOffset:oe,transform:nt,invTransform:Be,projection:Ae.getProjection()}),ee+=ct.length/4,oe=ee}Ue&&(f.terrain&&f.terrain.setupElevationDraw(Me,B),B.draw(P,z.LINES,l.DepthMode.disabled,l.StencilMode.disabled,f.colorModeForRenderPass(),l.CullFaceMode.disabled,up(ze,$,Me,Ae.getProjection()),h.id,Ue.layoutVertexBuffer,Ue.indexBuffer,Ue.segments,null,$.zoom,null,[Ue.collisionVertexBuffer,Ue.collisionVertexBufferExt]))}if(!M||!W.length)return;const ae=f.useProgram("collisionCircle"),se=new l.StructArrayLayout2f1f2i16;se.resize(4*ee),se._trim();let le=0;for(const pe of W)for(let Ce=0;Ce<pe.circleArray.length/4;Ce++){const Me=4*Ce,Ae=pe.circleArray[Me+0],Ne=pe.circleArray[Me+1],ze=pe.circleArray[Me+2],Ue=pe.circleArray[Me+3];se.emplace(le++,Ae,Ne,ze,Ue,0),se.emplace(le++,Ae,Ne,ze,Ue,1),se.emplace(le++,Ae,Ne,ze,Ue,2),se.emplace(le++,Ae,Ne,ze,Ue,3)}(!Bu||Bu.length<2*ee)&&(Bu=function(pe){const Ce=2*pe,Me=new l.StructArrayLayout3ui6;Me.resize(Ce),Me._trim();for(let Ae=0;Ae<Ce;Ae++){const Ne=6*Ae;Me.uint16[Ne+0]=4*Ae+0,Me.uint16[Ne+1]=4*Ae+1,Me.uint16[Ne+2]=4*Ae+2,Me.uint16[Ne+3]=4*Ae+2,Me.uint16[Ne+4]=4*Ae+3,Me.uint16[Ne+5]=4*Ae+0}return Me}(ee));const Z=P.createIndexBuffer(Bu,!0),ie=P.createVertexBuffer(se,l.collisionCircleLayout.members,!0);for(const pe of W){const Ce={u_matrix:pe.transform,u_inv_matrix:pe.invTransform,u_camera_to_center_distance:(de=$).getCameraToCenterDistance(pe.projection),u_viewport_size:[de.width,de.height]};ae.draw(P,z.TRIANGLES,l.DepthMode.disabled,l.StencilMode.disabled,f.colorModeForRenderPass(),l.CullFaceMode.disabled,Ce,h.id,ie,Z,l.SegmentVector.simpleSegment(0,2*pe.circleOffset,pe.circleArray.length,pe.circleArray.length/2),null,$.zoom)}var de;ie.destroy(),Z.destroy()}const rg=l.create();function gp({width:f,height:a,anchor:h,textOffset:g,textScale:v},w){const{horizontalAlign:M,verticalAlign:P}=l.getAnchorAlignment(h),z=-(M-.5)*f,$=-(P-.5)*a,B=l.evaluateVariableOffset(h,g);return new l.Point((z/v+B[0])*w,($/v+B[1])*w)}function zx(f,a,h,g,v,w,M,P,z,$,B){const W=f.text.placedSymbolArray,ee=f.text.dynamicLayoutVertexArray,oe=f.icon.dynamicLayoutVertexArray,ae={},se=f.getProjection(),le=tr(P,se,w),Z=w.elevation,ie=se.upVectorScale(P.canonical,w.center.lat,w.worldSize).metersToTile;ee.clear();for(let de=0;de<W.length;de++){const pe=W.get(de),{tileAnchorX:Ce,tileAnchorY:Me,numGlyphs:Ae}=pe,Ne=pe.hidden||!pe.crossTileID||f.allowVerticalPlacement&&!pe.placedOrientation?null:g[pe.crossTileID];if(Ne){let ze=0,Ue=0,ct=0;if(Z){const dt=Z?Z.getAtTileOffset(P,Ce,Me):0,[Vt,Qt,Nt]=se.upVector(P.canonical,Ce,Me);ze=dt*Vt*ie,Ue=dt*Qt*ie,ct=dt*Nt*ie}let[Be,nt,He,lt]=qr(pe.projectedAnchorX+ze,pe.projectedAnchorY+Ue,pe.projectedAnchorZ+ct,h?le:M);const je=Vm(w.getCameraToCenterDistance(se),lt);let tt=v.evaluateSizeForFeature(f.textSizeData,$,pe)*je/l.ONE_EM;h&&(tt*=f.tilePixelRatio/z);const ht=gp(Ne,tt);h?({x:Be,y:nt,z:He}=se.projectTilePoint(Ce+ht.x,Me+ht.y,P.canonical),[Be,nt,He]=qr(Be+ze,nt+Ue,He+ct,M)):(a&&ht._rotate(-w.angle),Be+=ht.x,nt+=ht.y,He=0);const st=f.allowVerticalPlacement&&pe.placedOrientation===l.WritingMode.vertical?Math.PI/2:0;for(let dt=0;dt<Ae;dt++)l.addDynamicAttributes(ee,Be,nt,He,st);B&&pe.associatedIconIndex>=0&&(ae[pe.associatedIconIndex]={x:Be,y:nt,z:He,angle:st})}else _o(Ae,ee)}if(B){oe.clear();const de=f.icon.placedSymbolArray;for(let pe=0;pe<de.length;pe++){const Ce=de.get(pe),{numGlyphs:Me}=Ce,Ae=ae[pe];if(Ce.hidden||!Ae)_o(Me,oe);else{const{x:Ne,y:ze,z:Ue,angle:ct}=Ae;for(let Be=0;Be<Me;Be++)l.addDynamicAttributes(oe,Ne,ze,Ue,ct)}}f.icon.dynamicLayoutVertexBuffer.updateData(oe)}f.text.dynamicLayoutVertexBuffer.updateData(ee)}function yp(f,a,h){return h.iconsInText&&a?"symbolTextAndIcon":f?"symbolSDF":"symbolIcon"}function ig(f,a,h,g,v,w,M,P,z,$,B,W){const ee=f.context,oe=ee.gl,ae=f.transform,se=P==="map",le=z==="map",Z=se&&h.layout.get("symbol-placement")!=="point",ie=se&&!le&&!Z,de=h.layout.get("symbol-sort-key").constantOr(1)!==void 0;let pe=!1;const Ce=f.depthModeForSublayer(0,l.DepthMode.ReadOnly),Me=[l.mercatorXfromLng(ae.center.lng),l.mercatorYfromLat(ae.center.lat)],Ae=h.layout.get("text-variable-anchor"),Ne=ae.projection.name==="globe",ze=[],Ue=[0,-1,0];let ct=Ue;!Ne&&!ae.mercatorFromTransition||se||(ct=function(Be){const nt=Be._camera.getWorldToCamera(Be.worldSize,1),He=l.multiply([],nt,Be.globeMatrix);l.invert(He,He);const lt=[0,0,0],je=[0,1,0,0];return l.transformMat4$1(je,je,He),lt[0]=je[0],lt[1]=je[1],lt[2]=je[2],l.normalize(lt,lt),lt}(ae));for(const Be of g){const nt=a.getTile(Be),He=nt.getBucket(h);if(!He||He.projection.name==="mercator"&&Ne)continue;const lt=v?He.text:He.icon;if(!lt||He.fullyClipped||!lt.segments.get().length)continue;const je=lt.programConfigurations.get(h.id),tt=v||He.sdfIcons,ht=v?He.textSizeData:He.iconSizeData,st=le||ae.pitch!==0,dt=l.evaluateSizeForZoom(ht,ae.zoom);let Vt,Qt,Nt,Xt,gn=[0,0],pn=null;if(v)Qt=nt.glyphAtlasTexture,Nt=oe.LINEAR,Vt=nt.glyphAtlasTexture.size,He.iconsInText&&(gn=nt.imageAtlasTexture.size,pn=nt.imageAtlasTexture,Xt=st||f.options.rotating||f.options.zooming||ht.kind==="composite"||ht.kind==="camera"?oe.LINEAR:oe.NEAREST);else{const bs=h.layout.get("icon-size").constantOr(0)!==1||He.iconsNeedLinear;Qt=nt.imageAtlasTexture,Nt=tt||f.options.rotating||f.options.zooming||bs||st?oe.LINEAR:oe.NEAREST,Vt=nt.imageAtlasTexture.size}const $t=He.projection.name==="globe",Dn=$t?ct:Ue,Ln=$t?l.globeToMercatorTransition(ae.zoom):0,Fn=tr(Be,He.getProjection(),ae),Rn=ae.calculatePixelsToTileUnitsMatrix(nt),si=Qe(Fn,nt.tileID.canonical,le,se,ae,He.getProjection(),Rn),Wr=f.terrain&&le&&Z?l.invert(l.create(),si):rg,ro=Tr(Fn,nt.tileID.canonical,le,se,ae,He.getProjection(),Rn),Xo=Ae&&He.hasTextData(),nr=h.layout.get("icon-text-fit")!=="none"&&Xo&&He.hasIconData();if(Z){const bs=ae.elevation,Zs=bs?bs.getAtTileOffsetFunc(Be,ae.center.lat,ae.worldSize,He.getProjection()):null,Sa=ps(Fn,nt.tileID.canonical,le,se,ae,He.getProjection(),Rn);Vd(He,Fn,f,v,Sa,ro,le,$,Zs,Be)}const On=Z||v&&Ae||nr,Cn=f.translatePosMatrix(Fn,nt,w,M),Sr=On?rg:si,xi=f.translatePosMatrix(ro,nt,w,M,!0),Kn=He.getProjection().createInversionMatrix(ae,Be.canonical),Ai=[];f.terrainRenderModeElevated()&&le&&Ai.push("PITCH_WITH_MAP_TERRAIN"),$t&&Ai.push("PROJECTION_GLOBE_VIEW"),On&&Ai.push("PROJECTED_POS_ON_VIEWPORT");const th=tt&&h.paint.get(v?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ta;Ta=tt?He.iconsInText?ng(ht.kind,dt,ie,le,f,Cn,Sr,xi,Vt,gn,Be,Ln,Me,Kn,Dn,He.getProjection()):Ou(ht.kind,dt,ie,le,f,Cn,Sr,xi,v,Vt,!0,Be,Ln,Me,Kn,Dn,He.getProjection()):pp(ht.kind,dt,ie,le,f,Cn,Sr,xi,v,Vt,Be,Ln,Me,Kn,Dn,He.getProjection());const Oc={program:f.useProgram(yp(tt,v,He),je,Ai),buffers:lt,uniformValues:Ta,atlasTexture:Qt,atlasTextureIcon:pn,atlasInterpolation:Nt,atlasInterpolationIcon:Xt,isSDF:tt,hasHalo:th,tile:nt,labelPlaneMatrixInv:Wr};if(de&&He.canOverlap){pe=!0;const bs=lt.segments.get();for(const Zs of bs)ze.push({segments:new l.SegmentVector([Zs]),sortKey:Zs.sortKey,state:Oc})}else ze.push({segments:lt.segments,sortKey:0,state:Oc})}pe&&ze.sort((Be,nt)=>Be.sortKey-nt.sortKey);for(const Be of ze){const nt=Be.state;if(f.terrain&&f.terrain.setupElevationDraw(nt.tile,nt.program,{useDepthForOcclusion:!Ne,labelPlaneMatrixInv:nt.labelPlaneMatrixInv}),ee.activeTexture.set(oe.TEXTURE0),nt.atlasTexture.bind(nt.atlasInterpolation,oe.CLAMP_TO_EDGE),nt.atlasTextureIcon&&(ee.activeTexture.set(oe.TEXTURE1),nt.atlasTextureIcon&&nt.atlasTextureIcon.bind(nt.atlasInterpolationIcon,oe.CLAMP_TO_EDGE)),nt.isSDF){const He=nt.uniformValues;nt.hasHalo&&(He.u_is_halo=1,Mc(nt.buffers,Be.segments,h,f,nt.program,Ce,B,W,He)),He.u_is_halo=0}Mc(nt.buffers,Be.segments,h,f,nt.program,Ce,B,W,nt.uniformValues)}}function Mc(f,a,h,g,v,w,M,P,z){const $=g.context,B=[f.dynamicLayoutVertexBuffer,f.opacityVertexBuffer,f.globeExtVertexBuffer];v.draw($,$.gl.TRIANGLES,w,M,P,l.CullFaceMode.disabled,z,h.id,f.layoutVertexBuffer,f.indexBuffer,a,h.paint,g.transform.zoom,f.programConfigurations.get(h.id),B)}function og(f,a,h,g,v,w,M){const P=f.context.gl,z=h.paint.get("fill-pattern"),$=z&&z.constantOr(1);let B,W,ee,oe,ae;M?(W=$&&!h.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",B=P.LINES):(W=$?"fillPattern":"fill",B=P.TRIANGLES);for(const se of g){const le=a.getTile(se);if($&&!le.patternsLoaded())continue;const Z=le.getBucket(h);if(!Z)continue;f.prepareDrawTile();const ie=Z.programConfigurations.get(h.id),de=f.useProgram(W,ie);$&&(f.context.activeTexture.set(P.TEXTURE0),le.imageAtlasTexture.bind(P.LINEAR,P.CLAMP_TO_EDGE),ie.updatePaintBuffers());const pe=z.constantOr(null);if(pe&&le.imageAtlas){const Me=le.imageAtlas.patternPositions[pe.toString()];Me&&ie.setConstantPatternPositions(Me)}const Ce=f.translatePosMatrix(se.projMatrix,le,h.paint.get("fill-translate"),h.paint.get("fill-translate-anchor"));if(M){oe=Z.indexBuffer2,ae=Z.segments2;const Me=f.terrain&&f.terrain.renderingToTexture?f.terrain.drapeBufferSize:[P.drawingBufferWidth,P.drawingBufferHeight];ee=W==="fillOutlinePattern"&&$?kx(Ce,f,le,Me):Mx(Ce,Me)}else oe=Z.indexBuffer,ae=Z.segments,ee=$?ap(Ce,f,le):va(Ce);f.prepareDrawProgram(f.context,de,se.toUnwrapped()),de.draw(f.context,B,v,f.stencilModeForClipping(se),w,l.CullFaceMode.disabled,ee,h.id,Z.layoutVertexBuffer,oe,ae,h.paint,f.transform.zoom,ie)}}function $u(f,a,h,g,v,w,M){const P=f.context,z=P.gl,$=f.transform,B=h.paint.get("fill-extrusion-pattern"),W=B.constantOr(1),ee=h.paint.get("fill-extrusion-opacity"),oe=[h.paint.get("fill-extrusion-ambient-occlusion-intensity"),h.paint.get("fill-extrusion-ambient-occlusion-radius")],ae=h.layout.get("fill-extrusion-edge-radius"),se=ae>0&&!h.paint.get("fill-extrusion-rounded-roof"),le=se?0:ae,Z=$.projection.name==="globe"?l.fillExtrusionHeightLift():0,ie=$.projection.name==="globe",de=ie?l.globeToMercatorTransition($.zoom):0,pe=[l.mercatorXfromLng($.center.lng),l.mercatorYfromLat($.center.lat)],Ce=[];ie&&Ce.push("PROJECTION_GLOBE_VIEW"),oe[0]>0&&Ce.push("FAUX_AO"),se&&Ce.push("ZERO_ROOF_RADIUS");for(const Me of g){const Ae=a.getTile(Me),Ne=Ae.getBucket(h);if(!Ne||Ne.projection.name!==$.projection.name)continue;const ze=Ne.programConfigurations.get(h.id),Ue=f.useProgram(W?"fillExtrusionPattern":"fillExtrusion",ze,Ce);if(f.terrain){const tt=f.terrain;if(f.style.terrainSetForDrapingOnly())tt.setupElevationDraw(Ae,Ue,{useMeterToDem:!0});else{if(!Ne.enableTerrain)continue;if(tt.setupElevationDraw(Ae,Ue,{useMeterToDem:!0}),sg(P,a,Me,Ne,h,tt),!Ne.centroidVertexBuffer){const ht=Ue.attributes.a_centroid_pos;ht!==void 0&&z.vertexAttrib2f(ht,0,0)}}}W&&(f.context.activeTexture.set(z.TEXTURE0),Ae.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),ze.updatePaintBuffers());const ct=B.constantOr(null);if(ct&&Ae.imageAtlas){const tt=Ae.imageAtlas.patternPositions[ct.toString()];tt&&ze.setConstantPatternPositions(tt)}const Be=f.translatePosMatrix(Me.projMatrix,Ae,h.paint.get("fill-extrusion-translate"),h.paint.get("fill-extrusion-translate-anchor")),nt=$.projection.createInversionMatrix($,Me.canonical),He=h.paint.get("fill-extrusion-vertical-gradient"),lt=W?Qm(Be,f,He,ee,oe,le,Me,Ae,Z,de,pe,nt):sp(Be,f,He,ee,oe,le,Me,Z,de,pe,nt);f.prepareDrawProgram(P,Ue,Me.toUnwrapped());const je=[];f.terrain&&je.push(Ne.centroidVertexBuffer),ie&&je.push(Ne.layoutVertexExtBuffer),Ue.draw(P,P.gl.TRIANGLES,v,w,M,l.CullFaceMode.backCCW,lt,h.id,Ne.layoutVertexBuffer,Ne.indexBuffer,Ne.segments,h.paint,f.transform.zoom,ze,je)}}function sg(f,a,h,g,v,w){const M=[Z=>{let ie=Z.canonical.x-1,de=Z.wrap;return ie<0&&(ie=(1<<Z.canonical.z)-1,de--),new l.OverscaledTileID(Z.overscaledZ,de,Z.canonical.z,ie,Z.canonical.y)},Z=>{let ie=Z.canonical.x+1,de=Z.wrap;return ie===1<<Z.canonical.z&&(ie=0,de++),new l.OverscaledTileID(Z.overscaledZ,de,Z.canonical.z,ie,Z.canonical.y)},Z=>new l.OverscaledTileID(Z.overscaledZ,Z.wrap,Z.canonical.z,Z.canonical.x,(Z.canonical.y===0?1<<Z.canonical.z:Z.canonical.y)-1),Z=>new l.OverscaledTileID(Z.overscaledZ,Z.wrap,Z.canonical.z,Z.canonical.x,Z.canonical.y===(1<<Z.canonical.z)-1?0:Z.canonical.y+1)],P=Z=>{const ie=a.getSource().minzoom,de=Ce=>{const Me=a.getTileByID(Ce);if(Me&&Me.hasData())return Me.getBucket(v)},pe=[0,-1,1];for(const Ce of pe){if(Z.overscaledZ+Ce<ie)continue;const Me=de(Z.calculateScaledKey(Z.overscaledZ+Ce));if(Me)return Me}},z=[0,0,0],$=(Z,ie)=>(z[0]=Math.min(Z.min.y,ie.min.y),z[1]=Math.max(Z.max.y,ie.max.y),z[2]=l.EXTENT-ie.min.x>Z.max.x?ie.min.x-l.EXTENT:Z.max.x,z),B=(Z,ie)=>(z[0]=Math.min(Z.min.x,ie.min.x),z[1]=Math.max(Z.max.x,ie.max.x),z[2]=l.EXTENT-ie.min.y>Z.max.y?ie.min.y-l.EXTENT:Z.max.y,z),W=[(Z,ie)=>$(Z,ie),(Z,ie)=>$(ie,Z),(Z,ie)=>B(Z,ie),(Z,ie)=>B(ie,Z)],ee=new l.Point(0,0);let oe,ae,se;const le=(Z,ie,de,pe,Ce)=>{const Me=[[pe?de:Z,pe?Z:de,0],[pe?de:ie,pe?ie:de,0]],Ae=Ce<0?l.EXTENT+Ce:Ce,Ne=[pe?Ae:(Z+ie)/2,pe?(Z+ie)/2:Ae,0];return de===0&&Ce<0||de!==0&&Ce>0?w.getForTilePoints(se,[Ne],!0,ae):Me.push(Ne),w.getForTilePoints(h,Me,!0,oe),Math.max(Me[0][2],Me[1][2],Ne[2])/w.exaggeration()};for(let Z=0;Z<4;Z++){const ie=(Z<2?1:5)-Z,de=g.borders[Z];if(de.length===0)continue;const pe=se=M[Z](h),Ce=P(pe);if(!(Ce&&Ce instanceof l.FillExtrusionBucket&&Ce.enableTerrain)||g.borderDoneWithNeighborZ[Z]===Ce.canonical.z&&Ce.borderDoneWithNeighborZ[ie]===g.canonical.z||(ae=w.findDEMTileFor(pe),!ae||!ae.dem))continue;if(!oe){const ze=w.findDEMTileFor(h);if(!ze||!ze.dem)return;oe=ze}const Me=Ce.borders[ie];let Ae=0;const Ne=Ce.borderDoneWithNeighborZ[ie]!==g.canonical.z;if(g.canonical.z===Ce.canonical.z){for(let ze=0;ze<de.length;ze++){const Ue=g.featuresOnBorder[de[ze]],ct=Ue.borders[Z];let Be;for(;Ae<Me.length&&(Be=Ce.featuresOnBorder[Me[Ae]],!(Be.borders[ie][1]>ct[0]+3));)Ne&&Ce.encodeCentroid(void 0,Be,!1),Ae++;if(Be&&Ae<Me.length){const nt=Ae;let He=0;for(;!(Be.borders[ie][0]>ct[1]-3)&&(He++,++Ae!==Me.length);)Be=Ce.featuresOnBorder[Me[Ae]];if(Be=Ce.featuresOnBorder[Me[nt]],Ue.intersectsCount()>1||Be.intersectsCount()>1||He!==1){He!==1&&(Ae=nt),g.encodeCentroid(void 0,Ue,!1),Ne&&Ce.encodeCentroid(void 0,Be,!1);continue}const lt=W[Z](Ue,Be),je=Z%2?l.EXTENT-1:0;ee.x=le(lt[0],Math.min(l.EXTENT-1,lt[1]),je,Z<2,lt[2]),ee.y=0,g.encodeCentroid(ee,Ue,!1),Ne&&Ce.encodeCentroid(ee,Be,!1)}else g.encodeCentroid(void 0,Ue,!1)}g.borderDoneWithNeighborZ[Z]=Ce.canonical.z,g.needsCentroidUpdate=!0,Ne&&(Ce.borderDoneWithNeighborZ[ie]=g.canonical.z,Ce.needsCentroidUpdate=!0)}else{for(const ze of de)g.encodeCentroid(void 0,g.featuresOnBorder[ze],!1);if(Ne){for(const ze of Me)Ce.encodeCentroid(void 0,Ce.featuresOnBorder[ze],!1);Ce.borderDoneWithNeighborZ[ie]=g.canonical.z,Ce.needsCentroidUpdate=!0}g.borderDoneWithNeighborZ[Z]=Ce.canonical.z,g.needsCentroidUpdate=!0}}(g.needsCentroidUpdate||!g.centroidVertexBuffer&&g.centroidVertexArray.length!==0)&&g.uploadCentroid(f)}const ll=new l.Color(1,0,0,1),Nx=new l.Color(0,1,0,1),Lx=new l.Color(0,0,1,1),Fx=new l.Color(1,0,1,1),Rx=new l.Color(0,1,1,1);function Ox(f,a,h){const g=f.context,v=f.transform,w=g.gl,M=v.projection.name==="globe",P=M?["PROJECTION_GLOBE_VIEW"]:null;let z=h.projMatrix;if(M&&l.globeToMercatorTransition(v.zoom)>0){const Ue=l.transitionTileAABBinECEF(h.canonical,v),ct=l.globeDenormalizeECEF(Ue);z=l.multiply(new Float32Array(16),v.globeMatrix,ct),l.multiply(z,v.projMatrix,z)}const $=f.useProgram("debug",null,P),B=a.getTileByID(h.key);f.terrain&&f.terrain.setupElevationDraw(B,$);const W=l.DepthMode.disabled,ee=l.StencilMode.disabled,oe=f.colorModeForRenderPass(),ae="$debug";g.activeTexture.set(w.TEXTURE0),f.emptyTexture.bind(w.LINEAR,w.CLAMP_TO_EDGE),M?B._makeGlobeTileDebugBuffers(f.context,v):B._makeDebugTileBoundsBuffers(f.context,v.projection);const se=B._tileDebugBuffer||f.debugBuffer,le=B._tileDebugIndexBuffer||f.debugIndexBuffer,Z=B._tileDebugSegments||f.debugSegments;$.draw(g,w.LINE_STRIP,W,ee,oe,l.CullFaceMode.disabled,Fu(z,l.Color.red),ae,se,le,Z,null,null,null,[B._globeTileDebugBorderBuffer]);const ie=B.latestRawTileData,de=Math.floor((ie&&ie.byteLength||0)/1024),pe=a.getTile(h).tileSize,Ce=512/Math.min(pe,512)*(h.overscaledZ/v.zoom)*.5;let Me=h.canonical.toString();h.overscaledZ!==h.canonical.z&&(Me+=` => ${h.overscaledZ}`),Me+=` ${de}kb`,function(Ue,ct){Ue.initDebugOverlayCanvas();const Be=Ue.debugOverlayCanvas,nt=Ue.context.gl,He=Ue.debugOverlayCanvas.getContext("2d");He.clearRect(0,0,Be.width,Be.height),He.shadowColor="white",He.shadowBlur=2,He.lineWidth=1.5,He.strokeStyle="white",He.textBaseline="top",He.font="bold 36px Open Sans, sans-serif",He.fillText(ct,5,5),He.strokeText(ct,5,5),Ue.debugOverlayTexture.update(Be),Ue.debugOverlayTexture.bind(nt.LINEAR,nt.CLAMP_TO_EDGE)}(f,Me);const Ae=B._tileDebugTextBuffer||f.debugBuffer,Ne=B._tileDebugTextIndexBuffer||f.quadTriangleIndexBuffer,ze=B._tileDebugTextSegments||f.debugSegments;$.draw(g,w.TRIANGLES,W,ee,l.ColorMode.alphaBlended,l.CullFaceMode.disabled,Fu(z,l.Color.transparent,Ce),ae,Ae,Ne,ze,null,null,null,[B._globeTileDebugTextBuffer])}function ag(f,a,h,g){cl(f,0,a+h/2,f.transform.width,h,g)}function ju(f,a,h,g){cl(f,a-h/2,0,h,f.transform.height,g)}function cl(f,a,h,g,v,w){const M=f.context,P=M.gl;P.enable(P.SCISSOR_TEST),P.scissor(a*l.exported.devicePixelRatio,h*l.exported.devicePixelRatio,g*l.exported.devicePixelRatio,v*l.exported.devicePixelRatio),M.clear({color:w}),P.disable(P.SCISSOR_TEST)}const lg=l.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:cg}=lg;function _s(f,a,h,g){f.emplaceBack(a,h,g)}class Uu{constructor(a){this.vertexArray=new l.StructArrayLayout3f12,this.indices=new l.StructArrayLayout3ui6,_s(this.vertexArray,-1,-1,1),_s(this.vertexArray,1,-1,1),_s(this.vertexArray,-1,1,1),_s(this.vertexArray,1,1,1),_s(this.vertexArray,-1,-1,-1),_s(this.vertexArray,1,-1,-1),_s(this.vertexArray,-1,1,-1),_s(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=a.createVertexBuffer(this.vertexArray,cg),this.indexBuffer=a.createIndexBuffer(this.indices),this.segment=l.SegmentVector.simpleSegment(0,0,36,12)}}function to(f,a,h,g,v,w){const M=f.gl,P=a.paint.get("sky-atmosphere-color"),z=a.paint.get("sky-atmosphere-halo-color"),$=a.paint.get("sky-atmosphere-sun-intensity"),B=((W,ee,oe,ae,se)=>({u_matrix_3f:W,u_sun_direction:ee,u_sun_intensity:oe,u_color_tint_r:[ae.r,ae.g,ae.b,ae.a],u_color_tint_m:[se.r,se.g,se.b,se.a],u_luminance:5e-5}))(l.fromMat4(l.create$1(),g),v,$,P,z);M.framebufferTexture2D(M.FRAMEBUFFER,M.COLOR_ATTACHMENT0,M.TEXTURE_CUBE_MAP_POSITIVE_X+w,a.skyboxTexture,0),h.draw(f,M.TRIANGLES,l.DepthMode.disabled,l.StencilMode.disabled,l.ColorMode.unblended,l.CullFaceMode.frontCW,B,"skyboxCapture",a.skyboxGeometry.vertexBuffer,a.skyboxGeometry.indexBuffer,a.skyboxGeometry.segment)}const kc=l.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class ug{constructor(a){const h=new l.StructArrayLayout5f20;h.emplaceBack(-1,1,1,0,0),h.emplaceBack(1,1,1,1,0),h.emplaceBack(1,-1,1,1,1),h.emplaceBack(-1,-1,1,0,1);const g=new l.StructArrayLayout3ui6;g.emplaceBack(0,1,2),g.emplaceBack(2,3,0),this.vertexBuffer=a.createVertexBuffer(h,kc.members),this.indexBuffer=a.createIndexBuffer(g),this.segments=l.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const ba={symbol:function(f,a,h,g,v){if(f.renderPass!=="translucent")return;const w=l.StencilMode.disabled,M=f.colorModeForRenderPass();h.layout.get("text-variable-anchor")&&function(P,z,$,B,W,ee,oe){const ae=z.transform,se=W==="map",le=ee==="map";for(const Z of P){const ie=B.getTile(Z),de=ie.getBucket($);if(!de||!de.text||!de.text.segments.get().length)continue;const pe=l.evaluateSizeForZoom(de.textSizeData,ae.zoom),Ce=tr(Z,de.getProjection(),ae),Me=ae.calculatePixelsToTileUnitsMatrix(ie),Ae=Qe(Ce,ie.tileID.canonical,le,se,ae,de.getProjection(),Me),Ne=$.layout.get("icon-text-fit")!=="none"&&de.hasIconData();if(pe){const ze=Math.pow(2,ae.zoom-ie.tileID.overscaledZ);zx(de,se,le,oe,l.symbolSize,ae,Ae,Z,ze,pe,Ne)}}}(g,f,h,a,h.layout.get("text-rotation-alignment"),h.layout.get("text-pitch-alignment"),v),h.paint.get("icon-opacity").constantOr(1)!==0&&ig(f,a,h,g,!1,h.paint.get("icon-translate"),h.paint.get("icon-translate-anchor"),h.layout.get("icon-rotation-alignment"),h.layout.get("icon-pitch-alignment"),h.layout.get("icon-keep-upright"),w,M),h.paint.get("text-opacity").constantOr(1)!==0&&ig(f,a,h,g,!0,h.paint.get("text-translate"),h.paint.get("text-translate-anchor"),h.layout.get("text-rotation-alignment"),h.layout.get("text-pitch-alignment"),h.layout.get("text-keep-upright"),w,M),a.map.showCollisionBoxes&&(Ac(f,a,h,g,h.paint.get("text-translate"),h.paint.get("text-translate-anchor"),!0),Ac(f,a,h,g,h.paint.get("icon-translate"),h.paint.get("icon-translate-anchor"),!1))},circle:function(f,a,h,g){if(f.renderPass!=="translucent")return;const v=h.paint.get("circle-opacity"),w=h.paint.get("circle-stroke-width"),M=h.paint.get("circle-stroke-opacity"),P=h.layout.get("circle-sort-key").constantOr(1)!==void 0;if(v.constantOr(1)===0&&(w.constantOr(1)===0||M.constantOr(1)===0))return;const z=f.context,$=z.gl,B=f.transform,W=f.depthModeForSublayer(0,l.DepthMode.ReadOnly),ee=l.StencilMode.disabled,oe=f.colorModeForRenderPass(),ae=B.projection.name==="globe",se=[l.mercatorXfromLng(B.center.lng),l.mercatorYfromLat(B.center.lat)],le=[];for(let ie=0;ie<g.length;ie++){const de=g[ie],pe=a.getTile(de),Ce=pe.getBucket(h);if(!Ce||Ce.projection.name!==B.projection.name)continue;const Me=Ce.programConfigurations.get(h.id),Ae=cp(h);ae&&Ae.push("PROJECTION_GLOBE_VIEW");const Ne=f.useProgram("circle",Me,Ae),ze=Ce.layoutVertexBuffer,Ue=Ce.globeExtVertexBuffer,ct=Ce.indexBuffer,Be=B.projection.createInversionMatrix(B,de.canonical),nt={programConfiguration:Me,program:Ne,layoutVertexBuffer:ze,globeExtVertexBuffer:Ue,indexBuffer:ct,uniformValues:lp(f,de,pe,Be,se,h),tile:pe};if(P){const He=Ce.segments.get();for(const lt of He)le.push({segments:new l.SegmentVector([lt]),sortKey:lt.sortKey,state:nt})}else le.push({segments:Ce.segments,sortKey:0,state:nt})}P&&le.sort((ie,de)=>ie.sortKey-de.sortKey);const Z={useDepthForOcclusion:!ae};for(const ie of le){const{programConfiguration:de,program:pe,layoutVertexBuffer:Ce,globeExtVertexBuffer:Me,indexBuffer:Ae,uniformValues:Ne,tile:ze}=ie.state,Ue=ie.segments;f.terrain&&f.terrain.setupElevationDraw(ze,pe,Z),f.prepareDrawProgram(z,pe,ze.tileID.toUnwrapped()),pe.draw(z,$.TRIANGLES,W,ee,oe,l.CullFaceMode.disabled,Ne,h.id,Ce,Ae,Ue,h.paint,B.zoom,de,[Me])}},heatmap:function(f,a,h,g){if(h.paint.get("heatmap-opacity")!==0)if(f.renderPass==="offscreen"){const v=f.context,w=v.gl,M=l.StencilMode.disabled,P=new l.ColorMode([w.ONE,w.ONE],l.Color.transparent,[!0,!0,!0,!0]);(function(oe,ae,se,le){const Z=oe.gl,ie=ae.width*le,de=ae.height*le;oe.activeTexture.set(Z.TEXTURE1),oe.viewport.set([0,0,ie,de]);let pe=se.heatmapFbo;if(!pe||pe&&(pe.width!==ie||pe.height!==de)){pe&&pe.destroy();const Ce=Z.createTexture();Z.bindTexture(Z.TEXTURE_2D,Ce),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_WRAP_S,Z.CLAMP_TO_EDGE),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_WRAP_T,Z.CLAMP_TO_EDGE),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MIN_FILTER,Z.LINEAR),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MAG_FILTER,Z.LINEAR),pe=se.heatmapFbo=oe.createFramebuffer(ie,de,!1),function(Me,Ae,Ne,ze,Ue,ct){const Be=Me.gl;Be.texImage2D(Be.TEXTURE_2D,0,Me.isWebGL2&&Me.extRenderToTextureHalfFloat?Be.RGBA16F:Be.RGBA,Ue,ct,0,Be.RGBA,Me.extRenderToTextureHalfFloat?Me.isWebGL2?Be.HALF_FLOAT:Me.extTextureHalfFloat.HALF_FLOAT_OES:Be.UNSIGNED_BYTE,null),ze.colorAttachment.set(Ne)}(oe,0,Ce,pe,ie,de)}else Z.bindTexture(Z.TEXTURE_2D,pe.colorAttachment.get()),oe.bindFramebuffer.set(pe.framebuffer)})(v,f,h,f.transform.projection.name==="globe"?.5:.25),v.clear({color:l.Color.transparent});const z=f.transform,$=z.projection.name==="globe",B=$?["PROJECTION_GLOBE_VIEW"]:null,W=$?l.CullFaceMode.frontCCW:l.CullFaceMode.disabled,ee=[l.mercatorXfromLng(z.center.lng),l.mercatorYfromLat(z.center.lat)];for(let oe=0;oe<g.length;oe++){const ae=g[oe];if(a.hasRenderableParent(ae))continue;const se=a.getTile(ae),le=se.getBucket(h);if(!le||le.projection.name!==z.projection.name)continue;const Z=le.programConfigurations.get(h.id),ie=f.useProgram("heatmap",Z,B),{zoom:de}=f.transform;f.terrain&&f.terrain.setupElevationDraw(se,ie),f.prepareDrawProgram(v,ie,ae.toUnwrapped());const pe=z.projection.createInversionMatrix(z,ae.canonical);ie.draw(v,w.TRIANGLES,l.DepthMode.disabled,M,P,W,tg(f,ae,se,pe,ee,de,h.paint.get("heatmap-intensity")),h.id,le.layoutVertexBuffer,le.indexBuffer,le.segments,h.paint,f.transform.zoom,Z,$?[le.globeExtVertexBuffer]:null)}v.viewport.set([0,0,f.width,f.height])}else f.renderPass==="translucent"&&(f.context.setColorMode(f.colorModeForRenderPass()),function(v,w){const M=v.context,P=M.gl,z=w.heatmapFbo;if(!z)return;M.activeTexture.set(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,z.colorAttachment.get()),M.activeTexture.set(P.TEXTURE1);let $=w.colorRampTexture;$||($=w.colorRampTexture=new l.Texture(M,w.colorRamp,P.RGBA)),$.bind(P.LINEAR,P.CLAMP_TO_EDGE),v.useProgram("heatmapTexture").draw(M,P.TRIANGLES,l.DepthMode.disabled,l.StencilMode.disabled,v.colorModeForRenderPass(),l.CullFaceMode.disabled,((B,W,ee,oe)=>({u_image:0,u_color_ramp:1,u_opacity:W.paint.get("heatmap-opacity")}))(0,w),w.id,v.viewportBuffer,v.quadTriangleIndexBuffer,v.viewportSegments,w.paint,v.transform.zoom)}(f,h))},line:function(f,a,h,g){if(f.renderPass!=="translucent")return;const v=h.paint.get("line-opacity"),w=h.paint.get("line-width");if(v.constantOr(1)===0||w.constantOr(1)===0)return;const M=f.depthModeForSublayer(0,l.DepthMode.ReadOnly),P=f.colorModeForRenderPass(),z=f.terrain&&f.terrain.renderingToTexture?1:l.exported.devicePixelRatio,$=h.paint.get("line-dasharray"),B=$.constantOr(1),W=h.layout.get("line-cap"),ee=h.paint.get("line-pattern"),oe=ee.constantOr(1),ae=h.paint.get("line-gradient"),se=oe?"linePattern":"line",le=f.context,Z=le.gl,ie=(pe=>{const Ce=[];Cc(pe)&&Ce.push("RENDER_LINE_DASH"),pe.paint.get("line-gradient")&&Ce.push("RENDER_LINE_GRADIENT");const Me=pe.paint.get("line-trim-offset");Me[0]===0&&Me[1]===0||Ce.push("RENDER_LINE_TRIM_OFFSET");const Ae=pe.paint.get("line-pattern").constantOr(1),Ne=pe.paint.get("line-opacity").constantOr(1)!==1;return!Ae&&Ne&&Ce.push("RENDER_LINE_ALPHA_DISCARD"),Ce})(h);let de=ie.includes("RENDER_LINE_ALPHA_DISCARD");f.terrain&&f.terrain.clipOrMaskOverlapStencilType()&&(de=!1);for(const pe of g){const Ce=a.getTile(pe);if(oe&&!Ce.patternsLoaded())continue;const Me=Ce.getBucket(h);if(!Me)continue;f.prepareDrawTile();const Ae=Me.programConfigurations.get(h.id),Ne=f.useProgram(se,Ae,ie),ze=ee.constantOr(null);if(ze&&Ce.imageAtlas){const tt=Ce.imageAtlas.patternPositions[ze.toString()];tt&&Ae.setConstantPatternPositions(tt)}const Ue=$.constantOr(null),ct=W.constantOr(null);if(!oe&&Ue&&ct&&Ce.lineAtlas){const tt=Ce.lineAtlas.getDash(Ue,ct);tt&&Ae.setConstantPatternPositions(tt)}let[Be,nt]=h.paint.get("line-trim-offset");(ct==="round"||ct==="square")&&Be!==nt&&(Be===0&&(Be-=1),nt===1&&(nt+=1));const He=f.terrain?pe.projMatrix:null,lt=oe?Sc(f,Ce,h,He,z):Ix(f,Ce,h,He,Me.lineClipsArray.length,z,[Be,nt]);if(ae){const tt=Me.gradients[h.id];let ht=tt.texture;if(h.gradientVersion!==tt.version){let st=256;if(h.stepInterpolant){const dt=a.getSource().maxzoom,Vt=pe.canonical.z===dt?Math.ceil(1<<f.transform.maxZoom-pe.canonical.z):1;st=l.clamp(l.nextPowerOfTwo(Me.maxLineLength/l.EXTENT*1024*Vt),256,le.maxTextureSize)}tt.gradient=l.renderColorRamp({expression:h.gradientExpression(),evaluationKey:"lineProgress",resolution:st,image:tt.gradient||void 0,clips:Me.lineClipsArray}),tt.texture?tt.texture.update(tt.gradient):tt.texture=new l.Texture(le,tt.gradient,Z.RGBA),tt.version=h.gradientVersion,ht=tt.texture}le.activeTexture.set(Z.TEXTURE1),ht.bind(h.stepInterpolant?Z.NEAREST:Z.LINEAR,Z.CLAMP_TO_EDGE)}B&&(le.activeTexture.set(Z.TEXTURE0),Ce.lineAtlasTexture.bind(Z.LINEAR,Z.REPEAT),Ae.updatePaintBuffers()),oe&&(le.activeTexture.set(Z.TEXTURE0),Ce.imageAtlasTexture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),Ae.updatePaintBuffers()),f.prepareDrawProgram(le,Ne,pe.toUnwrapped());const je=tt=>{Ne.draw(le,Z.TRIANGLES,M,tt,P,l.CullFaceMode.disabled,lt,h.id,Me.layoutVertexBuffer,Me.indexBuffer,Me.segments,h.paint,f.transform.zoom,Ae,[Me.layoutVertexBuffer2])};if(de){const tt=f.stencilModeForClipping(pe).ref;tt===0&&f.terrain&&le.clear({stencil:0});const ht={func:Z.EQUAL,mask:255};lt.u_alpha_discard_threshold=.8,je(new l.StencilMode(ht,tt,255,Z.KEEP,Z.KEEP,Z.INVERT)),lt.u_alpha_discard_threshold=0,je(new l.StencilMode(ht,tt,255,Z.KEEP,Z.KEEP,Z.KEEP))}else je(f.stencilModeForClipping(pe))}de&&(f.resetStencilClippingMasks(),f.terrain&&le.clear({stencil:0}))},fill:function(f,a,h,g){const v=h.paint.get("fill-color"),w=h.paint.get("fill-opacity");if(w.constantOr(1)===0)return;const M=f.colorModeForRenderPass(),P=h.paint.get("fill-pattern"),z=f.opaquePassEnabledForLayer()&&!P.constantOr(1)&&v.constantOr(l.Color.transparent).a===1&&w.constantOr(0)===1?"opaque":"translucent";if(f.renderPass===z){const $=f.depthModeForSublayer(1,f.renderPass==="opaque"?l.DepthMode.ReadWrite:l.DepthMode.ReadOnly);og(f,a,h,g,$,M,!1)}if(f.renderPass==="translucent"&&h.paint.get("fill-antialias")){const $=f.depthModeForSublayer(h.getPaintProperty("fill-outline-color")?2:0,l.DepthMode.ReadOnly);og(f,a,h,g,$,M,!0)}},"fill-extrusion":function(f,a,h,g){const v=h.paint.get("fill-extrusion-opacity");if(v!==0&&f.renderPass==="translucent"){const w=new l.DepthMode(f.context.gl.LEQUAL,l.DepthMode.ReadWrite,f.depthRangeFor3D);if(v!==1||h.paint.get("fill-extrusion-pattern").constantOr(1))$u(f,a,h,g,w,l.StencilMode.disabled,l.ColorMode.disabled),$u(f,a,h,g,w,f.stencilModeFor3D(),f.colorModeForRenderPass()),f.resetStencilClippingMasks();else{const M=f.colorModeForRenderPass();$u(f,a,h,g,w,l.StencilMode.disabled,M)}}},hillshade:function(f,a,h,g){if(f.renderPass!=="offscreen"&&f.renderPass!=="translucent")return;const v=f.context,w=f.depthModeForSublayer(0,l.DepthMode.ReadOnly),M=f.colorModeForRenderPass(),P=f.terrain&&f.terrain.renderingToTexture,[z,$]=f.renderPass!=="translucent"||P?[{},g]:f.stencilConfigForOverlap(g);for(const B of $){const W=a.getTile(B);if(W.needsHillshadePrepare&&f.renderPass==="offscreen")Km(f,W,h,w,l.StencilMode.disabled,M);else if(f.renderPass==="translucent"){const ee=P&&f.terrain?f.terrain.stencilModeForRTTOverlap(B):z[B.overscaledZ];Xm(f,B,W,h,w,ee,M)}}v.viewport.set([0,0,f.width,f.height]),f.resetStencilClippingMasks()},raster:function(f,a,h,g,v,w){if(f.renderPass!=="translucent"||h.paint.get("raster-opacity")===0||!g.length)return;const M=f.context,P=M.gl,z=a.getSource(),$=f.useProgram("raster"),B=f.colorModeForRenderPass(),W=f.terrain&&f.terrain.renderingToTexture,[ee,oe]=z instanceof hn||W?[{},g]:f.stencilConfigForOverlap(g),ae=oe[oe.length-1].overscaledZ,se=!f.options.moving;for(const le of oe){const Z=W?l.DepthMode.disabled:f.depthModeForSublayer(le.overscaledZ-ae,h.paint.get("raster-opacity")===1?l.DepthMode.ReadWrite:l.DepthMode.ReadOnly,P.LESS),ie=le.toUnwrapped(),de=a.getTile(le);if(W&&(!de||!de.hasData()))continue;const pe=W?le.projMatrix:f.transform.calculateProjMatrix(ie,se),Ce=f.terrain&&W?f.terrain.stencilModeForRTTOverlap(le):ee[le.overscaledZ],Me=w?0:h.paint.get("raster-fade-duration");de.registerFadeDuration(Me);const Ae=a.findLoadedParent(le,0),Ne=rp(de,Ae,a,f.transform,Me);let ze,Ue;f.terrain&&f.terrain.prepareDrawTile();const ct=h.paint.get("raster-resampling")==="nearest"?P.NEAREST:P.LINEAR;M.activeTexture.set(P.TEXTURE0),de.texture.bind(ct,P.CLAMP_TO_EDGE),M.activeTexture.set(P.TEXTURE1),Ae?(Ae.texture.bind(ct,P.CLAMP_TO_EDGE),ze=Math.pow(2,Ae.tileID.overscaledZ-de.tileID.overscaledZ),Ue=[de.tileID.canonical.x*ze%1,de.tileID.canonical.y*ze%1]):de.texture.bind(ct,P.CLAMP_TO_EDGE),de.texture.useMipmap&&M.extTextureFilterAnisotropic&&f.transform.pitch>20&&P.texParameterf(P.TEXTURE_2D,M.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,M.extTextureFilterAnisotropicMax);const Be=dp(pe,Ue||[0,0],ze||1,Ne,h,z instanceof hn?z.perspectiveTransform:[0,0]);if(f.prepareDrawProgram(M,$,ie),z instanceof hn)z.boundsBuffer&&z.boundsSegments&&$.draw(M,P.TRIANGLES,Z,l.StencilMode.disabled,B,l.CullFaceMode.disabled,Be,h.id,z.boundsBuffer,f.quadTriangleIndexBuffer,z.boundsSegments);else{const{tileBoundsBuffer:nt,tileBoundsIndexBuffer:He,tileBoundsSegments:lt}=f.getTileBoundsBuffers(de);$.draw(M,P.TRIANGLES,Z,Ce,B,l.CullFaceMode.disabled,Be,h.id,nt,He,lt)}}f.resetStencilClippingMasks()},background:function(f,a,h,g){const v=h.paint.get("background-color"),w=h.paint.get("background-opacity");if(w===0)return;const M=f.context,P=M.gl,z=f.transform,$=z.tileSize,B=h.paint.get("background-pattern");if(f.isPatternMissing(B))return;const W=!B&&v.a===1&&w===1&&f.opaquePassEnabledForLayer()?"opaque":"translucent";if(f.renderPass!==W)return;const ee=l.StencilMode.disabled,oe=f.depthModeForSublayer(0,W==="opaque"?l.DepthMode.ReadWrite:l.DepthMode.ReadOnly),ae=f.colorModeForRenderPass(),se=f.useProgram(B?"backgroundPattern":"background");let le,Z=g;Z||(le=f.getBackgroundTiles(),Z=Object.values(le).map(ie=>ie.tileID)),B&&(M.activeTexture.set(P.TEXTURE0),f.imageManager.bind(f.context));for(const ie of Z){const de=ie.toUnwrapped(),pe=g?ie.projMatrix:f.transform.calculateProjMatrix(de);f.prepareDrawTile();const Ce=a?a.getTile(ie):le?le[ie.key]:new l.Tile(ie,$,z.zoom,f),Me=B?Dx(pe,w,f,B,{tileID:ie,tileSize:$}):fp(pe,w,v);f.prepareDrawProgram(M,se,de);const{tileBoundsBuffer:Ae,tileBoundsIndexBuffer:Ne,tileBoundsSegments:ze}=f.getTileBoundsBuffers(Ce);se.draw(M,P.TRIANGLES,oe,ee,ae,l.CullFaceMode.disabled,Me,h.id,Ae,Ne,ze)}},sky:function(f,a,h){const g=f.transform,v=g.projection.name==="mercator"||g.projection.name==="globe"?1:l.smoothstep(7,8,g.zoom),w=h.paint.get("sky-opacity")*v;if(w===0)return;const M=f.context,P=h.paint.get("sky-type"),z=new l.DepthMode(M.gl.LEQUAL,l.DepthMode.ReadOnly,[0,1]),$=f.frameCounter/1e3%1;P==="atmosphere"?f.renderPass==="offscreen"?h.needsSkyboxCapture(f)&&(function(B,W,ee,oe){const ae=B.context,se=ae.gl;let le=W.skyboxFbo;if(!le){le=W.skyboxFbo=ae.createFramebuffer(32,32,!1),W.skyboxGeometry=new Uu(ae),W.skyboxTexture=ae.gl.createTexture(),se.bindTexture(se.TEXTURE_CUBE_MAP,W.skyboxTexture),se.texParameteri(se.TEXTURE_CUBE_MAP,se.TEXTURE_WRAP_S,se.CLAMP_TO_EDGE),se.texParameteri(se.TEXTURE_CUBE_MAP,se.TEXTURE_WRAP_T,se.CLAMP_TO_EDGE),se.texParameteri(se.TEXTURE_CUBE_MAP,se.TEXTURE_MIN_FILTER,se.LINEAR),se.texParameteri(se.TEXTURE_CUBE_MAP,se.TEXTURE_MAG_FILTER,se.LINEAR);for(let pe=0;pe<6;++pe)se.texImage2D(se.TEXTURE_CUBE_MAP_POSITIVE_X+pe,0,se.RGBA,32,32,0,se.RGBA,se.UNSIGNED_BYTE,null)}ae.bindFramebuffer.set(le.framebuffer),ae.viewport.set([0,0,32,32]);const Z=W.getCenter(B,!0),ie=B.useProgram("skyboxCapture"),de=new Float64Array(16);l.identity(de),l.rotateY(de,de,.5*-Math.PI),to(ae,W,ie,de,Z,0),l.identity(de),l.rotateY(de,de,.5*Math.PI),to(ae,W,ie,de,Z,1),l.identity(de),l.rotateX(de,de,.5*-Math.PI),to(ae,W,ie,de,Z,2),l.identity(de),l.rotateX(de,de,.5*Math.PI),to(ae,W,ie,de,Z,3),l.identity(de),to(ae,W,ie,de,Z,4),l.identity(de),l.rotateY(de,de,Math.PI),to(ae,W,ie,de,Z,5),ae.viewport.set([0,0,B.width,B.height])}(f,h),h.markSkyboxValid(f)):f.renderPass==="sky"&&function(B,W,ee,oe,ae){const se=B.context,le=se.gl,Z=B.transform,ie=B.useProgram("skybox");se.activeTexture.set(le.TEXTURE0),le.bindTexture(le.TEXTURE_CUBE_MAP,W.skyboxTexture);const de=((pe,Ce,Me,Ae,Ne)=>({u_matrix:pe,u_sun_direction:Ce,u_cubemap:0,u_opacity:Ae,u_temporal_offset:Ne}))(Z.skyboxMatrix,W.getCenter(B,!1),0,oe,ae);B.prepareDrawProgram(se,ie),ie.draw(se,le.TRIANGLES,ee,l.StencilMode.disabled,B.colorModeForRenderPass(),l.CullFaceMode.backCW,de,"skybox",W.skyboxGeometry.vertexBuffer,W.skyboxGeometry.indexBuffer,W.skyboxGeometry.segment)}(f,h,z,w,$):P==="gradient"&&f.renderPass==="sky"&&function(B,W,ee,oe,ae){const se=B.context,le=se.gl,Z=B.transform,ie=B.useProgram("skyboxGradient");W.skyboxGeometry||(W.skyboxGeometry=new Uu(se)),se.activeTexture.set(le.TEXTURE0);let de=W.colorRampTexture;de||(de=W.colorRampTexture=new l.Texture(se,W.colorRamp,le.RGBA)),de.bind(le.LINEAR,le.CLAMP_TO_EDGE);const pe=((Ce,Me,Ae,Ne,ze)=>({u_matrix:Ce,u_color_ramp:0,u_center_direction:Me,u_radius:l.degToRad(Ae),u_opacity:Ne,u_temporal_offset:ze}))(Z.skyboxMatrix,W.getCenter(B,!1),W.paint.get("sky-gradient-radius"),oe,ae);B.prepareDrawProgram(se,ie),ie.draw(se,le.TRIANGLES,ee,l.StencilMode.disabled,B.colorModeForRenderPass(),l.CullFaceMode.backCW,pe,"skyboxGradient",W.skyboxGeometry.vertexBuffer,W.skyboxGeometry.indexBuffer,W.skyboxGeometry.segment)}(f,h,z,w,$)},debug:function(f,a,h){for(let g=0;g<h.length;g++)Ox(f,a,h[g])},custom:function(f,a,h,g){const v=f.context,w=h.implementation;if(!f.transform.projection.unsupportedLayers||!f.transform.projection.unsupportedLayers.includes("custom")||f.terrain&&(f.terrain.renderingToTexture||f.renderPass==="offscreen")&&h.isLayerDraped()){if(f.renderPass==="offscreen"){const M=w.prerender;if(M){if(f.setCustomLayerDefaults(),v.setColorMode(f.colorModeForRenderPass()),f.transform.projection.name==="globe"){const P=f.transform.pointMerc;M.call(w,v.gl,f.transform.customLayerMatrix(),f.transform.getProjection(),f.transform.globeToMercatorMatrix(),l.globeToMercatorTransition(f.transform.zoom),[P.x,P.y],f.transform.pixelsPerMeterRatio)}else M.call(w,v.gl,f.transform.customLayerMatrix());v.setDirty(),f.setBaseState()}}else if(f.renderPass==="translucent"){if(f.terrain&&f.terrain.renderingToTexture){const P=w.renderToTile;if(P){const z=g[0].canonical,$=new l.MercatorCoordinate(z.x+g[0].wrap*(1<<z.z),z.y,z.z);v.setDepthMode(l.DepthMode.disabled),v.setStencilMode(l.StencilMode.disabled),v.setColorMode(f.colorModeForRenderPass()),f.setCustomLayerDefaults(),P.call(w,v.gl,$),v.setDirty(),f.setBaseState()}return}f.setCustomLayerDefaults(),v.setColorMode(f.colorModeForRenderPass()),v.setStencilMode(l.StencilMode.disabled);const M=w.renderingMode==="3d"?new l.DepthMode(f.context.gl.LEQUAL,l.DepthMode.ReadWrite,f.depthRangeFor3D):f.depthModeForSublayer(0,l.DepthMode.ReadOnly);if(v.setDepthMode(M),f.transform.projection.name==="globe"){const P=f.transform.pointMerc;w.render(v.gl,f.transform.customLayerMatrix(),f.transform.getProjection(),f.transform.globeToMercatorMatrix(),l.globeToMercatorTransition(f.transform.zoom),[P.x,P.y],f.transform.pixelsPerMeterRatio)}else w.render(v.gl,f.transform.customLayerMatrix());v.setDirty(),f.setBaseState(),v.bindFramebuffer.set(null)}}else l.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class ul{constructor(a,h,g=!1){this.context=new xt(a,g),this.transform=h,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=l.SourceCache.maxUnderzooming+l.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(a,h){const g=!!a&&!!a.terrain&&this.transform.projection.supportsTerrain;if(!(g||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new op(this,a));const v=this._terrain;this.transform.elevation=g?v:null,v.update(a,this.transform,h)}_updateFog(a){const h=a.fog;if(!h||this.transform.projection.name==="globe"||h.getOpacity(this.transform.pitch)<1||h.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[g,v]=h.getFovAdjustedRange(this.transform._fov);if(g>v)return void(this.transform.fogCullDistSq=null);const w=g+.78*(v-g);this.transform.fogCullDistSq=w*w}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(a,h){if(this.width=a*l.exported.devicePixelRatio,this.height=h*l.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style.order)this.style._layers[g].resize()}setup(){const a=this.context,h=new l.StructArrayLayout2i4;h.emplaceBack(0,0),h.emplaceBack(l.EXTENT,0),h.emplaceBack(0,l.EXTENT),h.emplaceBack(l.EXTENT,l.EXTENT),this.tileExtentBuffer=a.createVertexBuffer(h,l.posAttributes.members),this.tileExtentSegments=l.SegmentVector.simpleSegment(0,0,4,2);const g=new l.StructArrayLayout2i4;g.emplaceBack(0,0),g.emplaceBack(l.EXTENT,0),g.emplaceBack(0,l.EXTENT),g.emplaceBack(l.EXTENT,l.EXTENT),this.debugBuffer=a.createVertexBuffer(g,l.posAttributes.members),this.debugSegments=l.SegmentVector.simpleSegment(0,0,4,5);const v=new l.StructArrayLayout2i4;v.emplaceBack(-1,-1),v.emplaceBack(1,-1),v.emplaceBack(-1,1),v.emplaceBack(1,1),this.viewportBuffer=a.createVertexBuffer(v,l.posAttributes.members),this.viewportSegments=l.SegmentVector.simpleSegment(0,0,4,2);const w=new l.StructArrayLayout4i8;w.emplaceBack(0,0,0,0),w.emplaceBack(l.EXTENT,0,l.EXTENT,0),w.emplaceBack(0,l.EXTENT,0,l.EXTENT),w.emplaceBack(l.EXTENT,l.EXTENT,l.EXTENT,l.EXTENT),this.mercatorBoundsBuffer=a.createVertexBuffer(w,l.boundsAttributes.members),this.mercatorBoundsSegments=l.SegmentVector.simpleSegment(0,0,4,2);const M=new l.StructArrayLayout3ui6;M.emplaceBack(0,1,2),M.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=a.createIndexBuffer(M);const P=new l.StructArrayLayout1ui2;for(const $ of[0,1,3,2,0])P.emplaceBack($);this.debugIndexBuffer=a.createIndexBuffer(P),this.emptyTexture=new l.Texture(a,new l.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),a.gl.RGBA),this.identityMat=l.create();const z=this.context.gl;this.stencilClearMode=new l.StencilMode({func:z.ALWAYS,mask:0},0,255,z.ZERO,z.ZERO,z.ZERO),this.loadTimeStamps.push(l.window.performance.now()),this.atmosphereBuffer=new ug(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(a){return a._makeTileBoundsBuffers(this.context,this.transform.projection),a._tileBoundsBuffer?{tileBoundsBuffer:a._tileBoundsBuffer,tileBoundsIndexBuffer:a._tileBoundsIndexBuffer,tileBoundsSegments:a._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const a=this.context,h=a.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(a,h.TRIANGLES,l.DepthMode.disabled,this.stencilClearMode,l.ColorMode.disabled,l.CullFaceMode.disabled,Ec(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(a,h,g){if(!h||this.currentStencilSource===h.id||!a.isTileClipped()||!g||g.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let P=!1;for(const z of g)if(this._tileClippingMaskIDs[z.key]===void 0){P=!0;break}if(!P)return}this.currentStencilSource=h.id;const v=this.context,w=v.gl;this.nextStencilID+g.length>256&&this.clearStencil(),v.setColorMode(l.ColorMode.disabled),v.setDepthMode(l.DepthMode.disabled);const M=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const P of g){const z=h.getTile(P),$=this._tileClippingMaskIDs[P.key]=this.nextStencilID++,{tileBoundsBuffer:B,tileBoundsIndexBuffer:W,tileBoundsSegments:ee}=this.getTileBoundsBuffers(z);M.draw(v,w.TRIANGLES,l.DepthMode.disabled,new l.StencilMode({func:w.ALWAYS,mask:0},$,255,w.KEEP,w.KEEP,w.REPLACE),l.ColorMode.disabled,l.CullFaceMode.disabled,Ec(P.projMatrix),"$clipping",B,W,ee)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const a=this.nextStencilID++,h=this.context.gl;return new l.StencilMode({func:h.NOTEQUAL,mask:255},a,255,h.KEEP,h.KEEP,h.REPLACE)}stencilModeForClipping(a){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(a);const h=this.context.gl;return new l.StencilMode({func:h.EQUAL,mask:255},this._tileClippingMaskIDs[a.key],0,h.KEEP,h.KEEP,h.REPLACE)}stencilConfigForOverlap(a){const h=this.context.gl,g=a.sort((M,P)=>P.overscaledZ-M.overscaledZ),v=g[g.length-1].overscaledZ,w=g[0].overscaledZ-v+1;if(w>1){this.currentStencilSource=void 0,this.nextStencilID+w>256&&this.clearStencil();const M={};for(let P=0;P<w;P++)M[P+v]=new l.StencilMode({func:h.GEQUAL,mask:255},P+this.nextStencilID,255,h.KEEP,h.KEEP,h.REPLACE);return this.nextStencilID+=w,[M,g]}return[{[v]:l.StencilMode.disabled},g]}colorModeForRenderPass(){const a=this.context.gl;return this._showOverdrawInspector?new l.ColorMode([a.CONSTANT_COLOR,a.ONE],new l.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?l.ColorMode.unblended:l.ColorMode.alphaBlended}depthModeForSublayer(a,h,g){if(!this.opaquePassEnabledForLayer())return l.DepthMode.disabled;const v=1-((1+this.currentLayer)*this.numSublayers+a)*this.depthEpsilon;return new l.DepthMode(g||this.context.gl.LEQUAL,h,[v,v])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(a,h){this.style=a,this.options=h,this.imageManager=a.imageManager,this.glyphManager=a.glyphManager,this.symbolFadeChange=a.placement.symbolFadeChange(l.exported.now()),this.imageManager.beginFrame();const g=this.style.order,v=this.style._sourceCaches;for(const $ in v){const B=v[$];B.used&&B.prepare(this.context)}const w={},M={},P={};for(const $ in v){const B=v[$];w[$]=B.getVisibleCoordinates(),M[$]=w[$].slice().reverse(),P[$]=B.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let $=0;$<g.length;$++)if(this.style._layers[g[$]].is3D()){this.opaquePassCutoff=$;break}if(this.terrain&&(this.terrain.updateTileBinding(P),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new l.GlobeSharedBuffers(this.context)),!l.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const $ of g){const B=this.style._layers[$],W=a._getLayerSourceCache(B);if(!B.hasOffscreenPass()||B.isHidden(this.transform.zoom))continue;const ee=W?M[W.id]:void 0;(B.type==="custom"||B.isSky()||ee&&ee.length)&&this.renderLayer(this,W,B,ee)}this.depthRangeFor3D=[0,1-(a.order.length+2)*this.numSublayers*this.depthEpsilon];const z=this.terrain;if(z&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&z.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:h.showOverdrawInspector?l.Color.black:l.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=h.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=g.length-1;this.currentLayer>=0;this.currentLayer--){const $=this.style._layers[g[this.currentLayer]],B=a._getLayerSourceCache($);if($.isSky())continue;const W=B?M[B.id]:void 0;this._renderTileClippingMasks($,B,W),this.renderLayer(this,B,$,W)}if(this.style.fog&&this.transform.projection.supportsFog&&function($,B){const W=$.context,ee=W.gl,oe=$.transform,ae=new l.DepthMode(ee.LEQUAL,l.DepthMode.ReadOnly,[0,1]),se=$.useProgram("globeAtmosphere",null,oe.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),le=l.globeToMercatorTransition(oe.zoom),Z=B.properties.get("color").toArray01(),ie=B.properties.get("high-color").toArray01(),de=B.properties.get("space-color").toArray01PremultipliedAlpha(),pe=l.identity$1([]);l.rotateY$1(pe,pe,-l.degToRad(oe._center.lng)),l.rotateX$1(pe,pe,l.degToRad(oe._center.lat)),l.rotateZ$1(pe,pe,oe.angle),l.rotateX$1(pe,pe,-oe._pitch);const Ce=l.fromQuat(new Float32Array(16),pe),Me=l.mapValue(B.properties.get("star-intensity"),0,1,0,.25),Ae=5e-4,Ne=l.mapValue(B.properties.get("horizon-blend"),0,1,Ae,.25),ze=l.globeUseCustomAntiAliasing($,W,oe)&&Ne===Ae?oe.worldSize/(2*Math.PI*1.025)-1:oe.globeRadius,Ue=$.frameCounter/1e3%1,ct=l.length(oe.globeCenterInViewSpace),Be=Math.sqrt(Math.pow(ct,2)-Math.pow(ze,2)),nt=Math.acos(Be/ct),He=((je,tt,ht,st,dt,Vt,Qt,Nt,Xt,gn,pn,$t,Dn,Ln)=>({u_frustum_tl:je,u_frustum_tr:tt,u_frustum_br:ht,u_frustum_bl:st,u_horizon:dt,u_transition:Vt,u_fadeout_range:Qt,u_color:Nt,u_high_color:Xt,u_space_color:gn,u_star_intensity:pn,u_star_size:5*l.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:$t,u_horizon_angle:Dn,u_rotation_matrix:Ln}))(oe.frustumCorners.TL,oe.frustumCorners.TR,oe.frustumCorners.BR,oe.frustumCorners.BL,oe.frustumCorners.horizon,le,Ne,Z,ie,de,Me,Ue,nt,Ce);$.prepareDrawProgram(W,se);const lt=$.atmosphereBuffer;lt&&se.draw(W,ee.TRIANGLES,ae,l.StencilMode.disabled,l.ColorMode.alphaBlended,l.CullFaceMode.backCW,He,"skybox",lt.vertexBuffer,lt.indexBuffer,lt.segments)}(this,this.style.fog),this.renderPass="sky",(l.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<g.length;this.currentLayer++){const $=this.style._layers[g[this.currentLayer]],B=a._getLayerSourceCache($);$.isSky()&&this.renderLayer(this,B,$,B?M[B.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<g.length;){const $=this.style._layers[g[this.currentLayer]],B=a._getLayerSourceCache($);if($.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped($)){if($.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const W=B?($.type==="symbol"?P:M)[B.id]:void 0;this._renderTileClippingMasks($,B,B?w[B.id]:void 0),this.renderLayer(this,B,$,W),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let $=null;l.values(this.style._layers).forEach(B=>{const W=a._getLayerSourceCache(B);W&&!B.isHidden(this.transform.zoom)&&(!$||$.getSource().maxzoom<W.getSource().maxzoom)&&($=W)}),$&&this.options.showTileBoundaries&&ba.debug(this,$,$.getVisibleCoordinates())}this.options.showPadding&&function($){const B=$.transform.padding;ag($,$.transform.height-(B.top||0),3,ll),ag($,B.bottom||0,3,Nx),ju($,B.left||0,3,Lx),ju($,$.transform.width-(B.right||0),3,Fx);const W=$.transform.centerPoint;(function(ee,oe,ae,se){cl(ee,oe-1,ae-10,2,20,se),cl(ee,oe-10,ae-1,20,2,se)})($,W.x,$.transform.height-W.y,Rx)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(l.window.performance.now()),this.saveCanvasCopy())}renderLayer(a,h,g,v){g.isHidden(this.transform.zoom)||(g.type==="background"||g.type==="sky"||g.type==="custom"||v&&v.length)&&(this.id=g.id,this.gpuTimingStart(g),(!a.transform.projection.unsupportedLayers||!a.transform.projection.unsupportedLayers.includes(g.type)||a.terrain&&g.type==="custom")&&ba[g.type](a,h,g,v,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(a){if(!this.options.gpuTiming)return;const h=this.context.extTimerQuery;let g=this.gpuTimers[a.id];g||(g=this.gpuTimers[a.id]={calls:0,cpuTime:0,query:h.createQueryEXT()}),g.calls++,h.beginQueryEXT(h.TIME_ELAPSED_EXT,g.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const a=this.context.extTimerQuery,h=a.createQueryEXT();this.deferredRenderGpuTimeQueries.push(h),a.beginQueryEXT(a.TIME_ELAPSED_EXT,h)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const a=this.context.extTimerQuery;a.endQueryEXT(a.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const a=this.context.extTimerQuery;a.endQueryEXT(a.TIME_ELAPSED_EXT)}collectGpuTimers(){const a=this.gpuTimers;return this.gpuTimers={},a}collectDeferredRenderGpuQueries(){const a=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],a}queryGpuTimers(a){const h={};for(const g in a){const v=a[g],w=this.context.extTimerQuery,M=w.getQueryObjectEXT(v.query,w.QUERY_RESULT_EXT)/1e6;w.deleteQueryEXT(v.query),h[g]=M}return h}queryGpuTimeDeferredRender(a){if(!this.options.gpuTimingDeferredRender)return 0;const h=this.context.extTimerQuery;let g=0;for(const v of a)g+=h.getQueryObjectEXT(v,h.QUERY_RESULT_EXT)/1e6,h.deleteQueryEXT(v);return g}translatePosMatrix(a,h,g,v,w){if(!g[0]&&!g[1])return a;const M=w?v==="map"?this.transform.angle:0:v==="viewport"?-this.transform.angle:0;if(M){const $=Math.sin(M),B=Math.cos(M);g=[g[0]*B-g[1]*$,g[0]*$+g[1]*B]}const P=[w?g[0]:_t(h,g[0],this.transform.zoom),w?g[1]:_t(h,g[1],this.transform.zoom),0],z=new Float32Array(16);return l.translate(z,a,P),z}saveTileTexture(a){const h=this._tileTextures[a.size[0]];h?h.push(a):this._tileTextures[a.size[0]]=[a]}getTileTexture(a){const h=this._tileTextures[a];return h&&h.length>0?h.pop():null}isPatternMissing(a){return a===null||a!==void 0&&!this.imageManager.getPattern(a.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const a=this.terrain&&this.terrain.renderingToTexture,h=this.terrain&&this.terrain.exaggeration()===0,g=this.style&&this.style.fog,v=[];return this.terrainRenderModeElevated()&&v.push("TERRAIN"),this.transform.projection.name==="globe"&&v.push("GLOBE"),h&&v.push("ZERO_EXAGGERATION"),g&&!a&&g.getOpacity(this.transform.pitch)!==0&&v.push("FOG"),a&&v.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&v.push("OVERDRAW_INSPECTOR"),v}useProgram(a,h,g){this.cache=this.cache||{};const v=g||[],w=this.currentGlobalDefines().concat(v),M=En.cacheKey(Qd[a],a,w,h);return this.cache[M]||(this.cache[M]=new En(this.context,a,Qd[a],h,mp[a],w)),this.cache[M]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const a=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(a.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=l.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new l.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(a,h,g){if(this.terrain&&this.terrain.renderingToTexture)return;const v=this.style.fog;if(v){const w=v.getOpacity(this.transform.pitch),M=((P,z,$,B,W,ee,oe,ae,se,le,Z)=>{const ie=P.transform,de=z.properties.get("color").toArray01();de[3]=B;const pe=P.frameCounter/1e3%1;return{u_fog_matrix:$?ie.calculateFogTileMatrix($):P.identityMat,u_fog_range:z.getFovAdjustedRange(ie._fov),u_fog_color:de,u_fog_horizon_blend:z.properties.get("horizon-blend"),u_fog_temporal_offset:pe,u_frustum_tl:W,u_frustum_tr:ee,u_frustum_br:oe,u_frustum_bl:ae,u_globe_pos:se,u_globe_radius:le,u_viewport:Z,u_globe_transition:l.globeToMercatorTransition(ie.zoom),u_is_globe:+(ie.projection.name==="globe")}})(this,v,g,w,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*l.exported.devicePixelRatio,this.transform.height*l.exported.devicePixelRatio]);h.setFogUniformValues(a,M)}}setTileLoadedFlag(a){this.tileLoaded=a}saveCanvasCopy(){const a=this.canvasCopy();a&&(this.frameCopies.push(a),this.tileLoaded=!1)}canvasCopy(){const a=this.context.gl,h=a.createTexture();return a.bindTexture(a.TEXTURE_2D,h),a.copyTexImage2D(a.TEXTURE_2D,0,a.RGBA,0,0,a.drawingBufferWidth,a.drawingBufferHeight,0),h}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const a=this.style&&this.style.fog;return!!a&&a.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const a=this._backgroundTiles,h=this._backgroundTiles={},g=this.transform.coveringTiles({tileSize:512});for(const v of g)h[v.key]=a[v.key]||new l.Tile(v,512,this.transform.tileZoom,this);return h}clearBackgroundTiles(){this._backgroundTiles={}}}class Vu{constructor(a=0,h=0,g=0,v=0){if(isNaN(a)||a<0||isNaN(h)||h<0||isNaN(g)||g<0||isNaN(v)||v<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=a,this.bottom=h,this.left=g,this.right=v}interpolate(a,h,g){return h.top!=null&&a.top!=null&&(this.top=l.number(a.top,h.top,g)),h.bottom!=null&&a.bottom!=null&&(this.bottom=l.number(a.bottom,h.bottom,g)),h.left!=null&&a.left!=null&&(this.left=l.number(a.left,h.left,g)),h.right!=null&&a.right!=null&&(this.right=l.number(a.right,h.right,g)),this}getCenter(a,h){const g=l.clamp((this.left+a-this.right)/2,0,a),v=l.clamp((this.top+h-this.bottom)/2,0,h);return new l.Point(g,v)}equals(a){return this.top===a.top&&this.bottom===a.bottom&&this.left===a.left&&this.right===a.right}clone(){return new Vu(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Gu(f,a){const h=l.getColumn(f,3);l.fromQuat(f,a),l.setColumn(f,3,h)}function Tn(f,a){const h=l.identity$1([]);return l.rotateZ$1(h,h,-a),l.rotateX$1(h,h,-f),h}function Pc(f,a){const h=[f[0],f[1],0],g=[a[0],a[1],0];if(l.length(h)>=1e-15){const M=l.normalize([],h);l.scale$2(g,M,l.dot(g,M)),a[0]=g[0],a[1]=g[1]}const v=l.cross([],a,f);if(l.len(v)<1e-15)return null;const w=Math.atan2(-v[1],v[0]);return Tn(Math.atan2(Math.sqrt(f[0]*f[0]+f[1]*f[1]),-f[2]),w)}class hg{constructor(a,h){this.position=a,this.orientation=h}get position(){return this._position}set position(a){if(a){const h=a instanceof l.MercatorCoordinate?a:new l.MercatorCoordinate(a[0],a[1],a[2]);this._renderWorldCopies&&(h.x=l.wrap(h.x,0,1)),this._position=h}else this._position=null}lookAtPoint(a,h){if(this.orientation=null,!this.position)return;const g=this.position,v=this._elevation?this._elevation.getAtPointOrZero(l.MercatorCoordinate.fromLngLat(a)):0,w=l.MercatorCoordinate.fromLngLat(a,v),M=[w.x-g.x,w.y-g.y,w.z-g.z];h||(h=[0,0,1]),h[2]=Math.abs(h[2]),this.orientation=Pc(M,h)}setPitchBearing(a,h){this.orientation=Tn(l.degToRad(a),l.degToRad(-h))}}class qu{constructor(a,h){this._transform=l.identity([]),this.orientation=h,this.position=a}get mercatorPosition(){const a=this.position;return new l.MercatorCoordinate(a[0],a[1],a[2])}get position(){const a=l.getColumn(this._transform,3);return[a[0],a[1],a[2]]}set position(a){var h;a&&l.setColumn(this._transform,3,[(h=a)[0],h[1],h[2],1])}get orientation(){return this._orientation}set orientation(a){this._orientation=a||l.identity$1([]),a&&Gu(this._transform,this._orientation)}getPitchBearing(){const a=this.forward(),h=this.right();return{bearing:Math.atan2(-h[1],h[0]),pitch:Math.atan2(Math.sqrt(a[0]*a[0]+a[1]*a[1]),-a[2])}}setPitchBearing(a,h){this._orientation=Tn(a,h),Gu(this._transform,this._orientation)}forward(){const a=l.getColumn(this._transform,2);return[-a[0],-a[1],-a[2]]}up(){const a=l.getColumn(this._transform,1);return[-a[0],-a[1],-a[2]]}right(){const a=l.getColumn(this._transform,0);return[a[0],a[1],a[2]]}getCameraToWorld(a,h){const g=new Float64Array(16);return l.invert(g,this.getWorldToCamera(a,h)),g}getWorldToCameraPosition(a,h,g){const v=this.position;l.scale$2(v,v,-a);const w=new Float64Array(16);return l.fromScaling(w,[g,g,g]),l.translate(w,w,v),w[10]*=h,w}getWorldToCamera(a,h){const g=new Float64Array(16),v=new Float64Array(4),w=this.position;return l.conjugate(v,this._orientation),l.scale$2(w,w,-a),l.fromQuat(g,v),l.translate(g,g,w),g[1]*=-1,g[5]*=-1,g[9]*=-1,g[13]*=-1,g[8]*=h,g[9]*=h,g[10]*=h,g[11]*=h,g}getCameraToClipPerspective(a,h,g,v){const w=new Float64Array(16);return l.perspective(w,a,h,g,v),w}getDistanceToElevation(a,h=!1){const g=a===0?0:l.mercatorZfromAltitude(a,h?l.latFromMercatorY(this.position[1]):this.position[1]),v=this.forward();return(g-this.position[2])/v[2]}clone(){return new qu([...this.position],[...this.orientation])}}function hl(f,a){const h=Hu(f.projection,f.zoom,f.width,f.height),g=function(w,M,P,z,$){const B=new l.LngLat(P.lng-180*vs,P.lat),W=new l.LngLat(P.lng+180*vs,P.lat),ee=w.project(B.lng,B.lat),oe=w.project(W.lng,W.lat),ae=-Math.atan2(oe.y-ee.y,oe.x-ee.x),se=l.MercatorCoordinate.fromLngLat(P);se.y=l.clamp(se.y,-1+vs,1-vs);const le=se.toLngLat(),Z=w.project(le.lng,le.lat),ie=l.MercatorCoordinate.fromLngLat(le);ie.x+=vs;const de=ie.toLngLat(),pe=w.project(de.lng,de.lat),Ce=Wu(pe.x-Z.x,pe.y-Z.y,ae),Me=l.MercatorCoordinate.fromLngLat(le);Me.y+=vs;const Ae=Me.toLngLat(),Ne=w.project(Ae.lng,Ae.lat),ze=Wu(Ne.x-Z.x,Ne.y-Z.y,ae),Ue=Math.abs(Ce.x)/Math.abs(ze.y),ct=l.identity([]);l.rotateZ(ct,ct,-ae*(1-($?0:z)));const Be=l.identity([]);return l.scale(Be,Be,[1,1-(1-Ue)*z,1]),Be[4]=-ze.x/ze.y*z,l.rotateZ(Be,Be,ae),l.multiply(Be,ct,Be),Be}(f.projection,0,f.center,h,a),v=dg(f);return l.scale(g,g,[v,v,1]),g}function dg(f){const a=f.projection,h=Hu(f.projection,f.zoom,f.width,f.height),g=pg(a,f.center),v=pg(a,l.LngLat.convert(a.center));return Math.pow(2,g*h+(1-h)*v)}function Hu(f,a,h,g,v=1/0){const w=f.range;if(!w)return 0;const M=Math.min(v,Math.max(h,g)),P=Math.log(M/1024)/Math.LN2;return l.smoothstep(w[0]+P,w[1]+P,a)}const vs=1/4e4;function pg(f,a){const h=l.clamp(a.lat,-l.MAX_MERCATOR_LATITUDE,l.MAX_MERCATOR_LATITUDE),g=new l.LngLat(a.lng-180*vs,h),v=new l.LngLat(a.lng+180*vs,h),w=f.project(g.lng,h),M=f.project(v.lng,h),P=l.MercatorCoordinate.fromLngLat(g),z=l.MercatorCoordinate.fromLngLat(v),$=M.x-w.x,B=M.y-w.y,W=z.x-P.x,ee=z.y-P.y,oe=Math.sqrt((W*W+ee*ee)/($*$+B*B));return Math.log(oe)/Math.LN2}function Wu(f,a,h){const g=Math.cos(h),v=Math.sin(h);return{x:f*g-a*v,y:f*v+a*g}}class dl{constructor(a,h,g,v,w,M,P){this.tileSize=512,this._renderWorldCopies=w===void 0||w,this._minZoom=a||0,this._maxZoom=h||22,this._minPitch=g==null?0:g,this._maxPitch=v==null?60:v,this.setProjection(M),this.setMaxBounds(P),this.width=0,this.height=0,this._center=new l.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Vu,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new qu,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const a=new dl(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return a._elevation=this._elevation,a._centerAltitude=this._centerAltitude,a._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,a.tileSize=this.tileSize,a.mercatorFromTransition=this.mercatorFromTransition,a.width=this.width,a.height=this.height,a.cameraElevationReference=this.cameraElevationReference,a._center=this._center,a._setZoom(this.zoom),a._seaLevelZoom=this._seaLevelZoom,a.angle=this.angle,a._fov=this._fov,a._pitch=this._pitch,a._nearZ=this._nearZ,a._farZ=this._farZ,a._averageElevation=this._averageElevation,a._unmodified=this._unmodified,a._edgeInsets=this._edgeInsets.clone(),a._camera=this._camera.clone(),a._calcMatrices(),a.freezeTileCoverage=this.freezeTileCoverage,a.frustumCorners=this.frustumCorners,a}get elevation(){return this._elevation}set elevation(a){this._elevation!==a&&(this._elevation=a,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(a,h=!1){const g=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||g)&&this._updateCameraOnTerrain(),(a||g)&&this._constrainCamera(h),this._calcMatrices()}getProjection(){return l.pick(this.projection,["name","center","parallels"])}setProjection(a){this.projectionOptions=a||{name:"mercator"};const h=this.projection?this.getProjection():void 0;this.projection=l.getProjection(this.projectionOptions);const g=!_(h,this.getProjection());return g&&this._calcMatrices(),this.mercatorFromTransition=!1,g}setMercatorFromTransition(){const a=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=l.getProjection({name:"mercator"});const h=a!==this.projection.name;return h&&this._calcMatrices(),h}get minZoom(){return this._minZoom}set minZoom(a){this._minZoom!==a&&(this._minZoom=a,this.zoom=Math.max(this.zoom,a))}get maxZoom(){return this._maxZoom}set maxZoom(a){this._maxZoom!==a&&(this._maxZoom=a,this.zoom=Math.min(this.zoom,a))}get minPitch(){return this._minPitch}set minPitch(a){this._minPitch!==a&&(this._minPitch=a,this.pitch=Math.max(this.pitch,a))}get maxPitch(){return this._maxPitch}set maxPitch(a){this._maxPitch!==a&&(this._maxPitch=a,this.pitch=Math.min(this.pitch,a))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(a){a===void 0?a=!0:a===null&&(a=!1),this._renderWorldCopies=a}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const a=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(a))}get cameraWorldSize(){const a=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(a))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return l.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.Point(this.width,this.height)}get bearing(){return l.wrap(this.rotation,-180,180)}set bearing(a){this.rotation=a}get rotation(){return-this.angle/Math.PI*180}set rotation(a){const h=-a*Math.PI/180;var g;this.angle!==h&&(this._unmodified=!1,this.angle=h,this._calcMatrices(),this.rotationMatrix=(g=new l.ARRAY_TYPE(4),l.ARRAY_TYPE!=Float32Array&&(g[1]=0,g[2]=0),g[0]=1,g[3]=1,g),function(v,w,M){var P=w[0],z=w[1],$=w[2],B=w[3],W=Math.sin(M),ee=Math.cos(M);v[0]=P*ee+$*W,v[1]=z*ee+B*W,v[2]=P*-W+$*ee,v[3]=z*-W+B*ee}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(a){const h=l.clamp(a,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==h&&(this._unmodified=!1,this._pitch=h,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const a=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/a)}set fov(a){a=Math.max(.01,Math.min(60,a)),this._fov!==a&&(this._unmodified=!1,this._fov=l.degToRad(a),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(a){this._averageElevation=a,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(a){const h=Math.min(Math.max(a,this.minZoom),this.maxZoom);this._zoom!==h&&(this._unmodified=!1,this._setZoom(h),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(a){this._zoom=a,this.scale=this.zoomScale(a),this.tileZoom=Math.floor(a),this.zoomFraction=a-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const a=this._elevation;this._centerAltitude=a.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=a.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const a=this._elevation,h=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],g=this.horizonLineFromTop();let v=0,w=0;for(let M=0;M<h.length;M++){const P=new l.Point(h[M][0]*this.width,g+h[M][1]*(this.height-g)),z=a.pointCoordinate(P);if(!z)continue;const $=1/Math.hypot(z[0]-this._camera.position[0],z[1]-this._camera.position[1]);v+=z[3]*$,w+=$}return w===0?NaN:v/w}get center(){return this._center}set center(a){a.lat===this._center.lat&&a.lng===this._center.lng||(this._unmodified=!1,this._center=a,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const a=this._seaLevelZoom,h=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),g=this.pixelsPerMeter/this.worldSize*h,v=this._mercatorZfromZoom(a),w=this._mercatorZfromZoom(this._maxZoom),M=Math.max(v-g,w);this._setZoom(this._zoomFromMercatorZ(M))}get padding(){return this._edgeInsets.toJSON()}set padding(a){this._edgeInsets.equals(a)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,a,1),this._calcMatrices())}computeZoomRelativeTo(a){const h=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,a.toAltitude()));let g;g=a.z<this._camera.position[2]?[h.x,h.y,h.z]:[a.x,a.y,a.z];const v=l.length(l.sub([],this._camera.position,g));return l.clamp(this._zoomFromMercatorZ(v),this._minZoom,this._maxZoom)}setFreeCameraOptions(a){if(!this.height||!a.position&&!a.orientation)return;this._updateCameraState();let h=!1;if(a.orientation&&!l.exactEquals(a.orientation,this._camera.orientation)&&(h=this._setCameraOrientation(a.orientation)),a.position){const g=[a.position.x,a.position.y,a.position.z];l.exactEquals$1(g,this._camera.position)||(this._setCameraPosition(g),h=!0)}h&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const a=this._camera.position,h=new hg;return h.position=new l.MercatorCoordinate(a[0],a[1],a[2]),h.orientation=this._camera.orientation,h._elevation=this.elevation,h._renderWorldCopies=this.renderWorldCopies,h}_setCameraOrientation(a){if(!l.length$1(a))return!1;l.normalize$1(a,a);const h=l.transformQuat([],[0,0,-1],a),g=l.transformQuat([],[0,-1,0],a);if(g[2]<0)return!1;const v=Pc(h,g);return!!v&&(this._camera.orientation=v,!0)}_setCameraPosition(a){const h=this.zoomScale(this.minZoom)*this.tileSize,g=this.zoomScale(this.maxZoom)*this.tileSize,v=this.cameraToCenterDistance;a[2]=l.clamp(a[2],v/g,v/h),this._camera.position=a}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(a){return this._edgeInsets.equals(a)}interpolatePadding(a,h,g){this._unmodified=!1,this._edgeInsets.interpolate(a,h,g),this._constrain(),this._calcMatrices()}coveringZoomLevel(a){const h=(a.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/a.tileSize));return Math.max(0,h)}getVisibleUnwrappedCoordinates(a){const h=[new l.UnwrappedTileID(0,a)];if(this.renderWorldCopies){const g=this.pointCoordinate(new l.Point(0,0)),v=this.pointCoordinate(new l.Point(this.width,0)),w=this.pointCoordinate(new l.Point(this.width,this.height)),M=this.pointCoordinate(new l.Point(0,this.height)),P=Math.floor(Math.min(g.x,v.x,w.x,M.x)),z=Math.floor(Math.max(g.x,v.x,w.x,M.x)),$=1;for(let B=P-$;B<=z+$;B++)B!==0&&h.push(new l.UnwrappedTileID(B,a))}return h}coveringTiles(a){let h=this.coveringZoomLevel(a);const g=h,v=this.elevation&&!a.isTerrainDEM,w=this.projection.name==="mercator";if(a.minzoom!==void 0&&h<a.minzoom)return[];a.maxzoom!==void 0&&h>a.maxzoom&&(h=a.maxzoom);const M=this.locationCoordinate(this.center),P=this.center.lat,z=1<<h,$=[z*M.x,z*M.y,0],B=this.projection.name==="globe",W=!B,ee=l.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,h,W),oe=B?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),ae=z*l.mercatorZfromAltitude(1,this.center.lat),se=this._camera.position[2]/l.mercatorZfromAltitude(1,this.center.lat),le=[z*oe.x,z*oe.y,se*(W?1:ae)],Z=this.cameraToCenterDistance/a.tileSize*(a.roundZoom?1:.502),ie=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?h:0,de=a.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,pe=a.isTerrainDEM?-de:this._elevation?this._elevation.getMinElevationBelowMSL():0,Ce=this.projection.isReprojectedInTileSpace?dg(this):1,Me=je=>{const ht=new l.MercatorCoordinate(je.x+25e-6,je.y,je.z),st=new l.MercatorCoordinate(je.x,je.y+25e-6,je.z),dt=je.toLngLat(),Vt=ht.toLngLat(),Qt=st.toLngLat(),Nt=this.locationCoordinate(dt),Xt=this.locationCoordinate(Vt),gn=this.locationCoordinate(Qt),pn=Math.hypot(Xt.x-Nt.x,Xt.y-Nt.y),$t=Math.hypot(gn.x-Nt.x,gn.y-Nt.y);return Math.sqrt(pn*$t)*Ce/25e-6},Ae=je=>{const tt=de,ht=pe;return{aabb:l.tileAABB(this,z,0,0,0,je,ht,tt,this.projection),zoom:0,x:0,y:0,minZ:ht,maxZ:tt,wrap:je,fullyVisible:!1}},Ne=[];let ze=[];const Ue=h,ct=a.reparseOverscaled?g:h,Be=je=>je*je,nt=Be((se-this._centerAltitude)*ae),He=je=>{if(!this._elevation||!je.tileID||!w)return;const tt=this._elevation.getMinMaxForTile(je.tileID),ht=je.aabb;tt?(ht.min[2]=tt.min,ht.max[2]=tt.max,ht.center[2]=(ht.min[2]+ht.max[2])/2):(je.shouldSplit=lt(je),je.shouldSplit||(ht.min[2]=ht.max[2]=ht.center[2]=this._centerAltitude))},lt=je=>{if(je.zoom<ie)return!0;if(je.zoom===Ue)return!1;if(je.shouldSplit!=null)return je.shouldSplit;const tt=je.aabb.distanceX(le),ht=je.aabb.distanceY(le);let st=nt,dt=1;if(B){st=Be(je.aabb.distanceZ(le));const Nt=Math.pow(2,je.zoom),Xt=l.latFromMercatorY((je.y+1)/Nt),gn=l.latFromMercatorY(je.y/Nt),pn=Math.min(Math.max(P,Xt),gn),$t=l.circumferenceAtLatitude(pn)/l.circumferenceAtLatitude(P);if(dt=pn===P?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,$t/this._mercatorScaleRatio),this.zoom<=l.GLOBE_ZOOM_THRESHOLD_MIN&&je.zoom===Ue-1&&$t>=.9)return!0}else if(v&&(st=Be(je.aabb.distanceZ(le)*ae)),this.projection.isReprojectedInTileSpace&&g<=5){const Nt=Math.pow(2,je.zoom),Xt=Me(new l.MercatorCoordinate((je.x+.5)/Nt,(je.y+.5)/Nt));dt=Xt>.85?1:Xt}const Vt=tt*tt+ht*ht+st,Qt=Be((1<<Ue-je.zoom)*Z*dt*((Nt,Xt)=>{if(Xt*Be(.707)<Nt)return 1;const gn=Math.sqrt(Xt/Nt);return gn/(1.4144271570014144+(Math.pow(1.1,gn-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(st,nt),Vt));return Vt<Qt};if(this.renderWorldCopies)for(let je=1;je<=3;je++)Ne.push(Ae(-je)),Ne.push(Ae(je));for(Ne.push(Ae(0));Ne.length>0;){const je=Ne.pop(),tt=je.x,ht=je.y;let st=je.fullyVisible;if(!st){const dt=je.aabb.intersects(ee);if(dt===0)continue;st=dt===2}if(je.zoom!==Ue&&lt(je))for(let dt=0;dt<4;dt++){const Vt=(tt<<1)+dt%2,Qt=(ht<<1)+(dt>>1),Nt={aabb:w?je.aabb.quadrant(dt):l.tileAABB(this,z,je.zoom+1,Vt,Qt,je.wrap,je.minZ,je.maxZ,this.projection),zoom:je.zoom+1,x:Vt,y:Qt,wrap:je.wrap,fullyVisible:st,tileID:void 0,shouldSplit:void 0,minZ:je.minZ,maxZ:je.maxZ};v&&!B&&(Nt.tileID=new l.OverscaledTileID(je.zoom+1===Ue?ct:je.zoom+1,je.wrap,je.zoom+1,Vt,Qt),He(Nt)),Ne.push(Nt)}else{const dt=je.zoom===Ue?ct:je.zoom;if(a.minzoom&&a.minzoom>dt)continue;const Vt=$[0]-(.5+tt+(je.wrap<<je.zoom))*(1<<h-je.zoom),Qt=$[1]-.5-ht,Nt=je.tileID?je.tileID:new l.OverscaledTileID(dt,je.wrap,je.zoom,tt,ht);ze.push({tileID:Nt,distanceSq:Vt*Vt+Qt*Qt})}}if(this.fogCullDistSq){const je=this.fogCullDistSq,tt=this.horizonLineFromTop();ze=ze.filter(ht=>{const st=[0,0,0,1],dt=[l.EXTENT,l.EXTENT,0,1],Vt=this.calculateFogTileMatrix(ht.tileID.toUnwrapped());l.transformMat4$1(st,st,Vt),l.transformMat4$1(dt,dt,Vt);const Qt=l.getAABBPointSquareDist(st,dt);if(Qt===0)return!0;let Nt=!1;const Xt=this._elevation;if(Xt&&Qt>je&&tt!==0){const gn=this.calculateProjMatrix(ht.tileID.toUnwrapped());let pn;a.isTerrainDEM||(pn=Xt.getMinMaxForTile(ht.tileID)),pn||(pn={min:pe,max:de});const $t=l.furthestTileCorner(this.rotation),Dn=[$t[0]*l.EXTENT,$t[1]*l.EXTENT,pn.max];l.transformMat4(Dn,Dn,gn),Nt=(1-Dn[1])*this.height*.5<tt}return Qt<je||Nt})}return ze.sort((je,tt)=>je.distanceSq-tt.distanceSq).map(je=>je.tileID)}resize(a,h){this.width=a,this.height=h,this.pixelsToGLUnits=[2/a,-2/h],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(a){return Math.pow(2,a)}scaleZoom(a){return Math.log(a)/Math.LN2}project(a){const h=l.clamp(a.lat,-l.MAX_MERCATOR_LATITUDE,l.MAX_MERCATOR_LATITUDE),g=this.projection.project(a.lng,h);return new l.Point(g.x*this.worldSize,g.y*this.worldSize)}unproject(a){return this.projection.unproject(a.x/this.worldSize,a.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/l.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(a,h){let g,v;const w=this.centerPoint;if(this.projection.name==="globe"){const P=this.worldSize;g=(h.x-w.x)/P,v=(h.y-w.y)/P}else{const P=this.pointCoordinate(h),z=this.pointCoordinate(w);g=P.x-z.x,v=P.y-z.y}const M=this.locationCoordinate(a);this.setLocation(new l.MercatorCoordinate(M.x-g,M.y-v))}setLocation(a){this.center=this.coordinateLocation(a),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(a){return this.projection.locationPoint(this,a)}locationPoint3D(a){return this.projection.locationPoint(this,a,!0)}pointLocation(a){return this.coordinateLocation(this.pointCoordinate(a))}pointLocation3D(a){return this.coordinateLocation(this.pointCoordinate3D(a))}locationCoordinate(a,h){const g=h?l.mercatorZfromAltitude(h,a.lat):void 0,v=this.projection.project(a.lng,a.lat);return new l.MercatorCoordinate(v.x,v.y,g)}coordinateLocation(a){return this.projection.unproject(a.x,a.y)}pointRayIntersection(a,h){const g=h!=null?h:this._centerAltitude,v=[a.x,a.y,0,1],w=[a.x,a.y,1,1];l.transformMat4$1(v,v,this.pixelMatrixInverse),l.transformMat4$1(w,w,this.pixelMatrixInverse);const M=w[3];l.scale$1(v,v,1/v[3]),l.scale$1(w,w,1/M);const P=v[2],z=w[2];return{p0:v,p1:w,t:P===z?0:(g-P)/(z-P)}}screenPointToMercatorRay(a){const h=[a.x,a.y,0,1],g=[a.x,a.y,1,1];return l.transformMat4$1(h,h,this.pixelMatrixInverse),l.transformMat4$1(g,g,this.pixelMatrixInverse),l.scale$1(h,h,1/h[3]),l.scale$1(g,g,1/g[3]),h[2]=l.mercatorZfromAltitude(h[2],this._center.lat)*this.worldSize,g[2]=l.mercatorZfromAltitude(g[2],this._center.lat)*this.worldSize,l.scale$1(h,h,1/this.worldSize),l.scale$1(g,g,1/this.worldSize),new l.Ray([h[0],h[1],h[2]],l.normalize([],l.sub([],g,h)))}rayIntersectionCoordinate(a){const{p0:h,p1:g,t:v}=a,w=l.mercatorZfromAltitude(h[2],this._center.lat),M=l.mercatorZfromAltitude(g[2],this._center.lat);return new l.MercatorCoordinate(l.number(h[0],g[0],v)/this.worldSize,l.number(h[1],g[1],v)/this.worldSize,l.number(w,M,v))}pointCoordinate(a,h=this._centerAltitude){return this.projection.pointCoordinate(this,a.x,a.y,h)}pointCoordinate3D(a){if(!this.elevation)return this.pointCoordinate(a);let h=this.projection.pointCoordinate3D(this,a.x,a.y);if(h)return new l.MercatorCoordinate(h[0],h[1],h[2]);let g=0,v=this.horizonLineFromTop();if(a.y>v)return this.pointCoordinate(a);const w=.02*v,M=a.clone();for(let P=0;P<10&&v-g>w;P++){M.y=l.number(g,v,.66);const z=this.projection.pointCoordinate3D(this,M.x,M.y);z?(v=M.y,h=z):g=M.y}return h?new l.MercatorCoordinate(h[0],h[1],h[2]):this.pointCoordinate(a)}isPointAboveHorizon(a){return this.projection.isPointAboveHorizon(this,a)}isPointOnSurface(a){if(a.y<0||a.y>this.height||a.x<0||a.x>this.width)return!1;if(this.elevation||this.zoom>=l.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(a);const h=this.pointCoordinate(a);return h.y>=0&&h.y<=1}_coordinatePoint(a,h){const g=h&&this.elevation?this.elevation.getAtPointOrZero(a,this._centerAltitude):this._centerAltitude,v=[a.x*this.worldSize,a.y*this.worldSize,g+a.toAltitude(),1];return l.transformMat4$1(v,v,this.pixelMatrix),v[3]>0?new l.Point(v[0]/v[3],v[1]/v[3]):new l.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:a,left:h}=this._edgeInsets,g=this.height-this._edgeInsets.bottom,v=this.width-this._edgeInsets.right,w=this.pointLocation3D(new l.Point(h,a)),M=this.pointLocation3D(new l.Point(v,a)),P=this.pointLocation3D(new l.Point(v,g)),z=this.pointLocation3D(new l.Point(h,g));let $=Math.min(w.lng,M.lng,P.lng,z.lng),B=Math.max(w.lng,M.lng,P.lng,z.lng),W=Math.min(w.lat,M.lat,P.lat,z.lat),ee=Math.max(w.lat,M.lat,P.lat,z.lat);const oe=Math.pow(2,-this.zoom)/16*270,ae=this.projection.name==="globe"?1:4,se=(le,Z,ie,de,pe)=>{const Ce=(le+ie)/2,Me=(Z+de)/2,Ae=new l.Point(Ce,Me),{lng:Ne,lat:ze}=this.pointLocation3D(Ae),Ue=Math.max(0,$-Ne,W-ze,Ne-B,ze-ee);$=Math.min($,Ne),B=Math.max(B,Ne),W=Math.min(W,ze),ee=Math.max(ee,ze),(pe<ae||Ue>oe)&&(se(le,Z,Ce,Me,pe+1),se(Ce,Me,ie,de,pe+1))};if(se(h,a,v,a,1),se(v,a,v,g,1),se(v,g,h,g,1),se(h,g,h,a,1),this.projection.name==="globe"){const[le,Z]=l.polesInViewport(this);le?(ee=90,B=180,$=-180):Z&&(W=-90,B=180,$=-180)}return new l.LngLatBounds(new l.LngLat($,W),new l.LngLat(B,ee))}_getBoundsRectangular(a,h){const{top:g,left:v}=this._edgeInsets,w=this.height-this._edgeInsets.bottom,M=this.width-this._edgeInsets.right,P=new l.Point(v,g),z=new l.Point(M,g),$=new l.Point(M,w),B=new l.Point(v,w);let W=this.pointCoordinate(P,a),ee=this.pointCoordinate(z,a);const oe=this.pointCoordinate($,h),ae=this.pointCoordinate(B,h),se=(le,Z)=>(Z.y-le.y)/(Z.x-le.x);return W.y>1&&ee.y>=0?W=new l.MercatorCoordinate((1-ae.y)/se(ae,W)+ae.x,1):W.y<0&&ee.y<=1&&(W=new l.MercatorCoordinate(-ae.y/se(ae,W)+ae.x,0)),ee.y>1&&W.y>=0?ee=new l.MercatorCoordinate((1-oe.y)/se(oe,ee)+oe.x,1):ee.y<0&&W.y<=1&&(ee=new l.MercatorCoordinate(-oe.y/se(oe,ee)+oe.x,0)),new l.LngLatBounds().extend(this.coordinateLocation(W)).extend(this.coordinateLocation(ee)).extend(this.coordinateLocation(ae)).extend(this.coordinateLocation(oe))}_getBoundsRectangularTerrain(){const a=this.elevation;if(!a.visibleDemTiles.length||a.isUsingMockSource())return this._getBoundsRectangular(0,0);const h=a.visibleDemTiles.reduce((g,v)=>{if(v.dem){const w=v.dem.tree;g.min=Math.min(g.min,w.minimums[0]),g.max=Math.max(g.max,w.maximums[0])}return g},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(h.min*a.exaggeration(),h.max*a.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(a=!0){const h=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,g=this.height/2-h*(1-this._horizonShift);return a?Math.max(0,g):g}getMaxBounds(){return this.maxBounds}setMaxBounds(a){this.maxBounds=a,this.minLat=-l.MAX_MERCATOR_LATITUDE,this.maxLat=l.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,a&&(this.minLat=a.getSouth(),this.maxLat=a.getNorth(),this.minLng=a.getWest(),this.maxLng=a.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=l.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=l.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=l.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=l.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(a,h){return this.projection.createTileMatrix(this,h,a)}calculateDistanceTileData(a){const h=a.key,g=this._distanceTileDataCache;if(g[h])return g[h];const v=a.canonical,w=1/this.height,M=this.cameraWorldSize,P=M/this.zoomScale(v.z),z=(v.x+Math.pow(2,v.z)*a.wrap)*P,$=v.y*P,B=this.point;B.x*=M/this.worldSize,B.y*=M/this.worldSize;const W=this.angle,ee=Math.sin(-W),oe=-Math.cos(-W);return g[h]={bearing:[ee,oe],center:[(B.x-z)*w,(B.y-$)*w],scale:P/l.EXTENT*w},g[h]}calculateFogTileMatrix(a){const h=a.key,g=this._fogTileMatrixCache;if(g[h])return g[h];const v=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,a);return l.multiply(v,this.worldToFogMatrix,v),g[h]=new Float32Array(v),g[h]}calculateProjMatrix(a,h=!1){const g=a.key,v=h?this._alignedProjMatrixCache:this._projMatrixCache;if(v[g])return v[g];const w=this.calculatePosMatrix(a,this.worldSize);return l.multiply(w,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:h?this.alignedProjMatrix:this.projMatrix,w),v[g]=new Float32Array(w),v[g]}calculatePixelsToTileUnitsMatrix(a){const h=a.tileID.key,g=this._pixelsToTileUnitsCache;if(g[h])return g[h];const v=function(w,M){const{scale:P}=w.tileTransform,z=P*l.EXTENT/(w.tileSize*Math.pow(2,M.zoom-w.tileID.overscaledZ+w.tileID.canonical.z));return $=new Float32Array(4),ee=(B=M.inverseAdjustmentMatrix)[1],oe=B[2],ae=B[3],le=(W=[z,z])[1],$[0]=B[0]*(se=W[0]),$[1]=ee*se,$[2]=oe*le,$[3]=ae*le,$;var $,B,W,ee,oe,ae,se,le}(a,this);return g[h]=v,g[h]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const a=1/this.worldSize,h=l.fromScaling([],[a,a,a]);return l.multiply(h,h,this.globeMatrix),h}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const a=this._elevation;this._updateCameraState();const h=l.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,g=this._computeCameraPosition(h),v=this._camera.forward(),w=l.mercatorZfromAltitude(1,this._center.lat);g[2]/=w,v[2]/=w,l.normalize(v,v);const M=a.raycast(g,v,a.exaggeration());if(M){const P=l.scaleAndAdd([],g,v,M),z=new l.MercatorCoordinate(P[0],P[1],l.mercatorZfromAltitude(P[2],l.latFromMercatorY(P[1]))),$=(z.z+l.length([z.x-g[0],z.y-g[1],z.z-g[2]*w]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ($),this._centerAltitude=z.toAltitude(),this._center=this.coordinateLocation(z),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(a=!1){if(!this._elevation)return;const h=this._elevation,g=l.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,v=this._computeCameraPosition(g),w=h.getAtPointOrZero(new l.MercatorCoordinate(...v)),M=this.pixelsPerMeter/this.worldSize*w,P=this._minimumHeightOverTerrain(),z=v[2]-M;if(z<=P)if(z<0||a){const $=this.locationCoordinate(this._center,this._centerAltitude),B=[v[0],v[1],$.z-v[2]],W=l.length(B);B[2]-=(P-z)/this._pixelsPerMercatorPixel;const ee=l.length(B);if(ee===0)return;l.scale$2(B,B,W/ee*this._pixelsPerMercatorPixel),this._camera.position=[v[0],v[1],$.z*this._pixelsPerMercatorPixel-B[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const a=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||a){const ee=this.center;return ee.lat=l.clamp(ee.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!a)&&(ee.lng=l.clamp(ee.lng,this.minLng,this.maxLng)),this.center=ee,void(this._constraining=!1)}const h=this._unmodified,{x:g,y:v}=this.point;let w=0,M=g,P=v;const z=this.width/2,$=this.height/2,B=this.worldMinY*this.scale,W=this.worldMaxY*this.scale;if(v-$<B&&(P=B+$),v+$>W&&(P=W-$),W-B<this.height&&(w=Math.max(w,this.height/(W-B)),P=(W+B)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const ee=this.worldMinX*this.scale,oe=this.worldMaxX*this.scale,ae=this.worldSize/2-(ee+oe)/2;M=(g+ae+this.worldSize)%this.worldSize-ae,M-z<ee&&(M=ee+z),M+z>oe&&(M=oe-z),oe-ee<this.width&&(w=Math.max(w,this.width/(oe-ee)),M=(oe+ee)/2)}M===g&&P===v||(this.center=this.unproject(new l.Point(M,P))),w&&(this.zoom+=this.scaleZoom(w)),this._constrainCamera(),this._unmodified=h,this._constraining=!1}_minZoomForBounds(){let a=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(a=Math.max(a,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),a}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const a=this.centerOffset,h=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=l.mercatorZfromAltitude(1,this.center.lat)/l.mercatorZfromAltitude(1,l.GLOBE_SCALE_MATCH_LATITUDE));const g=Hu(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,g),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const v=this.projection.zAxisUnit==="meters"?h:1,w=this._camera.getWorldToCamera(this.worldSize,v),M=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);M[8]=2*-a.x/this.width,M[9]=2*a.y/this.height;let P=l.mul([],M,w);if(this.projection.isReprojectedInTileSpace){const Me=this.locationCoordinate(this.center),Ae=l.identity([]);l.translate(Ae,Ae,[Me.x*this.worldSize,Me.y*this.worldSize,0]),l.multiply(Ae,Ae,hl(this)),l.translate(Ae,Ae,[-Me.x*this.worldSize,-Me.y*this.worldSize,0]),l.multiply(P,P,Ae),this.inverseAdjustmentMatrix=function(Ne){const ze=hl(Ne,!0);return ve([],[ze[0],ze[1],ze[4],ze[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=l.scale([],P,[this.worldSize,this.worldSize,this.worldSize/v,1]),this.projMatrix=P,this.invProjMatrix=l.invert(new Float64Array(16),this.projMatrix);const z=l.invert([],M);this.frustumCorners=l.FrustumCorners.fromInvProjectionMatrix(z,this.horizonLineFromTop(),this.height);const $=new Float32Array(16);l.identity($),l.scale($,$,[1,-1,1]),l.rotateX($,$,this._pitch),l.rotateZ($,$,this.angle);const B=l.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),W=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;B[8]=2*-a.x/this.width,B[9]=2*(a.y+W)/this.height,this.skyboxMatrix=l.multiply($,B,$);const ee=this.point,oe=ee.x,ae=ee.y,se=this.width%2/2,le=this.height%2/2,Z=Math.cos(this.angle),ie=Math.sin(this.angle),de=oe-Math.round(oe)+Z*se+ie*le,pe=ae-Math.round(ae)+Z*le+ie*se,Ce=new Float64Array(P);if(l.translate(Ce,Ce,[de>.5?de-1:de,pe>.5?pe-1:pe,0]),this.alignedProjMatrix=Ce,P=l.create(),l.scale(P,P,[this.width/2,-this.height/2,1]),l.translate(P,P,[1,-1,0]),this.labelPlaneMatrix=P,P=l.create(),l.scale(P,P,[1,-1,1]),l.translate(P,P,[-1,-1,0]),l.scale(P,P,[2/this.width,2/this.height,1]),this.glCoordMatrix=P,this.pixelMatrix=l.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},P=l.invert(new Float64Array(16),this.pixelMatrix),!P)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=P,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=l.calculateGlobeMatrix(this);const Me=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=l.transformMat4(Me,Me,w),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=P;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const a=this.cameraWorldSizeForFog,h=this.cameraPixelsPerMeter,g=this._camera.position,v=1/this.height/this._pixelsPerMercatorPixel,w=[a,a,h];l.scale$2(w,w,v),l.scale$2(g,g,-1),l.multiply$2(g,g,w);const M=l.create();l.translate(M,M,g),l.scale(M,M,w),this.mercatorFogMatrix=M,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(a,h,v)}_computeCameraPosition(a){const h=(a=a||this.pixelsPerMeter)/this.pixelsPerMeter,g=this._camera.forward(),v=this.point,w=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*h-a/this.worldSize*this._centerAltitude;return[v.x/this.worldSize-g[0]*w,v.y/this.worldSize-g[1]*w,a/this.worldSize*this._centerAltitude-g[2]*w]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(a){const h=this._maxCameraBoundsDistance()*Math.cos(this._pitch),g=this._camera.position[2],v=a[2];let w=1;this.projection.wrap&&(this.center=this.center.wrap()),v>0&&(w=Math.min((h-g)/v,1)),this._camera.position=l.scaleAndAdd([],this._camera.position,a,w),this._updateStateFromCamera()}_updateStateFromCamera(){const a=this._camera.position,h=this._camera.forward(),{pitch:g,bearing:v}=this._camera.getPitchBearing(),w=l.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,M=this._mercatorZfromZoom(this._maxZoom)*Math.cos(l.degToRad(this._maxPitch)),P=Math.max((a[2]-w)/Math.cos(g),M),z=this._zoomFromMercatorZ(P);l.scaleAndAdd(a,a,h,P),this._pitch=l.clamp(g,l.degToRad(this.minPitch),l.degToRad(this.maxPitch)),this.angle=l.wrap(v,-Math.PI,Math.PI),this._setZoom(l.clamp(z,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new l.MercatorCoordinate(a[0],a[1],a[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(a){return Math.pow(2,a)*this.tileSize}_mercatorZfromZoom(a){return this.cameraToCenterDistance/this._worldSizeFromZoom(a)}_minimumHeightOverTerrain(){const a=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(a)}_zoomFromMercatorZ(a){return this.scaleZoom(this.cameraToCenterDistance/(a*this.tileSize))}zoomFromMercatorZAdjusted(a){let h=0,g=l.GLOBE_ZOOM_THRESHOLD_MAX,v=0,w=1/0;for(;g-h>1e-6&&g>h;){const M=h+.5*(g-h),P=this.tileSize*Math.pow(2,M),z=this.getCameraToCenterDistance(this.projection,M,P),$=this.scaleZoom(z/(a*this.tileSize)),B=Math.abs(M-$);B<w&&(w=B,v=M),M<$?h=M:g=M}return v}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(l.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(a,h){const g=Math.min(a.x,h.x),v=Math.max(a.x,h.x),w=Math.min(a.y,h.y),M=Math.max(a.y,h.y);if(w<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const P=[new l.Point(g,w),new l.Point(v,M),new l.Point(g,M),new l.Point(v,w)],z=this.renderWorldCopies?-3:0,$=this.renderWorldCopies?4:1;for(const B of P){const W=this.pointRayIntersection(B);if(W.t<0)return!0;const ee=this.rayIntersectionCoordinate(W);if(ee.x<z||ee.y<0||ee.x>$||ee.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+l.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new l.Point(0,0),new l.Point(this.width,this.height))}zoomDeltaToMovement(a,h){const g=l.length(l.sub([],this._camera.position,a)),v=this._zoomFromMercatorZ(g)+h;return g-this._mercatorZfromZoom(v)}getCameraPoint(){if(this.projection.name==="globe"){const a=function([h,g,v],w){const M=[h,g,v,1];l.transformMat4$1(M,M,w);const P=M[3]=Math.max(M[3],1e-6);return M[0]/=P,M[1]/=P,M[2]/=P,M}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new l.Point(a[0],a[1])}{const a=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.Point(0,a))}}getCameraToCenterDistance(a,h=this.zoom,g=this.worldSize){const v=Hu(a,h,this.width,this.height,1024),w=a.pixelSpaceConversion(this.center.lat,g,v);return .5/Math.tan(.5*this._fov)*this.height*w}getWorldToCameraMatrix(){const a=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&l.multiply(a,a,this.globeMatrix),a}}function pl(f,a){let h=!1,g=null;const v=()=>{g=null,h&&(f(),g=setTimeout(v,a),h=!1)};return()=>(h=!0,g||v(),g)}class xp{constructor(a){this._hashName=a&&encodeURIComponent(a),l.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=pl(this._updateHashUnthrottled.bind(this),300)}addTo(a){return this._map=a,l.window.addEventListener("hashchange",this._onHashChange,!1),a.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),l.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const a=this._map;if(!a)return"";const h=Ic(a);if(this._hashName){const g=this._hashName;let v=!1;const w=l.window.location.hash.slice(1).split("&").map(M=>{const P=M.split("=")[0];return P===g?(v=!0,`${P}=${h}`):M}).filter(M=>M);return v||w.push(`${g}=${h}`),`#${w.join("&")}`}return`#${h}`}_getCurrentHash(){const a=l.window.location.hash.replace("#","");if(this._hashName){let h;return a.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(h=g)}),(h&&h[1]||"").split("/")}return a.split("/")}_onHashChange(){const a=this._map;if(!a)return!1;const h=this._getCurrentHash();if(h.length>=3&&!h.some(g=>isNaN(g))){const g=a.dragRotate.isEnabled()&&a.touchZoomRotate.isEnabled()?+(h[3]||0):a.getBearing();return a.jumpTo({center:[+h[2],+h[1]],zoom:+h[0],bearing:g,pitch:+(h[4]||0)}),!0}return!1}_updateHashUnthrottled(){const a=l.window.location.href.replace(/(#.+)?$/,this.getHashString());l.window.history.replaceState(l.window.history.state,null,a)}}function Ic(f,a){const h=f.getCenter(),g=Math.round(100*f.getZoom())/100,v=Math.ceil((g*Math.LN2+Math.log(512/360/.5))/Math.LN10),w=Math.pow(10,v),M=Math.round(h.lng*w)/w,P=Math.round(h.lat*w)/w,z=f.getBearing(),$=f.getPitch();let B=a?`/${M}/${P}/${g}`:`${g}/${P}/${M}`;return(z||$)&&(B+="/"+Math.round(10*z)/10),$&&(B+=`/${Math.round($)}`),B}const Dc={linearity:.3,easing:l.bezier(0,0,.3,1)},Zu=l.extend({deceleration:2500,maxSpeed:1400},Dc),Xu=l.extend({deceleration:20,maxSpeed:1400},Dc),Pt=l.extend({deceleration:1e3,maxSpeed:360},Dc),vo=l.extend({deceleration:1e3,maxSpeed:90},Dc);class fg{constructor(a){this._map=a,this.clear()}clear(){this._inertiaBuffer=[]}record(a){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.exported.now(),settings:a})}_drainInertiaBuffer(){const a=this._inertiaBuffer,h=l.exported.now();for(;a.length>0&&h-a[0].time>160;)a.shift()}_onMoveEnd(a){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const h={zoom:0,bearing:0,pitch:0,pan:new l.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:w}of this._inertiaBuffer)h.zoom+=w.zoomDelta||0,h.bearing+=w.bearingDelta||0,h.pitch+=w.pitchDelta||0,w.panDelta&&h.pan._add(w.panDelta),w.around&&(h.around=w.around),w.pinchAround&&(h.pinchAround=w.pinchAround);const g=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,v={};if(h.pan.mag()){const w=Nc(h.pan.mag(),g,l.extend({},Zu,a||{}));v.offset=h.pan.mult(w.amount/h.pan.mag()),v.center=this._map.transform.center,zc(v,w)}if(h.zoom){const w=Nc(h.zoom,g,Xu);v.zoom=this._map.transform.zoom+w.amount,zc(v,w)}if(h.bearing){const w=Nc(h.bearing,g,Pt);v.bearing=this._map.transform.bearing+l.clamp(w.amount,-179,179),zc(v,w)}if(h.pitch){const w=Nc(h.pitch,g,vo);v.pitch=this._map.transform.pitch+w.amount,zc(v,w)}if(v.zoom||v.bearing){const w=h.pinchAround===void 0?h.around:h.pinchAround;v.around=w?this._map.unproject(w):this._map.getCenter()}return this.clear(),v.noMoveStart=!0,v}}function zc(f,a){(!f.duration||f.duration<a.duration)&&(f.duration=a.duration,f.easing=a.easing)}function Nc(f,a,h){const{maxSpeed:g,linearity:v,deceleration:w}=h,M=l.clamp(f*v/(a/1e3),-g,g),P=Math.abs(M)/(w*v);return{easing:h.easing,duration:1e3*P,amount:M*(P/2)}}class Hr extends l.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,h,g,v={}){const w=re(h.getCanvasContainer(),g),M=h.unproject(w);super(a,l.extend({point:w,lngLat:M,originalEvent:g},v)),this._defaultPrevented=!1,this.target=h}}class Lc extends l.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,h,g){const v=a==="touchend"?g.changedTouches:g.touches,w=fe(h.getCanvasContainer(),v),M=w.map(z=>h.unproject(z)),P=w.reduce((z,$,B,W)=>z.add($.div(W.length)),new l.Point(0,0));super(a,{points:w,point:P,lngLats:M,lngLat:h.unproject(P),originalEvent:g}),this._defaultPrevented=!1}}class Ku extends l.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,h,g){super(a,{originalEvent:g}),this._defaultPrevented=!1}}class _p{constructor(a,h){this._map=a,this._clickTolerance=h.clickTolerance}reset(){this._mousedownPos=void 0}wheel(a){return this._firePreventable(new Ku(a.type,this._map,a))}mousedown(a,h){return this._mousedownPos=h,this._firePreventable(new Hr(a.type,this._map,a))}mouseup(a){this._map.fire(new Hr(a.type,this._map,a))}preclick(a){const h=l.extend({},a);h.type="preclick",this._map.fire(new Hr(h.type,this._map,h))}click(a,h){this._mousedownPos&&this._mousedownPos.dist(h)>=this._clickTolerance||(this.preclick(a),this._map.fire(new Hr(a.type,this._map,a)))}dblclick(a){return this._firePreventable(new Hr(a.type,this._map,a))}mouseover(a){this._map.fire(new Hr(a.type,this._map,a))}mouseout(a){this._map.fire(new Hr(a.type,this._map,a))}touchstart(a){return this._firePreventable(new Lc(a.type,this._map,a))}touchmove(a){this._map.fire(new Lc(a.type,this._map,a))}touchend(a){this._map.fire(new Lc(a.type,this._map,a))}touchcancel(a){this._map.fire(new Lc(a.type,this._map,a))}_firePreventable(a){if(this._map.fire(a),a.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Yu{constructor(a){this._map=a}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(a){this._map.fire(new Hr(a.type,this._map,a))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Hr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(a){this._delayContextMenu?this._contextMenuEvent=a:this._map.fire(new Hr(a.type,this._map,a)),this._map.listens("contextmenu")&&a.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class mg{constructor(a,h){this._map=a,this._el=a.getCanvasContainer(),this._container=a.getContainer(),this._clickTolerance=h.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(a,h){this.isEnabled()&&a.shiftKey&&a.button===0&&(R(),this._startPos=this._lastPos=h,this._active=!0)}mousemoveWindow(a,h){if(!this._active)return;const g=h,v=this._startPos,w=this._lastPos;if(!v||!w||w.equals(g)||!this._box&&g.dist(v)<this._clickTolerance)return;this._lastPos=g,this._box||(this._box=D("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",a));const M=Math.min(v.x,g.x),P=Math.max(v.x,g.x),z=Math.min(v.y,g.y),$=Math.max(v.y,g.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${M}px,${z}px)`,this._box.style.width=P-M+"px",this._box.style.height=$-z+"px")})}mouseupWindow(a,h){if(!this._active)return;const g=this._startPos,v=h;if(g&&a.button===0){if(this.reset(),J(),g.x!==v.x||g.y!==v.y)return this._map.fire(new l.Event("boxzoomend",{originalEvent:a})),{cameraAnimation:w=>w.fitScreenCoordinates(g,v,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",a)}}keydown(a){this._active&&a.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",a))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),F(),delete this._startPos,delete this._lastPos}_fireEvent(a,h){return this._map.fire(new l.Event(a,{originalEvent:h}))}}function Ju(f,a){const h={};for(let g=0;g<f.length;g++)h[f[g].identifier]=a[g];return h}class fl{constructor(a){this.reset(),this.numTouches=a.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(a,h,g){(this.centroid||g.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=a.timeStamp),g.length===this.numTouches&&(this.centroid=function(v){const w=new l.Point(0,0);for(const M of v)w._add(M);return w.div(v.length)}(h),this.touches=Ju(g,h)))}touchmove(a,h,g){if(this.aborted||!this.centroid)return;const v=Ju(g,h);for(const w in this.touches){const M=v[w];(!M||M.dist(this.touches[w])>30)&&(this.aborted=!0)}}touchend(a,h,g){if((!this.centroid||a.timeStamp-this.startTime>500)&&(this.aborted=!0),g.length===0){const v=!this.aborted&&this.centroid;if(this.reset(),v)return v}}}class vp{constructor(a){this.singleTap=new fl(a),this.numTaps=a.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(a,h,g){this.singleTap.touchstart(a,h,g)}touchmove(a,h,g){this.singleTap.touchmove(a,h,g)}touchend(a,h,g){const v=this.singleTap.touchend(a,h,g);if(v){const w=a.timeStamp-this.lastTime<500,M=!this.lastTap||this.lastTap.dist(v)<30;if(w&&M||this.reset(),this.count++,this.lastTime=a.timeStamp,this.lastTap=v,this.count===this.numTaps)return this.reset(),v}}}class Bx{constructor(){this._zoomIn=new vp({numTouches:1,numTaps:2}),this._zoomOut=new vp({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(a,h,g){this._zoomIn.touchstart(a,h,g),this._zoomOut.touchstart(a,h,g)}touchmove(a,h,g){this._zoomIn.touchmove(a,h,g),this._zoomOut.touchmove(a,h,g)}touchend(a,h,g){const v=this._zoomIn.touchend(a,h,g),w=this._zoomOut.touchend(a,h,g);return v?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:M=>M.easeTo({duration:300,zoom:M.getZoom()+1,around:M.unproject(v)},{originalEvent:a})}):w?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:M=>M.easeTo({duration:300,zoom:M.getZoom()-1,around:M.unproject(w)},{originalEvent:a})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const gg={0:1,2:2};class ml{constructor(a){this.reset(),this._clickTolerance=a.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(a,h){return!1}_move(a,h){return{}}mousedown(a,h){if(this._lastPoint)return;const g=be(a);this._correctButton(a,g)&&(this._lastPoint=h,this._eventButton=g)}mousemoveWindow(a,h){const g=this._lastPoint;if(g){if(a.preventDefault(),this._eventButton!=null&&function(v,w){const M=gg[w];return v.buttons===void 0||(v.buttons&M)!==M}(a,this._eventButton))this.reset();else if(this._moved||!(h.dist(g)<this._clickTolerance))return this._moved=!0,this._lastPoint=h,this._move(g,h)}}mouseupWindow(a){this._lastPoint&&be(a)===this._eventButton&&(this._moved&&J(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class bp extends ml{mousedown(a,h){super.mousedown(a,h),this._lastPoint&&(this._active=!0)}_correctButton(a,h){return h===0&&!a.ctrlKey}_move(a,h){return{around:h,panDelta:h.sub(a)}}}class wp extends ml{_correctButton(a,h){return h===0&&a.ctrlKey||h===2}_move(a,h){const g=.8*(h.x-a.x);if(g)return this._active=!0,{bearingDelta:g}}contextmenu(a){a.preventDefault()}}class Ep extends ml{_correctButton(a,h){return h===0&&a.ctrlKey||h===2}_move(a,h){const g=-.5*(h.y-a.y);if(g)return this._active=!0,{pitchDelta:g}}contextmenu(a){a.preventDefault()}}class Qu{constructor(a,h){this._map=a,this._el=a.getCanvasContainer(),this._minTouches=1,this._clickTolerance=h.clickTolerance||1,this.reset(),l.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new l.Point(0,0)}touchstart(a,h,g){return this._calculateTransform(a,h,g)}touchmove(a,h,g){if(this._active&&!(g.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(g.length===1&&!l.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return a.cancelable&&a.preventDefault(),this._calculateTransform(a,h,g)}}touchend(a,h,g){this._calculateTransform(a,h,g),this._active&&g.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(a,h,g){g.length>0&&(this._active=!0);const v=Ju(g,h),w=new l.Point(0,0),M=new l.Point(0,0);let P=0;for(const $ in v){const B=v[$],W=this._touches[$];W&&(w._add(B),M._add(B.sub(W)),P++,v[$]=B)}if(this._touches=v,P<this._minTouches||!M.mag())return;const z=M.div(P);return this._sum._add(z),this._sum.mag()<this._clickTolerance?void 0:{around:w.div(P),panDelta:z}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=D("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class Fc{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(a){}_move(a,h,g){return{}}touchstart(a,h,g){this._firstTwoTouches||g.length<2||(this._firstTwoTouches=[g[0].identifier,g[1].identifier],this._start([h[0],h[1]]))}touchmove(a,h,g){const v=this._firstTwoTouches;if(!v)return;a.preventDefault();const[w,M]=v,P=Rc(g,h,w),z=Rc(g,h,M);if(!P||!z)return;const $=this._aroundCenter?null:P.add(z).div(2);return this._move([P,z],$,a)}touchend(a,h,g){if(!this._firstTwoTouches)return;const[v,w]=this._firstTwoTouches,M=Rc(g,h,v),P=Rc(g,h,w);M&&P||(this._active&&J(),this.reset())}touchcancel(){this.reset()}enable(a){this._enabled=!0,this._aroundCenter=!!a&&a.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Rc(f,a,h){for(let g=0;g<f.length;g++)if(f[g].identifier===h)return a[g]}function Tp(f,a){return Math.log(f/a)/Math.LN2}class yg extends Fc{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(a){this._startDistance=this._distance=a[0].dist(a[1])}_move(a,h){const g=this._distance;if(this._distance=a[0].dist(a[1]),this._active||!(Math.abs(Tp(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Tp(this._distance,g),pinchAround:h}}}function Sp(f,a){return 180*f.angleWith(a)/Math.PI}class xg extends Fc{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(a){this._startVector=this._vector=a[0].sub(a[1]),this._minDiameter=a[0].dist(a[1])}_move(a,h){const g=this._vector;if(this._vector=a[0].sub(a[1]),g&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Sp(this._vector,g),pinchAround:h}}_isBelowThreshold(a){this._minDiameter=Math.min(this._minDiameter,a.mag());const h=25/(Math.PI*this._minDiameter)*360,g=this._startVector;if(!g)return!1;const v=Sp(a,g);return Math.abs(v)<h}}function Ws(f){return Math.abs(f.y)>Math.abs(f.x)}class _g extends Fc{constructor(a){super(),this._map=a}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(a){this._lastPoints=a,Ws(a[0].sub(a[1]))&&(this._valid=!1)}_move(a,h,g){const v=this._lastPoints;if(!v)return;const w=a[0].sub(v[0]),M=a[1].sub(v[1]);return this._map._cooperativeGestures&&!l.isFullscreen()&&g.touches.length<3||(this._valid=this.gestureBeginsVertically(w,M,g.timeStamp),!this._valid)?void 0:(this._lastPoints=a,this._active=!0,{pitchDelta:(w.y+M.y)/2*-.5})}gestureBeginsVertically(a,h,g){if(this._valid!==void 0)return this._valid;const v=a.mag()>=2,w=h.mag()>=2;if(!v&&!w)return;if(!v||!w)return this._firstMove==null&&(this._firstMove=g),g-this._firstMove<100&&void 0;const M=a.y>0==h.y>0;return Ws(a)&&Ws(h)&&M}}const vg={panStep:100,bearingStep:15,pitchStep:10};class $x{constructor(){const a=vg;this._panStep=a.panStep,this._bearingStep=a.bearingStep,this._pitchStep=a.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(a){if(a.altKey||a.ctrlKey||a.metaKey)return;let h=0,g=0,v=0,w=0,M=0;switch(a.keyCode){case 61:case 107:case 171:case 187:h=1;break;case 189:case 109:case 173:h=-1;break;case 37:a.shiftKey?g=-1:(a.preventDefault(),w=-1);break;case 39:a.shiftKey?g=1:(a.preventDefault(),w=1);break;case 38:a.shiftKey?v=1:(a.preventDefault(),M=-1);break;case 40:a.shiftKey?v=-1:(a.preventDefault(),M=1);break;default:return}return this._rotationDisabled&&(g=0,v=0),{cameraAnimation:P=>{const z=P.getZoom();P.easeTo({duration:300,easeId:"keyboardHandler",easing:bg,zoom:h?Math.round(z)+h*(a.shiftKey?2:1):z,bearing:P.getBearing()+g*this._bearingStep,pitch:P.getPitch()+v*this._pitchStep,offset:[-w*this._panStep,-M*this._panStep],center:P.getCenter()},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function bg(f){return f*(2-f)}const Cp=4.000244140625;class wg{constructor(a,h){this._map=a,this._el=a.getCanvasContainer(),this._handler=h,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,l.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(a){this._defaultZoomRate=a}setWheelZoomRate(a){this._wheelZoomRate=a}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(a){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!a&&a.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(a){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(a.ctrlKey||a.metaKey||this.isZooming()||l.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let h=a.deltaMode===l.window.WheelEvent.DOM_DELTA_LINE?40*a.deltaY:a.deltaY;const g=l.exported.now(),v=g-(this._lastWheelEventTime||0);this._lastWheelEventTime=g,h!==0&&h%Cp==0?this._type="wheel":h!==0&&Math.abs(h)<4?this._type="trackpad":v>400?(this._type=null,this._lastValue=h,this._timeout=setTimeout(this._onTimeout,40,a)):this._type||(this._type=Math.abs(v*h)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,h+=this._lastValue)),a.shiftKey&&h&&(h/=4),this._type&&(this._lastWheelEvent=a,this._delta-=h,this._active||this._start(a)),a.preventDefault()}_onTimeout(a){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(a)}_start(a){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const h=re(this._el,a);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:h,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const a=this._map.transform;this._type==="wheel"&&a.projection.wrap&&(a._center.lng>=180||a._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const h=()=>a._terrainEnabled()&&this._aroundCoord?a.computeZoomRelativeTo(this._aroundCoord):a.zoom;if(this._delta!==0){const z=this._type==="wheel"&&Math.abs(this._delta)>Cp?this._wheelZoomRate:this._defaultZoomRate;let $=2/(1+Math.exp(-Math.abs(this._delta*z)));this._delta<0&&$!==0&&($=1/$);const B=h(),W=Math.pow(2,B),ee=typeof this._targetZoom=="number"?a.zoomScale(this._targetZoom):W;this._targetZoom=Math.min(a.maxZoom,Math.max(a.minZoom,a.scaleZoom(ee*$))),this._type==="wheel"&&(this._startZoom=B,this._easing=this._smoothOutEasing(200)),this._delta=0}const g=typeof this._targetZoom=="number"?this._targetZoom:h(),v=this._startZoom,w=this._easing;let M,P=!1;if(this._type==="wheel"&&v&&w){const z=Math.min((l.exported.now()-this._lastWheelEventTime)/200,1),$=w(z);M=l.number(v,g,$),z<1?this._frameId||(this._frameId=!0):P=!0}else M=g,P=!0;return this._active=!0,P&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!P,zoomDelta:M-h(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(a){let h=l.ease;if(this._prevEase){const g=this._prevEase,v=(l.exported.now()-g.start)/g.duration,w=g.easing(v+.01)-g.easing(v),M=.27/Math.sqrt(w*w+1e-4)*.01,P=Math.sqrt(.0729-M*M);h=l.bezier(M,P,.25,1)}return this._prevEase={start:l.exported.now(),duration:a,easing:h},h}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=D("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(l.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class Eg{constructor(a,h){this._clickZoom=a,this._tapZoom=h}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class oi{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(a,h){return a.preventDefault(),{cameraAnimation:g=>{g.easeTo({duration:300,zoom:g.getZoom()+(a.shiftKey?-1:1),around:g.unproject(h)},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class jx{constructor(){this._tap=new vp({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(a,h,g){this._swipePoint||(this._tapTime&&a.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?g.length>0&&(this._swipePoint=h[0],this._swipeTouch=g[0].identifier):this._tap.touchstart(a,h,g))}touchmove(a,h,g){if(this._tapTime){if(this._swipePoint){if(g[0].identifier!==this._swipeTouch)return;const v=h[0],w=v.y-this._swipePoint.y;return this._swipePoint=v,a.preventDefault(),this._active=!0,{zoomDelta:w/128}}}else this._tap.touchmove(a,h,g)}touchend(a,h,g){this._tapTime?this._swipePoint&&g.length===0&&this.reset():this._tap.touchend(a,h,g)&&(this._tapTime=a.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Tg{constructor(a,h,g){this._el=a,this._mousePan=h,this._touchPan=g}enable(a){this._inertiaOptions=a||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Ux{constructor(a,h,g){this._pitchWithRotate=a.pitchWithRotate,this._mouseRotate=h,this._mousePitch=g}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Vx{constructor(a,h,g,v){this._el=a,this._touchZoom=h,this._touchRotate=g,this._tapDragZoom=v,this._rotationDisabled=!1,this._enabled=!0}enable(a){this._touchZoom.enable(a),this._rotationDisabled||this._touchRotate.enable(a),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const no=f=>f.zoom||f.drag||f.pitch||f.rotate;class Sg extends l.Event{}class Gx{constructor(){this.constants=[1,1,.01],this.radius=0}setup(a,h){const g=l.sub([],h,a);this.radius=l.length(g[2]<0?l.div([],g,this.constants):[g[0],g[1],0])}projectRay(a){l.div(a,a,this.constants),l.normalize(a,a),l.mul$1(a,a,this.constants);const h=l.scale$2([],a,this.radius);if(h[2]>0){const g=l.scale$2([],[0,0,1],l.dot(h,[0,0,1])),v=l.scale$2([],l.normalize([],[h[0],h[1],0]),this.radius),w=l.add([],h,l.scale$2([],l.sub([],l.add([],v,g),h),2));h[0]=w[0],h[1]=w[1]}return h}}function bo(f){return f.panDelta&&f.panDelta.mag()||f.zoomDelta||f.bearingDelta||f.pitchDelta}class Zo{constructor(a,h){this._map=a,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new fg(a),this._bearingSnap=h.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Gx,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(h),l.bindAll(["handleEvent","handleWindowEvent"],this);const g=this._el;this._listeners=[[g,"touchstart",{passive:!0}],[g,"touchmove",{passive:!1}],[g,"touchend",void 0],[g,"touchcancel",void 0],[g,"mousedown",void 0],[g,"mousemove",void 0],[g,"mouseup",void 0],[l.window.document,"mousemove",{capture:!0}],[l.window.document,"mouseup",void 0],[g,"mouseover",void 0],[g,"mouseout",void 0],[g,"dblclick",void 0],[g,"click",void 0],[g,"keydown",{capture:!1}],[g,"keyup",void 0],[g,"wheel",{passive:!1}],[g,"contextmenu",void 0],[l.window,"blur",void 0]];for(const[v,w,M]of this._listeners)v.addEventListener(w,v===l.window.document?this.handleWindowEvent:this.handleEvent,M)}destroy(){for(const[a,h,g]of this._listeners)a.removeEventListener(h,a===l.window.document?this.handleWindowEvent:this.handleEvent,g)}_addDefaultHandlers(a){const h=this._map,g=h.getCanvasContainer();this._add("mapEvent",new _p(h,a));const v=h.boxZoom=new mg(h,a);this._add("boxZoom",v);const w=new Bx,M=new oi;h.doubleClickZoom=new Eg(M,w),this._add("tapZoom",w),this._add("clickZoom",M);const P=new jx;this._add("tapDragZoom",P);const z=h.touchPitch=new _g(h);this._add("touchPitch",z);const $=new wp(a),B=new Ep(a);h.dragRotate=new Ux(a,$,B),this._add("mouseRotate",$,["mousePitch"]),this._add("mousePitch",B,["mouseRotate"]);const W=new bp(a),ee=new Qu(h,a);h.dragPan=new Tg(g,W,ee),this._add("mousePan",W),this._add("touchPan",ee,["touchZoom","touchRotate"]);const oe=new xg,ae=new yg;h.touchZoomRotate=new Vx(g,ae,oe,P),this._add("touchRotate",oe,["touchPan","touchZoom"]),this._add("touchZoom",ae,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Yu(h));const se=h.scrollZoom=new wg(h,this);this._add("scrollZoom",se,["mousePan"]);const le=h.keyboard=new $x;this._add("keyboard",le);for(const Z of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])a.interactive&&a[Z]&&h[Z].enable(a[Z])}_add(a,h,g){this._handlers.push({handlerName:a,handler:h,allowed:g}),this._handlersById[a]=h}stop(a){if(!this._updatingCamera){for(const{handler:h}of this._handlers)h.reset();this._inertia.clear(),this._fireEvents({},{},a),this._changes=[]}}isActive(){for(const{handler:a}of this._handlers)if(a.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!no(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(a,h,g){for(const v in a)if(v!==g&&(!h||h.indexOf(v)<0))return!0;return!1}handleWindowEvent(a){this.handleEvent(a,`${a.type}Window`)}_getMapTouches(a){const h=[];for(const g of a)this._el.contains(g.target)&&h.push(g);return h}handleEvent(a,h){this._updatingCamera=!0;const g=a.type==="renderFrame",v=g?void 0:a,w={needsRenderFrame:!1},M={},P={},z=a.touches?this._getMapTouches(a.touches):void 0,$=z?fe(this._el,z):g?void 0:re(this._el,a);for(const{handlerName:ee,handler:oe,allowed:ae}of this._handlers){if(!oe.isEnabled())continue;let se;this._blockedByActive(P,ae,ee)?oe.reset():oe[h||a.type]&&(se=oe[h||a.type](a,$,z),this.mergeHandlerResult(w,M,se,ee,v),se&&se.needsRenderFrame&&this._triggerRenderFrame()),(se||oe.isActive())&&(P[ee]=oe)}const B={};for(const ee in this._previousActiveHandlers)P[ee]||(B[ee]=v);this._previousActiveHandlers=P,(Object.keys(B).length||bo(w))&&(this._changes.push([w,M,B]),this._triggerRenderFrame()),(Object.keys(P).length||bo(w))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:W}=w;W&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],W(this._map))}mergeHandlerResult(a,h,g,v,w){if(!g)return;l.extend(a,g);const M={handlerName:v,originalEvent:g.originalEvent||w};g.zoomDelta!==void 0&&(h.zoom=M),g.panDelta!==void 0&&(h.drag=M),g.pitchDelta!==void 0&&(h.pitch=M),g.bearingDelta!==void 0&&(h.rotate=M)}_applyChanges(){const a={},h={},g={};for(const[v,w,M]of this._changes)v.panDelta&&(a.panDelta=(a.panDelta||new l.Point(0,0))._add(v.panDelta)),v.zoomDelta&&(a.zoomDelta=(a.zoomDelta||0)+v.zoomDelta),v.bearingDelta&&(a.bearingDelta=(a.bearingDelta||0)+v.bearingDelta),v.pitchDelta&&(a.pitchDelta=(a.pitchDelta||0)+v.pitchDelta),v.around!==void 0&&(a.around=v.around),v.aroundCoord!==void 0&&(a.aroundCoord=v.aroundCoord),v.pinchAround!==void 0&&(a.pinchAround=v.pinchAround),v.noInertia&&(a.noInertia=v.noInertia),l.extend(h,w),l.extend(g,M);this._updateMapTransform(a,h,g),this._changes=[]}_updateMapTransform(a,h,g){const v=this._map,w=v.transform,M=ie=>[ie.x,ie.y,ie.z];if((ie=>{const de=this._eventsInProgress.drag;return de&&!this._handlersById[de.handlerName].isActive()})()&&!bo(a)){const ie=w.zoom;w.cameraElevationReference="sea",w.recenterOnTerrain(),w.cameraElevationReference="ground",ie!==w.zoom&&this._map._update(!0)}if(w._isCameraConstrained&&v._stop(!0),!bo(a))return void this._fireEvents(h,g,!0);let{panDelta:P,zoomDelta:z,bearingDelta:$,pitchDelta:B,around:W,aroundCoord:ee,pinchAround:oe}=a;w._isCameraConstrained&&(z>0&&(z=0),w._isCameraConstrained=!1),oe!==void 0&&(W=oe),(z||(ie=>h[ie]&&!this._eventsInProgress[ie])("drag"))&&W&&(this._dragOrigin=M(w.pointCoordinate3D(W)),this._trackingEllipsoid.setup(w._camera.position,this._dragOrigin)),w.cameraElevationReference="sea",v._stop(!0),W=W||v.transform.centerPoint,$&&(w.bearing+=$),B&&(w.pitch+=B),w._updateCameraState();const ae=[0,0,0];if(P)if(w.projection.name==="mercator"){const ie=this._trackingEllipsoid.projectRay(w.screenPointToMercatorRay(W).dir),de=this._trackingEllipsoid.projectRay(w.screenPointToMercatorRay(W.sub(P)).dir);ae[0]=de[0]-ie[0],ae[1]=de[1]-ie[1]}else{const ie=w.pointCoordinate(W);if(w.projection.name==="globe"){P=P.rotate(-w.angle);const de=w._pixelsPerMercatorPixel/w.worldSize;ae[0]=-P.x*l.mercatorScale(l.latFromMercatorY(ie.y))*de,ae[1]=-P.y*l.mercatorScale(w.center.lat)*de}else{const de=w.pointCoordinate(W.sub(P));ie&&de&&(ae[0]=de.x-ie.x,ae[1]=de.y-ie.y)}}const se=w.zoom,le=[0,0,0];if(z){const ie=M(ee||w.pointCoordinate3D(W)),de={dir:l.normalize([],l.sub([],ie,w._camera.position))};if(de.dir[2]<0){const pe=w.zoomDeltaToMovement(ie,z);l.scale$2(le,de.dir,pe)}}const Z=l.add(ae,ae,le);w._translateCameraConstrained(Z),z&&Math.abs(w.zoom-se)>1e-4&&w.recenterOnTerrain(),w.cameraElevationReference="ground",this._map._update(),a.noInertia||this._inertia.record(a),this._fireEvents(h,g,!0)}_fireEvents(a,h,g){const v=no(this._eventsInProgress),w=no(a),M={};for(const B in a){const{originalEvent:W}=a[B];this._eventsInProgress[B]||(M[`${B}start`]=W),this._eventsInProgress[B]=a[B]}!v&&w&&this._fireEvent("movestart",w.originalEvent);for(const B in M)this._fireEvent(B,M[B]);w&&this._fireEvent("move",w.originalEvent);for(const B in a){const{originalEvent:W}=a[B];this._fireEvent(B,W)}const P={};let z;for(const B in this._eventsInProgress){const{handlerName:W,originalEvent:ee}=this._eventsInProgress[B];this._handlersById[W].isActive()||(delete this._eventsInProgress[B],z=h[W]||ee,P[`${B}end`]=z)}for(const B in P)this._fireEvent(B,P[B]);const $=no(this._eventsInProgress);if(g&&(v||w)&&!$){this._updatingCamera=!0;const B=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),W=ee=>ee!==0&&-this._bearingSnap<ee&&ee<this._bearingSnap;B?(W(B.bearing||this._map.getBearing())&&(B.bearing=0),this._map.easeTo(B,{originalEvent:z})):(this._map.fire(new l.Event("moveend",{originalEvent:z})),W(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(a,h){this._map.fire(new l.Event(a,h?{originalEvent:h}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(a=>{this._frameId=void 0,this.handleEvent(new Sg("renderFrame",{timeStamp:a})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const wa="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class eh extends l.Evented{constructor(a,h){super(),this._moving=!1,this._zooming=!1,this.transform=a,this._bearingSnap=h.bearingSnap,this._respectPrefersReducedMotion=h.respectPrefersReducedMotion!==!1,l.bindAll(["_renderFrameCallback"],this)}getCenter(){return new l.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(a,h){return this.jumpTo({center:a},h)}panBy(a,h,g){return a=l.Point.convert(a).mult(-1),this.panTo(this.transform.center,l.extend({offset:a},h),g)}panTo(a,h,g){return this.easeTo(l.extend({center:a},h),g)}getZoom(){return this.transform.zoom}setZoom(a,h){return this.jumpTo({zoom:a},h),this}zoomTo(a,h,g){return this.easeTo(l.extend({zoom:a},h),g)}zoomIn(a,h){return this.zoomTo(this.getZoom()+1,a,h),this}zoomOut(a,h){return this.zoomTo(this.getZoom()-1,a,h),this}getBearing(){return this.transform.bearing}setBearing(a,h){return this.jumpTo({bearing:a},h),this}getPadding(){return this.transform.padding}setPadding(a,h){return this.jumpTo({padding:a},h),this}rotateTo(a,h,g){return this.easeTo(l.extend({bearing:a},h),g)}resetNorth(a,h){return this.rotateTo(0,l.extend({duration:1e3},a),h),this}resetNorthPitch(a,h){return this.easeTo(l.extend({bearing:0,pitch:0,duration:1e3},a),h),this}snapToNorth(a,h){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,h):this}getPitch(){return this.transform.pitch}setPitch(a,h){return this.jumpTo({pitch:a},h),this}cameraForBounds(a,h){a=l.LngLatBounds.convert(a);const g=h&&h.bearing||0,v=h&&h.pitch||0,w=a.getNorthWest(),M=a.getSouthEast();return this._cameraForBounds(this.transform,w,M,g,v,h)}_extendCameraOptions(a){const h={top:0,bottom:0,right:0,left:0};if(typeof(a=l.extend({padding:h,offset:[0,0],maxZoom:this.transform.maxZoom},a)).padding=="number"){const g=a.padding;a.padding={top:g,bottom:g,right:g,left:g}}return a.padding=l.extend(h,a.padding),a}_minimumAABBFrustumDistance(a,h){const g=h.max[0]-h.min[0],v=h.max[1]-h.min[1];return g/v>a.aspect?g/(2*Math.tan(.5*a.fovX)*a.aspect):v/(2*Math.tan(.5*a.fovY)*a.aspect)}_cameraForBoundsOnGlobe(a,h,g,v,w,M){const P=a.clone(),z=this._extendCameraOptions(M);P.bearing=v,P.pitch=w;const $=l.LngLat.convert(h),B=l.LngLat.convert(g),W=.5*($.lat+B.lat),ee=.5*($.lng+B.lng),oe=l.latLngToECEF(W,ee),ae=l.normalize([],oe),se=l.normalize([],l.cross([],ae,[0,1,0])),le=l.cross([],se,ae),Z=[se[0],se[1],se[2],0,le[0],le[1],le[2],0,ae[0],ae[1],ae[2],0,0,0,0,1],ie=[oe,l.latLngToECEF($.lat,$.lng),l.latLngToECEF(B.lat,$.lng),l.latLngToECEF(B.lat,B.lng),l.latLngToECEF($.lat,B.lng),l.latLngToECEF(W,$.lng),l.latLngToECEF(W,B.lng),l.latLngToECEF($.lat,ee),l.latLngToECEF(B.lat,ee)];let de=l.Aabb.fromPoints(ie.map(st=>[l.dot(se,st),l.dot(le,st),l.dot(ae,st)]));const pe=l.transformMat4([],de.center,Z);l.squaredLength(pe)===0&&l.set(pe,0,0,1),l.normalize(pe,pe),l.scale$2(pe,pe,l.GLOBE_RADIUS),P.center=l.ecefToLatLng(pe);const Ce=P.getWorldToCameraMatrix(),Me=l.invert(new Float64Array(16),Ce);de=l.Aabb.applyTransform(de,l.multiply([],Ce,Z)),l.transformMat4(pe,pe,Ce);const Ae=.5*(de.max[2]-de.min[2]),Ne=this._minimumAABBFrustumDistance(P,de),ze=l.scale$2([],[0,0,1],Ae),Ue=l.add(ze,pe,ze),ct=Ne+(P.pitch===0?0:l.distance(pe,Ue)),Be=P.globeCenterInViewSpace,nt=l.sub([],pe,[Be[0],Be[1],Be[2]]);l.normalize(nt,nt),l.scale$2(nt,nt,ct);const He=l.add([],pe,nt);l.transformMat4(He,He,Me);const lt=l.earthRadius/l.GLOBE_RADIUS,je=l.length(He),tt=l.mercatorZfromAltitude(Math.max(je*lt-l.earthRadius,Number.EPSILON),0),ht=Math.min(P.zoomFromMercatorZAdjusted(tt),z.maxZoom);return ht>.5*(l.GLOBE_ZOOM_THRESHOLD_MIN+l.GLOBE_ZOOM_THRESHOLD_MAX)?(P.setProjection({name:"mercator"}),P.zoom=ht,this._cameraForBounds(P,h,g,v,w,M)):{center:P.center,zoom:ht,bearing:v,pitch:w}}queryTerrainElevation(a,h){const g=this.transform.elevation;return g?(h=l.extend({},{exaggerated:!0},h),g.getAtPoint(l.MercatorCoordinate.fromLngLat(a),null,h.exaggerated)):null}_cameraForBounds(a,h,g,v,w,M){if(a.projection.name==="globe")return this._cameraForBoundsOnGlobe(a,h,g,v,w,M);const P=a.clone(),z=this._extendCameraOptions(M),$=P.padding;P.bearing=v,P.pitch=w;const B=l.LngLat.convert(h),W=l.LngLat.convert(g),ee=new l.LngLat(B.lng,W.lat),oe=new l.LngLat(W.lng,B.lat),ae=P.project(B),se=P.project(W),le=this.queryTerrainElevation(B),Z=this.queryTerrainElevation(W),ie=this.queryTerrainElevation(ee),de=this.queryTerrainElevation(oe),pe=[[ae.x,ae.y,Math.min(le||0,Z||0,ie||0,de||0)],[se.x,se.y,Math.max(le||0,Z||0,ie||0,de||0)]];let Ce=l.Aabb.fromPoints(pe);const Me=P.getWorldToCameraMatrix(),Ae=l.invert(new Float64Array(16),Me);Ce=l.Aabb.applyTransform(Ce,Me);const Ne=l.sub([],Ce.max,Ce.min),ze=$.left||0,Ue=$.right||0,ct=$.bottom||0,Be=$.top||0,{left:nt,right:He,top:lt,bottom:je}=z.padding,tt=.5*(ze+Ue),ht=.5*(Be+ct),st=Math.min(P.scaleZoom(P.scale*Math.min((P.width-(ze+Ue+nt+He))/Ne[0],(P.height-(ct+Be+je+lt))/Ne[1])),z.maxZoom),dt=P.scale/P.zoomScale(st);Ce=new l.Aabb([Ce.min[0]-(nt+tt)*dt,Ce.min[1]-(je+ht)*dt,Ce.min[2]],[Ce.max[0]+(He+tt)*dt,Ce.max[1]+(lt+ht)*dt,Ce.max[2]]);const Vt=.5*Ne[2],Qt=this._minimumAABBFrustumDistance(P,Ce),Nt=[0,0,1,0];l.transformMat4$1(Nt,Nt,Me),l.normalize$2(Nt,Nt);const Xt=l.scale$2([],Nt,Qt+Vt),gn=l.add([],Ce.center,Xt),pn=(typeof z.offset.x=="number"&&typeof z.offset.y=="number"?new l.Point(z.offset.x,z.offset.y):l.Point.convert(z.offset)).rotate(-l.degToRad(v));Ce.center[0]-=pn.x*dt,Ce.center[1]+=pn.y*dt,l.transformMat4(Ce.center,Ce.center,Ae),l.transformMat4(gn,gn,Ae);const $t=[Ce.center[0],Ce.center[1],gn[2]*P.pixelsPerMeter];l.scale$2($t,$t,1/P.worldSize);const Dn=l.lngFromMercatorX($t[0]),Ln=l.latFromMercatorY($t[1]),Fn=Math.min(P._zoomFromMercatorZ($t[2]),z.maxZoom),Rn=new l.LngLat(Dn,Ln);return P.mercatorFromTransition&&Fn<.5*(l.GLOBE_ZOOM_THRESHOLD_MIN+l.GLOBE_ZOOM_THRESHOLD_MAX)?(P.setProjection({name:"globe"}),P.zoom=Fn,this._cameraForBounds(P,h,g,v,w,M)):{center:Rn,zoom:Fn,bearing:v,pitch:w}}fitBounds(a,h,g){const v=this.cameraForBounds(a,h);return this._fitInternal(v,h,g)}fitScreenCoordinates(a,h,g,v,w){const M=l.Point.convert(a),P=l.Point.convert(h),z=new l.Point(Math.min(M.x,P.x),Math.min(M.y,P.y)),$=new l.Point(Math.max(M.x,P.x),Math.max(M.y,P.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(M,P))return this;const B=this.transform.pointLocation3D(z),W=this.transform.pointLocation3D($),ee=this.transform.pointLocation3D(new l.Point(z.x,$.y)),oe=this.transform.pointLocation3D(new l.Point($.x,z.y)),ae=[Math.min(B.lng,W.lng,ee.lng,oe.lng),Math.min(B.lat,W.lat,ee.lat,oe.lat)],se=[Math.max(B.lng,W.lng,ee.lng,oe.lng),Math.max(B.lat,W.lat,ee.lat,oe.lat)],le=v&&v.pitch?v.pitch:this.getPitch(),Z=this._cameraForBounds(this.transform,ae,se,g,le,v);return this._fitInternal(Z,v,w)}_fitInternal(a,h,g){return a?(delete(h=l.extend(a,h)).padding,h.linear?this.easeTo(h,g):this.flyTo(h,g)):this}jumpTo(a,h){this.stop();const g=a.preloadOnly?this.transform.clone():this.transform;let v=!1,w=!1,M=!1;return"zoom"in a&&g.zoom!==+a.zoom&&(v=!0,g.zoom=+a.zoom),a.center!==void 0&&(g.center=l.LngLat.convert(a.center)),"bearing"in a&&g.bearing!==+a.bearing&&(w=!0,g.bearing=+a.bearing),"pitch"in a&&g.pitch!==+a.pitch&&(M=!0,g.pitch=+a.pitch),a.padding==null||g.isPaddingEqual(a.padding)||(g.padding=a.padding),a.preloadOnly?(this._preloadTiles(g),this):(this.fire(new l.Event("movestart",h)).fire(new l.Event("move",h)),v&&this.fire(new l.Event("zoomstart",h)).fire(new l.Event("zoom",h)).fire(new l.Event("zoomend",h)),w&&this.fire(new l.Event("rotatestart",h)).fire(new l.Event("rotate",h)).fire(new l.Event("rotateend",h)),M&&this.fire(new l.Event("pitchstart",h)).fire(new l.Event("pitch",h)).fire(new l.Event("pitchend",h)),this.fire(new l.Event("moveend",h)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||l.warnOnce(wa),this.transform.getFreeCameraOptions()}setFreeCameraOptions(a,h){const g=this.transform;if(!g.projection.supportsFreeCamera)return l.warnOnce(wa),this;this.stop();const v=g.zoom,w=g.pitch,M=g.bearing;g.setFreeCameraOptions(a);const P=v!==g.zoom,z=w!==g.pitch,$=M!==g.bearing;return this.fire(new l.Event("movestart",h)).fire(new l.Event("move",h)),P&&this.fire(new l.Event("zoomstart",h)).fire(new l.Event("zoom",h)).fire(new l.Event("zoomend",h)),$&&this.fire(new l.Event("rotatestart",h)).fire(new l.Event("rotate",h)).fire(new l.Event("rotateend",h)),z&&this.fire(new l.Event("pitchstart",h)).fire(new l.Event("pitch",h)).fire(new l.Event("pitchend",h)),this.fire(new l.Event("moveend",h)),this}easeTo(a,h){this._stop(!1,a.easeId),((a=l.extend({offset:[0,0],duration:500,easing:l.ease},a)).animate===!1||this._prefersReducedMotion(a))&&(a.duration=0);const g=this.transform,v=this.getZoom(),w=this.getBearing(),M=this.getPitch(),P=this.getPadding(),z="zoom"in a?+a.zoom:v,$="bearing"in a?this._normalizeBearing(a.bearing,w):w,B="pitch"in a?+a.pitch:M,W="padding"in a?a.padding:g.padding,ee=l.Point.convert(a.offset);let oe,ae,se;if(g.projection.name==="globe"){const ze=l.MercatorCoordinate.fromLngLat(g.center),Ue=ee.rotate(-g.angle);ze.x+=Ue.x/g.worldSize,ze.y+=Ue.y/g.worldSize;const ct=ze.toLngLat(),Be=l.LngLat.convert(a.center||ct);this._normalizeCenter(Be),oe=g.centerPoint.add(Ue),ae=new l.Point(ze.x,ze.y).mult(g.worldSize),se=new l.Point(l.mercatorXfromLng(Be.lng),l.mercatorYfromLat(Be.lat)).mult(g.worldSize).sub(ae)}else{oe=g.centerPoint.add(ee);const ze=g.pointLocation(oe),Ue=l.LngLat.convert(a.center||ze);this._normalizeCenter(Ue),ae=g.project(ze),se=g.project(Ue).sub(ae)}const le=g.zoomScale(z-v);let Z,ie;a.around&&(Z=l.LngLat.convert(a.around),ie=g.locationPoint(Z));const de=this._zooming||z!==v,pe=this._rotating||w!==$,Ce=this._pitching||B!==M,Me=!g.isPaddingEqual(W),Ae=ze=>Ue=>{if(de&&(ze.zoom=l.number(v,z,Ue)),pe&&(ze.bearing=l.number(w,$,Ue)),Ce&&(ze.pitch=l.number(M,B,Ue)),Me&&(ze.interpolatePadding(P,W,Ue),oe=ze.centerPoint.add(ee)),Z)ze.setLocationAtPoint(Z,ie);else{const ct=ze.zoomScale(ze.zoom-v),Be=z>v?Math.min(2,le):Math.max(.5,le),nt=Math.pow(Be,1-Ue),He=ze.unproject(ae.add(se.mult(Ue*nt)).mult(ct));ze.setLocationAtPoint(ze.renderWorldCopies?He.wrap():He,oe)}return a.preloadOnly||this._fireMoveEvents(h),ze};if(a.preloadOnly){const ze=this._emulate(Ae,a.duration,g);return this._preloadTiles(ze),this}const Ne={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=de,this._rotating=pe,this._pitching=Ce,this._padding=Me,this._easeId=a.easeId,this._prepareEase(h,a.noMoveStart,Ne),this._ease(Ae(g),ze=>{g.recenterOnTerrain(),this._afterEase(h,ze)},a),this}_prepareEase(a,h,g={}){this._moving=!0,this.transform.cameraElevationReference="sea",h||g.moving||this.fire(new l.Event("movestart",a)),this._zooming&&!g.zooming&&this.fire(new l.Event("zoomstart",a)),this._rotating&&!g.rotating&&this.fire(new l.Event("rotatestart",a)),this._pitching&&!g.pitching&&this.fire(new l.Event("pitchstart",a))}_fireMoveEvents(a){this.fire(new l.Event("move",a)),this._zooming&&this.fire(new l.Event("zoom",a)),this._rotating&&this.fire(new l.Event("rotate",a)),this._pitching&&this.fire(new l.Event("pitch",a))}_afterEase(a,h){if(this._easeId&&h&&this._easeId===h)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const g=this._zooming,v=this._rotating,w=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,g&&this.fire(new l.Event("zoomend",a)),v&&this.fire(new l.Event("rotateend",a)),w&&this.fire(new l.Event("pitchend",a)),this.fire(new l.Event("moveend",a))}flyTo(a,h){if(this._prefersReducedMotion(a)){const st=l.pick(a,["center","zoom","bearing","pitch","around"]);return this.jumpTo(st,h)}this.stop(),a=l.extend({offset:[0,0],speed:1.2,curve:1.42,easing:l.ease},a);const g=this.transform,v=this.getZoom(),w=this.getBearing(),M=this.getPitch(),P=this.getPadding(),z="zoom"in a?l.clamp(+a.zoom,g.minZoom,g.maxZoom):v,$="bearing"in a?this._normalizeBearing(a.bearing,w):w,B="pitch"in a?+a.pitch:M,W="padding"in a?a.padding:g.padding,ee=g.zoomScale(z-v),oe=l.Point.convert(a.offset);let ae=g.centerPoint.add(oe);const se=g.pointLocation(ae),le=l.LngLat.convert(a.center||se);this._normalizeCenter(le);const Z=g.project(se),ie=g.project(le).sub(Z);let de=a.curve;const pe=Math.max(g.width,g.height),Ce=pe/ee,Me=ie.mag();if("minZoom"in a){const st=l.clamp(Math.min(a.minZoom,v,z),g.minZoom,g.maxZoom),dt=pe/g.zoomScale(st-v);de=Math.sqrt(dt/Me*2)}const Ae=de*de;function Ne(st){const dt=(Ce*Ce-pe*pe+(st?-1:1)*Ae*Ae*Me*Me)/(2*(st?Ce:pe)*Ae*Me);return Math.log(Math.sqrt(dt*dt+1)-dt)}function ze(st){return(Math.exp(st)-Math.exp(-st))/2}function Ue(st){return(Math.exp(st)+Math.exp(-st))/2}const ct=Ne(0);let Be=function(st){return Ue(ct)/Ue(ct+de*st)},nt=function(st){return pe*((Ue(ct)*(ze(dt=ct+de*st)/Ue(dt))-ze(ct))/Ae)/Me;var dt},He=(Ne(1)-ct)/de;if(Math.abs(Me)<1e-6||!isFinite(He)){if(Math.abs(pe-Ce)<1e-6)return this.easeTo(a,h);const st=Ce<pe?-1:1;He=Math.abs(Math.log(Ce/pe))/de,nt=function(){return 0},Be=function(dt){return Math.exp(st*de*dt)}}a.duration="duration"in a?+a.duration:1e3*He/("screenSpeed"in a?+a.screenSpeed/de:+a.speed),a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0);const lt=w!==$,je=B!==M,tt=!g.isPaddingEqual(W),ht=st=>dt=>{const Vt=dt*He,Qt=1/Be(Vt);st.zoom=dt===1?z:v+st.scaleZoom(Qt),lt&&(st.bearing=l.number(w,$,dt)),je&&(st.pitch=l.number(M,B,dt)),tt&&(st.interpolatePadding(P,W,dt),ae=st.centerPoint.add(oe));const Nt=dt===1?le:st.unproject(Z.add(ie.mult(nt(Vt))).mult(Qt));return st.setLocationAtPoint(st.renderWorldCopies?Nt.wrap():Nt,ae),st._updateCameraOnTerrain(),a.preloadOnly||this._fireMoveEvents(h),st};if(a.preloadOnly){const st=this._emulate(ht,a.duration,g);return this._preloadTiles(st),this}return this._zooming=!0,this._rotating=lt,this._pitching=je,this._padding=tt,this._prepareEase(h,!1),this._ease(ht(g),()=>this._afterEase(h),a),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(a,h){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const g=this._onEaseEnd;this._onEaseEnd=void 0,g.call(this,h)}if(!a){const g=this.handlers;g&&g.stop(!1)}return this}_ease(a,h,g){g.animate===!1||g.duration===0?(a(1),h()):(this._easeStart=l.exported.now(),this._easeOptions=g,this._onEaseFrame=a,this._onEaseEnd=h,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const a=Math.min((l.exported.now()-this._easeStart)/this._easeOptions.duration,1),h=this._onEaseFrame;h&&h(this._easeOptions.easing(a)),a<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(a,h){a=l.wrap(a,-180,180);const g=Math.abs(a-h);return Math.abs(a-360-h)<g&&(a-=360),Math.abs(a+360-h)<g&&(a+=360),a}_normalizeCenter(a){const h=this.transform;if(!h.renderWorldCopies||h.maxBounds)return;const g=a.lng-h.center.lng;a.lng+=g>180?-360:g<-180?360:0}_prefersReducedMotion(a){return this._respectPrefersReducedMotion&&l.exported.prefersReducedMotion&&!(a&&a.essential)}_emulate(a,h,g){const v=Math.ceil(15*h/1e3),w=[],M=a(g.clone());for(let P=0;P<=v;P++){const z=M(P/v);w.push(z.clone())}return w}}class It{constructor(a={}){this.options=a,l.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(a){const h=this.options&&this.options.compact;return this._map=a,this._container=D("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=D("button","mapboxgl-ctrl-attrib-button",this._container),D("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=D("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),h&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),h===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(a,h){const g=this._map._getUIString(`AttributionControl.${h}`);a.setAttribute("aria-label",g),a.removeAttribute("title"),a.firstElementChild&&a.firstElementChild.setAttribute("title",g)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let a=this._editLink;a||(a=this._editLink=this._container.querySelector(".mapbox-improve-map"));const h=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||l.config.ACCESS_TOKEN}];if(a){const g=h.reduce((v,w,M)=>(w.value&&(v+=`${w.key}=${w.value}${M<h.length-1?"&":""}`),v),"?");a.href=`${l.config.FEEDBACK_URL}/${g}#${Ic(this._map,!0)}`,a.rel="noopener nofollow",this._setElementTitle(a,"MapFeedback")}}_updateData(a){!a||a.sourceDataType!=="metadata"&&a.sourceDataType!=="visibility"&&a.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let a=[];if(this._map.style.stylesheet){const v=this._map.style.stylesheet;this.styleOwner=v.owner,this.styleId=v.id}const h=this._map.style._sourceCaches;for(const v in h){const w=h[v];if(w.used){const M=w.getSource();M.attribution&&a.indexOf(M.attribution)<0&&a.push(M.attribution)}}a.sort((v,w)=>v.length-w.length),a=a.filter((v,w)=>{for(let M=w+1;M<a.length;M++)if(a[M].indexOf(v)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?a=[...this.options.customAttribution,...a]:a.unshift(this.options.customAttribution));const g=a.join(" | ");g!==this._attribHTML&&(this._attribHTML=g,a.length?(this._innerContainer.innerHTML=g,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Ap{constructor(){l.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(a){this._map=a,this._container=D("div","mapboxgl-ctrl");const h=D("a","mapboxgl-ctrl-logo");return h.target="_blank",h.rel="noopener nofollow",h.href="https://www.mapbox.com/",h.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),h.setAttribute("rel","noopener nofollow"),this._container.appendChild(h),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(a){a&&a.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const a=this._map.style._sourceCaches;if(Object.entries(a).length===0)return!0;for(const h in a){const g=a[h].getSource();if(g.hasOwnProperty("mapbox_logo")&&!g.mapbox_logo)return!1}return!0}_updateCompact(){const a=this._container.children;if(a.length){const h=a[0];this._map.getCanvasContainer().offsetWidth<250?h.classList.add("mapboxgl-compact"):h.classList.remove("mapboxgl-compact")}}}class Mp{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(a){const h=++this._id;return this._queue.push({callback:a,id:h,cancelled:!1}),h}remove(a){const h=this._currentlyRunning,g=h?this._queue.concat(h):this._queue;for(const v of g)if(v.id===a)return void(v.cancelled=!0)}run(a=0){const h=this._currentlyRunning=this._queue;this._queue=[];for(const g of h)if(!g.cancelled&&(g.callback(a),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function gl(f,a,h){if(f=new l.LngLat(f.lng,f.lat),a){const g=new l.LngLat(f.lng-360,f.lat),v=new l.LngLat(f.lng+360,f.lat),w=360*Math.ceil(Math.abs(f.lng-h.center.lng)/360),M=h.locationPoint(f).distSqr(a),P=a.x<0||a.y<0||a.x>h.width||a.y>h.height;h.locationPoint(g).distSqr(a)<M&&(P||Math.abs(g.lng-h.center.lng)<w)?f=g:h.locationPoint(v).distSqr(a)<M&&(P||Math.abs(v.lng-h.center.lng)<w)&&(f=v)}for(;Math.abs(f.lng-h.center.lng)>180;){const g=h.locationPoint(f);if(g.x>=0&&g.y>=0&&g.x<=h.width&&g.y<=h.height)break;f.lng>h.center.lng?f.lng-=360:f.lng+=360}return f}const Ea={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class Mt extends l.Evented{constructor(a,h){if(super(),(a instanceof l.window.HTMLElement||h)&&(a=l.extend({element:a},h)),l.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=a&&a.anchor||"center",this._color=a&&a.color||"#3FB1CE",this._scale=a&&a.scale||1,this._draggable=a&&a.draggable||!1,this._clickTolerance=a&&a.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=a&&a.rotation||0,this._rotationAlignment=a&&a.rotationAlignment||"auto",this._pitchAlignment=a&&a.pitchAlignment&&a.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=a&&a.occludedOpacity||.2,a&&a.element)this._element=a.element,this._offset=l.Point.convert(a&&a.offset||[0,0]);else{this._defaultMarker=!0,this._element=D("div");const v=41,w=27,M=U("svg",{display:"block",height:v*this._scale+"px",width:w*this._scale+"px",viewBox:`0 0 ${w} ${v}`},this._element),P=U("radialGradient",{id:"shadowGradient"},U("defs",{},M));U("stop",{offset:"10%","stop-opacity":.4},P),U("stop",{offset:"100%","stop-opacity":.05},P),U("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},M),U("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},M),U("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},M),U("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},M),this._offset=l.Point.convert(a&&a.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",v=>{v.preventDefault()}),this._element.addEventListener("mousedown",v=>{v.preventDefault()});const g=this._element.classList;for(const v in Ea)g.remove(`mapboxgl-marker-anchor-${v}`);g.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(a){return a===this._map||(this.remove(),this._map=a,a.getCanvasContainer().appendChild(this._element),a.on("move",this._updateMoving),a.on("moveend",this._update),a.on("remove",this._clearFadeTimer),a._addMarker(this),this.setDraggable(this._draggable),this._update(),a.on("click",this._onMapClick)),this}remove(){const a=this._map;return a&&(a.off("click",this._onMapClick),a.off("move",this._updateMoving),a.off("moveend",this._update),a.off("mousedown",this._addDragHandler),a.off("touchstart",this._addDragHandler),a.off("mouseup",this._onUp),a.off("touchend",this._onUp),a.off("mousemove",this._onMove),a.off("touchmove",this._onMove),a.off("remove",this._clearFadeTimer),a._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(a){return this._lngLat=l.LngLat.convert(a),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(a){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),a){if(!("offset"in a.options)){const v=Math.sqrt(Math.pow(13.5,2)/2);a.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[v,-1*(38.1-13.5+v)],"bottom-right":[-v,-1*(38.1-13.5+v)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=a,a._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(a){const h=a.code,g=a.charCode||a.keyCode;h!=="Space"&&h!=="Enter"&&g!==32&&g!==13||this.togglePopup()}_onMapClick(a){const h=a.originalEvent.target,g=this._element;this._popup&&(h===g||g.contains(h))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const a=this._popup;return a?(a.isOpen()?(a.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(a.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const a=this._map,h=this._pos;if(!a||!h)return!1;const g=a.unproject(h),v=a.getFreeCameraOptions();if(!v.position)return!1;const w=v.position.toLngLat();return w.distanceTo(g)<.9*w.distanceTo(this._lngLat)}_evaluateOpacity(){const a=this._map;if(!a)return;const h=this._pos;if(!h||h.x<0||h.x>a.transform.width||h.y<0||h.y>a.transform.height)return void this._clearFadeTimer();const g=a.unproject(h);let v;a._showingGlobe()&&l.isLngLatBehindGlobe(a.transform,this._lngLat)?v=0:(v=1-a._queryFogOpacity(g),a.transform._terrainEnabled()&&a.getTerrain()&&this._behindTerrain()&&(v*=this._occludedOpacity)),this._element.style.opacity=`${v}`,this._element.style.pointerEvents=v>0?"auto":"none",this._popup&&this._popup._setOpacity(v),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const a=this._pos;if(!a||!this._map)return;const h=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${a.x}px,${a.y}px)
            ${Ea[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${h.x}px,${h.y}px)
        `}_calculateXYTransform(){const a=this._pos,h=this._map,g=this.getPitchAlignment();if(!h||!a||g!=="map")return"";if(!h._showingGlobe()){const z=h.getPitch();return z?`rotateX(${z}deg)`:""}const v=l.radToDeg(l.globeTiltAtLngLat(h.transform,this._lngLat)),w=a.sub(l.globeCenterToScreenPoint(h.transform)),M=Math.abs(w.x)+Math.abs(w.y);if(M===0)return"";const P=v/M;return`rotateX(${-w.y*P}deg) rotateY(${w.x*P}deg)`}_calculateZTransform(){const a=this._pos,h=this._map;if(!h||!a)return"";let g=0;const v=this.getRotationAlignment();if(v==="map")if(h._showingGlobe()){const w=h.project(new l.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),M=h.project(new l.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(w);g=l.radToDeg(Math.atan2(M.y,M.x))-90}else g=-h.getBearing();else if(v==="horizon"){const w=l.smoothstep(4,6,h.getZoom()),M=l.globeCenterToScreenPoint(h.transform);M.y+=w*h.transform.height;const P=a.sub(M),z=l.radToDeg(Math.atan2(P.y,P.x));g=(z>90?z-270:z+90)*(1-w)}return g+=this._rotation,g?`rotateZ(${g}deg)`:""}_update(a){l.window.cancelAnimationFrame(this._updateFrameId);const h=this._map;h&&(h.transform.renderWorldCopies&&(this._lngLat=gl(this._lngLat,this._pos,h.transform)),this._pos=h.project(this._lngLat),a===!0?this._updateFrameId=l.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),h._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(h._showingGlobe()||h.getTerrain()||h.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(a){return this._offset=l.Point.convert(a),this._update(),this}_onMove(a){const h=this._map;if(!h)return;const g=this._pointerdownPos,v=this._positionDelta;if(g&&v){if(!this._isDragging){const w=this._clickTolerance||h._clickTolerance;if(a.point.dist(g)<w)return;this._isDragging=!0}this._pos=a.point.sub(v),this._lngLat=h.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.Event("dragstart"))),this.fire(new l.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const a=this._map;a&&(a.off("mousemove",this._onMove),a.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new l.Event("dragend")),this._state="inactive"}_addDragHandler(a){const h=this._map,g=this._pos;h&&g&&this._element.contains(a.originalEvent.target)&&(a.preventDefault(),this._positionDelta=a.point.sub(g),this._pointerdownPos=a.point,this._state="pending",h.on("mousemove",this._onMove),h.on("touchmove",this._onMove),h.once("mouseup",this._onUp),h.once("touchend",this._onUp))}setDraggable(a){this._draggable=!!a;const h=this._map;return h&&(a?(h.on("mousedown",this._addDragHandler),h.on("touchstart",this._addDragHandler)):(h.off("mousedown",this._addDragHandler),h.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(a){return this._rotation=a||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(a){return this._rotationAlignment=a||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(a){return this._pitchAlignment=a||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(a){return this._occludedOpacity=a||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const kp={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},qx=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Cg(f=new l.Point(0,0),a="bottom"){if(typeof f=="number"){const h=Math.round(Math.sqrt(.5*Math.pow(f,2)));switch(a){case"top":return new l.Point(0,f);case"top-left":return new l.Point(h,h);case"top-right":return new l.Point(-h,h);case"bottom":return new l.Point(0,-f);case"bottom-left":return new l.Point(h,-h);case"bottom-right":return new l.Point(-h,-h);case"left":return new l.Point(f,0);case"right":return new l.Point(-f,0)}return new l.Point(0,0)}return f instanceof l.Point||Array.isArray(f)?l.Point.convert(f):l.Point.convert(f[a]||[0,0])}class Pp{constructor(a){this.jumpTo(a)}getValue(a){if(a<=this._startTime)return this._start;if(a>=this._endTime)return this._end;const h=l.easeCubicInOut((a-this._startTime)/(this._endTime-this._startTime));return this._start*(1-h)+this._end*h}isEasing(a){return a>=this._startTime&&a<=this._endTime}jumpTo(a){this._startTime=-1/0,this._endTime=-1/0,this._start=a,this._end=a}easeTo(a,h,g){this._start=this.getValue(h),this._end=a,this._startTime=h,this._endTime=h+g}}const Ag={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},Mg={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},Hx={showCompass:!0,showZoom:!0,visualizePitch:!1};class Wx{constructor(a,h,g=!1){this._clickTolerance=10,this.element=h,this.mouseRotate=new wp({clickTolerance:a.dragRotate._mouseRotate._clickTolerance}),this.map=a,g&&(this.mousePitch=new Ep({clickTolerance:a.dragRotate._mousePitch._clickTolerance})),l.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),h.addEventListener("mousedown",this.mousedown),h.addEventListener("touchstart",this.touchstart,{passive:!1}),h.addEventListener("touchmove",this.touchmove),h.addEventListener("touchend",this.touchend),h.addEventListener("touchcancel",this.reset)}down(a,h){this.mouseRotate.mousedown(a,h),this.mousePitch&&this.mousePitch.mousedown(a,h),R()}move(a,h){const g=this.map,v=this.mouseRotate.mousemoveWindow(a,h),w=v&&v.bearingDelta;if(w&&g.setBearing(g.getBearing()+w),this.mousePitch){const M=this.mousePitch.mousemoveWindow(a,h),P=M&&M.pitchDelta;P&&g.setPitch(g.getPitch()+P)}}off(){const a=this.element;a.removeEventListener("mousedown",this.mousedown),a.removeEventListener("touchstart",this.touchstart,{passive:!1}),a.removeEventListener("touchmove",this.touchmove),a.removeEventListener("touchend",this.touchend),a.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){F(),l.window.removeEventListener("mousemove",this.mousemove),l.window.removeEventListener("mouseup",this.mouseup)}mousedown(a){this.down(l.extend({},a,{ctrlKey:!0,preventDefault:()=>a.preventDefault()}),re(this.element,a)),l.window.addEventListener("mousemove",this.mousemove),l.window.addEventListener("mouseup",this.mouseup)}mousemove(a){this.move(a,re(this.element,a))}mouseup(a){this.mouseRotate.mouseupWindow(a),this.mousePitch&&this.mousePitch.mouseupWindow(a),this.offTemp()}touchstart(a){a.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=fe(this.element,a.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>a.preventDefault()},this._startPos))}touchmove(a){a.targetTouches.length!==1?this.reset():(this._lastPos=fe(this.element,a.targetTouches)[0],this.move({preventDefault:()=>a.preventDefault()},this._lastPos))}touchend(a){a.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Ip={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Dp={maxWidth:100,unit:"metric"},zp={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},yl={version:l.version,supported:S,setRTLTextPlugin:l.setRTLTextPlugin,getRTLTextPluginStatus:l.getRTLTextPluginStatus,Map:class extends eh{constructor(f){if(l.LivePerformanceUtils.mark(l.PerformanceMarkers.create),(f=l.extend({},Mg,f)).minZoom!=null&&f.maxZoom!=null&&f.minZoom>f.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(f.minPitch!=null&&f.maxPitch!=null&&f.minPitch>f.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(f.minPitch!=null&&f.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(f.maxPitch!=null&&f.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(f.antialias&&l.isSafariWithAntialiasingBug(l.window)&&(f.antialias=!1,l.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new dl(f.minZoom,f.maxZoom,f.minPitch,f.maxPitch,f.renderWorldCopies),f),this._interactive=f.interactive,this._minTileCacheSize=f.minTileCacheSize,this._maxTileCacheSize=f.maxTileCacheSize,this._failIfMajorPerformanceCaveat=f.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=f.preserveDrawingBuffer,this._antialias=f.antialias,this._useWebGL2=f.useWebGL2,this._trackResize=f.trackResize,this._bearingSnap=f.bearingSnap,this._refreshExpiredTiles=f.refreshExpiredTiles,this._fadeDuration=f.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=f.crossSourceCollisions,this._collectResourceTiming=f.collectResourceTiming,this._optimizeForTerrain=f.optimizeForTerrain,this._language=this._parseLanguage(f.language),this._worldview=f.worldview,this._renderTaskQueue=new Mp,this._domRenderTaskQueue=new Mp,this._controls=[],this._markers=[],this._popups=[],this._mapId=l.uniqueId(),this._locale=l.extend({},Ag,f.locale),this._clickTolerance=f.clickTolerance,this._cooperativeGestures=f.cooperativeGestures,this._performanceMetricsCollection=f.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Pp(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new l.RequestManager(f.transformRequest,f.accessToken,f.testMode),this._silenceAuthErrors=!!f.testMode,typeof f.container=="string"){if(this._container=l.window.document.getElementById(f.container),!this._container)throw new Error(`Container '${f.container}' not found.`)}else{if(!(f.container instanceof l.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=f.container}if(this._container.childNodes.length>0&&l.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),f.maxBounds&&this.setMaxBounds(f.maxBounds),l.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),l.window!==void 0&&(l.window.addEventListener("online",this._onWindowOnline,!1),l.window.addEventListener("resize",this._onWindowResize,!1),l.window.addEventListener("orientationchange",this._onWindowResize,!1),l.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),l.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new Zo(this,f),this._localFontFamily=f.localFontFamily,this._localIdeographFontFamily=f.localIdeographFontFamily,f.style&&this.setStyle(f.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),f.projection&&this.setProjection(f.projection),this._hash=f.hash&&new xp(typeof f.hash=="string"&&f.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:f.center,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch}),f.bounds&&(this.resize(),this.fitBounds(f.bounds,l.extend({},f.fitBoundsOptions,{duration:0})))),this.resize(),f.attributionControl&&this.addControl(new It({customAttribution:f.customAttribution})),this._logoControl=new Ap,this.addControl(this._logoControl,f.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",a=>{this._update(a.dataType==="style"),this.fire(new l.Event(`${a.dataType}data`,a))}),this.on("dataloading",a=>{this.fire(new l.Event(`${a.dataType}dataloading`,a))})}_getMapId(){return this._mapId}addControl(f,a){if(a===void 0&&(a=f.getDefaultPosition?f.getDefaultPosition():"top-right"),!f||!f.onAdd)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const h=f.onAdd(this);this._controls.push(f);const g=this._controlPositions[a];return a.indexOf("bottom")!==-1?g.insertBefore(h,g.firstChild):g.appendChild(h),this}removeControl(f){if(!f||!f.onRemove)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const a=this._controls.indexOf(f);return a>-1&&this._controls.splice(a,1),f.onRemove(this),this}hasControl(f){return this._controls.indexOf(f)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(f){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const a=!this._moving;return a&&this.fire(new l.Event("movestart",f)).fire(new l.Event("move",f)),this.fire(new l.Event("resize",f)),a&&this.fire(new l.Event("moveend",f)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(f){return this.transform.setMaxBounds(l.LngLatBounds.convert(f)),this._update()}setMinZoom(f){if((f=f==null?-2:f)>=-2&&f<=this.transform.maxZoom)return this.transform.minZoom=f,this._update(),this.getZoom()<f?this.setZoom(f):this.fire(new l.Event("zoomstart")).fire(new l.Event("zoom")).fire(new l.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(f){if((f=f==null?22:f)>=this.transform.minZoom)return this.transform.maxZoom=f,this._update(),this.getZoom()>f?this.setZoom(f):this.fire(new l.Event("zoomstart")).fire(new l.Event("zoom")).fire(new l.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(f){if((f=f==null?0:f)<0)throw new Error("minPitch must be greater than or equal to 0");if(f>=0&&f<=this.transform.maxPitch)return this.transform.minPitch=f,this._update(),this.getPitch()<f?this.setPitch(f):this.fire(new l.Event("pitchstart")).fire(new l.Event("pitch")).fire(new l.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(f){if((f=f==null?85:f)>85)throw new Error("maxPitch must be less than or equal to 85");if(f>=this.transform.minPitch)return this.transform.maxPitch=f,this._update(),this.getPitch()>f?this.setPitch(f):this.fire(new l.Event("pitchstart")).fire(new l.Event("pitch")).fire(new l.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(f){return this.transform.renderWorldCopies=f,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(f){return f==="auto"?l.window.navigator.language:Array.isArray(f)?f.length===0?void 0:f.map(a=>a==="auto"?l.window.navigator.language:a):f}setLanguage(f){const a=this._parseLanguage(f);if(!this.style||a===this._language)return this;this._language=a,this.style._reloadSources();for(const h of this._controls)h._setLanguage&&h._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(f){return this.style&&f!==this._worldview?(this._worldview=f,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(f){return this._lazyInitEmptyStyle(),f?typeof f=="string"&&(f={name:f}):f=null,this._useExplicitProjection=!!f,this._prioritizeAndUpdateProjection(f,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const f=this.transform,a=f.projection.name;let h;a==="globe"&&f.zoom>=l.GLOBE_ZOOM_THRESHOLD_MAX?(f.setMercatorFromTransition(),h=!0):a==="mercator"&&f.zoom<l.GLOBE_ZOOM_THRESHOLD_MAX&&(f.setProjection({name:"globe"}),h=!0),h&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(f,a){return this._updateProjection(f||a||{name:"mercator"})}_updateProjection(f){let a;if(a=f.name==="globe"&&this.transform.zoom>=l.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(f),this.style.applyProjectionUpdate(),a){this.painter.clearBackgroundTiles();for(const h in this.style._sourceCaches)this.style._sourceCaches[h].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(f){return this.transform.locationPoint3D(l.LngLat.convert(f))}unproject(f){return this.transform.pointLocation3D(l.Point.convert(f))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(f,a,h){if(f==="mouseenter"||f==="mouseover"){let g=!1;const v=M=>{const P=a.filter($=>this.getLayer($)),z=P.length?this.queryRenderedFeatures(M.point,{layers:P}):[];z.length?g||(g=!0,h.call(this,new Hr(f,this,M.originalEvent,{features:z}))):g=!1},w=()=>{g=!1};return{layers:new Set(a),listener:h,delegates:{mousemove:v,mouseout:w}}}if(f==="mouseleave"||f==="mouseout"){let g=!1;const v=M=>{const P=a.filter(z=>this.getLayer(z));(P.length?this.queryRenderedFeatures(M.point,{layers:P}):[]).length?g=!0:g&&(g=!1,h.call(this,new Hr(f,this,M.originalEvent)))},w=M=>{g&&(g=!1,h.call(this,new Hr(f,this,M.originalEvent)))};return{layers:new Set(a),listener:h,delegates:{mousemove:v,mouseout:w}}}{const g=v=>{const w=a.filter(P=>this.getLayer(P)),M=w.length?this.queryRenderedFeatures(v.point,{layers:w}):[];M.length&&(v.features=M,h.call(this,v),delete v.features)};return{layers:new Set(a),listener:h,delegates:{[f]:g}}}}on(f,a,h){if(h===void 0)return super.on(f,a);Array.isArray(a)||(a=[a]);const g=this._createDelegatedListener(f,a,h);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[f]=this._delegatedListeners[f]||[],this._delegatedListeners[f].push(g);for(const v in g.delegates)this.on(v,g.delegates[v]);return this}once(f,a,h){if(h===void 0)return super.once(f,a);Array.isArray(a)||(a=[a]);const g=this._createDelegatedListener(f,a,h);for(const v in g.delegates)this.once(v,g.delegates[v]);return this}off(f,a,h){if(h===void 0)return super.off(f,a);a=new Set(Array.isArray(a)?a:[a]);const g=(w,M)=>{if(w.size!==M.size)return!1;for(const P of w)if(!M.has(P))return!1;return!0},v=this._delegatedListeners?this._delegatedListeners[f]:void 0;return v&&(w=>{for(let M=0;M<w.length;M++){const P=w[M];if(P.listener===h&&g(P.layers,a)){for(const z in P.delegates)this.off(z,P.delegates[z]);return w.splice(M,1),this}}})(v),this}queryRenderedFeatures(f,a){return this.style?(a!==void 0||f===void 0||f instanceof l.Point||Array.isArray(f)||(a=f,f=void 0),this.style.queryRenderedFeatures(f=f||[[0,0],[this.transform.width,this.transform.height]],a=a||{},this.transform)):[]}querySourceFeatures(f,a){return this.style.querySourceFeatures(f,a)}isPointOnSurface(f){const{name:a}=this.transform.projection;return a!=="globe"&&a!=="mercator"&&l.warnOnce(`${a} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(l.Point.convert(f))}setStyle(f,a){return(a=l.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},a)).diff!==!1&&a.localIdeographFontFamily===this._localIdeographFontFamily&&a.localFontFamily===this._localFontFamily&&this.style&&f?(this._diffStyle(f,a),this):(this._localIdeographFontFamily=a.localIdeographFontFamily,this._localFontFamily=a.localFontFamily,this._updateStyle(f,a))}_getUIString(f){const a=this._locale[f];if(a==null)throw new Error(`Missing UI string '${f}'`);return a}_updateStyle(f,a){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),f&&(this.style=new Ho(this,a||{}),this.style.setEventedParent(this,{style:this.style}),typeof f=="string"?this.style.loadURL(f):this.style.loadJSON(f)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Ho(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(f,a){if(typeof f=="string"){const h=this._requestManager.normalizeStyleURL(f),g=this._requestManager.transformRequest(h,l.ResourceType.Style);l.getJSON(g,(v,w)=>{v?this.fire(new l.ErrorEvent(v)):w&&this._updateDiff(w,a)})}else typeof f=="object"&&this._updateDiff(f,a)}_updateDiff(f,a){try{this.style.setState(f)&&this._update(!0)}catch(h){l.warnOnce(`Unable to perform style diff: ${h.message||h.error||h}.  Rebuilding the style from scratch.`),this._updateStyle(f,a)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(l.warnOnce("There is no style added to the map."),!1)}addSource(f,a){return this._lazyInitEmptyStyle(),this.style.addSource(f,a),this._update(!0)}isSourceLoaded(f){return!!this.style&&this.style._isSourceCacheLoaded(f)}areTilesLoaded(){const f=this.style&&this.style._sourceCaches;for(const a in f){const h=f[a]._tiles;for(const g in h){const v=h[g];if(v.state!=="loaded"&&v.state!=="errored")return!1}}return!0}addSourceType(f,a,h){this._lazyInitEmptyStyle(),this.style.addSourceType(f,a,h)}removeSource(f){return this.style.removeSource(f),this._updateTerrain(),this._update(!0)}getSource(f){return this.style.getSource(f)}addImage(f,a,{pixelRatio:h=1,sdf:g=!1,stretchX:v,stretchY:w,content:M}={}){if(this._lazyInitEmptyStyle(),a instanceof l.window.HTMLImageElement||l.window.ImageBitmap&&a instanceof l.window.ImageBitmap){const{width:P,height:z,data:$}=l.exported.getImageData(a);this.style.addImage(f,{data:new l.RGBAImage({width:P,height:z},$),pixelRatio:h,stretchX:v,stretchY:w,content:M,sdf:g,version:0})}else if(a.width===void 0||a.height===void 0)this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:P,height:z}=a,$=a;this.style.addImage(f,{data:new l.RGBAImage({width:P,height:z},new Uint8Array($.data)),pixelRatio:h,stretchX:v,stretchY:w,content:M,sdf:g,version:0,userImage:$}),$.onAdd&&$.onAdd(this,f)}}updateImage(f,a){const h=this.style.getImage(f);if(!h)return void this.fire(new l.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const g=a instanceof l.window.HTMLImageElement||l.window.ImageBitmap&&a instanceof l.window.ImageBitmap?l.exported.getImageData(a):a,{width:v,height:w}=g;v!==void 0&&w!==void 0?v===h.data.width&&w===h.data.height?(h.data.replace(g.data,!(a instanceof l.window.HTMLImageElement||l.window.ImageBitmap&&a instanceof l.window.ImageBitmap)),this.style.updateImage(f,h)):this.fire(new l.ErrorEvent(new Error(`The width and height of the updated image (${v}, ${w})
                must be that same as the previous version of the image
                (${h.data.width}, ${h.data.height})`))):this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(f){return f?!!this.style.getImage(f):(this.fire(new l.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(f){this.style.removeImage(f)}loadImage(f,a){l.getImage(this._requestManager.transformRequest(f,l.ResourceType.Image),(h,g)=>{a(h,g instanceof l.window.HTMLImageElement?l.exported.getImageData(g):g)})}listImages(){return this.style.listImages()}addLayer(f,a){return this._lazyInitEmptyStyle(),this.style.addLayer(f,a),this._update(!0)}moveLayer(f,a){return this.style.moveLayer(f,a),this._update(!0)}removeLayer(f){return this.style.removeLayer(f),this._update(!0)}getLayer(f){return this.style.getLayer(f)}setLayerZoomRange(f,a,h){return this.style.setLayerZoomRange(f,a,h),this._update(!0)}setFilter(f,a,h={}){return this.style.setFilter(f,a,h),this._update(!0)}getFilter(f){return this.style.getFilter(f)}setPaintProperty(f,a,h,g={}){return this.style.setPaintProperty(f,a,h,g),this._update(!0)}getPaintProperty(f,a){return this.style.getPaintProperty(f,a)}setLayoutProperty(f,a,h,g={}){return this.style.setLayoutProperty(f,a,h,g),this._update(!0)}getLayoutProperty(f,a){return this.style.getLayoutProperty(f,a)}setLight(f,a={}){return this._lazyInitEmptyStyle(),this.style.setLight(f,a),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(f){return this._lazyInitEmptyStyle(),!f&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(f),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(f){return this._lazyInitEmptyStyle(),this.style.setFog(f),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(f){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(l.LngLat.convert(f),this.transform):0}setFeatureState(f,a){return this.style.setFeatureState(f,a),this._update()}removeFeatureState(f,a){return this.style.removeFeatureState(f,a),this._update()}getFeatureState(f){return this.style.getFeatureState(f)}_updateContainerDimensions(){if(!this._container)return;const f=this._container.getBoundingClientRect().width||400,a=this._container.getBoundingClientRect().height||300;let h,g,v,w=this._container;for(;w&&(!g||!v);){const M=l.window.getComputedStyle(w).transform;M&&M!=="none"&&(h=M.match(/matrix.*\((.+)\)/)[1].split(", "),h[0]&&h[0]!=="0"&&h[0]!=="1"&&(g=h[0]),h[3]&&h[3]!=="0"&&h[3]!=="1"&&(v=h[3])),w=w.parentElement}this._containerWidth=g?Math.abs(f/g):f,this._containerHeight=v?Math.abs(a/v):a}_detectMissingCSS(){l.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&l.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const f=this._container;f.classList.add("mapboxgl-map"),(this._missingCSSCanary=D("div","mapboxgl-canary",f)).style.visibility="hidden",this._detectMissingCSS();const a=this._canvasContainer=D("div","mapboxgl-canvas-container",f);this._interactive&&a.classList.add("mapboxgl-interactive"),this._canvas=D("canvas","mapboxgl-canvas",a),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const h=this._controlContainer=D("div","mapboxgl-control-container",f),g=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(v=>{g[v]=D("div",`mapboxgl-ctrl-${v}`,h)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(f,a){const h=l.exported.devicePixelRatio||1;this._canvas.width=h*Math.ceil(f),this._canvas.height=h*Math.ceil(a),this._canvas.style.width=`${f}px`,this._canvas.style.height=`${a}px`}_addMarker(f){this._markers.push(f)}_removeMarker(f){const a=this._markers.indexOf(f);a!==-1&&this._markers.splice(a,1)}_addPopup(f){this._popups.push(f)}_removePopup(f){const a=this._popups.indexOf(f);a!==-1&&this._popups.splice(a,1)}_setupPainter(){const f=l.extend({},S.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),a=this._useWebGL2&&this._canvas.getContext("webgl2",f),h=a||this._canvas.getContext("webgl",f)||this._canvas.getContext("experimental-webgl",f);h?(this._useWebGL2&&!a&&l.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),l.storeAuthState(h,!0),this.painter=new ul(h,this.transform,!!a),this.on("data",g=>{g.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),l.exported$1.testSupport(h)):this.fire(new l.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(f){f.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.Event("webglcontextlost",{originalEvent:f}))}_contextRestored(f){this._setupPainter(),this.resize(),this._update(),this.fire(new l.Event("webglcontextrestored",{originalEvent:f}))}_onMapScroll(f){if(f.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(f){return this.style?(this._styleDirty=this._styleDirty||f,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(f){return this._update(),this._renderTaskQueue.add(f)}_cancelRenderFrame(f){this._renderTaskQueue.remove(f)}_requestDomTask(f){!this.loaded()||this.loaded()&&!this.isMoving()?f():this._domRenderTaskQueue.add(f)}_render(f){let a;const h=this.painter.context.extTimerQuery,g=l.exported.now();if(this.listens("gpu-timing-frame")&&(a=h.createQueryEXT(),h.beginQueryEXT(h.TIME_ELAPSED_EXT,a)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],l.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],l.window.performance.now())),this._renderTaskQueue.run(f),this._domRenderTaskQueue.run(f),this._removed)return;this._updateProjectionTransition();const v=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const P=this.transform.zoom,z=this.transform.pitch,$=l.exported.now(),B=new l.EvaluationParameters(P,{now:$,fadeDuration:v,pitch:z,transition:this.style.getTransition()});this.style.update(B)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let w=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),w=this._updateAverageElevation(g),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):w=this._updateAverageElevation(g),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,v,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:v,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new l.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new l.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),a){const P=l.exported.now()-g;h.endQueryEXT(h.TIME_ELAPSED_EXT,a),setTimeout(()=>{const z=h.getQueryObjectEXT(a,h.QUERY_RESULT_EXT)/1e6;h.deleteQueryEXT(a),this.fire(new l.Event("gpu-timing-frame",{cpuTime:P,gpuTime:z})),l.window.performance.mark("frame-gpu",{startTime:g,detail:{gpuTime:z}})},50)}if(this.listens("gpu-timing-layer")){const P=this.painter.collectGpuTimers();setTimeout(()=>{const z=this.painter.queryGpuTimers(P);this.fire(new l.Event("gpu-timing-layer",{layerTimes:z}))},50)}if(this.listens("gpu-timing-deferred-render")){const P=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const z=this.painter.queryGpuTimeDeferredRender(P);this.fire(new l.Event("gpu-timing-deferred-render",{gpuTime:z}))},50)}const M=this._sourcesDirty||this._styleDirty||this._placementDirty||w;if(M||this._repaint)this.triggerRepaint();else{const P=!this.isMoving()&&this.loaded();if(P&&(w=this._updateAverageElevation(g,!0)),w)this.triggerRepaint();else if(this._triggerFrame(!1),P&&(this.fire(new l.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const z=this._calculateSpeedIndex();this.fire(new l.Event("speedindexcompleted",{speedIndex:z})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||M||(this._fullyLoaded=!0,l.LivePerformanceUtils.mark(l.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&l.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(f){for(const a of this._markers)f&&!this.getRenderWorldCopies()&&(a._lngLat=a._lngLat.wrap()),a._update();for(const a of this._popups)!f||this.getRenderWorldCopies()||a._trackPointer||(a._lngLat=a._lngLat.wrap()),a._update()}_updateAverageElevation(f,a=!1){const h=g=>(this.transform.averageElevation=g,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&h(0);if((a||f-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(f)){const g=this.transform.averageElevation;let v=this.transform.sampleAverageElevation(),w=!1;this.transform.elevation&&(w=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(v)?v=0:this._averageElevationLastSampledAt=f;const M=Math.abs(g-v);if(M>1){if(this._isInitialLoad||w)return this._averageElevation.jumpTo(v),h(v);this._averageElevation.easeTo(v,f,300)}else if(M>1e-4)return this._averageElevation.jumpTo(v),h(v)}return!!this._averageElevation.isEasing(f)&&h(this._averageElevation.getValue(f))}_authenticate(){l.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,f=>{if(f&&(f.message===l.AUTH_ERR_MSG||f.status===401)){const a=this.painter.context.gl;l.storeAuthState(a,!1),this._logoControl instanceof Ap&&this._logoControl._updateLogo(),a&&a.clear(a.DEPTH_BUFFER_BIT|a.COLOR_BUFFER_BIT|a.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new l.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),l.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const f=this._isDragging();this.painter.updateTerrain(this.style,f)}_calculateSpeedIndex(){const f=this.painter.canvasCopy(),a=this.painter.getCanvasCopiesAndTimestamps();a.timeStamps.push(performance.now());const h=this.painter.context.gl,g=h.createFramebuffer();function v(w){h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,w,0);const M=new Uint8Array(h.drawingBufferWidth*h.drawingBufferHeight*4);return h.readPixels(0,0,h.drawingBufferWidth,h.drawingBufferHeight,h.RGBA,h.UNSIGNED_BYTE,M),M}return h.bindFramebuffer(h.FRAMEBUFFER,g),this._canvasPixelComparison(v(f),a.canvasCopies.map(v),a.timeStamps)}_canvasPixelComparison(f,a,h){let g=h[1]-h[0];const v=f.length/4;for(let w=0;w<a.length;w++){const M=a[w];let P=0;for(let z=0;z<M.length;z+=4)M[z]===f[z]&&M[z+1]===f[z+1]&&M[z+2]===f[z+2]&&M[z+3]===f[z+3]&&(P+=1);g+=(h[w+2]-h[w+1])*(1-P/v)}return g}remove(){this._hash&&this._hash.remove();for(const a of this._controls)a.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),l.window!==void 0&&(l.window.removeEventListener("resize",this._onWindowResize,!1),l.window.removeEventListener("orientationchange",this._onWindowResize,!1),l.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),l.window.removeEventListener("online",this._onWindowOnline,!1),l.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const f=this.painter.context.gl.getExtension("WEBGL_lose_context");f&&f.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),l.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new l.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(f){this._renderNextFrame=this._renderNextFrame||f,this.style&&!this._frame&&(this._frame=l.exported.frame(a=>{const h=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,h&&this._render(a)}))}_preloadTiles(f){const a=this.style?Object.values(this.style._sourceCaches):[];return l.asyncAll(a,(h,g)=>h._preloadTiles(f,g),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(f){this._trackResize&&this.resize({originalEvent:f})._update()}_onVisibilityChange(){l.window.document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(f){this._showTileBoundaries!==f&&(this._showTileBoundaries=f,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(f){this._showTerrainWireframe!==f&&(this._showTerrainWireframe=f,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(f){this._speedIndexTiming!==f&&(this._speedIndexTiming=f,this._update())}get showPadding(){return!!this._showPadding}set showPadding(f){this._showPadding!==f&&(this._showPadding=f,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(f){this._showCollisionBoxes!==f&&(this._showCollisionBoxes=f,f?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(f){this._showOverdrawInspector!==f&&(this._showOverdrawInspector=f,this._update())}get repaint(){return!!this._repaint}set repaint(f){this._repaint!==f&&(this._repaint=f,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(f){this._vertices=f,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(f){this._showTileAABBs!==f&&(this._showTileAABBs=f,f&&this._update())}_setCacheLimits(f,a){l.setCacheLimits(f,a)}get version(){return l.version}},NavigationControl:class{constructor(f){this.options=l.extend({},Hx,f),this._container=D("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",a=>a.preventDefault()),this.options.showZoom&&(l.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",a=>{this._map&&this._map.zoomIn({},{originalEvent:a})}),D("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",a=>{this._map&&this._map.zoomOut({},{originalEvent:a})}),D("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(l.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",a=>{const h=this._map;h&&(this.options.visualizePitch?h.resetNorthPitch({},{originalEvent:a}):h.resetNorth({},{originalEvent:a}))}),this._compassIcon=D("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const f=this._map;if(!f)return;const a=f.getZoom(),h=a===f.getMaxZoom(),g=a===f.getMinZoom();this._zoomInButton.disabled=h,this._zoomOutButton.disabled=g,this._zoomInButton.setAttribute("aria-disabled",h.toString()),this._zoomOutButton.setAttribute("aria-disabled",g.toString())}_rotateCompassArrow(){const f=this._map;if(!f)return;const a=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(f.transform.pitch*(Math.PI/180)),.5)}) rotateX(${f.transform.pitch}deg) rotateZ(${f.transform.angle*(180/Math.PI)}deg)`:`rotate(${f.transform.angle*(180/Math.PI)}deg)`;f._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=a)})}onAdd(f){return this._map=f,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),f.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&f.on("pitch",this._rotateCompassArrow),f.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Wx(f,this._compass,this.options.visualizePitch)),this._container}onRemove(){const f=this._map;f&&(this._container.remove(),this.options.showZoom&&f.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&f.off("pitch",this._rotateCompassArrow),f.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(f,a){const h=D("button",f,this._container);return h.type="button",h.addEventListener("click",a),h}_setButtonTitle(f,a){if(!this._map)return;const h=this._map._getUIString(`NavigationControl.${a}`);f.setAttribute("aria-label",h),f.firstElementChild&&f.firstElementChild.setAttribute("title",h)}},GeolocateControl:class extends l.Evented{constructor(f){super(),this.options=l.extend({geolocation:l.window.navigator.geolocation},Ip,f),l.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=pl(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(f){return this._map=f,this._container=D("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(f){const a=(h=!!this.options.geolocation)=>{this._supportsGeolocation=h,f(h)};this._supportsGeolocation!==void 0?f(this._supportsGeolocation):l.window.navigator.permissions!==void 0?l.window.navigator.permissions.query({name:"geolocation"}).then(h=>a(h.state!=="denied")).catch(()=>a()):a()}_isOutOfMapMaxBounds(f){const a=this._map.getMaxBounds(),h=f.coords;return!!a&&(h.longitude<a.getWest()||h.longitude>a.getEast()||h.latitude<a.getSouth()||h.latitude>a.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(f){if(this._map){if(this._isOutOfMapMaxBounds(f))return this._setErrorState(),this.fire(new l.Event("outofmaxbounds",f)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=f,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(f),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(f),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new l.Event("geolocate",f)),this._finish()}}_updateCamera(f){const a=new l.LngLat(f.coords.longitude,f.coords.latitude),h=f.coords.accuracy,g=this._map.getBearing(),v=l.extend({bearing:g},this.options.fitBoundsOptions);this._map.fitBounds(a.toBounds(h),v,{geolocateSource:!0})}_updateMarker(f){if(f){const a=new l.LngLat(f.coords.longitude,f.coords.latitude);this._accuracyCircleMarker.setLngLat(a).addTo(this._map),this._userLocationDotMarker.setLngLat(a).addTo(this._map),this._accuracy=f.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const f=this._map.transform,a=l.mercatorZfromAltitude(1,f._center.lat)*f.worldSize,h=Math.ceil(2*this._accuracy*a);this._circleElement.style.width=`${h}px`,this._circleElement.style.height=`${h}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(f){if(this._map){if(this.options.trackUserLocation)if(f.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",a),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",a),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(f.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new l.Event("error",f)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(f){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",a=>a.preventDefault()),this._geolocateButton=D("button","mapboxgl-ctrl-geolocate",this._container),D("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",f===!1){l.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",a),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",a)}else{const a=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",a),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",a)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=D("div","mapboxgl-user-location"),this._dotElement.appendChild(D("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(D("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Mt({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=D("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Mt({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",a=>{a.geolocateSource||this._watchState!=="ACTIVE_LOCK"||a.originalEvent&&a.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new l.Event("trackuserlocationend")))})}}_onDeviceOrientation(f){this._userLocationDotMarker&&(f.webkitCompassHeading?this._heading=f.webkitCompassHeading:f.absolute===!0&&(this._heading=-1*f.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return l.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new l.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let f;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(f={maximumAge:6e5,timeout:0},this._noTimeout=!0):(f=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,f),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const f=()=>{l.window.addEventListener("ondeviceorientationabsolute"in l.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};l.window.DeviceMotionEvent!==void 0&&typeof l.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(a=>{a==="granted"&&f()}).catch(console.error):f()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),l.window.removeEventListener("deviceorientation",this._onDeviceOrientation),l.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:It,ScaleControl:class{constructor(f){this.options=l.extend({},Dp,f),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),l.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const f=this.options.maxWidth||100,a=this._map,h=a._containerHeight/2,g=a._containerWidth/2-f/2,v=a.unproject([g,h]),w=a.unproject([g+f,h]),M=v.distanceTo(w);if(this.options.unit==="imperial"){const P=3.2808*M;P>5280?this._setScale(f,P/5280,"mile"):this._setScale(f,P,"foot")}else this.options.unit==="nautical"?this._setScale(f,M/1852,"nautical-mile"):M>=1e3?this._setScale(f,M/1e3,"kilometer"):this._setScale(f,M,"meter")}_setScale(f,a,h){this._map._requestDomTask(()=>{const g=function(w){const M=Math.pow(10,`${Math.floor(w)}`.length-1);let P=w/M;return P=P>=10?10:P>=5?5:P>=3?3:P>=2?2:P>=1?1:function(z){const $=Math.pow(10,Math.ceil(-Math.log(z)/Math.LN10));return Math.round(z*$)/$}(P),M*P}(a),v=g/a;this._container.innerHTML=this._isNumberFormatSupported&&h!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:h}).format(g):`${g}&nbsp;${zp[h]}`,this._container.style.width=f*v+"px"})}onAdd(f){return this._map=f,this._language=f.getLanguage(),this._container=D("div","mapboxgl-ctrl mapboxgl-ctrl-scale",f.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(f){this._language=f,this._update()}setUnit(f){this.options.unit=f,this._update()}},FullscreenControl:class{constructor(f){this._fullscreen=!1,f&&f.container&&(f.container instanceof l.window.HTMLElement?this._container=f.container:l.warnOnce("Full screen control 'container' must be a DOM element.")),l.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in l.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in l.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(f){return this._map=f,this._container||(this._container=this._map.getContainer()),this._controlContainer=D("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",l.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,l.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!l.window.document.fullscreenEnabled&&!l.window.document.webkitFullscreenEnabled)}_setupUI(){const f=this._fullscreenButton=D("button","mapboxgl-ctrl-fullscreen",this._controlContainer);D("span","mapboxgl-ctrl-icon",f).setAttribute("aria-hidden","true"),f.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),l.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const f=this._getTitle();this._fullscreenButton.setAttribute("aria-label",f),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",f)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(l.window.document.fullscreenElement||l.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?l.window.document.exitFullscreen?l.window.document.exitFullscreen():l.window.document.webkitCancelFullScreen&&l.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends l.Evented{constructor(f){super(),this.options=l.extend(Object.create(kp),f),l.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(f&&f.className?f.className.trim().split(/\s+/):[])}addTo(f){return this._map&&this.remove(),this._map=f,this.options.closeOnClick&&f.on("preclick",this._onClose),this.options.closeOnMove&&f.on("move",this._onClose),f.on("remove",this.remove),this._update(),f._addPopup(this),this._focusFirstElement(),this._trackPointer?(f.on("mousemove",this._onMouseEvent),f.on("mouseup",this._onMouseEvent),f._canvasContainer.classList.add("mapboxgl-track-pointer")):f.on("move",this._update),this.fire(new l.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const f=this._map;return f&&(f.off("move",this._update),f.off("move",this._onClose),f.off("preclick",this._onClose),f.off("click",this._onClose),f.off("remove",this.remove),f.off("mousemove",this._onMouseEvent),f.off("mouseup",this._onMouseEvent),f.off("drag",this._onMouseEvent),f._canvasContainer&&f._canvasContainer.classList.remove("mapboxgl-track-pointer"),f._removePopup(this),this._map=void 0),this.fire(new l.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(f){this._lngLat=l.LngLat.convert(f),this._pos=null,this._trackPointer=!1,this._update();const a=this._map;return a&&(a.on("move",this._update),a.off("mousemove",this._onMouseEvent),a._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const f=this._map;return f&&(f.off("move",this._update),f.on("mousemove",this._onMouseEvent),f.on("drag",this._onMouseEvent),f._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(f){return this.setDOMContent(l.window.document.createTextNode(f))}setHTML(f){const a=l.window.document.createDocumentFragment(),h=l.window.document.createElement("body");let g;for(h.innerHTML=f;g=h.firstChild,g;)a.appendChild(g);return this.setDOMContent(a)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(f){return this.options.maxWidth=f,this._update(),this}setDOMContent(f){let a=this._content;if(a)for(;a.hasChildNodes();)a.firstChild&&a.removeChild(a.firstChild);else a=this._content=D("div","mapboxgl-popup-content",this._container||void 0);if(a.appendChild(f),this.options.closeButton){const h=this._closeButton=D("button","mapboxgl-popup-close-button",a);h.type="button",h.setAttribute("aria-label","Close popup"),h.setAttribute("aria-hidden","true"),h.innerHTML="&#215;",h.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(f){return this._classList.add(f),this._updateClassList(),this}removeClassName(f){return this._classList.delete(f),this._updateClassList(),this}setOffset(f){return this.options.offset=f,this._update(),this}toggleClassName(f){let a;return this._classList.delete(f)?a=!1:(this._classList.add(f),a=!0),this._updateClassList(),a}_onMouseEvent(f){this._update(f.point)}_getAnchor(f){if(this.options.anchor)return this.options.anchor;const a=this._map,h=this._container,g=this._pos;if(!a||!h||!g)return"bottom";const v=h.offsetWidth,w=h.offsetHeight,M=g.x<v/2,P=g.x>a.transform.width-v/2;if(g.y+f<w)return M?"top-left":P?"top-right":"top";if(g.y>a.transform.height-w){if(M)return"bottom-left";if(P)return"bottom-right"}return M?"left":P?"right":"bottom"}_updateClassList(){const f=this._container;if(!f)return;const a=[...this._classList];a.push("mapboxgl-popup"),this._anchor&&a.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&a.push("mapboxgl-popup-track-pointer"),f.className=a.join(" ")}_update(f){const a=this._map,h=this._content;if(!a||!this._lngLat&&!this._trackPointer||!h)return;let g=this._container;if(g||(g=this._container=D("div","mapboxgl-popup",a.getContainer()),this._tip=D("div","mapboxgl-popup-tip",g),g.appendChild(h)),this.options.maxWidth&&g.style.maxWidth!==this.options.maxWidth&&(g.style.maxWidth=this.options.maxWidth),a.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=gl(this._lngLat,this._pos,a.transform)),!this._trackPointer||f){const v=this._pos=this._trackPointer&&f?f:a.project(this._lngLat),w=Cg(this.options.offset),M=this._anchor=this._getAnchor(w.y),P=Cg(this.options.offset,M),z=v.add(P).round();a._requestDomTask(()=>{this._container&&M&&(this._container.style.transform=`${Ea[M]} translate(${z.x}px,${z.y}px)`)})}if(!this._marker&&a._showingGlobe()){const v=l.isLngLatBehindGlobe(a.transform,this._lngLat)?0:1;this._setOpacity(v)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const f=this._container.querySelector(qx);f&&f.focus()}_onClose(){this.remove()}_setOpacity(f){this._container&&(this._container.style.opacity=`${f}`),this._content&&(this._content.style.pointerEvents=f?"auto":"none")}},Marker:Mt,Style:Ho,LngLat:l.LngLat,LngLatBounds:l.LngLatBounds,Point:l.Point,MercatorCoordinate:l.MercatorCoordinate,FreeCameraOptions:hg,Evented:l.Evented,config:l.config,prewarm:function(){Qa().acquire(Vo)},clearPrewarmedResources:function(){const f=yi;f&&(f.isPreloaded()&&f.numActive()===1?(f.release(Vo),yi=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return l.config.ACCESS_TOKEN},set accessToken(f){l.config.ACCESS_TOKEN=f},get baseApiUrl(){return l.config.API_URL},set baseApiUrl(f){l.config.API_URL=f},get workerCount(){return Gr.workerCount},set workerCount(f){Gr.workerCount=f},get maxParallelImageRequests(){return l.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(f){l.config.MAX_PARALLEL_IMAGE_REQUESTS=f},clearStorage(f){l.clearTileCache(f)},workerUrl:"",workerClass:null,setNow:l.exported.setNow,restoreNow:l.exported.restoreNow};return yl});var x=u;return x})})(l6);var qi=Ww(l6.exports);qi.accessToken="pk.eyJ1Ijoiam9uYXNzY2htZWR0bWFubiIsImEiOiJjam54ZmM5N3gwNjAzM3dtZDNxYTVlMnd2In0.ytpI7V7w7cyT1Kq5rT9Z1A";WE.propTypes={data:_e.array,hideMap:_e.func};function WE({data:e=[],hideMap:t=null}){console.log(e);const r=ne.exports.useRef(null),s=ne.exports.useRef(null);return ne.exports.useEffect(()=>{var u,d;return s.current=new qi.Map({container:r.current,style:"mapbox://styles/mapbox/streets-v11",center:[106,21],zoom:10}),(d=(u=s.current)==null?void 0:u.markers)==null||d.forEach(x=>x.remove()),s.current.markers=[],e.forEach(x=>{var k;console.log(x.latitude);const l=document.createElement("div");l.className="marker";const _=`
          <div style="display:flex; align-items:start;">
            <div style="border-radius:6px; margin-right:8px; width:100%; height:60px;">
              <img src=${x.listImage&&((k=x.listImage[0])==null?void 0:k.url)} style="border-radius:6px; object-fit:cover; width:100%; height:100%;" alt=${x.name}/>
            </div>
            <div style="overflow:hidden;width: 200px; text-align:center;">
              <p style="font-size:14px; font-weight:600; margin-bottom:2px; overflow:hidden; text-overflow:ellipsis; line-clamp:1; -webkit-box-orient:vertical; display:-webkit-box ; -webkit-line-clamp:1;">${x.name}</p>
              <p style="font-size:12px; overflow:hidden; text-overflow:ellipsis; line-clamp:2; -webkit-box-orient:vertical; display:-webkit-box ; -webkit-line-clamp:2; line-height:1.3;">${x.location}</p>
            </div>
          </div>`,S=new qi.Popup({offset:25}).setHTML(_);if(!s.current)return;const C=new qi.Marker({element:l,anchor:"center"}).setLngLat([x.longitude,x.latitude]).setPopup(S).addTo(s.current);s.current.markers.push(C)}),console.log(s.current),s.current.addControl(new qi.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,showUserHeading:!0}),"top-left"),s.current.addControl(new qi.NavigationControl,"top-left"),s.current.addControl(new qi.FullscreenControl),()=>{var x;(x=s.current)==null||x.remove()}},[e]),ri.exports.createPortal(T("div",{className:"bg-[rgba(0,0,0,.8)] fixed inset-0 flex items-center justify-center z-[1000]",children:H("div",{className:"bg-[#eee] rounded-[6px] w-[90%] h-[90%] overflow-hidden relative",children:[H("div",{className:"relative flex items-center justify-center h-[60px] border-b-[1px] border-b-[#111] text-center pl-1 pr-[6px] py-5",children:[H("h1",{className:"text-[24px] font-bold mb-[2px] text-center flex items-center gap-x-2",children:[T(kI,{}),"Map"]}),T("div",{onClick:t,className:"absolute top-[7px] right-3 cursor-pointer  w-10 h-10 rounded-full bg-white shadow-[0_2px_8px_rgb(0,0,0,0.15)] flex items-center justify-center transition-all hover:shadow-[0_2px_8px_rgb(0,0,0,0.15),0_2px_8px_rgb(0,0,0,0.2)]",children:T(Nd,{className:"m-0 text-[22px]"})})]}),T("div",{className:"relative overflow-hidden flex-1 rounded-[10px] mb-[6px] h-full ",ref:r})]})}),document.querySelector("body"))}u6.propTypes={data:_e.object,onChange:_e.func,filters:_e.object,listBlogs:_e.array};function u6({data:e={},onChange:t=null,filters:r={},listBlogs:s=[]}){const[u,d]=ne.exports.useState(!1),x=(l,_)=>{if(!t)return null;t(l)};return H("div",{className:"w-1/4 p-3 h-full hidden lg:block",children:[H("div",{className:"shadow-xl relative rounded-[10px] h-[152px] flex items-center justify-center mb-5",children:[T("img",{src:"/img/map.png",alt:"",className:"absolute inset-0 h-full object-cover z-[-1]"}),T("button",{onClick:()=>d(!0),className:"font-bold text-sm border-2 border-black bg-white h-[40px] py-[2px] px-[10px] rounded-[10px] hover:bg-[#eee] transition-all duration-300",children:"Xem b\u1EA3n \u0111\u1ED3"})]}),u&&T(WE,{data:s,hideMap:()=>d(!1)}),H("div",{className:"px-[14px] py-[10px] rounded-[10px] drop-shadow-2xl bg-white",children:[T("div",{className:" ",children:T("h2",{className:"py-4 text-[21px] font-semibold  border-b border-b-[#e0e0e0]",children:"L\u1ECDc k\u1EBFt qu\u1EA3"})}),H("div",{children:[T(Fm,{title:"Gi\u1EDD m\u1EDF c\u1EEDa",type:"radio",data:sE||[],name:"timeStart",onChange:x,col:!0,filters:r}),T(Lm,{title:"Khu v\u1EF1c",data:(e==null?void 0:e.areas)||[],name:"area",onChange:x,filters:r}),T(qE,{title:"M\u1EE5c \u0111\xEDch",data:(e==null?void 0:e.purposes)||[],name:"purpose",onChange:x,filters:r}),T(a6,{title:"Kho\u1EA3ng gi\xE1",data:(e==null?void 0:e.price)||[],name:"priceMax",onChange:x,filters:r}),T(HE,{title:"Ki\u1EC3u qu\xE1n",data:(e==null?void 0:e.kinds)||[],name:"kind",onChange:x,filters:r}),T(GE,{title:"Ti\u1EC7n \xEDch",data:(e==null?void 0:e.conveniences)||[],name:"convenience",onChange:x,filters:r})]})]})]})}h6.propTypes={data:_e.object,onChange:_e.func,show:_e.bool,onShow:_e.func,parentFilters:_e.object};function h6({data:e={},onChange:t=null,show:r=!1,onShow:s=null,parentFilters:u={}}){if(typeof document=="undefined")return T("div",{className:"modal",children:"Modal"});const d=yr(),[x,l]=Ka(),_=C=>{t(C)},S=()=>{if(!t)return null;t({name:"",slugArea:null,slugPurpose:null,slugKind:null,slugConvenience:null}),s(),l(!1),d("/search")};return ri.exports.createPortal(H("div",{className:`fixed lg:relative block lg:hidden inset-0 bg-white overflow-auto pb-[50px] transition-all duration-300 z-[1000]  ${r?"translate-y-0 opacity-100 ":"translate-y-[100%] opacity-0"}`,children:[H("div",{className:"absolute top-0 inset-x-0 bg-primary text-white text-center font-bold text-lg leading-0  py-4 px-6 border-b-[#f0f0f0] border-b-[1px] ",children:[T("div",{onClick:()=>{s(),l(!1)},className:"absolute  inset-y-0 text-white right-0 w-[40px] flex items-center justify-center",children:T(_x,{className:"w-[40px] h-[30px] cursor-pointer font-bold"})}),"B\u1ED9 l\u1ED9c"]}),H("div",{className:"mt-[65px] ",children:[T(Fm,{title:"Gi\u1EDD m\u1EDF c\u1EEDa",type:"radio",data:sE||[],name:"timeStart",onChange:_,col:!0,filters:u}),T(Lm,{title:"Khu v\u1EF1c",data:(e==null?void 0:e.areas)||[],name:"area",onChange:_,filters:u,mobile:!0}),T(qE,{title:"M\u1EE5c \u0111\xEDch",data:(e==null?void 0:e.purposes)||[],name:"purpose",onChange:_,mobile:!0,filters:u}),T(HE,{title:"Ki\u1EC3u qu\xE1n",data:(e==null?void 0:e.kinds)||[],name:"kind",onChange:_,mobile:!0,filters:u}),T(GE,{title:"Ti\u1EC7n \xEDch",data:(e==null?void 0:e.conveniences)||[],name:"convenience",onChange:_,mobile:!0,filters:u})]}),ri.exports.createPortal(T("div",{className:`lg:hidden fixed z-[100000] inset-x-0 bottom-0 flex bg-white p-[10px] gap-x-3 items-center transition-all duration-300  ${r?"translate-y-0 opacity-100 ":"translate-y-[100%] opacity-0"}`,children:T("button",{onClick:S,className:"border-primary border text-primary bg-white grow text-base py-[6px] px-5 rounded-[4px]",children:"\u0110\u1EB7t l\u1EA1i"})}),document.querySelector("body"))]}),document.querySelector("body"))}const Rm={getAll(e){const t="/areas";return wn.get(t,{params:e})}},bx={getAll(e){const t="/kinds";return wn.get(t,{params:e})}},wx={getAll(e){const t="/conveniences";return wn.get(t,{params:e})}},Om={getAll(e){const t="/purposes";return wn.get(t,{params:e})}};d6.propTypes={onChange:_e.func,show:_e.bool,onShow:_e.func,filters:_e.object,listBlogs:_e.array};const O0=30;function d6({onChange:e=null,show:t=!1,onShow:r=null,filters:s={},listBlogs:u=[]}){const[d,x]=ne.exports.useState({});ne.exports.useEffect(()=>{(async()=>{try{const _=await Rm.getAll({limit:O0}),S=await Om.getAll({limit:O0}),C=await bx.getAll({limit:O0}),k=await wx.getAll({limit:O0});x({areas:_,purposes:S,kinds:C,conveniences:k})}catch(_){console.log("Error \u{1F4A5}",_.message)}})()},[]);const l=_=>{if(!e)return null;e(_)};return H(yn,{children:[T(u6,{data:d,onChange:l,filters:s,listBlogs:u}),T(h6,{parentFilters:s,data:d,onChange:l,show:t,onShow:r})]})}p6.propTypes={};const ZE=ne.exports.createContext([]),XE=ne.exports.createContext([]);function p6(e){const[t,r]=ne.exports.useState([]),[s,u]=ne.exports.useState(0),[d,x]=ne.exports.useState(!1),[l,_]=ne.exports.useState(!1),[S,C]=Ka(),k=Ji(),[D,U]=ne.exports.useState(!1),[q,L]=ne.exports.useState(!1),[K,R]=ne.exports.useState(()=>{const J=aE.parse(k.search);return{limit:5,page:1,timeStatus:null,name:J.name?J.name:void 0,slugArea:J.areas?J.areas:void 0,slugPurpose:J.purposes?J.purposes:void 0,slugKind:J.kind?J.kind:void 0,slugConvenience:J.convenience?J.convenience:void 0,status:1}}),F=ne.exports.useRef(null);ne.exports.useEffect(()=>{(async()=>{try{U(!0);const J=await yo.getAll(K),re={...K,page:0},fe=await yo.getCount(re);r(J),u(fe||0)}catch(J){console.log("Error \u{1F4A5}",J.message)}U(!1),F&&F.current&&F.current.scrollIntoView({behavior:"smooth"})})()},[K]);const V=J=>{(J==null?void 0:J.rating)===0?R(re=>({...re,...J,rating:null,page:1})):R(re=>({...re,...J,page:1}))};return T(qs,{children:T(ZE.Provider,{value:[K,R],children:T(XE.Provider,{value:[d,x],children:H("div",{className:"pt-[10px] min-h-[70vh] relative ",children:[H("div",{className:"max-w-[1200px] mx-auto lg:px-4 flex",children:[T(d6,{onChange:V,show:l,onShow:()=>_(!1),filters:K,listBlogs:t}),T("div",{className:"lg:w-3/4 lg:p-3 w-full pb-[120px]",ref:F,children:T(r6,{isLoading:D,data:t||[],count:s||0,onChange:V})})]}),H("div",{className:"fixed bottom-[72px] inset-x-0 flex items-end justify-center lg:hidden",children:[H("div",{onClick:()=>{_(!0),C(!0)},className:"relative cursor-pointer flex items-center gap-x-2 text-[#111] py-[2px] px-[12px] mx-1 rounded-full shadow-[0_0_8px_2px_rgb(0,0,0,0.3)] text-base bg-white font-normal",children:[T(k7,{className:" text-lg"}),T("span",{className:"absolute top-[-2px] right-[-2px] w-[12px] h-[12px] rounded-full bg-primary"}),"B\u1ED9 l\u1ECDc"]}),H("div",{onClick:()=>L(!0),className:"relative cursor-pointer flex items-center gap-x-2 text-[#111] py-[2px] px-[12px] mx-1 rounded-full shadow-[0_0_8px_2px_rgb(0,0,0,0.3)] text-base bg-white font-normal",children:[T(M7,{className:" text-lg"}),"B\u1EA3n \u0111\u1ED3"]})]}),q&&T(WE,{data:t,hideMap:()=>L(!1)})]})})})})}f6.propTypes={user:_e.object,data:_e.object};function f6({data:e={},user:t={}}){const r=Ei(),[s,u]=ne.exports.useState(!1),[d,x]=ne.exports.useState({userId:t==null?void 0:t.id,productId:e==null?void 0:e.id});return ne.exports.useEffect(()=>{(async()=>{if((t==null?void 0:t.id)&&(e==null?void 0:e.id)){const _=await yd.checkBlogIsSavedByUserId({...d,userId:t==null?void 0:t.id,productId:e==null?void 0:e.id});u(_)}})()},[d,e]),T("div",{onClick:async()=>{if(console.log(t),!(t!=null&&t.id)){r(zo());return}try{if(!(t!=null&&t.id)){r(zo());return}await yd.toggleBlogSaved({productId:e==null?void 0:e.id,userId:t==null?void 0:t.id}),x(_=>({..._})),Yt(s?`\u0110\xE3 h\u1EE7y l\u01B0u th\xE0nh c\xF4ng cafe ${e==null?void 0:e.name}`:`\u0110\xE3 l\u01B0u th\xE0nh c\xF4ng cafe ${e==null?void 0:e.name}`)}catch{Yt(s?`C\xF3 l\u1ED7i h\u1EE7y l\u01B0u cafe ${e==null?void 0:e.name}`:`C\xF3 l\u1ED7i l\u01B0u cafe ${e==null?void 0:e.name}`)}},className:"w-9 h-8 flex items-center justify-center",children:T(AY,{className:`w-[100%] h-[26px] text-sm m-0 cursor-pointer
  ${s?"text-primary":"text-secondary"}
  `})})}fy.propTypes={items:_e.object};function fy({item:e}){var s,u;const t=yr(),r=()=>{t(`/place/${e==null?void 0:e.slug}`)};return H(Jt,{to:`/place/${e==null?void 0:e.slug}`,onClick:r,className:"rounded-[10px] flex-shrink-0 block  cursor-pointer hover-scale hover:shadow-2xl transition-all duration-200 overflow-hidden shadow-[0_1px_4px_rgb(0,0,0,0.15)]",children:[T("div",{className:"w-full  leading-[0] overflow-hidden h-[200px] md:h-[240px] lg:max-w-[282px]",children:T("img",{src:(e==null?void 0:e.listImage)!==null&&((s=e==null?void 0:e.listImage)==null?void 0:s.length)>0&&((u=e==null?void 0:e.listImage[0])==null?void 0:u.url),alt:e==null?void 0:e.name,className:"rounded-t-[10px] w-full h-full object-cover transition-all duration-1000"})}),H("div",{className:"px-[15px] py-[2px] ",children:[T("p",{className:"text-text font-bold lg:text-[18px] text-sm pt-[6px] pb-[2px]",children:e==null?void 0:e.name}),T("p",{className:"text-black lg:text-[14px] text-xs pb-[6px]",children:e==null?void 0:e.location})]})]})}m6.propTypes={data:_e.array};function m6({data:e=[]}){const[t,r]=ne.exports.useState(null);ne.exports.useEffect(()=>((async()=>(window.addEventListener("resize",s),s()))(),()=>window.removeEventListener("resize",s)),[]);const s=()=>{r(ow(window.innerWidth))};return H(yn,{children:[T("div",{className:"lg:grid hidden grid-cols-4 gap-x-3  flex-nowrap overflow-hidden mt-2 py-1 ",children:e.map(u=>T("div",{className:"flex-1 ",children:T(fy,{item:u})},u.id))}),T("div",{className:"md:grid grid-cols-2 lg:hidden gap-x-3   flex-nowrap overflow-hidden  py-1 ",children:e.slice(0,2).map(u=>T("div",{className:"flex-1 ",children:T(fy,{item:u})},u.id))})]})}function FA(e){return e!==null&&typeof e=="object"&&"constructor"in e&&e.constructor===Object}function KE(e={},t={}){Object.keys(t).forEach(r=>{typeof e[r]=="undefined"?e[r]=t[r]:FA(t[r])&&FA(e[r])&&Object.keys(t[r]).length>0&&KE(e[r],t[r])})}const g6={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function bi(){const e=typeof document!="undefined"?document:{};return KE(e,g6),e}const rQ={document:g6,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(e){return typeof setTimeout=="undefined"?(e(),null):setTimeout(e,0)},cancelAnimationFrame(e){typeof setTimeout!="undefined"&&clearTimeout(e)}};function mi(){const e=typeof window!="undefined"?window:{};return KE(e,rQ),e}function iQ(e){const t=e.__proto__;Object.defineProperty(e,"__proto__",{get(){return t},set(r){t.__proto__=r}})}class Vl extends Array{constructor(t){typeof t=="number"?super(t):(super(...t||[]),iQ(this))}}function Bm(e=[]){const t=[];return e.forEach(r=>{Array.isArray(r)?t.push(...Bm(r)):t.push(r)}),t}function y6(e,t){return Array.prototype.filter.call(e,t)}function oQ(e){const t=[];for(let r=0;r<e.length;r+=1)t.indexOf(e[r])===-1&&t.push(e[r]);return t}function sQ(e,t){if(typeof e!="string")return[e];const r=[],s=t.querySelectorAll(e);for(let u=0;u<s.length;u+=1)r.push(s[u]);return r}function Ut(e,t){const r=mi(),s=bi();let u=[];if(!t&&e instanceof Vl)return e;if(!e)return new Vl(u);if(typeof e=="string"){const d=e.trim();if(d.indexOf("<")>=0&&d.indexOf(">")>=0){let x="div";d.indexOf("<li")===0&&(x="ul"),d.indexOf("<tr")===0&&(x="tbody"),(d.indexOf("<td")===0||d.indexOf("<th")===0)&&(x="tr"),d.indexOf("<tbody")===0&&(x="table"),d.indexOf("<option")===0&&(x="select");const l=s.createElement(x);l.innerHTML=d;for(let _=0;_<l.childNodes.length;_+=1)u.push(l.childNodes[_])}else u=sQ(e.trim(),t||s)}else if(e.nodeType||e===r||e===s)u.push(e);else if(Array.isArray(e)){if(e instanceof Vl)return e;u=e}return new Vl(oQ(u))}Ut.fn=Vl.prototype;function aQ(...e){const t=Bm(e.map(r=>r.split(" ")));return this.forEach(r=>{r.classList.add(...t)}),this}function lQ(...e){const t=Bm(e.map(r=>r.split(" ")));return this.forEach(r=>{r.classList.remove(...t)}),this}function cQ(...e){const t=Bm(e.map(r=>r.split(" ")));this.forEach(r=>{t.forEach(s=>{r.classList.toggle(s)})})}function uQ(...e){const t=Bm(e.map(r=>r.split(" ")));return y6(this,r=>t.filter(s=>r.classList.contains(s)).length>0).length>0}function hQ(e,t){if(arguments.length===1&&typeof e=="string")return this[0]?this[0].getAttribute(e):void 0;for(let r=0;r<this.length;r+=1)if(arguments.length===2)this[r].setAttribute(e,t);else for(const s in e)this[r][s]=e[s],this[r].setAttribute(s,e[s]);return this}function dQ(e){for(let t=0;t<this.length;t+=1)this[t].removeAttribute(e);return this}function pQ(e){for(let t=0;t<this.length;t+=1)this[t].style.transform=e;return this}function fQ(e){for(let t=0;t<this.length;t+=1)this[t].style.transitionDuration=typeof e!="string"?`${e}ms`:e;return this}function mQ(...e){let[t,r,s,u]=e;typeof e[1]=="function"&&([t,s,u]=e,r=void 0),u||(u=!1);function d(S){const C=S.target;if(!C)return;const k=S.target.dom7EventData||[];if(k.indexOf(S)<0&&k.unshift(S),Ut(C).is(r))s.apply(C,k);else{const D=Ut(C).parents();for(let U=0;U<D.length;U+=1)Ut(D[U]).is(r)&&s.apply(D[U],k)}}function x(S){const C=S&&S.target?S.target.dom7EventData||[]:[];C.indexOf(S)<0&&C.unshift(S),s.apply(this,C)}const l=t.split(" ");let _;for(let S=0;S<this.length;S+=1){const C=this[S];if(r)for(_=0;_<l.length;_+=1){const k=l[_];C.dom7LiveListeners||(C.dom7LiveListeners={}),C.dom7LiveListeners[k]||(C.dom7LiveListeners[k]=[]),C.dom7LiveListeners[k].push({listener:s,proxyListener:d}),C.addEventListener(k,d,u)}else for(_=0;_<l.length;_+=1){const k=l[_];C.dom7Listeners||(C.dom7Listeners={}),C.dom7Listeners[k]||(C.dom7Listeners[k]=[]),C.dom7Listeners[k].push({listener:s,proxyListener:x}),C.addEventListener(k,x,u)}}return this}function gQ(...e){let[t,r,s,u]=e;typeof e[1]=="function"&&([t,s,u]=e,r=void 0),u||(u=!1);const d=t.split(" ");for(let x=0;x<d.length;x+=1){const l=d[x];for(let _=0;_<this.length;_+=1){const S=this[_];let C;if(!r&&S.dom7Listeners?C=S.dom7Listeners[l]:r&&S.dom7LiveListeners&&(C=S.dom7LiveListeners[l]),C&&C.length)for(let k=C.length-1;k>=0;k-=1){const D=C[k];s&&D.listener===s||s&&D.listener&&D.listener.dom7proxy&&D.listener.dom7proxy===s?(S.removeEventListener(l,D.proxyListener,u),C.splice(k,1)):s||(S.removeEventListener(l,D.proxyListener,u),C.splice(k,1))}}}return this}function yQ(...e){const t=mi(),r=e[0].split(" "),s=e[1];for(let u=0;u<r.length;u+=1){const d=r[u];for(let x=0;x<this.length;x+=1){const l=this[x];if(t.CustomEvent){const _=new t.CustomEvent(d,{detail:s,bubbles:!0,cancelable:!0});l.dom7EventData=e.filter((S,C)=>C>0),l.dispatchEvent(_),l.dom7EventData=[],delete l.dom7EventData}}}return this}function xQ(e){const t=this;function r(s){s.target===this&&(e.call(this,s),t.off("transitionend",r))}return e&&t.on("transitionend",r),this}function _Q(e){if(this.length>0){if(e){const t=this.styles();return this[0].offsetWidth+parseFloat(t.getPropertyValue("margin-right"))+parseFloat(t.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null}function vQ(e){if(this.length>0){if(e){const t=this.styles();return this[0].offsetHeight+parseFloat(t.getPropertyValue("margin-top"))+parseFloat(t.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null}function bQ(){if(this.length>0){const e=mi(),t=bi(),r=this[0],s=r.getBoundingClientRect(),u=t.body,d=r.clientTop||u.clientTop||0,x=r.clientLeft||u.clientLeft||0,l=r===e?e.scrollY:r.scrollTop,_=r===e?e.scrollX:r.scrollLeft;return{top:s.top+l-d,left:s.left+_-x}}return null}function wQ(){const e=mi();return this[0]?e.getComputedStyle(this[0],null):{}}function EQ(e,t){const r=mi();let s;if(arguments.length===1)if(typeof e=="string"){if(this[0])return r.getComputedStyle(this[0],null).getPropertyValue(e)}else{for(s=0;s<this.length;s+=1)for(const u in e)this[s].style[u]=e[u];return this}if(arguments.length===2&&typeof e=="string"){for(s=0;s<this.length;s+=1)this[s].style[e]=t;return this}return this}function TQ(e){return e?(this.forEach((t,r)=>{e.apply(t,[t,r])}),this):this}function SQ(e){const t=y6(this,e);return Ut(t)}function CQ(e){if(typeof e=="undefined")return this[0]?this[0].innerHTML:null;for(let t=0;t<this.length;t+=1)this[t].innerHTML=e;return this}function AQ(e){if(typeof e=="undefined")return this[0]?this[0].textContent.trim():null;for(let t=0;t<this.length;t+=1)this[t].textContent=e;return this}function MQ(e){const t=mi(),r=bi(),s=this[0];let u,d;if(!s||typeof e=="undefined")return!1;if(typeof e=="string"){if(s.matches)return s.matches(e);if(s.webkitMatchesSelector)return s.webkitMatchesSelector(e);if(s.msMatchesSelector)return s.msMatchesSelector(e);for(u=Ut(e),d=0;d<u.length;d+=1)if(u[d]===s)return!0;return!1}if(e===r)return s===r;if(e===t)return s===t;if(e.nodeType||e instanceof Vl){for(u=e.nodeType?[e]:e,d=0;d<u.length;d+=1)if(u[d]===s)return!0;return!1}return!1}function kQ(){let e=this[0],t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function PQ(e){if(typeof e=="undefined")return this;const t=this.length;if(e>t-1)return Ut([]);if(e<0){const r=t+e;return r<0?Ut([]):Ut([this[r]])}return Ut([this[e]])}function IQ(...e){let t;const r=bi();for(let s=0;s<e.length;s+=1){t=e[s];for(let u=0;u<this.length;u+=1)if(typeof t=="string"){const d=r.createElement("div");for(d.innerHTML=t;d.firstChild;)this[u].appendChild(d.firstChild)}else if(t instanceof Vl)for(let d=0;d<t.length;d+=1)this[u].appendChild(t[d]);else this[u].appendChild(t)}return this}function DQ(e){const t=bi();let r,s;for(r=0;r<this.length;r+=1)if(typeof e=="string"){const u=t.createElement("div");for(u.innerHTML=e,s=u.childNodes.length-1;s>=0;s-=1)this[r].insertBefore(u.childNodes[s],this[r].childNodes[0])}else if(e instanceof Vl)for(s=0;s<e.length;s+=1)this[r].insertBefore(e[s],this[r].childNodes[0]);else this[r].insertBefore(e,this[r].childNodes[0]);return this}function zQ(e){return this.length>0?e?this[0].nextElementSibling&&Ut(this[0].nextElementSibling).is(e)?Ut([this[0].nextElementSibling]):Ut([]):this[0].nextElementSibling?Ut([this[0].nextElementSibling]):Ut([]):Ut([])}function NQ(e){const t=[];let r=this[0];if(!r)return Ut([]);for(;r.nextElementSibling;){const s=r.nextElementSibling;e?Ut(s).is(e)&&t.push(s):t.push(s),r=s}return Ut(t)}function LQ(e){if(this.length>0){const t=this[0];return e?t.previousElementSibling&&Ut(t.previousElementSibling).is(e)?Ut([t.previousElementSibling]):Ut([]):t.previousElementSibling?Ut([t.previousElementSibling]):Ut([])}return Ut([])}function FQ(e){const t=[];let r=this[0];if(!r)return Ut([]);for(;r.previousElementSibling;){const s=r.previousElementSibling;e?Ut(s).is(e)&&t.push(s):t.push(s),r=s}return Ut(t)}function RQ(e){const t=[];for(let r=0;r<this.length;r+=1)this[r].parentNode!==null&&(e?Ut(this[r].parentNode).is(e)&&t.push(this[r].parentNode):t.push(this[r].parentNode));return Ut(t)}function OQ(e){const t=[];for(let r=0;r<this.length;r+=1){let s=this[r].parentNode;for(;s;)e?Ut(s).is(e)&&t.push(s):t.push(s),s=s.parentNode}return Ut(t)}function BQ(e){let t=this;return typeof e=="undefined"?Ut([]):(t.is(e)||(t=t.parents(e).eq(0)),t)}function $Q(e){const t=[];for(let r=0;r<this.length;r+=1){const s=this[r].querySelectorAll(e);for(let u=0;u<s.length;u+=1)t.push(s[u])}return Ut(t)}function jQ(e){const t=[];for(let r=0;r<this.length;r+=1){const s=this[r].children;for(let u=0;u<s.length;u+=1)(!e||Ut(s[u]).is(e))&&t.push(s[u])}return Ut(t)}function UQ(){for(let e=0;e<this.length;e+=1)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this}const RA={addClass:aQ,removeClass:lQ,hasClass:uQ,toggleClass:cQ,attr:hQ,removeAttr:dQ,transform:pQ,transition:fQ,on:mQ,off:gQ,trigger:yQ,transitionEnd:xQ,outerWidth:_Q,outerHeight:vQ,styles:wQ,offset:bQ,css:EQ,each:TQ,html:CQ,text:AQ,is:MQ,index:kQ,eq:PQ,append:IQ,prepend:DQ,next:zQ,nextAll:NQ,prev:LQ,prevAll:FQ,parent:RQ,parents:OQ,closest:BQ,find:$Q,children:jQ,filter:SQ,remove:UQ};Object.keys(RA).forEach(e=>{Object.defineProperty(Ut.fn,e,{value:RA[e],writable:!0})});function VQ(e){const t=e;Object.keys(t).forEach(r=>{try{t[r]=null}catch{}try{delete t[r]}catch{}})}function my(e,t=0){return setTimeout(e,t)}function wm(){return Date.now()}function GQ(e){const t=mi();let r;return t.getComputedStyle&&(r=t.getComputedStyle(e,null)),!r&&e.currentStyle&&(r=e.currentStyle),r||(r=e.style),r}function qQ(e,t="x"){const r=mi();let s,u,d;const x=GQ(e);return r.WebKitCSSMatrix?(u=x.transform||x.webkitTransform,u.split(",").length>6&&(u=u.split(", ").map(l=>l.replace(",",".")).join(", ")),d=new r.WebKitCSSMatrix(u==="none"?"":u)):(d=x.MozTransform||x.OTransform||x.MsTransform||x.msTransform||x.transform||x.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),s=d.toString().split(",")),t==="x"&&(r.WebKitCSSMatrix?u=d.m41:s.length===16?u=parseFloat(s[12]):u=parseFloat(s[4])),t==="y"&&(r.WebKitCSSMatrix?u=d.m42:s.length===16?u=parseFloat(s[13]):u=parseFloat(s[5])),u||0}function B0(e){return typeof e=="object"&&e!==null&&e.constructor&&Object.prototype.toString.call(e).slice(8,-1)==="Object"}function HQ(e){return typeof window!="undefined"&&typeof window.HTMLElement!="undefined"?e instanceof HTMLElement:e&&(e.nodeType===1||e.nodeType===11)}function Mo(...e){const t=Object(e[0]),r=["__proto__","constructor","prototype"];for(let s=1;s<e.length;s+=1){const u=e[s];if(u!=null&&!HQ(u)){const d=Object.keys(Object(u)).filter(x=>r.indexOf(x)<0);for(let x=0,l=d.length;x<l;x+=1){const _=d[x],S=Object.getOwnPropertyDescriptor(u,_);S!==void 0&&S.enumerable&&(B0(t[_])&&B0(u[_])?u[_].__swiper__?t[_]=u[_]:Mo(t[_],u[_]):!B0(t[_])&&B0(u[_])?(t[_]={},u[_].__swiper__?t[_]=u[_]:Mo(t[_],u[_])):t[_]=u[_])}}}return t}function $0(e,t,r){e.style.setProperty(t,r)}function x6({swiper:e,targetPosition:t,side:r}){const s=mi(),u=-e.translate;let d=null,x;const l=e.params.speed;e.wrapperEl.style.scrollSnapType="none",s.cancelAnimationFrame(e.cssModeFrameID);const _=t>u?"next":"prev",S=(k,D)=>_==="next"&&k>=D||_==="prev"&&k<=D,C=()=>{x=new Date().getTime(),d===null&&(d=x);const k=Math.max(Math.min((x-d)/l,1),0),D=.5-Math.cos(k*Math.PI)/2;let U=u+D*(t-u);if(S(U,t)&&(U=t),e.wrapperEl.scrollTo({[r]:U}),S(U,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[r]:U})}),s.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=s.requestAnimationFrame(C)};C()}let eb;function WQ(){const e=mi(),t=bi();return{smoothScroll:t.documentElement&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch),passiveListener:function(){let s=!1;try{const u=Object.defineProperty({},"passive",{get(){s=!0}});e.addEventListener("testPassiveListener",null,u)}catch{}return s}(),gestures:function(){return"ongesturestart"in e}()}}function _6(){return eb||(eb=WQ()),eb}let tb;function ZQ({userAgent:e}={}){const t=_6(),r=mi(),s=r.navigator.platform,u=e||r.navigator.userAgent,d={ios:!1,android:!1},x=r.screen.width,l=r.screen.height,_=u.match(/(Android);?[\s\/]+([\d.]+)?/);let S=u.match(/(iPad).*OS\s([\d_]+)/);const C=u.match(/(iPod)(.*OS\s([\d_]+))?/),k=!S&&u.match(/(iPhone\sOS|iOS)\s([\d_]+)/),D=s==="Win32";let U=s==="MacIntel";const q=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!S&&U&&t.touch&&q.indexOf(`${x}x${l}`)>=0&&(S=u.match(/(Version)\/([\d.]+)/),S||(S=[0,1,"13_0_0"]),U=!1),_&&!D&&(d.os="android",d.android=!0),(S||k||C)&&(d.os="ios",d.ios=!0),d}function XQ(e={}){return tb||(tb=ZQ(e)),tb}let nb;function KQ(){const e=mi();function t(){const r=e.navigator.userAgent.toLowerCase();return r.indexOf("safari")>=0&&r.indexOf("chrome")<0&&r.indexOf("android")<0}return{isSafari:t(),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent)}}function YQ(){return nb||(nb=KQ()),nb}function JQ({swiper:e,on:t,emit:r}){const s=mi();let u=null,d=null;const x=()=>{!e||e.destroyed||!e.initialized||(r("beforeResize"),r("resize"))},l=()=>{!e||e.destroyed||!e.initialized||(u=new ResizeObserver(C=>{d=s.requestAnimationFrame(()=>{const{width:k,height:D}=e;let U=k,q=D;C.forEach(({contentBoxSize:L,contentRect:K,target:R})=>{R&&R!==e.el||(U=K?K.width:(L[0]||L).inlineSize,q=K?K.height:(L[0]||L).blockSize)}),(U!==k||q!==D)&&x()})}),u.observe(e.el))},_=()=>{d&&s.cancelAnimationFrame(d),u&&u.unobserve&&e.el&&(u.unobserve(e.el),u=null)},S=()=>{!e||e.destroyed||!e.initialized||r("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof s.ResizeObserver!="undefined"){l();return}s.addEventListener("resize",x),s.addEventListener("orientationchange",S)}),t("destroy",()=>{_(),s.removeEventListener("resize",x),s.removeEventListener("orientationchange",S)})}function QQ({swiper:e,extendParams:t,on:r,emit:s}){const u=[],d=mi(),x=(S,C={})=>{const k=d.MutationObserver||d.WebkitMutationObserver,D=new k(U=>{if(U.length===1){s("observerUpdate",U[0]);return}const q=function(){s("observerUpdate",U[0])};d.requestAnimationFrame?d.requestAnimationFrame(q):d.setTimeout(q,0)});D.observe(S,{attributes:typeof C.attributes=="undefined"?!0:C.attributes,childList:typeof C.childList=="undefined"?!0:C.childList,characterData:typeof C.characterData=="undefined"?!0:C.characterData}),u.push(D)},l=()=>{if(!!e.params.observer){if(e.params.observeParents){const S=e.$el.parents();for(let C=0;C<S.length;C+=1)x(S[C])}x(e.$el[0],{childList:e.params.observeSlideChildren}),x(e.$wrapperEl[0],{attributes:!1})}},_=()=>{u.forEach(S=>{S.disconnect()}),u.splice(0,u.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),r("init",l),r("destroy",_)}var eee={on(e,t,r){const s=this;if(!s.eventsListeners||s.destroyed||typeof t!="function")return s;const u=r?"unshift":"push";return e.split(" ").forEach(d=>{s.eventsListeners[d]||(s.eventsListeners[d]=[]),s.eventsListeners[d][u](t)}),s},once(e,t,r){const s=this;if(!s.eventsListeners||s.destroyed||typeof t!="function")return s;function u(...d){s.off(e,u),u.__emitterProxy&&delete u.__emitterProxy,t.apply(s,d)}return u.__emitterProxy=t,s.on(e,u,r)},onAny(e,t){const r=this;if(!r.eventsListeners||r.destroyed||typeof e!="function")return r;const s=t?"unshift":"push";return r.eventsAnyListeners.indexOf(e)<0&&r.eventsAnyListeners[s](e),r},offAny(e){const t=this;if(!t.eventsListeners||t.destroyed||!t.eventsAnyListeners)return t;const r=t.eventsAnyListeners.indexOf(e);return r>=0&&t.eventsAnyListeners.splice(r,1),t},off(e,t){const r=this;return!r.eventsListeners||r.destroyed||!r.eventsListeners||e.split(" ").forEach(s=>{typeof t=="undefined"?r.eventsListeners[s]=[]:r.eventsListeners[s]&&r.eventsListeners[s].forEach((u,d)=>{(u===t||u.__emitterProxy&&u.__emitterProxy===t)&&r.eventsListeners[s].splice(d,1)})}),r},emit(...e){const t=this;if(!t.eventsListeners||t.destroyed||!t.eventsListeners)return t;let r,s,u;return typeof e[0]=="string"||Array.isArray(e[0])?(r=e[0],s=e.slice(1,e.length),u=t):(r=e[0].events,s=e[0].data,u=e[0].context||t),s.unshift(u),(Array.isArray(r)?r:r.split(" ")).forEach(x=>{t.eventsAnyListeners&&t.eventsAnyListeners.length&&t.eventsAnyListeners.forEach(l=>{l.apply(u,[x,...s])}),t.eventsListeners&&t.eventsListeners[x]&&t.eventsListeners[x].forEach(l=>{l.apply(u,s)})}),t}};function tee(){const e=this;let t,r;const s=e.$el;typeof e.params.width!="undefined"&&e.params.width!==null?t=e.params.width:t=s[0].clientWidth,typeof e.params.height!="undefined"&&e.params.height!==null?r=e.params.height:r=s[0].clientHeight,!(t===0&&e.isHorizontal()||r===0&&e.isVertical())&&(t=t-parseInt(s.css("padding-left")||0,10)-parseInt(s.css("padding-right")||0,10),r=r-parseInt(s.css("padding-top")||0,10)-parseInt(s.css("padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(r)&&(r=0),Object.assign(e,{width:t,height:r,size:e.isHorizontal()?t:r}))}function nee(){const e=this;function t(Fe){return e.isHorizontal()?Fe:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[Fe]}function r(Fe,Le){return parseFloat(Fe.getPropertyValue(t(Le))||0)}const s=e.params,{$wrapperEl:u,size:d,rtlTranslate:x,wrongRTL:l}=e,_=e.virtual&&s.virtual.enabled,S=_?e.virtual.slides.length:e.slides.length,C=u.children(`.${e.params.slideClass}`),k=_?e.virtual.slides.length:C.length;let D=[];const U=[],q=[];let L=s.slidesOffsetBefore;typeof L=="function"&&(L=s.slidesOffsetBefore.call(e));let K=s.slidesOffsetAfter;typeof K=="function"&&(K=s.slidesOffsetAfter.call(e));const R=e.snapGrid.length,F=e.slidesGrid.length;let V=s.spaceBetween,J=-L,re=0,fe=0;if(typeof d=="undefined")return;typeof V=="string"&&V.indexOf("%")>=0&&(V=parseFloat(V.replace("%",""))/100*d),e.virtualSize=-V,x?C.css({marginLeft:"",marginBottom:"",marginTop:""}):C.css({marginRight:"",marginBottom:"",marginTop:""}),s.centeredSlides&&s.cssMode&&($0(e.wrapperEl,"--swiper-centered-offset-before",""),$0(e.wrapperEl,"--swiper-centered-offset-after",""));const be=s.grid&&s.grid.rows>1&&e.grid;be&&e.grid.initSlides(k);let ce;const ve=s.slidesPerView==="auto"&&s.breakpoints&&Object.keys(s.breakpoints).filter(Fe=>typeof s.breakpoints[Fe].slidesPerView!="undefined").length>0;for(let Fe=0;Fe<k;Fe+=1){ce=0;const Le=C.eq(Fe);if(be&&e.grid.updateSlide(Fe,Le,k,t),Le.css("display")!=="none"){if(s.slidesPerView==="auto"){ve&&(C[Fe].style[t("width")]="");const Ie=getComputedStyle(Le[0]),Ke=Le[0].style.transform,bt=Le[0].style.webkitTransform;if(Ke&&(Le[0].style.transform="none"),bt&&(Le[0].style.webkitTransform="none"),s.roundLengths)ce=e.isHorizontal()?Le.outerWidth(!0):Le.outerHeight(!0);else{const ot=r(Ie,"width"),Ot=r(Ie,"padding-left"),Dt=r(Ie,"padding-right"),Ze=r(Ie,"margin-left"),Ye=r(Ie,"margin-right"),De=Ie.getPropertyValue("box-sizing");if(De&&De==="border-box")ce=ot+Ze+Ye;else{const{clientWidth:_t,offsetWidth:mt}=Le[0];ce=ot+Ot+Dt+Ze+Ye+(mt-_t)}}Ke&&(Le[0].style.transform=Ke),bt&&(Le[0].style.webkitTransform=bt),s.roundLengths&&(ce=Math.floor(ce))}else ce=(d-(s.slidesPerView-1)*V)/s.slidesPerView,s.roundLengths&&(ce=Math.floor(ce)),C[Fe]&&(C[Fe].style[t("width")]=`${ce}px`);C[Fe]&&(C[Fe].swiperSlideSize=ce),q.push(ce),s.centeredSlides?(J=J+ce/2+re/2+V,re===0&&Fe!==0&&(J=J-d/2-V),Fe===0&&(J=J-d/2-V),Math.abs(J)<1/1e3&&(J=0),s.roundLengths&&(J=Math.floor(J)),fe%s.slidesPerGroup===0&&D.push(J),U.push(J)):(s.roundLengths&&(J=Math.floor(J)),(fe-Math.min(e.params.slidesPerGroupSkip,fe))%e.params.slidesPerGroup===0&&D.push(J),U.push(J),J=J+ce+V),e.virtualSize+=ce+V,re=ce,fe+=1}}if(e.virtualSize=Math.max(e.virtualSize,d)+K,x&&l&&(s.effect==="slide"||s.effect==="coverflow")&&u.css({width:`${e.virtualSize+s.spaceBetween}px`}),s.setWrapperSize&&u.css({[t("width")]:`${e.virtualSize+s.spaceBetween}px`}),be&&e.grid.updateWrapperSize(ce,D,t),!s.centeredSlides){const Fe=[];for(let Le=0;Le<D.length;Le+=1){let Ie=D[Le];s.roundLengths&&(Ie=Math.floor(Ie)),D[Le]<=e.virtualSize-d&&Fe.push(Ie)}D=Fe,Math.floor(e.virtualSize-d)-Math.floor(D[D.length-1])>1&&D.push(e.virtualSize-d)}if(D.length===0&&(D=[0]),s.spaceBetween!==0){const Fe=e.isHorizontal()&&x?"marginLeft":t("marginRight");C.filter((Le,Ie)=>s.cssMode?Ie!==C.length-1:!0).css({[Fe]:`${V}px`})}if(s.centeredSlides&&s.centeredSlidesBounds){let Fe=0;q.forEach(Ie=>{Fe+=Ie+(s.spaceBetween?s.spaceBetween:0)}),Fe-=s.spaceBetween;const Le=Fe-d;D=D.map(Ie=>Ie<0?-L:Ie>Le?Le+K:Ie)}if(s.centerInsufficientSlides){let Fe=0;if(q.forEach(Le=>{Fe+=Le+(s.spaceBetween?s.spaceBetween:0)}),Fe-=s.spaceBetween,Fe<d){const Le=(d-Fe)/2;D.forEach((Ie,Ke)=>{D[Ke]=Ie-Le}),U.forEach((Ie,Ke)=>{U[Ke]=Ie+Le})}}if(Object.assign(e,{slides:C,snapGrid:D,slidesGrid:U,slidesSizesGrid:q}),s.centeredSlides&&s.cssMode&&!s.centeredSlidesBounds){$0(e.wrapperEl,"--swiper-centered-offset-before",`${-D[0]}px`),$0(e.wrapperEl,"--swiper-centered-offset-after",`${e.size/2-q[q.length-1]/2}px`);const Fe=-e.snapGrid[0],Le=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map(Ie=>Ie+Fe),e.slidesGrid=e.slidesGrid.map(Ie=>Ie+Le)}if(k!==S&&e.emit("slidesLengthChange"),D.length!==R&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),U.length!==F&&e.emit("slidesGridLengthChange"),s.watchSlidesProgress&&e.updateSlidesOffset(),!_&&!s.cssMode&&(s.effect==="slide"||s.effect==="fade")){const Fe=`${s.containerModifierClass}backface-hidden`,Le=e.$el.hasClass(Fe);k<=s.maxBackfaceHiddenSlides?Le||e.$el.addClass(Fe):Le&&e.$el.removeClass(Fe)}}function ree(e){const t=this,r=[],s=t.virtual&&t.params.virtual.enabled;let u=0,d;typeof e=="number"?t.setTransition(e):e===!0&&t.setTransition(t.params.speed);const x=l=>s?t.slides.filter(_=>parseInt(_.getAttribute("data-swiper-slide-index"),10)===l)[0]:t.slides.eq(l)[0];if(t.params.slidesPerView!=="auto"&&t.params.slidesPerView>1)if(t.params.centeredSlides)(t.visibleSlides||Ut([])).each(l=>{r.push(l)});else for(d=0;d<Math.ceil(t.params.slidesPerView);d+=1){const l=t.activeIndex+d;if(l>t.slides.length&&!s)break;r.push(x(l))}else r.push(x(t.activeIndex));for(d=0;d<r.length;d+=1)if(typeof r[d]!="undefined"){const l=r[d].offsetHeight;u=l>u?l:u}(u||u===0)&&t.$wrapperEl.css("height",`${u}px`)}function iee(){const e=this,t=e.slides;for(let r=0;r<t.length;r+=1)t[r].swiperSlideOffset=e.isHorizontal()?t[r].offsetLeft:t[r].offsetTop}function oee(e=this&&this.translate||0){const t=this,r=t.params,{slides:s,rtlTranslate:u,snapGrid:d}=t;if(s.length===0)return;typeof s[0].swiperSlideOffset=="undefined"&&t.updateSlidesOffset();let x=-e;u&&(x=e),s.removeClass(r.slideVisibleClass),t.visibleSlidesIndexes=[],t.visibleSlides=[];for(let l=0;l<s.length;l+=1){const _=s[l];let S=_.swiperSlideOffset;r.cssMode&&r.centeredSlides&&(S-=s[0].swiperSlideOffset);const C=(x+(r.centeredSlides?t.minTranslate():0)-S)/(_.swiperSlideSize+r.spaceBetween),k=(x-d[0]+(r.centeredSlides?t.minTranslate():0)-S)/(_.swiperSlideSize+r.spaceBetween),D=-(x-S),U=D+t.slidesSizesGrid[l];(D>=0&&D<t.size-1||U>1&&U<=t.size||D<=0&&U>=t.size)&&(t.visibleSlides.push(_),t.visibleSlidesIndexes.push(l),s.eq(l).addClass(r.slideVisibleClass)),_.progress=u?-C:C,_.originalProgress=u?-k:k}t.visibleSlides=Ut(t.visibleSlides)}function see(e){const t=this;if(typeof e=="undefined"){const S=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*S||0}const r=t.params,s=t.maxTranslate()-t.minTranslate();let{progress:u,isBeginning:d,isEnd:x}=t;const l=d,_=x;s===0?(u=0,d=!0,x=!0):(u=(e-t.minTranslate())/s,d=u<=0,x=u>=1),Object.assign(t,{progress:u,isBeginning:d,isEnd:x}),(r.watchSlidesProgress||r.centeredSlides&&r.autoHeight)&&t.updateSlidesProgress(e),d&&!l&&t.emit("reachBeginning toEdge"),x&&!_&&t.emit("reachEnd toEdge"),(l&&!d||_&&!x)&&t.emit("fromEdge"),t.emit("progress",u)}function aee(){const e=this,{slides:t,params:r,$wrapperEl:s,activeIndex:u,realIndex:d}=e,x=e.virtual&&r.virtual.enabled;t.removeClass(`${r.slideActiveClass} ${r.slideNextClass} ${r.slidePrevClass} ${r.slideDuplicateActiveClass} ${r.slideDuplicateNextClass} ${r.slideDuplicatePrevClass}`);let l;x?l=e.$wrapperEl.find(`.${r.slideClass}[data-swiper-slide-index="${u}"]`):l=t.eq(u),l.addClass(r.slideActiveClass),r.loop&&(l.hasClass(r.slideDuplicateClass)?s.children(`.${r.slideClass}:not(.${r.slideDuplicateClass})[data-swiper-slide-index="${d}"]`).addClass(r.slideDuplicateActiveClass):s.children(`.${r.slideClass}.${r.slideDuplicateClass}[data-swiper-slide-index="${d}"]`).addClass(r.slideDuplicateActiveClass));let _=l.nextAll(`.${r.slideClass}`).eq(0).addClass(r.slideNextClass);r.loop&&_.length===0&&(_=t.eq(0),_.addClass(r.slideNextClass));let S=l.prevAll(`.${r.slideClass}`).eq(0).addClass(r.slidePrevClass);r.loop&&S.length===0&&(S=t.eq(-1),S.addClass(r.slidePrevClass)),r.loop&&(_.hasClass(r.slideDuplicateClass)?s.children(`.${r.slideClass}:not(.${r.slideDuplicateClass})[data-swiper-slide-index="${_.attr("data-swiper-slide-index")}"]`).addClass(r.slideDuplicateNextClass):s.children(`.${r.slideClass}.${r.slideDuplicateClass}[data-swiper-slide-index="${_.attr("data-swiper-slide-index")}"]`).addClass(r.slideDuplicateNextClass),S.hasClass(r.slideDuplicateClass)?s.children(`.${r.slideClass}:not(.${r.slideDuplicateClass})[data-swiper-slide-index="${S.attr("data-swiper-slide-index")}"]`).addClass(r.slideDuplicatePrevClass):s.children(`.${r.slideClass}.${r.slideDuplicateClass}[data-swiper-slide-index="${S.attr("data-swiper-slide-index")}"]`).addClass(r.slideDuplicatePrevClass)),e.emitSlidesClasses()}function lee(e){const t=this,r=t.rtlTranslate?t.translate:-t.translate,{slidesGrid:s,snapGrid:u,params:d,activeIndex:x,realIndex:l,snapIndex:_}=t;let S=e,C;if(typeof S=="undefined"){for(let D=0;D<s.length;D+=1)typeof s[D+1]!="undefined"?r>=s[D]&&r<s[D+1]-(s[D+1]-s[D])/2?S=D:r>=s[D]&&r<s[D+1]&&(S=D+1):r>=s[D]&&(S=D);d.normalizeSlideIndex&&(S<0||typeof S=="undefined")&&(S=0)}if(u.indexOf(r)>=0)C=u.indexOf(r);else{const D=Math.min(d.slidesPerGroupSkip,S);C=D+Math.floor((S-D)/d.slidesPerGroup)}if(C>=u.length&&(C=u.length-1),S===x){C!==_&&(t.snapIndex=C,t.emit("snapIndexChange"));return}const k=parseInt(t.slides.eq(S).attr("data-swiper-slide-index")||S,10);Object.assign(t,{snapIndex:C,realIndex:k,previousIndex:x,activeIndex:S}),t.emit("activeIndexChange"),t.emit("snapIndexChange"),l!==k&&t.emit("realIndexChange"),(t.initialized||t.params.runCallbacksOnInit)&&t.emit("slideChange")}function cee(e){const t=this,r=t.params,s=Ut(e).closest(`.${r.slideClass}`)[0];let u=!1,d;if(s){for(let x=0;x<t.slides.length;x+=1)if(t.slides[x]===s){u=!0,d=x;break}}if(s&&u)t.clickedSlide=s,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(Ut(s).attr("data-swiper-slide-index"),10):t.clickedIndex=d;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}r.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}var uee={updateSize:tee,updateSlides:nee,updateAutoHeight:ree,updateSlidesOffset:iee,updateSlidesProgress:oee,updateProgress:see,updateSlidesClasses:aee,updateActiveIndex:lee,updateClickedSlide:cee};function hee(e=this.isHorizontal()?"x":"y"){const t=this,{params:r,rtlTranslate:s,translate:u,$wrapperEl:d}=t;if(r.virtualTranslate)return s?-u:u;if(r.cssMode)return u;let x=qQ(d[0],e);return s&&(x=-x),x||0}function dee(e,t){const r=this,{rtlTranslate:s,params:u,$wrapperEl:d,wrapperEl:x,progress:l}=r;let _=0,S=0;const C=0;r.isHorizontal()?_=s?-e:e:S=e,u.roundLengths&&(_=Math.floor(_),S=Math.floor(S)),u.cssMode?x[r.isHorizontal()?"scrollLeft":"scrollTop"]=r.isHorizontal()?-_:-S:u.virtualTranslate||d.transform(`translate3d(${_}px, ${S}px, ${C}px)`),r.previousTranslate=r.translate,r.translate=r.isHorizontal()?_:S;let k;const D=r.maxTranslate()-r.minTranslate();D===0?k=0:k=(e-r.minTranslate())/D,k!==l&&r.updateProgress(e),r.emit("setTranslate",r.translate,t)}function pee(){return-this.snapGrid[0]}function fee(){return-this.snapGrid[this.snapGrid.length-1]}function mee(e=0,t=this.params.speed,r=!0,s=!0,u){const d=this,{params:x,wrapperEl:l}=d;if(d.animating&&x.preventInteractionOnTransition)return!1;const _=d.minTranslate(),S=d.maxTranslate();let C;if(s&&e>_?C=_:s&&e<S?C=S:C=e,d.updateProgress(C),x.cssMode){const k=d.isHorizontal();if(t===0)l[k?"scrollLeft":"scrollTop"]=-C;else{if(!d.support.smoothScroll)return x6({swiper:d,targetPosition:-C,side:k?"left":"top"}),!0;l.scrollTo({[k?"left":"top"]:-C,behavior:"smooth"})}return!0}return t===0?(d.setTransition(0),d.setTranslate(C),r&&(d.emit("beforeTransitionStart",t,u),d.emit("transitionEnd"))):(d.setTransition(t),d.setTranslate(C),r&&(d.emit("beforeTransitionStart",t,u),d.emit("transitionStart")),d.animating||(d.animating=!0,d.onTranslateToWrapperTransitionEnd||(d.onTranslateToWrapperTransitionEnd=function(D){!d||d.destroyed||D.target===this&&(d.$wrapperEl[0].removeEventListener("transitionend",d.onTranslateToWrapperTransitionEnd),d.$wrapperEl[0].removeEventListener("webkitTransitionEnd",d.onTranslateToWrapperTransitionEnd),d.onTranslateToWrapperTransitionEnd=null,delete d.onTranslateToWrapperTransitionEnd,r&&d.emit("transitionEnd"))}),d.$wrapperEl[0].addEventListener("transitionend",d.onTranslateToWrapperTransitionEnd),d.$wrapperEl[0].addEventListener("webkitTransitionEnd",d.onTranslateToWrapperTransitionEnd))),!0}var gee={getTranslate:hee,setTranslate:dee,minTranslate:pee,maxTranslate:fee,translateTo:mee};function yee(e,t){const r=this;r.params.cssMode||r.$wrapperEl.transition(e),r.emit("setTransition",e,t)}function v6({swiper:e,runCallbacks:t,direction:r,step:s}){const{activeIndex:u,previousIndex:d}=e;let x=r;if(x||(u>d?x="next":u<d?x="prev":x="reset"),e.emit(`transition${s}`),t&&u!==d){if(x==="reset"){e.emit(`slideResetTransition${s}`);return}e.emit(`slideChangeTransition${s}`),x==="next"?e.emit(`slideNextTransition${s}`):e.emit(`slidePrevTransition${s}`)}}function xee(e=!0,t){const r=this,{params:s}=r;s.cssMode||(s.autoHeight&&r.updateAutoHeight(),v6({swiper:r,runCallbacks:e,direction:t,step:"Start"}))}function _ee(e=!0,t){const r=this,{params:s}=r;r.animating=!1,!s.cssMode&&(r.setTransition(0),v6({swiper:r,runCallbacks:e,direction:t,step:"End"}))}var vee={setTransition:yee,transitionStart:xee,transitionEnd:_ee};function bee(e=0,t=this.params.speed,r=!0,s,u){if(typeof e!="number"&&typeof e!="string")throw new Error(`The 'index' argument cannot have type other than 'number' or 'string'. [${typeof e}] given.`);if(typeof e=="string"){const V=parseInt(e,10);if(!isFinite(V))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${e}] given.`);e=V}const d=this;let x=e;x<0&&(x=0);const{params:l,snapGrid:_,slidesGrid:S,previousIndex:C,activeIndex:k,rtlTranslate:D,wrapperEl:U,enabled:q}=d;if(d.animating&&l.preventInteractionOnTransition||!q&&!s&&!u)return!1;const L=Math.min(d.params.slidesPerGroupSkip,x);let K=L+Math.floor((x-L)/d.params.slidesPerGroup);K>=_.length&&(K=_.length-1);const R=-_[K];if(l.normalizeSlideIndex)for(let V=0;V<S.length;V+=1){const J=-Math.floor(R*100),re=Math.floor(S[V]*100),fe=Math.floor(S[V+1]*100);typeof S[V+1]!="undefined"?J>=re&&J<fe-(fe-re)/2?x=V:J>=re&&J<fe&&(x=V+1):J>=re&&(x=V)}if(d.initialized&&x!==k&&(!d.allowSlideNext&&R<d.translate&&R<d.minTranslate()||!d.allowSlidePrev&&R>d.translate&&R>d.maxTranslate()&&(k||0)!==x))return!1;x!==(C||0)&&r&&d.emit("beforeSlideChangeStart"),d.updateProgress(R);let F;if(x>k?F="next":x<k?F="prev":F="reset",D&&-R===d.translate||!D&&R===d.translate)return d.updateActiveIndex(x),l.autoHeight&&d.updateAutoHeight(),d.updateSlidesClasses(),l.effect!=="slide"&&d.setTranslate(R),F!=="reset"&&(d.transitionStart(r,F),d.transitionEnd(r,F)),!1;if(l.cssMode){const V=d.isHorizontal(),J=D?R:-R;if(t===0){const re=d.virtual&&d.params.virtual.enabled;re&&(d.wrapperEl.style.scrollSnapType="none",d._immediateVirtual=!0),U[V?"scrollLeft":"scrollTop"]=J,re&&requestAnimationFrame(()=>{d.wrapperEl.style.scrollSnapType="",d._swiperImmediateVirtual=!1})}else{if(!d.support.smoothScroll)return x6({swiper:d,targetPosition:J,side:V?"left":"top"}),!0;U.scrollTo({[V?"left":"top"]:J,behavior:"smooth"})}return!0}return d.setTransition(t),d.setTranslate(R),d.updateActiveIndex(x),d.updateSlidesClasses(),d.emit("beforeTransitionStart",t,s),d.transitionStart(r,F),t===0?d.transitionEnd(r,F):d.animating||(d.animating=!0,d.onSlideToWrapperTransitionEnd||(d.onSlideToWrapperTransitionEnd=function(J){!d||d.destroyed||J.target===this&&(d.$wrapperEl[0].removeEventListener("transitionend",d.onSlideToWrapperTransitionEnd),d.$wrapperEl[0].removeEventListener("webkitTransitionEnd",d.onSlideToWrapperTransitionEnd),d.onSlideToWrapperTransitionEnd=null,delete d.onSlideToWrapperTransitionEnd,d.transitionEnd(r,F))}),d.$wrapperEl[0].addEventListener("transitionend",d.onSlideToWrapperTransitionEnd),d.$wrapperEl[0].addEventListener("webkitTransitionEnd",d.onSlideToWrapperTransitionEnd)),!0}function wee(e=0,t=this.params.speed,r=!0,s){if(typeof e=="string"){const x=parseInt(e,10);if(!isFinite(x))throw new Error(`The passed-in 'index' (string) couldn't be converted to 'number'. [${e}] given.`);e=x}const u=this;let d=e;return u.params.loop&&(d+=u.loopedSlides),u.slideTo(d,t,r,s)}function Eee(e=this.params.speed,t=!0,r){const s=this,{animating:u,enabled:d,params:x}=s;if(!d)return s;let l=x.slidesPerGroup;x.slidesPerView==="auto"&&x.slidesPerGroup===1&&x.slidesPerGroupAuto&&(l=Math.max(s.slidesPerViewDynamic("current",!0),1));const _=s.activeIndex<x.slidesPerGroupSkip?1:l;if(x.loop){if(u&&x.loopPreventsSlide)return!1;s.loopFix(),s._clientLeft=s.$wrapperEl[0].clientLeft}return x.rewind&&s.isEnd?s.slideTo(0,e,t,r):s.slideTo(s.activeIndex+_,e,t,r)}function Tee(e=this.params.speed,t=!0,r){const s=this,{params:u,animating:d,snapGrid:x,slidesGrid:l,rtlTranslate:_,enabled:S}=s;if(!S)return s;if(u.loop){if(d&&u.loopPreventsSlide)return!1;s.loopFix(),s._clientLeft=s.$wrapperEl[0].clientLeft}const C=_?s.translate:-s.translate;function k(K){return K<0?-Math.floor(Math.abs(K)):Math.floor(K)}const D=k(C),U=x.map(K=>k(K));let q=x[U.indexOf(D)-1];if(typeof q=="undefined"&&u.cssMode){let K;x.forEach((R,F)=>{D>=R&&(K=F)}),typeof K!="undefined"&&(q=x[K>0?K-1:K])}let L=0;if(typeof q!="undefined"&&(L=l.indexOf(q),L<0&&(L=s.activeIndex-1),u.slidesPerView==="auto"&&u.slidesPerGroup===1&&u.slidesPerGroupAuto&&(L=L-s.slidesPerViewDynamic("previous",!0)+1,L=Math.max(L,0))),u.rewind&&s.isBeginning){const K=s.params.virtual&&s.params.virtual.enabled&&s.virtual?s.virtual.slides.length-1:s.slides.length-1;return s.slideTo(K,e,t,r)}return s.slideTo(L,e,t,r)}function See(e=this.params.speed,t=!0,r){const s=this;return s.slideTo(s.activeIndex,e,t,r)}function Cee(e=this.params.speed,t=!0,r,s=.5){const u=this;let d=u.activeIndex;const x=Math.min(u.params.slidesPerGroupSkip,d),l=x+Math.floor((d-x)/u.params.slidesPerGroup),_=u.rtlTranslate?u.translate:-u.translate;if(_>=u.snapGrid[l]){const S=u.snapGrid[l],C=u.snapGrid[l+1];_-S>(C-S)*s&&(d+=u.params.slidesPerGroup)}else{const S=u.snapGrid[l-1],C=u.snapGrid[l];_-S<=(C-S)*s&&(d-=u.params.slidesPerGroup)}return d=Math.max(d,0),d=Math.min(d,u.slidesGrid.length-1),u.slideTo(d,e,t,r)}function Aee(){const e=this,{params:t,$wrapperEl:r}=e,s=t.slidesPerView==="auto"?e.slidesPerViewDynamic():t.slidesPerView;let u=e.clickedIndex,d;if(t.loop){if(e.animating)return;d=parseInt(Ut(e.clickedSlide).attr("data-swiper-slide-index"),10),t.centeredSlides?u<e.loopedSlides-s/2||u>e.slides.length-e.loopedSlides+s/2?(e.loopFix(),u=r.children(`.${t.slideClass}[data-swiper-slide-index="${d}"]:not(.${t.slideDuplicateClass})`).eq(0).index(),my(()=>{e.slideTo(u)})):e.slideTo(u):u>e.slides.length-s?(e.loopFix(),u=r.children(`.${t.slideClass}[data-swiper-slide-index="${d}"]:not(.${t.slideDuplicateClass})`).eq(0).index(),my(()=>{e.slideTo(u)})):e.slideTo(u)}else e.slideTo(u)}var Mee={slideTo:bee,slideToLoop:wee,slideNext:Eee,slidePrev:Tee,slideReset:See,slideToClosest:Cee,slideToClickedSlide:Aee};function kee(){const e=this,t=bi(),{params:r,$wrapperEl:s}=e,u=s.children().length>0?Ut(s.children()[0].parentNode):s;u.children(`.${r.slideClass}.${r.slideDuplicateClass}`).remove();let d=u.children(`.${r.slideClass}`);if(r.loopFillGroupWithBlank){const _=r.slidesPerGroup-d.length%r.slidesPerGroup;if(_!==r.slidesPerGroup){for(let S=0;S<_;S+=1){const C=Ut(t.createElement("div")).addClass(`${r.slideClass} ${r.slideBlankClass}`);u.append(C)}d=u.children(`.${r.slideClass}`)}}r.slidesPerView==="auto"&&!r.loopedSlides&&(r.loopedSlides=d.length),e.loopedSlides=Math.ceil(parseFloat(r.loopedSlides||r.slidesPerView,10)),e.loopedSlides+=r.loopAdditionalSlides,e.loopedSlides>d.length&&e.params.loopedSlidesLimit&&(e.loopedSlides=d.length);const x=[],l=[];d.each((_,S)=>{Ut(_).attr("data-swiper-slide-index",S)});for(let _=0;_<e.loopedSlides;_+=1){const S=_-Math.floor(_/d.length)*d.length;l.push(d.eq(S)[0]),x.unshift(d.eq(d.length-S-1)[0])}for(let _=0;_<l.length;_+=1)u.append(Ut(l[_].cloneNode(!0)).addClass(r.slideDuplicateClass));for(let _=x.length-1;_>=0;_-=1)u.prepend(Ut(x[_].cloneNode(!0)).addClass(r.slideDuplicateClass))}function Pee(){const e=this;e.emit("beforeLoopFix");const{activeIndex:t,slides:r,loopedSlides:s,allowSlidePrev:u,allowSlideNext:d,snapGrid:x,rtlTranslate:l}=e;let _;e.allowSlidePrev=!0,e.allowSlideNext=!0;const C=-x[t]-e.getTranslate();t<s?(_=r.length-s*3+t,_+=s,e.slideTo(_,0,!1,!0)&&C!==0&&e.setTranslate((l?-e.translate:e.translate)-C)):t>=r.length-s&&(_=-r.length+t+s,_+=s,e.slideTo(_,0,!1,!0)&&C!==0&&e.setTranslate((l?-e.translate:e.translate)-C)),e.allowSlidePrev=u,e.allowSlideNext=d,e.emit("loopFix")}function Iee(){const e=this,{$wrapperEl:t,params:r,slides:s}=e;t.children(`.${r.slideClass}.${r.slideDuplicateClass},.${r.slideClass}.${r.slideBlankClass}`).remove(),s.removeAttr("data-swiper-slide-index")}var Dee={loopCreate:kee,loopFix:Pee,loopDestroy:Iee};function zee(e){const t=this;if(t.support.touch||!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)return;const r=t.params.touchEventsTarget==="container"?t.el:t.wrapperEl;r.style.cursor="move",r.style.cursor=e?"grabbing":"grab"}function Nee(){const e=this;e.support.touch||e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e[e.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="")}var Lee={setGrabCursor:zee,unsetGrabCursor:Nee};function Fee(e,t=this){function r(s){if(!s||s===bi()||s===mi())return null;s.assignedSlot&&(s=s.assignedSlot);const u=s.closest(e);return!u&&!s.getRootNode?null:u||r(s.getRootNode().host)}return r(t)}function Ree(e){const t=this,r=bi(),s=mi(),u=t.touchEventsData,{params:d,touches:x,enabled:l}=t;if(!l||t.animating&&d.preventInteractionOnTransition)return;!t.animating&&d.cssMode&&d.loop&&t.loopFix();let _=e;_.originalEvent&&(_=_.originalEvent);let S=Ut(_.target);if(d.touchEventsTarget==="wrapper"&&!S.closest(t.wrapperEl).length||(u.isTouchEvent=_.type==="touchstart",!u.isTouchEvent&&"which"in _&&_.which===3)||!u.isTouchEvent&&"button"in _&&_.button>0||u.isTouched&&u.isMoved)return;const C=!!d.noSwipingClass&&d.noSwipingClass!=="",k=e.composedPath?e.composedPath():e.path;C&&_.target&&_.target.shadowRoot&&k&&(S=Ut(k[0]));const D=d.noSwipingSelector?d.noSwipingSelector:`.${d.noSwipingClass}`,U=!!(_.target&&_.target.shadowRoot);if(d.noSwiping&&(U?Fee(D,S[0]):S.closest(D)[0])){t.allowClick=!0;return}if(d.swipeHandler&&!S.closest(d.swipeHandler)[0])return;x.currentX=_.type==="touchstart"?_.targetTouches[0].pageX:_.pageX,x.currentY=_.type==="touchstart"?_.targetTouches[0].pageY:_.pageY;const q=x.currentX,L=x.currentY,K=d.edgeSwipeDetection||d.iOSEdgeSwipeDetection,R=d.edgeSwipeThreshold||d.iOSEdgeSwipeThreshold;if(K&&(q<=R||q>=s.innerWidth-R))if(K==="prevent")e.preventDefault();else return;if(Object.assign(u,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),x.startX=q,x.startY=L,u.touchStartTime=wm(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,d.threshold>0&&(u.allowThresholdMove=!1),_.type!=="touchstart"){let F=!0;S.is(u.focusableElements)&&(F=!1,S[0].nodeName==="SELECT"&&(u.isTouched=!1)),r.activeElement&&Ut(r.activeElement).is(u.focusableElements)&&r.activeElement!==S[0]&&r.activeElement.blur();const V=F&&t.allowTouchMove&&d.touchStartPreventDefault;(d.touchStartForcePreventDefault||V)&&!S[0].isContentEditable&&_.preventDefault()}t.params.freeMode&&t.params.freeMode.enabled&&t.freeMode&&t.animating&&!d.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",_)}function Oee(e){const t=bi(),r=this,s=r.touchEventsData,{params:u,touches:d,rtlTranslate:x,enabled:l}=r;if(!l)return;let _=e;if(_.originalEvent&&(_=_.originalEvent),!s.isTouched){s.startMoving&&s.isScrolling&&r.emit("touchMoveOpposite",_);return}if(s.isTouchEvent&&_.type!=="touchmove")return;const S=_.type==="touchmove"&&_.targetTouches&&(_.targetTouches[0]||_.changedTouches[0]),C=_.type==="touchmove"?S.pageX:_.pageX,k=_.type==="touchmove"?S.pageY:_.pageY;if(_.preventedByNestedSwiper){d.startX=C,d.startY=k;return}if(!r.allowTouchMove){Ut(_.target).is(s.focusableElements)||(r.allowClick=!1),s.isTouched&&(Object.assign(d,{startX:C,startY:k,currentX:C,currentY:k}),s.touchStartTime=wm());return}if(s.isTouchEvent&&u.touchReleaseOnEdges&&!u.loop){if(r.isVertical()){if(k<d.startY&&r.translate<=r.maxTranslate()||k>d.startY&&r.translate>=r.minTranslate()){s.isTouched=!1,s.isMoved=!1;return}}else if(C<d.startX&&r.translate<=r.maxTranslate()||C>d.startX&&r.translate>=r.minTranslate())return}if(s.isTouchEvent&&t.activeElement&&_.target===t.activeElement&&Ut(_.target).is(s.focusableElements)){s.isMoved=!0,r.allowClick=!1;return}if(s.allowTouchCallbacks&&r.emit("touchMove",_),_.targetTouches&&_.targetTouches.length>1)return;d.currentX=C,d.currentY=k;const D=d.currentX-d.startX,U=d.currentY-d.startY;if(r.params.threshold&&Math.sqrt(D**2+U**2)<r.params.threshold)return;if(typeof s.isScrolling=="undefined"){let R;r.isHorizontal()&&d.currentY===d.startY||r.isVertical()&&d.currentX===d.startX?s.isScrolling=!1:D*D+U*U>=25&&(R=Math.atan2(Math.abs(U),Math.abs(D))*180/Math.PI,s.isScrolling=r.isHorizontal()?R>u.touchAngle:90-R>u.touchAngle)}if(s.isScrolling&&r.emit("touchMoveOpposite",_),typeof s.startMoving=="undefined"&&(d.currentX!==d.startX||d.currentY!==d.startY)&&(s.startMoving=!0),s.isScrolling){s.isTouched=!1;return}if(!s.startMoving)return;r.allowClick=!1,!u.cssMode&&_.cancelable&&_.preventDefault(),u.touchMoveStopPropagation&&!u.nested&&_.stopPropagation(),s.isMoved||(u.loop&&!u.cssMode&&r.loopFix(),s.startTranslate=r.getTranslate(),r.setTransition(0),r.animating&&r.$wrapperEl.trigger("webkitTransitionEnd transitionend"),s.allowMomentumBounce=!1,u.grabCursor&&(r.allowSlideNext===!0||r.allowSlidePrev===!0)&&r.setGrabCursor(!0),r.emit("sliderFirstMove",_)),r.emit("sliderMove",_),s.isMoved=!0;let q=r.isHorizontal()?D:U;d.diff=q,q*=u.touchRatio,x&&(q=-q),r.swipeDirection=q>0?"prev":"next",s.currentTranslate=q+s.startTranslate;let L=!0,K=u.resistanceRatio;if(u.touchReleaseOnEdges&&(K=0),q>0&&s.currentTranslate>r.minTranslate()?(L=!1,u.resistance&&(s.currentTranslate=r.minTranslate()-1+(-r.minTranslate()+s.startTranslate+q)**K)):q<0&&s.currentTranslate<r.maxTranslate()&&(L=!1,u.resistance&&(s.currentTranslate=r.maxTranslate()+1-(r.maxTranslate()-s.startTranslate-q)**K)),L&&(_.preventedByNestedSwiper=!0),!r.allowSlideNext&&r.swipeDirection==="next"&&s.currentTranslate<s.startTranslate&&(s.currentTranslate=s.startTranslate),!r.allowSlidePrev&&r.swipeDirection==="prev"&&s.currentTranslate>s.startTranslate&&(s.currentTranslate=s.startTranslate),!r.allowSlidePrev&&!r.allowSlideNext&&(s.currentTranslate=s.startTranslate),u.threshold>0)if(Math.abs(q)>u.threshold||s.allowThresholdMove){if(!s.allowThresholdMove){s.allowThresholdMove=!0,d.startX=d.currentX,d.startY=d.currentY,s.currentTranslate=s.startTranslate,d.diff=r.isHorizontal()?d.currentX-d.startX:d.currentY-d.startY;return}}else{s.currentTranslate=s.startTranslate;return}!u.followFinger||u.cssMode||((u.freeMode&&u.freeMode.enabled&&r.freeMode||u.watchSlidesProgress)&&(r.updateActiveIndex(),r.updateSlidesClasses()),r.params.freeMode&&u.freeMode.enabled&&r.freeMode&&r.freeMode.onTouchMove(),r.updateProgress(s.currentTranslate),r.setTranslate(s.currentTranslate))}function Bee(e){const t=this,r=t.touchEventsData,{params:s,touches:u,rtlTranslate:d,slidesGrid:x,enabled:l}=t;if(!l)return;let _=e;if(_.originalEvent&&(_=_.originalEvent),r.allowTouchCallbacks&&t.emit("touchEnd",_),r.allowTouchCallbacks=!1,!r.isTouched){r.isMoved&&s.grabCursor&&t.setGrabCursor(!1),r.isMoved=!1,r.startMoving=!1;return}s.grabCursor&&r.isMoved&&r.isTouched&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!1);const S=wm(),C=S-r.touchStartTime;if(t.allowClick){const F=_.path||_.composedPath&&_.composedPath();t.updateClickedSlide(F&&F[0]||_.target),t.emit("tap click",_),C<300&&S-r.lastClickTime<300&&t.emit("doubleTap doubleClick",_)}if(r.lastClickTime=wm(),my(()=>{t.destroyed||(t.allowClick=!0)}),!r.isTouched||!r.isMoved||!t.swipeDirection||u.diff===0||r.currentTranslate===r.startTranslate){r.isTouched=!1,r.isMoved=!1,r.startMoving=!1;return}r.isTouched=!1,r.isMoved=!1,r.startMoving=!1;let k;if(s.followFinger?k=d?t.translate:-t.translate:k=-r.currentTranslate,s.cssMode)return;if(t.params.freeMode&&s.freeMode.enabled){t.freeMode.onTouchEnd({currentPos:k});return}let D=0,U=t.slidesSizesGrid[0];for(let F=0;F<x.length;F+=F<s.slidesPerGroupSkip?1:s.slidesPerGroup){const V=F<s.slidesPerGroupSkip-1?1:s.slidesPerGroup;typeof x[F+V]!="undefined"?k>=x[F]&&k<x[F+V]&&(D=F,U=x[F+V]-x[F]):k>=x[F]&&(D=F,U=x[x.length-1]-x[x.length-2])}let q=null,L=null;s.rewind&&(t.isBeginning?L=t.params.virtual&&t.params.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(q=0));const K=(k-x[D])/U,R=D<s.slidesPerGroupSkip-1?1:s.slidesPerGroup;if(C>s.longSwipesMs){if(!s.longSwipes){t.slideTo(t.activeIndex);return}t.swipeDirection==="next"&&(K>=s.longSwipesRatio?t.slideTo(s.rewind&&t.isEnd?q:D+R):t.slideTo(D)),t.swipeDirection==="prev"&&(K>1-s.longSwipesRatio?t.slideTo(D+R):L!==null&&K<0&&Math.abs(K)>s.longSwipesRatio?t.slideTo(L):t.slideTo(D))}else{if(!s.shortSwipes){t.slideTo(t.activeIndex);return}t.navigation&&(_.target===t.navigation.nextEl||_.target===t.navigation.prevEl)?_.target===t.navigation.nextEl?t.slideTo(D+R):t.slideTo(D):(t.swipeDirection==="next"&&t.slideTo(q!==null?q:D+R),t.swipeDirection==="prev"&&t.slideTo(L!==null?L:D))}}function OA(){const e=this,{params:t,el:r}=e;if(r&&r.offsetWidth===0)return;t.breakpoints&&e.setBreakpoint();const{allowSlideNext:s,allowSlidePrev:u,snapGrid:d}=e;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses(),(t.slidesPerView==="auto"||t.slidesPerView>1)&&e.isEnd&&!e.isBeginning&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.run(),e.allowSlidePrev=u,e.allowSlideNext=s,e.params.watchOverflow&&d!==e.snapGrid&&e.checkOverflow()}function $ee(e){const t=this;!t.enabled||t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation()))}function jee(){const e=this,{wrapperEl:t,rtlTranslate:r,enabled:s}=e;if(!s)return;e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,e.translate===0&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();let u;const d=e.maxTranslate()-e.minTranslate();d===0?u=0:u=(e.translate-e.minTranslate())/d,u!==e.progress&&e.updateProgress(r?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}let BA=!1;function Uee(){}const b6=(e,t)=>{const r=bi(),{params:s,touchEvents:u,el:d,wrapperEl:x,device:l,support:_}=e,S=!!s.nested,C=t==="on"?"addEventListener":"removeEventListener",k=t;if(!_.touch)d[C](u.start,e.onTouchStart,!1),r[C](u.move,e.onTouchMove,S),r[C](u.end,e.onTouchEnd,!1);else{const D=u.start==="touchstart"&&_.passiveListener&&s.passiveListeners?{passive:!0,capture:!1}:!1;d[C](u.start,e.onTouchStart,D),d[C](u.move,e.onTouchMove,_.passiveListener?{passive:!1,capture:S}:S),d[C](u.end,e.onTouchEnd,D),u.cancel&&d[C](u.cancel,e.onTouchEnd,D)}(s.preventClicks||s.preventClicksPropagation)&&d[C]("click",e.onClick,!0),s.cssMode&&x[C]("scroll",e.onScroll),s.updateOnWindowResize?e[k](l.ios||l.android?"resize orientationchange observerUpdate":"resize observerUpdate",OA,!0):e[k]("observerUpdate",OA,!0)};function Vee(){const e=this,t=bi(),{params:r,support:s}=e;e.onTouchStart=Ree.bind(e),e.onTouchMove=Oee.bind(e),e.onTouchEnd=Bee.bind(e),r.cssMode&&(e.onScroll=jee.bind(e)),e.onClick=$ee.bind(e),s.touch&&!BA&&(t.addEventListener("touchstart",Uee),BA=!0),b6(e,"on")}function Gee(){b6(this,"off")}var qee={attachEvents:Vee,detachEvents:Gee};const $A=(e,t)=>e.grid&&t.grid&&t.grid.rows>1;function Hee(){const e=this,{activeIndex:t,initialized:r,loopedSlides:s=0,params:u,$el:d}=e,x=u.breakpoints;if(!x||x&&Object.keys(x).length===0)return;const l=e.getBreakpoint(x,e.params.breakpointsBase,e.el);if(!l||e.currentBreakpoint===l)return;const S=(l in x?x[l]:void 0)||e.originalParams,C=$A(e,u),k=$A(e,S),D=u.enabled;C&&!k?(d.removeClass(`${u.containerModifierClass}grid ${u.containerModifierClass}grid-column`),e.emitContainerClasses()):!C&&k&&(d.addClass(`${u.containerModifierClass}grid`),(S.grid.fill&&S.grid.fill==="column"||!S.grid.fill&&u.grid.fill==="column")&&d.addClass(`${u.containerModifierClass}grid-column`),e.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(K=>{const R=u[K]&&u[K].enabled,F=S[K]&&S[K].enabled;R&&!F&&e[K].disable(),!R&&F&&e[K].enable()});const U=S.direction&&S.direction!==u.direction,q=u.loop&&(S.slidesPerView!==u.slidesPerView||U);U&&r&&e.changeDirection(),Mo(e.params,S);const L=e.params.enabled;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),D&&!L?e.disable():!D&&L&&e.enable(),e.currentBreakpoint=l,e.emit("_beforeBreakpoint",S),q&&r&&(e.loopDestroy(),e.loopCreate(),e.updateSlides(),e.slideTo(t-s+e.loopedSlides,0,!1)),e.emit("breakpoint",S)}function Wee(e,t="window",r){if(!e||t==="container"&&!r)return;let s=!1;const u=mi(),d=t==="window"?u.innerHeight:r.clientHeight,x=Object.keys(e).map(l=>{if(typeof l=="string"&&l.indexOf("@")===0){const _=parseFloat(l.substr(1));return{value:d*_,point:l}}return{value:l,point:l}});x.sort((l,_)=>parseInt(l.value,10)-parseInt(_.value,10));for(let l=0;l<x.length;l+=1){const{point:_,value:S}=x[l];t==="window"?u.matchMedia(`(min-width: ${S}px)`).matches&&(s=_):S<=r.clientWidth&&(s=_)}return s||"max"}var Zee={setBreakpoint:Hee,getBreakpoint:Wee};function Xee(e,t){const r=[];return e.forEach(s=>{typeof s=="object"?Object.keys(s).forEach(u=>{s[u]&&r.push(t+u)}):typeof s=="string"&&r.push(t+s)}),r}function Kee(){const e=this,{classNames:t,params:r,rtl:s,$el:u,device:d,support:x}=e,l=Xee(["initialized",r.direction,{"pointer-events":!x.touch},{"free-mode":e.params.freeMode&&r.freeMode.enabled},{autoheight:r.autoHeight},{rtl:s},{grid:r.grid&&r.grid.rows>1},{"grid-column":r.grid&&r.grid.rows>1&&r.grid.fill==="column"},{android:d.android},{ios:d.ios},{"css-mode":r.cssMode},{centered:r.cssMode&&r.centeredSlides},{"watch-progress":r.watchSlidesProgress}],r.containerModifierClass);t.push(...l),u.addClass([...t].join(" ")),e.emitContainerClasses()}function Yee(){const e=this,{$el:t,classNames:r}=e;t.removeClass(r.join(" ")),e.emitContainerClasses()}var Jee={addClasses:Kee,removeClasses:Yee};function Qee(e,t,r,s,u,d){const x=mi();let l;function _(){d&&d()}!Ut(e).parent("picture")[0]&&(!e.complete||!u)&&t?(l=new x.Image,l.onload=_,l.onerror=_,s&&(l.sizes=s),r&&(l.srcset=r),t&&(l.src=t)):_()}function ete(){const e=this;e.imagesToLoad=e.$el.find("img");function t(){typeof e=="undefined"||e===null||!e||e.destroyed||(e.imagesLoaded!==void 0&&(e.imagesLoaded+=1),e.imagesLoaded===e.imagesToLoad.length&&(e.params.updateOnImagesReady&&e.update(),e.emit("imagesReady")))}for(let r=0;r<e.imagesToLoad.length;r+=1){const s=e.imagesToLoad[r];e.loadImage(s,s.currentSrc||s.getAttribute("src"),s.srcset||s.getAttribute("srcset"),s.sizes||s.getAttribute("sizes"),!0,t)}}var tte={loadImage:Qee,preloadImages:ete};function nte(){const e=this,{isLocked:t,params:r}=e,{slidesOffsetBefore:s}=r;if(s){const u=e.slides.length-1,d=e.slidesGrid[u]+e.slidesSizesGrid[u]+s*2;e.isLocked=e.size>d}else e.isLocked=e.snapGrid.length===1;r.allowSlideNext===!0&&(e.allowSlideNext=!e.isLocked),r.allowSlidePrev===!0&&(e.allowSlidePrev=!e.isLocked),t&&t!==e.isLocked&&(e.isEnd=!1),t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}var rte={checkOverflow:nte},jA={init:!0,direction:"horizontal",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopedSlidesLimit:!0,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function ite(e,t){return function(s={}){const u=Object.keys(s)[0],d=s[u];if(typeof d!="object"||d===null){Mo(t,s);return}if(["navigation","pagination","scrollbar"].indexOf(u)>=0&&e[u]===!0&&(e[u]={auto:!0}),!(u in e&&"enabled"in d)){Mo(t,s);return}e[u]===!0&&(e[u]={enabled:!0}),typeof e[u]=="object"&&!("enabled"in e[u])&&(e[u].enabled=!0),e[u]||(e[u]={enabled:!1}),Mo(t,s)}}const rb={eventsEmitter:eee,update:uee,translate:gee,transition:vee,slide:Mee,loop:Dee,grabCursor:Lee,events:qee,breakpoints:Zee,checkOverflow:rte,classes:Jee,images:tte},ib={};class Gi{constructor(...t){let r,s;if(t.length===1&&t[0].constructor&&Object.prototype.toString.call(t[0]).slice(8,-1)==="Object"?s=t[0]:[r,s]=t,s||(s={}),s=Mo({},s),r&&!s.el&&(s.el=r),s.el&&Ut(s.el).length>1){const l=[];return Ut(s.el).each(_=>{const S=Mo({},s,{el:_});l.push(new Gi(S))}),l}const u=this;u.__swiper__=!0,u.support=_6(),u.device=XQ({userAgent:s.userAgent}),u.browser=YQ(),u.eventsListeners={},u.eventsAnyListeners=[],u.modules=[...u.__modules__],s.modules&&Array.isArray(s.modules)&&u.modules.push(...s.modules);const d={};u.modules.forEach(l=>{l({swiper:u,extendParams:ite(s,d),on:u.on.bind(u),once:u.once.bind(u),off:u.off.bind(u),emit:u.emit.bind(u)})});const x=Mo({},jA,d);return u.params=Mo({},x,ib,s),u.originalParams=Mo({},u.params),u.passedParams=Mo({},s),u.params&&u.params.on&&Object.keys(u.params.on).forEach(l=>{u.on(l,u.params.on[l])}),u.params&&u.params.onAny&&u.onAny(u.params.onAny),u.$=Ut,Object.assign(u,{enabled:u.params.enabled,el:r,classNames:[],slides:Ut(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return u.params.direction==="horizontal"},isVertical(){return u.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:u.params.allowSlideNext,allowSlidePrev:u.params.allowSlidePrev,touchEvents:function(){const _=["touchstart","touchmove","touchend","touchcancel"],S=["pointerdown","pointermove","pointerup"];return u.touchEventsTouch={start:_[0],move:_[1],end:_[2],cancel:_[3]},u.touchEventsDesktop={start:S[0],move:S[1],end:S[2]},u.support.touch||!u.params.simulateTouch?u.touchEventsTouch:u.touchEventsDesktop}(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:u.params.focusableElements,lastClickTime:wm(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:u.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),u.emit("_swiper"),u.params.init&&u.init(),u}enable(){const t=this;t.enabled||(t.enabled=!0,t.params.grabCursor&&t.setGrabCursor(),t.emit("enable"))}disable(){const t=this;!t.enabled||(t.enabled=!1,t.params.grabCursor&&t.unsetGrabCursor(),t.emit("disable"))}setProgress(t,r){const s=this;t=Math.min(Math.max(t,0),1);const u=s.minTranslate(),x=(s.maxTranslate()-u)*t+u;s.translateTo(x,typeof r=="undefined"?0:r),s.updateActiveIndex(),s.updateSlidesClasses()}emitContainerClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const r=t.el.className.split(" ").filter(s=>s.indexOf("swiper")===0||s.indexOf(t.params.containerModifierClass)===0);t.emit("_containerClasses",r.join(" "))}getSlideClasses(t){const r=this;return r.destroyed?"":t.className.split(" ").filter(s=>s.indexOf("swiper-slide")===0||s.indexOf(r.params.slideClass)===0).join(" ")}emitSlidesClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const r=[];t.slides.each(s=>{const u=t.getSlideClasses(s);r.push({slideEl:s,classNames:u}),t.emit("_slideClass",s,u)}),t.emit("_slideClasses",r)}slidesPerViewDynamic(t="current",r=!1){const s=this,{params:u,slides:d,slidesGrid:x,slidesSizesGrid:l,size:_,activeIndex:S}=s;let C=1;if(u.centeredSlides){let k=d[S].swiperSlideSize,D;for(let U=S+1;U<d.length;U+=1)d[U]&&!D&&(k+=d[U].swiperSlideSize,C+=1,k>_&&(D=!0));for(let U=S-1;U>=0;U-=1)d[U]&&!D&&(k+=d[U].swiperSlideSize,C+=1,k>_&&(D=!0))}else if(t==="current")for(let k=S+1;k<d.length;k+=1)(r?x[k]+l[k]-x[S]<_:x[k]-x[S]<_)&&(C+=1);else for(let k=S-1;k>=0;k-=1)x[S]-x[k]<_&&(C+=1);return C}update(){const t=this;if(!t||t.destroyed)return;const{snapGrid:r,params:s}=t;s.breakpoints&&t.setBreakpoint(),t.updateSize(),t.updateSlides(),t.updateProgress(),t.updateSlidesClasses();function u(){const x=t.rtlTranslate?t.translate*-1:t.translate,l=Math.min(Math.max(x,t.maxTranslate()),t.minTranslate());t.setTranslate(l),t.updateActiveIndex(),t.updateSlidesClasses()}let d;t.params.freeMode&&t.params.freeMode.enabled?(u(),t.params.autoHeight&&t.updateAutoHeight()):((t.params.slidesPerView==="auto"||t.params.slidesPerView>1)&&t.isEnd&&!t.params.centeredSlides?d=t.slideTo(t.slides.length-1,0,!1,!0):d=t.slideTo(t.activeIndex,0,!1,!0),d||u()),s.watchOverflow&&r!==t.snapGrid&&t.checkOverflow(),t.emit("update")}changeDirection(t,r=!0){const s=this,u=s.params.direction;return t||(t=u==="horizontal"?"vertical":"horizontal"),t===u||t!=="horizontal"&&t!=="vertical"||(s.$el.removeClass(`${s.params.containerModifierClass}${u}`).addClass(`${s.params.containerModifierClass}${t}`),s.emitContainerClasses(),s.params.direction=t,s.slides.each(d=>{t==="vertical"?d.style.width="":d.style.height=""}),s.emit("changeDirection"),r&&s.update()),s}changeLanguageDirection(t){const r=this;r.rtl&&t==="rtl"||!r.rtl&&t==="ltr"||(r.rtl=t==="rtl",r.rtlTranslate=r.params.direction==="horizontal"&&r.rtl,r.rtl?(r.$el.addClass(`${r.params.containerModifierClass}rtl`),r.el.dir="rtl"):(r.$el.removeClass(`${r.params.containerModifierClass}rtl`),r.el.dir="ltr"),r.update())}mount(t){const r=this;if(r.mounted)return!0;const s=Ut(t||r.params.el);if(t=s[0],!t)return!1;t.swiper=r;const u=()=>`.${(r.params.wrapperClass||"").trim().split(" ").join(".")}`;let x=(()=>{if(t&&t.shadowRoot&&t.shadowRoot.querySelector){const l=Ut(t.shadowRoot.querySelector(u()));return l.children=_=>s.children(_),l}return s.children?s.children(u()):Ut(s).children(u())})();if(x.length===0&&r.params.createElements){const _=bi().createElement("div");x=Ut(_),_.className=r.params.wrapperClass,s.append(_),s.children(`.${r.params.slideClass}`).each(S=>{x.append(S)})}return Object.assign(r,{$el:s,el:t,$wrapperEl:x,wrapperEl:x[0],mounted:!0,rtl:t.dir.toLowerCase()==="rtl"||s.css("direction")==="rtl",rtlTranslate:r.params.direction==="horizontal"&&(t.dir.toLowerCase()==="rtl"||s.css("direction")==="rtl"),wrongRTL:x.css("display")==="-webkit-box"}),!0}init(t){const r=this;return r.initialized||r.mount(t)===!1||(r.emit("beforeInit"),r.params.breakpoints&&r.setBreakpoint(),r.addClasses(),r.params.loop&&r.loopCreate(),r.updateSize(),r.updateSlides(),r.params.watchOverflow&&r.checkOverflow(),r.params.grabCursor&&r.enabled&&r.setGrabCursor(),r.params.preloadImages&&r.preloadImages(),r.params.loop?r.slideTo(r.params.initialSlide+r.loopedSlides,0,r.params.runCallbacksOnInit,!1,!0):r.slideTo(r.params.initialSlide,0,r.params.runCallbacksOnInit,!1,!0),r.attachEvents(),r.initialized=!0,r.emit("init"),r.emit("afterInit")),r}destroy(t=!0,r=!0){const s=this,{params:u,$el:d,$wrapperEl:x,slides:l}=s;return typeof s.params=="undefined"||s.destroyed||(s.emit("beforeDestroy"),s.initialized=!1,s.detachEvents(),u.loop&&s.loopDestroy(),r&&(s.removeClasses(),d.removeAttr("style"),x.removeAttr("style"),l&&l.length&&l.removeClass([u.slideVisibleClass,u.slideActiveClass,u.slideNextClass,u.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),s.emit("destroy"),Object.keys(s.eventsListeners).forEach(_=>{s.off(_)}),t!==!1&&(s.$el[0].swiper=null,VQ(s)),s.destroyed=!0),null}static extendDefaults(t){Mo(ib,t)}static get extendedDefaults(){return ib}static get defaults(){return jA}static installModule(t){Gi.prototype.__modules__||(Gi.prototype.__modules__=[]);const r=Gi.prototype.__modules__;typeof t=="function"&&r.indexOf(t)<0&&r.push(t)}static use(t){return Array.isArray(t)?(t.forEach(r=>Gi.installModule(r)),Gi):(Gi.installModule(t),Gi)}}Object.keys(rb).forEach(e=>{Object.keys(rb[e]).forEach(t=>{Gi.prototype[t]=rb[e][t]})});Gi.use([JQ,QQ]);function w6(e,t,r,s){const u=bi();return e.params.createElements&&Object.keys(s).forEach(d=>{if(!r[d]&&r.auto===!0){let x=e.$el.children(`.${s[d]}`)[0];x||(x=u.createElement("div"),x.className=s[d],e.$el.append(x)),r[d]=x,t[d]=x}}),r}function YE({swiper:e,extendParams:t,on:r,emit:s}){t({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,$nextEl:null,prevEl:null,$prevEl:null};function u(U){let q;return U&&(q=Ut(U),e.params.uniqueNavElements&&typeof U=="string"&&q.length>1&&e.$el.find(U).length===1&&(q=e.$el.find(U))),q}function d(U,q){const L=e.params.navigation;U&&U.length>0&&(U[q?"addClass":"removeClass"](L.disabledClass),U[0]&&U[0].tagName==="BUTTON"&&(U[0].disabled=q),e.params.watchOverflow&&e.enabled&&U[e.isLocked?"addClass":"removeClass"](L.lockClass))}function x(){if(e.params.loop)return;const{$nextEl:U,$prevEl:q}=e.navigation;d(q,e.isBeginning&&!e.params.rewind),d(U,e.isEnd&&!e.params.rewind)}function l(U){U.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),s("navigationPrev"))}function _(U){U.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),s("navigationNext"))}function S(){const U=e.params.navigation;if(e.params.navigation=w6(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(U.nextEl||U.prevEl))return;const q=u(U.nextEl),L=u(U.prevEl);q&&q.length>0&&q.on("click",_),L&&L.length>0&&L.on("click",l),Object.assign(e.navigation,{$nextEl:q,nextEl:q&&q[0],$prevEl:L,prevEl:L&&L[0]}),e.enabled||(q&&q.addClass(U.lockClass),L&&L.addClass(U.lockClass))}function C(){const{$nextEl:U,$prevEl:q}=e.navigation;U&&U.length&&(U.off("click",_),U.removeClass(e.params.navigation.disabledClass)),q&&q.length&&(q.off("click",l),q.removeClass(e.params.navigation.disabledClass))}r("init",()=>{e.params.navigation.enabled===!1?D():(S(),x())}),r("toEdge fromEdge lock unlock",()=>{x()}),r("destroy",()=>{C()}),r("enable disable",()=>{const{$nextEl:U,$prevEl:q}=e.navigation;U&&U[e.enabled?"removeClass":"addClass"](e.params.navigation.lockClass),q&&q[e.enabled?"removeClass":"addClass"](e.params.navigation.lockClass)}),r("click",(U,q)=>{const{$nextEl:L,$prevEl:K}=e.navigation,R=q.target;if(e.params.navigation.hideOnClick&&!Ut(R).is(K)&&!Ut(R).is(L)){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===R||e.pagination.el.contains(R)))return;let F;L?F=L.hasClass(e.params.navigation.hiddenClass):K&&(F=K.hasClass(e.params.navigation.hiddenClass)),s(F===!0?"navigationShow":"navigationHide"),L&&L.toggleClass(e.params.navigation.hiddenClass),K&&K.toggleClass(e.params.navigation.hiddenClass)}});const k=()=>{e.$el.removeClass(e.params.navigation.navigationDisabledClass),S(),x()},D=()=>{e.$el.addClass(e.params.navigation.navigationDisabledClass),C()};Object.assign(e.navigation,{enable:k,disable:D,update:x,init:S,destroy:C})}function kh(e=""){return`.${e.trim().replace(/([\.:!\/])/g,"\\$1").replace(/ /g,".")}`}function E6({swiper:e,extendParams:t,on:r,emit:s}){const u="swiper-pagination";t({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:L=>L,formatFractionTotal:L=>L,bulletClass:`${u}-bullet`,bulletActiveClass:`${u}-bullet-active`,modifierClass:`${u}-`,currentClass:`${u}-current`,totalClass:`${u}-total`,hiddenClass:`${u}-hidden`,progressbarFillClass:`${u}-progressbar-fill`,progressbarOppositeClass:`${u}-progressbar-opposite`,clickableClass:`${u}-clickable`,lockClass:`${u}-lock`,horizontalClass:`${u}-horizontal`,verticalClass:`${u}-vertical`,paginationDisabledClass:`${u}-disabled`}}),e.pagination={el:null,$el:null,bullets:[]};let d,x=0;function l(){return!e.params.pagination.el||!e.pagination.el||!e.pagination.$el||e.pagination.$el.length===0}function _(L,K){const{bulletActiveClass:R}=e.params.pagination;L[K]().addClass(`${R}-${K}`)[K]().addClass(`${R}-${K}-${K}`)}function S(){const L=e.rtl,K=e.params.pagination;if(l())return;const R=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,F=e.pagination.$el;let V;const J=e.params.loop?Math.ceil((R-e.loopedSlides*2)/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(V=Math.ceil((e.activeIndex-e.loopedSlides)/e.params.slidesPerGroup),V>R-1-e.loopedSlides*2&&(V-=R-e.loopedSlides*2),V>J-1&&(V-=J),V<0&&e.params.paginationType!=="bullets"&&(V=J+V)):typeof e.snapIndex!="undefined"?V=e.snapIndex:V=e.activeIndex||0,K.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){const re=e.pagination.bullets;let fe,be,ce;if(K.dynamicBullets&&(d=re.eq(0)[e.isHorizontal()?"outerWidth":"outerHeight"](!0),F.css(e.isHorizontal()?"width":"height",`${d*(K.dynamicMainBullets+4)}px`),K.dynamicMainBullets>1&&e.previousIndex!==void 0&&(x+=V-(e.previousIndex-e.loopedSlides||0),x>K.dynamicMainBullets-1?x=K.dynamicMainBullets-1:x<0&&(x=0)),fe=Math.max(V-x,0),be=fe+(Math.min(re.length,K.dynamicMainBullets)-1),ce=(be+fe)/2),re.removeClass(["","-next","-next-next","-prev","-prev-prev","-main"].map(ve=>`${K.bulletActiveClass}${ve}`).join(" ")),F.length>1)re.each(ve=>{const Fe=Ut(ve),Le=Fe.index();Le===V&&Fe.addClass(K.bulletActiveClass),K.dynamicBullets&&(Le>=fe&&Le<=be&&Fe.addClass(`${K.bulletActiveClass}-main`),Le===fe&&_(Fe,"prev"),Le===be&&_(Fe,"next"))});else{const ve=re.eq(V),Fe=ve.index();if(ve.addClass(K.bulletActiveClass),K.dynamicBullets){const Le=re.eq(fe),Ie=re.eq(be);for(let Ke=fe;Ke<=be;Ke+=1)re.eq(Ke).addClass(`${K.bulletActiveClass}-main`);if(e.params.loop)if(Fe>=re.length){for(let Ke=K.dynamicMainBullets;Ke>=0;Ke-=1)re.eq(re.length-Ke).addClass(`${K.bulletActiveClass}-main`);re.eq(re.length-K.dynamicMainBullets-1).addClass(`${K.bulletActiveClass}-prev`)}else _(Le,"prev"),_(Ie,"next");else _(Le,"prev"),_(Ie,"next")}}if(K.dynamicBullets){const ve=Math.min(re.length,K.dynamicMainBullets+4),Fe=(d*ve-d)/2-ce*d,Le=L?"right":"left";re.css(e.isHorizontal()?Le:"top",`${Fe}px`)}}if(K.type==="fraction"&&(F.find(kh(K.currentClass)).text(K.formatFractionCurrent(V+1)),F.find(kh(K.totalClass)).text(K.formatFractionTotal(J))),K.type==="progressbar"){let re;K.progressbarOpposite?re=e.isHorizontal()?"vertical":"horizontal":re=e.isHorizontal()?"horizontal":"vertical";const fe=(V+1)/J;let be=1,ce=1;re==="horizontal"?be=fe:ce=fe,F.find(kh(K.progressbarFillClass)).transform(`translate3d(0,0,0) scaleX(${be}) scaleY(${ce})`).transition(e.params.speed)}K.type==="custom"&&K.renderCustom?(F.html(K.renderCustom(e,V+1,J)),s("paginationRender",F[0])):s("paginationUpdate",F[0]),e.params.watchOverflow&&e.enabled&&F[e.isLocked?"addClass":"removeClass"](K.lockClass)}function C(){const L=e.params.pagination;if(l())return;const K=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,R=e.pagination.$el;let F="";if(L.type==="bullets"){let V=e.params.loop?Math.ceil((K-e.loopedSlides*2)/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&!e.params.loop&&V>K&&(V=K);for(let J=0;J<V;J+=1)L.renderBullet?F+=L.renderBullet.call(e,J,L.bulletClass):F+=`<${L.bulletElement} class="${L.bulletClass}"></${L.bulletElement}>`;R.html(F),e.pagination.bullets=R.find(kh(L.bulletClass))}L.type==="fraction"&&(L.renderFraction?F=L.renderFraction.call(e,L.currentClass,L.totalClass):F=`<span class="${L.currentClass}"></span> / <span class="${L.totalClass}"></span>`,R.html(F)),L.type==="progressbar"&&(L.renderProgressbar?F=L.renderProgressbar.call(e,L.progressbarFillClass):F=`<span class="${L.progressbarFillClass}"></span>`,R.html(F)),L.type!=="custom"&&s("paginationRender",e.pagination.$el[0])}function k(){e.params.pagination=w6(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const L=e.params.pagination;if(!L.el)return;let K=Ut(L.el);K.length!==0&&(e.params.uniqueNavElements&&typeof L.el=="string"&&K.length>1&&(K=e.$el.find(L.el),K.length>1&&(K=K.filter(R=>Ut(R).parents(".swiper")[0]===e.el))),L.type==="bullets"&&L.clickable&&K.addClass(L.clickableClass),K.addClass(L.modifierClass+L.type),K.addClass(e.isHorizontal()?L.horizontalClass:L.verticalClass),L.type==="bullets"&&L.dynamicBullets&&(K.addClass(`${L.modifierClass}${L.type}-dynamic`),x=0,L.dynamicMainBullets<1&&(L.dynamicMainBullets=1)),L.type==="progressbar"&&L.progressbarOpposite&&K.addClass(L.progressbarOppositeClass),L.clickable&&K.on("click",kh(L.bulletClass),function(F){F.preventDefault();let V=Ut(this).index()*e.params.slidesPerGroup;e.params.loop&&(V+=e.loopedSlides),e.slideTo(V)}),Object.assign(e.pagination,{$el:K,el:K[0]}),e.enabled||K.addClass(L.lockClass))}function D(){const L=e.params.pagination;if(l())return;const K=e.pagination.$el;K.removeClass(L.hiddenClass),K.removeClass(L.modifierClass+L.type),K.removeClass(e.isHorizontal()?L.horizontalClass:L.verticalClass),e.pagination.bullets&&e.pagination.bullets.removeClass&&e.pagination.bullets.removeClass(L.bulletActiveClass),L.clickable&&K.off("click",kh(L.bulletClass))}r("init",()=>{e.params.pagination.enabled===!1?q():(k(),C(),S())}),r("activeIndexChange",()=>{(e.params.loop||typeof e.snapIndex=="undefined")&&S()}),r("snapIndexChange",()=>{e.params.loop||S()}),r("slidesLengthChange",()=>{e.params.loop&&(C(),S())}),r("snapGridLengthChange",()=>{e.params.loop||(C(),S())}),r("destroy",()=>{D()}),r("enable disable",()=>{const{$el:L}=e.pagination;L&&L[e.enabled?"removeClass":"addClass"](e.params.pagination.lockClass)}),r("lock unlock",()=>{S()}),r("click",(L,K)=>{const R=K.target,{$el:F}=e.pagination;if(e.params.pagination.el&&e.params.pagination.hideOnClick&&F&&F.length>0&&!Ut(R).hasClass(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&R===e.navigation.nextEl||e.navigation.prevEl&&R===e.navigation.prevEl))return;const V=F.hasClass(e.params.pagination.hiddenClass);s(V===!0?"paginationShow":"paginationHide"),F.toggleClass(e.params.pagination.hiddenClass)}});const U=()=>{e.$el.removeClass(e.params.pagination.paginationDisabledClass),e.pagination.$el&&e.pagination.$el.removeClass(e.params.pagination.paginationDisabledClass),k(),C(),S()},q=()=>{e.$el.addClass(e.params.pagination.paginationDisabledClass),e.pagination.$el&&e.pagination.$el.addClass(e.params.pagination.paginationDisabledClass),D()};Object.assign(e.pagination,{enable:U,disable:q,render:C,update:S,init:k,destroy:D})}function T6({swiper:e,extendParams:t,on:r,emit:s}){let u;e.autoplay={running:!1,paused:!1},t({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});function d(){if(!e.size){e.autoplay.running=!1,e.autoplay.paused=!1;return}const L=e.slides.eq(e.activeIndex);let K=e.params.autoplay.delay;L.attr("data-swiper-autoplay")&&(K=L.attr("data-swiper-autoplay")||e.params.autoplay.delay),clearTimeout(u),u=my(()=>{let R;e.params.autoplay.reverseDirection?e.params.loop?(e.loopFix(),R=e.slidePrev(e.params.speed,!0,!0),s("autoplay")):e.isBeginning?e.params.autoplay.stopOnLastSlide?l():(R=e.slideTo(e.slides.length-1,e.params.speed,!0,!0),s("autoplay")):(R=e.slidePrev(e.params.speed,!0,!0),s("autoplay")):e.params.loop?(e.loopFix(),R=e.slideNext(e.params.speed,!0,!0),s("autoplay")):e.isEnd?e.params.autoplay.stopOnLastSlide?l():(R=e.slideTo(0,e.params.speed,!0,!0),s("autoplay")):(R=e.slideNext(e.params.speed,!0,!0),s("autoplay")),(e.params.cssMode&&e.autoplay.running||R===!1)&&d()},K)}function x(){return typeof u!="undefined"||e.autoplay.running?!1:(e.autoplay.running=!0,s("autoplayStart"),d(),!0)}function l(){return!e.autoplay.running||typeof u=="undefined"?!1:(u&&(clearTimeout(u),u=void 0),e.autoplay.running=!1,s("autoplayStop"),!0)}function _(L){!e.autoplay.running||e.autoplay.paused||(u&&clearTimeout(u),e.autoplay.paused=!0,L===0||!e.params.autoplay.waitForTransition?(e.autoplay.paused=!1,d()):["transitionend","webkitTransitionEnd"].forEach(K=>{e.$wrapperEl[0].addEventListener(K,C)}))}function S(){const L=bi();L.visibilityState==="hidden"&&e.autoplay.running&&_(),L.visibilityState==="visible"&&e.autoplay.paused&&(d(),e.autoplay.paused=!1)}function C(L){!e||e.destroyed||!e.$wrapperEl||L.target===e.$wrapperEl[0]&&(["transitionend","webkitTransitionEnd"].forEach(K=>{e.$wrapperEl[0].removeEventListener(K,C)}),e.autoplay.paused=!1,e.autoplay.running?d():l())}function k(){e.params.autoplay.disableOnInteraction?l():(s("autoplayPause"),_()),["transitionend","webkitTransitionEnd"].forEach(L=>{e.$wrapperEl[0].removeEventListener(L,C)})}function D(){e.params.autoplay.disableOnInteraction||(e.autoplay.paused=!1,s("autoplayResume"),d())}function U(){e.params.autoplay.pauseOnMouseEnter&&(e.$el.on("mouseenter",k),e.$el.on("mouseleave",D))}function q(){e.$el.off("mouseenter",k),e.$el.off("mouseleave",D)}r("init",()=>{e.params.autoplay.enabled&&(x(),bi().addEventListener("visibilitychange",S),U())}),r("beforeTransitionStart",(L,K,R)=>{e.autoplay.running&&(R||!e.params.autoplay.disableOnInteraction?e.autoplay.pause(K):l())}),r("sliderFirstMove",()=>{e.autoplay.running&&(e.params.autoplay.disableOnInteraction?l():_())}),r("touchEnd",()=>{e.params.cssMode&&e.autoplay.paused&&!e.params.autoplay.disableOnInteraction&&d()}),r("destroy",()=>{q(),e.autoplay.running&&l(),bi().removeEventListener("visibilitychange",S)}),Object.assign(e.autoplay,{pause:_,run:d,start:x,stop:l})}function xu(e){return typeof e=="object"&&e!==null&&e.constructor&&Object.prototype.toString.call(e).slice(8,-1)==="Object"}function Gl(e,t){const r=["__proto__","constructor","prototype"];Object.keys(t).filter(s=>r.indexOf(s)<0).forEach(s=>{typeof e[s]=="undefined"?e[s]=t[s]:xu(t[s])&&xu(e[s])&&Object.keys(t[s]).length>0?t[s].__swiper__?e[s]=t[s]:Gl(e[s],t[s]):e[s]=t[s]})}function S6(e={}){return e.navigation&&typeof e.navigation.nextEl=="undefined"&&typeof e.navigation.prevEl=="undefined"}function C6(e={}){return e.pagination&&typeof e.pagination.el=="undefined"}function A6(e={}){return e.scrollbar&&typeof e.scrollbar.el=="undefined"}function M6(e=""){const t=e.split(" ").map(s=>s.trim()).filter(s=>!!s),r=[];return t.forEach(s=>{r.indexOf(s)<0&&r.push(s)}),r.join(" ")}const k6=["modules","init","_direction","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_preloadImages","updateOnImagesReady","_loop","_loopAdditionalSlides","_loopedSlides","_loopedSlidesLimit","_loopFillGroupWithBlank","loopPreventsSlide","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideBlankClass","slideActiveClass","slideDuplicateActiveClass","slideVisibleClass","slideDuplicateClass","slideNextClass","slideDuplicateNextClass","slidePrevClass","slideDuplicatePrevClass","wrapperClass","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","lazy","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom"];function ote(e={},t=!0){const r={on:{}},s={},u={};Gl(r,Gi.defaults),Gl(r,Gi.extendedDefaults),r._emitClasses=!0,r.init=!1;const d={},x=k6.map(_=>_.replace(/_/,"")),l=Object.assign({},e);return Object.keys(l).forEach(_=>{typeof e[_]!="undefined"&&(x.indexOf(_)>=0?xu(e[_])?(r[_]={},u[_]={},Gl(r[_],e[_]),Gl(u[_],e[_])):(r[_]=e[_],u[_]=e[_]):_.search(/on[A-Z]/)===0&&typeof e[_]=="function"?t?s[`${_[2].toLowerCase()}${_.substr(3)}`]=e[_]:r.on[`${_[2].toLowerCase()}${_.substr(3)}`]=e[_]:d[_]=e[_])}),["navigation","pagination","scrollbar"].forEach(_=>{r[_]===!0&&(r[_]={}),r[_]===!1&&delete r[_]}),{params:r,passedParams:u,rest:d,events:s}}function ste({el:e,nextEl:t,prevEl:r,paginationEl:s,scrollbarEl:u,swiper:d},x){S6(x)&&t&&r&&(d.params.navigation.nextEl=t,d.originalParams.navigation.nextEl=t,d.params.navigation.prevEl=r,d.originalParams.navigation.prevEl=r),C6(x)&&s&&(d.params.pagination.el=s,d.originalParams.pagination.el=s),A6(x)&&u&&(d.params.scrollbar.el=u,d.originalParams.scrollbar.el=u),d.init(e)}const P6=(e,t)=>{let r=t.slidesPerView;if(t.breakpoints){const u=Gi.prototype.getBreakpoint(t.breakpoints),d=u in t.breakpoints?t.breakpoints[u]:void 0;d&&d.slidesPerView&&(r=d.slidesPerView)}let s=Math.ceil(parseFloat(t.loopedSlides||r,10));return s+=t.loopAdditionalSlides,s>e.length&&t.loopedSlidesLimit&&(s=e.length),s};function ate(e,t,r){const s=t.map((_,S)=>zt.cloneElement(_,{swiper:e,"data-swiper-slide-index":S}));function u(_,S,C){return zt.cloneElement(_,{key:`${_.key}-duplicate-${S}-${C}`,className:`${_.props.className||""} ${r.slideDuplicateClass}`})}if(r.loopFillGroupWithBlank){const _=r.slidesPerGroup-s.length%r.slidesPerGroup;if(_!==r.slidesPerGroup)for(let S=0;S<_;S+=1){const C=zt.createElement("div",{className:`${r.slideClass} ${r.slideBlankClass}`});s.push(C)}}r.slidesPerView==="auto"&&!r.loopedSlides&&(r.loopedSlides=s.length);const d=P6(s,r),x=[],l=[];for(let _=0;_<d;_+=1){const S=_-Math.floor(_/s.length)*s.length;l.push(u(s[S],_,"append")),x.unshift(u(s[s.length-S-1],_,"prepend"))}return e&&(e.loopedSlides=d),[...x,...s,...l]}function lte(e,t,r,s,u){const d=[];if(!t)return d;const x=_=>{d.indexOf(_)<0&&d.push(_)};if(r&&s){const _=s.map(u),S=r.map(u);_.join("")!==S.join("")&&x("children"),s.length!==r.length&&x("children")}return k6.filter(_=>_[0]==="_").map(_=>_.replace(/_/,"")).forEach(_=>{if(_ in e&&_ in t)if(xu(e[_])&&xu(t[_])){const S=Object.keys(e[_]),C=Object.keys(t[_]);S.length!==C.length?x(_):(S.forEach(k=>{e[_][k]!==t[_][k]&&x(_)}),C.forEach(k=>{e[_][k]!==t[_][k]&&x(_)}))}else e[_]!==t[_]&&x(_)}),d}function I6(e){return e.type&&e.type.displayName&&e.type.displayName.includes("SwiperSlide")}function D6(e){const t=[];return zt.Children.toArray(e).forEach(r=>{I6(r)?t.push(r):r.props&&r.props.children&&D6(r.props.children).forEach(s=>t.push(s))}),t}function cte(e){const t=[],r={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return zt.Children.toArray(e).forEach(s=>{if(I6(s))t.push(s);else if(s.props&&s.props.slot&&r[s.props.slot])r[s.props.slot].push(s);else if(s.props&&s.props.children){const u=D6(s.props.children);u.length>0?u.forEach(d=>t.push(d)):r["container-end"].push(s)}else r["container-end"].push(s)}),{slides:t,slots:r}}function ute({swiper:e,slides:t,passedParams:r,changedParams:s,nextEl:u,prevEl:d,scrollbarEl:x,paginationEl:l}){const _=s.filter(re=>re!=="children"&&re!=="direction"),{params:S,pagination:C,navigation:k,scrollbar:D,virtual:U,thumbs:q}=e;let L,K,R,F,V;s.includes("thumbs")&&r.thumbs&&r.thumbs.swiper&&S.thumbs&&!S.thumbs.swiper&&(L=!0),s.includes("controller")&&r.controller&&r.controller.control&&S.controller&&!S.controller.control&&(K=!0),s.includes("pagination")&&r.pagination&&(r.pagination.el||l)&&(S.pagination||S.pagination===!1)&&C&&!C.el&&(R=!0),s.includes("scrollbar")&&r.scrollbar&&(r.scrollbar.el||x)&&(S.scrollbar||S.scrollbar===!1)&&D&&!D.el&&(F=!0),s.includes("navigation")&&r.navigation&&(r.navigation.prevEl||d)&&(r.navigation.nextEl||u)&&(S.navigation||S.navigation===!1)&&k&&!k.prevEl&&!k.nextEl&&(V=!0);const J=re=>{!e[re]||(e[re].destroy(),re==="navigation"?(S[re].prevEl=void 0,S[re].nextEl=void 0,e[re].prevEl=void 0,e[re].nextEl=void 0):(S[re].el=void 0,e[re].el=void 0))};_.forEach(re=>{if(xu(S[re])&&xu(r[re]))Gl(S[re],r[re]);else{const fe=r[re];(fe===!0||fe===!1)&&(re==="navigation"||re==="pagination"||re==="scrollbar")?fe===!1&&J(re):S[re]=r[re]}}),_.includes("controller")&&!K&&e.controller&&e.controller.control&&S.controller&&S.controller.control&&(e.controller.control=S.controller.control),s.includes("children")&&t&&U&&S.virtual.enabled?(U.slides=t,U.update(!0)):s.includes("children")&&e.lazy&&e.params.lazy.enabled&&e.lazy.load(),L&&q.init()&&q.update(!0),K&&(e.controller.control=S.controller.control),R&&(l&&(S.pagination.el=l),C.init(),C.render(),C.update()),F&&(x&&(S.scrollbar.el=x),D.init(),D.updateSize(),D.setTranslate()),V&&(u&&(S.navigation.nextEl=u),d&&(S.navigation.prevEl=d),k.init(),k.update()),s.includes("allowSlideNext")&&(e.allowSlideNext=r.allowSlideNext),s.includes("allowSlidePrev")&&(e.allowSlidePrev=r.allowSlidePrev),s.includes("direction")&&e.changeDirection(r.direction,!1),e.update()}function hte(e,t,r){if(!r)return null;const s=e.isHorizontal()?{[e.rtlTranslate?"right":"left"]:`${r.offset}px`}:{top:`${r.offset}px`};return t.filter((u,d)=>d>=r.from&&d<=r.to).map(u=>zt.cloneElement(u,{swiper:e,style:s}))}const dte=e=>{!e||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.lazy&&e.params.lazy.enabled&&e.lazy.load(),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())};function Wf(e,t){return typeof window=="undefined"?ne.exports.useEffect(e,t):ne.exports.useLayoutEffect(e,t)}const pte=ne.exports.createContext(null),fte=ne.exports.createContext(null),$m=ne.exports.forwardRef(function(e,t){let{className:r,tag:s="div",wrapperTag:u="div",children:d,onSwiper:x,...l}=e===void 0?{}:e,_=!1;const[S,C]=ne.exports.useState("swiper"),[k,D]=ne.exports.useState(null),[U,q]=ne.exports.useState(!1),L=ne.exports.useRef(!1),K=ne.exports.useRef(null),R=ne.exports.useRef(null),F=ne.exports.useRef(null),V=ne.exports.useRef(null),J=ne.exports.useRef(null),re=ne.exports.useRef(null),fe=ne.exports.useRef(null),be=ne.exports.useRef(null),{params:ce,passedParams:ve,rest:Fe,events:Le}=ote(l),{slides:Ie,slots:Ke}=cte(d),bt=()=>{q(!U)};Object.assign(ce.on,{_containerClasses(Ye,De){C(De)}});const ot=()=>{if(Object.assign(ce.on,Le),_=!0,R.current=new Gi(ce),R.current.loopCreate=()=>{},R.current.loopDestroy=()=>{},ce.loop&&(R.current.loopedSlides=P6(Ie,ce)),R.current.virtual&&R.current.params.virtual.enabled){R.current.virtual.slides=Ie;const Ye={cache:!1,slides:Ie,renderExternal:D,renderExternalUpdate:!1};Gl(R.current.params.virtual,Ye),Gl(R.current.originalParams.virtual,Ye)}};K.current||ot(),R.current&&R.current.on("_beforeBreakpoint",bt);const Ot=()=>{_||!Le||!R.current||Object.keys(Le).forEach(Ye=>{R.current.on(Ye,Le[Ye])})},Dt=()=>{!Le||!R.current||Object.keys(Le).forEach(Ye=>{R.current.off(Ye,Le[Ye])})};ne.exports.useEffect(()=>()=>{R.current&&R.current.off("_beforeBreakpoint",bt)}),ne.exports.useEffect(()=>{!L.current&&R.current&&(R.current.emitSlidesClasses(),L.current=!0)}),Wf(()=>{if(t&&(t.current=K.current),!!K.current)return R.current.destroyed&&ot(),ste({el:K.current,nextEl:J.current,prevEl:re.current,paginationEl:fe.current,scrollbarEl:be.current,swiper:R.current},ce),x&&x(R.current),()=>{R.current&&!R.current.destroyed&&R.current.destroy(!0,!1)}},[]),Wf(()=>{Ot();const Ye=lte(ve,F.current,Ie,V.current,De=>De.key);return F.current=ve,V.current=Ie,Ye.length&&R.current&&!R.current.destroyed&&ute({swiper:R.current,slides:Ie,passedParams:ve,changedParams:Ye,nextEl:J.current,prevEl:re.current,scrollbarEl:be.current,paginationEl:fe.current}),()=>{Dt()}}),Wf(()=>{dte(R.current)},[k]);function Ze(){return ce.virtual?hte(R.current,Ie,k):!ce.loop||R.current&&R.current.destroyed?Ie.map(Ye=>zt.cloneElement(Ye,{swiper:R.current})):ate(R.current,Ie,ce)}return T(s,{ref:K,className:M6(`${S}${r?` ${r}`:""}`),...Fe,children:H(fte.Provider,{value:R.current,children:[Ke["container-start"],H(u,{className:"swiper-wrapper",children:[Ke["wrapper-start"],Ze(),Ke["wrapper-end"]]}),S6(ce)&&H(yn,{children:[T("div",{ref:re,className:"swiper-button-prev"}),T("div",{ref:J,className:"swiper-button-next"})]}),A6(ce)&&T("div",{ref:be,className:"swiper-scrollbar"}),C6(ce)&&T("div",{ref:fe,className:"swiper-pagination"}),Ke["container-end"]]})})});$m.displayName="Swiper";const jm=ne.exports.forwardRef(function(e,t){let{tag:r="div",children:s,className:u="",swiper:d,zoom:x,virtualIndex:l,..._}=e===void 0?{}:e;const S=ne.exports.useRef(null),[C,k]=ne.exports.useState("swiper-slide");function D(L,K,R){K===S.current&&k(R)}Wf(()=>{if(t&&(t.current=S.current),!(!S.current||!d)){if(d.destroyed){C!=="swiper-slide"&&k("swiper-slide");return}return d.on("_slideClass",D),()=>{!d||d.off("_slideClass",D)}}}),Wf(()=>{d&&S.current&&!d.destroyed&&k(d.getSlideClasses(S.current))},[d]);const U={isActive:C.indexOf("swiper-slide-active")>=0||C.indexOf("swiper-slide-duplicate-active")>=0,isVisible:C.indexOf("swiper-slide-visible")>=0,isDuplicate:C.indexOf("swiper-slide-duplicate")>=0,isPrev:C.indexOf("swiper-slide-prev")>=0||C.indexOf("swiper-slide-duplicate-prev")>=0,isNext:C.indexOf("swiper-slide-next")>=0||C.indexOf("swiper-slide-duplicate-next")>=0},q=()=>typeof s=="function"?s(U):s;return T(r,{ref:S,className:M6(`${C}${u?` ${u}`:""}`),"data-swiper-slide-index":l,..._,children:T(pte.Provider,{value:U,children:x?T("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof x=="number"?x:void 0,children:q()}):q()})})});jm.displayName="SwiperSlide";z6.propTypes={item:_e.object};const mte=e=>{switch(e){case"B\xE0n ngo\xE0i tr\u1EDDi":return T(eY,{className:"text-primary lg:text-[24px] text-[20px] mb-[6px] font-bold "});case"B\xE1nh ng\u1ECDt":return T(XK,{className:"text-primary lg:text-[24px] text-[20px] mb-[6px] font-bold "});case"Chi\u1EBFu b\xF3ng \u0111\xE1":return T(ZK,{className:"text-primary lg:text-[24px] text-[20px] mb-[6px] font-bold "});case"Ch\u1ED7 ch\u01A1i cho tr\u1EBB em":return T(WK,{className:"text-primary lg:text-[24px] text-[20px] mb-[6px] font-bold "});case"Ch\u1ED7 \u0111\u1EADu \xF4t\xF4":return T(YK,{className:"text-primary lg:text-[24px] text-[20px] mb-[6px] font-bold "});case"Giao h\xE0ng":return T(fY,{className:"text-primary lg:text-[24px] text-[20px] mb-[6px] font-bold "});case"Gi\u1EEF xe m\xE1y":return T(uY,{className:"text-primary lg:text-[24px] text-[20px] mb-[6px] font-bold "});case"Khu v\u1EF1c h\xFAt thu\u1ED1c":return T(mY,{className:"text-primary lg:text-[24px] text-[20px] mb-[6px] font-bold "});case"Mang \u0111\u1ED3 \u0103n ngo\xE0i":return T(aY,{className:"text-primary lg:text-[24px] text-[20px] mb-[6px] font-bold "});case"Mang th\xFA c\u01B0ng":return T(hY,{className:"text-primary lg:text-[24px] text-[20px] mb-[6px] font-bold "});case"M\xE1y l\u1EA1nh & \u0111i\u1EC1u h\xF2a":return T(EY,{className:"text-primary lg:text-[24px] text-[20px] mb-[6px] font-bold "});case"Nh\u1EA1c s\u1ED1ng":return T(sY,{className:"text-primary lg:text-[24px] text-[20px] mb-[6px] font-bold "});case"Thanh to\xE1n b\u1EB1ng th\u1EBB":return T(nY,{className:"text-primary lg:text-[24px] text-[20px] mb-[6px] font-bold "});case"Wi-fi mi\u1EC5n ph\xED":return T(pA,{className:"text-primary lg:text-[24px] text-[20px] mb-[6px] font-bold "});default:return T(pA,{className:"text-primary lg:text-[24px] text-[20px] mb-[6px] font-bold "})}};function z6({item:e={}}){const[t,r]=ne.exports.useState(4);return ne.exports.useEffect(()=>{const s=()=>{const u=e.convenient?e.convenient.length:t;r(t7(window.innerWidth,u))};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[e]),T("div",{className:"pt-1 px-[14px] pb-[10px] mb-[6px] shadow-[0_1px_4px_rgb(0,0,0,0.3)] rounded-[10px]",children:T($m,{pagination:!0,navigation:!0,modules:[YE,E6,T6],slidesPerView:t,autoplay:{delay:2500,disableOnInteraction:!1},children:e.conveniences&&e.conveniences.map((s,u)=>T(jm,{children:H(Jt,{to:`/search?convenience=${s==null?void 0:s.slug}`,className:"block py-[16px] px-[6px] cursor-pointer flex flex-col gap-x-2 justify-center text-center items-center",children:[mte(s==null?void 0:s.name),H("span",{className:"text-sm",children:[s==null?void 0:s.name," "]})]})},u))})})}Fw.propTypes={item:_e.object,filterReview:_e.object,onShow:_e.func};function Fw({item:e={},onShow:t=null,filterReview:r={}}){var l;const[s,u]=ne.exports.useState([]),[d,x]=ne.exports.useState({});return ne.exports.useEffect(()=>{(async()=>{try{const _=await Gs.getAll({...r,productId:e.id,page:0}),S={};_==null||_.forEach((C,k)=>{var D,U,q,L,K,R,F,V,J,re;S.food=S.food?S.food+((D=C==null?void 0:C.rating)==null?void 0:D.food):(U=C==null?void 0:C.rating)==null?void 0:U.food,S.service=S.service?S.service+((q=C==null?void 0:C.rating)==null?void 0:q.service):(L=C==null?void 0:C.rating)==null?void 0:L.service,S.price=S.price?S.price+((K=C==null?void 0:C.rating)==null?void 0:K.price):(R=C==null?void 0:C.rating)==null?void 0:R.price,S.space=S.space?S.space+((F=C==null?void 0:C.rating)==null?void 0:F.space):(V=C==null?void 0:C.rating)==null?void 0:V.space,S.location=S.location?S.location+((J=C==null?void 0:C.rating)==null?void 0:J.location):(re=C==null?void 0:C.rating)==null?void 0:re.location}),u(_),x(()=>({food:S.food/(_==null?void 0:_.length),price:S.price/(_==null?void 0:_.length),service:S.service/(_==null?void 0:_.length),location:S.location/(_==null?void 0:_.length),space:S.space/(_==null?void 0:_.length)}))}catch(_){console.log("Error",_)}})()},[e,r]),H("div",{className:"pt-1 px-[14px] pb-[10px] mb-[6px] shadow-[0_1px_4px_rgb(0,0,0,0.3)] rounded-[10px] flex-1",children:[T("h2",{className:"text-[21px] font-semibold",children:"\u0110\xE1nh gi\xE1"}),H("div",{className:"flex items-center justify-center mb-2",children:[s.length>0?T("div",{className:"text-[28px] bg-primary text-center text-white rounded-[10px] py-1 px-2 min-w-[50px] mr-1 font-bold",children:(l=e==null?void 0:e.avgRating)==null?void 0:l.toFixed(1)}):T("div",{}),H("div",{children:[e>0?T("div",{}):T("div",{className:"text-[21px] font-semibold",children:s.length>0?"Tuy\u1EC7t v\u1EDDi":"Ch\u01B0a c\xF3 \u0111\xE1nh gi\xE1"}),H("div",{className:`{${s.length>0?"text-left":"text-center"}}`,children:[s.length>0&&" / 5"," (",s.length," \u0111\xE1nh gi\xE1)"]})]})]}),H("div",{className:`${s.length===0?"hidden":"block"}`,children:[H("div",{className:"mb-[6px] flex items-center justify-between gap-5",children:[T("p",{className:"basis-[30%]",children:"V\u1ECB tr\xED"}),T("div",{className:"basis-[65%] w-full rounded-full h-[8px] overflow-hidden bg-[#ebebeb]  ",children:T("span",{className:"text-sm  bg-primary h-full block ",style:{width:`calc(100% * (${d.location} / 5 ))`}})}),T("span",{className:"basis-[10%] font-bold",children:parseFloat(d.location).toFixed(1)})]}),H("div",{className:"mb-[6px] flex items-center justify-between gap-5",children:[T("p",{className:"basis-[30%]",children:"Kh\xF4ng gian"}),T("div",{className:"basis-[65%] w-full rounded-full h-[8px] overflow-hidden bg-[#ebebeb] ",children:T("span",{className:"text-sm  bg-primary h-full block ",style:{width:`calc(100% * (${d.space} / 5 ))`}})}),T("span",{className:"basis-[10%] font-bold",children:parseFloat(d.space).toFixed(1)})]}),H("div",{className:"mb-[6px] flex items-center justify-between gap-5",children:[T("p",{className:"basis-[30%]",children:"\u0110\u1ED3 u\u1ED1ng"}),T("div",{className:"basis-[65%] w-full rounded-full h-[8px] overflow-hidden bg-[#ebebeb] ",children:T("span",{className:"text-sm  bg-primary h-full block ",style:{width:`calc(100% * (${d.food} / 5 ))`}})}),T("span",{className:"basis-[10%] font-bold",children:parseFloat(d.food).toFixed(1)})]}),H("div",{className:"mb-[6px] flex items-center justify-between gap-5",children:[T("p",{className:"basis-[30%]",children:"Ph\u1EE5c v\u1EE5"}),T("div",{className:"basis-[65%] w-full rounded-full h-[8px] overflow-hidden bg-[#ebebeb] ",children:T("span",{className:"text-sm  bg-primary h-full block ",style:{width:`calc(100% * (${d.service} / 5 ))`}})}),T("span",{className:"basis-[10%] font-bold",children:parseFloat(d.service).toFixed(1)})]}),H("div",{className:"mb-[6px] flex items-center justify-between gap-5",children:[T("p",{className:"basis-[30%]",children:"Gi\xE1 c\u1EA3"}),T("div",{className:"basis-[65%] w-full rounded-full h-[8px] overflow-hidden bg-[#ebebeb] ",children:T("span",{className:"text-sm  bg-primary h-full block ",style:{width:`calc(100% * (${d.price} / 5 ))`}})}),T("span",{className:"basis-[10%] font-bold",children:parseFloat(d.price).toFixed(1)})]})]}),H("div",{className:`relative ${s.length>0?"hidden":"block"}`,children:[T("div",{className:"absolute inset-0 bg-[hsla(0,0%,100%,0.65)] flex items-center justify-center",children:T("button",{onClick:t,className:"text-primary min-h-[50px] animate-shake transition-all duration-150 hover:animate-none hover:bg-[#be0129] hover:border-[#be0129] hover:text-white bg-transparent cursor-pointer font-bold  border-4 border-primary text-sm py-[10px] px-4 rounded-[10px] ",children:"\u0110\xE1nh gi\xE1 ngay"})}),H("div",{className:"mb-[6px] flex items-center justify-between gap-5",children:[T("p",{className:"basis-[30%]",children:"V\u1ECB tr\xED"}),T("div",{className:"basis-[65%] w-full rounded-full h-[8px] overflow-hidden bg-[#ebebeb] ",children:T("span",{className:`text-sm   h-full block ${s.length>0?"bg-primary":"bg-[#ebebeb]"}`})}),T("span",{className:"basis-[10%] font-bold",children:"0"})]}),H("div",{className:"mb-[6px] flex items-center justify-between gap-5",children:[T("p",{className:"basis-[30%]",children:"Kh\xF4ng gian"}),T("div",{className:"basis-[65%] w-full rounded-full h-[8px] overflow-hidden bg-[#ebebeb] ",children:T("span",{className:`text-sm   h-full block ${s.length>0?"bg-primary":"bg-[#ebebeb]"}`})}),T("span",{className:"basis-[10%] font-bold",children:"0"})]}),H("div",{className:"mb-[6px] flex items-center justify-between gap-5",children:[T("p",{className:"basis-[30%]",children:"\u0110\u1ED3 u\u1ED1ng"}),T("div",{className:"basis-[65%] w-full rounded-full h-[8px] overflow-hidden bg-[#ebebeb] ",children:T("span",{className:`text-sm   h-full block ${s.length>0?"bg-primary":"bg-[#ebebeb]"}`})}),T("span",{className:"basis-[10%] font-bold",children:"0"})]}),H("div",{className:"mb-[6px] flex items-center justify-between gap-5",children:[T("p",{className:"basis-[30%]",children:"Ph\u1EE5c v\u1EE5"}),T("div",{className:"basis-[65%] w-full rounded-full h-[8px] overflow-hidden bg-[#ebebeb]",children:T("span",{className:`text-sm   h-full block ${s.length>0?"bg-primary":"bg-[#ebebeb]"}`})}),T("span",{className:"basis-[10%] font-bold",children:"0"})]}),H("div",{className:"mb-[6px] flex items-center justify-between gap-5",children:[T("p",{className:"basis-[30%]",children:"Gi\xE1 c\u1EA3"}),T("div",{className:"basis-[65%] w-full rounded-full h-[8px] overflow-hidden bg-[#ebebeb]",children:T("span",{className:`text-sm   h-full block ${s.length>0?"bg-primary":"bg-[#ebebeb]"}`})}),T("span",{className:"basis-[10%] font-bold",children:"0"})]})]})]})}const xd={toggleFavoriteReview(e){const t="/favorites/toggleFavoriteReview";return wn.post(t,e)},toggleFavoriteComment(e){const t="/favorites/toggleFavoriteComment";return wn.post(t,e)},getAmountFavoriteReview(e){const t=`/favorites/getAmountFavoriteReview/${e}`;return wn.get(t)},getAmountFavoriteComment(e){const t=`/favorites/getAmountFavoriteComment/${e}`;return wn.get(t)}},_d={getAll(e){const t="/comments";return wn.get(t,{params:e})},getById(e){const t=`/comments/id/${e}`;return wn.get(t,{})},createComment(e){const t="/comments";return wn.post(t,e)},deleteComment(e){const t="/comments";return wn.delete(t,{data:e})}};JE.propTypes={item:_e.object,user:_e.object,onReFetch:_e.func};function JE({item:e={},user:t={},onReFetch:r=null}){var C;const[s,u]=ne.exports.useState({commentId:e==null?void 0:e.id,userId:t==null?void 0:t.id}),[d,x]=ne.exports.useState(0),l=Ei();yr(),ne.exports.useEffect(()=>{(async()=>{try{const k=await xd.getAmountFavoriteComment((s==null?void 0:s.commentId)||(e==null?void 0:e.id));x(k)}catch(k){console.log("Error",k)}})()},[e,s]);const _=async k=>{try{if(!(t!=null&&t.id)){const D=zo();l(D);return}await xd.toggleFavoriteComment({userId:t==null?void 0:t.id,commentId:k}),u(D=>({...D,userId:t==null?void 0:t.id,commentId:e==null?void 0:e.id}))}catch(D){console.log(D)}},S=async k=>{if(!!r)try{await _d.deleteComment({id:k,reviewId:e==null?void 0:e.reivewId}),Yt("B\u1EA1n \u0111\xE3 x\xF3a b\xECnh lu\u1EADn th\xE0nh c\xF4ng."),r(D=>({...D,page:0,reviewId:e==null?void 0:e.reivewId}))}catch{Yt.error("C\xF3 l\u1ED7i x\u1EA3y ra vui l\xF2ng th\u1EED l\u1EA1i sau!")}};return H("div",{className:"mt-1 px-5 flex items-center justify-between",children:[T("div",{className:"flex items-center",children:T("button",{onClick:()=>_(e==null?void 0:e.id),className:`text-xs flex items-center gap-x-1 ${d>0&&"text-primary"}`,children:d>0?H(yn,{children:[T(xx,{}),d," Th\xEDch"]}):H(yn,{children:[T(ME,{}),"Th\xEDch"]})})}),H("div",{className:"group relative min-w-[150px] flex justify-end",children:[T(oy,{className:"relative cursor-pointer"}),T("div",{className:"absolute hidden group-hover:block bg-white shadow-[0_2px_8px_rgb(0,0,0,0.15)] mt-3 rounded-md ",children:(t==null?void 0:t.id)&&((C=e==null?void 0:e.user)==null?void 0:C.id)===(t==null?void 0:t.id)?T("div",{children:H("div",{onClick:()=>S(e==null?void 0:e.id),className:"cursor-pointer transition-all hover:bg-gray-300  py-1 px-3 text-sm flex items-center gap-2",children:[T(_x,{className:"text-lg"}),"X\xF3a"]})}):T("div",{children:H("div",{className:"cursor-pointer transition-all hover:bg-gray-300 py-1 px-3 text-sm flex items-center gap-2",children:[T(MI,{}),"B\xE1o c\xE1o"]})})})]})]})}const gte="_modalImage_1nzp6_1",yte="_swiper_1nzp6_1";var xte={modalImage:gte,swiper:yte,"swiper-button-prev":"_swiper-button-prev_1nzp6_4","swiper-button-next":"_swiper-button-next_1nzp6_7"};Su.propTypes={data:_e.object,imageList:_e.array,hideModalImage:_e.func,index:_e.number,url:_e.string,length:_e.number};function Su({data:e={},index:t=0,hideModalImage:r=null,imageList:s=[],url:u="http://localhost:5000/img/blogs/",length:d=0}){const x=ne.exports.useRef(null),l=ne.exports.useRef(null),[_,S]=ne.exports.useState(0),C=U=>{S(U.activeIndex)},k=U=>{x.current.style.width=x.current.offsetWidth*1.5+"px"},D=U=>{x.current.offsetWidth<=600||(x.current.style.width=x.current.offsetWidth/1.5+"px")};return ri.exports.createPortal(T("div",{className:`fixed  inset-0 bg-[rgba(0,0,0,.85)] modal-image ${xte.modalImage} z-[100000011111111]`,children:H($m,{modules:[YE],onSlideChange:U=>C(U),initialSlide:t,navigation:!0,children:[H("div",{className:"absolute bg-[rgba(0,0,0,.5)] top-0 w-full flex items-center justify-between h-[50px] z-[100] overflow-hidden",children:[H("div",{className:"pl-5 leading-[50px] text-sm text-white ",children:[_+1," / ",(s==null?void 0:s.length)>0?s==null?void 0:s.length:0]}),H("div",{className:"h-full flex items-center justify-center",children:[T("button",{className:"py-[1px] px-[6px] h-[35px] w-10",onClick:k,children:T("img",{src:"/img/search_plus.svg",alt:"search_plus"})}),T("button",{className:"py-[1px] px-[6px] h-[35px] w-10",onClick:D,children:T("img",{src:"/img/search_minus.svg",alt:"search_minus"})}),T("button",{className:"py-[1px] px-[6px] h-[35px] w-10",onClick:r,children:T("img",{src:"/img/close.svg",alt:"close"})})]})]}),s==null?void 0:s.map((U,q)=>T(jm,{className:"flex ",children:T("div",{className:"flex justify-center items-center m-auto w-[590px]",ref:q===_?x:l,children:T("img",{src:U==null?void 0:U.url,alt:`${U}`,className:"h-[100vh]  w-full "})})},U)),H("div",{className:"absolute text-sm bg-[rgba(0,0,0,.5)] bottom-0 w-full  h-[42px]  z-[100] text-white flex items-center  py-[10px] px-5",children:[e==null?void 0:e.name," - Toidicafe.vn"]})]})}),document.querySelector("body"))}Em.propTypes={range:_e.number};function Em({range:e=280,children:t}){const r=t,[s,u]=ne.exports.useState(!0),d=()=>{u(!1)};return H("p",{className:"text whitespace-pre-wrap",children:[s&&(r==null?void 0:r.length)>e?r.slice(0,e):r,T("span",{onClick:d,className:"read-or-hide text-primary hover:underline cursor-pointer transition-all",children:s&&(r==null?void 0:r.length)>e?"... Xem th\xEAm":" "})]})}Od.propTypes={name:_e.string,id:_e.string,onChange:_e.func,className:_e.string,onKeyPress:_e.func,isFocus:_e.bool,dValue:_e.string};function Od({onChange:e=null,className:t="",onKeyPress:r=null,isFocus:s=!1,dValue:u="",...d}){const[x,l]=ne.exports.useState(u),[_,S]=ne.exports.useState("auto"),C=ne.exports.useRef(null),k=ne.exports.useRef(null);ne.exports.useEffect(()=>{l(u)},[u]);const D=q=>{const L=q.target.value.trim();S("auto"),l(q.target.value),k.current&&clearInterval(k.current),k.current=setTimeout(()=>{e({[d.name]:L})},0)},U=async q=>{if(!r||q.key==="Enter"&&q.shiftKey){q.preventDefault();return}else if(q.key==="Enter"&&x){if(!x||x.trim()===""||/^[\n]+$/.test(x))return;r(),l("".trim())}};return zt.useLayoutEffect(()=>{var q;S(`${(q=C==null?void 0:C.current)==null?void 0:q.scrollHeight}px`)},[x]),T("div",{className:`mt-4 ${t} `,children:T("textarea",{autoComplete:"off",ref:C,placeholder:"Nh\u1EADp t\u1ED1i thi\u1EC3u 10 k\xED t\u1EF1.",value:x,onKeyPress:r?U:null,onChange:D,className:`resize-none overflow-hidden leading-normal w-full text-base border outline-none rounded-[10px] px-2 py-1 ${t}`,autoFocus:s,...d,style:{minHeight:_,resize:"none"}})})}N6.propTypes={isReply:_e.bool,hideReply:_e.func,onSubmit:_e.func,review:_e.object};function N6({isReply:e=!1,review:t={},hideReply:r=null,onSubmit:s=null}){var C;const u=jr(k=>k.auth.current),d=ne.exports.useRef(null),[x,l]=ne.exports.useState({});ne.exports.useEffect(()=>{d&&d.current&&d.current.focus()},[e]);const _=async()=>{await s({name:x==null?void 0:x.reply,userId:u==null?void 0:u.id,reviewId:t==null?void 0:t.id,status:1}),r()},S=k=>{l(k)};return T("div",{className:"border-l-[1px] border-l-[#eee] ml-[60px] mt-[16px] pl-[10px]",children:T("div",{className:"mt-1 pt-4 border-t-[1px] border-t-[#ddd]",children:H("div",{className:"py-[5px] px-[10px] bg-[#eee] rounded-[12px] ",children:[T("div",{className:"flex items-center justify-between border-b-[1px] border-b-[#e0e0e0] py-1 ",children:H("div",{className:"flex items-start ",children:[T(Jt,{to:`/profile/${u==null?void 0:u.slug}`,className:"mr-[11px] w-10 h-10 lg:w-[64px] lg:h-[64px]",children:T("img",{src:((C=u==null?void 0:u.image)==null?void 0:C.url)||"/img/user-default.jpg",alt:u==null?void 0:u.name,className:"w-full h-full rounded-full"})}),T("div",{className:"flex flex-col gap-y-1 ",children:T("h3",{className:"text-base font-semibold hover:underline cursor-pointer lg:text-[18px]",children:u==null?void 0:u.name})})]})}),T("form",{className:"mt-2",ref:d,children:T(Od,{className:"bg-[#f5f5f7] text-xs lg:text-sm ",name:"reply",id:"reply",onKeyPress:_,onChange:S})})]})})})}L6.propTypes={item:_e.object,onClick:_e.func,onSubmit:_e.func,blog:_e.object,handleRefetch:_e.func};function L6({item:e={},onClick:t=null,onSubmit:r=null,blog:s={},handleRefetch:u=null}){var bt,ot,Ot,Dt,Ze,Ye,De,_t,mt,Et,jt,en,nn,vn;const d=jr(Bt=>Bt.auth.current),[x,l]=ne.exports.useState(!1),[_,S]=ne.exports.useState([]),[C,k]=ne.exports.useState({show:!1,index:0}),[D,U]=ne.exports.useState(!1),[q,L]=ne.exports.useState(0),[K,R]=ne.exports.useState(!0),F=ne.exports.useRef(null),[V,J]=ne.exports.useState({reviewId:e.id,page:0}),[re,fe]=ne.exports.useState(!1),be=Ei(),ce=Bt=>{if(!(d!=null&&d.id)){be(zo());return}if(!t)return null;fe(!0),!re&&(t(d==null?void 0:d.id,Bt),J(xn=>({...xn})),fe(!1))},ve=()=>{U(!0)};ne.exports.useEffect(()=>(Fe(),window.addEventListener("resize",Fe),(async()=>{try{const Bt=await _d.getAll(V),xn=await xd.getAmountFavoriteReview(e==null?void 0:e.id);L(xn),S(Bt)}catch{}})(),()=>window.removeEventListener("resize",Fe)),[e,V]);const Fe=()=>{var Bt;F&&F.current&&((Bt=F.current)==null?void 0:Bt.offsetHeight)>90?R(!1):R(!0)},Le=async Bt=>{!r||r(Bt)},Ie=Bt=>{k(xn=>({...xn,show:!0,index:Bt}))},Ke=async Bt=>{try{if(!u)return;await Gs.deleteReview(Bt),Yt("B\u1EA1n \u0111\xE3 x\xF3a review th\xE0nh c\xF4ng."),u()}catch{Yt.error("C\xF3 l\u1ED7i x\u1EA3y ra vui l\xF2ng th\u1EED l\u1EA1i sau!")}};return H(yn,{children:[T("div",{className:"mt-1 pt-4 border-t-[1px] border-t-[#ddd] lg:pt-5 lg:mt-5",children:H("div",{className:"py-[5px] px-[10px] bg-[#eee] lg:bg-white  rounded-[12px] ",children:[H("div",{className:"flex  justify-between border-b-[1px] border-b-[#e0e0e0] py-1  ",children:[H("div",{className:"flex items-center",children:[T(Jt,{to:`/profile/${(bt=e==null?void 0:e.userDto)==null?void 0:bt.slug}`,className:"mr-[11px] w-10 h-10 lg:w-[64px] lg:h-[64px]",children:T("img",{src:((Ot=(ot=e==null?void 0:e.userDto)==null?void 0:ot.image)==null?void 0:Ot.url)||"/img/user-default.jpg",alt:(Dt=e==null?void 0:e.userDto)==null?void 0:Dt.name,className:"w-full h-full rounded-full"})}),H("div",{className:"flex flex-col gap-y-1  ",children:[T(Jt,{to:`/profile/${(Ze=e==null?void 0:e.userDto)==null?void 0:Ze.slug}`,className:"text-base font-semibold hover:underline cursor-pointer lg:text-[18px] truncate-text-auto",children:(Ye=e==null?void 0:e.userDto)==null?void 0:Ye.name}),H("div",{className:"pt-[2px] flex items-center text-[14px] lg:mr-0 xs:mr-[-40px]",children:[((De=e==null?void 0:e.rating)==null?void 0:De.averageRating)>0&&T("span",{className:"mr-[6px] font-bold lg:text-sm text-xs",children:(mt=(_t=e==null?void 0:e.rating)==null?void 0:_t.averageRating)==null?void 0:mt.toFixed(1)}),Array.from(new Array(5)).map((Bt,xn)=>{var Xn,Rt;return((Xn=e==null?void 0:e.rating)==null?void 0:Xn.averageRating)>=xn+1?T(DE,{className:"lg:text-[14px] text-[10px] text-primary"},xn):((Rt=e==null?void 0:e.rating)==null?void 0:Rt.averageRating)>=xn+.5?T(PE,{className:"lg:text-[14px] text-[10px] text-primary"},xn):T(IE,{className:"lg:text-[14px] text-[10px]"},xn)}),T("span",{className:"mx-2 text-gray-400",children:"\u25CF"})," ",H("span",{className:" lg:text-sm text-xs text-[#898c95] block",children:["\u0110\xE3 \u0111\xE1nh gi\xE1"," ",H1(new Date(e==null?void 0:e.createdAt).toLocaleDateString("en-US"))]})]})]})]}),T("div",{className:"w-8 h-8 text-xs overflow-hidden text-white bg-primary rounded-full font-bold flex items-center justify-center",children:parseFloat((Et=e==null?void 0:e.rating)==null?void 0:Et.averageRating).toFixed(1)})]}),T("div",{children:H("div",{ref:F,className:"relative py-[9px] px-[2px] lg:bg-[#f5f5f7] lg:py-[5px] lg:px-[15px] lg:rounded-br-[10px] lg:rounded-bl-[10px] ",children:[T(Em,{range:280,children:e==null?void 0:e.name}),((jt=e==null?void 0:e.listImage)==null?void 0:jt.length)>0&&T("div",{className:"flex items-center whitespace-normal mt-[6px] gap-x-2 ",children:(en=e==null?void 0:e.listImage)==null?void 0:en.map((Bt,xn)=>{var Xn,Rt,Qn;return H("div",{onClick:()=>Ie(xn),className:`rounded-[6px] overflow-hidden relative lg:w-[116px] lg:h-[116px] w-[100px] h-[100px]  ${xn<6?"block":"hidden"}`,children:[xn===5&&((Xn=e==null?void 0:e.listImage)==null?void 0:Xn.length)>6&&H("div",{className:"absolute inset-0 bg-[rgba(0,0,0,.4)] transition-all text-white flex items-center justify-center font-semibold cursor-pointer text-base",children:["+",((Rt=e==null?void 0:e.listImage)==null?void 0:Rt.length)-5," \u1EA3nh"]}),(xn!==2||((Qn=e==null?void 0:e.listImage)==null?void 0:Qn.length)<=3)&&T("div",{className:"absolute inset-0 cursor-pointer hover:bg-[rgba(0,0,0,.4)] transition-all"}),T("img",{src:Bt==null?void 0:Bt.url,alt:Bt,className:" w-full h-full object-cover"})]},xn)})})]})})]})}),H("div",{className:"mt-[8px] px-[10px] flex items-center justify-between",children:[H("div",{className:"flex items-center text-xs",children:[H("button",{onClick:()=>ce(e.id),className:`flex items-center lg:text-sm  ${q>0?"text-primary  ":""}`,children:[q>0?T(xx,{className:"w-3 h-3 mr-1 "}):T(ME,{className:"w-3 h-3 mr-1 "}),q>0&&T("span",{className:"mx-[2px] ",children:q}),"Th\xEDch"]}),T("button",{onClick:()=>{if(!(d!=null&&d.id)){be(zo());return}ve(),l(!0)},className:"before:content-['\u25CF'] before:inline-block lg:text-sm before:text-[#c1c1c1] before:mx-[6px] before:text-[12px] first:before:hidden ",children:"Tr\u1EA3 l\u1EDDi"})]}),H("div",{className:"group relative min-w-[150px] flex justify-end",children:[T(oy,{className:"relative cursor-pointer"}),T("div",{className:"absolute hidden group-hover:block bg-white shadow-[0_2px_8px_rgb(0,0,0,0.15)] mt-3 rounded-md ",children:(d==null?void 0:d.id)&&((nn=e==null?void 0:e.userDto)==null?void 0:nn.id)===(d==null?void 0:d.id)?T("div",{children:H("div",{onClick:()=>Ke(e==null?void 0:e.id),className:"cursor-pointer transition-all hover:bg-gray-300  py-1 px-3 text-sm flex items-center gap-2",children:[T(_x,{className:"text-lg"}),"X\xF3a"]})}):T("div",{children:H("div",{className:"cursor-pointer transition-all hover:bg-gray-300 py-1 px-3 text-sm flex items-center gap-2",children:[T(MI,{}),"B\xE1o c\xE1o"]})})})]})]}),D&&T(N6,{isReply:D,review:e,onSubmit:Le,hideReply:()=>U(!1)}),(_==null?void 0:_.length)>0&&x===!1&&H("div",{onClick:()=>l(!0),className:"text-black pl-[6px] cursor-pointer text-xs lg:text-sm mt-2 ml-[6px] flex items-center gap-x-2 hover:underline transition-all duration-300",children:[T(pY,{className:"rotate-180"}),"Xem th\xEAm ",_==null?void 0:_.length," tr\u1EA3 l\u1EDDi"]}),(_==null?void 0:_.length)>0&&x===!0&&_.map((Bt,xn)=>{var Xn,Rt,Qn,zn;return H("div",{className:"border-l-[1px] border-l-[#eee] ml-[60px] mt-[16px] pl-[10px] ",children:[T("div",{className:"mt-1 pt-4 border-t-[1px] border-t-[#ddd]",children:H("div",{className:"py-[5px] px-[10px] bg-[#eee] rounded-[12px] ",children:[T("div",{className:"flex items-center justify-between border-b-[1px] border-b-[#e0e0e0] py-1 ",children:H("div",{className:"flex items-start",children:[T(Jt,{to:`/profile/${Bt==null?void 0:Bt.slug}`,className:"mr-[11px] w-10 h-10 lg:w-[64px] lg:h-[64px]",children:T("img",{src:((Rt=(Xn=Bt==null?void 0:Bt.user)==null?void 0:Xn.image)==null?void 0:Rt.url)||"/img/user-default.jpg",alt:(Qn=Bt==null?void 0:Bt.user)==null?void 0:Qn.name,className:"w-full h-full rounded-full"})}),H("div",{className:"flex flex-col gap-y-1  ",children:[T(Jt,{to:`/profile/${Bt==null?void 0:Bt.slug}`,className:"text-base font-semibold hover:underline cursor-pointer lg:text-[18px]",children:(zn=Bt==null?void 0:Bt.user)==null?void 0:zn.name}),H("span",{className:"text-xs font-normal text-[#898c95] mb-[2px] block hover:underline cursor-pointer",children:["\u0110\xE3 \u0111\xE1nh gi\xE1"," ",H1(new Date(Bt==null?void 0:Bt.createdAt).toLocaleDateString("en-US"))," "]})]})]})}),T("div",{className:"py-[9px] px-[2px]",children:T(Em,{range:200,children:Bt==null?void 0:Bt.name})})]})}),T(JE,{user:d,item:Bt,onReFetch:J})]},xn)}),C.show&&T(Su,{imageList:e==null?void 0:e.listImage,data:e,length:(vn=e==null?void 0:e.listImage)==null?void 0:vn.length,index:C==null?void 0:C.index,hideModalImage:()=>k(Bt=>({...Bt,show:!1,index:0}))})]})}Ih.propTypes={name:_e.string,title:_e.string,onChange:_e.func};function Ih({name:e="",title:t="",onChange:r=null}){const s=ne.exports.useRef(null),[u,d]=ne.exports.useState(!0),[x,l]=ne.exports.useState(5);ne.exports.useEffect(()=>{let C=document.querySelectorAll(`.mouseover_${e}`);const k=U=>{C=s.current.querySelectorAll(`.mouseover_${e}`),C.forEach((L,K)=>{L.className=`cursor-pointer absolute inset-0 z-20  transition-all w-10 h-10  mouseover_${e} text-primary   `})},D=U=>{C=s.current.querySelectorAll(`.mouseover_${e}`);const L=[...C].findIndex(K=>K.contains(U.target));C.forEach((K,R)=>{R>L&&(K.className=`cursor-pointer absolute inset-0 z-20 transition-all text-[#d8d8d8]  w-10 h-10  mouseover_${e} hover:opacity-0 hover:invisible z-0`)})};return s&&s.current&&u&&C.forEach(U=>{U.addEventListener("mouseover",D),U.addEventListener("mouseout",k)}),()=>{C.forEach(U=>{U.removeEventListener("mouseover",D),U.removeEventListener("mouseout",k)})}},[u]);const _=C=>{if(!r)return null;l(C),d(!1),r({[e]:C})},S=()=>{switch(x){case 1:return"Qu\xE1 t\u1EC7";case 2:return"Trung b\xECnh";case 3:return"B\xECnh th\u01B0\u1EDDng";case 4:return"T\u1ED1t";case 5:return"Tuy\u1EC7t v\u1EDDi";default:return"Tuy\u1EC7t v\u1EDDi"}};return H("div",{className:"pl-[10px] pr-5 flex items-center justify-between mb-1",children:[T("span",{className:"flex-1  min-w-24",children:t}),T("div",{className:"flex  grow",ref:s,children:Array.from(new Array(5)).map((C,k)=>T("div",{onClick:()=>_(k+1),className:"relative lg:w-10 lg:h-10 w-5 h-5 pl-[36px] xs:pl-[20px] ",children:T("div",{className:`cursor-pointer absolute inset-0 z-20 transition-all  duration-300 mouseover_${e} ${k+1>x?"text-[#d8d8d8]":"text-primary"}`,children:T(yY,{className:"lg:w-8 lg:h-8 m-0 w-4 h-4 "})})},k))}),T("div",{className:"flex-1",children:H("div",{className:"relative inline-block text-base h-8 leading-[32px] pr-3 pl-[6px] ml-5  text-white bg-primary rounded-br-[4px] rounded-tr-[4px] ",children:[T("span",{className:"font-medium whitespace-normal min-w-[92px] block ",children:S()}),T("div",{className:"absolute border-transparent border-r-primary border-[16px] border-l-[0px] w-0 h-0  top-0 left-[-16px] "})]})})]})}F6.propTypes={items:_e.object,onChange:_e.func};function F6({item:e={},onChange:t=null}){const r=ne.exports.useRef(null),s=jr(_=>_.auth.current),[u,d]=ne.exports.useState([]);ne.exports.useEffect(()=>{r&&r.current&&(r.current.focus(),r.current.value=`\u0110\xE1nh gi\xE1 c\u1EE7a ${s==null?void 0:s.name} v\u1EC1 ${e==null?void 0:e.name}`)},[e]);const x=()=>{r&&r.current&&(r.current.focus(),r.current.value="")},l=_=>{const S=Array.from(_.target.files).map((k,D)=>URL.createObjectURL(_.target.files[D])),C=Array.from(_.target.files).map((k,D)=>_.target.files[D]);d(k=>[...k,...S]),t&&t({listImageFiles:C})};return H("div",{children:[T("h3",{className:"text-[18px] text-[#898c95] font-semibold mb-2",children:"\u0110\xE1nh gi\xE1 c\u1EE7a b\u1EA1n"}),H("div",{className:"relative text-base rounded-[10px] mb-[10px]",children:[T("div",{onClick:x,className:"absolute right-[10px] top-[10px] cursor-pointer text-[rgba(0,0,0,.25)] hover:text-[rgba(0,0,0,.45)] transition-all",children:T(vY,{})}),T("div",{children:T(Od,{onChange:t,onKeyPress:()=>{},name:"name",id:"reviewUser",placeholder:"Nh\u1EADp t\u1ED1i th\u1ED1i 10 k\xED t\u1EF1."})}),H("div",{className:"mt-4 grid grid-cols-5 gap-3",children:[u.map((_,S)=>H("div",{className:"w-[104px] h-[104px]  opacity-80 hover:opacity-100 transition-all duration-300 cursor-pointer relative",children:[T("div",{className:"absolute inset-0  bg-[rgba(0,0,0,0.3) hover:bg-[rgba(0,0,0,0.5)] rounded-[10px] transition-all duration-300 z-10"}),T("img",{src:_,alt:_,className:"w-full h-full object-cover rounded-[10px]"})]},S)),H("div",{className:"mb-2 mr-2 text-sm rounded-[10px] w-[104px] h-[104px] border flex items-center justify-center",children:[H("label",{htmlFor:"file-img",className:"flex flex-col items-center justify-center cursor-pointer gap-y-2",children:[T(md,{className:"text-[20px]"}),T("span",{children:"Th\xEAm \u1EA3nh"})]}),T("input",{onChange:l,type:"file",name:"file-img",id:"file-img",className:"hidden",accept:"image/*",multiple:!0})]})]})]})]})}R6.propTypes={item:_e.object,onShow:_e.func,onSubmit:_e.func,onReFetch:_e.func,handleRefetch:_e.func};function R6({item:e={},onShow:t=null,onSubmit:r=null,onReFetch:s=null,handleRefetch:u=null}){const d=jr(U=>U.auth.current);Ei();const x=ne.exports.useRef(null),[l,_]=ne.exports.useState({food:5,service:5,space:5,price:5,location:5,name:""}),[S,C]=ne.exports.useState(!1);if(typeof document=="undefined")return T("div",{className:"modal",children:"Modal"});ne.exports.useEffect(()=>{},[]);const k=U=>{_(q=>({...q,...U}))},D=async()=>{var U,q,L;try{if(C(!0),((q=(U=l==null?void 0:l.name)==null?void 0:U.trim())==null?void 0:q.length)<10)return null;const K=new FormData;K.append("name",l==null?void 0:l.name),(L=l==null?void 0:l.listImageFiles)==null||L.forEach((R,F)=>{K.append(`listImageFiles[${F}]`,R)}),K.append("price",l==null?void 0:l.price),K.append("location",l==null?void 0:l.location),K.append("service",l==null?void 0:l.service),K.append("food",l==null?void 0:l.food),K.append("space",l==null?void 0:l.space),K.append("productId",e==null?void 0:e.id),K.append("userId",d==null?void 0:d.id),await Gs.createReview(K),s(R=>({...R})),t(!1),u(),Yt("\u0110\xE1nh gi\xE1 th\xE0nh c\xF4ng.")}catch(K){console.log("Error",K.message),Yt.error((K==null?void 0:K.message)||"C\xF3 l\u1ED7i x\u1EA3y ra xin h\xE3y th\u1EED l\u1EA1i sau.")}C(!1)};return ri.exports.createPortal(T("div",{className:"fixed flex  justify-center inset-0 z-[10000] bg-[rgba(0,0,0,0.65)]",children:T("div",{className:"absolute h-full overflow-auto",children:H("div",{className:"bg-white lg:w-[610px] sm:w-full",children:[H("div",{className:"px-10 h-[50px] border-b-[1px] border-b-[rgba(0,0,0,0.1)] flex items-center justify-between",children:[H("div",{className:"text-[20px] flex items-center justify-center grow font-bold ",children:["\u0110\xE1nh gi\xE1 ",e.name]}),T("div",{onClick:t,className:"w-[30px] h-[30px] rounded-full text-[20px] flex items-center justify-center mr-[-30px] cursor-pointer hover:bg-[#cdcfd4] transition-all bg-[#e4e6eb] text-[#666]",children:T(Nd,{})})]}),H("form",{className:"p-4",ref:x,children:[H("div",{className:"mb-[10px]",children:[T("h3",{className:"text-[18px] text-[#898c95] font-semibold",children:"X\u1EBFp h\u1EA1ng c\u1EE7a b\u1EA1n"}),T(Ih,{name:"location",title:"V\u1ECB tr\xED",onChange:k}),T(Ih,{name:"space",title:"Kh\xF4ng gian",onChange:k}),T(Ih,{name:"food",title:"\u0110\u1ED3 u\u1ED1ng",onChange:k}),T(Ih,{name:"service",title:"Ph\u1EE5c v\u1EE5",onChange:k}),T(Ih,{name:"price",title:"Gi\xE1 c\u1EA3",onChange:k})]}),T(F6,{item:e,onChange:k})]}),T("div",{className:"p-[10px] border-t-[1px] border-t-[rgba(0,0,0,.1)] flex items-center justify-end",children:T("button",{disabled:!(l.name.trim().length>=10&&!S),onClick:D,className:`px-[10px] py-[6px]  rounded-[6px] text-base font-medium outline-none
              ${l.name.trim().length>=10&&l.name.trim().length<=2e3&&!S?"bg-primary text-white":"text-[#bcc0c4] bg-[#e4e6eb]"}
              `,children:"G\u1EEDi \u0111\xE1nh gi\xE1"})})]})})}),document.querySelector("body"))}O6.propTypes={item:_e.object,show:_e.bool,onShow:_e.func,hideShow:_e.func,handleRefetch:_e.func};function O6({item:e={},show:t=!1,onShow:r=null,hideShow:s=null,handleRefetch:u=null}){const[d,x]=ne.exports.useState([]),[l,_]=ne.exports.useState(1),[S,C]=ne.exports.useState({page:1,limit:5,sortBy:"createdAtDesc"}),[k,D]=ne.exports.useState(1),U=Ei();ne.exports.useEffect(()=>{(async()=>{const R=await Gs.getAll({...S,productId:(e==null?void 0:e.id)||0}),F=await Gs.getAll({page:0,productId:(e==null?void 0:e.id)||0});x(R),_(F==null?void 0:F.length)})()},[S,e]);const q=R=>{D(R),C(F=>({...F,page:R}))},L=async(R,F)=>{try{if(!R){const V=zo();U(V);return}await xd.toggleFavoriteReview({userId:R,reviewId:F})}catch{}},K=async R=>{await _d.createComment(R),C(F=>({...F}))};return H("div",{className:"pt-1 px-[14px] pb-[10px] mb-[6px] lg:px-4 lg:py-2 shadow-[0_1px_4px_rgb(0,0,0,0.3)] rounded-[10px] flex-1 h-fit",children:[H("div",{className:"flex items-center justify-between pb-[6px]",children:[H("h2",{className:"lg:text-xl text-lg lg:text-[28px] font-semibold",children:["\u0110\xE1nh gi\xE1 t\u1EEB c\u1ED9ng \u0111\u1ED3ng"," ",H("span",{className:" text-[#8a8a8a]",children:["(",l,")"]})]}),T("button",{onClick:r,className:"bg-primary text-white py-[6px] px-2 font-bold text-sm rounded-[10px] border border-primary hover:bg-[#be0129] transition-all duration-150",children:"Vi\u1EBFt \u0111\xE1nh gi\xE1"})]}),H("div",{className:"lg:px-4 lg:py-[10px] flex items-center justify-between lg:justify-center px-[2px] mt-1 mb-2 rounded-[20px] bg-[linear-gradient(90deg,#ffb8b8,#ffddd8)] relative before:absolute before:top-[-10px]  before:right-[36px] before:border-b-[10px] before:border-b-[#ffdcd8] before:border-r-transparent before:border-r-[10px] before:border-l-transparent before:border-l-[10px]",children:[T("div",{className:"w-[65%] lg:w-[30%] flex lg:block lg:ml-4",children:T("img",{src:"/img/online-review.svg",alt:"online-review",className:"max-h-[160px]"})}),H("div",{className:"basis-[35%] lg:w-full lg:basis-full py-[10px] px-1 lg:px-2 lg:grow lg:ml-4",children:[T("h2",{className:"text-base mb-1 font-medium lg:text-[24px] lg:mb-3",children:"B\u1EA1n \u0111\xE3 t\u1EEBng \u0111\u1EBFn \u0111\xE2y?"}),T("p",{className:"text-xs mb-[2px] leading-[1.7] lg:text-sm ",children:"Chia s\u1EBB tr\u1EA3i nghi\u1EC7m v\xE0 c\u1EA3m nh\u1EADn c\u1EE7a b\u1EA3n th\xE2n cho m\u1ECDi ng\u01B0\u1EDDi c\xF9ng bi\u1EBFt \u2764\uFE0F"}),T("p",{className:"text-xs leading-[1.7] lg:text-sm mb-[2px]",children:"Nh\u1EEFng review ch\u1EA5t l\u01B0\u1EE3ng s\u1EBD \u0111\u01B0\u1EE3c xu\u1EA5t hi\u1EC7n \u1EDF b\u1EA3ng tin \u0111\u1EA5y!"})]})]}),d.length>0&&d.map(R=>T("div",{children:T(L6,{onSubmit:K,item:R,blog:e,onClick:L,handleRefetch:u})},R.id)),l>5&&T("div",{children:T(Fd,{data:d,onChange:R=>q(R),itemsPerPage:5,count:l,page:k})}),t&&T(R6,{item:e,onShow:s,onSubmit:R=>x(F=>[...F,R]),onReFetch:C,handleRefetch:u})]})}qi.accessToken="pk.eyJ1Ijoiam9uYXNzY2htZWR0bWFubiIsImEiOiJjam54ZmM5N3gwNjAzM3dtZDNxYTVlMnd2In0.ytpI7V7w7cyT1Kq5rT9Z1A";B6.propTypes={data:_e.object,hideMap:_e.func};function B6({data:e={},hideMap:t=null}){const r=ne.exports.useRef(null),s=ne.exports.useRef(null),u=ne.exports.useRef(null),[d,x]=ne.exports.useState(e==null?void 0:e.longitude),[l,_]=ne.exports.useState(e==null?void 0:e.latitude);return ne.exports.useEffect(()=>{var U;if(u.current)return;u.current=new qi.Map({container:r.current,style:"mapbox://styles/mapbox/streets-v11",center:[d,l],zoom:15});const S=`
    
    <div style="display:flex; align-items:start;">
<div style="border-radius:6px; margin-right:8px; width:100%; height:60px;"><img src=${(e==null?void 0:e.listImage)&&((U=e==null?void 0:e.listImage[0])==null?void 0:U.url)} style=" border-radius:6px;  object-fit:cover; width:100%; height:100%; " alt=${e==null?void 0:e.name}/></div>

<div  style="overflow:hidden;width: 200px; text-align:center;">
<p style="font-size:14px; font-weight:600; margin-bottom:2px; overflow:hidden; text-overflow:ellipsis; line-clamp:1; -webkit-box-orient:vertical; display:-webkit-box ; -webkit-line-clamp:1;">${e==null?void 0:e.name}</p>
<p style="font-size:12px; overflow:hidden; text-overflow:ellipsis; line-clamp:2; -webkit-box-orient:vertical; display:-webkit-box ; -webkit-line-clamp:2; line-height:1.3; ">${e==null?void 0:e.location}</p>
</div>

</div>`,C=new qi.LngLatBounds,k=new qi.Popup({offset:25}).setHTML(S),D=document.createElement("div");D.className="marker",new qi.Marker({element:D,anchor:"center"}).setLngLat({lng:d,lat:l}).setPopup(k).addTo(u.current).togglePopup(),u.current&&(C.extend([d,l]),u.current.addControl(new qi.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,showUserHeading:!0}),"top-left"),u.current.addControl(new qi.NavigationControl,"top-left"),u.current.addControl(new qi.FullscreenControl),u.current)},[]),ri.exports.createPortal(T("div",{className:"bg-[rgba(0,0,0,.8)] fixed inset-0 flex items-center justify-center z-[1000]",children:H("div",{className:"bg-[#eee] rounded-[6px] w-[90%] h-[90%] overflow-hidden relative",children:[H("div",{className:"relative flex items-center justify-center h-[60px] border-b-[1px] border-b-[#111] text-center pl-1 pr-[6px] py-5",children:[H("h1",{className:"text-[24px]  font-bold mb-[2px] text-center flex items-center gap-x-2",children:[T(kI,{}),e.name]}),T("div",{onClick:t,className:"absolute top-[7px] right-3 cursor-pointer  w-10 h-10 rounded-full bg-white shadow-[0_2px_8px_rgb(0,0,0,0.15)] flex items-center justify-center transition-all hover:shadow-[0_2px_8px_rgb(0,0,0,0.15),0_2px_8px_rgb(0,0,0,0.2)]",children:T(Nd,{className:"m-0 text-[22px]"})})]}),T("div",{className:"relative overflow-hidden flex-1 rounded-[10px] mb-[6px] h-full ",ref:s,children:T("div",{ref:r,className:"map-container  min-h-[200px] h-full "})}),H("div",{className:" hover:text-primary transition-all absolute bottom-[24px] left-1/2 translate-x-[-50%] text-lg cursor-pointer font-medium  pt-[2px] pb-1 px-[12px] text-[#333] bg-white rounded-[10px] shadow-[0_0_0_2px_rgb(0,0,0,0.1)] flex items-center justify-center gap-x-2",children:[T("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${e==null?void 0:e.latitude},${e==null?void 0:e.longitude}`,target:"_blank",children:"Xem \u0111\u01B0\u1EDDng \u0111i"}),T(HK,{className:"animate-move"})]})]})}),document.querySelector("body"))}$6.propTypes={data:_e.object,hideModalMenu:_e.func,index:_e.number};function $6({data:e={},hideModalMenu:t}){var S,C,k;const[r,s]=ne.exports.useState(!1),[u,d]=Ka(),[x,l]=ne.exports.useState(0),_=D=>{s(!0),d(!1),l(D)};return ri.exports.createPortal(H("div",{className:"fixed z-[10000] inset-0 bg-[rgba(0,0,0,.65)]",children:[T("div",{className:"flex items-center justify-center h-full",children:H("div",{className:"w-[680px] max-h-[96%]  text-black relative bg-white rounded-[10px] overflow-hidden  shadow-[rgb(0,0,0,0.15)_0px_2px_8px]",children:[H("div",{className:"relative h-[60px] px-[60px] text-center border-b-[1px] border-b-[rgba(0,0,0,.1)]",children:[H("h1",{className:"text-center font-bold text-[21px] leading-[60px]",children:["Menu c\u1EE7a ",e==null?void 0:e.name]}),T("div",{onClick:t,className:"absolute top-[12px] right-[16px] w-9 h-9 text-[#666] bg-[#e4e6eb] rounded-full flex items-center justify-center text-[22px] cursor-pointer hover:bg-[#cdcfd4] transition-all",children:T(Nd,{})})]}),T("div",{className:"p-4 overflow-y-auto",children:((S=e==null?void 0:e.listMenu)==null?void 0:S.length)>0?T("div",{className:"grid lg:grid-cols-3 grid-cols-2 gap-x-3 gap-y-3 min-h-[200px] max-h-[calc(96vh_-_100px)]  ",children:(C=e==null?void 0:e.listMenu)==null?void 0:C.map((D,U)=>T("img",{onClick:()=>_(U),src:D==null?void 0:D.url,alt:e==null?void 0:e.name,className:"w-full h-full object-cover rounded-[10px] border-primary border max-h-[220px] cursor-pointer"},U))}):H("div",{className:"my-10 mx-5 flex items-center flex-col lg:h-full h-[96vh]",children:[T("img",{src:"/img/empty_menu.svg",alt:"empty_menu",className:"h-[180px] mb-5"}),T("span",{className:"text-base font-bold mb-1",children:"Opps, menu ch\u01B0a \u0111\u01B0\u1EE3c c\u1EADp nh\u1EADt!"})]})})]})}),r&&T(Su,{data:e,imageList:e==null?void 0:e.listMenu,index:x,hideModalImage:()=>s(!1),length:(k=e==null?void 0:e.listMenu)==null?void 0:k.length})]}),document.querySelector("body"))}j6.propTypes={data:_e.object};function j6({data:e={}}){return H("div",{className:"pt-1 px-[14px] pb-[10px] mb-[6px] shadow-[0_1px_4px_rgb(0,0,0,0.3)]  rounded-[10px] flex-1  ",children:[T("h2",{className:"text-[21px] font-semibold",children:"\u0110\u1ECBa \u0111i\u1EC3m c\u1EE5 th\u1EC3"}),H("div",{className:" rounded-[10px] overflow-hidden relative  h-[calc(100%_-_33px)]",children:[T("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${e==null?void 0:e.latitude},${e==null?void 0:e.longitude}`,target:"_blank",className:"block",children:T("img",{src:"https://api.mapbox.com/styles/v1/mapbox/streets-v11/static/105.7968,21.0667,12,0/300x200?access_token=pk.eyJ1Ijoiam9uYXNzY2htZWR0bWFubiIsImEiOiJjam54ZmM5N3gwNjAzM3dtZDNxYTVlMnd2In0.ytpI7V7w7cyT1Kq5rT9Z1A",alt:e==null?void 0:e.name,className:"w-full h-full object-cover my-1 lg:max-h-[200px] max-h-[400px] rounded-[10px]"})}),H("div",{className:"absolute right-4 left-4 bottom-4 flex items-center bg-white px-[10px] rounded-[10px] overflow-hidden justify-center py-[4px] lg:py-0",children:[T(rY,{className:"text-[36px] mr-3"}),T("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${e==null?void 0:e.latitude},${e==null?void 0:e.longitude}`,className:"text-black text-base whitespace-nowrap overflow-hidden text-ellipsis hover:underline transition-all",target:"_blank",children:e==null?void 0:e.location})]})]})]})}U6.propTypes={data:_e.object,handleShowModalImage:_e.func};function U6({data:e={},handleShowModalImage:t=null}){var r,s,u,d,x,l,_,S;return H("div",{className:" relative mt-2 rounded-[10px] overflow-hidden h-[280px] pb-[10px]  grid-cols-6 grid-rows-2 gap-2 lg:grid hidden",children:[H(Jt,{to:`/place/${e==null?void 0:e.slug}/photo`,className:"absolute flex items-center gap-x-3 z-10 bottom-[20px] left-[10px] py-1 px-[10px] text-white bg-[rgba(0,0,0,.6666666666666666)] rounded-[10px] ",children:[T(cY,{}),"Xem t\u1EA5t c\u1EA3 \u1EA3nh (",(r=e==null?void 0:e.listImage)==null?void 0:r.length,")"]}),T("div",{onClick:()=>t(0),className:"cursor-pointer col-span-2 row-span-2 relative before:absolute before:inset-0 before:bg-[rgba(0,0,0,.4)]  before:transition-all before:opacity-0 hover:before:opacity-100",children:T("img",{className:"w-full h-full object-cover rounded-[10px]",src:(e==null?void 0:e.listImage)&&((s=e==null?void 0:e.listImage)==null?void 0:s.length)>0?e==null?void 0:e.listImage[0].url:"",alt:e==null?void 0:e.name})}),T("div",{className:"cursor-pointer col-span-2 row-span-2 relative before:absolute before:inset-0 before:bg-[rgba(0,0,0,.4)]  before:transition-all before:opacity-0 hover:before:opacity-100",onClick:()=>t(1),children:T("img",{className:"w-full h-full object-cover rounded-[10px]",src:(e==null?void 0:e.listImage)&&((u=e==null?void 0:e.listImage)==null?void 0:u.length)>1?e==null?void 0:e.listImage[1].url:"",alt:e==null?void 0:e.name})}),T("div",{className:"cursor-pointer col-span-2 row-span-1 relative before:absolute before:inset-0 before:bg-[rgba(0,0,0,.4)]  before:transition-all before:opacity-0 hover:before:opacity-100",onClick:()=>t(2),children:T("img",{className:"w-full h-full object-cover rounded-[10px]",src:(e==null?void 0:e.listImage)&&((d=e==null?void 0:e.listImage)==null?void 0:d.length)>2?e==null?void 0:e.listImage[2].url:"",alt:e==null?void 0:e.name})}),T("div",{className:"cursor-pointer col-span-1 row-span-1 relative before:absolute before:inset-0 before:bg-[rgba(0,0,0,.4)]  before:transition-all before:opacity-0 hover:before:opacity-100",onClick:()=>t(3),children:T("img",{className:"w-full h-full object-cover rounded-[10px]",src:(e==null?void 0:e.listImage)&&((x=e==null?void 0:e.listImage)==null?void 0:x.length)>3?e==null?void 0:e.listImage[3].url:"",alt:e==null?void 0:e.name})}),H("div",{className:"cursor-pointer col-span-1 row-span-1 relative",onClick:()=>t(4),children:[T(Jt,{to:`/place/${e==null?void 0:e.slug}/photo`,className:"absolute inset-0 opacity-90 bg-[rgba(0,0,0,.4)] flex items-center justify-center",children:H("span",{className:"text-white text-[20px] font-semibold",children:["+ ",((l=e==null?void 0:e.listImage)==null?void 0:l.length)>4?((_=e==null?void 0:e.listImage)==null?void 0:_.length)-4:0," ","\u1EA3nh"]})}),T("img",{onClick:()=>t(5),className:"w-full h-full object-cover rounded-[10px]",src:(e==null?void 0:e.listImage)&&((S=e==null?void 0:e.listImage)==null?void 0:S.length)>4?e==null?void 0:e.listImage[4].url:"",alt:e==null?void 0:e.name})]})]})}V6.propTypes={data:_e.object};function V6({data:e={}}){var S,C,k;const[t,r]=ne.exports.useState(!1),[s,u]=ne.exports.useState(0),[d,x]=ne.exports.useState(0),l=()=>{r(!1)},_=D=>{u(D),r(!0)};return H("div",{className:"my-[10px] relative block lg:hidden",children:[T($m,{onSlideChange:D=>x(D.activeIndex),children:(S=e==null?void 0:e.listImage)==null?void 0:S.map((D,U)=>T(jm,{children:T("div",{onClick:()=>_(U),className:"h-[350px] cursor-pointer rounded-[10px] overflow-hidden cusor-pointer",children:T("img",{src:D==null?void 0:D.url,alt:D,className:"w-full h-full object-cover"})})},U))}),H("div",{className:"absolute flex items-center justify-between bottom-0 inset-x-0 p-[10px] z-[1000]",children:[T(Jt,{to:`/place/${e==null?void 0:e.slug}/photo`,className:"text-white text-sm bg-[#000] opacity-80 py-1 px-3 rounded-[10px]",children:"Xem t\u1EA5t c\u1EA3"}),H("span",{className:"text-white text-sm bg-[#000] opacity-80 py-1 px-3 rounded-[10px]",children:[d+1,"/",(C=e==null?void 0:e.listImage)==null?void 0:C.length]})]}),t&&T(Su,{data:e,imageList:e==null?void 0:e.listImage,hideModalImage:l,index:s,length:(k=e==null?void 0:e.listImage)==null?void 0:k.length})]})}G6.propTypes={item:_e.object};function G6({item:e={}}){var t,r,s,u,d,x,l,_,S,C,k,D,U,q;return H("div",{className:"pt-1 px-[14px] pb-[10px] mb-[6px] shadow-[0_1px_4px_rgb(0,0,0,0.3)] rounded-[10px] flex-1",children:[T("h2",{className:"text-[21px] font-semibold",children:"Th\xF4ng tin chi ti\u1EBFt"}),H("div",{className:"mt-2",children:[H("div",{className:"flex items-center gap-x-[14px] mb-[6px]",children:[T(iY,{}),a4(e==null?void 0:e.priceMin)," - ",a4(e==null?void 0:e.priceMax)]}),H("div",{className:"flex items-center gap-x-[14px] mb-[6px]",children:[T(QK,{}),H("div",{children:[T("span",{className:`${q1(((t=e==null?void 0:e.schedules)==null?void 0:t.length)>0&&((r=e==null?void 0:e.schedules[0])==null?void 0:r.startTime),((s=e==null?void 0:e.schedules)==null?void 0:s.length)>0&&((u=e==null?void 0:e.schedules[0])==null?void 0:u.endTime))?"text-secondary ":"text-primary"} font-medium`,children:q1(((d=e==null?void 0:e.schedules)==null?void 0:d.length)>0&&((x=e==null?void 0:e.schedules[0])==null?void 0:x.startTime),((l=e==null?void 0:e.schedules)==null?void 0:l.length)>0&&((_=e==null?void 0:e.schedules[0])==null?void 0:_.endTime))?"\u0110ang m\u1EDF c\u1EEDa":"\u0110ang \u0111\xF3ng c\u1EEDa"})," ",H("span",{className:"ml-1",children:[" ",H("span",{className:"pb-0.5 inline-block",children:[((S=e==null?void 0:e.schedules)==null?void 0:S.length)>0&&pd((C=e==null?void 0:e.schedules[0])==null?void 0:C.startTime)," "," - ",((k=e==null?void 0:e.schedules)==null?void 0:k.length)>0&&pd((D=e==null?void 0:e.schedules[0])==null?void 0:D.endTime)," "]})]})]})]}),H("div",{className:"flex items-center gap-x-[14px] mb-[6px]",children:[T(dY,{}),e==null?void 0:e.phone]}),H("div",{className:"flex items-center gap-x-[14px] mb-[6px]",children:[T(GK,{}),T("a",{href:e==null?void 0:e.facebook,className:"text-[#0770cd] hover:underline transition-all duration-300",children:e==null?void 0:e.name})]}),((U=e==null?void 0:e.kinds)==null?void 0:U.length)>0&&H("div",{className:"flex items-center gap-x-[14px] mb-[6px]",children:[T(_Y,{}),T("div",{className:"w-full flex  items-center flex-wrap",children:(q=e==null?void 0:e.kinds)==null?void 0:q.map((L,K)=>T(Jt,{to:`/search?kind=${L==null?void 0:L.slug}`,className:"flex items-center whitespace-normal hover:underline transition-all duration-300 text-[#0770cd] before:content-['\u25CF'] before:inline-block before:text-[#c1c1c1] before:mx-[6px] before:text-[12px] first:before:hidden ",children:T("span",{className:" ",children:L==null?void 0:L.name})},K))})]})]})]})}q6.propTypes={};function q6(e){var Le,Ie,Ke,bt;const t=Ji(),r=jr(ot=>ot.auth.current),s=Ei(),u=yr(),d=t.pathname.split("/")[2],[x,l]=ne.exports.useState(!1),[_,S]=ne.exports.useState(!1),C=ne.exports.useRef(null),[k,D]=ne.exports.useState({}),[U,q]=ne.exports.useState([]),[L,K]=Ka(),[R,F]=ne.exports.useState({show:!1,index:0}),[V,J]=ne.exports.useState(!1),[re,fe]=ne.exports.useState({productId:k==null?void 0:k.id,page:0,sortBy:"createdAtDesc"});ne.exports.useEffect(()=>((async()=>{var ot,Ot;try{const Dt=await yo.getBySlugAndStatus(d,1);if(!(Dt!=null&&Dt.id)){u("/not-found");return}const Ze=await yo.getAll({limit:4,page:1,slugArea:((ot=Dt==null?void 0:Dt.areas)==null?void 0:ot.length)>0?(Ot=Dt.areas[0])==null?void 0:Ot.slug:null});D(Dt),q(Ze),typeof document!="undefined"&&(document.getElementById("root").style.overflow="unset"),C&&C.current&&C.current.scrollIntoView({behavior:"smooth"})}catch(Dt){console.log("Error",Dt),u("/not-found")}})(),()=>{typeof document!="undefined"&&(document.getElementById("root").style.overflow="auto")}),[t,t.pathname,re]);const be=ot=>{F(Ot=>({...Ot,index:ot,show:!0}))},ce=()=>{J(!0),K(!0)},ve=()=>{J(!1),K(!1)},Fe=()=>{fe(ot=>({...ot}))};return T(Y2,{children:T(qs,{children:H("div",{className:"lg:max-w-[1200px] lg:mx-auto pt-[10px] px-[2px]  pb-[70px] lg:pb-0",ref:C,children:[H("div",{className:"p-2 mb-[6px] lg:mb-5 shadow-[0_1px_4px_rgb(0,0,0,0.3)] rounded-[10px] ",children:[H("div",{className:"flex items-center justify-between pl-2",children:[T("h1",{className:"lg:text-[28px] text-[22px] font-semibold truncate-text-auto",children:k.name}),T(f6,{data:k,user:r})]}),T("div",{className:"pl-2 text-sm lg:flex items-center gap-x-1 flex-wrap truncate",children:k==null?void 0:k.description}),H("div",{className:"pl-2 text-sm lg:flex items-center gap-x-1 flex-wrap",children:[H("div",{className:"flex items-center gap-x-1 mb-[2px] lg:text-[16px]",children:[T(MY,{className:"ml-[-3px] "}),k==null?void 0:k.location]}),H("div",{className:"flex items-center gap-x-1 flex-wrap ",children:[H("span",{className:"lg:text-[16px]",children:[T(xY,{className:"ml-[-3px] lg:hidden"}),T("span",{className:"hidden lg:inline-block",children:" \u2014"})]}),(k==null?void 0:k.longitude)&&(k==null?void 0:k.latitude)&&H(yn,{children:[T("span",{onClick:()=>S(!0),className:"lg:text-[16px] text-primary hover:underline cursor-pointer font-medium",children:"Hi\u1EC3n th\u1ECB b\u1EA3n \u0111\u1ED3"})," \u2014",T("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${k==null?void 0:k.latitude},${k==null?void 0:k.longitude}`,target:"_blank",className:"lg:text-[16px] text-primary hover:underline cursor-pointer font-medium",children:"Xem \u0111\u01B0\u1EDDng \u0111i"})," \u2014"]}),T("span",{onClick:ce,className:"lg:text-[16px] text-primary hover:underline cursor-pointer font-medium",children:"Xem menu"}),(r==null?void 0:r.id)===((Le=k==null?void 0:k.owner)==null?void 0:Le.id)&&H(yn,{children:[" \u2014",T("a",{href:`/edit-place/${k==null?void 0:k.slug}`,className:"lg:text-[16px] text-primary hover:underline cursor-pointer font-medium",children:"Ch\u1EC9nh s\u1EEDa \u0111\u1ECBa \u0111i\u1EC3m"})]})]})]}),T(U6,{data:k,handleShowModalImage:ot=>be(ot)}),T(V6,{data:k})]}),H("div",{className:"flex flex-col lg:flex-row  justify-between gap-x-4 lg:mt-2 lg:mb-5  ",children:[T(Fw,{item:k,show:x,onShow:()=>{if(!(r!=null&&r.id)){s(zo());return}l(!0)},filterReview:re}),T(G6,{item:k}),(k==null?void 0:k.longitude)&&(k==null?void 0:k.latitude)&&T(j6,{data:k})]}),T("div",{children:T(z6,{item:k})}),H("div",{className:" lg:flex block justify-between gap-x-4  lg:mt-5  ",children:[T(O6,{item:k,show:x,onShow:()=>{if(!(r!=null&&r.id)){s(zo());return}l(!0)},hideShow:()=>l(!1),handleRefetch:Fe}),H("div",{className:"w-[calc(33.33%_-_20px)] lg:block hidden sticky top-[20px]  position-[-webkit-sticky] h-fit mb-[6px]   ",children:[T(Fw,{item:k,show:x,onShow:()=>{if(!(r!=null&&r.id)){s(zo());return}l(!0)},filterReview:re}),T("div",{className:"p-4 shadow-[0_2px_8px_rgb(0,0,0,0.15)] bg-white rounded-[10px] ",children:T("img",{src:"/img/deploy.png",alt:"deploy",className:"w-full h-full object-cover"})})]})]}),H("div",{className:"lg:mt-3 shadow-[0_1px_4px_rgb(0,0,0,0.15)] py-2 px-4 bg-white rounded-[10px]",children:[H("h2",{className:"lg:text-[28px] text-[20px] font-semibold flex items-center justify-between",children:["\u0110\u1ECBa \u0111i\u1EC3m l\xE2n c\u1EADn",T(Jt,{to:`/search?areas=${((Ie=k==null?void 0:k.areas)==null?void 0:Ie.length)>0&&((Ke=k.areas[0])==null?void 0:Ke.slug)}`,className:"font-normal text-sm text-primary curosr-pointer hover:underline transition-all lg:text-base",children:"Xem th\xEAm"})]}),T("div",{className:"lg:block hidden",children:T("img",{onClick:()=>S(!0),src:"https://api.mapbox.com/styles/v1/mapbox/streets-v11/static/105.7968,21.0667,12,0/1136x400?access_token=pk.eyJ1Ijoiam9uYXNzY2htZWR0bWFubiIsImEiOiJjam54ZmM5N3gwNjAzM3dtZDNxYTVlMnd2In0.ytpI7V7w7cyT1Kq5rT9Z1A",alt:"mapbox",className:"w-full h-full object-cover cursor-pointer"})}),T(m6,{data:U})]}),H("div",{className:"lg:mt-5 lg:mb-10 mt-2 flex items-center justify-between lg:p-4 p-[14px] mb-3 shadow-[0_1px_4px_rgb(0,0,0,0.15)] rounded-[10px] bg-[linear-gradient(-4deg,#fbf4f4,#ffa8a8)] ",children:[H("div",{className:"pr-12",children:[T("h3",{className:"text-lg font-semibold mb-1",children:"\u0110\xE2y c\xF3 ph\u1EA3i l\xE0 qu\xE1n cafe c\u1EE7a b\u1EA1n kh\xF4ng?"}),T("p",{className:"text-sm",children:"B\u1EA1n s\u1EDF h\u1EEFu ho\u1EB7c qu\u1EA3n l\xFD qu\xE1n cafe n\xE0y? X\xE1c nh\u1EADn h\u1ED3 s\u01A1 c\u1EE7a b\u1EA1n mi\u1EC5n ph\xED \u0111\u1EC3 c\u1EADp nh\u1EADt th\xF4ng tin qu\xE1n, nh\u1EADn tick xanh, ph\u1EA3n h\u1ED3i \u0111\xE1nh gi\xE1 v\xE0 h\u01A1n th\u1EBF n\u1EEFa."}),H(Jt,{to:"/",className:" flex items-center gap-x-2 text-sm text-primary font-normal mt-1",children:[T(lY,{className:"animate-move"}),"X\xE1c nh\u1EADn ch\u1EE7 s\u1EE1 h\u1EEFu ngay"]})]}),T("div",{children:T(wY,{className:"text-[54px] text-primary opacity-80"})})]}),(k==null?void 0:k.latitude)!=null&&(k==null?void 0:k.longitude)!==null&&_&&T(B6,{data:k,hideMap:()=>S(!1)}),R.show&&T(Su,{data:k||{},index:(R==null?void 0:R.index)||0,imageList:k==null?void 0:k.listImage,length:(bt=k==null?void 0:k.listImage)==null?void 0:bt.length,hideModalImage:()=>F(ot=>({...ot,show:!1}))}),V&&T($6,{data:k,hideModalMenu:ve})]})})})}H6.propTypes={show:_e.bool,onShow:_e.func,data:_e.object,handleReset:_e.func,handleOnChange:_e.func,filters:_e.object};function H6({show:e=!1,onShow:t=null,data:r={},handleReset:s=null,handleOnChange:u=null,filters:d={}}){const[x,l]=Ka();return ri.exports.createPortal(H("div",{className:`fixed ${e?"opacity-100 visible ":"opacity-0 invisible"}  inset-0 bg-white overflow-auto pb-[50px] transition-all duration-300 z-[1000] ${e?"translate-y-0 opacity-100 ":"translate-y-[100%] opacity-0"}`,children:[H("div",{className:"absolute top-0 inset-x-0 bg-primary text-white text-center font-bold text-lg leading-0  py-4 px-6 border-b-[#f0f0f0] border-b-[1px] ",children:[T("div",{onClick:()=>{t(),l(!1)},className:"absolute  inset-y-0 text-white right-0 w-[40px] flex items-center justify-center",children:T(_x,{className:"w-[40px] h-[30px] cursor-pointer font-bold"})}),"B\u1ED9 l\u1ED9c"]}),e&&H("div",{className:"mt-[65px] px-2",children:[T(Fm,{title:"Gi\u1EDD m\u1EDF c\u1EEDa",type:"radio",data:(r==null?void 0:r.timeStart)||[],name:"timeStart",onChange:u,className:"flex-row",filters:d}),T(Lm,{title:"Khu v\u1EF1c",data:(r==null?void 0:r.areas)||[],name:"area",onChange:u,mobile:!0,filters:d,type:"radio"})]}),ri.exports.createPortal(T("div",{className:`fixed z-[100000] inset-x-0 bottom-0 flex bg-white p-[10px] gap-x-3 items-center transition-all duration-300  ${e?"translate-y-0 opacity-100 ":"translate-y-[100%] opacity-0"}`,children:T("button",{onClick:s,className:"border-primary border text-primary bg-white grow text-base py-[6px] px-5 rounded-[4px]",children:"\u0110\u1EB7t l\u1EA1i"})}),document.querySelector("body"))]}),document.querySelector("body"))}W6.propTypes={onChange:_e.func,filters:_e.object,show:_e.bool,onShow:_e.func};const j0=30;function W6({onChange:e=null,filters:t={},show:r=!1,onShow:s=null}){const[u,d]=ne.exports.useState({}),[x,l]=Ka();ne.exports.useEffect(()=>{(async()=>{const C=await Rm.getAll({limit:j0}),k=await Om.getAll({limit:j0}),D=await bx.getAll({limit:j0}),U=await wx.getAll({limit:j0});d({areas:C,purposes:k,kinds:D,conveniences:U})})()},[]);const _=C=>{if(!e)return null;e(C)},S=()=>{e({topic:void 0,area:void 0,convenient:void 0,type:void 0,price:void 0,timeStart:void 0,name:""}),s(),l(!1)};return H(yn,{children:[T("div",{className:"w-1/4 p-3 h-full hidden lg:block",children:H("div",{className:"px-[14px] py-[10px] rounded-[10px] drop-shadow-2xl bg-white",children:[T("div",{className:" ",children:H("h2",{className:"py-4 text-[21px] font-semibold  border-b border-b-[#e0e0e0]",children:["B\u1ED9 l\u1ED9c \u0111\u1ECBa \u0111i\u1EC3m"," "]})}),H("div",{children:[T(Fm,{filters:t,title:"Gi\u1EDD m\u1EDF c\u1EEDa",type:"radio",data:sE||[],name:"timeStart",onChange:_,col:!0}),T(Lm,{filters:t,title:"Khu v\u1EF1c",data:(u==null?void 0:u.areas)||[],name:"area",type:"radio",onChange:_})]})]})}),T(H6,{show:r,onShow:()=>s(),handleReset:S,data:u,handleOnChange:_,filters:t})]})}Z6.propTypes={};function Z6(e){return T("div",{className:"flex items-center justify-center",children:H("div",{children:[T("img",{className:" h-[300px] object-cover",src:"/img/not-found-saved.svg",alt:"not-found-saved"}),T("p",{className:"text-center mt-4 font-bold text-md",children:"Kh\xF4ng c\xF3 \u0111\u1ECBa \u0111i\u1EC3m n\xE0o"})]})})}X6.propTypes={};const UA=5;function X6(e){const t=jr(R=>R.auth.current),[r,s]=ne.exports.useState(0),[u,d]=ne.exports.useState([]),[x,l]=ne.exports.useState(1),[_,S]=ne.exports.useState({limit:UA,userId:t==null?void 0:t.id,page:1}),C=ne.exports.useRef(null),[k,D]=ne.exports.useState(!1),[U,q]=Ka();ne.exports.useEffect(()=>{(async()=>{try{const R=await yd.getAll(_),F=await yd.getAll({..._,page:0});s((F==null?void 0:F.length)||0),d(R)}catch(R){console.log("Error \u{1F4A5} ",R.message)}})(),C&&C.current&&C.current.scrollIntoView({behavior:"smooth"})},[_]);const L=R=>{S(F=>({...F,...R,page:1}))},K=R=>{l(R),S(F=>({...F,page:R}))};return H("div",{className:" max-w-[1200px] mx-auto px-4  flex flex-col lg:flex-row pb-[70px]",children:[T(W6,{onChange:L,filters:_,show:k,onShow:()=>{D(!1)}}),H("div",{className:"p-[10px] lg:hidden flex items-center justify-between",children:[T("h1",{className:"text-[18px] font-bold text-[#1d2129]",children:"Danh s\xE1ch \u0111\xE3 l\u01B0u"}),H("div",{className:"flex items-center text-[#1d2129] font-medium cursor-pointer",onClick:()=>{D(!0),q(!0)},children:[T(gY,{})," L\u1ECDc"]})]}),r>0?H("div",{className:"lg:w-3/4 lg:p-3 w-full pb-[120px]",ref:C,children:[T("div",{children:(u==null?void 0:u.length)>0&&(u==null?void 0:u.map(R=>T(VE,{data:R},R.id)))}),T("div",{children:T(Fd,{data:u,onChange:R=>K(R),itemsPerPage:UA,count:r,page:_==null?void 0:_.page})})]}):T("div",{className:"w-full mt-10",children:T(Z6,{})})]})}Ex.propTypes={};function Ex({children:e}){return jr(t=>t.auth.user),yr(),T(yn,{children:e})}K6.propTypes={};function K6(e){const t=jr(r=>r.auth.current);return t!=null&&t.name?T(Ex,{children:T(qs,{children:H("div",{children:[T("div",{className:"hidden lg:block bg-[linear-gradient(180deg,#ffb8b8,#fbfbfb)] bg-[-webkit-linear-gradient(top,#ffb8b8,#fbfbfb)] h-[222px] mb-6",children:H("div",{className:"flex justify-between items-center max-w-[1200px] mx-auto px-4",children:[H("div",{className:"text-[#1d2129] w-[70%] mr-20",children:[T("h1",{className:"text-[#1d2129] mb-4 text-[32px] font-semibold",children:"Danh s\xE1ch \u0111\xE3 l\u01B0u"}),T("p",{className:"text-[20px] font-medium",children:"L\u1EADp danh s\xE1ch nh\u1EEFng qu\xE1n cafe y\xEAu th\xEDch \u0111\u1EC3 d\u1EC5 d\xE0ng so s\xE1nh v\xE0 theo d\xF5i!"}),T("p",{className:"text-[20px] font-medium",children:"Ch\xFAng t\xF4i s\u1EBD gi\xFAp b\u1EA1n lu\xF4n theo d\u1EA5u nh\u1EEFng \u0111\u1ECBa \u0111i\u1EC3m n\xE0y."})]}),T("div",{className:"w-[30%] p-[30px] text-right",children:T("img",{src:"/img/logo_blog_save.svg",alt:"logo_blog_save",className:"w-full h-full object-cover"})})]})}),T(X6,{})]})})}):T(sO,{to:"/"})}ar.propTypes={control:_e.object,name:_e.string,focus:_e.bool,data:_e.string||_e.number};function ar({control:e,focus:t=!1,data:r="",...s}){const{field:u,fieldState:d}=Ad({name:s.name,control:e,defaultValue:r}),x=ne.exports.useRef(null);return ne.exports.useEffect(()=>{x&&x.current&&t&&x.current.focus()},[t]),T("input",{className:`w-full text-base tracking-[0.4px] outline-none rounded-[4px] border border-[#717171] py-[6px] pl-[10px] pr-[30px] focus:border-[#fc7f9c] focus:shadow-[0_0_6px_rgb(255,123,153)] transition-all duration-300 ${s==null?void 0:s.className}`,...u,...s,name:s==null?void 0:s.name,ref:x})}Y6.propTypes={control:_e.object,areas:_e.array,onChange:_e.func,formState:_e.object,errorMessage:_e.string};function Y6({control:e=null,areas:t=[],onChange:r=null,formState:s=null,errorMessage:u=""}){var x,l,_;const d=t.map(S=>({id:S==null?void 0:S.id,label:S==null?void 0:S.name,value:S==null?void 0:S.id}));return H(yn,{children:[T("p",{className:"text-[21px] font-medium text-primary pb-2  border-b-[1px]",children:"Th\xF4ng tin c\u01A1 b\u1EA3n"}),T("div",{children:H("div",{className:"py-5 px-4 flex flex-col gap-5 xs:px-0",children:[H("div",{className:"flex items-center ",children:[H("label",{htmlFor:"name",className:"lg:min-w-40 min-w-20 text-[14px] mr-16 xs:mr-3",children:["T\xEAn qu\xE1n",T("span",{className:"text-primary pl-1 font-bold",children:"*"})]}),T(ar,{control:e,name:"name",id:"name",type:"text",placeholder:"Cafe Ha Noi"})]}),(s==null?void 0:s.errors.name)&&T("span",{className:"block font-medium text-sm text-primary transition-all duration-150",children:(x=s.errors.name)==null?void 0:x.message}),H("div",{className:"flex items-center ",children:[H("label",{htmlFor:"area_id",className:"lg:min-w-40 min-w-20 text-[14px] mr-16 xs:mr-3",children:["Khu v\u1EF1c",T("span",{className:"text-primary pl-1 font-bold",children:"*"})]}),T(ha,{control:e,name:"area_id",id:"area_id",options:d,className:"w-full h-[38px]"})]}),(s==null?void 0:s.errors.area_id)&&T("span",{className:"block font-medium text-sm text-primary transition-all duration-150",children:(l=s.errors.area_id)==null?void 0:l.message}),H("div",{className:"flex items-center ",children:[H("label",{htmlFor:"location",className:"lg:min-w-40 min-w-20 text-[14px] mr-16 xs:mr-3",children:["\u0110\u1ECBa ch\u1EC9",T("span",{className:"text-primary pl-1 font-bold",children:"*"})]}),T(ar,{control:e,name:"location",id:"location",type:"text",placeholder:"Dong Da Ha Noi"})]}),(s==null?void 0:s.errors.location)&&T("span",{className:"block font-medium text-sm text-primary transition-all duration-150",children:(_=s.errors.location)==null?void 0:_.message}),H("div",{className:"flex items-center ",children:[H("label",{htmlFor:"description",className:"lg:min-w-40 min-w-20 text-[14px] mr-16 xs:mr-3",children:["Gi\u1EDBi thi\u1EC7u",T("span",{className:"text-primary pl-1 font-bold",children:"*"})]}),T(Od,{control:e,name:"description",id:"description",placeholder:"Quan cafe rat dep",className:"w-full mt-0",onChange:r,onKeyPress:()=>{}})]}),u&&T("span",{className:"block font-medium text-sm text-primary transition-all duration-150",children:u})]})})]})}J6.propTypes={control:_e.object,formState:_e.object};function J6({control:e=null,formState:t=null}){return H(yn,{children:[T("p",{className:"text-[21px] font-medium text-primary pb-2  border-b-[1px]",children:"Th\xF4ng tin li\xEAn h\u1EC7"}),T("div",{children:H("div",{className:"py-5 px-4 flex flex-col gap-5 xs:px-0",children:[H("div",{className:"flex items-center ",children:[T("label",{htmlFor:"email",className:"lg:min-w-40 min-w-[92px] text-[14px] ",children:"Email:"}),T(ar,{control:e,name:"email",id:"email",type:"text",placeholder:"example@gmail.com"})]}),H("div",{className:"flex items-center ",children:[T("label",{htmlFor:"facebook",className:"lg:min-w-40 min-w-[92px] text-[14px] ",children:"Facebook:"}),T(ar,{control:e,name:"facebook",id:"facebook",type:"text",placeholder:"https://www.facebook.com"})]}),H("div",{className:"flex items-center ",children:[T("label",{htmlFor:"phone",className:"lg:min-w-40 min-w-[92px] text-[14px] ",children:"\u0110i\u1EC7n tho\u1EA1i:"}),T(ar,{control:e,name:"phone",id:"phone",type:"text",placeholder:"0971151472"})]})]})})]})}Q6.propTypes={onChange:_e.func,error:_e.object};function Q6({onChange:e=null,error:t={}}){const[r,s]=ne.exports.useState([]),[u,d]=ne.exports.useState([]),x=_=>{const S=Array.from(_.target.files).map((k,D)=>URL.createObjectURL(_.target.files[D])),C=Array.from(_.target.files).map((k,D)=>_.target.files[D]);s(k=>[...k,...S]),e&&e({listImageFile:C})},l=_=>{const S=Array.from(_.target.files).map((k,D)=>URL.createObjectURL(_.target.files[D])),C=Array.from(_.target.files).map((k,D)=>_.target.files[D]);d(k=>[...k,...S]),e&&e({listMenuFile:C})};return H(yn,{children:[T("p",{className:"text-[21px] font-medium text-primary pb-2  border-b-[1px]",children:"H\xECnh \u1EA3nh"}),H("div",{className:"mt-4 grid grid-cols-3 lg:grid-cols-7 gap-3",children:[r.map((_,S)=>H("div",{className:"w-[104px] h-[104px]   opacity-80 hover:opacity-100 transition-all duration-300 cursor-pointer relative",children:[T("div",{className:"absolute inset-0  bg-[rgba(0,0,0,0.3) hover:bg-[rgba(0,0,0,0.5)] rounded-[10px] transition-all duration-300 z-10"}),T("img",{src:_,alt:_,className:"w-full h-full object-cover rounded-[10px]"})]},S)),H("div",{className:"mb-2 mr-2 text-sm rounded-[10px] w-[104px] h-[104px] border flex items-center justify-center",children:[H("label",{htmlFor:"listImageFile",className:"flex flex-col items-center justify-center cursor-pointer gap-y-2",children:[T(md,{className:"text-[20px]"}),T("span",{children:"Th\xEAm \u1EA3nh"})]}),T("input",{onChange:x,type:"file",name:"listImageFile",id:"listImageFile",className:"hidden",accept:"image/*",multiple:!0})]})]}),(t==null?void 0:t.image)&&T("span",{className:"block font-medium text-sm text-primary transition-all duration-150",children:t.image}),T("p",{className:"text-[21px] font-medium text-primary pb-2  border-b-[1px] mt-5",children:"Menu"}),H("div",{className:"mt-4 grid grid-cols-3 lg:grid-cols-7 gap-3",children:[u.map((_,S)=>H("div",{className:"w-[104px] h-[104px]  opacity-80 hover:opacity-100 transition-all duration-300 cursor-pointer relative",children:[T("div",{className:"absolute inset-0  bg-[rgba(0,0,0,0.3) hover:bg-[rgba(0,0,0,0.5)] rounded-[10px] transition-all duration-300 z-10"}),T("img",{src:_,alt:_,className:"w-full h-full object-cover rounded-[10px]"})]},S)),H("div",{className:"mb-2 mr-2 text-sm rounded-[10px] w-[104px] h-[104px] border flex items-center justify-center",children:[H("label",{htmlFor:"listMenuFile",className:"flex flex-col items-center justify-center cursor-pointer gap-y-2",children:[T(md,{className:"text-[20px]"}),T("span",{children:"Th\xEAm \u1EA3nh"})]}),T("input",{onChange:l,type:"file",name:"listMenuFile",id:"listMenuFile",className:"hidden",accept:"image/*",multiple:!0})]})]}),(t==null?void 0:t.menu)&&T("span",{className:"block font-medium text-sm text-primary transition-all duration-150",children:t.menu})]})}eD.propTypes={control:_e.object,kinds:_e.array,conveniences:_e.array,purposes:_e.array,onChange:_e.func,formState:_e.object};function eD({control:e=null,kinds:t=[],conveniences:r=[],purposes:s=[],onChange:u=null,formState:d=null}){var S,C,k,D,U,q,L,K,R;const x=t.map(F=>({id:F==null?void 0:F.id,label:F==null?void 0:F.name,value:F==null?void 0:F.id})),l=r.map(F=>({id:F==null?void 0:F.id,label:F==null?void 0:F.name,value:F==null?void 0:F.id})),_=s.map(F=>({id:F==null?void 0:F.id,label:F==null?void 0:F.name,value:F==null?void 0:F.id}));return H(yn,{children:[T("p",{className:"text-[21px] font-medium text-primary pb-2  border-b-[1px]",children:"Th\xF4ng tin kh\xE1c"}),H("div",{children:[T("div",{className:"py-5 px-4 flex  items-center xs:px-0",children:H("div",{className:"flex items-center justify-between flex-1 gap-2",children:[H("div",{className:"flex items-center justify-between",children:[H("label",{htmlFor:"startTime",className:"lg:min-w-40 min-w-[92px] text-[14px]",children:["Th\u1EDDi gian m\u1EDF c\u1EEDa"," ",T("span",{className:"text-primary pl-1 font-bold",children:"*"})]}),T(ar,{control:e,name:"startTime",id:"startTime",type:"text",placeholder:"07:00"})]}),H("div",{className:"flex items-center justify-between",children:[H("label",{htmlFor:"endTime",className:"min-w-[60px] text-[14px] mr-4",children:["\u0110\u1EBFn:",T("span",{className:"text-primary pl-1 font-bold",children:"*"})]}),T(ar,{control:e,name:"endTime",id:"endTime",type:"text",placeholder:"20:00"})]})]})}),H("div",{className:"flex items-center justify-between gap-10 px-4",children:[(d==null?void 0:d.errors.startTime)&&T("span",{className:"block font-medium text-sm text-primary transition-all duration-150",children:(S=d.errors.startTime)==null?void 0:S.message}),(d==null?void 0:d.errors.endTime)&&T("span",{className:"block font-medium text-sm text-primary transition-all duration-150",children:(C=d.errors.endTime)==null?void 0:C.message})]}),T("div",{className:"py-5 px-4 flex  items-center xs:px-0",children:H("div",{className:"flex items-center justify-between flex-1 gap-2",children:[H("div",{className:"flex items-center justify-between",children:[H("label",{htmlFor:"priceMin",className:"lg:min-w-40 min-w-[92px] text-[14px]",children:["Kho\u1EA3ng gi\xE1",T("span",{className:"text-primary pl-1 font-bold",children:"*"})]}),T(ar,{control:e,name:"priceMin",id:"priceMin",type:"number",placeholder:"0"})]}),H("div",{className:"flex items-center justify-between",children:[H("label",{htmlFor:"priceMax",className:"min-w-[60px] text-[14px] mr-4",children:["\u0110\u1EBFn:",T("span",{className:"text-primary pl-1 font-bold",children:"*"})]}),T(ar,{control:e,name:"priceMax",id:"priceMax",type:"number",placeholder:"1000000"})]})]})}),H("div",{className:"flex items-center justify-between gap-10 px-4",children:[(d==null?void 0:d.errors.priceMin)&&T("span",{className:"block font-medium text-sm text-primary transition-all duration-150",children:(k=d.errors.priceMin)==null?void 0:k.message}),(d==null?void 0:d.errors.priceMax)&&T("span",{className:"block font-medium text-sm text-primary transition-all duration-150",children:(D=d.errors.priceMax)==null?void 0:D.message})]}),T("div",{className:"py-5 px-4 flex  items-center xs:px-0",children:H("div",{className:"flex items-center justify-between flex-1 gap-2",children:[H("div",{className:"flex items-center justify-between",children:[T("label",{htmlFor:"latitude",className:"lg:min-w-40 min-w-[92px] text-[14px] ",children:"V\u0129 \u0111\u1ED9"}),T(ar,{control:e,name:"latitude",id:"latitude",type:"text",placeholder:"21.0336724"})]}),H("div",{className:"flex items-center justify-between",children:[T("label",{htmlFor:"longitude",className:"min-w-[60px] text-[14px] mr-4",children:"Kinh \u0111\u1ED9"}),T(ar,{control:e,name:"longitude",id:"longitude",type:"text",placeholder:"105.8109417"})]})]})}),H("div",{className:"flex items-center justify-between gap-10 px-4",children:[(d==null?void 0:d.errors.latitude)&&T("span",{className:"block font-medium text-sm text-primary transition-all duration-150",children:(U=d.errors.latitude)==null?void 0:U.message}),(d==null?void 0:d.errors.longitude)&&T("span",{className:"block font-medium text-sm text-primary transition-all duration-150",children:(q=d.errors.longitude)==null?void 0:q.message})]}),T("div",{className:"py-5 px-4 flex gap-5 items-center xs:px-0",children:H("div",{className:"flex items-center flex-1",children:[H("label",{htmlFor:"kind_id",className:"lg:min-w-40 min-w-[92px] text-[14px]",children:["Ki\u1EC3u qu\xE1n",T("span",{className:"text-primary pl-1 font-bold",children:"*"})]}),T(ha,{control:e,name:"kind_id",id:"kind_id",options:x,className:"w-full h-[38px]"})]})}),(d==null?void 0:d.errors.kind_id)&&T("span",{className:"block font-medium text-sm text-primary transition-all duration-150",children:(L=d.errors.kind_id)==null?void 0:L.message}),T("div",{className:"py-5 px-4 flex gap-5 items-center xs:px-0",children:H("div",{className:"flex items-center flex-1",children:[H("label",{htmlFor:"convenience_id",className:"lg:min-w-40 min-w-[92px] text-[14px]",children:["Ti\u1EC7n \xEDch",T("span",{className:"text-primary pl-1 font-bold",children:"*"})]}),T(ha,{control:e,name:"convenience_id",id:"convenience_id",options:l,className:"w-full h-[38px]"})]})}),(d==null?void 0:d.errors.convenience_id)&&T("span",{className:"block font-medium text-sm text-primary transition-all duration-150",children:(K=d.errors.convenience_id)==null?void 0:K.message}),T("div",{className:"py-5 px-4 flex gap-5 items-center xs:px-0",children:H("div",{className:"flex items-center flex-1",children:[H("label",{htmlFor:"purpose_id",className:"lg:min-w-40 min-w-[92px] text-[14px]",children:["M\u1EE5c \u0111\xEDch",T("span",{className:"text-primary pl-1 font-bold",children:"*"})]}),T(ha,{control:e,name:"purpose_id",id:"purpose_id",options:_,className:"w-full h-[38px]"})]})})," ",(d==null?void 0:d.errors.purpose_id)&&T("span",{className:"block font-medium text-sm text-primary transition-all duration-150",children:(R=d.errors.purpose_id)==null?void 0:R.message})]})]})}const _te=Tu({name:cr().trim().max(50,"T\xEAn qu\xE1n kh\xF4ng \u0111\u01B0\u1EE3c v\u01B0\u1EE3t qu\xE1 50 k\xFD t\u1EF1").required("Vui l\xF2ng nh\u1EADp t\xEAn qu\xE1n"),area_id:cr().trim().required("Vui l\xF2ng ch\u1ECDn khu v\u1EF1c"),location:cr().trim().max(255,"\u0110\u1ECBa ch\u1EC9 qu\xE1n kh\xF4ng \u0111\u01B0\u1EE3c v\u01B0\u1EE3t qu\xE1 255 k\xFD t\u1EF1").required("Vui l\xF2ng nh\u1EADp \u0111\u1ECBa ch\u1EC9"),startTime:cr().trim().matches(/^([01]\d|2[0-3]):([0-5]\d)$/,"Gi\u1EDD m\u1EDF c\u1EEDa kh\xF4ng h\u1EE3p l\u1EC7. V\xED d\u1EE5: 07:00").required("Vui l\xF2ng nh\u1EADp gi\u1EDD m\u1EDF c\u1EEDa"),endTime:cr().trim().matches(/^([01]\d|2[0-3]):([0-5]\d)$/,"Gi\u1EDD \u0111\xF3ng c\u1EEDa kh\xF4ng h\u1EE3p l\u1EC7. V\xED d\u1EE5: 22:00").required("Vui l\xF2ng nh\u1EADp gi\u1EDD \u0111\xF3ng c\u1EEDa"),priceMin:mm().typeError("priceMin must be a number").required("Vui l\xF2ng nh\u1EADp gi\xE1 t\u1ED1i thi\u1EC3u").min(0,"Gi\xE1 t\u1ED1i thi\u1EC3u ph\u1EA3i l\u1EDBn h\u01A1n ho\u1EB7c b\u1EB1ng 0").max(1e6,"Gi\xE1 t\u1ED1i thi\u1EC3u kh\xF4ng \u0111\u01B0\u1EE3c v\u01B0\u1EE3t qu\xE1 1,000,000"),priceMax:mm().typeError("priceMax must be a number").required("Vui l\xF2ng nh\u1EADp gi\xE1 t\u1ED1i \u0111a").min(mx("priceMin"),"Gi\xE1 t\u1ED1i \u0111a ph\u1EA3i l\u1EDBn h\u01A1n gi\xE1 t\u1ED1i thi\u1EC3u").test("is-greater","Gi\xE1 t\u1ED1i \u0111a ph\u1EA3i l\u1EDBn h\u01A1n gi\xE1 t\u1ED1i thi\u1EC3u",function(e){return e>this.parent.priceMin}).max(1e6,"Gi\xE1 t\u1ED1i \u0111a kh\xF4ng \u0111\u01B0\u1EE3c v\u01B0\u1EE3t qu\xE1 1,000,000"),kind_id:cr().trim().required("Vui l\xF2ng ch\u1ECDn ki\u1EC3u qu\xE1n"),convenience_id:cr().trim().required("Vui l\xF2ng ch\u1ECDn ti\u1EC7n \xEDch c\u1EE7a qu\xE1n"),purpose_id:cr().trim().required("Vui l\xF2ng ch\u1ECDn m\u1EE5c \u0111\xEDch c\u1EE7a qu\xE1n")});tD.propTypes={};function tD(e){const t=jr(L=>L.auth.current),r=yr(),[s,u]=ne.exports.useState(),[d,x]=ne.exports.useState({}),[l,_]=ne.exports.useState({}),{control:S,handleSubmit:C,setValue:k,formState:D}=us({mode:"onSubmit",reValidateMode:"onSubmit",resolver:zd(_te),defaultValues:{priceMin:0,priceMax:0,startTime:"07:00",endTime:"22:00"}});ne.exports.useEffect(()=>{(async()=>{const L=await Rm.getAll({limit:100}),K=await bx.getAll({limit:100}),R=await wx.getAll({limit:100}),F=await Om.getAll({limit:100});_({areas:L,kinds:K,conveniences:R,purposes:F})})()},[]);const U=L=>{u(K=>({...K,...L}))};return T(qs,{children:T("div",{className:"flex justify-center ",children:H("div",{className:" shadow-[0_2px_8px_rgba(0,0,0,.15)] bg-white px-5 py-3  xs:px-2 m-2 w-[928px] rounded-md mb-0 xs:mb-20",children:[T("p",{className:"font-medium text-[28px]",children:"Th\xEAm \u0111\u1ECBa \u0111i\u1EC3m"}),T("p",{className:"text-[14px] mb-3",children:"Nh\u1EEFng qu\xE1n cafe y\xEAu th\xEDch c\u1EE7a b\u1EA1n ch\u01B0a c\xF3 tr\xEAn Toidicafe.vn? Chia s\u1EBB v\u1EDBi c\u1ED9ng \u0111\u1ED3ng ngay!"}),H("form",{onSubmit:C(async L=>{var K,R,F,V,J,re,fe,be;L={...L,...s},console.log(L);try{if(!(s!=null&&s.listImageFile)||((K=s==null?void 0:s.listImageFile)==null?void 0:K.length)<5){x({image:"\xCDt nh\u1EA5t 5 images"});return}if(!(s!=null&&s.listMenuFile)||((R=s==null?void 0:s.listMenuFile)==null?void 0:R.length)<2){x({menu:"\xCDt nh\u1EA5t 2 menus"});return}if(!(s!=null&&s.description)){x({description:"Vui l\xF2ng nh\u1EADp tr\u01B0\u1EDDng gi\u1EDBi thi\u1EC7u"});return}if(((F=s==null?void 0:s.description)==null?void 0:F.length)>500){x({description:"T\u1ED1i \u0111a 500 k\xED t\u1EF1 cho ph\u1EA7n gi\u1EDBi thi\u1EC7u"});return}x(null),L.listScheduleDto=JSON.stringify([{dayOfWeek:1,startTime:W1(L==null?void 0:L.startTime),endTime:W1(L==null?void 0:L.endTime)}]),L.startTime=null,L.endTime=null,L.area_id=+L.area_id,L.convenience_id=+L.convenience_id,L.kind_id=+L.kind_id,L.purpose_id=+L.purpose_id,L.longitude=L!=null&&L.longitude?parseFloat(L.longitude):null,L.latitude=L!=null&&L.latitude?parseFloat(L.latitude):null,L.status=1;const ce=new FormData;if(ce.append("latitude",L==null?void 0:L.latitude),ce.append("longitude",L==null?void 0:L.longitude),(L==null?void 0:L.latitude)||(L==null?void 0:L.longitude)){const ve=/^-?\d+(\.\d+)?$/;if(ve.test(L==null?void 0:L.latitude)){if(!ve.test(L==null?void 0:L.longitude)){x({longitude:"Kinh \u0111\u1ED9 ph\u1EA3i l\xE0 s\u1ED1 th\u1EF1c, v\xED d\u1EE5: 105.8109417"}),Yt.error("Kinh \u0111\u1ED9 ph\u1EA3i l\xE0 s\u1ED1 th\u1EF1c, v\xED d\u1EE5: 21.0336724");return}}else{x({latitude:"V\u0129 \u0111\u1ED9 ph\u1EA3i l\xE0 s\u1ED1 th\u1EF1c, v\xED d\u1EE5: 21.0336724"}),Yt.error("V\u0129 \u0111\u1ED9 ph\u1EA3i l\xE0 s\u1ED1 th\u1EF1c, v\xED d\u1EE5: 21.0336724");return}}if((V=s==null?void 0:s.listImageFile)==null||V.forEach((ve,Fe)=>{ce.append(`listImageFile[${Fe}]`,ve)}),(J=s==null?void 0:s.listMenuFile)==null||J.forEach((ve,Fe)=>{ce.append(`listMenuFile[${Fe}]`,ve)}),ce.append("name",L==null?void 0:L.name),ce.append("listScheduleDto",L==null?void 0:L.listScheduleDto),ce.append("area_id",L==null?void 0:L.area_id),ce.append("purpose_id",L==null?void 0:L.purpose_id),ce.append("convenience_id",L==null?void 0:L.convenience_id),ce.append("description",L==null?void 0:L.description),ce.append("location",L==null?void 0:L.location),ce.append("userId",t.id),ce.append("kind_id",L==null?void 0:L.kind_id),ce.append("status",1),ce.append("priceMin",L==null?void 0:L.priceMin),ce.append("priceMax",L==null?void 0:L.priceMax),((re=L==null?void 0:L.email)==null?void 0:re.length)>0)if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(L==null?void 0:L.email))ce.append("email",L==null?void 0:L.email);else{Yt.error("Vui l\xF2ng nh\u1EADp \u0111\xFAng \u0111\u1ECBnh d\u1EA1ng email.");return}if(((fe=L==null?void 0:L.facebook)==null?void 0:fe.length)>0)if(/^(?:http(s)?:\/\/)?(www\.)?facebook.com\/[a-zA-Z0-9(\.\?)?]/.test(L==null?void 0:L.facebook))ce.append("facebook",L==null?void 0:L.facebook);else{Yt.error("Vui l\xF2ng nh\u1EADp \u0111\xFAng \u0111\u1ECBnh d\u1EA1ng link facebook.");return}if(((be=L==null?void 0:L.phone)==null?void 0:be.length)>0)if(/^\+?[0-9]+$/.test(L==null?void 0:L.phone))ce.append("phone",L==null?void 0:L.phone);else{Yt.error("Vui l\xF2ng nh\u1EADp \u0111\xFAng \u0111\u1ECBnh d\u1EA1ng s\u1ED1 \u0111i\u1EC7n tho\u1EA1i.");return}await yo.createProduct(ce),Yt("T\u1EA1o th\xE0nh c\xF4ng")}catch(ce){console.log(ce),Yt.error((ce==null?void 0:ce.message)||"C\xF3 l\u1ED7i x\u1EA3y ra xin h\xE3y th\u1EED l\u1EA1i sau.")}r("/")}),children:[T(Y6,{control:S,onChange:U,areas:l==null?void 0:l.areas,formState:D,errorMessage:d==null?void 0:d.description}),T(eD,{control:S,onChange:U,kinds:l==null?void 0:l.kinds,conveniences:l==null?void 0:l.conveniences,purposes:l==null?void 0:l.purposes,formState:D}),T(J6,{control:S,formState:D}),T(Q6,{onChange:U,error:d}),T("button",{type:"submit",className:`text-white text-xl mt-5 w-full h-10 px-5 rounded-lg bg-primary font-semibold   transition-all duration-300
                ${D.isSubmitting?"bg-gray-500 hover:bg-gray-500":"  "}                `,disabled:D.isSubmitting,children:"+ Th\xEAm \u0111\u1ECBa \u0111i\u1EC3m"})]})]})})})}QE.propTypes={state:_e.array,slidesPerView:_e.number,title:_e.string,children:_e.func,isHeading:_e.bool,isLimitWidth:_e.bool,isAutoplay:_e.bool};function QE({state:e,slidesPerView:t=3,title:r,isHeading:s=!0,children:u,isLimitWidth:d=!0,isAutoplay:x=!0}){return T("section",{className:"",children:H("div",{className:`${d?"max-w-[1200px]":""} mx-auto px-4`,children:[s&&T("h2",{className:"text-left pl-[4px] border-l-4 border-primary font-bold text-[18px] text-text relative\r mt-[14px] mb-[10px] lg:my-10 lg:text-[28px] lg:text-center before:hidden before:lg:block lg:border-none\r before:absolute before:w-[90px] before:h-[2.5px] before:bg-primary before:mx-auto \r before:top-auto  before:right-0 before:left-0 before:bottom-[-10px] before:rounded-[10px]\r ",children:r}),T($m,{pagination:!0,rewind:!0,navigation:!0,modules:[YE,E6,T6],slidesPerView:t,spaceBetween:24,autoplay:x,className:`mySwiper+${r}`,children:e.map((l,_)=>T(jm,{children:()=>u(l,_)},l.id))})]})})}nD.propTypes={item:_e.object};function nD({item:e}){var x;const[t,r]=ne.exports.useState(0),s=yr(),u={slugArea:`${e==null?void 0:e.slug}`,page:0};return ne.exports.useEffect(()=>{(async()=>{try{const l=await yo.getAll(u);r(l!=null&&l.length?l.length:0)}catch(l){console.log("Error \u{1F4A5}",l.message)}})()},[]),H("div",{onClick:()=>{s(`/search?areas=${e==null?void 0:e.slug}`)},className:"relative  rounded-[10px] overflow-hidden w-full hover-scale h-[200px] md:h-[300px] lg:h-[330px]  lg:max-w-[273px]",children:[T("img",{src:(x=e==null?void 0:e.image)==null?void 0:x.url,alt:e==null?void 0:e.name,className:"w-full h-full object-cover rounded-[10px] transition-all duration-1000"}),H("div",{className:"absolute inset-0 flex justify-end text-white flex-col px-[20px] py-[16px] cursor-pointer bg-near-gradient-webkit",children:[T("h4",{className:"text-[24px] text-white font-bold ",children:e==null?void 0:e.name}),H("p",{className:"text-[14px] font-normal ",children:[t," qu\xE1n cafe"]})]})]})}rD.propTypes={};function rD(){const[e,t]=ne.exports.useState([]),[r,s]=ne.exports.useState(null);ne.exports.useEffect(()=>((async()=>{try{const d=await Rm.getAll({limit:5});t(d),window.addEventListener("resize",u)}catch(d){console.log("Error \u{1F4A5}",d.message)}})(),()=>window.removeEventListener("resize",u)),[]);const u=()=>{s(ow(window.innerWidth))};return T(QE,{state:e,slidesPerView:r||ow(window.innerWidth),title:"Khu v\u1EF1c g\u1EA7n \u0111\xE2y",children:d=>T(nD,{item:d})})}iD.propTypes={limit:_e.number,data:_e.array};function iD({data:e=[],limit:t=5}){const[r,s]=ne.exports.useState([]);return ne.exports.useEffect(()=>{(async()=>{try{const u=await yo.getAll({limit:t,outstanding:1});s(u)}catch(u){console.log("Error \u{1F4A5}",u.message)}})()},[]),T("section",{className:"pb-9",children:H("div",{className:"max-w-[1200px] mx-auto px-4",children:[T("h2",{className:"text-left pl-[4px] border-l-4 border-primary font-bold text-[18px] text-text relative\r mt-[14px] mb-[10px] lg:my-10 lg:text-[28px] lg:text-center before:hidden before:lg:block lg:border-none\r before:absolute before:w-[90px] before:h-[2.5px] before:bg-primary before:mx-auto \r before:top-auto  before:right-0 before:left-0 before:bottom-[-10px] before:rounded-[10px]\r ",children:"\u0110\u1ECBa \u0111i\u1EC3m n\u1ED5i b\u1EADt"}),T("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4  gap-6",children:r.map(u=>T(fy,{item:u},u.id))})]})})}oD.propTypes={items:_e.object,index:_e.number};function oD({item:e,index:t=0}){var u;const r=yr();return H("div",{className:"relative  overflow-hidden cursor-pointer hover-scale",onClick:()=>{r(`/search?purposes=${e==null?void 0:e.slug}`)},children:[T("div",{className:"overflow-hidden rounded-[10px] w-full h-[180px] lg:h-[220px] lg:w-[372px] ",children:T("img",{src:(u=e==null?void 0:e.image)==null?void 0:u.url,alt:e==null?void 0:e.name,className:"object-cover w-full h-full transition-all duration-1000"})}),T("div",{className:"absolute inset-0 z-30 text-white flex items-center justify-center  font-bold text-[26px] lg:text-[32px]",children:T("span",{children:e==null?void 0:e.name})}),T("div",{className:`absolute inset-0  ${e7(t)} rounded-[10px] lg:max-w-[372px] overflow-hidden`})]})}function vte(){const[e,t]=ne.exports.useState([]),[r,s]=ne.exports.useState(null);return ne.exports.useEffect(()=>{(async()=>{try{const d=await Om.getAll();t(d),window.addEventListener("resize",u)}catch(d){console.log("Error \u{1F4A5}",d.message)}})();const u=()=>{s(iw(window.innerWidth))};return()=>window.removeEventListener("resize",u)},[]),T(QE,{state:e,slidesPerView:r||iw(window.innerWidth),title:"M\u1EE5c \u0111\xEDch c\u1EE7a b\u1EA1n ?",children:(u,d)=>T(oD,{item:u,index:d})})}sD.propTypes={};function sD(e){const[t,r]=ne.exports.useState("T\xECm G\xF3c Cafe - Th\u1ECFa S\u1EE9c S\u1ED1ng \u1EA2o..."),[s,u]=ne.exports.useState(!1),[d,x]=ne.exports.useState(""),l=yr();ne.exports.useEffect(()=>{const C=setInterval(()=>{r(k=>{const D="T\xECm G\xF3c Cafe - Th\u1ECFa S\u1EE9c S\u1ED1ng \u1EA2o...";return D===k?"\u0110i & Kh\xE1m Ph\xE1 \u0110i\u1EC3m H\u1EB9n H\u1EA5p D\u1EABn...":D})},1e4);return()=>{clearInterval(C)}},[]);const _=()=>{u(C=>!C)},S=()=>{d!=null&&d.name?l(`/search?name=${d==null?void 0:d.name}`):l("/search")};return H("section",{className:"relative  flex items-center justify-center h-[240px] lg:h-[500px] z-[1001] ",children:[T("div",{className:`absolute inset-0  ${s?"lg:before:fixed lg:before:inset-0 lg:before:bg-[#232a31] lg:before:opacity-90":""}`,children:T("img",{src:"/img/slider.webp",alt:"",className:"w-full h-full "})}),T("div",{className:"absolute inset-0 bg-[#000000ad] z-10"}),H("div",{className:"relative z-10 w-[1200px] m-auto px-4",children:[H("div",{className:"mb-5 lg:mb-10",children:[T("div",{className:"flex justify-center items-center",children:T("span",{className:"text-xl lg:text-[40px] lg:h-[56px] flex items-center  text-white whitespace-nowrap overflow-hidden font-semibold border-r-[5px] animate-typingMobile lg:animate-typing transition-all    ]",children:t})}),T("span",{className:"text-[#ccc] text-[16px] font-semibold text-center hidden lg:block ",children:"Mang \u0111\u1EBFn cho b\u1EA1n nh\u1EEFng s\u1EF1 l\u1EF1a ch\u1ECDn t\u1ED1t nh\u1EA5t cho \u0111i\u1EC3m h\u1EB9n cafe"})]}),H("div",{className:`flex gap-x-[10px] w-full ${s&&"lg:mb-[100%] transition-all duration-500"}`,children:[H("div",{className:"grow relative ",onClick:s?null:_,children:[T("i",{className:"fa-solid fa-magnifying-glass lg:hidden absolute r-0 top-[5px] bottom-0 left-[6px]  w-10 h-10 text-base text-[#000] flex items-center justify-center"}),T("input",{placeholder:"T\xEAn qu\xE1n, khu v\u1EF1c, ki\u1EC3u qu\xE1n...",type:"text",className:"rounded-full lg:rounded-[10px] font-normal cursor-text w-full h-[50px] py-[10px] pl-10 pr-[30px] text-base leading-[1.5]  border-none outline-none text-[#595b5d] lg:text-xl bg-white lg:h-[65px] lg:p-5"}),T(AE,{show:s,onShow:_,onSearch:C=>x(C)})]}),H("button",{onClick:S,className:"shrink text-xl bg-primary text-white h-[65px] w-[200px] rounded-[10px] font-semibold hidden lg:block",children:[T("i",{className:"fa-solid fa-magnifying-glass pr-[6px] text-2xl inline-block w-[30px]"}),"T\xECm qu\xE1n"]})]})]}),T(UE,{show:s,onShow:_})]})}aD.propTypes={};function aD(){const e=jr(u=>u.auth.current),t=yr(),r=Ei();return T("section",{children:T("div",{className:"max-w-[1200px] px-4 mx-auto pl-4 pb-[2px] mb-[72px] mt-[-6px] lg:m-0 lg:mx-auto  lg:pb-9",children:H("div",{className:"flex justify-center",children:[T("div",{className:"w-[124px]  lg:max-w-[220px]",children:T("img",{src:"/img/suggest-place.svg",alt:"suggest",className:"w-full object-cover"})}),H("div",{className:"flex flex-col items-center justify-center py-[20px] pr-[10px] lg:p-5 ",children:[T("h2",{className:" text-[18px] lg:text-[28px] font-bold mb-[20px]",children:"Ch\xFAng t\xF4i \u0111ang b\u1ECF l\u1EE1 \u0111\u1ECBa \u0111i\u1EC3m n\xE0o b\u1EA1n bi\u1EBFt ?"}),T("button",{onClick:()=>{if(!(e!=null&&e.id)){r(zo());return}t("/add-place")},className:"  text-white  bg-primary    font-semibold  uppercase\r h-[30px] text-xs px-[14px] leading-[30px]  rounded-[10px] hover:bg-[#be0129] transition-all duration-300 lg:h-[40px] lg:text-base lg:px-5 lg:leading-[40px]",children:"\u0110\xF3ng g\xF3p \u0111\u1ECBa \u0111i\u1EC3m"})]})]})})})}lD.propTypes={};function lD(e){return H(qs,{children:[T(sD,{}),T(vte,{}),T(rD,{}),T(iD,{}),T(aD,{})]})}cD.propTypes={data:_e.object};function cD({data:e={}}){var d,x,l;const[t,r]=ne.exports.useState(0),[s,u]=ne.exports.useState({});return ne.exports.useEffect(()=>{(async()=>{try{const _=await Gs.getAll({userId:e==null?void 0:e.id,page:0}),S=await _d.getAll({userId:e==null?void 0:e.id,page:0});u({reviews:_,comments:S})}catch{}})()},[e]),H("div",{className:"lg:w-[340px] lg:mt-5 mt-2 w-full",children:[H("div",{className:"relative text-center p-4 bg-white rounded-[10px] shadow-[0_2px_8px_rgb(0,0,0,0.15)] lg:mb-5 mb-2 w-full  ",children:[T("h3",{className:"text-[18px] text-primary mb-2 font-semibold text-center",children:"[ B\u1EA3ng chi\u1EBFn t\xEDch ]"}),H("div",{className:"flex items-center mb-2 px-[10px] justify-between",children:[H("div",{className:"flex items-center gap-x-2",children:[T(oY,{className:"text-[#9d9d9d] w-8 text-[20px] "}),T("span",{children:"\u0110\xE1nh gi\xE1"})]}),T("div",{className:"px-[10px] rounded-[6px] bg-[#efefef]",children:(d=s==null?void 0:s.reviews)==null?void 0:d.length})]}),H("div",{className:"flex items-center mb-2 px-[10px] justify-between",children:[H("div",{className:"flex items-center gap-x-2",children:[T(tY,{className:"text-[#9d9d9d] w-8 text-[20px] "}),T("span",{children:"Th\u1EA3o lu\u1EADn"})]}),T("div",{className:"px-[10px] rounded-[6px] bg-[#efefef]",children:(x=s==null?void 0:s.comments)==null?void 0:x.length})]}),H("div",{className:"flex items-center mb-2 px-[10px] justify-between",children:[H("div",{className:"flex items-center gap-x-2",children:[T(xx,{className:"text-[#9d9d9d] w-8 text-[20px] "}),T("span",{children:"\u0110\u01B0\u1EE3c th\xEDch"})]}),T("div",{className:"px-[10px] rounded-[6px] bg-[#efefef]",children:t})]}),H("div",{className:"flex items-center mb-2 px-[10px] justify-between",children:[H("div",{className:"flex items-center gap-x-2",children:[T(Aw,{className:"text-[#9d9d9d] w-8 text-[20px] "}),T("span",{children:"Ng\u01B0\u1EDDi theo d\xF5i"})]}),T("div",{className:"px-[10px] rounded-[6px] bg-[#efefef]",children:((l=e==null?void 0:e.listFollowing)==null?void 0:l.length)||0})]}),H("div",{className:"flex items-center mb-2 px-[10px] justify-between",children:[H("div",{className:"flex items-center gap-x-2",children:[T(KK,{className:"text-[#9d9d9d] w-8 text-[20px] "}),T("span",{children:"Ng\xE0y tham gia"})]}),T("div",{className:"px-[10px] rounded-[6px] bg-[#efefef]",children:new Date(e==null?void 0:e.createdAt).toLocaleDateString("vi-VN")})]})]}),T("div",{className:"hidden lg:block relative text-center bg-white shadow-[0_2px_8px_rgb(0,0,0,0.15)] min-h-[200px] overflow-hidden rounded-[10px]",children:T("img",{src:"/img/cloud_service.png",alt:"cloud_service",className:"w-full h-full object-cover"})})]})}uD.propTypes={length:_e.number,imageList:_e.array,data:_e.object};function uD({length:e=1,imageList:t=[],data:r={}}){var l;const[s,u]=ne.exports.useState({show:!1,indexCurr:0}),d=()=>{u({show:!1,indexCurr:0})},x=_=>{u({show:!0,indexCurr:_})};return H("div",{className:`grid gap-1 ${e===1&&"grid-cols-1 grid-rows-1 "} ${e===2&&"grid-cols-2  grid-rows-1"} ${e===3&&"grid-cols-6 grid-rows-4"} ${e===4&&"grid-cols-4 grid-rows-4 "} ${e>=5&&"grid-cols-6 grid-rows-2"} `,children:[(l=t==null?void 0:t.slice(0,5))==null?void 0:l.map((_,S)=>H("div",{onClick:()=>x(S),className:`relative ${(t.length===1||t.length===2)&&"w-full"}
          
          ${S+1===1&&t.length===3&&"col-span-4 row-span-4"}
          ${S+1===2&&t.length===3&&"col-span-2 row-span-2"}
          ${S+1===3&&t.length===3&&"col-span-2 row-span-2"}

          ${S+1===1&&t.length===4&&"col-span-2 row-span-2"}
          ${S+1===2&&t.length===4&&"col-span-2 row-span-2"}
          ${S+1===3&&t.length===4&&"col-span-2 row-span-2"}
          ${S+1===4&&t.length===4&&"col-span-2 row-span-2"}


          ${S+1===1&&t.length>=5&&"col-span-3 row-span-1"}
          ${S+1===2&&t.length>=5&&"col-span-3 row-span-1"}
          ${S+1===3&&t.length>=5&&"col-span-2 row-span-1"}
          ${S+1===4&&t.length>=5&&"col-span-2 row-span-1"}
          ${S+1===5&&t.length>=5&&"col-span-2 row-span-1"}

          `,children:[T("img",{src:_==null?void 0:_.url,alt:_==null?void 0:_.url,className:`w-full h-full ${(t==null?void 0:t.length)>1&&t?e!==3&&"max-w-[400px] max-h-[300px]":" max-h-[600px] max-w-[774px]"}  cursor-pointer object-cover`}),(t==null?void 0:t.length)>5&&S===4&&H("div",{className:"absolute text-white font-bold flex items-center justify-center text-[24px] inset-0 bg-[rgba(0,0,0,.45)] cursor-pointer z-10",onClick:()=>x(S),children:["+ ",(t==null?void 0:t.length)-5]})]},`${_==null?void 0:_.id} + ${S}`)),(s==null?void 0:s.show)&&T(Su,{data:r,imageList:t,hideModalImage:d,index:s==null?void 0:s.indexCurr,url:"http://localhost:5000/img/reviews/",length:t==null?void 0:t.length})]})}hD.propTypes={user:_e.object,onSubmit:_e.func};function hD({user:e={},onSubmit:t=null}){var x;const[r,s]=ne.exports.useState(""),u=l=>{s(l==null?void 0:l.name)},d=()=>{!t||r.trim().length===0||(t({name:r}),s(""))};return H("div",{className:"flex gap-x-2 pt-[10px] px-[6px] pb-[2px]  ",children:[T("div",{className:"w-9 h-9 bg-[#eee] shrink rounded-full overflow-hidden border-none  ",children:T("img",{src:((x=e==null?void 0:e.image)==null?void 0:x.url)||"/img/user-default.jpg",alt:e==null?void 0:e.name,className:"h-full w-full object-cover"})}),T("form",{className:"w-full mt-[-16px]",children:T(Od,{name:"name",onChange:u,onKeyPress:d,placeholder:"Vi\u1EBFt b\xECnh lu\u1EADn...",className:"bg-[#eee] rounded-xl text-sm focus:border-primary transition-all focus:shadow-[0_0_0_2px_rgb(238,0,51,0.2)] "})})]})}dD.propTypes={listReplies:_e.array,onClick:_e.func,onRefetch:_e.func};function dD({listReplies:e=[],onClick:t=null,onRefetch:r=null}){ne.exports.useState([]);const s=jr(u=>u.auth.current);return T("div",{className:"pt-4",children:e==null?void 0:e.map((u,d)=>{var x,l,_,S,C;return H("div",{className:"pb-[10px] flex  gap-x-[6px]",children:[T("div",{className:"w-9 h-9  cursor-pointer rounded-full overflow-hidden bg-[#eee]",children:T("img",{src:(l=(x=u==null?void 0:u.user)==null?void 0:x.image)==null?void 0:l.url,alt:(_=u==null?void 0:u.user)==null?void 0:_.name,className:"w-full h-full object-cover"})}),H("div",{className:"lg:max-w-[626px] max-w-[880px]",children:[H("div",{className:"py-2 px-[15px] rounded-[18px] bg-[#f5f5f7]",children:[H("div",{className:"flex items-center",children:[T(Jt,{to:`/profile/${(S=u==null?void 0:u.user)==null?void 0:S.slug}`,className:"tracking-[0.4px] mr-[6px] font-semibold text-black hover:underline transition-all",children:(C=u==null?void 0:u.user)==null?void 0:C.name}),T("span",{className:"text-xs text-[#898c95]",children:H1(new Date(u==null?void 0:u.createdAt).toLocaleDateString("en-US"))})]}),T("div",{className:"text-sm",children:T(Em,{range:200,children:u==null?void 0:u.name})})]}),T(JE,{item:u,user:s,onReFetch:r})]})]},d)})})}eT.propTypes={data:_e.object};function eT({data:e={}}){var fe,be,ce,ve,Fe,Le,Ie,Ke,bt,ot,Ot,Dt,Ze,Ye;const[t,r]=ne.exports.useState({}),[s,u]=ne.exports.useState(!1),[d,x]=ne.exports.useState(!0),[l,_]=ne.exports.useState({}),[S,C]=ne.exports.useState({}),[k,D]=ne.exports.useState(!1),[U,q]=ne.exports.useState(!1),L=jr(De=>De.auth.current),K=Ei();ne.exports.useEffect(()=>{(async()=>{try{const De=await xd.getAmountFavoriteReview((l==null?void 0:l.id)||(e==null?void 0:e.id)),_t=await _d.getAll({page:(S==null?void 0:S.page)||0,reviewId:(S==null?void 0:S.reviewId)||(e==null?void 0:e.id)}),mt=await yo.getById(e==null?void 0:e.productId);r({favorite:De,comments:_t,blog:mt})}catch(De){console.log("Error",De)}})()},[e,l]);const R=()=>{u(De=>!De)},F=async()=>{try{if(!(L!=null&&L.id)){K(zo());return}if(k)return;D(!0),await xd.toggleFavoriteReview({reviewId:e==null?void 0:e.id,userId:L==null?void 0:L.id}),_(()=>({id:e==null?void 0:e.id}))}catch(De){console.log(De)}D(!1)},V=async De=>{try{if(U)return;q(!0),await _d.createComment({name:De==null?void 0:De.name,userId:L==null?void 0:L.id,reviewId:e==null?void 0:e.id,status:1}),_(()=>({reviewId:e==null?void 0:e.id,page:0})),u(!0)}catch(_t){console.log(_t)}q(!1)},J=De=>{},re=()=>{_(De=>({...De}))};return H("div",{className:"bg-white lg:py-3 py-2 px-4 lg:mb-5 mb-2 rounded-[10px] shadow-[0_2px_8px_rgb(0,0,0,0.15)] ",children:[H("div",{className:"pb-1 flex items-center",children:[T("div",{className:"bg-[#eee] shrink-0 w-[46px] h-[46px] rounded-full overflow-hidden",children:T("img",{src:((be=(fe=e==null?void 0:e.userDto)==null?void 0:fe.image)==null?void 0:be.url)||"/img/user-default.jpg",alt:"img-user",className:"w-full h-full object-cover"})}),H("div",{className:"ml-2 mr-[30px] xs:mr-[-20px] grow flex flex-col justify-center",children:[H("div",{className:"flex items-center",children:[T(Jt,{to:`/profile/${((ce=e==null?void 0:e.userDto)==null?void 0:ce.slug)||"thainguyen"}`,className:"mr-[5px] lg:text-lg text-sm text-black font-semibold tracking-[0.4px] hover:underline transition-all truncate-text-auto",children:(ve=e==null?void 0:e.userDto)==null?void 0:ve.name}),T(JK,{className:"m-0 w-3 text-[#cbcbcb]"}),T(Jt,{to:`/place/${(Fe=t==null?void 0:t.blog)==null?void 0:Fe.slug}`,className:"lg:text-lg text-sm text-black font-semibold tracking-[0.4px] hover:underline transition-all truncate-text-auto",children:(Le=t==null?void 0:t.blog)==null?void 0:Le.name})]}),H("div",{className:"pt-[2px] flex items-center text-[14px]",children:[((Ie=e==null?void 0:e.rating)==null?void 0:Ie.averageRating)>0&&T("span",{className:"mr-[6px] font-bold lg:text-sm text-xs",children:(bt=(Ke=e==null?void 0:e.rating)==null?void 0:Ke.averageRating)==null?void 0:bt.toFixed(1)}),Array.from(new Array(5)).map((De,_t)=>{var mt,Et;return((mt=e==null?void 0:e.rating)==null?void 0:mt.averageRating)>=_t+1?T(DE,{className:"lg:text-[14px] text-[10px] text-primary"},_t):((Et=e==null?void 0:e.rating)==null?void 0:Et.averageRating)>=_t+.5?T(PE,{className:"lg:text-[14px] text-[10px] text-primary"},_t):T(IE,{className:"lg:text-[14px] text-[10px]"},_t)}),T("span",{className:"mx-2 text-gray-400",children:"\u25CF"})," ",H("span",{className:" lg:text-sm text-xs text-[#898c95] block",children:["\u0110\xE3 \u0111\xE1nh gi\xE1"," ",H1(new Date(t==null?void 0:t.createdAt).toLocaleDateString("en-US"))]})]})]})]}),H("div",{className:"py-1 px-[2px] ",children:[T(Em,{range:200,children:(e==null?void 0:e.name)||""}),T("div",{className:"mt-1",children:((ot=e==null?void 0:e.listImage)==null?void 0:ot.length)>0&&T(uD,{length:(Ot=e==null?void 0:e.listImage)==null?void 0:Ot.length,imageList:e==null?void 0:e.listImage,data:e})})]}),H("div",{className:"flex items-center justify-around py-1 mt-[10px] border-t-[1px] border-t-[#eee] border-b-[1px] border-b-[#eee]",children:[T("button",{onClick:F,className:`w-full flex items-center justify-center gap-x-2 text-base py-1 outline-none bg-transparent transition-all hover:bg-[#eee] rounded-[6px] ${(t==null?void 0:t.favorite)>0?"text-primary":""}`,children:(t==null?void 0:t.favorite)>0?H(yn,{children:[T(xx,{className:"text-primary"}),t==null?void 0:t.favorite," Th\xEDch"]}):H(yn,{children:[T(ME,{}),"Th\xEDch"]})}),H("button",{onClick:()=>x(De=>!De),className:"w-full flex items-center justify-center gap-x-2 text-base py-1 outline-none bg-transparent transition-all hover:bg-[#eee] rounded-[6px]",children:[T(TY,{}),(Dt=t==null?void 0:t.comments)==null?void 0:Dt.length," B\xECnh lu\u1EADn"]}),H("button",{className:"w-full flex items-center justify-center gap-x-2 text-base py-1 outline-none bg-transparent transition-all hover:bg-[#eee] rounded-[6px]",children:[T(SY,{}),"Chia s\u1EBB"]})]}),(L==null?void 0:L.name)&&d&&T(hD,{user:L,onSubmit:V}),s&&T(dD,{onRefetch:re,listReplies:t==null?void 0:t.comments,onClick:J}),((Ze=t==null?void 0:t.comments)==null?void 0:Ze.length)>0&&H("div",{className:"text-center mt-2 text-black font-medium cursor-pointer hover:underline transition-all",onClick:R,children:[s?"\u1EA8n t\u1EA5t c\u1EA3":"Xem t\u1EA5t c\u1EA3"," ",(Ye=t==null?void 0:t.comments)==null?void 0:Ye.length," b\xECnh lu\u1EADn ..."]})]})}pD.propTypes={data:_e.object};function pD({data:e={}}){const[t,r]=ne.exports.useState([]),[s,u]=ne.exports.useState({page:1}),[d,x]=ne.exports.useState(0);ne.exports.useEffect(()=>{(async()=>{const _=await Gs.getAll({...s,userId:(e==null?void 0:e.id)||0}),S=await Gs.getAll({page:0,userId:(e==null?void 0:e.id)||0});r(_),x(S==null?void 0:S.length)})()},[e,s]);const l=_=>{u(S=>({...S,page:_})),window.scrollTo({top:0,behavior:"smooth"})};return H("div",{className:"lg:flex block  justify-center lg:px-4 max-w-[1200px] mx-auto",children:[T(cD,{data:e}),H("div",{className:"lg:max-w-[720px] w-full  h-full",children:[T("div",{className:"lg:pt-5 lg:pl-5",children:(t==null?void 0:t.length)>0&&(t==null?void 0:t.map((_,S)=>T(eT,{data:_},S)))}),T("div",{children:T(Fd,{data:t,onChange:_=>l(_),itemsPerPage:5,count:d,page:s==null?void 0:s.page})})]})]})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Rw=function(e,t){return Rw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(r[u]=s[u])},Rw(e,t)};function bte(e,t){Rw(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Fi=function(){return Fi=Object.assign||function(t){for(var r,s=1,u=arguments.length;s<u;s++){r=arguments[s];for(var d in r)Object.prototype.hasOwnProperty.call(r,d)&&(t[d]=r[d])}return t},Fi.apply(this,arguments)},VA=!1,iu,Ow,Bw,p1,f1,fD,m1,$w,jw,Uw,mD,Vw,Gw,gD,yD;function lo(){if(!VA){VA=!0;var e=navigator.userAgent,t=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),r=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(Vw=/\b(iPhone|iP[ao]d)/.exec(e),Gw=/\b(iP[ao]d)/.exec(e),Uw=/Android/i.exec(e),gD=/FBAN\/\w+;/i.exec(e),yD=/Mobile/i.exec(e),mD=!!/Win64/.exec(e),t){iu=t[1]?parseFloat(t[1]):t[5]?parseFloat(t[5]):NaN,iu&&document&&document.documentMode&&(iu=document.documentMode);var s=/(?:Trident\/(\d+.\d+))/.exec(e);fD=s?parseFloat(s[1])+4:iu,Ow=t[2]?parseFloat(t[2]):NaN,Bw=t[3]?parseFloat(t[3]):NaN,p1=t[4]?parseFloat(t[4]):NaN,p1?(t=/(?:Chrome\/(\d+\.\d+))/.exec(e),f1=t&&t[1]?parseFloat(t[1]):NaN):f1=NaN}else iu=Ow=Bw=f1=p1=NaN;if(r){if(r[1]){var u=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);m1=u?parseFloat(u[1].replace("_",".")):!0}else m1=!1;$w=!!r[2],jw=!!r[3]}else m1=$w=jw=!1}}var qw={ie:function(){return lo()||iu},ieCompatibilityMode:function(){return lo()||fD>iu},ie64:function(){return qw.ie()&&mD},firefox:function(){return lo()||Ow},opera:function(){return lo()||Bw},webkit:function(){return lo()||p1},safari:function(){return qw.webkit()},chrome:function(){return lo()||f1},windows:function(){return lo()||$w},osx:function(){return lo()||m1},linux:function(){return lo()||jw},iphone:function(){return lo()||Vw},mobile:function(){return lo()||Vw||Gw||Uw||yD},nativeApp:function(){return lo()||gD},android:function(){return lo()||Uw},ipad:function(){return lo()||Gw}},wte=qw,U0=!!(typeof window!="undefined"&&window.document&&window.document.createElement),Ete={canUseDOM:U0,canUseWorkers:typeof Worker!="undefined",canUseEventListeners:U0&&!!(window.addEventListener||window.attachEvent),canUseViewport:U0&&!!window.screen,isInWorker:!U0},Tte=Ete,xD=Tte,_D;xD.canUseDOM&&(_D=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function Ste(e,t){if(!xD.canUseDOM||t&&!("addEventListener"in document))return!1;var r="on"+e,s=r in document;if(!s){var u=document.createElement("div");u.setAttribute(r,"return;"),s=typeof u[r]=="function"}return!s&&_D&&e==="wheel"&&(s=document.implementation.hasFeature("Events.wheel","3.0")),s}var Cte=Ste,Ate=wte,Mte=Cte,GA=10,qA=40,HA=800;function vD(e){var t=0,r=0,s=0,u=0;return"detail"in e&&(r=e.detail),"wheelDelta"in e&&(r=-e.wheelDelta/120),"wheelDeltaY"in e&&(r=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=r,r=0),s=t*GA,u=r*GA,"deltaY"in e&&(u=e.deltaY),"deltaX"in e&&(s=e.deltaX),(s||u)&&e.deltaMode&&(e.deltaMode==1?(s*=qA,u*=qA):(s*=HA,u*=HA)),s&&!t&&(t=s<1?-1:1),u&&!r&&(r=u<1?-1:1),{spinX:t,spinY:r,pixelX:s,pixelY:u}}vD.getEventType=function(){return Ate.firefox()?"DOMMouseScroll":Mte("wheel")?"wheel":"mousewheel"};var kte=vD,Pte=kte;function Ite(e,t,r,s,u,d){d===void 0&&(d=0);var x=vd(e,t,d),l=x.width,_=x.height,S=Math.min(l,r),C=Math.min(_,s);return S>C*u?{width:C*u,height:C}:{width:S,height:S/u}}function Dte(e){return e.width>e.height?e.width/e.naturalWidth:e.height/e.naturalHeight}function V0(e,t,r,s,u){u===void 0&&(u=0);var d=vd(t.width,t.height,u),x=d.width,l=d.height;return{x:WA(e.x,x,r.width,s),y:WA(e.y,l,r.height,s)}}function WA(e,t,r,s){var u=t*s/2-r/2;return Tx(e,-u,u)}function ZA(e,t){return Math.sqrt(Math.pow(e.y-t.y,2)+Math.pow(e.x-t.x,2))}function XA(e,t){return Math.atan2(t.y-e.y,t.x-e.x)*180/Math.PI}function zte(e,t,r,s,u,d,x){d===void 0&&(d=0),x===void 0&&(x=!0);var l=x?Nte:Lte,_=vd(t.width,t.height,d),S=vd(t.naturalWidth,t.naturalHeight,d),C={x:l(100,((_.width-r.width/u)/2-e.x/u)/_.width*100),y:l(100,((_.height-r.height/u)/2-e.y/u)/_.height*100),width:l(100,r.width/_.width*100/u),height:l(100,r.height/_.height*100/u)},k=Math.round(l(S.width,C.width*S.width/100)),D=Math.round(l(S.height,C.height*S.height/100)),U=S.width>=S.height*s,q=U?{width:Math.round(D*s),height:D}:{width:k,height:Math.round(k/s)},L=Fi(Fi({},q),{x:Math.round(l(S.width-q.width,C.x*S.width/100)),y:Math.round(l(S.height-q.height,C.y*S.height/100))});return{croppedAreaPercentages:C,croppedAreaPixels:L}}function Nte(e,t){return Math.min(e,Math.max(0,t))}function Lte(e,t){return t}function Fte(e,t,r,s,u,d){var x=vd(t.width,t.height,r),l=Tx(s.width/x.width*(100/e.width),u,d),_={x:l*x.width/2-s.width/2-x.width*l*(e.x/100),y:l*x.height/2-s.height/2-x.height*l*(e.y/100)};return{crop:_,zoom:l}}function Rte(e,t,r){var s=Dte(t);return r.height>r.width?r.height/(e.height*s):r.width/(e.width*s)}function Ote(e,t,r,s,u,d){r===void 0&&(r=0);var x=vd(t.naturalWidth,t.naturalHeight,r),l=Tx(Rte(e,t,s),u,d),_=s.height>s.width?s.height/e.height:s.width/e.width,S={x:((x.width-e.width)/2-e.x)*_,y:((x.height-e.height)/2-e.y)*_};return{crop:S,zoom:l}}function KA(e,t){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}function Bte(e){return e*Math.PI/180}function vd(e,t,r){var s=Bte(r);return{width:Math.abs(Math.cos(s)*e)+Math.abs(Math.sin(s)*t),height:Math.abs(Math.sin(s)*e)+Math.abs(Math.cos(s)*t)}}function Tx(e,t,r){return Math.min(Math.max(e,t),r)}function G0(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter(function(r){return typeof r=="string"&&r.length>0}).join(" ").trim()}var $te=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,jte=1,Ute=3,Vte=function(e){bte(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.imageRef=zt.createRef(),r.videoRef=zt.createRef(),r.containerRef=null,r.styleRef=null,r.containerRect=null,r.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},r.dragStartPosition={x:0,y:0},r.dragStartCrop={x:0,y:0},r.gestureZoomStart=0,r.gestureRotationStart=0,r.isTouching=!1,r.lastPinchDistance=0,r.lastPinchRotation=0,r.rafDragTimeout=null,r.rafPinchTimeout=null,r.wheelTimer=null,r.currentDoc=typeof document!="undefined"?document:null,r.currentWindow=typeof window!="undefined"?window:null,r.resizeObserver=null,r.state={cropSize:null,hasWheelJustStarted:!1},r.initResizeObserver=function(){if(!(typeof window.ResizeObserver=="undefined"||!r.containerRef)){var s=!0;r.resizeObserver=new window.ResizeObserver(function(u){if(s){s=!1;return}r.computeSizes()}),r.resizeObserver.observe(r.containerRef)}},r.preventZoomSafari=function(s){return s.preventDefault()},r.cleanEvents=function(){!r.currentDoc||(r.currentDoc.removeEventListener("mousemove",r.onMouseMove),r.currentDoc.removeEventListener("mouseup",r.onDragStopped),r.currentDoc.removeEventListener("touchmove",r.onTouchMove),r.currentDoc.removeEventListener("touchend",r.onDragStopped),r.currentDoc.removeEventListener("gesturemove",r.onGestureMove),r.currentDoc.removeEventListener("gestureend",r.onGestureEnd))},r.clearScrollEvent=function(){r.containerRef&&r.containerRef.removeEventListener("wheel",r.onWheel),r.wheelTimer&&clearTimeout(r.wheelTimer)},r.onMediaLoad=function(){var s=r.computeSizes();s&&(r.emitCropData(),r.setInitialCrop(s)),r.props.onMediaLoaded&&r.props.onMediaLoaded(r.mediaSize)},r.setInitialCrop=function(s){if(r.props.initialCroppedAreaPercentages){var u=Fte(r.props.initialCroppedAreaPercentages,r.mediaSize,r.props.rotation,s,r.props.minZoom,r.props.maxZoom),d=u.crop,x=u.zoom;r.props.onCropChange(d),r.props.onZoomChange&&r.props.onZoomChange(x)}else if(r.props.initialCroppedAreaPixels){var l=Ote(r.props.initialCroppedAreaPixels,r.mediaSize,r.props.rotation,s,r.props.minZoom,r.props.maxZoom),d=l.crop,x=l.zoom;r.props.onCropChange(d),r.props.onZoomChange&&r.props.onZoomChange(x)}},r.computeSizes=function(){var s,u,d,x,l,_,S=r.imageRef.current||r.videoRef.current;if(S&&r.containerRef){r.containerRect=r.containerRef.getBoundingClientRect();var C=r.containerRect.width/r.containerRect.height,k=((s=r.imageRef.current)===null||s===void 0?void 0:s.naturalWidth)||((u=r.videoRef.current)===null||u===void 0?void 0:u.videoWidth)||0,D=((d=r.imageRef.current)===null||d===void 0?void 0:d.naturalHeight)||((x=r.videoRef.current)===null||x===void 0?void 0:x.videoHeight)||0,U=S.offsetWidth<k||S.offsetHeight<D,q=k/D,L=void 0;if(U)switch(r.props.objectFit){default:case"contain":L=C>q?{width:r.containerRect.height*q,height:r.containerRect.height}:{width:r.containerRect.width,height:r.containerRect.width/q};break;case"horizontal-cover":L={width:r.containerRect.width,height:r.containerRect.width/q};break;case"vertical-cover":L={width:r.containerRect.height*q,height:r.containerRect.height};break;case"auto-cover":L=k>D?{width:r.containerRect.width,height:r.containerRect.width/q}:{width:r.containerRect.height*q,height:r.containerRect.height};break}else L={width:S.offsetWidth,height:S.offsetHeight};r.mediaSize=Fi(Fi({},L),{naturalWidth:k,naturalHeight:D}),r.props.setMediaSize&&r.props.setMediaSize(r.mediaSize);var K=r.props.cropSize?r.props.cropSize:Ite(r.mediaSize.width,r.mediaSize.height,r.containerRect.width,r.containerRect.height,r.props.aspect,r.props.rotation);return(((l=r.state.cropSize)===null||l===void 0?void 0:l.height)!==K.height||((_=r.state.cropSize)===null||_===void 0?void 0:_.width)!==K.width)&&r.props.onCropSizeChange&&r.props.onCropSizeChange(K),r.setState({cropSize:K},r.recomputeCropPosition),r.props.setCropSize&&r.props.setCropSize(K),K}},r.onMouseDown=function(s){!r.currentDoc||(s.preventDefault(),r.currentDoc.addEventListener("mousemove",r.onMouseMove),r.currentDoc.addEventListener("mouseup",r.onDragStopped),r.onDragStart(t.getMousePoint(s)))},r.onMouseMove=function(s){return r.onDrag(t.getMousePoint(s))},r.onTouchStart=function(s){!r.currentDoc||(r.isTouching=!0,!(r.props.onTouchRequest&&!r.props.onTouchRequest(s))&&(r.currentDoc.addEventListener("touchmove",r.onTouchMove,{passive:!1}),r.currentDoc.addEventListener("touchend",r.onDragStopped),s.touches.length===2?r.onPinchStart(s):s.touches.length===1&&r.onDragStart(t.getTouchPoint(s.touches[0]))))},r.onTouchMove=function(s){s.preventDefault(),s.touches.length===2?r.onPinchMove(s):s.touches.length===1&&r.onDrag(t.getTouchPoint(s.touches[0]))},r.onGestureStart=function(s){!r.currentDoc||(s.preventDefault(),r.currentDoc.addEventListener("gesturechange",r.onGestureMove),r.currentDoc.addEventListener("gestureend",r.onGestureEnd),r.gestureZoomStart=r.props.zoom,r.gestureRotationStart=r.props.rotation)},r.onGestureMove=function(s){if(s.preventDefault(),!r.isTouching){var u=t.getMousePoint(s),d=r.gestureZoomStart-1+s.scale;if(r.setNewZoom(d,u,{shouldUpdatePosition:!0}),r.props.onRotationChange){var x=r.gestureRotationStart+s.rotation;r.props.onRotationChange(x)}}},r.onGestureEnd=function(s){r.cleanEvents()},r.onDragStart=function(s){var u,d,x=s.x,l=s.y;r.dragStartPosition={x,y:l},r.dragStartCrop=Fi({},r.props.crop),(d=(u=r.props).onInteractionStart)===null||d===void 0||d.call(u)},r.onDrag=function(s){var u=s.x,d=s.y;!r.currentWindow||(r.rafDragTimeout&&r.currentWindow.cancelAnimationFrame(r.rafDragTimeout),r.rafDragTimeout=r.currentWindow.requestAnimationFrame(function(){if(!!r.state.cropSize&&!(u===void 0||d===void 0)){var x=u-r.dragStartPosition.x,l=d-r.dragStartPosition.y,_={x:r.dragStartCrop.x+x,y:r.dragStartCrop.y+l},S=r.props.restrictPosition?V0(_,r.mediaSize,r.state.cropSize,r.props.zoom,r.props.rotation):_;r.props.onCropChange(S)}}))},r.onDragStopped=function(){var s,u;r.isTouching=!1,r.cleanEvents(),r.emitCropData(),(u=(s=r.props).onInteractionEnd)===null||u===void 0||u.call(s)},r.onWheel=function(s){if(!!r.currentWindow&&!(r.props.onWheelRequest&&!r.props.onWheelRequest(s))){s.preventDefault();var u=t.getMousePoint(s),d=Pte(s).pixelY,x=r.props.zoom-d*r.props.zoomSpeed/200;r.setNewZoom(x,u,{shouldUpdatePosition:!0}),r.state.hasWheelJustStarted||r.setState({hasWheelJustStarted:!0},function(){var l,_;return(_=(l=r.props).onInteractionStart)===null||_===void 0?void 0:_.call(l)}),r.wheelTimer&&clearTimeout(r.wheelTimer),r.wheelTimer=r.currentWindow.setTimeout(function(){return r.setState({hasWheelJustStarted:!1},function(){var l,_;return(_=(l=r.props).onInteractionEnd)===null||_===void 0?void 0:_.call(l)})},250)}},r.getPointOnContainer=function(s){var u=s.x,d=s.y;if(!r.containerRect)throw new Error("The Cropper is not mounted");return{x:r.containerRect.width/2-(u-r.containerRect.left),y:r.containerRect.height/2-(d-r.containerRect.top)}},r.getPointOnMedia=function(s){var u=s.x,d=s.y,x=r.props,l=x.crop,_=x.zoom;return{x:(u+l.x)/_,y:(d+l.y)/_}},r.setNewZoom=function(s,u,d){var x=d===void 0?{}:d,l=x.shouldUpdatePosition,_=l===void 0?!0:l;if(!(!r.state.cropSize||!r.props.onZoomChange)){var S=Tx(s,r.props.minZoom,r.props.maxZoom);if(_){var C=r.getPointOnContainer(u),k=r.getPointOnMedia(C),D={x:k.x*S-C.x,y:k.y*S-C.y},U=r.props.restrictPosition?V0(D,r.mediaSize,r.state.cropSize,S,r.props.rotation):D;r.props.onCropChange(U)}r.props.onZoomChange(S)}},r.getCropData=function(){if(!r.state.cropSize)return null;var s=r.props.restrictPosition?V0(r.props.crop,r.mediaSize,r.state.cropSize,r.props.zoom,r.props.rotation):r.props.crop;return zte(s,r.mediaSize,r.state.cropSize,r.getAspect(),r.props.zoom,r.props.rotation,r.props.restrictPosition)},r.emitCropData=function(){var s=r.getCropData();if(!!s){var u=s.croppedAreaPercentages,d=s.croppedAreaPixels;r.props.onCropComplete&&r.props.onCropComplete(u,d),r.props.onCropAreaChange&&r.props.onCropAreaChange(u,d)}},r.emitCropAreaChange=function(){var s=r.getCropData();if(!!s){var u=s.croppedAreaPercentages,d=s.croppedAreaPixels;r.props.onCropAreaChange&&r.props.onCropAreaChange(u,d)}},r.recomputeCropPosition=function(){if(!!r.state.cropSize){var s=r.props.restrictPosition?V0(r.props.crop,r.mediaSize,r.state.cropSize,r.props.zoom,r.props.rotation):r.props.crop;r.props.onCropChange(s),r.emitCropData()}},r}return t.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver=="undefined"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=$te,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef))},t.prototype.componentWillUnmount=function(){var r,s;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver=="undefined"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(r=this.resizeObserver)===null||r===void 0||r.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((s=this.styleRef.parentNode)===null||s===void 0||s.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},t.prototype.componentDidUpdate=function(r){var s,u,d,x,l,_,S,C,k;r.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):r.aspect!==this.props.aspect?this.computeSizes():r.zoom!==this.props.zoom?this.recomputeCropPosition():((s=r.cropSize)===null||s===void 0?void 0:s.height)!==((u=this.props.cropSize)===null||u===void 0?void 0:u.height)||((d=r.cropSize)===null||d===void 0?void 0:d.width)!==((x=this.props.cropSize)===null||x===void 0?void 0:x.width)?this.computeSizes():(((l=r.crop)===null||l===void 0?void 0:l.x)!==((_=this.props.crop)===null||_===void 0?void 0:_.x)||((S=r.crop)===null||S===void 0?void 0:S.y)!==((C=this.props.crop)===null||C===void 0?void 0:C.y))&&this.emitCropAreaChange(),r.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),r.video!==this.props.video&&((k=this.videoRef.current)===null||k===void 0||k.load())},t.prototype.getAspect=function(){var r=this.props,s=r.cropSize,u=r.aspect;return s?s.width/s.height:u},t.prototype.onPinchStart=function(r){var s=t.getTouchPoint(r.touches[0]),u=t.getTouchPoint(r.touches[1]);this.lastPinchDistance=ZA(s,u),this.lastPinchRotation=XA(s,u),this.onDragStart(KA(s,u))},t.prototype.onPinchMove=function(r){var s=this;if(!(!this.currentDoc||!this.currentWindow)){var u=t.getTouchPoint(r.touches[0]),d=t.getTouchPoint(r.touches[1]),x=KA(u,d);this.onDrag(x),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var l=ZA(u,d),_=s.props.zoom*(l/s.lastPinchDistance);s.setNewZoom(_,x,{shouldUpdatePosition:!1}),s.lastPinchDistance=l;var S=XA(u,d),C=s.props.rotation+(S-s.lastPinchRotation);s.props.onRotationChange&&s.props.onRotationChange(C),s.lastPinchRotation=S})}},t.prototype.render=function(){var r=this,s=this.props,u=s.image,d=s.video,x=s.mediaProps,l=s.transform,_=s.crop,S=_.x,C=_.y,k=s.rotation,D=s.zoom,U=s.cropShape,q=s.showGrid,L=s.style,K=L.containerStyle,R=L.cropAreaStyle,F=L.mediaStyle,V=s.classes,J=V.containerClassName,re=V.cropAreaClassName,fe=V.mediaClassName,be=s.objectFit;return zt.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(ve){return r.containerRef=ve},"data-testid":"container",style:K,className:G0("reactEasyCrop_Container",J)},u?zt.createElement("img",Fi({alt:"",className:G0("reactEasyCrop_Image",be==="contain"&&"reactEasyCrop_Contain",be==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",be==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",be==="auto-cover"&&(this.mediaSize.naturalWidth>this.mediaSize.naturalHeight?"reactEasyCrop_Cover_Horizontal":"reactEasyCrop_Cover_Vertical"),fe)},x,{src:u,ref:this.imageRef,style:Fi(Fi({},F),{transform:l||"translate(".concat(S,"px, ").concat(C,"px) rotate(").concat(k,"deg) scale(").concat(D,")")}),onLoad:this.onMediaLoad})):d&&zt.createElement("video",Fi({autoPlay:!0,loop:!0,muted:!0,className:G0("reactEasyCrop_Video",be==="contain"&&"reactEasyCrop_Contain",be==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",be==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",be==="auto-cover"&&(this.mediaSize.naturalWidth>this.mediaSize.naturalHeight?"reactEasyCrop_Cover_Horizontal":"reactEasyCrop_Cover_Vertical"),fe)},x,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:Fi(Fi({},F),{transform:l||"translate(".concat(S,"px, ").concat(C,"px) rotate(").concat(k,"deg) scale(").concat(D,")")}),controls:!1}),(Array.isArray(d)?d:[{src:d}]).map(function(ce){return zt.createElement("source",Fi({key:ce.src},ce))})),this.state.cropSize&&zt.createElement("div",{style:Fi(Fi({},R),{width:this.state.cropSize.width,height:this.state.cropSize.height}),"data-testid":"cropper",className:G0("reactEasyCrop_CropArea",U==="round"&&"reactEasyCrop_CropAreaRound",q&&"reactEasyCrop_CropAreaGrid",re)}))},t.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:Ute,minZoom:jte,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0},t.getMousePoint=function(r){return{x:Number(r.clientX),y:Number(r.clientY)}},t.getTouchPoint=function(r){return{x:Number(r.clientX),y:Number(r.clientY)}},t}(zt.Component);const Gte=e=>new Promise((t,r)=>{const s=new Image;s.addEventListener("load",()=>t(s)),s.addEventListener("error",u=>r(u)),s.setAttribute("crossOrigin","anonymous"),s.src=e});function bD(e){return e*Math.PI/180}function qte(e,t,r){const s=bD(r);return{width:Math.abs(Math.cos(s)*e)+Math.abs(Math.sin(s)*t),height:Math.abs(Math.sin(s)*e)+Math.abs(Math.cos(s)*t)}}async function Hte(e,t,r=0,s={horizontal:!1,vertical:!1}){const u=await Gte(e),d=document.createElement("canvas"),x=d.getContext("2d");if(!x)return null;const l=bD(r),{width:_,height:S}=qte(u.width,u.height,r);d.width=_,d.height=S,x.translate(_/2,S/2),x.rotate(l),x.scale(s.horizontal?-1:1,s.vertical?-1:1),x.translate(-u.width/2,-u.height/2),x.drawImage(u,0,0);const C=x.getImageData(t.x,t.y,t.width,t.height);return d.width=t.width,d.height=t.height,x.putImageData(C,0,0),new Promise((k,D)=>{d.toBlob(U=>{const q=d.toDataURL("image/jpeg");k({file:U,path:URL.createObjectURL(U),buffer:q})},"image/jpeg")})}wD.propTypes={url:_e.string,file:_e.object,hideModalPreview:_e.func,hideModal:_e.func};function wD({url:e="",hideModalPreview:t=null,hideModal:r=null,file:s=null}){const[u,d]=ne.exports.useState(!1),[x,l]=ne.exports.useState({x:0,y:0}),[_,S]=ne.exports.useState(1),[C,k]=ne.exports.useState(null),[D,U]=ne.exports.useState(null),q=jr(V=>V.auth.current),L=Ei(),K=ne.exports.useCallback((V,J)=>{k(J)},[]),R=ne.exports.useCallback(async()=>{var V;if(!u){d(!0);try{const{file:J}=await Hte(e,C),re=new FormData;re.append("avatar",J),await Zi.uploadAvatar(q==null?void 0:q.slug,re);const fe=await Zi.getAll({slug:q==null?void 0:q.slug});L(bJ({avatar:(V=fe[0])==null?void 0:V.image})),r()}catch(J){console.log(J)}d(!1)}},[C]),F=ne.exports.useCallback(()=>{U(null),t()},[]);return H("div",{className:"text-sm relative ",children:[H("div",{className:"h-[60vh] ",children:[T("div",{className:"crop-container",children:T(Vte,{image:e||"https://img.huffingtonpost.com/asset/5ab4d4ac2000007d06eb2c56.jpeg?cache=sih0jwle4e&ops=1910_1000",crop:x,zoom:_,maxZoom:2,aspect:4/3,onCropChange:l,onCropComplete:K,onZoomChange:S})}),T("div",{className:"controls",children:T("input",{type:"range",value:_,min:1,max:3,step:.1,"aria-labelledby":"Zoom",onChange:V=>{S(V.target.value)},className:"zoom-range"})})]}),H("div",{className:" py-[10px] px-4 border-t-[1px] border-t-[#f0f0f0] text-right",children:[T("button",{disabled:u,onClick:F,className:" hover:border-primary hover:text-primary transition-all duration-700 border border-[#d9d9d9] bg-white shadow-[0_2px_0_rgb(0,0,0,0.02)] font-normal rounded-[2px] h-[32px] text-sm py-1 px-[15px]",children:"H\u1EE7y"}),T("button",{onClick:R,className:` hover:opacity-90 ml-2  ${u?"bg-gray-500":"bg-primary"} text-white  transition-all duration-700 border border-[#d9d9d9] shadow-[0_2px_0_rgb(0,0,0,0.02)] font-medium rounded-[2px] h-[32px] text-sm py-1 px-[15px]`,disabled:u,children:"C\u1EADp nh\u1EADt"})]})]})}ED.propTypes={url:_e.string,hideModalPreview:_e.func,file:_e.object,hideModal:_e.func};function ED({url:e="",hideModalPreview:t=null,file:r={},hideModal:s=null}){return typeof document=="undefined"?T("div",{}):ri.exports.createPortal(T("div",{className:"z-[10000] fixed flex items-center justify-center inset-0 bg-[rgba(0,0,0,.45)] ",children:T("div",{className:"w-[520px] bg-[rgba(0,0,0,.85)] text-sm relative mx-auto",children:H("div",{className:"rounded-[10px] overflow-hidden shadow-[0_2px_8px_rgb(0,0,0,0.15] bg-white relative",children:[T("button",{onClick:t,className:"absolute top-0 right-0 flex items-center justify-center w-[56px] h-[56px]",children:T(Nd,{className:"text-[rgba(0,0,0,.45)] text-lg"})}),T("div",{className:"py-4 px-6 bg-white text-[rgba(0,0,0,.85)] border-b-[1px] border-b-[#f0f0f0] ",children:"Ch\u1EC9nh s\u1EEDa \u1EA3nh"}),T(wD,{url:e,file:r,hideModalPreview:t,hideModal:s})]})})}),document.querySelector("body"))}TD.propTypes={hideModal:_e.func};function TD({hideModal:e=null}){if(typeof document=="undefined")return T("div",{});const[t,r]=ne.exports.useState(""),[s,u]=ne.exports.useState(null),[d,x]=ne.exports.useState(!1),l=_=>{const S=_.target.files[0],C=URL.createObjectURL(S);x(!0),r(C),u(S)};return ri.exports.createPortal(H("div",{className:"fixed inset-0 z-[1000] bg-[rgba(0,0,0,.65)] ",children:[T("div",{className:"absolute inset-0 flex items-center justify-center",children:H("div",{className:"text-black w-[600px] bg-white rounded-[10px] shadow-[0_2px_8px_rgb(0,0,0,0.15)] overflow-hidden",children:[H("div",{className:"px-[60px] shrink-0 h-[60px] border-b-[1px] border-b-[rgba(0,0,0,.1)] text-center relative",children:[T("div",{className:"h-full flex items-center justify-center",children:T("h2",{className:"text-black font-bold",children:"C\u1EADp nh\u1EADt \u1EA3nh \u0111\u1EA1i di\u1EC7n"})}),T("div",{onClick:e,className:"absolute top-3 right-4 text-[#666] w-9 h-9 text-[26px] cursor-pointer bg-[#e4e6eb] rounded-full flex items-center justify-center",children:T(Nd,{})})]}),T("div",{className:"p-4 min-h-[200px]",children:H("label",{htmlFor:"avatar",className:"block py-4 bg-[#fafafa] cursor-pointer border-dotted border-[2px] border-[#e1e1e1] ",children:[T("input",{type:"file",name:"",id:"avatar",className:"hidden",accept:"image/*",onChange:l,multiple:!1}),H("div",{children:[T("p",{className:"pb-5 flex items-center justify-center",children:T(bY,{className:"text-[40px] text-[#c1c1c1]"})}),T("p",{className:"mb-1 text-[rgba(0,0,0,.85)] text-lg text-center",children:"Ch\u1ECDn \u1EA3nh ho\u1EB7c k\xE9o \u1EA3nh v\xE0o \u0111\xE2y \u0111\u1EC3 c\u1EADp nh\u1EADt \u1EA3nh \u0111\u1EA1i di\u1EC7n"})]})]})})]})}),d&&T(ED,{url:t,hideModalPreview:()=>x(!1),file:s,hideModal:e})]}),document.querySelector("body"))}SD.propTypes={};function SD(e){return T(qs,{children:T("div",{className:"flex items-center justify-center p-10",children:H("div",{className:"flex flex-col items-center",children:[T("img",{src:"/img/404.svg",alt:""}),T("p",{className:"lg:text-[28px] text-[22px] font-medium",children:"404 - Trang kh\xF4ng t\u1ED3n t\u1EA1i"}),T(Jt,{to:"/",onClick:null,className:"px-[14px] bg-primary hover:bg-[#be0129] transition-all text-white h-10 flex items-center justify-center rounded-md mt-2  ",children:"Quay v\u1EC1 trang ch\u1EE7"})]})})})}CD.propTypes={};function CD(e){var C,k,D,U,q;const[t,r]=ne.exports.useState({}),[s,u]=ne.exports.useState(!1),d=jr(L=>L.auth.current),x=Ji(),l=yr(),_=x.pathname.split("/")[2];Ei(),ne.exports.useEffect(()=>{(async()=>{try{const L=await Zi.getAll({slug:_});(L==null?void 0:L.length)>0?r(L[0]):l("/not-found")}catch(L){console.log("error",L.message)}})()},[x,d]);const S=async()=>{};return T(Ex,{children:T(qs,{children:H("div",{className:"min-h-[1000px] lg:pb-0 pb-[45px]",children:[T("div",{className:"max-w-[1200px] px-4 lg:pb-[100px] pb-[140px] mx-auto bg-white",children:T("div",{className:"h-[250px] py-5 px-10 flex items-center justify-center bg-[linear-gradient(180deg,#ffb8b8,#fafafa)] rounded-br-2xl rounded-bl-2xl relative",children:H("div",{className:"flex flex-col items-center absolute top-[34%] justify-center ",children:[H("div",{className:"w-[200px] h-[200px] p-[6px] rounded-full bg-white relative",children:[T("img",{src:((C=t==null?void 0:t.image)==null?void 0:C.url)||"/img/user-default.jpg",alt:`${t==null?void 0:t.name}`,className:"rounded-full w-full h-full object-cover"}),T("div",{onClick:()=>u(!0),className:`${(d==null?void 0:d.id)===(t==null?void 0:t.id)?"flex":"hidden"} hover:bg-[#ddd] transition-all cursor-pointer absolute bottom-[10px] right-[20px] w-[38px] h-[38px] text-[20px]  items-center justify-center rounded-full text-[rgb(64, 64, 64)] bg-[rgb(239,239,239)]`,children:T(md,{className:""})})]}),T("h1",{className:"text-[32px] text-[rgba(0,0,0,.85)] font-bold ",children:t==null?void 0:t.name}),H("ul",{className:"lg:hidden  h-full flex items-center gap-x-[6px] mt-2",children:[T("li",{className:`cursor-pointer text-base py-1 h-full  items-center ${_===(d==null?void 0:d.slug)?"flex":"hidden"}`,children:H(Jt,{to:"/setting",className:"hover:bg-[#e0e0e0]  flex items-center gap-x-2 py-[6px] px-[18px]  rounded-[6px] bg-[#efefef] font-medium transition-all",children:[T(Cw,{}),"Ch\u1EC9nh s\u1EEDa"]})}),T("li",{className:`cursor-pointer text-base py-1 h-full  items-center ${_!==(d==null?void 0:d.slug)?"flex":"hidden"}`,onClick:S,children:H("div",{className:"hover:bg-[#e0e0e0]  flex items-center gap-x-2 py-[6px] bg-[rgba(238,0,51,.16)] text-primary px-[18px]  rounded-[6px] bg-[#efefef] font-medium transition-all",children:[T(Aw,{}),(k=d==null?void 0:d.listFollowing)!=null&&k.includes(t==null?void 0:t._id)?"\u0110ang theo d\xF5i":"Theo d\xF5i"]})}),T("li",{className:"cursor-pointer text-base py-1 h-full flex items-center gap-x-[6px]",children:T(Jt,{to:"#",className:"flex items-center text-[#3b5998]  hover:bg-[#3b5998] hover:text-white  h-9 gap-x-2 py-[6px] px-[18px]  rounded-[6px] bg-[#efefef] font-medium transition-all",children:T(hA,{className:""})})}),T("li",{className:"cursor-pointer text-base py-1 h-full flex items-center gap-x-[6px]",children:T(Jt,{to:"#",className:"flex items-center text-[#cd486b] hover:bg-[#cd486b] hover:text-white h-9 gap-x-2 py-[6px] px-[18px]  rounded-[6px] bg-[#efefef] font-medium transition-all",children:T(dA,{className:" "})})}),T("li",{className:"cursor-pointer text-base py-1 h-full flex items-center gap-x-[6px]",children:T(Jt,{to:"#",className:"flex hover:bg-[#e0e0e0] items-center h-9 gap-x-2 py-[6px] px-[18px]  rounded-[6px] bg-[#efefef] font-medium transition-all",children:T(oy,{})})})]})]})})}),T("div",{className:"bg-white shadow-[0_2px_2px_0_rgb(189,171,171,0.2)]  sticky z-[100] top-[-1px] whitespace-nowrap  ",children:H("div",{className:"max-w-[1060px] m-auto flex items-center justify-between border-t-[1px] border-t-[#ddd]",children:[H("ul",{className:"list-none flex",children:[T("li",{children:T(r1,{style:({isActive:L})=>({borderBottomColor:L&&"#e03",borderBottom:L&&"4px solid",color:L&&"#e03"}),to:`/profile/${(t==null?void 0:t.slug)||"thainguyen"}`,end:!0,className:"inline-block py-1 text-base",children:H("button",{className:`text-base font-medium  transition-all rounded-[10px] mt-[2px] py-[10px] px-[14px]  ${x.pathname!=="/profile"?"hover:bg-[#f0f2f5]":""}`,children:[" ","\u0110\xE1nh gi\xE1"]})})}),(t==null?void 0:t.id)===(d==null?void 0:d.id)&&T("li",{children:T(r1,{style:({isActive:L})=>({borderBottomColor:L&&"#e03",borderBottom:L&&"4px solid",color:L&&"#e03"}),to:"/saved",end:!0,className:"inline-block py-1  text-base",children:H("button",{className:`text-base font-medium  transition-all rounded-[10px] mt-[2px] py-[10px] px-[14px]  ${x.pathname!=="/profile/saved"?"hover:bg-[#f0f2f5]":""}`,children:[" ","\u0110\xE3 l\u01B0u"," "]})})}),T("li",{children:T(r1,{style:({isActive:L})=>({borderBottomColor:L&&"#e03",borderBottom:L&&"4px solid",color:L&&"#e03"}),to:"/",end:!0,className:"inline-block py-1 text-base",children:H("button",{className:`text-base font-medium  transition-all rounded-[10px] mt-[2px] py-[10px] px-[14px]  ${x.pathname!=="/profile/saved"?"hover:bg-[#f0f2f5]":""}`,children:["Ng\u01B0\u1EDDi theo d\xF5i"," "]})})})]}),H("ul",{className:"h-full lg:flex items-center gap-x-[6px] hidden",children:[T("li",{className:`cursor-pointer text-base py-1 h-full  items-center ${_===(d==null?void 0:d.slug)?"flex":"hidden"}`,children:H(Jt,{to:"/setting",className:"hover:bg-[#e0e0e0]  flex items-center gap-x-2 py-[6px] px-[18px]  rounded-[6px] bg-[#efefef] font-medium transition-all",children:[T(Cw,{}),"Ch\u1EC9nh s\u1EEDa"]})}),T("li",{className:`cursor-pointer text-base py-1 h-full  items-center ${_!==(d==null?void 0:d.slug)?"flex":"hidden"}`,onClick:S,children:H("div",{className:"hover:bg-[#e0e0e0]  flex items-center gap-x-2 py-[6px] bg-[rgba(238,0,51,.16)] text-primary px-[18px]  rounded-[6px] bg-[#efefef] font-medium transition-all",children:[T(Aw,{}),(D=d==null?void 0:d.listFollowing)!=null&&D.includes(t==null?void 0:t.id)?"\u0110ang theo d\xF5i":"Theo d\xF5i"]})}),((U=t==null?void 0:t.userDto)==null?void 0:U.facebook)&&T("li",{className:"cursor-pointer text-base py-1 h-full flex items-center gap-x-[6px]",children:T(Jt,{to:"#",className:"flex items-center text-[#3b5998]  hover:bg-[#3b5998] hover:text-white  h-9 gap-x-2 py-[6px] px-[18px]  rounded-[6px] bg-[#efefef] font-medium transition-all",children:T(hA,{className:""})})}),((q=t==null?void 0:t.userDto)==null?void 0:q.instagram)&&T("li",{className:"cursor-pointer text-base py-1 h-full flex items-center gap-x-[6px]",children:T(Jt,{to:"#",className:"flex items-center text-[#cd486b] hover:bg-[#cd486b] hover:text-white h-9 gap-x-2 py-[6px] px-[18px]  rounded-[6px] bg-[#efefef] font-medium transition-all",children:T(dA,{className:" "})})}),T("li",{className:"cursor-pointer text-base py-1 h-full flex items-center gap-x-[6px]",children:T(Jt,{to:"#",className:"flex hover:bg-[#e0e0e0] items-center h-9 gap-x-2 py-[6px] px-[18px]  rounded-[6px] bg-[#efefef] font-medium transition-all",children:T(oy,{})})})]})]})}),T(pD,{data:t}),s&&T(TD,{hideModal:()=>u(!1)})]})})})}AD.propTypes={data:_e.object};function AD({data:e={}}){var S,C,k,D,U,q;const t=Ji(),r=((S=t==null?void 0:t.pathname)==null?void 0:S.split("/")[2])||"",[s,u]=ne.exports.useState({}),[d,x]=ne.exports.useState({indexCurr:0,show:!1});ne.exports.useEffect(()=>{(async()=>{try{const L=await yo.getBySlug(r);u(L)}catch(L){console.log("Error",L)}})()},[]);const l=()=>{x(L=>({...L,indexCurr:0,show:!1}))},_=L=>{x(K=>({...K,indexCurr:L,show:!0}))};return T(qs,{children:H("div",{className:"bg-white max-w-[1200px] mx-auto rounded-[10px] py-3 lg:px-5 px-[6px] shadow-[0_1px_4px_rgb(0,0,0,0.15)] my-[10px] mb-[70px] lg:mb-[10px] ",children:[H("div",{className:"  ",children:[H("div",{className:"px-[54px] mb-[14px] text-center relative",children:[T(Jt,{to:`/place/${s.slug}`,className:"text-[rgba(0,0,0,.85)] text-[20px] font-medium lg:text-[28px]",children:s==null?void 0:s.name}),T("h3",{className:"text-[rgba(0,0,0,.85)] text-sm font-medium lg:text-lg",children:(k=(C=s==null?void 0:s.startLocation)==null?void 0:C.address)==null?void 0:k.split(",")[1]}),H(Jt,{to:`/place/${s.slug}`,className:"absolute flex items-center gap-x-3 left-[2px] top-[10px] text-[20px] rounded-[20px] bg-[#f0f2f5] font-semibold py-[6px] px-[20px]",children:[T(qK,{}),T("span",{className:"lg:block hidden text-[18px]",children:" Tr\u1EDF v\u1EC1"})]})]}),T("div",{className:"grid grid-cols-2 gap-2 lg:grid-cols-4",children:((D=s==null?void 0:s.listImage)==null?void 0:D.length)>0&&((U=s==null?void 0:s.listImage)==null?void 0:U.map((L,K)=>T("div",{children:T("img",{onClick:()=>_(K),src:L==null?void 0:L.url,alt:L==null?void 0:L.url,className:"w-full h-full object-cover max-h-[318px] min-h-[200px] lg:max-h-[285px] cursor-pointer rounded-[6px]"})},K)))})]}),(d==null?void 0:d.show)&&T(Su,{data:s,imageList:s==null?void 0:s.listImage,length:(q=s==null?void 0:s.listImage)==null?void 0:q.length,index:d==null?void 0:d.indexCurr,hideModalImage:l})]})})}var Hw=function(e,t){return Hw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var u in s)s.hasOwnProperty(u)&&(r[u]=s[u])},Hw(e,t)};function Wte(e,t){Hw(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Zf=function(){return Zf=Object.assign||function(t){for(var r,s=1,u=arguments.length;s<u;s++){r=arguments[s];for(var d in r)Object.prototype.hasOwnProperty.call(r,d)&&(t[d]=r[d])}return t},Zf.apply(this,arguments)};function Zte(e,t,r,s){var u,d=!1,x=0;function l(){u&&clearTimeout(u)}function _(){l(),d=!0}typeof t!="boolean"&&(s=r,r=t,t=void 0);function S(){var C=this,k=Date.now()-x,D=arguments;if(d)return;function U(){x=Date.now(),r.apply(C,D)}function q(){u=void 0}s&&!u&&U(),l(),s===void 0&&k>e?U():t!==!0&&(u=setTimeout(s?q:U,s===void 0?e-k:e))}return S.cancel=_,S}var ed={Pixel:"Pixel",Percent:"Percent"},YA={unit:ed.Percent,value:.8};function JA(e){return typeof e=="number"?{unit:ed.Percent,value:e*100}:typeof e=="string"?e.match(/^(\d*(\.\d+)?)px$/)?{unit:ed.Pixel,value:parseFloat(e)}:e.match(/^(\d*(\.\d+)?)%$/)?{unit:ed.Percent,value:parseFloat(e)}:(console.warn('scrollThreshold format is invalid. Valid formats: "120px", "50%"...'),YA):(console.warn("scrollThreshold should be string or number"),YA)}(function(e){Wte(t,e);function t(r){var s=e.call(this,r)||this;return s.lastScrollTop=0,s.actionTriggered=!1,s.startY=0,s.currentY=0,s.dragging=!1,s.maxPullDownDistance=0,s.getScrollableTarget=function(){return s.props.scrollableTarget instanceof HTMLElement?s.props.scrollableTarget:typeof s.props.scrollableTarget=="string"?document.getElementById(s.props.scrollableTarget):(s.props.scrollableTarget===null&&console.warn(`You are trying to pass scrollableTarget but it is null. This might
        happen because the element may not have been added to DOM yet.
        See https://github.com/ankeetmaini/react-infinite-scroll-component/issues/59 for more info.
      `),null)},s.onStart=function(u){s.lastScrollTop||(s.dragging=!0,u instanceof MouseEvent?s.startY=u.pageY:u instanceof TouchEvent&&(s.startY=u.touches[0].pageY),s.currentY=s.startY,s._infScroll&&(s._infScroll.style.willChange="transform",s._infScroll.style.transition="transform 0.2s cubic-bezier(0,0,0.31,1)"))},s.onMove=function(u){!s.dragging||(u instanceof MouseEvent?s.currentY=u.pageY:u instanceof TouchEvent&&(s.currentY=u.touches[0].pageY),!(s.currentY<s.startY)&&(s.currentY-s.startY>=Number(s.props.pullDownToRefreshThreshold)&&s.setState({pullToRefreshThresholdBreached:!0}),!(s.currentY-s.startY>s.maxPullDownDistance*1.5)&&s._infScroll&&(s._infScroll.style.overflow="visible",s._infScroll.style.transform="translate3d(0px, "+(s.currentY-s.startY)+"px, 0px)")))},s.onEnd=function(){s.startY=0,s.currentY=0,s.dragging=!1,s.state.pullToRefreshThresholdBreached&&(s.props.refreshFunction&&s.props.refreshFunction(),s.setState({pullToRefreshThresholdBreached:!1})),requestAnimationFrame(function(){s._infScroll&&(s._infScroll.style.overflow="auto",s._infScroll.style.transform="none",s._infScroll.style.willChange="unset")})},s.onScrollListener=function(u){typeof s.props.onScroll=="function"&&setTimeout(function(){return s.props.onScroll&&s.props.onScroll(u)},0);var d=s.props.height||s._scrollableNode?u.target:document.documentElement.scrollTop?document.documentElement:document.body;if(!s.actionTriggered){var x=s.props.inverse?s.isElementAtTop(d,s.props.scrollThreshold):s.isElementAtBottom(d,s.props.scrollThreshold);x&&s.props.hasMore&&(s.actionTriggered=!0,s.setState({showLoader:!0}),s.props.next&&s.props.next()),s.lastScrollTop=d.scrollTop}},s.state={showLoader:!1,pullToRefreshThresholdBreached:!1,prevDataLength:r.dataLength},s.throttledOnScrollListener=Zte(150,s.onScrollListener).bind(s),s.onStart=s.onStart.bind(s),s.onMove=s.onMove.bind(s),s.onEnd=s.onEnd.bind(s),s}return t.prototype.componentDidMount=function(){if(typeof this.props.dataLength=="undefined")throw new Error('mandatory prop "dataLength" is missing. The prop is needed when loading more content. Check README.md for usage');if(this._scrollableNode=this.getScrollableTarget(),this.el=this.props.height?this._infScroll:this._scrollableNode||window,this.el&&this.el.addEventListener("scroll",this.throttledOnScrollListener),typeof this.props.initialScrollY=="number"&&this.el&&this.el instanceof HTMLElement&&this.el.scrollHeight>this.props.initialScrollY&&this.el.scrollTo(0,this.props.initialScrollY),this.props.pullDownToRefresh&&this.el&&(this.el.addEventListener("touchstart",this.onStart),this.el.addEventListener("touchmove",this.onMove),this.el.addEventListener("touchend",this.onEnd),this.el.addEventListener("mousedown",this.onStart),this.el.addEventListener("mousemove",this.onMove),this.el.addEventListener("mouseup",this.onEnd),this.maxPullDownDistance=this._pullDown&&this._pullDown.firstChild&&this._pullDown.firstChild.getBoundingClientRect().height||0,this.forceUpdate(),typeof this.props.refreshFunction!="function"))throw new Error(`Mandatory prop "refreshFunction" missing.
          Pull Down To Refresh functionality will not work
          as expected. Check README.md for usage'`)},t.prototype.componentWillUnmount=function(){this.el&&(this.el.removeEventListener("scroll",this.throttledOnScrollListener),this.props.pullDownToRefresh&&(this.el.removeEventListener("touchstart",this.onStart),this.el.removeEventListener("touchmove",this.onMove),this.el.removeEventListener("touchend",this.onEnd),this.el.removeEventListener("mousedown",this.onStart),this.el.removeEventListener("mousemove",this.onMove),this.el.removeEventListener("mouseup",this.onEnd)))},t.prototype.componentDidUpdate=function(r){this.props.dataLength!==r.dataLength&&(this.actionTriggered=!1,this.setState({showLoader:!1}))},t.getDerivedStateFromProps=function(r,s){var u=r.dataLength!==s.prevDataLength;return u?Zf(Zf({},s),{prevDataLength:r.dataLength}):null},t.prototype.isElementAtTop=function(r,s){s===void 0&&(s=.8);var u=r===document.body||r===document.documentElement?window.screen.availHeight:r.clientHeight,d=JA(s);return d.unit===ed.Pixel?r.scrollTop<=d.value+u-r.scrollHeight+1:r.scrollTop<=d.value/100+u-r.scrollHeight+1},t.prototype.isElementAtBottom=function(r,s){s===void 0&&(s=.8);var u=r===document.body||r===document.documentElement?window.screen.availHeight:r.clientHeight,d=JA(s);return d.unit===ed.Pixel?r.scrollTop+u>=r.scrollHeight-d.value:r.scrollTop+u>=d.value/100*r.scrollHeight},t.prototype.render=function(){var r=this,s=Zf({height:this.props.height||"auto",overflow:"auto",WebkitOverflowScrolling:"touch"},this.props.style),u=this.props.hasChildren||!!(this.props.children&&this.props.children instanceof Array&&this.props.children.length),d=this.props.pullDownToRefresh&&this.props.height?{overflow:"auto"}:{};return T("div",{style:d,className:"infinite-scroll-component__outerdiv",children:H("div",{className:"infinite-scroll-component "+(this.props.className||""),ref:function(x){return r._infScroll=x},style:s,children:[this.props.pullDownToRefresh&&T("div",{style:{position:"relative"},ref:function(x){return r._pullDown=x},children:T("div",{style:{position:"absolute",left:0,right:0,top:-1*this.maxPullDownDistance},children:this.state.pullToRefreshThresholdBreached?this.props.releaseToRefreshContent:this.props.pullDownToRefreshContent})}),this.props.children,!this.state.showLoader&&!u&&this.props.hasMore&&this.props.loader,this.state.showLoader&&this.props.hasMore&&this.props.loader,!this.props.hasMore&&this.props.endMessage]})})},t})(ne.exports.Component);MD.propTypes={itemHeight:_e.number};function MD({itemHeight:e=20}){console.log(e);const[t,r]=ne.exports.useState([]),[s,u]=ne.exports.useState({page:1,outstanding:1}),[d,x]=ne.exports.useState(1);ne.exports.useEffect(()=>{(async()=>{const _=await Gs.getAll(s);r(_)})()},[s,e]);const l=_=>{u(S=>({...S,page:_})),x(_),window.scrollTo({top:0,behavior:"smooth"})};return H("div",{className:"w-full  h-full",children:[T("div",{className:"lg:pt-5 lg:pl-5",children:t==null?void 0:t.map((_,S)=>T(eT,{data:_},S))}),T("div",{children:T(Fd,{data:t,onChange:_=>l(_),itemsPerPage:5,count:e,page:d})})]})}kD.propTypes={};function kD(e){const[t,r]=ne.exports.useState([]),s=yr();ne.exports.useEffect(()=>{(async()=>{const d=await yo.getAll({outstanding:1,status:1});r(d)})()},[]);const u=d=>{s(`/place/${d.slug}`)};return T("div",{className:"px-3 py-4 rounded-xl bg-white ",children:H("div",{children:[T("h3",{className:"text-[20px] text-center font-semibold border-b-2 border-b-[#eee]",children:"\u0110\u1ECBa \u0111i\u1EC3m n\u1ED5i b\u1EADt"}),t==null?void 0:t.map(d=>{var x,l;return T("div",{children:H("div",{onClick:()=>u(d),className:"px-[6px] py-[10px] flex relative hover:bg-[#eee] cursor-pointer transition-all duration-300",children:[T("img",{src:((x=d==null?void 0:d.listImage)==null?void 0:x.length)>0&&((l=d==null?void 0:d.listImage[0])==null?void 0:l.url),alt:"",className:"mr-[10px] w-[50px] h-[50px] object-cover rounded-[4px]"}),H("div",{className:"pr-3 mr-[10px] flex-1",children:[T("p",{className:"text-base text-black font-semibold mb-[2px]",children:d==null?void 0:d.name}),T("p",{className:"text-sm text-[#6b6b6b] truncate-text",children:d==null?void 0:d.description})]})]})},d==null?void 0:d.id)})]})})}PD.propTypes={};function PD(e){const[t,r]=ne.exports.useState(0);return ne.exports.useEffect(()=>{(async()=>{const s=await Gs.getAll({page:0,outstanding:1});r(s==null?void 0:s.length)})()},[]),T(qs,{children:T("div",{className:"bg-[linear-gradient(180deg,#ffb8b8,#fbfbfb)] bg-[-webkit-linear-gradient(top,#ffb8b8,#fbfbfb)]",children:H("div",{className:"max-w-[1200px] mx-auto md:flex block ",children:[T("div",{className:"lg:p-0 pt-5 pb-14 px-4 lg:w-2/3 w-full",children:T(MD,{itemHeight:t})}),T("div",{className:"lg:pt-5 lg:pl-5 w-1/3 md:block hidden",children:T(kD,{})})]})})})}ID.propTypes={};function ID(e){var d;const t=jr(x=>x.auth.current),r=Ei(),s=yr(),u=async()=>{try{await Zi.logout();const x=jE();r(x),s("/")}catch(x){console.log("Error",x)}};return H(yn,{children:[H("div",{className:"flex gap-6  border-b-2 pb-3",children:[T("div",{className:"rounded-full overflow-hidden",children:T("img",{src:((d=t==null?void 0:t.image)==null?void 0:d.url)||"/img/user-default.jpg",alt:t==null?void 0:t.name,className:"w-[60px] h-[60px]"})}),H("div",{children:[T("p",{className:"text-lg font-bold truncate-text",children:t==null?void 0:t.name}),T("p",{className:"text[16px] text-[#474747] font-medium",children:"User"})]})]}),H("div",{className:"pt-2",children:[H(Jt,{to:"/setting",className:"flex items-center gap-x-[6px] py-2 px-[14px]    bg-[#f6f6f6] text-primary transition-all duration-150",children:[T(PI,{className:"w-[28px] text-base"}),T("p",{className:" text-base  font-semibold overflow-ellipsis whitespace-normal overflow-hidden ",children:"Ch\u1EC9nh s\u1EEDa h\u1ED3 s\u01A1"})]}),H(Jt,{to:"/",className:"flex items-center gap-x-[6px] py-2 px-[14px]  border-b-[1px] text-black hover:bg-[#f6f6f6] hover:text-primary transition-all duration-150",children:[T(kE,{className:"w-[28px] text-base"}),T("p",{className:" text-base  font-semibold overflow-ellipsis whitespace-normal overflow-hidden ",children:"Li\xEAn h\u1EC7 - g\xF3p \xFD"})]}),H("div",{onClick:u,className:"flex items-center gap-x-[6px] py-2 px-[14px] cursor-pointer   text-black hover:bg-[#f6f6f6] hover:text-primary transition-all duration-150",children:[T(II,{className:"w-[28px] text-base"}),T("p",{className:" text-base  font-semibold overflow-ellipsis whitespace-normal overflow-hidden ",children:"\u0110\u0103ng xu\u1EA5t"})]})]})]})}Nf.propTypes={name:_e.string,user:_e.object,errorMessage:_e.string,title:_e.string,content:_e.string,isChange:_e.bool,type:_e.string};function Nf({name:e="",user:t={},errorMessage:r="",title:s="",content:u="",isChange:d=!0,type:x="default",children:l}){const{control:_,handleSubmit:S,setValue:C,formState:k,reset:D}=us({mode:"onSubmit",reValidateMode:"onSubmit"}),U=yr(),[q,L]=ne.exports.useState(!1),[K,R]=ne.exports.useState(""),F=Ei();return T("form",{onSubmit:S(async J=>{var fe;if(!J[e]||J[e].trim().length===0){R(r);return}if(!J[e]||J[e].trim().length>20||!J[e]||J[e].trim().length<8){R("T\u1ED1i thi\u1EC3u 8 k\xED t\u1EF1 v\xE0 t\u1ED1i \u0111a 20 k\xED t\u1EF1");return}const re=/^\+?[0-9]{1,3}\s?[0-9]{3,}$/;if((J==null?void 0:J.phone)&&!re.test(J.phone)){R("Vui l\xF2ng nh\u1EADp \u0111\xFAng \u0111\u1ECBnh d\u1EA1ng s\u1ED1 \u0111i\u1EC7n tho\u1EA1i.");return}if((J==null?void 0:J.name)&&((fe=J==null?void 0:J.name)==null?void 0:fe.length)>20){R("T\u1ED1i \u0111a 20 k\xED t\u1EF1.");return}try{if(x==="password"){J.email=t.email,console.log(J);const ce=await Zi.changePassword(J);F(kA({...J,field:e})),Yt("C\u1EADp nh\u1EADt th\xF4ng tin th\xE0nh c\xF4ng"),L(!1),C("password",null),C("oldPassword",null),C("retypePassword",null);return}const be=await Zi.updateUser(t==null?void 0:t.slug,J);F(kA({...J,field:e})),Yt("C\u1EADp nh\u1EADt th\xF4ng tin th\xE0nh c\xF4ng"),C(e,null),L(!1)}catch(be){Yt.error(be.message||"C\xF3 l\u1ED7i x\u1EA3y ra vui l\xF2ng th\u1EED l\u1EA1i sau."),L(!1),U("/setting")}}),className:` hover:bg-[#f6f6f6]  rounded-md border-b-2 ${q?"bg-[#f6f6f6] py-4 px-[10px]":""}`,children:q?H("div",{children:[H("p",{className:"flex items-center gap-2 text-[21px] font-semibold",children:[T("span",{children:l}),s]}),H("div",{className:"pl-8",children:[x==="default"?T("div",{className:"max-w-[240px] mt-2",children:T(ar,{control:_,name:e,placeholder:t[e]||"********"})}):H("div",{children:[T("div",{className:"max-w-[240px] mt-2",children:T(ar,{control:_,name:"oldPassword",placeholder:"M\u1EADt kh\u1EA9u c\u0169",type:"password"})}),T("div",{className:"max-w-[240px] mt-2",children:T(ar,{control:_,name:"password",placeholder:"M\u1EADt kh\u1EA9u m\u1EDBi",type:"password"})}),T("div",{className:"max-w-[240px] mt-2",children:T(ar,{control:_,name:"retypePassword",placeholder:"Nh\u1EADp l\u1EA1i m\u1EADt kh\u1EA9u m\u1EDBi",type:"password"})})]}),K&&T("span",{className:"block font-medium text-sm text-primary transition-all duration-150",children:K}),H("div",{className:"mt-2",children:[T("button",{type:"submit",className:"text-white bg-primary p-1 rounded-md",children:"C\u1EADp nh\u1EADt"}),T("span",{type:"button",onClick:()=>{L(!1),R("")},className:"text-white ml-2 bg-slate-400 p-1 px-2 rounded-md cursor-pointer",children:"H\u1EE7y"})]})]})]}):H("div",{className:"flex items-center justify-between cursor-pointer py-4 px-[10px]",onClick:()=>{!d||(R(""),L(!0))},children:[H("div",{children:[H("p",{className:"flex items-center gap-2 text-[21px] font-semibold",children:[T("span",{children:l}),t!=null&&t.id?s||t[e]:""]}),u?T("p",{children:u}):null]}),e==="email"?"":T("p",{className:"w-9 h-9 rounded-full bg-[#eee] hover:bg-[#ccc] hover:text-primary transition-all  flex items-center justify-center",children:T(Cw,{})})]})})}DD.propTypes={};function DD(e){const t=jr(r=>r.auth.current);return H("div",{children:[T(Nf,{name:"name",user:t,errorMessage:"T\xEAn kh\xF4ng \u0111\u01B0\u1EE3c \u0111\u1EC3 tr\u1ED1ng",title:t==null?void 0:t.name,children:T(R0,{})}),T(Nf,{name:"password",user:t,errorMessage:"M\u1EADt kh\u1EA9u kh\xF4ng \u0111\u01B0\u1EE3c \u0111\u1EC3 tr\u1ED1ng",title:"M\u1EADt kh\u1EA9u",content:"********",type:"password",children:T(R0,{})}),T(Nf,{name:"email",user:t,errorMessage:"Email kh\xF4ng \u0111\u01B0\u1EE3c \u0111\u1EC3 tr\u1ED1ng",title:"Email",content:t==null?void 0:t.email,isChange:!1,children:T(R0,{})}),T(Nf,{name:"phone",user:t,errorMessage:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i kh\xF4ng \u0111\u01B0\u1EE3c \u0111\u1EC3 tr\u1ED1ng",title:"\u0110i\u1EC7n tho\u1EA1i",content:t==null?void 0:t.phone,children:T(R0,{})})]})}zD.propTypes={};function zD(e){const t=jr(s=>s.auth.current),r=yr();return ne.exports.useEffect(()=>{(async()=>{try{const s=await Zi.getBySlug(t==null?void 0:t.slug);s!=null&&s.id||r("/not-found")}catch{r("/not-found")}})()},[t]),T(Ex,{children:T(qs,{children:H("div",{className:"max-w-[1200px] mx-auto lg:flex block px-4 gap-5 lg:pb-0 pb-12",children:[T("div",{className:"md:w-[340px] w-full bg-white shadow-[0_2px_8px_rgba(0,0,0,.15)] my-5 p-4 rounded-md",children:T(ID,{})}),T("div",{className:"w-full max-w-[640px] bg-white shadow-[0_2px_8px_rgba(0,0,0,.15)] my-5 px-4 py-2 rounded-md",children:T(DD,{})})]})})})}ND.propTypes={control:_e.object,areas:_e.array,onChange:_e.func,formState:_e.object,errorMessage:_e.string,blog:_e.object};function ND({control:e=null,areas:t=[],onChange:r=null,formState:s=null,errorMessage:u="",blog:d={}}){var l,_,S,C,k;const x=t.map(D=>({id:D==null?void 0:D.id,label:D==null?void 0:D.name,value:D==null?void 0:D.id}));return H(yn,{children:[T("p",{className:"text-[21px] font-medium text-primary pb-2  border-b-[1px]",children:"Th\xF4ng tin c\u01A1 b\u1EA3n"}),T("div",{children:H("div",{className:"py-5 lg:px-4 flex flex-col gap-5 px-0",children:[H("div",{className:"flex items-center ",children:[H("label",{htmlFor:"name",className:"lg:min-w-40 min-w-20 text-[14px] mr-16 xs:mr-3",children:["T\xEAn qu\xE1n",T("span",{className:"text-primary pl-1 font-bold",children:"*"})]}),T(ar,{control:e,name:"name",id:"name",type:"text",placeholder:"Cafe Ha Noi",data:d==null?void 0:d.name})]}),(s==null?void 0:s.errors.name)&&T("span",{className:"block font-medium text-sm text-primary transition-all duration-150",children:(l=s.errors.name)==null?void 0:l.message}),H("div",{className:"flex items-center ",children:[H("label",{htmlFor:"area_id",className:"lg:min-w-40 min-w-20 text-[14px] mr-16 xs:mr-3",children:["Khu v\u1EF1c",T("span",{className:"text-primary pl-1 font-bold",children:"*"})]}),T(ha,{control:e,name:"area_id",id:"area_id",options:x,className:"w-full h-[38px]",defaultValue:((_=d==null?void 0:d.areas)==null?void 0:_.length)>0?(S=d==null?void 0:d.areas[0])==null?void 0:S.id:0})]}),(s==null?void 0:s.errors.area_id)&&T("span",{className:"block font-medium text-sm text-primary transition-all duration-150",children:(C=s.errors.area_id)==null?void 0:C.message}),H("div",{className:"flex items-center ",children:[H("label",{htmlFor:"location",className:"lg:min-w-40 min-w-20 text-[14px] mr-16 xs:mr-3",children:["\u0110\u1ECBa ch\u1EC9",T("span",{className:"text-primary pl-1 font-bold",children:"*"})]}),T(ar,{control:e,name:"location",id:"location",type:"text",placeholder:"Dong Da Ha Noi"})]}),(s==null?void 0:s.errors.location)&&T("span",{className:"block font-medium text-sm text-primary transition-all duration-150",children:(k=s.errors.location)==null?void 0:k.message}),H("div",{className:"flex items-center ",children:[H("label",{htmlFor:"description",className:"lg:min-w-40 min-w-20 text-[14px] mr-16 xs:mr-3",children:["Gi\u1EDBi thi\u1EC7u",T("span",{className:"text-primary pl-1 font-bold",children:"*"})]}),T(Od,{control:e,name:"description",id:"description",placeholder:"Quan cafe rat dep",className:"w-full mt-0",onChange:r,onKeyPress:null,dValue:d==null?void 0:d.description})]}),u&&T("span",{className:"block font-medium text-sm text-primary transition-all duration-150",children:u})]})})]})}LD.propTypes={control:_e.object,formState:_e.object};function LD({control:e=null,formState:t=null}){return H(yn,{children:[T("p",{className:"text-[21px] font-medium text-primary pb-2  border-b-[1px]",children:"Th\xF4ng tin li\xEAn h\u1EC7"}),T("div",{children:H("div",{className:"py-5 lg:px-4 flex flex-col gap-5 px-0",children:[H("div",{className:"flex items-center ",children:[T("label",{htmlFor:"email",className:"lg:min-w-40 min-w-[92px] text-[14px] ",children:"Email:"}),T(ar,{control:e,name:"email",id:"email",type:"text",placeholder:"example@gmail.com"})]}),H("div",{className:"flex items-center ",children:[T("label",{htmlFor:"facebook",className:"lg:min-w-40 min-w-[92px] text-[14px] ",children:"Facebook:"}),T(ar,{control:e,name:"facebook",id:"facebook",type:"text",placeholder:"https://www.facebook.com"})]}),H("div",{className:"flex items-center ",children:[T("label",{htmlFor:"phone",className:"lg:min-w-40 min-w-[92px] text-[14px] ",children:"\u0110i\u1EC7n tho\u1EA1i:"}),T(ar,{control:e,name:"phone",id:"phone",type:"text",placeholder:"0971151472"})]})]})})]})}FD.propTypes={onChange:_e.func,error:_e.object,blog:_e.object};function FD({onChange:e=null,error:t={},blog:r={}}){var S,C;const[s,u]=ne.exports.useState([]),[d,x]=ne.exports.useState([]),l=k=>{const D=Array.from(k.target.files).map((q,L)=>URL.createObjectURL(k.target.files[L])),U=Array.from(k.target.files).map((q,L)=>k.target.files[L]);u(q=>[...q,...D]),e&&e({listImageFile:U})},_=k=>{const D=Array.from(k.target.files).map((q,L)=>URL.createObjectURL(k.target.files[L])),U=Array.from(k.target.files).map((q,L)=>k.target.files[L]);x(q=>[...q,...D]),e&&e({listMenuFile:U})};return H(yn,{children:[T("p",{className:"text-[21px] font-medium text-primary pb-2  border-b-[1px]",children:"H\xECnh \u1EA3nh"}),H("div",{className:"mt-4 grid grid-cols-3 lg:grid-cols-7 gap-3 lg:px-4 px-0",children:[s.map((k,D)=>H("div",{className:"w-[104px] h-[104px]   opacity-80 hover:opacity-100 transition-all duration-300 cursor-pointer relative",children:[T("div",{className:"absolute inset-0  bg-[rgba(0,0,0,0.3) hover:bg-[rgba(0,0,0,0.5)] rounded-[10px] transition-all duration-300 z-10"}),T("img",{src:k,alt:k,className:"w-full h-full object-cover rounded-[10px]"})]},D)),(s==null?void 0:s.length)===0&&((S=r==null?void 0:r.listImage)==null?void 0:S.map((k,D)=>H("div",{className:"w-[104px] h-[104px]   opacity-80 hover:opacity-100 transition-all duration-300 cursor-pointer relative",children:[T("div",{className:"absolute inset-0  bg-[rgba(0,0,0,0.3) hover:bg-[rgba(0,0,0,0.5)] rounded-[10px] transition-all duration-300 z-10"}),T("img",{src:k==null?void 0:k.url,alt:k,className:"w-full h-full object-cover rounded-[10px]"})]},D))),H("div",{className:"mb-2 mr-2 text-sm rounded-[10px] w-[104px] h-[104px] border flex items-center justify-center",children:[H("label",{htmlFor:"listImageFile",className:"flex flex-col items-center justify-center cursor-pointer gap-y-2",children:[T(md,{className:"text-[20px]"}),T("span",{children:"Th\xEAm \u1EA3nh"})]}),T("input",{onChange:l,type:"file",name:"listImageFile",id:"listImageFile",className:"hidden",accept:"image/*",multiple:!0})]})]}),(t==null?void 0:t.image)&&T("span",{className:"block font-medium text-sm text-primary transition-all duration-150",children:t.image}),T("p",{className:"text-[21px] font-medium text-primary pb-2  border-b-[1px] mt-5",children:"Menu"}),H("div",{className:"mt-4 grid grid-cols-3 lg:grid-cols-7 gap-3",children:[d.map((k,D)=>H("div",{className:"w-[104px] h-[104px]  opacity-80 hover:opacity-100 transition-all duration-300 cursor-pointer relative",children:[T("div",{className:"absolute inset-0  bg-[rgba(0,0,0,0.3) hover:bg-[rgba(0,0,0,0.5)] rounded-[10px] transition-all duration-300 z-10"}),T("img",{src:k,alt:k,className:"w-full h-full object-cover rounded-[10px]"})]},D)),(d==null?void 0:d.length)===0&&((C=r==null?void 0:r.listMenu)==null?void 0:C.map((k,D)=>H("div",{className:"w-[104px] h-[104px]   opacity-80 hover:opacity-100 transition-all duration-300 cursor-pointer relative",children:[T("div",{className:"absolute inset-0  bg-[rgba(0,0,0,0.3) hover:bg-[rgba(0,0,0,0.5)] rounded-[10px] transition-all duration-300 z-10"}),T("img",{src:k==null?void 0:k.url,alt:k,className:"w-full h-full object-cover rounded-[10px]"})]},D))),H("div",{className:"mb-2 mr-2 text-sm rounded-[10px] w-[104px] h-[104px] border flex items-center justify-center",children:[H("label",{htmlFor:"listMenuFile",className:"flex flex-col items-center justify-center cursor-pointer gap-y-2",children:[T(md,{className:"text-[20px]"}),T("span",{children:"Th\xEAm \u1EA3nh"})]}),T("input",{onChange:_,type:"file",name:"listMenuFile",id:"listMenuFile",className:"hidden",accept:"image/*",multiple:!0})]})]}),(t==null?void 0:t.menu)&&T("span",{className:"block font-medium text-sm text-primary transition-all duration-150",children:t.menu})]})}RD.propTypes={control:_e.object,kinds:_e.array,conveniences:_e.array,purposes:_e.array,onChange:_e.func,formState:_e.object,blog:_e.object,error:_e.object};function RD({control:e=null,kinds:t=[],conveniences:r=[],purposes:s=[],onChange:u=null,formState:d=null,blog:x={},error:l}){var k,D,U,q,L,K,R,F,V,J,re,fe,be;const _=t.map(ce=>({id:ce==null?void 0:ce.id,label:ce==null?void 0:ce.name,value:ce==null?void 0:ce.id})),S=r.map(ce=>({id:ce==null?void 0:ce.id,label:ce==null?void 0:ce.name,value:ce==null?void 0:ce.id})),C=s.map(ce=>({id:ce==null?void 0:ce.id,label:ce==null?void 0:ce.name,value:ce==null?void 0:ce.id}));return H(yn,{children:[T("p",{className:"text-[21px] font-medium text-primary pb-2  border-b-[1px]",children:"Th\xF4ng tin kh\xE1c"}),H("div",{children:[T("div",{className:"py-5 lg:px-4 flex flex-col gap-5 px-0",children:H("div",{className:"flex items-center justify-between flex-1 gap-2",children:[H("div",{className:"flex items-center justify-between",children:[H("label",{htmlFor:"startTime",className:"lg:min-w-40 min-w-[92px] text-[14px]",children:["Th\u1EDDi gian m\u1EDF c\u1EEDa"," ",T("span",{className:"text-primary pl-1 font-bold",children:"*"})]}),T(ar,{control:e,name:"startTime",id:"startTime",type:"text",placeholder:"07:00"})]}),H("div",{className:"flex items-center justify-between",children:[H("label",{htmlFor:"endTime",className:"min-w-[60px] text-[14px] mr-4",children:["\u0110\u1EBFn:",T("span",{className:"text-primary pl-1 font-bold",children:"*"})]}),T(ar,{control:e,name:"endTime",id:"endTime",type:"text",placeholder:"20:00"})]})]})}),H("div",{className:"flex items-center justify-between gap-10 px-4",children:[(d==null?void 0:d.errors.startTime)&&T("span",{className:"block font-medium text-sm text-primary transition-all duration-150",children:(k=d.errors.startTime)==null?void 0:k.message}),(d==null?void 0:d.errors.endTime)&&T("span",{className:"block font-medium text-sm text-primary transition-all duration-150",children:(D=d.errors.endTime)==null?void 0:D.message})]}),T("div",{className:"py-5 lg:px-4 flex flex-col gap-5 px-0",children:H("div",{className:"flex items-center justify-between flex-1 gap-2",children:[H("div",{className:"flex items-center justify-between",children:[H("label",{htmlFor:"priceMin",className:"lg:min-w-40 min-w-[92px] text-[14px]",children:["Kho\u1EA3ng gi\xE1",T("span",{className:"text-primary pl-1 font-bold",children:"*"})]}),T(ar,{control:e,name:"priceMin",id:"priceMin",type:"number",placeholder:"0"})]}),H("div",{className:"flex items-center justify-between",children:[H("label",{htmlFor:"priceMax",className:"min-w-[60px] text-[14px] mr-4",children:["\u0110\u1EBFn:",T("span",{className:"text-primary pl-1 font-bold",children:"*"})]}),T(ar,{control:e,name:"priceMax",id:"priceMax",type:"number",placeholder:"1000000"})]})]})}),H("div",{className:"flex items-center justify-between gap-10 px-4",children:[(d==null?void 0:d.errors.priceMin)&&T("span",{className:"block font-medium text-sm text-primary transition-all duration-150",children:(U=d.errors.priceMin)==null?void 0:U.message}),(d==null?void 0:d.errors.priceMax)&&T("span",{className:"block font-medium text-sm text-primary transition-all duration-150",children:(q=d.errors.priceMax)==null?void 0:q.message})]}),T("div",{className:"py-5 lg:px-4 flex flex-col gap-5 px-0",children:H("div",{className:"flex items-center justify-between flex-1 gap-2",children:[H("div",{className:"flex items-center justify-between",children:[T("label",{htmlFor:"latitude",className:"lg:min-w-40 min-w-[92px] text-[14px] ",children:"V\u0129 \u0111\u1ED9"}),T(ar,{control:e,name:"latitude",id:"latitude",type:"text",placeholder:"21.0336724"})]}),H("div",{className:"flex items-center justify-between",children:[T("label",{htmlFor:"longitude",className:"min-w-[60px] text-[14px] mr-4",children:"Kinh \u0111\u1ED9"}),T(ar,{control:e,name:"longitude",id:"longitude",type:"text",placeholder:"105.8109417"})]})]})}),H("div",{className:"flex items-center justify-between gap-10 px-4",children:[(l==null?void 0:l.latitude)&&T("span",{className:"block font-medium text-sm text-primary transition-all duration-150",children:l==null?void 0:l.latitude}),(l==null?void 0:l.longitude)&&T("span",{className:"block font-medium text-sm text-primary transition-all duration-150",children:l==null?void 0:l.longitude})]}),T("div",{className:"py-5 lg:px-4 flex gap-5 items-center px-0",children:H("div",{className:"flex items-center flex-1",children:[H("label",{htmlFor:"kind_id",className:"lg:min-w-40 min-w-[92px] text-[14px]",children:["Ki\u1EC3u qu\xE1n",T("span",{className:"text-primary pl-1 font-bold",children:"*"})]}),T(ha,{control:e,name:"kind_id",id:"kind_id",options:_,className:"w-full h-[38px]",defaultValue:((L=x==null?void 0:x.kinds)==null?void 0:L.length)>0?(K=x==null?void 0:x.kinds[0])==null?void 0:K.id:0})]})}),(d==null?void 0:d.errors.kind_id)&&T("span",{className:"block font-medium text-sm text-primary transition-all duration-150",children:(R=d.errors.kind_id)==null?void 0:R.message}),T("div",{className:"py-5 lg:px-4 flex gap-5 items-center px-0",children:H("div",{className:"flex items-center flex-1",children:[H("label",{htmlFor:"convenience_id",className:"lg:min-w-40 min-w-[92px] text-[14px]",children:["Ti\u1EC7n \xEDch",T("span",{className:"text-primary pl-1 font-bold",children:"*"})]}),T(ha,{control:e,name:"convenience_id",id:"convenience_id",options:S,className:"w-full h-[38px]",defaultValue:((F=x==null?void 0:x.conveniences)==null?void 0:F.length)>0?(V=x==null?void 0:x.conveniences[0])==null?void 0:V.id:0})]})}),(d==null?void 0:d.errors.convenience_id)&&T("span",{className:"block font-medium text-sm text-primary transition-all duration-150",children:(J=d.errors.convenience_id)==null?void 0:J.message}),T("div",{className:"py-5 lg:px-4 flex gap-5 items-center px-0",children:H("div",{className:"flex items-center flex-1",children:[H("label",{htmlFor:"purpose_id",className:"lg:min-w-40 min-w-[92px] text-[14px]",children:["M\u1EE5c \u0111\xEDch",T("span",{className:"text-primary pl-1 font-bold",children:"*"})]}),T(ha,{control:e,name:"purpose_id",id:"purpose_id",options:C,className:"w-full h-[38px]",defaultValue:((re=x==null?void 0:x.purposes)==null?void 0:re.length)>0?(fe=x==null?void 0:x.purposes[0])==null?void 0:fe.id:0})]})})," ",(d==null?void 0:d.errors.purpose_id)&&T("span",{className:"block font-medium text-sm text-primary transition-all duration-150",children:(be=d.errors.purpose_id)==null?void 0:be.message})]})]})}OD.propTypes={};const Xte=Tu({name:cr().trim().max(50,"T\xEAn qu\xE1n kh\xF4ng \u0111\u01B0\u1EE3c v\u01B0\u1EE3t qu\xE1 50 k\xFD t\u1EF1").required("Vui l\xF2ng nh\u1EADp t\xEAn qu\xE1n"),area_id:cr().trim().required("Vui l\xF2ng ch\u1ECDn khu v\u1EF1c"),location:cr().trim().max(255,"\u0110\u1ECBa ch\u1EC9 qu\xE1n kh\xF4ng \u0111\u01B0\u1EE3c v\u01B0\u1EE3t qu\xE1 255 k\xFD t\u1EF1").required("Vui l\xF2ng nh\u1EADp \u0111\u1ECBa ch\u1EC9"),startTime:cr().trim().matches(/^([01]\d|2[0-3]):([0-5]\d)$/,"Gi\u1EDD m\u1EDF c\u1EEDa kh\xF4ng h\u1EE3p l\u1EC7. V\xED d\u1EE5: 07:00").required("Vui l\xF2ng nh\u1EADp gi\u1EDD m\u1EDF c\u1EEDa"),endTime:cr().trim().matches(/^([01]\d|2[0-3]):([0-5]\d)$/,"Gi\u1EDD \u0111\xF3ng c\u1EEDa kh\xF4ng h\u1EE3p l\u1EC7. V\xED d\u1EE5: 22:00").required("Vui l\xF2ng nh\u1EADp gi\u1EDD \u0111\xF3ng c\u1EEDa"),priceMin:mm().typeError("priceMin must be a number").required("Vui l\xF2ng nh\u1EADp gi\xE1 t\u1ED1i thi\u1EC3u").min(0,"Gi\xE1 t\u1ED1i thi\u1EC3u ph\u1EA3i l\u1EDBn h\u01A1n ho\u1EB7c b\u1EB1ng 0").max(1e6,"Gi\xE1 t\u1ED1i thi\u1EC3u kh\xF4ng \u0111\u01B0\u1EE3c v\u01B0\u1EE3t qu\xE1 1,000,000"),priceMax:mm().typeError("priceMax must be a number").required("Vui l\xF2ng nh\u1EADp gi\xE1 t\u1ED1i \u0111a").min(mx("priceMin"),"Gi\xE1 t\u1ED1i \u0111a ph\u1EA3i l\u1EDBn h\u01A1n gi\xE1 t\u1ED1i thi\u1EC3u").test("is-greater","Gi\xE1 t\u1ED1i \u0111a ph\u1EA3i l\u1EDBn h\u01A1n gi\xE1 t\u1ED1i thi\u1EC3u",function(e){return e>this.parent.priceMin}).max(1e6,"Gi\xE1 t\u1ED1i \u0111a kh\xF4ng \u0111\u01B0\u1EE3c v\u01B0\u1EE3t qu\xE1 1,000,000"),kind_id:cr().trim().required("Vui l\xF2ng ch\u1ECDn ki\u1EC3u qu\xE1n"),convenience_id:cr().trim().required("Vui l\xF2ng ch\u1ECDn ti\u1EC7n \xEDch c\u1EE7a qu\xE1n"),purpose_id:cr().trim().required("Vui l\xF2ng ch\u1ECDn m\u1EE5c \u0111\xEDch c\u1EE7a qu\xE1n")});function OD(e){const t=Ji(),r=yr(),s=jr(R=>R.auth.current),u=t.pathname.split("/")[2],[d,x]=ne.exports.useState(),[l,_]=ne.exports.useState({}),[S,C]=ne.exports.useState({}),{control:k,handleSubmit:D,setValue:U,formState:q}=us({mode:"onSubmit",reValidateMode:"onSubmit",resolver:zd(Xte)});ne.exports.useEffect(()=>{(async()=>{var R,F,V,J,re,fe,be,ce,ve,Fe;try{const Le=await yo.getBySlug(u||"");if(!(Le!=null&&Le.id)){r("/not-found");return}const Ie=await Rm.getAll({limit:100}),Ke=await bx.getAll({limit:100}),bt=await wx.getAll({limit:100}),ot=await Om.getAll({limit:100});C({areas:Ie,kinds:Ke,conveniences:bt,purposes:ot,blog:Le}),U("name",Le==null?void 0:Le.name),U("location",Le==null?void 0:Le.location),U("area_id",((R=Le==null?void 0:Le.areas)==null?void 0:R.length)>0?(F=Le==null?void 0:Le.areas[0])==null?void 0:F.id:void 0),U("kind_id",((V=Le==null?void 0:Le.kinds)==null?void 0:V.length)>0?(J=Le==null?void 0:Le.kinds[0])==null?void 0:J.id:void 0),U("purpose_id",((re=Le==null?void 0:Le.purposes)==null?void 0:re.length)>0?(fe=Le==null?void 0:Le.purposes[0])==null?void 0:fe.id:void 0),U("convenience_id",((be=Le==null?void 0:Le.conveniences)==null?void 0:be.length)>0?(ce=Le==null?void 0:Le.conveniences[0])==null?void 0:ce.id:void 0),U("startTime",((ve=Le==null?void 0:Le.schedules)==null?void 0:ve.length)>0?pd(Le==null?void 0:Le.schedules[0].startTime):"07:00"),U("endTime",((Fe=Le==null?void 0:Le.schedules)==null?void 0:Fe.length)>0?pd(Le==null?void 0:Le.schedules[0].endTime):"22:00"),U("priceMin",Le==null?void 0:Le.priceMin),U("priceMax",Le==null?void 0:Le.priceMax),U("latitude",(Le==null?void 0:Le.latitude)||""),U("longitude",(Le==null?void 0:Le.longitude)||""),U("email",Le==null?void 0:Le.email),U("facebook",Le==null?void 0:Le.facebook),U("phone",Le==null?void 0:Le.phone)}catch{r("/not-found")}})()},[t,t.pathname]);const L=R=>{x(F=>({...F,...R}))};return T(qs,{children:T("div",{className:"flex justify-center ",children:H("div",{className:" shadow-[0_2px_8px_rgba(0,0,0,.15)] bg-white px-5 py-3  xs:px-2 m-2 w-[928px] rounded-md mb-0 xs:mb-20",children:[T("p",{className:"font-medium text-[28px]",children:"Ch\u1EC9nh s\u1EEDa \u0111\u1ECBa \u0111i\u1EC3m"}),H("form",{onSubmit:D(async R=>{var F,V,J,re,fe,be,ce,ve,Fe,Le,Ie,Ke,bt;R={...R,...d},R!=null&&R.description||(R.description=(F=S==null?void 0:S.blog)==null?void 0:F.description);try{if(((V=d==null?void 0:d.listImageFile)==null?void 0:V.length)>0&&((J=d==null?void 0:d.listImageFile)==null?void 0:J.length)<5){_({image:"\xCDt nh\u1EA5t 5 images"});return}if(((re=d==null?void 0:d.listMenuFile)==null?void 0:re.length)>0&&((fe=d==null?void 0:d.listMenuFile)==null?void 0:fe.length)<2){_({menu:"\xCDt nh\u1EA5t 2 menus"});return}if(!(R!=null&&R.description)&&!((be=S==null?void 0:S.blog)!=null&&be.description)){_({description:"Vui l\xF2ng nh\u1EADp tr\u01B0\u1EDDng gi\u1EDBi thi\u1EC7u"});return}_(null),R.listScheduleDto=JSON.stringify([{dayOfWeek:1,startTime:W1(R==null?void 0:R.startTime),endTime:W1(R==null?void 0:R.endTime)}]),R.area_id=+R.area_id,R.convenience_id=+R.convenience_id,R.kind_id=+R.kind_id,R.purpose_id=+R.purpose_id,R.status=1;const ot=new FormData;if((R==null?void 0:R.latitude)||(R==null?void 0:R.longitude)){const Ot=/^-?\d+(\.\d+)?$/;if(Ot.test(R==null?void 0:R.latitude)){if(!Ot.test(R==null?void 0:R.longitude)){_({longitude:"Kinh \u0111\u1ED9 ph\u1EA3i l\xE0 s\u1ED1 th\u1EF1c, v\xED d\u1EE5: 105.8109417"}),Yt.error("Kinh \u0111\u1ED9 ph\u1EA3i l\xE0 s\u1ED1 th\u1EF1c, v\xED d\u1EE5: 21.0336724");return}}else{_({latitude:"V\u0129 \u0111\u1ED9 ph\u1EA3i l\xE0 s\u1ED1 th\u1EF1c, v\xED d\u1EE5: 21.0336724"}),Yt.error("V\u0129 \u0111\u1ED9 ph\u1EA3i l\xE0 s\u1ED1 th\u1EF1c, v\xED d\u1EE5: 21.0336724");return}R.longitude=R!=null&&R.longitude?parseFloat(R==null?void 0:R.longitude):null,R.latitude=R!=null&&R.latitude?parseFloat(R.latitude):null,ot.append("latitude",R==null?void 0:R.latitude),ot.append("longitude",R==null?void 0:R.longitude)}if((ce=d==null?void 0:d.listImageFile)==null||ce.forEach((Ot,Dt)=>{ot.append(`listImageFile[${Dt}]`,Ot)}),(ve=d==null?void 0:d.listMenuFile)==null||ve.forEach((Ot,Dt)=>{ot.append(`listMenuFile[${Dt}]`,Ot)}),ot.append("name",R==null?void 0:R.name),ot.append("listScheduleDto",R==null?void 0:R.listScheduleDto),ot.append("area_id",R==null?void 0:R.area_id),ot.append("convenience_id",R==null?void 0:R.convenience_id),ot.append("description",R==null?void 0:R.description),ot.append("location",R==null?void 0:R.location),ot.append("userId",s.id),ot.append("kind_id",R==null?void 0:R.kind_id),ot.append("purpose_id",R==null?void 0:R.purpose_id),ot.append("status",1),ot.append("priceMin",R==null?void 0:R.priceMin),ot.append("priceMax",R==null?void 0:R.priceMax),((Fe=R==null?void 0:R.email)==null?void 0:Fe.length)>0)if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(R==null?void 0:R.email))ot.append("email",R==null?void 0:R.email);else{Yt.error("Vui l\xF2ng nh\u1EADp \u0111\xFAng \u0111\u1ECBnh d\u1EA1ng email.");return}if(((Le=R==null?void 0:R.facebook)==null?void 0:Le.length)>0)if(/^(?:http(s)?:\/\/)?(www\.)?facebook.com\/[a-zA-Z0-9(\.\?)?]/.test(R==null?void 0:R.facebook))ot.append("facebook",R==null?void 0:R.facebook);else{Yt.error("Vui l\xF2ng nh\u1EADp \u0111\xFAng \u0111\u1ECBnh d\u1EA1ng link facebook.");return}if(((Ie=R==null?void 0:R.phone)==null?void 0:Ie.length)>0)if(/^\+?[0-9]+$/.test(R==null?void 0:R.phone))ot.append("phone",R==null?void 0:R.phone);else{Yt.error("Vui l\xF2ng nh\u1EADp \u0111\xFAng \u0111\u1ECBnh d\u1EA1ng s\u1ED1 \u0111i\u1EC7n tho\u1EA1i.");return}await yo.updateProduct((Ke=S==null?void 0:S.blog)==null?void 0:Ke.id,ot),Yt("Ch\u1EC9nh s\u1EEDa th\xE0nh c\xF4ng"),r(`/place/${(bt=S==null?void 0:S.blog)==null?void 0:bt.slug}`)}catch(ot){console.log(ot),Yt.error((ot==null?void 0:ot.message)||"C\xF3 l\u1ED7i x\u1EA3y ra xin h\xE3y th\u1EED l\u1EA1i sau.")}}),children:[T(ND,{control:k,onChange:L,areas:S==null?void 0:S.areas,formState:q,errorMessage:l==null?void 0:l.description,blog:S==null?void 0:S.blog}),T(RD,{control:k,onChange:L,kinds:S==null?void 0:S.kinds,conveniences:S==null?void 0:S.conveniences,purposes:S==null?void 0:S.purposes,formState:q,blog:S==null?void 0:S.blog,error:l}),T(LD,{control:k,formState:q}),T(FD,{onChange:L,error:l,blog:S==null?void 0:S.blog}),T("button",{type:"submit",className:`text-white text-xl mt-5 w-full h-10 px-5 rounded-lg bg-primary font-semibold  hover:bg-[#be0129] transition-all duration-300
            ${q.isSubmitting?"bg-gray-500 hover:bg-gray-500":"  "}                `,disabled:q.isSubmitting,children:"+ Ch\u1EC9nh s\u1EEDa \u0111\u1ECBa \u0111i\u1EC3m"})]})]})})})}function Kte(){const[e,t]=Ka();return ne.exports.useEffect(()=>{},[e]),document.getElementById("root").style.overflow="unset",H(lO,{children:[T(Co,{path:"/",element:T(lD,{})}),T(Co,{path:"/verify",element:T(CK,{})}),T(Co,{path:"/add-place",element:T(tD,{})}),T(Co,{path:"/edit-place/:name",element:T(OD,{})}),T(Co,{path:"/saved",element:T(K6,{})}),T(Co,{path:"/explore",element:T(PD,{})}),T(Co,{path:"/search",element:T(p6,{})}),T(Co,{path:"/setting",element:T(zD,{})}),T(Co,{path:"/place/:name",element:T(q6,{})}),T(Co,{path:"/profile/:name",element:T(CD,{})}),T(Co,{path:"/place/:name/photo",element:T(AD,{})}),T(Co,{path:"*",element:T(SD,{})})]})}const Yte={auth:wJ},Jte=cJ({reducer:Yte});Yb.createRoot(document.getElementById("root")).render(T(zt.StrictMode,{children:T(yR,{store:Jte,children:T(xO,{children:H(Y2,{children:[T(TK,{position:"top-right",autoClose:3e3,limit:2,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"}),T(Kte,{})]})})})}));
